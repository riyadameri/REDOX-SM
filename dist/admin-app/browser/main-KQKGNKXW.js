var XD=Object.create;var Xx=Object.defineProperty,ZD=Object.defineProperties,JD=Object.getOwnPropertyDescriptor,KD=Object.getOwnPropertyDescriptors,QD=Object.getOwnPropertyNames,AC=Object.getOwnPropertySymbols,eP=Object.getPrototypeOf,DC=Object.prototype.hasOwnProperty,tP=Object.prototype.propertyIsEnumerable;var TC=(n,t,e)=>t in n?Xx(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Ie=(n,t)=>{for(var e in t||={})DC.call(t,e)&&TC(n,e,t[e]);if(AC)for(var e of AC(t))tP.call(t,e)&&TC(n,e,t[e]);return n},yt=(n,t)=>ZD(n,KD(t));var PC=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var IC=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var nP=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of QD(t))!DC.call(n,r)&&r!==e&&Xx(n,r,{get:()=>t[r],enumerable:!(i=JD(t,r))||i.enumerable});return n};var da=(n,t,e)=>(e=n!=null?XD(eP(n)):{},nP(t||!n||!n.__esModule?Xx(e,"default",{value:n,enumerable:!0}):e,n));var _n=(n,t,e)=>new Promise((i,r)=>{var o=d=>{try{u(e.next(d))}catch(p){r(p)}},s=d=>{try{u(e.throw(d))}catch(p){r(p)}},u=d=>d.done?i(d.value):Promise.resolve(d.value).then(o,s);u((e=e.apply(n,t)).next())});var Ta=IC((as,Bb)=>{"use strict";(function(n,t){typeof as=="object"&&typeof Bb<"u"?Bb.exports=t():typeof define=="function"&&define.amd?define(t):(n=typeof globalThis<"u"?globalThis:n||self,n.Sweetalert2=t())})(as,function(){"use strict";function n(v,x,A){if(typeof v=="function"?v===x:v.has(x))return arguments.length<3?x:A;throw new TypeError("Private element is not present on this object")}function t(v,x){if(x.has(v))throw new TypeError("Cannot initialize the same private elements twice on an object")}function e(v,x){return v.get(n(v,x))}function i(v,x,A){t(v,x),x.set(v,A)}function r(v,x,A){return v.set(n(v,x),A),A}let o=100,s={},u=()=>{s.previousActiveElement instanceof HTMLElement?(s.previousActiveElement.focus(),s.previousActiveElement=null):document.body&&document.body.focus()},d=v=>new Promise(x=>{if(!v)return x();let A=window.scrollX,U=window.scrollY;s.restoreFocusTimeout=setTimeout(()=>{u(),x()},o),window.scrollTo(A,U)}),p="swal2-",m=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce((v,x)=>(v[x]=p+x,v),{}),b=["success","warning","info","question","error"].reduce((v,x)=>(v[x]=p+x,v),{}),M="SweetAlert2:",O=v=>v.charAt(0).toUpperCase()+v.slice(1),E=v=>{console.warn(`${M} ${typeof v=="object"?v.join(" "):v}`)},w=v=>{console.error(`${M} ${v}`)},j=[],H=v=>{j.includes(v)||(j.push(v),E(v))},W=(v,x=null)=>{H(`"${v}" is deprecated and will be removed in the next major release.${x?` Use "${x}" instead.`:""}`)},G=v=>typeof v=="function"?v():v,Y=v=>v&&typeof v.toPromise=="function",q=v=>Y(v)?v.toPromise():Promise.resolve(v),re=v=>v&&Promise.resolve(v)===v,V=()=>document.body.querySelector(`.${m.container}`),B=v=>{let x=V();return x?x.querySelector(v):null},X=v=>B(`.${v}`),ie=()=>X(m.popup),ue=()=>X(m.icon),ve=()=>X(m["icon-content"]),_e=()=>X(m.title),me=()=>X(m["html-container"]),he=()=>X(m.image),we=()=>X(m["progress-steps"]),$e=()=>X(m["validation-message"]),Ne=()=>B(`.${m.actions} .${m.confirm}`),Ye=()=>B(`.${m.actions} .${m.cancel}`),_t=()=>B(`.${m.actions} .${m.deny}`),Pe=()=>X(m["input-label"]),pn=()=>B(`.${m.loader}`),cn=()=>X(m.actions),Ce=()=>X(m.footer),Ae=()=>X(m["timer-progress-bar"]),et=()=>X(m.close),wt=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,lt=()=>{let v=ie();if(!v)return[];let x=v.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),A=Array.from(x).sort((Le,St)=>{let Kt=parseInt(Le.getAttribute("tabindex")||"0"),Sn=parseInt(St.getAttribute("tabindex")||"0");return Kt>Sn?1:Kt<Sn?-1:0}),U=v.querySelectorAll(wt),oe=Array.from(U).filter(Le=>Le.getAttribute("tabindex")!=="-1");return[...new Set(A.concat(oe))].filter(Le=>Oe(Le))},qt=()=>Gt(document.body,m.shown)&&!Gt(document.body,m["toast-shown"])&&!Gt(document.body,m["no-backdrop"]),Bn=()=>{let v=ie();return v?Gt(v,m.toast):!1},Zt=()=>{let v=ie();return v?v.hasAttribute("data-loading"):!1},Mt=(v,x)=>{if(v.textContent="",x){let U=new DOMParser().parseFromString(x,"text/html"),oe=U.querySelector("head");oe&&Array.from(oe.childNodes).forEach(St=>{v.appendChild(St)});let Le=U.querySelector("body");Le&&Array.from(Le.childNodes).forEach(St=>{St instanceof HTMLVideoElement||St instanceof HTMLAudioElement?v.appendChild(St.cloneNode(!0)):v.appendChild(St)})}},Gt=(v,x)=>{if(!x)return!1;let A=x.split(/\s+/);for(let U=0;U<A.length;U++)if(!v.classList.contains(A[U]))return!1;return!0},Dt=(v,x)=>{Array.from(v.classList).forEach(A=>{!Object.values(m).includes(A)&&!Object.values(b).includes(A)&&!Object.values(x.showClass||{}).includes(A)&&v.classList.remove(A)})},Qt=(v,x,A)=>{if(Dt(v,x),!x.customClass)return;let U=x.customClass[A];if(U){if(typeof U!="string"&&!U.forEach){E(`Invalid type of customClass.${A}! Expected string or iterable object, got "${typeof U}"`);return}dt(v,U)}},J=(v,x)=>{if(!x)return null;switch(x){case"select":case"textarea":case"file":return v.querySelector(`.${m.popup} > .${m[x]}`);case"checkbox":return v.querySelector(`.${m.popup} > .${m.checkbox} input`);case"radio":return v.querySelector(`.${m.popup} > .${m.radio} input:checked`)||v.querySelector(`.${m.popup} > .${m.radio} input:first-child`);case"range":return v.querySelector(`.${m.popup} > .${m.range} input`);default:return v.querySelector(`.${m.popup} > .${m.input}`)}},en=v=>{if(v.focus(),v.type!=="file"){let x=v.value;v.value="",v.value=x}},Jt=(v,x,A)=>{!v||!x||(typeof x=="string"&&(x=x.split(/\s+/).filter(Boolean)),x.forEach(U=>{Array.isArray(v)?v.forEach(oe=>{A?oe.classList.add(U):oe.classList.remove(U)}):A?v.classList.add(U):v.classList.remove(U)}))},dt=(v,x)=>{Jt(v,x,!0)},Je=(v,x)=>{Jt(v,x,!1)},z=(v,x)=>{let A=Array.from(v.children);for(let U=0;U<A.length;U++){let oe=A[U];if(oe instanceof HTMLElement&&Gt(oe,x))return oe}},I=(v,x,A)=>{A===`${parseInt(`${A}`)}`&&(A=parseInt(A)),A||parseInt(`${A}`)===0?v.style.setProperty(x,typeof A=="number"?`${A}px`:A):v.style.removeProperty(x)},Q=(v,x="flex")=>{v&&(v.style.display=x)},pe=v=>{v&&(v.style.display="none")},Me=(v,x="block")=>{v&&new MutationObserver(()=>{ot(v,v.innerHTML,x)}).observe(v,{childList:!0,subtree:!0})},ce=(v,x,A,U)=>{let oe=v.querySelector(x);oe&&oe.style.setProperty(A,U)},ot=(v,x,A="flex")=>{x?Q(v,A):pe(v)},Oe=v=>!!(v&&(v.offsetWidth||v.offsetHeight||v.getClientRects().length)),st=()=>!Oe(Ne())&&!Oe(_t())&&!Oe(Ye()),mt=v=>v.scrollHeight>v.clientHeight,De=(v,x)=>{let A=v;for(;A&&A!==x;){if(mt(A))return!0;A=A.parentElement}return!1},Be=v=>{let x=window.getComputedStyle(v),A=parseFloat(x.getPropertyValue("animation-duration")||"0"),U=parseFloat(x.getPropertyValue("transition-duration")||"0");return A>0||U>0},Ke=(v,x=!1)=>{let A=Ae();A&&Oe(A)&&(x&&(A.style.transition="none",A.style.width="100%"),setTimeout(()=>{A.style.transition=`width ${v/1e3}s linear`,A.style.width="0%"},10))},ut=()=>{let v=Ae();if(!v)return;let x=parseInt(window.getComputedStyle(v).width);v.style.removeProperty("transition"),v.style.width="100%";let A=parseInt(window.getComputedStyle(v).width),U=x/A*100;v.style.width=`${U}%`},He=()=>typeof window>"u"||typeof document>"u",Pt=`
 <div aria-labelledby="${m.title}" aria-describedby="${m["html-container"]}" class="${m.popup}" tabindex="-1">
   <button type="button" class="${m.close}"></button>
   <ul class="${m["progress-steps"]}"></ul>
   <div class="${m.icon}"></div>
   <img class="${m.image}" />
   <h2 class="${m.title}" id="${m.title}"></h2>
   <div class="${m["html-container"]}" id="${m["html-container"]}"></div>
   <input class="${m.input}" id="${m.input}" />
   <input type="file" class="${m.file}" />
   <div class="${m.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${m.select}" id="${m.select}"></select>
   <div class="${m.radio}"></div>
   <label class="${m.checkbox}">
     <input type="checkbox" id="${m.checkbox}" />
     <span class="${m.label}"></span>
   </label>
   <textarea class="${m.textarea}" id="${m.textarea}"></textarea>
   <div class="${m["validation-message"]}" id="${m["validation-message"]}"></div>
   <div class="${m.actions}">
     <div class="${m.loader}"></div>
     <button type="button" class="${m.confirm}"></button>
     <button type="button" class="${m.deny}"></button>
     <button type="button" class="${m.cancel}"></button>
   </div>
   <div class="${m.footer}"></div>
   <div class="${m["timer-progress-bar-container"]}">
     <div class="${m["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),ee=()=>{let v=V();return v?(v.remove(),Je([document.documentElement,document.body],[m["no-backdrop"],m["toast-shown"],m["has-column"]]),!0):!1},ze=()=>{s.currentInstance&&s.currentInstance.resetValidationMessage()},ke=()=>{let v=ie();if(!v)return;let x=z(v,m.input),A=z(v,m.file),U=v.querySelector(`.${m.range} input`),oe=v.querySelector(`.${m.range} output`),Le=z(v,m.select),St=v.querySelector(`.${m.checkbox} input`),Kt=z(v,m.textarea);x&&(x.oninput=ze),A&&(A.onchange=ze),Le&&(Le.onchange=ze),St&&(St.onchange=ze),Kt&&(Kt.oninput=ze),U&&oe&&(U.oninput=()=>{ze(),oe.value=U.value},U.onchange=()=>{ze(),oe.value=U.value})},Xe=v=>{if(typeof v=="string"){let x=document.querySelector(v);if(!x)throw new Error(`Target element "${v}" not found`);return x}return v},le=v=>{let x=ie();x&&(x.setAttribute("role",v.toast?"alert":"dialog"),x.setAttribute("aria-live",v.toast?"polite":"assertive"),v.toast||x.setAttribute("aria-modal","true"))},Ee=v=>{window.getComputedStyle(v).direction==="rtl"&&(dt(V(),m.rtl),s.isRTL=!0)},We=v=>{let x=ee();if(He()){w("SweetAlert2 requires document to initialize");return}let A=document.createElement("div");A.className=m.container,x&&dt(A,m["no-transition"]),Mt(A,Pt),A.dataset.swal2Theme=v.theme;let U=Xe(v.target||"body");U.appendChild(A),v.topLayer&&(A.setAttribute("popover",""),A.showPopover()),le(v),Ee(U),ke()},ht=(v,x)=>{v instanceof HTMLElement?x.appendChild(v):typeof v=="object"?Ft(v,x):v&&Mt(x,v)},Ft=(v,x)=>{"jquery"in v?nt(x,v):Mt(x,v.toString())},nt=(v,x)=>{if(v.textContent="",0 in x)for(let A=0;A in x;A++)v.appendChild(x[A].cloneNode(!0));else v.appendChild(x.cloneNode(!0))},Vi=(v,x)=>{let A=cn(),U=pn();!A||!U||(!x.showConfirmButton&&!x.showDenyButton&&!x.showCancelButton?pe(A):Q(A),Qt(A,x,"actions"),Lt(A,U,x),Mt(U,x.loaderHtml||""),Qt(U,x,"loader"))};function Lt(v,x,A){let U=Ne(),oe=_t(),Le=Ye();!U||!oe||!Le||($r(U,"confirm",A),$r(oe,"deny",A),$r(Le,"cancel",A),_s(U,oe,Le,A),A.reverseButtons&&(A.toast?(v.insertBefore(Le,U),v.insertBefore(oe,U)):(v.insertBefore(Le,x),v.insertBefore(oe,x),v.insertBefore(U,x))))}function _s(v,x,A,U){if(!U.buttonsStyling){Je([v,x,A],m.styled);return}dt([v,x,A],m.styled),U.confirmButtonColor&&v.style.setProperty("--swal2-confirm-button-background-color",U.confirmButtonColor),U.denyButtonColor&&x.style.setProperty("--swal2-deny-button-background-color",U.denyButtonColor),U.cancelButtonColor&&A.style.setProperty("--swal2-cancel-button-background-color",U.cancelButtonColor),Ks(v),Ks(x),Ks(A)}function Ks(v){let x=window.getComputedStyle(v);if(x.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;let A=x.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");v.style.setProperty("--swal2-action-button-focus-box-shadow",x.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${A}`))}function $r(v,x,A){let U=O(x);ot(v,A[`show${U}Button`],"inline-block"),Mt(v,A[`${x}ButtonText`]||""),v.setAttribute("aria-label",A[`${x}ButtonAriaLabel`]||""),v.className=m[x],Qt(v,A,`${x}Button`)}let ci=(v,x)=>{let A=et();A&&(Mt(A,x.closeButtonHtml||""),Qt(A,x,"closeButton"),ot(A,x.showCloseButton),A.setAttribute("aria-label",x.closeButtonAriaLabel||""))},ir=(v,x)=>{let A=V();A&&(qi(A,x.backdrop),Mn(A,x.position),Fi(A,x.grow),Qt(A,x,"container"))};function qi(v,x){typeof x=="string"?v.style.background=x:x||dt([document.documentElement,document.body],m["no-backdrop"])}function Mn(v,x){x&&(x in m?dt(v,m[x]):(E('The "position" parameter is not valid, defaulting to "center"'),dt(v,m.center)))}function Fi(v,x){x&&dt(v,m[`grow-${x}`])}var $t={innerParams:new WeakMap,domCache:new WeakMap};let Yr=["input","file","range","select","radio","checkbox","textarea"],Qs=(v,x)=>{let A=ie();if(!A)return;let U=$t.innerParams.get(v),oe=!U||x.input!==U.input;Yr.forEach(Le=>{let St=z(A,m[Le]);St&&(tl(Le,x.inputAttributes),St.className=m[Le],oe&&pe(St))}),x.input&&(oe&&fu(x),hu(x))},fu=v=>{if(!v.input)return;if(!zn[v.input]){w(`Unexpected type of input! Expected ${Object.keys(zn).join(" | ")}, got "${v.input}"`);return}let x=nl(v.input);if(!x)return;let A=zn[v.input](x,v);Q(x),v.inputAutoFocus&&setTimeout(()=>{en(A)})},qr=v=>{for(let x=0;x<v.attributes.length;x++){let A=v.attributes[x].name;["id","type","value","style"].includes(A)||v.removeAttribute(A)}},tl=(v,x)=>{let A=ie();if(!A)return;let U=J(A,v);if(U){qr(U);for(let oe in x)U.setAttribute(oe,x[oe])}},hu=v=>{if(!v.input)return;let x=nl(v.input);x&&Qt(x,v,"input")},Xr=(v,x)=>{!v.placeholder&&x.inputPlaceholder&&(v.placeholder=x.inputPlaceholder)},Er=(v,x,A)=>{if(A.inputLabel){let U=document.createElement("label"),oe=m["input-label"];U.setAttribute("for",v.id),U.className=oe,typeof A.customClass=="object"&&dt(U,A.customClass.inputLabel),U.innerText=A.inputLabel,x.insertAdjacentElement("beforebegin",U)}},nl=v=>{let x=ie();if(x)return z(x,m[v]||m.input)},ea=(v,x)=>{["string","number"].includes(typeof x)?v.value=`${x}`:re(x)||E(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof x}"`)},zn={};zn.text=zn.email=zn.password=zn.number=zn.tel=zn.url=zn.search=zn.date=zn["datetime-local"]=zn.time=zn.week=zn.month=(v,x)=>{let A=v;return ea(A,x.inputValue),Er(A,A,x),Xr(A,x),A.type=x.input,A},zn.file=(v,x)=>{let A=v;return Er(A,A,x),Xr(A,x),A},zn.range=(v,x)=>{let A=v,U=A.querySelector("input"),oe=A.querySelector("output");return U&&(ea(U,x.inputValue),U.type=x.input,Er(U,v,x)),oe&&ea(oe,x.inputValue),v},zn.select=(v,x)=>{let A=v;if(A.textContent="",x.inputPlaceholder){let U=document.createElement("option");Mt(U,x.inputPlaceholder),U.value="",U.disabled=!0,U.selected=!0,A.appendChild(U)}return Er(A,A,x),A},zn.radio=v=>{let x=v;return x.textContent="",v},zn.checkbox=(v,x)=>{let A=ie();if(!A)throw new Error("Popup not found");let U=J(A,"checkbox");if(!U)throw new Error("Checkbox input not found");U.value="1",U.checked=!!x.inputValue;let Le=v.querySelector("span");if(Le){let St=x.inputPlaceholder||x.inputLabel;St&&Mt(Le,St)}return U},zn.textarea=(v,x)=>{let A=v;ea(A,x.inputValue),Xr(A,x),Er(A,A,x);let U=oe=>parseInt(window.getComputedStyle(oe).marginLeft)+parseInt(window.getComputedStyle(oe).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let oe=ie();if(!oe)return;let Le=parseInt(window.getComputedStyle(oe).width),St=()=>{if(!document.body.contains(A))return;let Kt=A.offsetWidth+U(A),Sn=ie();Sn&&(Kt>Le?Sn.style.width=`${Kt}px`:I(Sn,"width",x.width))};new MutationObserver(St).observe(A,{attributes:!0,attributeFilter:["style"]})}}),A};let fd=(v,x)=>{let A=me();A&&(Me(A),Qt(A,x,"htmlContainer"),x.html?(ht(x.html,A),Q(A,"block")):x.text?(A.textContent=x.text,Q(A,"block")):pe(A),Qs(v,x))},N=(v,x)=>{let A=Ce();A&&(Me(A),ot(A,!!x.footer,"block"),x.footer&&ht(x.footer,A),Qt(A,x,"footer"))},ne=(v,x)=>{let A=$t.innerParams.get(v),U=ue();if(!U)return;if(A&&x.icon===A.icon){Qe(U,x),fe(U,x);return}if(!x.icon&&!x.iconHtml){pe(U);return}if(x.icon&&Object.keys(b).indexOf(x.icon)===-1){w(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${x.icon}"`),pe(U);return}Q(U),Qe(U,x),fe(U,x),dt(U,x.showClass&&x.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",de)},fe=(v,x)=>{for(let[A,U]of Object.entries(b))x.icon!==A&&Je(v,U);dt(v,x.icon&&b[x.icon]),qe(v,x),de(),Qt(v,x,"icon")},de=()=>{let v=ie();if(!v)return;let x=window.getComputedStyle(v).getPropertyValue("background-color"),A=v.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let U=0;U<A.length;U++)A[U].style.backgroundColor=x},ae=v=>`
  ${v.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${v.animation?'<div class="swal2-success-fix"></div>':""}
  ${v.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,Ge=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Qe=(v,x)=>{if(!x.icon&&!x.iconHtml)return;let A=v.innerHTML,U="";x.iconHtml?U=it(x.iconHtml):x.icon==="success"?(U=ae(x),A=A.replace(/ style=".*?"/g,"")):x.icon==="error"?U=Ge:x.icon&&(U=it({question:"?",warning:"!",info:"i"}[x.icon])),A.trim()!==U.trim()&&Mt(v,U)},qe=(v,x)=>{if(x.iconColor){v.style.color=x.iconColor,v.style.borderColor=x.iconColor;for(let A of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])ce(v,A,"background-color",x.iconColor);ce(v,".swal2-success-ring","border-color",x.iconColor)}},it=v=>`<div class="${m["icon-content"]}">${v}</div>`,ct=(v,x)=>{let A=he();if(A){if(!x.imageUrl){pe(A);return}Q(A,""),A.setAttribute("src",x.imageUrl),A.setAttribute("alt",x.imageAlt||""),I(A,"width",x.imageWidth),I(A,"height",x.imageHeight),A.className=m.image,Qt(A,x,"image")}},gt=!1,pt=0,At=0,dn=0,In=0,kn=v=>{v.addEventListener("mousedown",ft),document.body.addEventListener("mousemove",Vt),v.addEventListener("mouseup",Ot),v.addEventListener("touchstart",ft),document.body.addEventListener("touchmove",Vt),v.addEventListener("touchend",Ot)},mn=v=>{v.removeEventListener("mousedown",ft),document.body.removeEventListener("mousemove",Vt),v.removeEventListener("mouseup",Ot),v.removeEventListener("touchstart",ft),document.body.removeEventListener("touchmove",Vt),v.removeEventListener("touchend",Ot)},ft=v=>{let x=ie();if(!x)return;let A=ue();if(v.target===x||A&&A.contains(v.target)){gt=!0;let U=bi(v);pt=U.clientX,At=U.clientY,dn=parseInt(x.style.insetInlineStart)||0,In=parseInt(x.style.insetBlockStart)||0,dt(x,"swal2-dragging")}},Vt=v=>{let x=ie();if(x&&gt){let{clientX:A,clientY:U}=bi(v),oe=A-pt;x.style.insetInlineStart=`${dn+(s.isRTL?-oe:oe)}px`,x.style.insetBlockStart=`${In+(U-At)}px`}},Ot=()=>{let v=ie();gt=!1,Je(v,"swal2-dragging")},bi=v=>{let x=0,A=0;return v.type.startsWith("mouse")?(x=v.clientX,A=v.clientY):v.type.startsWith("touch")&&(x=v.touches[0].clientX,A=v.touches[0].clientY),{clientX:x,clientY:A}},rr=(v,x)=>{let A=V(),U=ie();if(!(!A||!U)){if(x.toast){I(A,"width",x.width),U.style.width="100%";let oe=pn();oe&&U.insertBefore(oe,ue())}else I(U,"width",x.width);I(U,"padding",x.padding),x.color&&(U.style.color=x.color),x.background&&(U.style.background=x.background),pe($e()),Hn(U,x),x.draggable&&!x.toast?(dt(U,m.draggable),kn(U)):(Je(U,m.draggable),mn(U))}},Hn=(v,x)=>{let A=x.showClass||{};v.className=`${m.popup} ${Oe(v)?A.popup:""}`,x.toast?(dt([document.documentElement,document.body],m["toast-shown"]),dt(v,m.toast)):dt(v,m.modal),Qt(v,x,"popup"),typeof x.customClass=="string"&&dt(v,x.customClass),x.icon&&dt(v,m[`icon-${x.icon}`])},vs=(v,x)=>{let A=we();if(!A)return;let{progressSteps:U,currentProgressStep:oe}=x;if(!U||U.length===0||oe===void 0){pe(A);return}Q(A),A.textContent="",oe>=U.length&&E("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),U.forEach((Le,St)=>{let Kt=yn(Le);if(A.appendChild(Kt),St===oe&&dt(Kt,m["active-progress-step"]),St!==U.length-1){let Sn=Di(x);A.appendChild(Sn)}})},yn=v=>{let x=document.createElement("li");return dt(x,m["progress-step"]),Mt(x,v),x},Di=v=>{let x=document.createElement("li");return dt(x,m["progress-step-line"]),v.progressStepsDistance&&I(x,"width",v.progressStepsDistance),x},Ui=(v,x)=>{let A=_e();A&&(Me(A),ot(A,!!(x.title||x.titleText),"block"),x.title&&ht(x.title,A),x.titleText&&(A.innerText=x.titleText),Qt(A,x,"title"))},di=(v,x)=>{var A;rr(v,x),ir(v,x),vs(v,x),ne(v,x),ct(v,x),Ui(v,x),ci(v,x),fd(v,x),Vi(v,x),N(v,x);let U=ie();typeof x.didRender=="function"&&U&&x.didRender(U),(A=s.eventEmitter)===null||A===void 0||A.emit("didRender",U)},Pi=()=>Oe(ie()),ta=()=>{var v;return(v=Ne())===null||v===void 0?void 0:v.click()},fo=()=>{var v;return(v=_t())===null||v===void 0?void 0:v.click()},hd=()=>{var v;return(v=Ye())===null||v===void 0?void 0:v.click()},na=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),pd=v=>{if(v.keydownTarget&&v.keydownHandlerAdded&&v.keydownHandler){let x=v.keydownHandler;v.keydownTarget.removeEventListener("keydown",x,{capture:v.keydownListenerCapture}),v.keydownHandlerAdded=!1}},Uv=(v,x,A)=>{if(pd(v),!x.toast){let U=Le=>zv(x,Le,A);v.keydownHandler=U;let oe=x.keydownListenerCapture?window:ie();if(oe){v.keydownTarget=oe,v.keydownListenerCapture=x.keydownListenerCapture;let Le=U;v.keydownTarget.addEventListener("keydown",Le,{capture:v.keydownListenerCapture}),v.keydownHandlerAdded=!0}}},md=(v,x)=>{var A;let U=lt();if(U.length){v=v+x,v===-2&&(v=U.length-1),v===U.length?v=0:v===-1&&(v=U.length-1),U[v].focus();return}(A=ie())===null||A===void 0||A.focus()},Gf=["ArrowRight","ArrowDown"],Bv=["ArrowLeft","ArrowUp"],zv=(v,x,A)=>{v&&(x.isComposing||x.keyCode===229||(v.stopKeydownPropagation&&x.stopPropagation(),x.key==="Enter"?Hv(x,v):x.key==="Tab"?jv(x):[...Gf,...Bv].includes(x.key)?Wv(x.key):x.key==="Escape"&&Gv(x,v,A)))},Hv=(v,x)=>{if(!G(x.allowEnterKey))return;let A=ie();if(!A||!x.input)return;let U=J(A,x.input);if(v.target&&U&&v.target instanceof HTMLElement&&v.target.outerHTML===U.outerHTML){if(["textarea","file"].includes(x.input))return;ta(),v.preventDefault()}},jv=v=>{let x=v.target,A=lt(),U=-1;for(let oe=0;oe<A.length;oe++)if(x===A[oe]){U=oe;break}v.shiftKey?md(U,-1):md(U,1),v.stopPropagation(),v.preventDefault()},Wv=v=>{let x=cn(),A=Ne(),U=_t(),oe=Ye();if(!x||!A||!U||!oe)return;let Le=[A,U,oe];if(document.activeElement instanceof HTMLElement&&!Le.includes(document.activeElement))return;let St=Gf.includes(v)?"nextElementSibling":"previousElementSibling",Kt=document.activeElement;if(Kt){for(let Sn=0;Sn<x.children.length;Sn++){if(Kt=Kt[St],!Kt)return;if(Kt instanceof HTMLButtonElement&&Oe(Kt))break}Kt instanceof HTMLButtonElement&&Kt.focus()}},Gv=(v,x,A)=>{v.preventDefault(),G(x.allowEscapeKey)&&A(na.esc)};var ia={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let $v=()=>{let v=V();Array.from(document.body.children).forEach(A=>{A.contains(v)||(A.hasAttribute("aria-hidden")&&A.setAttribute("data-previous-aria-hidden",A.getAttribute("aria-hidden")||""),A.setAttribute("aria-hidden","true"))})},$f=()=>{Array.from(document.body.children).forEach(x=>{x.hasAttribute("data-previous-aria-hidden")?(x.setAttribute("aria-hidden",x.getAttribute("data-previous-aria-hidden")||""),x.removeAttribute("data-previous-aria-hidden")):x.removeAttribute("aria-hidden")})},Yf=typeof window<"u"&&!!window.GestureEvent,Yv=()=>{if(Yf&&!Gt(document.body,m.iosfix)){let v=document.body.scrollTop;document.body.style.top=`${v*-1}px`,dt(document.body,m.iosfix),qv()}},qv=()=>{let v=V();if(!v)return;let x;v.ontouchstart=A=>{x=gd(A)},v.ontouchmove=A=>{x&&(A.preventDefault(),A.stopPropagation())}},gd=v=>{let x=v.target,A=V(),U=me();return!A||!U||_d(v)||Xv(v)?!1:x===A||!mt(A)&&x instanceof HTMLElement&&!De(x,U)&&x.tagName!=="INPUT"&&x.tagName!=="TEXTAREA"&&!(mt(U)&&U.contains(x))},_d=v=>!!(v.touches&&v.touches.length&&v.touches[0].touchType==="stylus"),Xv=v=>v.touches&&v.touches.length>1,qf=()=>{if(Gt(document.body,m.iosfix)){let v=parseInt(document.body.style.top,10);Je(document.body,m.iosfix),document.body.style.top="",document.body.scrollTop=v*-1}},Xf=()=>{let v=document.createElement("div");v.className=m["scrollbar-measure"],document.body.appendChild(v);let x=v.getBoundingClientRect().width-v.clientWidth;return document.body.removeChild(v),x},ra=null,Zv=v=>{ra===null&&(document.body.scrollHeight>window.innerHeight||v==="scroll")&&(ra=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${ra+Xf()}px`)},Jv=()=>{ra!==null&&(document.body.style.paddingRight=`${ra}px`,ra=null)};function Zf(v,x,A,U){Bn()?ol(v,U):(d(A).then(()=>ol(v,U)),pd(s)),Yf?(x.setAttribute("style","display:none !important"),x.removeAttribute("class"),x.innerHTML=""):x.remove(),qt()&&(Jv(),qf(),$f()),Jf()}function Jf(){Je([document.documentElement,document.body],[m.shown,m["height-auto"],m["no-backdrop"],m["toast-shown"]])}function fn(v){v=Kf(v);let x=ia.swalPromiseResolve.get(this),A=il(this);this.isAwaitingPromise?v.isDismissed||(rl(this),x(v)):A&&x(v)}let il=v=>{let x=ie();if(!x)return!1;let A=$t.innerParams.get(v);if(!A||Gt(x,A.hideClass.popup))return!1;Je(x,A.showClass.popup),dt(x,A.hideClass.popup);let U=V();return Je(U,A.showClass.backdrop),dt(U,A.hideClass.backdrop),Kv(v,x,A),!0};function oa(v){let x=ia.swalPromiseReject.get(this);rl(this),x&&x(v)}let rl=v=>{v.isAwaitingPromise&&(delete v.isAwaitingPromise,$t.innerParams.get(v)||v._destroy())},Kf=v=>typeof v>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},v),Kv=(v,x,A)=>{var U;let oe=V(),Le=Be(x);typeof A.willClose=="function"&&A.willClose(x),(U=s.eventEmitter)===null||U===void 0||U.emit("willClose",x),Le&&oe?Qv(v,x,oe,!!A.returnFocus,A.didClose):oe&&Zf(v,oe,!!A.returnFocus,A.didClose)},Qv=(v,x,A,U,oe)=>{s.swalCloseEventFinishedCallback=Zf.bind(null,v,A,U,oe);let Le=function(St){if(St.target===x){var Kt;(Kt=s.swalCloseEventFinishedCallback)===null||Kt===void 0||Kt.call(s),delete s.swalCloseEventFinishedCallback,x.removeEventListener("animationend",Le),x.removeEventListener("transitionend",Le)}};x.addEventListener("animationend",Le),x.addEventListener("transitionend",Le)},ol=(v,x)=>{setTimeout(()=>{var A;typeof x=="function"&&x.bind(v.params)(),(A=s.eventEmitter)===null||A===void 0||A.emit("didClose"),v._destroy&&v._destroy()})},Xi=v=>{let x=ie();if(x||new wu,x=ie(),!x)return;let A=pn();Bn()?pe(ue()):vd(x,v),Q(A),x.setAttribute("data-loading","true"),x.setAttribute("aria-busy","true"),x.focus()},vd=(v,x)=>{let A=cn(),U=pn();!A||!U||(!x&&Oe(Ne())&&(x=Ne()),Q(A),x&&(pe(x),U.setAttribute("data-button-to-replace",x.className),A.insertBefore(U,x)),dt([v,A],m.loading))},ex=(v,x)=>{x.input==="select"||x.input==="radio"?ix(v,x):["text","email","number","tel","textarea"].some(A=>A===x.input)&&(Y(x.inputValue)||re(x.inputValue))&&(Xi(Ne()),rx(v,x))},ho=(v,x)=>{let A=v.getInput();if(!A)return null;switch(x.input){case"checkbox":return tx(A);case"radio":return xd(A);case"file":return nx(A);default:return x.inputAutoTrim?A.value.trim():A.value}},tx=v=>v.checked?1:0,xd=v=>v.checked?v.value:null,nx=v=>v.files&&v.files.length?v.getAttribute("multiple")!==null?v.files:v.files[0]:null,ix=(v,x)=>{let A=ie();if(!A)return;let U=oe=>{x.input==="select"?pu(A,mu(oe),x):x.input==="radio"&&yd(A,mu(oe),x)};Y(x.inputOptions)||re(x.inputOptions)?(Xi(Ne()),q(x.inputOptions).then(oe=>{v.hideLoading(),U(oe)})):typeof x.inputOptions=="object"?U(x.inputOptions):w(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof x.inputOptions}`)},rx=(v,x)=>{let A=v.getInput();A&&(pe(A),q(x.inputValue).then(U=>{A.value=x.input==="number"?`${parseFloat(U)||0}`:`${U}`,Q(A),A.focus(),v.hideLoading()}).catch(U=>{w(`Error in inputValue promise: ${U}`),A.value="",Q(A),A.focus(),v.hideLoading()}))};function pu(v,x,A){let U=z(v,m.select);if(!U)return;let oe=(Le,St,Kt)=>{let Sn=document.createElement("option");Sn.value=Kt,Mt(Sn,St),Sn.selected=Qf(Kt,A.inputValue),Le.appendChild(Sn)};x.forEach(Le=>{let St=Le[0],Kt=Le[1];if(Array.isArray(Kt)){let Sn=document.createElement("optgroup");Sn.label=St,Sn.disabled=!1,U.appendChild(Sn),Kt.forEach(la=>oe(Sn,la[1],la[0]))}else oe(U,Kt,St)}),U.focus()}function yd(v,x,A){let U=z(v,m.radio);if(!U)return;x.forEach(Le=>{let St=Le[0],Kt=Le[1],Sn=document.createElement("input"),la=document.createElement("label");Sn.type="radio",Sn.name=m.radio,Sn.value=St,Qf(St,A.inputValue)&&(Sn.checked=!0);let Rd=document.createElement("span");Mt(Rd,Kt),Rd.className=m.label,la.appendChild(Sn),la.appendChild(Rd),U.appendChild(la)});let oe=U.querySelectorAll("input");oe.length&&oe[0].focus()}let mu=v=>{let x=[];return v instanceof Map?v.forEach((A,U)=>{let oe=A;typeof oe=="object"&&(oe=mu(oe)),x.push([U,oe])}):Object.keys(v).forEach(A=>{let U=v[A];typeof U=="object"&&(U=mu(U)),x.push([A,U])}),x},Qf=(v,x)=>!!x&&x!==null&&x!==void 0&&x.toString()===v.toString(),ox=v=>{let x=$t.innerParams.get(v);v.disableButtons(),x.input?th(v,"confirm"):wd(v,!0)},eh=v=>{let x=$t.innerParams.get(v);v.disableButtons(),x.returnInputValueOnDeny?th(v,"deny"):bd(v,!1)},sx=(v,x)=>{v.disableButtons(),x(na.cancel)},th=(v,x)=>{let A=$t.innerParams.get(v);if(!A.input){w(`The "input" parameter is needed to be set when using returnInputValueOn${O(x)}`);return}let U=v.getInput(),oe=ho(v,A);A.inputValidator?ax(v,oe,x):U&&!U.checkValidity()?(v.enableButtons(),v.showValidationMessage(A.validationMessage||U.validationMessage)):x==="deny"?bd(v,oe):wd(v,oe)},ax=(v,x,A)=>{let U=$t.innerParams.get(v);v.disableInput(),Promise.resolve().then(()=>q(U.inputValidator(x,U.validationMessage))).then(Le=>{v.enableButtons(),v.enableInput(),Le?v.showValidationMessage(Le):A==="deny"?bd(v,x):wd(v,x)})},bd=(v,x)=>{let A=$t.innerParams.get(v);A.showLoaderOnDeny&&Xi(_t()),A.preDeny?(v.isAwaitingPromise=!0,Promise.resolve().then(()=>q(A.preDeny(x,A.validationMessage))).then(oe=>{oe===!1?(v.hideLoading(),rl(v)):v.close({isDenied:!0,value:typeof oe>"u"?x:oe})}).catch(oe=>Cd(v,oe))):v.close({isDenied:!0,value:x})},nh=(v,x)=>{v.close({isConfirmed:!0,value:x})},Cd=(v,x)=>{v.rejectPromise(x)},wd=(v,x)=>{let A=$t.innerParams.get(v);A.showLoaderOnConfirm&&Xi(),A.preConfirm?(v.resetValidationMessage(),v.isAwaitingPromise=!0,Promise.resolve().then(()=>q(A.preConfirm(x,A.validationMessage))).then(oe=>{Oe($e())||oe===!1?(v.hideLoading(),rl(v)):nh(v,typeof oe>"u"?x:oe)}).catch(oe=>Cd(v,oe))):nh(v,x)};function po(){let v=$t.innerParams.get(this);if(!v)return;let x=$t.domCache.get(this);pe(x.loader),Bn()?v.icon&&Q(ue()):lx(x),Je([x.popup,x.actions],m.loading),x.popup.removeAttribute("aria-busy"),x.popup.removeAttribute("data-loading"),x.confirmButton.disabled=!1,x.denyButton.disabled=!1,x.cancelButton.disabled=!1}let lx=v=>{let x=v.loader.getAttribute("data-button-to-replace"),A=x?v.popup.getElementsByClassName(x):[];A.length?Q(A[0],"inline-block"):st()&&pe(v.actions)};function gu(){let v=$t.innerParams.get(this),x=$t.domCache.get(this);return x?J(x.popup,v.input):null}function ih(v,x,A){let U=$t.domCache.get(v);x.forEach(oe=>{U[oe].disabled=A})}function _u(v,x){let A=ie();if(!(!A||!v))if(v.type==="radio"){let U=A.querySelectorAll(`[name="${m.radio}"]`);for(let oe=0;oe<U.length;oe++)U[oe].disabled=x}else v.disabled=x}function rh(){ih(this,["confirmButton","denyButton","cancelButton"],!1)}function oh(){ih(this,["confirmButton","denyButton","cancelButton"],!0)}function sh(){_u(this.getInput(),!1)}function ah(){_u(this.getInput(),!0)}function Md(v){let x=$t.domCache.get(this),A=$t.innerParams.get(this);Mt(x.validationMessage,v),x.validationMessage.className=m["validation-message"],A.customClass&&A.customClass.validationMessage&&dt(x.validationMessage,A.customClass.validationMessage),Q(x.validationMessage);let U=this.getInput();U&&(U.setAttribute("aria-invalid","true"),U.setAttribute("aria-describedby",m["validation-message"]),en(U),dt(U,m.inputerror))}function lh(){let v=$t.domCache.get(this);v.validationMessage&&pe(v.validationMessage);let x=this.getInput();x&&(x.removeAttribute("aria-invalid"),x.removeAttribute("aria-describedby"),Je(x,m.inputerror))}let mo={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},On=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],ux={allowEnterKey:void 0},cx=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Sd=v=>Object.prototype.hasOwnProperty.call(mo,v),uh=v=>On.indexOf(v)!==-1,ch=v=>ux[v],dx=v=>{Sd(v)||E(`Unknown parameter "${v}"`)},sl=v=>{cx.includes(v)&&E(`The parameter "${v}" is incompatible with toasts`)},fx=v=>{let x=ch(v);x&&W(v,x)},dh=v=>{v.backdrop===!1&&v.allowOutsideClick&&E('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),v.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(v.theme)&&E(`Invalid theme "${v.theme}"`);for(let x in v)dx(x),v.toast&&sl(x),fx(x)};function fh(v){let x=V(),A=ie(),U=$t.innerParams.get(this);if(!A||Gt(A,U.hideClass.popup)){E("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let oe=vu(v),Le=Object.assign({},U,oe);dh(Le),x&&(x.dataset.swal2Theme=Le.theme),di(this,Le),$t.innerParams.set(this,Le),Object.defineProperties(this,{params:{value:Object.assign({},this.params,v),writable:!1,enumerable:!0}})}let vu=v=>{let x={};return Object.keys(v).forEach(A=>{if(uh(A)){let U=v;x[A]=U[A]}else E(`Invalid parameter to update: ${A}`)}),x};function al(){var v;let x=$t.domCache.get(this),A=$t.innerParams.get(this);if(!A){hh(this);return}x.popup&&s.swalCloseEventFinishedCallback&&(s.swalCloseEventFinishedCallback(),delete s.swalCloseEventFinishedCallback),typeof A.didDestroy=="function"&&A.didDestroy(),(v=s.eventEmitter)===null||v===void 0||v.emit("didDestroy"),Ed(this)}let Ed=v=>{hh(v),delete v.params,delete s.keydownHandler,delete s.keydownTarget,delete s.currentInstance},hh=v=>{v.isAwaitingPromise?(xu($t,v),v.isAwaitingPromise=!0):(xu(ia,v),xu($t,v),delete v.isAwaitingPromise,delete v.disableButtons,delete v.enableButtons,delete v.getInput,delete v.disableInput,delete v.enableInput,delete v.hideLoading,delete v.disableLoading,delete v.showValidationMessage,delete v.resetValidationMessage,delete v.close,delete v.closePopup,delete v.closeModal,delete v.closeToast,delete v.rejectPromise,delete v.update,delete v._destroy)},xu=(v,x)=>{for(let A in v)v[A].delete(x)};var hx=Object.freeze({__proto__:null,_destroy:al,close:fn,closeModal:fn,closePopup:fn,closeToast:fn,disableButtons:oh,disableInput:ah,disableLoading:po,enableButtons:rh,enableInput:sh,getInput:gu,handleAwaitingPromise:rl,hideLoading:po,rejectPromise:oa,resetValidationMessage:lh,showValidationMessage:Md,update:fh});let Ad=(v,x,A)=>{v.toast?Td(v,x,A):(px(x),mx(x),gx(v,x,A))},Td=(v,x,A)=>{x.popup.onclick=()=>{v&&(Dd(v)||v.timer||v.input)||A(na.close)}},Dd=v=>!!(v.showConfirmButton||v.showDenyButton||v.showCancelButton||v.showCloseButton),yu=!1,px=v=>{v.popup.onmousedown=()=>{v.container.onmouseup=function(x){v.container.onmouseup=()=>{},x.target===v.container&&(yu=!0)}}},mx=v=>{v.container.onmousedown=x=>{x.target===v.container&&x.preventDefault(),v.popup.onmouseup=function(A){v.popup.onmouseup=()=>{},(A.target===v.popup||A.target instanceof HTMLElement&&v.popup.contains(A.target))&&(yu=!0)}}},gx=(v,x,A)=>{x.container.onclick=U=>{if(yu){yu=!1;return}U.target===x.container&&G(v.allowOutsideClick)&&A(na.backdrop)}},_x=v=>typeof v=="object"&&v.jquery,ph=v=>v instanceof Element||_x(v),vx=v=>{let x={};return typeof v[0]=="object"&&!ph(v[0])?Object.assign(x,v[0]):["title","html","icon"].forEach((A,U)=>{let oe=v[U];typeof oe=="string"||ph(oe)?x[A]=oe:oe!==void 0&&w(`Unexpected type of ${A}! Expected "string" or "Element", got ${typeof oe}`)}),x};function xx(...v){return new this(...v)}function yx(v){class x extends this{_main(U,oe){return super._main(U,Object.assign({},v,oe))}}return x}let bx=()=>s.timeout&&s.timeout.getTimerLeft(),Pd=()=>{if(s.timeout)return ut(),s.timeout.stop()},mh=()=>{if(s.timeout){let v=s.timeout.start();return Ke(v),v}},Cx=()=>{let v=s.timeout;return v&&(v.running?Pd():mh())},Ar=v=>{if(s.timeout){let x=s.timeout.increase(v);return Ke(x,!0),x}},xs=()=>!!(s.timeout&&s.timeout.isRunning()),Id=!1,Od={};function gh(v="data-swal-template"){Od[v]=this,Id||(document.body.addEventListener("click",_h),Id=!0)}let _h=v=>{for(let x=v.target;x&&x!==document;x=x.parentNode)for(let A in Od){let U=x.getAttribute&&x.getAttribute(A);if(U){Od[A].fire({template:U});return}}};class wx{constructor(){this.events={}}_getHandlersByEventName(x){return typeof this.events[x]>"u"&&(this.events[x]=[]),this.events[x]}on(x,A){let U=this._getHandlersByEventName(x);U.includes(A)||U.push(A)}once(x,A){let U=(...oe)=>{this.removeListener(x,U),A.apply(this,oe)};this.on(x,U)}emit(x,...A){this._getHandlersByEventName(x).forEach(U=>{try{U.apply(this,A)}catch(oe){console.error(oe)}})}removeListener(x,A){let U=this._getHandlersByEventName(x),oe=U.indexOf(A);oe>-1&&U.splice(oe,1)}removeAllListeners(x){this.events[x]!==void 0&&(this.events[x].length=0)}reset(){this.events={}}}s.eventEmitter=new wx;var Sx=Object.freeze({__proto__:null,argsToParams:vx,bindClickHandler:gh,clickCancel:hd,clickConfirm:ta,clickDeny:fo,enableLoading:Xi,fire:xx,getActions:cn,getCancelButton:Ye,getCloseButton:et,getConfirmButton:Ne,getContainer:V,getDenyButton:_t,getFocusableElements:lt,getFooter:Ce,getHtmlContainer:me,getIcon:ue,getIconContent:ve,getImage:he,getInputLabel:Pe,getLoader:pn,getPopup:ie,getProgressSteps:we,getTimerLeft:bx,getTimerProgressBar:Ae,getTitle:_e,getValidationMessage:$e,increaseTimer:Ar,isDeprecatedParameter:ch,isLoading:Zt,isTimerRunning:xs,isUpdatableParameter:uh,isValidParameter:Sd,isVisible:Pi,mixin:yx,off:(v,x)=>{if(s.eventEmitter){if(!v){s.eventEmitter.reset();return}x?s.eventEmitter.removeListener(v,x):s.eventEmitter.removeAllListeners(v)}},on:(v,x)=>{s.eventEmitter&&s.eventEmitter.on(v,x)},once:(v,x)=>{s.eventEmitter&&s.eventEmitter.once(v,x)},resumeTimer:mh,showLoading:Xi,stopTimer:Pd,toggleTimer:Cx});class Ex{constructor(x,A){this.callback=x,this.remaining=A,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(x){let A=this.running;return A&&this.stop(),this.remaining+=x,A&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let vh=["swal-title","swal-html","swal-footer"],Ax=v=>{let x=typeof v.template=="string"?document.querySelector(v.template):v.template;if(!x)return{};let A=x.content;return Fx(A),Object.assign(Tx(A),Dx(A),Px(A),Ix(A),Ox(A),Rx(A),kx(A,vh))},Tx=v=>{let x={};return Array.from(v.querySelectorAll("swal-param")).forEach(U=>{ys(U,["name","value"]);let oe=U.getAttribute("name"),Le=U.getAttribute("value");!oe||!Le||(oe in mo&&typeof mo[oe]=="boolean"?x[oe]=Le!=="false":oe in mo&&typeof mo[oe]=="object"?x[oe]=JSON.parse(Le):x[oe]=Le)}),x},Dx=v=>{let x={};return Array.from(v.querySelectorAll("swal-function-param")).forEach(U=>{let oe=U.getAttribute("name"),Le=U.getAttribute("value");!oe||!Le||(x[oe]=new Function(`return ${Le}`)())}),x},Px=v=>{let x={};return Array.from(v.querySelectorAll("swal-button")).forEach(U=>{ys(U,["type","color","aria-label"]);let oe=U.getAttribute("type");if(!(!oe||!["confirm","cancel","deny"].includes(oe))){if(x[`${oe}ButtonText`]=U.innerHTML,x[`show${O(oe)}Button`]=!0,U.hasAttribute("color")){let Le=U.getAttribute("color");Le!==null&&(x[`${oe}ButtonColor`]=Le)}if(U.hasAttribute("aria-label")){let Le=U.getAttribute("aria-label");Le!==null&&(x[`${oe}ButtonAriaLabel`]=Le)}}}),x},Ix=v=>{let x={},A=v.querySelector("swal-image");return A&&(ys(A,["src","width","height","alt"]),A.hasAttribute("src")&&(x.imageUrl=A.getAttribute("src")||void 0),A.hasAttribute("width")&&(x.imageWidth=A.getAttribute("width")||void 0),A.hasAttribute("height")&&(x.imageHeight=A.getAttribute("height")||void 0),A.hasAttribute("alt")&&(x.imageAlt=A.getAttribute("alt")||void 0)),x},Ox=v=>{let x={},A=v.querySelector("swal-icon");return A&&(ys(A,["type","color"]),A.hasAttribute("type")&&(x.icon=A.getAttribute("type")),A.hasAttribute("color")&&(x.iconColor=A.getAttribute("color")),x.iconHtml=A.innerHTML),x},Rx=v=>{let x={},A=v.querySelector("swal-input");A&&(ys(A,["type","label","placeholder","value"]),x.input=A.getAttribute("type")||"text",A.hasAttribute("label")&&(x.inputLabel=A.getAttribute("label")),A.hasAttribute("placeholder")&&(x.inputPlaceholder=A.getAttribute("placeholder")),A.hasAttribute("value")&&(x.inputValue=A.getAttribute("value")));let U=Array.from(v.querySelectorAll("swal-input-option"));return U.length&&(x.inputOptions={},U.forEach(oe=>{ys(oe,["value"]);let Le=oe.getAttribute("value");if(!Le)return;let St=oe.innerHTML;x.inputOptions[Le]=St})),x},kx=(v,x)=>{let A={};for(let U in x){let oe=x[U],Le=v.querySelector(oe);Le&&(ys(Le,[]),A[oe.replace(/^swal-/,"")]=Le.innerHTML.trim())}return A},Fx=v=>{let x=vh.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(v.children).forEach(A=>{let U=A.tagName.toLowerCase();x.includes(U)||E(`Unrecognized element <${U}>`)})},ys=(v,x)=>{Array.from(v.attributes).forEach(A=>{x.indexOf(A.name)===-1&&E([`Unrecognized attribute "${A.name}" on <${v.tagName.toLowerCase()}>.`,`${x.length?`Allowed attributes are: ${x.join(", ")}`:"To set the value, use HTML within the element."}`])})},ll=10,Nx=v=>{var x,A;let U=V(),oe=ie();if(!U||!oe)return;typeof v.willOpen=="function"&&v.willOpen(oe),(x=s.eventEmitter)===null||x===void 0||x.emit("willOpen",oe);let St=window.getComputedStyle(document.body).overflowY;if(Ux(U,oe,v),setTimeout(()=>{Lx(U,oe)},ll),qt()&&(Vx(U,v.scrollbarPadding!==void 0?v.scrollbarPadding:!1,St),$v()),!Bn()&&!s.previousActiveElement&&(s.previousActiveElement=document.activeElement),typeof v.didOpen=="function"){let Kt=v.didOpen;setTimeout(()=>Kt(oe))}(A=s.eventEmitter)===null||A===void 0||A.emit("didOpen",oe)},bu=v=>{let x=ie();if(!x||v.target!==x)return;let A=V();A&&(x.removeEventListener("animationend",bu),x.removeEventListener("transitionend",bu),A.style.overflowY="auto",Je(A,m["no-transition"]))},Lx=(v,x)=>{Be(x)?(v.style.overflowY="hidden",x.addEventListener("animationend",bu),x.addEventListener("transitionend",bu)):v.style.overflowY="auto"},Vx=(v,x,A)=>{Yv(),x&&A!=="hidden"&&Zv(A),setTimeout(()=>{v.scrollTop=0})},Ux=(v,x,A)=>{var U;(U=A.showClass)!==null&&U!==void 0&&U.backdrop&&dt(v,A.showClass.backdrop),A.animation?(x.style.setProperty("opacity","0","important"),Q(x,"grid"),setTimeout(()=>{var oe;(oe=A.showClass)!==null&&oe!==void 0&&oe.popup&&dt(x,A.showClass.popup),x.style.removeProperty("opacity")},ll)):Q(x,"grid"),dt([document.documentElement,document.body],m.shown),A.heightAuto&&A.backdrop&&!A.toast&&dt([document.documentElement,document.body],m["height-auto"])};var xh={email:(v,x)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(v)?Promise.resolve():Promise.resolve(x||"Invalid email address"),url:(v,x)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(v)?Promise.resolve():Promise.resolve(x||"Invalid URL")};function Bx(v){v.inputValidator||(v.input==="email"&&(v.inputValidator=xh.email),v.input==="url"&&(v.inputValidator=xh.url))}function zx(v){(!v.target||typeof v.target=="string"&&!document.querySelector(v.target)||typeof v.target!="string"&&!v.target.appendChild)&&(E('Target parameter is not valid, defaulting to "body"'),v.target="body")}function yh(v){Bx(v),v.showLoaderOnConfirm&&!v.preConfirm&&E(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),zx(v),typeof v.title=="string"&&(v.title=v.title.split(`
`).join("<br />")),We(v)}let Tr;var ul=new WeakMap;class Fn{constructor(...x){if(i(this,ul,Promise.resolve({isConfirmed:!1,isDenied:!1,isDismissed:!0})),typeof window>"u")return;Tr=this;let A=Object.freeze(this.constructor.argsToParams(x));this.params=A,this.isAwaitingPromise=!1,r(ul,this,this._main(Tr.params))}_main(x,A={}){if(dh(Object.assign({},A,x)),s.currentInstance){let Le=ia.swalPromiseResolve.get(s.currentInstance),{isAwaitingPromise:St}=s.currentInstance;s.currentInstance._destroy(),St||Le({isDismissed:!0}),qt()&&$f()}s.currentInstance=Tr;let U=Cu(x,A);yh(U),Object.freeze(U),s.timeout&&(s.timeout.stop(),delete s.timeout),clearTimeout(s.restoreFocusTimeout);let oe=bh(Tr);return di(Tr,U),$t.innerParams.set(Tr,U),sa(Tr,oe,U)}then(x){return e(ul,this).then(x)}finally(x){return e(ul,this).finally(x)}}let sa=(v,x,A)=>new Promise((U,oe)=>{let Le=St=>{v.close({isDismissed:!0,dismiss:St,isConfirmed:!1,isDenied:!1})};ia.swalPromiseResolve.set(v,U),ia.swalPromiseReject.set(v,oe),x.confirmButton.onclick=()=>{ox(v)},x.denyButton.onclick=()=>{eh(v)},x.cancelButton.onclick=()=>{sx(v,Le)},x.closeButton.onclick=()=>{Le(na.close)},Ad(A,x,Le),Uv(s,A,Le),ex(v,A),Nx(A),aa(s,A,Le),Ch(x,A),setTimeout(()=>{x.container.scrollTop=0})}),Cu=(v,x)=>{let A=Ax(v),U=Object.assign({},mo,x,A,v);return U.showClass=Object.assign({},mo.showClass,U.showClass),U.hideClass=Object.assign({},mo.hideClass,U.hideClass),U.animation===!1&&(U.showClass={backdrop:"swal2-noanimation"},U.hideClass={}),U},bh=v=>{let x={popup:ie(),container:V(),actions:cn(),confirmButton:Ne(),denyButton:_t(),cancelButton:Ye(),loader:pn(),closeButton:et(),validationMessage:$e(),progressSteps:we()};return $t.domCache.set(v,x),x},aa=(v,x,A)=>{let U=Ae();pe(U),x.timer&&(v.timeout=new Ex(()=>{A("timer"),delete v.timeout},x.timer),x.timerProgressBar&&U&&(Q(U),Qt(U,x,"timerProgressBar"),setTimeout(()=>{v.timeout&&v.timeout.running&&Ke(x.timer)})))},Ch=(v,x)=>{if(!x.toast){if(!G(x.allowEnterKey)){W("allowEnterKey"),jx();return}wh(v)||Hx(v,x)||md(-1,1)}},wh=v=>{let x=Array.from(v.popup.querySelectorAll("[autofocus]"));for(let A of x)if(A instanceof HTMLElement&&Oe(A))return A.focus(),!0;return!1},Hx=(v,x)=>x.focusDeny&&Oe(v.denyButton)?(v.denyButton.focus(),!0):x.focusCancel&&Oe(v.cancelButton)?(v.cancelButton.focus(),!0):x.focusConfirm&&Oe(v.confirmButton)?(v.confirmButton.focus(),!0):!1,jx=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Fn.prototype.disableButtons=oh,Fn.prototype.enableButtons=rh,Fn.prototype.getInput=gu,Fn.prototype.disableInput=ah,Fn.prototype.enableInput=sh,Fn.prototype.hideLoading=po,Fn.prototype.disableLoading=po,Fn.prototype.showValidationMessage=Md,Fn.prototype.resetValidationMessage=lh,Fn.prototype.close=fn,Fn.prototype.closePopup=fn,Fn.prototype.closeModal=fn,Fn.prototype.closeToast=fn,Fn.prototype.rejectPromise=oa,Fn.prototype.update=fh,Fn.prototype._destroy=al,Object.assign(Fn,Sx),Object.keys(hx).forEach(v=>{Fn[v]=function(...x){if(Tr&&Tr[v])return Tr[v](...x)}}),Fn.DismissReason=na,Fn.version="11.26.17";let wu=Fn;return wu.default=wu,wu});typeof as<"u"&&as.Sweetalert2&&(as.swal=as.sweetAlert=as.Swal=as.SweetAlert=as.Sweetalert2);typeof document<"u"&&function(n,t){var e=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(e),e.styleSheet)e.styleSheet.disabled||(e.styleSheet.cssText=t);else try{e.innerHTML=t}catch{e.innerText=t}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')});var UT=IC((mC,cd)=>{"use strict";(function(n,t){typeof mC=="object"&&typeof cd<"u"?cd.exports=t():typeof define=="function"&&define.amd?define(t):n.moment=t()})(mC,function(){"use strict";var n;function t(){return n.apply(null,arguments)}function e(f){n=f}function i(f){return f instanceof Array||Object.prototype.toString.call(f)==="[object Array]"}function r(f){return f!=null&&Object.prototype.toString.call(f)==="[object Object]"}function o(f,g){return Object.prototype.hasOwnProperty.call(f,g)}function s(f){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(f).length===0;var g;for(g in f)if(o(f,g))return!1;return!0}function u(f){return f===void 0}function d(f){return typeof f=="number"||Object.prototype.toString.call(f)==="[object Number]"}function p(f){return f instanceof Date||Object.prototype.toString.call(f)==="[object Date]"}function _(f,g){var C=[],S,L=f.length;for(S=0;S<L;++S)C.push(g(f[S],S));return C}function m(f,g){for(var C in g)o(g,C)&&(f[C]=g[C]);return o(g,"toString")&&(f.toString=g.toString),o(g,"valueOf")&&(f.valueOf=g.valueOf),f}function y(f,g,C,S){return mo(f,g,C,S,!0).utc()}function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function M(f){return f._pf==null&&(f._pf=b()),f._pf}var O;Array.prototype.some?O=Array.prototype.some:O=function(f){var g=Object(this),C=g.length>>>0,S;for(S=0;S<C;S++)if(S in g&&f.call(this,g[S],S,g))return!0;return!1};function E(f){var g=null,C=!1,S=f._d&&!isNaN(f._d.getTime());if(S&&(g=M(f),C=O.call(g.parsedDateParts,function(L){return L!=null}),S=g.overflow<0&&!g.empty&&!g.invalidEra&&!g.invalidMonth&&!g.invalidWeekday&&!g.weekdayMismatch&&!g.nullInput&&!g.invalidFormat&&!g.userInvalidated&&(!g.meridiem||g.meridiem&&C),f._strict&&(S=S&&g.charsLeftOver===0&&g.unusedTokens.length===0&&g.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(f))f._isValid=S;else return S;return f._isValid}function w(f){var g=y(NaN);return f!=null?m(M(g),f):M(g).userInvalidated=!0,g}var j=t.momentProperties=[],H=!1;function W(f,g){var C,S,L,K=j.length;if(u(g._isAMomentObject)||(f._isAMomentObject=g._isAMomentObject),u(g._i)||(f._i=g._i),u(g._f)||(f._f=g._f),u(g._l)||(f._l=g._l),u(g._strict)||(f._strict=g._strict),u(g._tzm)||(f._tzm=g._tzm),u(g._isUTC)||(f._isUTC=g._isUTC),u(g._offset)||(f._offset=g._offset),u(g._pf)||(f._pf=M(g)),u(g._locale)||(f._locale=g._locale),K>0)for(C=0;C<K;C++)S=j[C],L=g[S],u(L)||(f[S]=L);return f}function G(f){W(this,f),this._d=new Date(f._d!=null?f._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),H===!1&&(H=!0,t.updateOffset(this),H=!1)}function Y(f){return f instanceof G||f!=null&&f._isAMomentObject!=null}function q(f){t.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+f)}function re(f,g){var C=!0;return m(function(){if(t.deprecationHandler!=null&&t.deprecationHandler(null,f),C){var S=[],L,K,ge,rt=arguments.length;for(K=0;K<rt;K++){if(L="",typeof arguments[K]=="object"){L+=`
[`+K+"] ";for(ge in arguments[0])o(arguments[0],ge)&&(L+=ge+": "+arguments[0][ge]+", ");L=L.slice(0,-2)}else L=arguments[K];S.push(L)}q(f+`
Arguments: `+Array.prototype.slice.call(S).join("")+`
`+new Error().stack),C=!1}return g.apply(this,arguments)},g)}var V={};function B(f,g){t.deprecationHandler!=null&&t.deprecationHandler(f,g),V[f]||(q(g),V[f]=!0)}t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;function X(f){return typeof Function<"u"&&f instanceof Function||Object.prototype.toString.call(f)==="[object Function]"}function ie(f){var g,C;for(C in f)o(f,C)&&(g=f[C],X(g)?this[C]=g:this["_"+C]=g);this._config=f,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ue(f,g){var C=m({},f),S;for(S in g)o(g,S)&&(r(f[S])&&r(g[S])?(C[S]={},m(C[S],f[S]),m(C[S],g[S])):g[S]!=null?C[S]=g[S]:delete C[S]);for(S in f)o(f,S)&&!o(g,S)&&r(f[S])&&(C[S]=m({},C[S]));return C}function ve(f){f!=null&&this.set(f)}var _e;Object.keys?_e=Object.keys:_e=function(f){var g,C=[];for(g in f)o(f,g)&&C.push(g);return C};var me={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function he(f,g,C){var S=this._calendar[f]||this._calendar.sameElse;return X(S)?S.call(g,C):S}function we(f,g,C){var S=""+Math.abs(f),L=g-S.length,K=f>=0;return(K?C?"+":"":"-")+Math.pow(10,Math.max(0,L)).toString().substr(1)+S}var $e=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ne=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ye={},_t={};function Pe(f,g,C,S){var L=S;typeof S=="string"&&(L=function(){return this[S]()}),f&&(_t[f]=L),g&&(_t[g[0]]=function(){return we(L.apply(this,arguments),g[1],g[2])}),C&&(_t[C]=function(){return this.localeData().ordinal(L.apply(this,arguments),f)})}function pn(f){return f.match(/\[[\s\S]/)?f.replace(/^\[|\]$/g,""):f.replace(/\\/g,"")}function cn(f){var g=f.match($e),C,S;for(C=0,S=g.length;C<S;C++)_t[g[C]]?g[C]=_t[g[C]]:g[C]=pn(g[C]);return function(L){var K="",ge;for(ge=0;ge<S;ge++)K+=X(g[ge])?g[ge].call(L,f):g[ge];return K}}function Ce(f,g){return f.isValid()?(g=Ae(g,f.localeData()),Ye[g]=Ye[g]||cn(g),Ye[g](f)):f.localeData().invalidDate()}function Ae(f,g){var C=5;function S(L){return g.longDateFormat(L)||L}for(Ne.lastIndex=0;C>=0&&Ne.test(f);)f=f.replace(Ne,S),Ne.lastIndex=0,C-=1;return f}var et={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function wt(f){var g=this._longDateFormat[f],C=this._longDateFormat[f.toUpperCase()];return g||!C?g:(this._longDateFormat[f]=C.match($e).map(function(S){return S==="MMMM"||S==="MM"||S==="DD"||S==="dddd"?S.slice(1):S}).join(""),this._longDateFormat[f])}var lt="Invalid date";function qt(){return this._invalidDate}var Bn="%d",Zt=/\d{1,2}/;function Mt(f){return this._ordinal.replace("%d",f)}var Gt={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Dt(f,g,C,S){var L=this._relativeTime[C];return X(L)?L(f,g,C,S):L.replace(/%d/i,f)}function Qt(f,g){var C=this._relativeTime[f>0?"future":"past"];return X(C)?C(g):C.replace(/%s/i,g)}var J={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function en(f){return typeof f=="string"?J[f]||J[f.toLowerCase()]:void 0}function Jt(f){var g={},C,S;for(S in f)o(f,S)&&(C=en(S),C&&(g[C]=f[S]));return g}var dt={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Je(f){var g=[],C;for(C in f)o(f,C)&&g.push({unit:C,priority:dt[C]});return g.sort(function(S,L){return S.priority-L.priority}),g}var z=/\d/,I=/\d\d/,Q=/\d{3}/,pe=/\d{4}/,Me=/[+-]?\d{6}/,ce=/\d\d?/,ot=/\d\d\d\d?/,Oe=/\d\d\d\d\d\d?/,st=/\d{1,3}/,mt=/\d{1,4}/,De=/[+-]?\d{1,6}/,Be=/\d+/,Ke=/[+-]?\d+/,ut=/Z|[+-]\d\d:?\d\d/gi,He=/Z|[+-]\d\d(?::?\d\d)?/gi,Pt=/[+-]?\d+(\.\d{1,3})?/,ee=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ze=/^[1-9]\d?/,ke=/^([1-9]\d|\d)/,Xe;Xe={};function le(f,g,C){Xe[f]=X(g)?g:function(S,L){return S&&C?C:g}}function Ee(f,g){return o(Xe,f)?Xe[f](g._strict,g._locale):new RegExp(We(f))}function We(f){return ht(f.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(g,C,S,L,K){return C||S||L||K}))}function ht(f){return f.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ft(f){return f<0?Math.ceil(f)||0:Math.floor(f)}function nt(f){var g=+f,C=0;return g!==0&&isFinite(g)&&(C=Ft(g)),C}var Vi={};function Lt(f,g){var C,S=g,L;for(typeof f=="string"&&(f=[f]),d(g)&&(S=function(K,ge){ge[g]=nt(K)}),L=f.length,C=0;C<L;C++)Vi[f[C]]=S}function _s(f,g){Lt(f,function(C,S,L,K){L._w=L._w||{},g(C,L._w,L,K)})}function Ks(f,g,C){g!=null&&o(Vi,f)&&Vi[f](g,C._a,C,f)}function $r(f){return f%4===0&&f%100!==0||f%400===0}var ci=0,ir=1,qi=2,Mn=3,Fi=4,$t=5,Yr=6,Qs=7,fu=8;Pe("Y",0,0,function(){var f=this.year();return f<=9999?we(f,4):"+"+f}),Pe(0,["YY",2],0,function(){return this.year()%100}),Pe(0,["YYYY",4],0,"year"),Pe(0,["YYYYY",5],0,"year"),Pe(0,["YYYYYY",6,!0],0,"year"),le("Y",Ke),le("YY",ce,I),le("YYYY",mt,pe),le("YYYYY",De,Me),le("YYYYYY",De,Me),Lt(["YYYYY","YYYYYY"],ci),Lt("YYYY",function(f,g){g[ci]=f.length===2?t.parseTwoDigitYear(f):nt(f)}),Lt("YY",function(f,g){g[ci]=t.parseTwoDigitYear(f)}),Lt("Y",function(f,g){g[ci]=parseInt(f,10)});function qr(f){return $r(f)?366:365}t.parseTwoDigitYear=function(f){return nt(f)+(nt(f)>68?1900:2e3)};var tl=Xr("FullYear",!0);function hu(){return $r(this.year())}function Xr(f,g){return function(C){return C!=null?(nl(this,f,C),t.updateOffset(this,g),this):Er(this,f)}}function Er(f,g){if(!f.isValid())return NaN;var C=f._d,S=f._isUTC;switch(g){case"Milliseconds":return S?C.getUTCMilliseconds():C.getMilliseconds();case"Seconds":return S?C.getUTCSeconds():C.getSeconds();case"Minutes":return S?C.getUTCMinutes():C.getMinutes();case"Hours":return S?C.getUTCHours():C.getHours();case"Date":return S?C.getUTCDate():C.getDate();case"Day":return S?C.getUTCDay():C.getDay();case"Month":return S?C.getUTCMonth():C.getMonth();case"FullYear":return S?C.getUTCFullYear():C.getFullYear();default:return NaN}}function nl(f,g,C){var S,L,K,ge,rt;if(!(!f.isValid()||isNaN(C))){switch(S=f._d,L=f._isUTC,g){case"Milliseconds":return void(L?S.setUTCMilliseconds(C):S.setMilliseconds(C));case"Seconds":return void(L?S.setUTCSeconds(C):S.setSeconds(C));case"Minutes":return void(L?S.setUTCMinutes(C):S.setMinutes(C));case"Hours":return void(L?S.setUTCHours(C):S.setHours(C));case"Date":return void(L?S.setUTCDate(C):S.setDate(C));case"FullYear":break;default:return}K=C,ge=f.month(),rt=f.date(),rt=rt===29&&ge===1&&!$r(K)?28:rt,L?S.setUTCFullYear(K,ge,rt):S.setFullYear(K,ge,rt)}}function ea(f){return f=en(f),X(this[f])?this[f]():this}function zn(f,g){if(typeof f=="object"){f=Jt(f);var C=Je(f),S,L=C.length;for(S=0;S<L;S++)this[C[S].unit](f[C[S].unit])}else if(f=en(f),X(this[f]))return this[f](g);return this}function fd(f,g){return(f%g+g)%g}var N;Array.prototype.indexOf?N=Array.prototype.indexOf:N=function(f){var g;for(g=0;g<this.length;++g)if(this[g]===f)return g;return-1};function ne(f,g){if(isNaN(f)||isNaN(g))return NaN;var C=fd(g,12);return f+=(g-C)/12,C===1?$r(f)?29:28:31-C%7%2}Pe("M",["MM",2],"Mo",function(){return this.month()+1}),Pe("MMM",0,0,function(f){return this.localeData().monthsShort(this,f)}),Pe("MMMM",0,0,function(f){return this.localeData().months(this,f)}),le("M",ce,ze),le("MM",ce,I),le("MMM",function(f,g){return g.monthsShortRegex(f)}),le("MMMM",function(f,g){return g.monthsRegex(f)}),Lt(["M","MM"],function(f,g){g[ir]=nt(f)-1}),Lt(["MMM","MMMM"],function(f,g,C,S){var L=C._locale.monthsParse(f,S,C._strict);L!=null?g[ir]=L:M(C).invalidMonth=f});var fe="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),de="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ae=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ge=ee,Qe=ee;function qe(f,g){return f?i(this._months)?this._months[f.month()]:this._months[(this._months.isFormat||ae).test(g)?"format":"standalone"][f.month()]:i(this._months)?this._months:this._months.standalone}function it(f,g){return f?i(this._monthsShort)?this._monthsShort[f.month()]:this._monthsShort[ae.test(g)?"format":"standalone"][f.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ct(f,g,C){var S,L,K,ge=f.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],S=0;S<12;++S)K=y([2e3,S]),this._shortMonthsParse[S]=this.monthsShort(K,"").toLocaleLowerCase(),this._longMonthsParse[S]=this.months(K,"").toLocaleLowerCase();return C?g==="MMM"?(L=N.call(this._shortMonthsParse,ge),L!==-1?L:null):(L=N.call(this._longMonthsParse,ge),L!==-1?L:null):g==="MMM"?(L=N.call(this._shortMonthsParse,ge),L!==-1?L:(L=N.call(this._longMonthsParse,ge),L!==-1?L:null)):(L=N.call(this._longMonthsParse,ge),L!==-1?L:(L=N.call(this._shortMonthsParse,ge),L!==-1?L:null))}function gt(f,g,C){var S,L,K;if(this._monthsParseExact)return ct.call(this,f,g,C);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),S=0;S<12;S++){if(L=y([2e3,S]),C&&!this._longMonthsParse[S]&&(this._longMonthsParse[S]=new RegExp("^"+this.months(L,"").replace(".","")+"$","i"),this._shortMonthsParse[S]=new RegExp("^"+this.monthsShort(L,"").replace(".","")+"$","i")),!C&&!this._monthsParse[S]&&(K="^"+this.months(L,"")+"|^"+this.monthsShort(L,""),this._monthsParse[S]=new RegExp(K.replace(".",""),"i")),C&&g==="MMMM"&&this._longMonthsParse[S].test(f))return S;if(C&&g==="MMM"&&this._shortMonthsParse[S].test(f))return S;if(!C&&this._monthsParse[S].test(f))return S}}function pt(f,g){if(!f.isValid())return f;if(typeof g=="string"){if(/^\d+$/.test(g))g=nt(g);else if(g=f.localeData().monthsParse(g),!d(g))return f}var C=g,S=f.date();return S=S<29?S:Math.min(S,ne(f.year(),C)),f._isUTC?f._d.setUTCMonth(C,S):f._d.setMonth(C,S),f}function At(f){return f!=null?(pt(this,f),t.updateOffset(this,!0),this):Er(this,"Month")}function dn(){return ne(this.year(),this.month())}function In(f){return this._monthsParseExact?(o(this,"_monthsRegex")||mn.call(this),f?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=Ge),this._monthsShortStrictRegex&&f?this._monthsShortStrictRegex:this._monthsShortRegex)}function kn(f){return this._monthsParseExact?(o(this,"_monthsRegex")||mn.call(this),f?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=Qe),this._monthsStrictRegex&&f?this._monthsStrictRegex:this._monthsRegex)}function mn(){function f(Ct,on){return on.length-Ct.length}var g=[],C=[],S=[],L,K,ge,rt;for(L=0;L<12;L++)K=y([2e3,L]),ge=ht(this.monthsShort(K,"")),rt=ht(this.months(K,"")),g.push(ge),C.push(rt),S.push(rt),S.push(ge);g.sort(f),C.sort(f),S.sort(f),this._monthsRegex=new RegExp("^("+S.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+C.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+g.join("|")+")","i")}function ft(f,g,C,S,L,K,ge){var rt;return f<100&&f>=0?(rt=new Date(f+400,g,C,S,L,K,ge),isFinite(rt.getFullYear())&&rt.setFullYear(f)):rt=new Date(f,g,C,S,L,K,ge),rt}function Vt(f){var g,C;return f<100&&f>=0?(C=Array.prototype.slice.call(arguments),C[0]=f+400,g=new Date(Date.UTC.apply(null,C)),isFinite(g.getUTCFullYear())&&g.setUTCFullYear(f)):g=new Date(Date.UTC.apply(null,arguments)),g}function Ot(f,g,C){var S=7+g-C,L=(7+Vt(f,0,S).getUTCDay()-g)%7;return-L+S-1}function bi(f,g,C,S,L){var K=(7+C-S)%7,ge=Ot(f,S,L),rt=1+7*(g-1)+K+ge,Ct,on;return rt<=0?(Ct=f-1,on=qr(Ct)+rt):rt>qr(f)?(Ct=f+1,on=rt-qr(f)):(Ct=f,on=rt),{year:Ct,dayOfYear:on}}function rr(f,g,C){var S=Ot(f.year(),g,C),L=Math.floor((f.dayOfYear()-S-1)/7)+1,K,ge;return L<1?(ge=f.year()-1,K=L+Hn(ge,g,C)):L>Hn(f.year(),g,C)?(K=L-Hn(f.year(),g,C),ge=f.year()+1):(ge=f.year(),K=L),{week:K,year:ge}}function Hn(f,g,C){var S=Ot(f,g,C),L=Ot(f+1,g,C);return(qr(f)-S+L)/7}Pe("w",["ww",2],"wo","week"),Pe("W",["WW",2],"Wo","isoWeek"),le("w",ce,ze),le("ww",ce,I),le("W",ce,ze),le("WW",ce,I),_s(["w","ww","W","WW"],function(f,g,C,S){g[S.substr(0,1)]=nt(f)});function vs(f){return rr(f,this._week.dow,this._week.doy).week}var yn={dow:0,doy:6};function Di(){return this._week.dow}function Ui(){return this._week.doy}function di(f){var g=this.localeData().week(this);return f==null?g:this.add((f-g)*7,"d")}function Pi(f){var g=rr(this,1,4).week;return f==null?g:this.add((f-g)*7,"d")}Pe("d",0,"do","day"),Pe("dd",0,0,function(f){return this.localeData().weekdaysMin(this,f)}),Pe("ddd",0,0,function(f){return this.localeData().weekdaysShort(this,f)}),Pe("dddd",0,0,function(f){return this.localeData().weekdays(this,f)}),Pe("e",0,0,"weekday"),Pe("E",0,0,"isoWeekday"),le("d",ce),le("e",ce),le("E",ce),le("dd",function(f,g){return g.weekdaysMinRegex(f)}),le("ddd",function(f,g){return g.weekdaysShortRegex(f)}),le("dddd",function(f,g){return g.weekdaysRegex(f)}),_s(["dd","ddd","dddd"],function(f,g,C,S){var L=C._locale.weekdaysParse(f,S,C._strict);L!=null?g.d=L:M(C).invalidWeekday=f}),_s(["d","e","E"],function(f,g,C,S){g[S]=nt(f)});function ta(f,g){return typeof f!="string"?f:isNaN(f)?(f=g.weekdaysParse(f),typeof f=="number"?f:null):parseInt(f,10)}function fo(f,g){return typeof f=="string"?g.weekdaysParse(f)%7||7:isNaN(f)?null:f}function hd(f,g){return f.slice(g,7).concat(f.slice(0,g))}var na="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),pd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Uv="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),md=ee,Gf=ee,Bv=ee;function zv(f,g){var C=i(this._weekdays)?this._weekdays:this._weekdays[f&&f!==!0&&this._weekdays.isFormat.test(g)?"format":"standalone"];return f===!0?hd(C,this._week.dow):f?C[f.day()]:C}function Hv(f){return f===!0?hd(this._weekdaysShort,this._week.dow):f?this._weekdaysShort[f.day()]:this._weekdaysShort}function jv(f){return f===!0?hd(this._weekdaysMin,this._week.dow):f?this._weekdaysMin[f.day()]:this._weekdaysMin}function Wv(f,g,C){var S,L,K,ge=f.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],S=0;S<7;++S)K=y([2e3,1]).day(S),this._minWeekdaysParse[S]=this.weekdaysMin(K,"").toLocaleLowerCase(),this._shortWeekdaysParse[S]=this.weekdaysShort(K,"").toLocaleLowerCase(),this._weekdaysParse[S]=this.weekdays(K,"").toLocaleLowerCase();return C?g==="dddd"?(L=N.call(this._weekdaysParse,ge),L!==-1?L:null):g==="ddd"?(L=N.call(this._shortWeekdaysParse,ge),L!==-1?L:null):(L=N.call(this._minWeekdaysParse,ge),L!==-1?L:null):g==="dddd"?(L=N.call(this._weekdaysParse,ge),L!==-1||(L=N.call(this._shortWeekdaysParse,ge),L!==-1)?L:(L=N.call(this._minWeekdaysParse,ge),L!==-1?L:null)):g==="ddd"?(L=N.call(this._shortWeekdaysParse,ge),L!==-1||(L=N.call(this._weekdaysParse,ge),L!==-1)?L:(L=N.call(this._minWeekdaysParse,ge),L!==-1?L:null)):(L=N.call(this._minWeekdaysParse,ge),L!==-1||(L=N.call(this._weekdaysParse,ge),L!==-1)?L:(L=N.call(this._shortWeekdaysParse,ge),L!==-1?L:null))}function Gv(f,g,C){var S,L,K;if(this._weekdaysParseExact)return Wv.call(this,f,g,C);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),S=0;S<7;S++){if(L=y([2e3,1]).day(S),C&&!this._fullWeekdaysParse[S]&&(this._fullWeekdaysParse[S]=new RegExp("^"+this.weekdays(L,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[S]=new RegExp("^"+this.weekdaysShort(L,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[S]=new RegExp("^"+this.weekdaysMin(L,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[S]||(K="^"+this.weekdays(L,"")+"|^"+this.weekdaysShort(L,"")+"|^"+this.weekdaysMin(L,""),this._weekdaysParse[S]=new RegExp(K.replace(".",""),"i")),C&&g==="dddd"&&this._fullWeekdaysParse[S].test(f))return S;if(C&&g==="ddd"&&this._shortWeekdaysParse[S].test(f))return S;if(C&&g==="dd"&&this._minWeekdaysParse[S].test(f))return S;if(!C&&this._weekdaysParse[S].test(f))return S}}function ia(f){if(!this.isValid())return f!=null?this:NaN;var g=Er(this,"Day");return f!=null?(f=ta(f,this.localeData()),this.add(f-g,"d")):g}function $v(f){if(!this.isValid())return f!=null?this:NaN;var g=(this.day()+7-this.localeData()._week.dow)%7;return f==null?g:this.add(f-g,"d")}function $f(f){if(!this.isValid())return f!=null?this:NaN;if(f!=null){var g=fo(f,this.localeData());return this.day(this.day()%7?g:g-7)}else return this.day()||7}function Yf(f){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||gd.call(this),f?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=md),this._weekdaysStrictRegex&&f?this._weekdaysStrictRegex:this._weekdaysRegex)}function Yv(f){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||gd.call(this),f?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Gf),this._weekdaysShortStrictRegex&&f?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function qv(f){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||gd.call(this),f?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Bv),this._weekdaysMinStrictRegex&&f?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function gd(){function f(Zi,Ms){return Ms.length-Zi.length}var g=[],C=[],S=[],L=[],K,ge,rt,Ct,on;for(K=0;K<7;K++)ge=y([2e3,1]).day(K),rt=ht(this.weekdaysMin(ge,"")),Ct=ht(this.weekdaysShort(ge,"")),on=ht(this.weekdays(ge,"")),g.push(rt),C.push(Ct),S.push(on),L.push(rt),L.push(Ct),L.push(on);g.sort(f),C.sort(f),S.sort(f),L.sort(f),this._weekdaysRegex=new RegExp("^("+L.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+S.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+C.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function _d(){return this.hours()%12||12}function Xv(){return this.hours()||24}Pe("H",["HH",2],0,"hour"),Pe("h",["hh",2],0,_d),Pe("k",["kk",2],0,Xv),Pe("hmm",0,0,function(){return""+_d.apply(this)+we(this.minutes(),2)}),Pe("hmmss",0,0,function(){return""+_d.apply(this)+we(this.minutes(),2)+we(this.seconds(),2)}),Pe("Hmm",0,0,function(){return""+this.hours()+we(this.minutes(),2)}),Pe("Hmmss",0,0,function(){return""+this.hours()+we(this.minutes(),2)+we(this.seconds(),2)});function qf(f,g){Pe(f,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),g)})}qf("a",!0),qf("A",!1);function Xf(f,g){return g._meridiemParse}le("a",Xf),le("A",Xf),le("H",ce,ke),le("h",ce,ze),le("k",ce,ze),le("HH",ce,I),le("hh",ce,I),le("kk",ce,I),le("hmm",ot),le("hmmss",Oe),le("Hmm",ot),le("Hmmss",Oe),Lt(["H","HH"],Mn),Lt(["k","kk"],function(f,g,C){var S=nt(f);g[Mn]=S===24?0:S}),Lt(["a","A"],function(f,g,C){C._isPm=C._locale.isPM(f),C._meridiem=f}),Lt(["h","hh"],function(f,g,C){g[Mn]=nt(f),M(C).bigHour=!0}),Lt("hmm",function(f,g,C){var S=f.length-2;g[Mn]=nt(f.substr(0,S)),g[Fi]=nt(f.substr(S)),M(C).bigHour=!0}),Lt("hmmss",function(f,g,C){var S=f.length-4,L=f.length-2;g[Mn]=nt(f.substr(0,S)),g[Fi]=nt(f.substr(S,2)),g[$t]=nt(f.substr(L)),M(C).bigHour=!0}),Lt("Hmm",function(f,g,C){var S=f.length-2;g[Mn]=nt(f.substr(0,S)),g[Fi]=nt(f.substr(S))}),Lt("Hmmss",function(f,g,C){var S=f.length-4,L=f.length-2;g[Mn]=nt(f.substr(0,S)),g[Fi]=nt(f.substr(S,2)),g[$t]=nt(f.substr(L))});function ra(f){return(f+"").toLowerCase().charAt(0)==="p"}var Zv=/[ap]\.?m?\.?/i,Jv=Xr("Hours",!0);function Zf(f,g,C){return f>11?C?"pm":"PM":C?"am":"AM"}var Jf={calendar:me,longDateFormat:et,invalidDate:lt,ordinal:Bn,dayOfMonthOrdinalParse:Zt,relativeTime:Gt,months:fe,monthsShort:de,week:yn,weekdays:na,weekdaysMin:Uv,weekdaysShort:pd,meridiemParse:Zv},fn={},il={},oa;function rl(f,g){var C,S=Math.min(f.length,g.length);for(C=0;C<S;C+=1)if(f[C]!==g[C])return C;return S}function Kf(f){return f&&f.toLowerCase().replace("_","-")}function Kv(f){for(var g=0,C,S,L,K;g<f.length;){for(K=Kf(f[g]).split("-"),C=K.length,S=Kf(f[g+1]),S=S?S.split("-"):null;C>0;){if(L=ol(K.slice(0,C).join("-")),L)return L;if(S&&S.length>=C&&rl(K,S)>=C-1)break;C--}g++}return oa}function Qv(f){return!!(f&&f.match("^[^/\\\\]*$"))}function ol(f){var g=null,C;if(fn[f]===void 0&&typeof cd<"u"&&cd&&cd.exports&&Qv(f))try{g=oa._abbr,C=PC,C("./locale/"+f),Xi(g)}catch{fn[f]=null}return fn[f]}function Xi(f,g){var C;return f&&(u(g)?C=ho(f):C=vd(f,g),C?oa=C:typeof console<"u"&&console.warn&&console.warn("Locale "+f+" not found. Did you forget to load it?")),oa._abbr}function vd(f,g){if(g!==null){var C,S=Jf;if(g.abbr=f,fn[f]!=null)B("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),S=fn[f]._config;else if(g.parentLocale!=null)if(fn[g.parentLocale]!=null)S=fn[g.parentLocale]._config;else if(C=ol(g.parentLocale),C!=null)S=C._config;else return il[g.parentLocale]||(il[g.parentLocale]=[]),il[g.parentLocale].push({name:f,config:g}),null;return fn[f]=new ve(ue(S,g)),il[f]&&il[f].forEach(function(L){vd(L.name,L.config)}),Xi(f),fn[f]}else return delete fn[f],null}function ex(f,g){if(g!=null){var C,S,L=Jf;fn[f]!=null&&fn[f].parentLocale!=null?fn[f].set(ue(fn[f]._config,g)):(S=ol(f),S!=null&&(L=S._config),g=ue(L,g),S==null&&(g.abbr=f),C=new ve(g),C.parentLocale=fn[f],fn[f]=C),Xi(f)}else fn[f]!=null&&(fn[f].parentLocale!=null?(fn[f]=fn[f].parentLocale,f===Xi()&&Xi(f)):fn[f]!=null&&delete fn[f]);return fn[f]}function ho(f){var g;if(f&&f._locale&&f._locale._abbr&&(f=f._locale._abbr),!f)return oa;if(!i(f)){if(g=ol(f),g)return g;f=[f]}return Kv(f)}function tx(){return _e(fn)}function xd(f){var g,C=f._a;return C&&M(f).overflow===-2&&(g=C[ir]<0||C[ir]>11?ir:C[qi]<1||C[qi]>ne(C[ci],C[ir])?qi:C[Mn]<0||C[Mn]>24||C[Mn]===24&&(C[Fi]!==0||C[$t]!==0||C[Yr]!==0)?Mn:C[Fi]<0||C[Fi]>59?Fi:C[$t]<0||C[$t]>59?$t:C[Yr]<0||C[Yr]>999?Yr:-1,M(f)._overflowDayOfYear&&(g<ci||g>qi)&&(g=qi),M(f)._overflowWeeks&&g===-1&&(g=Qs),M(f)._overflowWeekday&&g===-1&&(g=fu),M(f).overflow=g),f}var nx=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ix=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,rx=/Z|[+-]\d\d(?::?\d\d)?/,pu=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],yd=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],mu=/^\/?Date\((-?\d+)/i,Qf=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ox={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function eh(f){var g,C,S=f._i,L=nx.exec(S)||ix.exec(S),K,ge,rt,Ct,on=pu.length,Zi=yd.length;if(L){for(M(f).iso=!0,g=0,C=on;g<C;g++)if(pu[g][1].exec(L[1])){ge=pu[g][0],K=pu[g][2]!==!1;break}if(ge==null){f._isValid=!1;return}if(L[3]){for(g=0,C=Zi;g<C;g++)if(yd[g][1].exec(L[3])){rt=(L[2]||" ")+yd[g][0];break}if(rt==null){f._isValid=!1;return}}if(!K&&rt!=null){f._isValid=!1;return}if(L[4])if(rx.exec(L[4]))Ct="Z";else{f._isValid=!1;return}f._f=ge+(rt||"")+(Ct||""),_u(f)}else f._isValid=!1}function sx(f,g,C,S,L,K){var ge=[th(f),de.indexOf(g),parseInt(C,10),parseInt(S,10),parseInt(L,10)];return K&&ge.push(parseInt(K,10)),ge}function th(f){var g=parseInt(f,10);return g<=49?2e3+g:g<=999?1900+g:g}function ax(f){return f.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function bd(f,g,C){if(f){var S=pd.indexOf(f),L=new Date(g[0],g[1],g[2]).getDay();if(S!==L)return M(C).weekdayMismatch=!0,C._isValid=!1,!1}return!0}function nh(f,g,C){if(f)return ox[f];if(g)return 0;var S=parseInt(C,10),L=S%100,K=(S-L)/100;return K*60+L}function Cd(f){var g=Qf.exec(ax(f._i)),C;if(g){if(C=sx(g[4],g[3],g[2],g[5],g[6],g[7]),!bd(g[1],C,f))return;f._a=C,f._tzm=nh(g[8],g[9],g[10]),f._d=Vt.apply(null,f._a),f._d.setUTCMinutes(f._d.getUTCMinutes()-f._tzm),M(f).rfc2822=!0}else f._isValid=!1}function wd(f){var g=mu.exec(f._i);if(g!==null){f._d=new Date(+g[1]);return}if(eh(f),f._isValid===!1)delete f._isValid;else return;if(Cd(f),f._isValid===!1)delete f._isValid;else return;f._strict?f._isValid=!1:t.createFromInputFallback(f)}t.createFromInputFallback=re("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(f){f._d=new Date(f._i+(f._useUTC?" UTC":""))});function po(f,g,C){return f??g??C}function lx(f){var g=new Date(t.now());return f._useUTC?[g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()]:[g.getFullYear(),g.getMonth(),g.getDate()]}function gu(f){var g,C,S=[],L,K,ge;if(!f._d){for(L=lx(f),f._w&&f._a[qi]==null&&f._a[ir]==null&&ih(f),f._dayOfYear!=null&&(ge=po(f._a[ci],L[ci]),(f._dayOfYear>qr(ge)||f._dayOfYear===0)&&(M(f)._overflowDayOfYear=!0),C=Vt(ge,0,f._dayOfYear),f._a[ir]=C.getUTCMonth(),f._a[qi]=C.getUTCDate()),g=0;g<3&&f._a[g]==null;++g)f._a[g]=S[g]=L[g];for(;g<7;g++)f._a[g]=S[g]=f._a[g]==null?g===2?1:0:f._a[g];f._a[Mn]===24&&f._a[Fi]===0&&f._a[$t]===0&&f._a[Yr]===0&&(f._nextDay=!0,f._a[Mn]=0),f._d=(f._useUTC?Vt:ft).apply(null,S),K=f._useUTC?f._d.getUTCDay():f._d.getDay(),f._tzm!=null&&f._d.setUTCMinutes(f._d.getUTCMinutes()-f._tzm),f._nextDay&&(f._a[Mn]=24),f._w&&typeof f._w.d<"u"&&f._w.d!==K&&(M(f).weekdayMismatch=!0)}}function ih(f){var g,C,S,L,K,ge,rt,Ct,on;g=f._w,g.GG!=null||g.W!=null||g.E!=null?(K=1,ge=4,C=po(g.GG,f._a[ci],rr(On(),1,4).year),S=po(g.W,1),L=po(g.E,1),(L<1||L>7)&&(Ct=!0)):(K=f._locale._week.dow,ge=f._locale._week.doy,on=rr(On(),K,ge),C=po(g.gg,f._a[ci],on.year),S=po(g.w,on.week),g.d!=null?(L=g.d,(L<0||L>6)&&(Ct=!0)):g.e!=null?(L=g.e+K,(g.e<0||g.e>6)&&(Ct=!0)):L=K),S<1||S>Hn(C,K,ge)?M(f)._overflowWeeks=!0:Ct!=null?M(f)._overflowWeekday=!0:(rt=bi(C,S,L,K,ge),f._a[ci]=rt.year,f._dayOfYear=rt.dayOfYear)}t.ISO_8601=function(){},t.RFC_2822=function(){};function _u(f){if(f._f===t.ISO_8601){eh(f);return}if(f._f===t.RFC_2822){Cd(f);return}f._a=[],M(f).empty=!0;var g=""+f._i,C,S,L,K,ge,rt=g.length,Ct=0,on,Zi;for(L=Ae(f._f,f._locale).match($e)||[],Zi=L.length,C=0;C<Zi;C++)K=L[C],S=(g.match(Ee(K,f))||[])[0],S&&(ge=g.substr(0,g.indexOf(S)),ge.length>0&&M(f).unusedInput.push(ge),g=g.slice(g.indexOf(S)+S.length),Ct+=S.length),_t[K]?(S?M(f).empty=!1:M(f).unusedTokens.push(K),Ks(K,S,f)):f._strict&&!S&&M(f).unusedTokens.push(K);M(f).charsLeftOver=rt-Ct,g.length>0&&M(f).unusedInput.push(g),f._a[Mn]<=12&&M(f).bigHour===!0&&f._a[Mn]>0&&(M(f).bigHour=void 0),M(f).parsedDateParts=f._a.slice(0),M(f).meridiem=f._meridiem,f._a[Mn]=rh(f._locale,f._a[Mn],f._meridiem),on=M(f).era,on!==null&&(f._a[ci]=f._locale.erasConvertYear(on,f._a[ci])),gu(f),xd(f)}function rh(f,g,C){var S;return C==null?g:f.meridiemHour!=null?f.meridiemHour(g,C):(f.isPM!=null&&(S=f.isPM(C),S&&g<12&&(g+=12),!S&&g===12&&(g=0)),g)}function oh(f){var g,C,S,L,K,ge,rt=!1,Ct=f._f.length;if(Ct===0){M(f).invalidFormat=!0,f._d=new Date(NaN);return}for(L=0;L<Ct;L++)K=0,ge=!1,g=W({},f),f._useUTC!=null&&(g._useUTC=f._useUTC),g._f=f._f[L],_u(g),E(g)&&(ge=!0),K+=M(g).charsLeftOver,K+=M(g).unusedTokens.length*10,M(g).score=K,rt?K<S&&(S=K,C=g):(S==null||K<S||ge)&&(S=K,C=g,ge&&(rt=!0));m(f,C||g)}function sh(f){if(!f._d){var g=Jt(f._i),C=g.day===void 0?g.date:g.day;f._a=_([g.year,g.month,C,g.hour,g.minute,g.second,g.millisecond],function(S){return S&&parseInt(S,10)}),gu(f)}}function ah(f){var g=new G(xd(Md(f)));return g._nextDay&&(g.add(1,"d"),g._nextDay=void 0),g}function Md(f){var g=f._i,C=f._f;return f._locale=f._locale||ho(f._l),g===null||C===void 0&&g===""?w({nullInput:!0}):(typeof g=="string"&&(f._i=g=f._locale.preparse(g)),Y(g)?new G(xd(g)):(p(g)?f._d=g:i(C)?oh(f):C?_u(f):lh(f),E(f)||(f._d=null),f))}function lh(f){var g=f._i;u(g)?f._d=new Date(t.now()):p(g)?f._d=new Date(g.valueOf()):typeof g=="string"?wd(f):i(g)?(f._a=_(g.slice(0),function(C){return parseInt(C,10)}),gu(f)):r(g)?sh(f):d(g)?f._d=new Date(g):t.createFromInputFallback(f)}function mo(f,g,C,S,L){var K={};return(g===!0||g===!1)&&(S=g,g=void 0),(C===!0||C===!1)&&(S=C,C=void 0),(r(f)&&s(f)||i(f)&&f.length===0)&&(f=void 0),K._isAMomentObject=!0,K._useUTC=K._isUTC=L,K._l=C,K._i=f,K._f=g,K._strict=S,ah(K)}function On(f,g,C,S){return mo(f,g,C,S,!1)}var ux=re("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var f=On.apply(null,arguments);return this.isValid()&&f.isValid()?f<this?this:f:w()}),cx=re("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var f=On.apply(null,arguments);return this.isValid()&&f.isValid()?f>this?this:f:w()});function Sd(f,g){var C,S;if(g.length===1&&i(g[0])&&(g=g[0]),!g.length)return On();for(C=g[0],S=1;S<g.length;++S)(!g[S].isValid()||g[S][f](C))&&(C=g[S]);return C}function uh(){var f=[].slice.call(arguments,0);return Sd("isBefore",f)}function ch(){var f=[].slice.call(arguments,0);return Sd("isAfter",f)}var dx=function(){return Date.now?Date.now():+new Date},sl=["year","quarter","month","week","day","hour","minute","second","millisecond"];function fx(f){var g,C=!1,S,L=sl.length;for(g in f)if(o(f,g)&&!(N.call(sl,g)!==-1&&(f[g]==null||!isNaN(f[g]))))return!1;for(S=0;S<L;++S)if(f[sl[S]]){if(C)return!1;parseFloat(f[sl[S]])!==nt(f[sl[S]])&&(C=!0)}return!0}function dh(){return this._isValid}function fh(){return Ar(NaN)}function vu(f){var g=Jt(f),C=g.year||0,S=g.quarter||0,L=g.month||0,K=g.week||g.isoWeek||0,ge=g.day||0,rt=g.hour||0,Ct=g.minute||0,on=g.second||0,Zi=g.millisecond||0;this._isValid=fx(g),this._milliseconds=+Zi+on*1e3+Ct*6e4+rt*1e3*60*60,this._days=+ge+K*7,this._months=+L+S*3+C*12,this._data={},this._locale=ho(),this._bubble()}function al(f){return f instanceof vu}function Ed(f){return f<0?Math.round(-1*f)*-1:Math.round(f)}function hh(f,g,C){var S=Math.min(f.length,g.length),L=Math.abs(f.length-g.length),K=0,ge;for(ge=0;ge<S;ge++)(C&&f[ge]!==g[ge]||!C&&nt(f[ge])!==nt(g[ge]))&&K++;return K+L}function xu(f,g){Pe(f,0,0,function(){var C=this.utcOffset(),S="+";return C<0&&(C=-C,S="-"),S+we(~~(C/60),2)+g+we(~~C%60,2)})}xu("Z",":"),xu("ZZ",""),le("Z",He),le("ZZ",He),Lt(["Z","ZZ"],function(f,g,C){C._useUTC=!0,C._tzm=Ad(He,f)});var hx=/([\+\-]|\d\d)/gi;function Ad(f,g){var C=(g||"").match(f),S,L,K;return C===null?null:(S=C[C.length-1]||[],L=(S+"").match(hx)||["-",0,0],K=+(L[1]*60)+nt(L[2]),K===0?0:L[0]==="+"?K:-K)}function Td(f,g){var C,S;return g._isUTC?(C=g.clone(),S=(Y(f)||p(f)?f.valueOf():On(f).valueOf())-C.valueOf(),C._d.setTime(C._d.valueOf()+S),t.updateOffset(C,!1),C):On(f).local()}function Dd(f){return-Math.round(f._d.getTimezoneOffset())}t.updateOffset=function(){};function yu(f,g,C){var S=this._offset||0,L;if(!this.isValid())return f!=null?this:NaN;if(f!=null){if(typeof f=="string"){if(f=Ad(He,f),f===null)return this}else Math.abs(f)<16&&!C&&(f=f*60);return!this._isUTC&&g&&(L=Dd(this)),this._offset=f,this._isUTC=!0,L!=null&&this.add(L,"m"),S!==f&&(!g||this._changeInProgress?_h(this,Ar(f-S,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?S:Dd(this)}function px(f,g){return f!=null?(typeof f!="string"&&(f=-f),this.utcOffset(f,g),this):-this.utcOffset()}function mx(f){return this.utcOffset(0,f)}function gx(f){return this._isUTC&&(this.utcOffset(0,f),this._isUTC=!1,f&&this.subtract(Dd(this),"m")),this}function _x(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var f=Ad(ut,this._i);f!=null?this.utcOffset(f):this.utcOffset(0,!0)}return this}function ph(f){return this.isValid()?(f=f?On(f).utcOffset():0,(this.utcOffset()-f)%60===0):!1}function vx(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function xx(){if(!u(this._isDSTShifted))return this._isDSTShifted;var f={},g;return W(f,this),f=Md(f),f._a?(g=f._isUTC?y(f._a):On(f._a),this._isDSTShifted=this.isValid()&&hh(f._a,g.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function yx(){return this.isValid()?!this._isUTC:!1}function bx(){return this.isValid()?this._isUTC:!1}function Pd(){return this.isValid()?this._isUTC&&this._offset===0:!1}var mh=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Cx=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ar(f,g){var C=f,S=null,L,K,ge;return al(f)?C={ms:f._milliseconds,d:f._days,M:f._months}:d(f)||!isNaN(+f)?(C={},g?C[g]=+f:C.milliseconds=+f):(S=mh.exec(f))?(L=S[1]==="-"?-1:1,C={y:0,d:nt(S[qi])*L,h:nt(S[Mn])*L,m:nt(S[Fi])*L,s:nt(S[$t])*L,ms:nt(Ed(S[Yr]*1e3))*L}):(S=Cx.exec(f))?(L=S[1]==="-"?-1:1,C={y:xs(S[2],L),M:xs(S[3],L),w:xs(S[4],L),d:xs(S[5],L),h:xs(S[6],L),m:xs(S[7],L),s:xs(S[8],L)}):C==null?C={}:typeof C=="object"&&("from"in C||"to"in C)&&(ge=Od(On(C.from),On(C.to)),C={},C.ms=ge.milliseconds,C.M=ge.months),K=new vu(C),al(f)&&o(f,"_locale")&&(K._locale=f._locale),al(f)&&o(f,"_isValid")&&(K._isValid=f._isValid),K}Ar.fn=vu.prototype,Ar.invalid=fh;function xs(f,g){var C=f&&parseFloat(f.replace(",","."));return(isNaN(C)?0:C)*g}function Id(f,g){var C={};return C.months=g.month()-f.month()+(g.year()-f.year())*12,f.clone().add(C.months,"M").isAfter(g)&&--C.months,C.milliseconds=+g-+f.clone().add(C.months,"M"),C}function Od(f,g){var C;return f.isValid()&&g.isValid()?(g=Td(g,f),f.isBefore(g)?C=Id(f,g):(C=Id(g,f),C.milliseconds=-C.milliseconds,C.months=-C.months),C):{milliseconds:0,months:0}}function gh(f,g){return function(C,S){var L,K;return S!==null&&!isNaN(+S)&&(B(g,"moment()."+g+"(period, number) is deprecated. Please use moment()."+g+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),K=C,C=S,S=K),L=Ar(C,S),_h(this,L,f),this}}function _h(f,g,C,S){var L=g._milliseconds,K=Ed(g._days),ge=Ed(g._months);f.isValid()&&(S=S??!0,ge&&pt(f,Er(f,"Month")+ge*C),K&&nl(f,"Date",Er(f,"Date")+K*C),L&&f._d.setTime(f._d.valueOf()+L*C),S&&t.updateOffset(f,K||ge))}var wx=gh(1,"add"),gC=gh(-1,"subtract");function Mx(f){return typeof f=="string"||f instanceof String}function _C(f){return Y(f)||p(f)||Mx(f)||d(f)||Ex(f)||Sx(f)||f===null||f===void 0}function Sx(f){var g=r(f)&&!s(f),C=!1,S=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],L,K,ge=S.length;for(L=0;L<ge;L+=1)K=S[L],C=C||o(f,K);return g&&C}function Ex(f){var g=i(f),C=!1;return g&&(C=f.filter(function(S){return!d(S)&&Mx(f)}).length===0),g&&C}function vh(f){var g=r(f)&&!s(f),C=!1,S=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],L,K;for(L=0;L<S.length;L+=1)K=S[L],C=C||o(f,K);return g&&C}function Ax(f,g){var C=f.diff(g,"days",!0);return C<-6?"sameElse":C<-1?"lastWeek":C<0?"lastDay":C<1?"sameDay":C<2?"nextDay":C<7?"nextWeek":"sameElse"}function Tx(f,g){arguments.length===1&&(arguments[0]?_C(arguments[0])?(f=arguments[0],g=void 0):vh(arguments[0])&&(g=arguments[0],f=void 0):(f=void 0,g=void 0));var C=f||On(),S=Td(C,this).startOf("day"),L=t.calendarFormat(this,S)||"sameElse",K=g&&(X(g[L])?g[L].call(this,C):g[L]);return this.format(K||this.localeData().calendar(L,this,On(C)))}function Dx(){return new G(this)}function Px(f,g){var C=Y(f)?f:On(f);return this.isValid()&&C.isValid()?(g=en(g)||"millisecond",g==="millisecond"?this.valueOf()>C.valueOf():C.valueOf()<this.clone().startOf(g).valueOf()):!1}function Ix(f,g){var C=Y(f)?f:On(f);return this.isValid()&&C.isValid()?(g=en(g)||"millisecond",g==="millisecond"?this.valueOf()<C.valueOf():this.clone().endOf(g).valueOf()<C.valueOf()):!1}function Ox(f,g,C,S){var L=Y(f)?f:On(f),K=Y(g)?g:On(g);return this.isValid()&&L.isValid()&&K.isValid()?(S=S||"()",(S[0]==="("?this.isAfter(L,C):!this.isBefore(L,C))&&(S[1]===")"?this.isBefore(K,C):!this.isAfter(K,C))):!1}function Rx(f,g){var C=Y(f)?f:On(f),S;return this.isValid()&&C.isValid()?(g=en(g)||"millisecond",g==="millisecond"?this.valueOf()===C.valueOf():(S=C.valueOf(),this.clone().startOf(g).valueOf()<=S&&S<=this.clone().endOf(g).valueOf())):!1}function kx(f,g){return this.isSame(f,g)||this.isAfter(f,g)}function Fx(f,g){return this.isSame(f,g)||this.isBefore(f,g)}function ys(f,g,C){var S,L,K;if(!this.isValid())return NaN;if(S=Td(f,this),!S.isValid())return NaN;switch(L=(S.utcOffset()-this.utcOffset())*6e4,g=en(g),g){case"year":K=ll(this,S)/12;break;case"month":K=ll(this,S);break;case"quarter":K=ll(this,S)/3;break;case"second":K=(this-S)/1e3;break;case"minute":K=(this-S)/6e4;break;case"hour":K=(this-S)/36e5;break;case"day":K=(this-S-L)/864e5;break;case"week":K=(this-S-L)/6048e5;break;default:K=this-S}return C?K:Ft(K)}function ll(f,g){if(f.date()<g.date())return-ll(g,f);var C=(g.year()-f.year())*12+(g.month()-f.month()),S=f.clone().add(C,"months"),L,K;return g-S<0?(L=f.clone().add(C-1,"months"),K=(g-S)/(S-L)):(L=f.clone().add(C+1,"months"),K=(g-S)/(L-S)),-(C+K)||0}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Nx(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function bu(f){if(!this.isValid())return null;var g=f!==!0,C=g?this.clone().utc():this;return C.year()<0||C.year()>9999?Ce(C,g?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):X(Date.prototype.toISOString)?g?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ce(C,"Z")):Ce(C,g?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Lx(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var f="moment",g="",C,S,L,K;return this.isLocal()||(f=this.utcOffset()===0?"moment.utc":"moment.parseZone",g="Z"),C="["+f+'("]',S=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",L="-MM-DD[T]HH:mm:ss.SSS",K=g+'[")]',this.format(C+S+L+K)}function Vx(f){f||(f=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var g=Ce(this,f);return this.localeData().postformat(g)}function Ux(f,g){return this.isValid()&&(Y(f)&&f.isValid()||On(f).isValid())?Ar({to:this,from:f}).locale(this.locale()).humanize(!g):this.localeData().invalidDate()}function xh(f){return this.from(On(),f)}function Bx(f,g){return this.isValid()&&(Y(f)&&f.isValid()||On(f).isValid())?Ar({from:this,to:f}).locale(this.locale()).humanize(!g):this.localeData().invalidDate()}function zx(f){return this.to(On(),f)}function yh(f){var g;return f===void 0?this._locale._abbr:(g=ho(f),g!=null&&(this._locale=g),this)}var Tr=re("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(f){return f===void 0?this.localeData():this.locale(f)});function ul(){return this._locale}var Fn=1e3,sa=60*Fn,Cu=60*sa,bh=(365*400+97)*24*Cu;function aa(f,g){return(f%g+g)%g}function Ch(f,g,C){return f<100&&f>=0?new Date(f+400,g,C)-bh:new Date(f,g,C).valueOf()}function wh(f,g,C){return f<100&&f>=0?Date.UTC(f+400,g,C)-bh:Date.UTC(f,g,C)}function Hx(f){var g,C;if(f=en(f),f===void 0||f==="millisecond"||!this.isValid())return this;switch(C=this._isUTC?wh:Ch,f){case"year":g=C(this.year(),0,1);break;case"quarter":g=C(this.year(),this.month()-this.month()%3,1);break;case"month":g=C(this.year(),this.month(),1);break;case"week":g=C(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":g=C(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":g=C(this.year(),this.month(),this.date());break;case"hour":g=this._d.valueOf(),g-=aa(g+(this._isUTC?0:this.utcOffset()*sa),Cu);break;case"minute":g=this._d.valueOf(),g-=aa(g,sa);break;case"second":g=this._d.valueOf(),g-=aa(g,Fn);break}return this._d.setTime(g),t.updateOffset(this,!0),this}function jx(f){var g,C;if(f=en(f),f===void 0||f==="millisecond"||!this.isValid())return this;switch(C=this._isUTC?wh:Ch,f){case"year":g=C(this.year()+1,0,1)-1;break;case"quarter":g=C(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":g=C(this.year(),this.month()+1,1)-1;break;case"week":g=C(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":g=C(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":g=C(this.year(),this.month(),this.date()+1)-1;break;case"hour":g=this._d.valueOf(),g+=Cu-aa(g+(this._isUTC?0:this.utcOffset()*sa),Cu)-1;break;case"minute":g=this._d.valueOf(),g+=sa-aa(g,sa)-1;break;case"second":g=this._d.valueOf(),g+=Fn-aa(g,Fn)-1;break}return this._d.setTime(g),t.updateOffset(this,!0),this}function wu(){return this._d.valueOf()-(this._offset||0)*6e4}function v(){return Math.floor(this.valueOf()/1e3)}function x(){return new Date(this.valueOf())}function A(){var f=this;return[f.year(),f.month(),f.date(),f.hour(),f.minute(),f.second(),f.millisecond()]}function U(){var f=this;return{years:f.year(),months:f.month(),date:f.date(),hours:f.hours(),minutes:f.minutes(),seconds:f.seconds(),milliseconds:f.milliseconds()}}function oe(){return this.isValid()?this.toISOString():null}function Le(){return E(this)}function St(){return m({},M(this))}function Kt(){return M(this).overflow}function Sn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Pe("N",0,0,"eraAbbr"),Pe("NN",0,0,"eraAbbr"),Pe("NNN",0,0,"eraAbbr"),Pe("NNNN",0,0,"eraName"),Pe("NNNNN",0,0,"eraNarrow"),Pe("y",["y",1],"yo","eraYear"),Pe("y",["yy",2],0,"eraYear"),Pe("y",["yyy",3],0,"eraYear"),Pe("y",["yyyy",4],0,"eraYear"),le("N",Wx),le("NN",Wx),le("NNN",Wx),le("NNNN",ZT),le("NNNNN",JT),Lt(["N","NN","NNN","NNNN","NNNNN"],function(f,g,C,S){var L=C._locale.erasParse(f,S,C._strict);L?M(C).era=L:M(C).invalidEra=f}),le("y",Be),le("yy",Be),le("yyy",Be),le("yyyy",Be),le("yo",KT),Lt(["y","yy","yyy","yyyy"],ci),Lt(["yo"],function(f,g,C,S){var L;C._locale._eraYearOrdinalRegex&&(L=f.match(C._locale._eraYearOrdinalRegex)),C._locale.eraYearOrdinalParse?g[ci]=C._locale.eraYearOrdinalParse(f,L):g[ci]=parseInt(f,10)});function la(f,g){var C,S,L,K=this._eras||ho("en")._eras;for(C=0,S=K.length;C<S;++C){switch(typeof K[C].since){case"string":L=t(K[C].since).startOf("day"),K[C].since=L.valueOf();break}switch(typeof K[C].until){case"undefined":K[C].until=1/0;break;case"string":L=t(K[C].until).startOf("day").valueOf(),K[C].until=L.valueOf();break}}return K}function Rd(f,g,C){var S,L,K=this.eras(),ge,rt,Ct;for(f=f.toUpperCase(),S=0,L=K.length;S<L;++S)if(ge=K[S].name.toUpperCase(),rt=K[S].abbr.toUpperCase(),Ct=K[S].narrow.toUpperCase(),C)switch(g){case"N":case"NN":case"NNN":if(rt===f)return K[S];break;case"NNNN":if(ge===f)return K[S];break;case"NNNNN":if(Ct===f)return K[S];break}else if([ge,rt,Ct].indexOf(f)>=0)return K[S]}function HT(f,g){var C=f.since<=f.until?1:-1;return g===void 0?t(f.since).year():t(f.since).year()+(g-f.offset)*C}function jT(){var f,g,C,S=this.localeData().eras();for(f=0,g=S.length;f<g;++f)if(C=this.clone().startOf("day").valueOf(),S[f].since<=C&&C<=S[f].until||S[f].until<=C&&C<=S[f].since)return S[f].name;return""}function WT(){var f,g,C,S=this.localeData().eras();for(f=0,g=S.length;f<g;++f)if(C=this.clone().startOf("day").valueOf(),S[f].since<=C&&C<=S[f].until||S[f].until<=C&&C<=S[f].since)return S[f].narrow;return""}function GT(){var f,g,C,S=this.localeData().eras();for(f=0,g=S.length;f<g;++f)if(C=this.clone().startOf("day").valueOf(),S[f].since<=C&&C<=S[f].until||S[f].until<=C&&C<=S[f].since)return S[f].abbr;return""}function $T(){var f,g,C,S,L=this.localeData().eras();for(f=0,g=L.length;f<g;++f)if(C=L[f].since<=L[f].until?1:-1,S=this.clone().startOf("day").valueOf(),L[f].since<=S&&S<=L[f].until||L[f].until<=S&&S<=L[f].since)return(this.year()-t(L[f].since).year())*C+L[f].offset;return this.year()}function YT(f){return o(this,"_erasNameRegex")||Gx.call(this),f?this._erasNameRegex:this._erasRegex}function qT(f){return o(this,"_erasAbbrRegex")||Gx.call(this),f?this._erasAbbrRegex:this._erasRegex}function XT(f){return o(this,"_erasNarrowRegex")||Gx.call(this),f?this._erasNarrowRegex:this._erasRegex}function Wx(f,g){return g.erasAbbrRegex(f)}function ZT(f,g){return g.erasNameRegex(f)}function JT(f,g){return g.erasNarrowRegex(f)}function KT(f,g){return g._eraYearOrdinalRegex||Be}function Gx(){var f=[],g=[],C=[],S=[],L,K,ge,rt,Ct,on=this.eras();for(L=0,K=on.length;L<K;++L)ge=ht(on[L].name),rt=ht(on[L].abbr),Ct=ht(on[L].narrow),g.push(ge),f.push(rt),C.push(Ct),S.push(ge),S.push(rt),S.push(Ct);this._erasRegex=new RegExp("^("+S.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+g.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+f.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+C.join("|")+")","i")}Pe(0,["gg",2],0,function(){return this.weekYear()%100}),Pe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Mh(f,g){Pe(0,[f,f.length],0,g)}Mh("gggg","weekYear"),Mh("ggggg","weekYear"),Mh("GGGG","isoWeekYear"),Mh("GGGGG","isoWeekYear"),le("G",Ke),le("g",Ke),le("GG",ce,I),le("gg",ce,I),le("GGGG",mt,pe),le("gggg",mt,pe),le("GGGGG",De,Me),le("ggggg",De,Me),_s(["gggg","ggggg","GGGG","GGGGG"],function(f,g,C,S){g[S.substr(0,2)]=nt(f)}),_s(["gg","GG"],function(f,g,C,S){g[S]=t.parseTwoDigitYear(f)});function QT(f){return vC.call(this,f,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function eD(f){return vC.call(this,f,this.isoWeek(),this.isoWeekday(),1,4)}function tD(){return Hn(this.year(),1,4)}function nD(){return Hn(this.isoWeekYear(),1,4)}function iD(){var f=this.localeData()._week;return Hn(this.year(),f.dow,f.doy)}function rD(){var f=this.localeData()._week;return Hn(this.weekYear(),f.dow,f.doy)}function vC(f,g,C,S,L){var K;return f==null?rr(this,S,L).year:(K=Hn(f,S,L),g>K&&(g=K),oD.call(this,f,g,C,S,L))}function oD(f,g,C,S,L){var K=bi(f,g,C,S,L),ge=Vt(K.year,0,K.dayOfYear);return this.year(ge.getUTCFullYear()),this.month(ge.getUTCMonth()),this.date(ge.getUTCDate()),this}Pe("Q",0,"Qo","quarter"),le("Q",z),Lt("Q",function(f,g){g[ir]=(nt(f)-1)*3});function sD(f){return f==null?Math.ceil((this.month()+1)/3):this.month((f-1)*3+this.month()%3)}Pe("D",["DD",2],"Do","date"),le("D",ce,ze),le("DD",ce,I),le("Do",function(f,g){return f?g._dayOfMonthOrdinalParse||g._ordinalParse:g._dayOfMonthOrdinalParseLenient}),Lt(["D","DD"],qi),Lt("Do",function(f,g){g[qi]=nt(f.match(ce)[0])});var xC=Xr("Date",!0);Pe("DDD",["DDDD",3],"DDDo","dayOfYear"),le("DDD",st),le("DDDD",Q),Lt(["DDD","DDDD"],function(f,g,C){C._dayOfYear=nt(f)});function aD(f){var g=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return f==null?g:this.add(f-g,"d")}Pe("m",["mm",2],0,"minute"),le("m",ce,ke),le("mm",ce,I),Lt(["m","mm"],Fi);var lD=Xr("Minutes",!1);Pe("s",["ss",2],0,"second"),le("s",ce,ke),le("ss",ce,I),Lt(["s","ss"],$t);var uD=Xr("Seconds",!1);Pe("S",0,0,function(){return~~(this.millisecond()/100)}),Pe(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Pe(0,["SSS",3],0,"millisecond"),Pe(0,["SSSS",4],0,function(){return this.millisecond()*10}),Pe(0,["SSSSS",5],0,function(){return this.millisecond()*100}),Pe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),Pe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),Pe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),Pe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),le("S",st,z),le("SS",st,I),le("SSS",st,Q);var ua,yC;for(ua="SSSS";ua.length<=9;ua+="S")le(ua,Be);function cD(f,g){g[Yr]=nt(("0."+f)*1e3)}for(ua="S";ua.length<=9;ua+="S")Lt(ua,cD);yC=Xr("Milliseconds",!1),Pe("z",0,0,"zoneAbbr"),Pe("zz",0,0,"zoneName");function dD(){return this._isUTC?"UTC":""}function fD(){return this._isUTC?"Coordinated Universal Time":""}var Fe=G.prototype;Fe.add=wx,Fe.calendar=Tx,Fe.clone=Dx,Fe.diff=ys,Fe.endOf=jx,Fe.format=Vx,Fe.from=Ux,Fe.fromNow=xh,Fe.to=Bx,Fe.toNow=zx,Fe.get=ea,Fe.invalidAt=Kt,Fe.isAfter=Px,Fe.isBefore=Ix,Fe.isBetween=Ox,Fe.isSame=Rx,Fe.isSameOrAfter=kx,Fe.isSameOrBefore=Fx,Fe.isValid=Le,Fe.lang=Tr,Fe.locale=yh,Fe.localeData=ul,Fe.max=cx,Fe.min=ux,Fe.parsingFlags=St,Fe.set=zn,Fe.startOf=Hx,Fe.subtract=gC,Fe.toArray=A,Fe.toObject=U,Fe.toDate=x,Fe.toISOString=bu,Fe.inspect=Lx,typeof Symbol<"u"&&Symbol.for!=null&&(Fe[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Fe.toJSON=oe,Fe.toString=Nx,Fe.unix=v,Fe.valueOf=wu,Fe.creationData=Sn,Fe.eraName=jT,Fe.eraNarrow=WT,Fe.eraAbbr=GT,Fe.eraYear=$T,Fe.year=tl,Fe.isLeapYear=hu,Fe.weekYear=QT,Fe.isoWeekYear=eD,Fe.quarter=Fe.quarters=sD,Fe.month=At,Fe.daysInMonth=dn,Fe.week=Fe.weeks=di,Fe.isoWeek=Fe.isoWeeks=Pi,Fe.weeksInYear=iD,Fe.weeksInWeekYear=rD,Fe.isoWeeksInYear=tD,Fe.isoWeeksInISOWeekYear=nD,Fe.date=xC,Fe.day=Fe.days=ia,Fe.weekday=$v,Fe.isoWeekday=$f,Fe.dayOfYear=aD,Fe.hour=Fe.hours=Jv,Fe.minute=Fe.minutes=lD,Fe.second=Fe.seconds=uD,Fe.millisecond=Fe.milliseconds=yC,Fe.utcOffset=yu,Fe.utc=mx,Fe.local=gx,Fe.parseZone=_x,Fe.hasAlignedHourOffset=ph,Fe.isDST=vx,Fe.isLocal=yx,Fe.isUtcOffset=bx,Fe.isUtc=Pd,Fe.isUTC=Pd,Fe.zoneAbbr=dD,Fe.zoneName=fD,Fe.dates=re("dates accessor is deprecated. Use date instead.",xC),Fe.months=re("months accessor is deprecated. Use month instead",At),Fe.years=re("years accessor is deprecated. Use year instead",tl),Fe.zone=re("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",px),Fe.isDSTShifted=re("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",xx);function hD(f){return On(f*1e3)}function pD(){return On.apply(null,arguments).parseZone()}function bC(f){return f}var gn=ve.prototype;gn.calendar=he,gn.longDateFormat=wt,gn.invalidDate=qt,gn.ordinal=Mt,gn.preparse=bC,gn.postformat=bC,gn.relativeTime=Dt,gn.pastFuture=Qt,gn.set=ie,gn.eras=la,gn.erasParse=Rd,gn.erasConvertYear=HT,gn.erasAbbrRegex=qT,gn.erasNameRegex=YT,gn.erasNarrowRegex=XT,gn.months=qe,gn.monthsShort=it,gn.monthsParse=gt,gn.monthsRegex=kn,gn.monthsShortRegex=In,gn.week=vs,gn.firstDayOfYear=Ui,gn.firstDayOfWeek=Di,gn.weekdays=zv,gn.weekdaysMin=jv,gn.weekdaysShort=Hv,gn.weekdaysParse=Gv,gn.weekdaysRegex=Yf,gn.weekdaysShortRegex=Yv,gn.weekdaysMinRegex=qv,gn.isPM=ra,gn.meridiem=Zf;function Sh(f,g,C,S){var L=ho(),K=y().set(S,g);return L[C](K,f)}function CC(f,g,C){if(d(f)&&(g=f,f=void 0),f=f||"",g!=null)return Sh(f,g,C,"month");var S,L=[];for(S=0;S<12;S++)L[S]=Sh(f,S,C,"month");return L}function $x(f,g,C,S){typeof f=="boolean"?(d(g)&&(C=g,g=void 0),g=g||""):(g=f,C=g,f=!1,d(g)&&(C=g,g=void 0),g=g||"");var L=ho(),K=f?L._week.dow:0,ge,rt=[];if(C!=null)return Sh(g,(C+K)%7,S,"day");for(ge=0;ge<7;ge++)rt[ge]=Sh(g,(ge+K)%7,S,"day");return rt}function mD(f,g){return CC(f,g,"months")}function gD(f,g){return CC(f,g,"monthsShort")}function _D(f,g,C){return $x(f,g,C,"weekdays")}function vD(f,g,C){return $x(f,g,C,"weekdaysShort")}function xD(f,g,C){return $x(f,g,C,"weekdaysMin")}Xi("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(f){var g=f%10,C=nt(f%100/10)===1?"th":g===1?"st":g===2?"nd":g===3?"rd":"th";return f+C}}),t.lang=re("moment.lang is deprecated. Use moment.locale instead.",Xi),t.langData=re("moment.langData is deprecated. Use moment.localeData instead.",ho);var bs=Math.abs;function yD(){var f=this._data;return this._milliseconds=bs(this._milliseconds),this._days=bs(this._days),this._months=bs(this._months),f.milliseconds=bs(f.milliseconds),f.seconds=bs(f.seconds),f.minutes=bs(f.minutes),f.hours=bs(f.hours),f.months=bs(f.months),f.years=bs(f.years),this}function wC(f,g,C,S){var L=Ar(g,C);return f._milliseconds+=S*L._milliseconds,f._days+=S*L._days,f._months+=S*L._months,f._bubble()}function bD(f,g){return wC(this,f,g,1)}function CD(f,g){return wC(this,f,g,-1)}function MC(f){return f<0?Math.floor(f):Math.ceil(f)}function wD(){var f=this._milliseconds,g=this._days,C=this._months,S=this._data,L,K,ge,rt,Ct;return f>=0&&g>=0&&C>=0||f<=0&&g<=0&&C<=0||(f+=MC(Yx(C)+g)*864e5,g=0,C=0),S.milliseconds=f%1e3,L=Ft(f/1e3),S.seconds=L%60,K=Ft(L/60),S.minutes=K%60,ge=Ft(K/60),S.hours=ge%24,g+=Ft(ge/24),Ct=Ft(SC(g)),C+=Ct,g-=MC(Yx(Ct)),rt=Ft(C/12),C%=12,S.days=g,S.months=C,S.years=rt,this}function SC(f){return f*4800/146097}function Yx(f){return f*146097/4800}function MD(f){if(!this.isValid())return NaN;var g,C,S=this._milliseconds;if(f=en(f),f==="month"||f==="quarter"||f==="year")switch(g=this._days+S/864e5,C=this._months+SC(g),f){case"month":return C;case"quarter":return C/3;case"year":return C/12}else switch(g=this._days+Math.round(Yx(this._months)),f){case"week":return g/7+S/6048e5;case"day":return g+S/864e5;case"hour":return g*24+S/36e5;case"minute":return g*1440+S/6e4;case"second":return g*86400+S/1e3;case"millisecond":return Math.floor(g*864e5)+S;default:throw new Error("Unknown unit "+f)}}function Cs(f){return function(){return this.as(f)}}var EC=Cs("ms"),SD=Cs("s"),ED=Cs("m"),AD=Cs("h"),TD=Cs("d"),DD=Cs("w"),PD=Cs("M"),ID=Cs("Q"),OD=Cs("y"),RD=EC;function kD(){return Ar(this)}function FD(f){return f=en(f),this.isValid()?this[f+"s"]():NaN}function cl(f){return function(){return this.isValid()?this._data[f]:NaN}}var ND=cl("milliseconds"),LD=cl("seconds"),VD=cl("minutes"),UD=cl("hours"),BD=cl("days"),zD=cl("months"),HD=cl("years");function jD(){return Ft(this.days()/7)}var ws=Math.round,Mu={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function WD(f,g,C,S,L){return L.relativeTime(g||1,!!C,f,S)}function GD(f,g,C,S){var L=Ar(f).abs(),K=ws(L.as("s")),ge=ws(L.as("m")),rt=ws(L.as("h")),Ct=ws(L.as("d")),on=ws(L.as("M")),Zi=ws(L.as("w")),Ms=ws(L.as("y")),ca=K<=C.ss&&["s",K]||K<C.s&&["ss",K]||ge<=1&&["m"]||ge<C.m&&["mm",ge]||rt<=1&&["h"]||rt<C.h&&["hh",rt]||Ct<=1&&["d"]||Ct<C.d&&["dd",Ct];return C.w!=null&&(ca=ca||Zi<=1&&["w"]||Zi<C.w&&["ww",Zi]),ca=ca||on<=1&&["M"]||on<C.M&&["MM",on]||Ms<=1&&["y"]||["yy",Ms],ca[2]=g,ca[3]=+f>0,ca[4]=S,WD.apply(null,ca)}function $D(f){return f===void 0?ws:typeof f=="function"?(ws=f,!0):!1}function YD(f,g){return Mu[f]===void 0?!1:g===void 0?Mu[f]:(Mu[f]=g,f==="s"&&(Mu.ss=g-1),!0)}function qD(f,g){if(!this.isValid())return this.localeData().invalidDate();var C=!1,S=Mu,L,K;return typeof f=="object"&&(g=f,f=!1),typeof f=="boolean"&&(C=f),typeof g=="object"&&(S=Object.assign({},Mu,g),g.s!=null&&g.ss==null&&(S.ss=g.s-1)),L=this.localeData(),K=GD(this,!C,S,L),C&&(K=L.pastFuture(+this,K)),L.postformat(K)}var qx=Math.abs;function Su(f){return(f>0)-(f<0)||+f}function Eh(){if(!this.isValid())return this.localeData().invalidDate();var f=qx(this._milliseconds)/1e3,g=qx(this._days),C=qx(this._months),S,L,K,ge,rt=this.asSeconds(),Ct,on,Zi,Ms;return rt?(S=Ft(f/60),L=Ft(S/60),f%=60,S%=60,K=Ft(C/12),C%=12,ge=f?f.toFixed(3).replace(/\.?0+$/,""):"",Ct=rt<0?"-":"",on=Su(this._months)!==Su(rt)?"-":"",Zi=Su(this._days)!==Su(rt)?"-":"",Ms=Su(this._milliseconds)!==Su(rt)?"-":"",Ct+"P"+(K?on+K+"Y":"")+(C?on+C+"M":"")+(g?Zi+g+"D":"")+(L||S||f?"T":"")+(L?Ms+L+"H":"")+(S?Ms+S+"M":"")+(f?Ms+ge+"S":"")):"P0D"}var an=vu.prototype;an.isValid=dh,an.abs=yD,an.add=bD,an.subtract=CD,an.as=MD,an.asMilliseconds=EC,an.asSeconds=SD,an.asMinutes=ED,an.asHours=AD,an.asDays=TD,an.asWeeks=DD,an.asMonths=PD,an.asQuarters=ID,an.asYears=OD,an.valueOf=RD,an._bubble=wD,an.clone=kD,an.get=FD,an.milliseconds=ND,an.seconds=LD,an.minutes=VD,an.hours=UD,an.days=BD,an.weeks=jD,an.months=zD,an.years=HD,an.humanize=qD,an.toISOString=Eh,an.toString=Eh,an.toJSON=Eh,an.locale=yh,an.localeData=ul,an.toIsoString=re("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Eh),an.lang=Tr,Pe("X",0,0,"unix"),Pe("x",0,0,"valueOf"),le("x",Ke),le("X",Pt),Lt("X",function(f,g,C){C._d=new Date(parseFloat(f)*1e3)}),Lt("x",function(f,g,C){C._d=new Date(nt(f))});return t.version="2.30.1",e(On),t.fn=Fe,t.min=uh,t.max=ch,t.now=dx,t.utc=y,t.unix=hD,t.months=mD,t.isDate=p,t.locale=Xi,t.invalid=w,t.duration=Ar,t.isMoment=Y,t.weekdays=_D,t.parseZone=pD,t.localeData=ho,t.isDuration=al,t.monthsShort=gD,t.weekdaysMin=xD,t.defineLocale=vd,t.updateLocale=ex,t.locales=tx,t.weekdaysShort=vD,t.normalizeUnits=en,t.relativeTimeRounding=$D,t.relativeTimeThreshold=YD,t.calendarFormat=Ax,t.prototype=Fe,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},t})});function Qx(n,t){return Object.is(n,t)}var Ci=null,Ah=!1,e6=1,Zr=Symbol("SIGNAL");function tn(n){let t=Ci;return Ci=n,t}function t6(){return Ci}var Fd={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Nd(n){if(Ah)throw new Error("");if(Ci===null)return;Ci.consumerOnSignalRead(n);let t=Ci.nextProducerIndex++;if(Ih(Ci),t<Ci.producerNode.length&&Ci.producerNode[t]!==n&&kd(Ci)){let e=Ci.producerNode[t];Ph(e,Ci.producerIndexOfThis[t])}Ci.producerNode[t]!==n&&(Ci.producerNode[t]=n,Ci.producerIndexOfThis[t]=kd(Ci)?RC(n,Ci,t):0),Ci.producerLastReadVersion[t]=n.version}function OC(){e6++}function n6(n){if(!(kd(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===e6)){if(!n.producerMustRecompute(n)&&!s6(n)){Kx(n);return}n.producerRecomputeValue(n),Kx(n)}}function i6(n){if(n.liveConsumerNode===void 0)return;let t=Ah;Ah=!0;try{for(let e of n.liveConsumerNode)e.dirty||iP(e)}finally{Ah=t}}function r6(){return Ci?.consumerAllowSignalWrites!==!1}function iP(n){n.dirty=!0,i6(n),n.consumerMarkedDirty?.(n)}function Kx(n){n.dirty=!1,n.lastCleanEpoch=e6}function Dh(n){return n&&(n.nextProducerIndex=0),tn(n)}function o6(n,t){if(tn(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(kd(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)Ph(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function s6(n){Ih(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(n6(e),i!==e.version))return!0}return!1}function a6(n){if(Ih(n),kd(n))for(let t=0;t<n.producerNode.length;t++)Ph(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function RC(n,t,e){if(kC(n),n.liveConsumerNode.length===0&&FC(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=RC(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function Ph(n,t){if(kC(n),n.liveConsumerNode.length===1&&FC(n))for(let i=0;i<n.producerNode.length;i++)Ph(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];Ih(r),r.producerIndexOfThis[i]=t}}function kd(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ih(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function kC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function FC(n){return n.producerNode!==void 0}function l6(n,t){let e=Object.create(rP);e.computation=n,t!==void 0&&(e.equal=t);let i=()=>{if(n6(e),Nd(e),e.value===Th)throw e.error;return e.value};return i[Zr]=e,i}var Zx=Symbol("UNSET"),Jx=Symbol("COMPUTING"),Th=Symbol("ERRORED"),rP=yt(Ie({},Fd),{value:Zx,dirty:!0,error:null,equal:Qx,kind:"computed",producerMustRecompute(n){return n.value===Zx||n.value===Jx},producerRecomputeValue(n){if(n.value===Jx)throw new Error("Detected cycle in computations.");let t=n.value;n.value=Jx;let e=Dh(n),i,r=!1;try{i=n.computation(),tn(null),r=t!==Zx&&t!==Th&&i!==Th&&n.equal(t,i)}catch(o){i=Th,n.error=o}finally{o6(n,e)}if(r){n.value=t;return}n.value=i,n.version++}});function oP(){throw new Error}var NC=oP;function LC(n){NC(n)}function u6(n){NC=n}var sP=null;function c6(n,t){let e=Object.create(Oh);e.value=n,t!==void 0&&(e.equal=t);let i=()=>(Nd(e),e.value);return i[Zr]=e,i}function Ld(n,t){r6()||LC(n),n.equal(n.value,t)||(n.value=t,aP(n))}function d6(n,t){r6()||LC(n),Ld(n,t(n.value))}var Oh=yt(Ie({},Fd),{equal:Qx,value:void 0,kind:"signal"});function aP(n){n.version++,OC(),i6(n),sP?.()}function f6(n){let t=tn(null);try{return n()}finally{tn(t)}}var h6;function Vd(){return h6}function Ss(n){let t=h6;return h6=n,t}var Rh=Symbol("NotFound");function It(n){return typeof n=="function"}function Eu(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var kh=Eu(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Ud(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var fi=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(It(i))try{i()}catch(o){t=o instanceof kh?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{VC(o)}catch(s){t=t??[],s instanceof kh?t=[...t,...s.errors]:t.push(s)}}if(t)throw new kh(t)}}add(t){var e;if(t&&t!==this)if(this.closed)VC(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Ud(e,t)}remove(t){let{_finalizers:e}=this;e&&Ud(e,t),t instanceof n&&t._removeParent(this)}};fi.EMPTY=(()=>{let n=new fi;return n.closed=!0,n})();var p6=fi.EMPTY;function Fh(n){return n instanceof fi||n&&"closed"in n&&It(n.remove)&&It(n.add)&&It(n.unsubscribe)}function VC(n){It(n)?n():n.unsubscribe()}var go={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Au={setTimeout(n,t,...e){let{delegate:i}=Au;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=Au;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Nh(n){Au.setTimeout(()=>{let{onUnhandledError:t}=go;if(t)t(n);else throw n})}function Bd(){}var UC=m6("C",void 0,void 0);function BC(n){return m6("E",void 0,n)}function zC(n){return m6("N",n,void 0)}function m6(n,t,e){return{kind:n,value:t,error:e}}var dl=null;function Tu(n){if(go.useDeprecatedSynchronousErrorHandling){let t=!dl;if(t&&(dl={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=dl;if(dl=null,e)throw i}}else n()}function HC(n){go.useDeprecatedSynchronousErrorHandling&&dl&&(dl.errorThrown=!0,dl.error=n)}var fl=class extends fi{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Fh(t)&&t.add(this)):this.destination=hP}static create(t,e,i){return new Du(t,e,i)}next(t){this.isStopped?_6(zC(t),this):this._next(t)}error(t){this.isStopped?_6(BC(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?_6(UC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},dP=Function.prototype.bind;function g6(n,t){return dP.call(n,t)}var v6=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){Lh(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){Lh(i)}else Lh(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Lh(e)}}},Du=class extends fl{constructor(t,e,i){super();let r;if(It(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&go.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&g6(t.next,o),error:t.error&&g6(t.error,o),complete:t.complete&&g6(t.complete,o)}):r=t}this.destination=new v6(r)}};function Lh(n){go.useDeprecatedSynchronousErrorHandling?HC(n):Nh(n)}function fP(n){throw n}function _6(n,t){let{onStoppedNotification:e}=go;e&&Au.setTimeout(()=>e(n,t))}var hP={closed:!0,next:Bd,error:fP,complete:Bd};var Pu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dr(n){return n}function x6(...n){return y6(n)}function y6(n){return n.length===0?Dr:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var hn=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let o=mP(e)?e:new Du(e,i,r);return Tu(()=>{let{operator:s,source:u}=this;o.add(s?s.call(o,u):u?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=jC(i),new i((r,o)=>{let s=new Du({next:u=>{try{e(u)}catch(d){o(d),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Pu](){return this}pipe(...e){return y6(e)(this)}toPromise(e){return e=jC(e),new e((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=t=>new n(t),n})();function jC(n){var t;return(t=n??go.Promise)!==null&&t!==void 0?t:Promise}function pP(n){return n&&It(n.next)&&It(n.error)&&It(n.complete)}function mP(n){return n&&n instanceof fl||pP(n)&&Fh(n)}function b6(n){return It(n?.lift)}function ln(n){return t=>{if(b6(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function nn(n,t,e,i,r){return new C6(n,t,e,i,r)}var C6=class extends fl{constructor(t,e,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(u){try{e(u)}catch(d){t.error(d)}}:super._next,this._error=r?function(u){try{r(u)}catch(d){t.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Iu(){return ln((n,t)=>{let e=null;n._refCount++;let i=nn(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var Ou=class extends hn{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,b6(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new fi;let e=this.getSubject();t.add(this.source.subscribe(nn(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=fi.EMPTY)}return t}refCount(){return Iu()(this)}};var WC=Eu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var hi=(()=>{class n extends hn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new Vh(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new WC}next(e){Tu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Tu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Tu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:o}=this;return i||r?p6:(this.currentObservers=null,o.push(e),new fi(()=>{this.currentObservers=null,Ud(o,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){let e=new hn;return e.source=this,e}}return n.create=(t,e)=>new Vh(t,e),n})(),Vh=class extends hi{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:p6}};var wi=class extends hi{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var or=new hn(n=>n.complete());function GC(n){return n&&It(n.schedule)}function $C(n){return n[n.length-1]}function Uh(n){return It($C(n))?n.pop():void 0}function fa(n){return GC($C(n))?n.pop():void 0}function qC(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function u(_){try{p(i.next(_))}catch(m){s(m)}}function d(_){try{p(i.throw(_))}catch(m){s(m)}}function p(_){_.done?o(_.value):r(_.value).then(u,d)}p((i=i.apply(n,t||[])).next())})}function YC(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function hl(n){return this instanceof hl?(this.v=n,this):new hl(n)}function XC(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(b){return function(M){return Promise.resolve(M).then(b,m)}}function u(b,M){i[b]&&(r[b]=function(O){return new Promise(function(E,w){o.push([b,O,E,w])>1||d(b,O)})},M&&(r[b]=M(r[b])))}function d(b,M){try{p(i[b](M))}catch(O){y(o[0][3],O)}}function p(b){b.value instanceof hl?Promise.resolve(b.value.v).then(_,m):y(o[0][2],b)}function _(b){d("next",b)}function m(b){d("throw",b)}function y(b,M){b(M),o.shift(),o.length&&d(o[0][0],o[0][1])}}function ZC(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof YC=="function"?YC(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=n[o]&&function(s){return new Promise(function(u,d){s=n[o](s),r(u,d,s.done,s.value)})}}function r(o,s,u,d){Promise.resolve(d).then(function(p){o({value:p,done:u})},s)}}var Bh=n=>n&&typeof n.length=="number"&&typeof n!="function";function zh(n){return It(n?.then)}function Hh(n){return It(n[Pu])}function jh(n){return Symbol.asyncIterator&&It(n?.[Symbol.asyncIterator])}function Wh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function gP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Gh=gP();function $h(n){return It(n?.[Gh])}function Yh(n){return XC(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield hl(e.read());if(r)return yield hl(void 0);yield yield hl(i)}}finally{e.releaseLock()}})}function qh(n){return It(n?.getReader)}function pi(n){if(n instanceof hn)return n;if(n!=null){if(Hh(n))return _P(n);if(Bh(n))return vP(n);if(zh(n))return xP(n);if(jh(n))return JC(n);if($h(n))return yP(n);if(qh(n))return bP(n)}throw Wh(n)}function _P(n){return new hn(t=>{let e=n[Pu]();if(It(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function vP(n){return new hn(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function xP(n){return new hn(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Nh)})}function yP(n){return new hn(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function JC(n){return new hn(t=>{CP(n,t).catch(e=>t.error(e))})}function bP(n){return JC(Yh(n))}function CP(n,t){var e,i,r,o;return qC(this,void 0,void 0,function*(){try{for(e=ZC(n);i=yield e.next(),!i.done;){let s=i.value;if(t.next(s),t.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})}function sr(n,t,e,i=0,r=!1){let o=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Xh(n,t=0){return ln((e,i)=>{e.subscribe(nn(i,r=>sr(i,n,()=>i.next(r),t),()=>sr(i,n,()=>i.complete(),t),r=>sr(i,n,()=>i.error(r),t)))})}function Zh(n,t=0){return ln((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function KC(n,t){return pi(n).pipe(Zh(t),Xh(t))}function QC(n,t){return pi(n).pipe(Zh(t),Xh(t))}function ew(n,t){return new hn(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function tw(n,t){return new hn(e=>{let i;return sr(e,t,()=>{i=n[Gh](),sr(e,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){e.error(s);return}o?e.complete():e.next(r)},0,!0)}),()=>It(i?.return)&&i.return()})}function Jh(n,t){if(!n)throw new Error("Iterable cannot be null");return new hn(e=>{sr(e,t,()=>{let i=n[Symbol.asyncIterator]();sr(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function nw(n,t){return Jh(Yh(n),t)}function iw(n,t){if(n!=null){if(Hh(n))return KC(n,t);if(Bh(n))return ew(n,t);if(zh(n))return QC(n,t);if(jh(n))return Jh(n,t);if($h(n))return tw(n,t);if(qh(n))return nw(n,t)}throw Wh(n)}function Nn(n,t){return t?iw(n,t):pi(n)}function xt(...n){let t=fa(n);return Nn(n,t)}function Ru(n,t){let e=It(n)?n:()=>n,i=r=>r.error(e());return new hn(t?r=>t.schedule(i,0,r):i)}function w6(n){return!!n&&(n instanceof hn||It(n.lift)&&It(n.subscribe))}var Es=Eu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ut(n,t){return ln((e,i)=>{let r=0;e.subscribe(nn(i,o=>{i.next(n.call(t,o,r++))}))})}var{isArray:wP}=Array;function MP(n,t){return wP(t)?n(...t):n(t)}function Kh(n){return Ut(t=>MP(n,t))}var{isArray:SP}=Array,{getPrototypeOf:EP,prototype:AP,keys:TP}=Object;function Qh(n){if(n.length===1){let t=n[0];if(SP(t))return{args:t,keys:null};if(DP(t)){let e=TP(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function DP(n){return n&&typeof n=="object"&&EP(n)===AP}function ep(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function zd(...n){let t=fa(n),e=Uh(n),{args:i,keys:r}=Qh(n);if(i.length===0)return Nn([],t);let o=new hn(PP(i,t,r?s=>ep(r,s):Dr));return e?o.pipe(Kh(e)):o}function PP(n,t,e=Dr){return i=>{rw(t,()=>{let{length:r}=n,o=new Array(r),s=r,u=r;for(let d=0;d<r;d++)rw(t,()=>{let p=Nn(n[d],t),_=!1;p.subscribe(nn(i,m=>{o[d]=m,_||(_=!0,u--),u||i.next(e(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function rw(n,t,e){n?sr(e,n,t):t()}function ow(n,t,e,i,r,o,s,u){let d=[],p=0,_=0,m=!1,y=()=>{m&&!d.length&&!p&&t.complete()},b=O=>p<i?M(O):d.push(O),M=O=>{o&&t.next(O),p++;let E=!1;pi(e(O,_++)).subscribe(nn(t,w=>{r?.(w),o?b(w):t.next(w)},()=>{E=!0},void 0,()=>{if(E)try{for(p--;d.length&&p<i;){let w=d.shift();s?sr(t,s,()=>M(w)):M(w)}y()}catch(w){t.error(w)}}))};return n.subscribe(nn(t,b,()=>{m=!0,y()})),()=>{u?.()}}function ui(n,t,e=1/0){return It(t)?ui((i,r)=>Ut((o,s)=>t(i,o,r,s))(pi(n(i,r))),e):(typeof t=="number"&&(e=t),ln((i,r)=>ow(i,r,n,e)))}function ku(n=1/0){return ui(Dr,n)}function sw(){return ku(1)}function Fu(...n){return sw()(Nn(n,fa(n)))}function tp(n){return new hn(t=>{pi(n()).subscribe(t)})}function As(...n){let t=Uh(n),{args:e,keys:i}=Qh(n),r=new hn(o=>{let{length:s}=e;if(!s){o.complete();return}let u=new Array(s),d=s,p=s;for(let _=0;_<s;_++){let m=!1;pi(e[_]).subscribe(nn(o,y=>{m||(m=!0,p--),u[_]=y},()=>d--,void 0,()=>{(!d||!m)&&(p||o.next(i?ep(i,u):u),o.complete())}))}});return t?r.pipe(Kh(t)):r}function Ji(n,t){return ln((e,i)=>{let r=0;e.subscribe(nn(i,o=>n.call(t,o,r++)&&i.next(o)))})}function Ts(n){return ln((t,e)=>{let i=null,r=!1,o;i=t.subscribe(nn(e,void 0,void 0,s=>{o=pi(n(s,Ts(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function aw(n,t,e,i,r){return(o,s)=>{let u=e,d=t,p=0;o.subscribe(nn(s,_=>{let m=p++;d=u?n(d,_,m):(u=!0,_),i&&s.next(d)},r&&(()=>{u&&s.next(d),s.complete()})))}}function Wo(n,t){return It(t)?ui(n,t,1):ui(n,1)}function ha(n){return ln((t,e)=>{let i=!1;t.subscribe(nn(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Ds(n){return n<=0?()=>or:ln((t,e)=>{let i=0;t.subscribe(nn(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function np(n=IP){return ln((t,e)=>{let i=!1;t.subscribe(nn(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function IP(){return new Es}function pl(n){return ln((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function Ps(n,t){let e=arguments.length>=2;return i=>i.pipe(n?Ji((r,o)=>n(r,o,i)):Dr,Ds(1),e?ha(t):np(()=>new Es))}function Nu(n){return n<=0?()=>or:ln((t,e)=>{let i=[];t.subscribe(nn(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function M6(n,t){let e=arguments.length>=2;return i=>i.pipe(n?Ji((r,o)=>n(r,o,i)):Dr,Nu(1),e?ha(t):np(()=>new Es))}function S6(n,t){return ln(aw(n,t,arguments.length>=2,!0))}function E6(...n){let t=fa(n);return ln((e,i)=>{(t?Fu(n,e,t):Fu(n,e)).subscribe(i)})}function ar(n,t){return ln((e,i)=>{let r=null,o=0,s=!1,u=()=>s&&!r&&i.complete();e.subscribe(nn(i,d=>{r?.unsubscribe();let p=0,_=o++;pi(n(d,_)).subscribe(r=nn(i,m=>i.next(t?t(d,m,_,p++):m),()=>{r=null,u()}))},()=>{s=!0,u()}))})}function A6(n){return ln((t,e)=>{pi(n).subscribe(nn(e,()=>e.complete(),Bd)),!e.closed&&t.subscribe(e)})}function mi(n,t,e){let i=It(n)||t||e?{next:n,error:t,complete:e}:n;return i?ln((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let u=!0;r.subscribe(nn(o,d=>{var p;(p=i.next)===null||p===void 0||p.call(i,d),o.next(d)},()=>{var d;u=!1,(d=i.complete)===null||d===void 0||d.call(i),o.complete()},d=>{var p;u=!1,(p=i.error)===null||p===void 0||p.call(i,d),o.error(d)},()=>{var d,p;u&&((d=i.unsubscribe)===null||d===void 0||d.call(i)),(p=i.finalize)===null||p===void 0||p.call(i)}))}):Dr}var Yw="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",tt=class extends Error{code;constructor(t,e){super(qw(t,e)),this.code=t}};function OP(n){return`NG0${Math.abs(n)}`}function qw(n,t){return`${OP(n)}${t?": "+t:""}`}var Xw=Symbol("InputSignalNode#UNSET"),RP=yt(Ie({},Oh),{transformFn:void 0,applyValueToInputSignal(n,t){Ld(n,t)}});function Zw(n,t){let e=Object.create(RP);e.value=n,e.transformFn=t?.transform;function i(){if(Nd(e),e.value===Xw){let r=null;throw new tt(-950,r)}return e.value}return i[Zr]=e,i}function e0(n){return{toString:n}.toString()}var ip="__parameters__";function kP(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function Jw(n,t,e){return e0(()=>{let i=kP(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return u.annotation=s,u;function u(d,p,_){let m=d.hasOwnProperty(ip)?d[ip]:Object.defineProperty(d,ip,{value:[]})[ip];for(;m.length<=_;)m.push(null);return(m[_]=m[_]||[]).push(s),d}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var jd=globalThis;function Rn(n){for(let t in n)if(n[t]===Rn)return t;throw Error("Could not find renamed property on target object.")}function FP(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function cr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(cr).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function H6(n,t){return n?t?`${n} ${t}`:n:t||""}var NP=Rn({__forward_ref__:Rn});function Qi(n){return n.__forward_ref__=Qi,n.toString=function(){return cr(this())},n}function Ki(n){return Kw(n)?n():n}function Kw(n){return typeof n=="function"&&n.hasOwnProperty(NP)&&n.__forward_ref__===Qi}function je(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function yo(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fp(n){return lw(n,eM)||lw(n,tM)}function Qw(n){return Fp(n)!==null}function lw(n,t){return n.hasOwnProperty(t)?n[t]:null}function LP(n){let t=n&&(n[eM]||n[tM]);return t||null}function uw(n){return n&&(n.hasOwnProperty(cw)||n.hasOwnProperty(VP))?n[cw]:null}var eM=Rn({\u0275prov:Rn}),cw=Rn({\u0275inj:Rn}),tM=Rn({ngInjectableDef:Rn}),VP=Rn({ngInjectorDef:Rn}),at=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=je({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function nM(n){return n&&!!n.\u0275providers}var UP=Rn({\u0275cmp:Rn}),BP=Rn({\u0275dir:Rn}),zP=Rn({\u0275pipe:Rn}),HP=Rn({\u0275mod:Rn}),dp=Rn({\u0275fac:Rn}),$d=Rn({__NG_ELEMENT_ID__:Rn}),dw=Rn({__NG_ENV_ID__:Rn});function Is(n){return typeof n=="string"?n:n==null?"":String(n)}function jP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Is(n)}function iM(n,t){throw new tt(-200,n)}function Uy(n,t){throw new tt(-201,!1)}var Nt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Nt||{}),j6;function rM(){return j6}function lr(n){let t=j6;return j6=n,t}function oM(n,t,e){let i=Fp(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&Nt.Optional)return null;if(t!==void 0)return t;Uy(n,"Injector")}var WP={},gl=WP,W6="__NG_DI_FLAG__",fp=class{injector;constructor(t){this.injector=t}retrieve(t,e){let i=e;return this.injector.get(t,i.optional?Rh:gl,i)}},hp="ngTempTokenPath",GP="ngTokenPath",$P=/\n/gm,YP="\u0275",fw="__source";function qP(n,t=Nt.Default){if(Vd()===void 0)throw new tt(-203,!1);if(Vd()===null)return oM(n,void 0,t);{let e=Vd(),i;return e instanceof fp?i=e.injector:i=e,i.get(n,t&Nt.Optional?null:void 0,t)}}function Ve(n,t=Nt.Default){return(rM()||qP)(Ki(n),t)}function Re(n,t=Nt.Default){return Ve(n,Np(t))}function Np(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function G6(n){let t=[];for(let e=0;e<n.length;e++){let i=Ki(n[e]);if(Array.isArray(i)){if(i.length===0)throw new tt(900,!1);let r,o=Nt.Default;for(let s=0;s<i.length;s++){let u=i[s],d=XP(u);typeof d=="number"?d===-1?r=u.token:o|=d:r=u}t.push(Ve(r,o))}else t.push(Ve(i))}return t}function sM(n,t){return n[W6]=t,n.prototype[W6]=t,n}function XP(n){return n[W6]}function ZP(n,t,e,i){let r=n[hp];throw t[fw]&&r.unshift(t[fw]),n.message=JP(`
`+n.message,r,e,i),n[GP]=r,n[hp]=null,n}function JP(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==YP?n.slice(2):n;let r=cr(t);if(Array.isArray(t))r=t.map(cr).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let u=t[s];o.push(s+":"+(typeof u=="string"?JSON.stringify(u):cr(u)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace($P,`
  `)}`}var KP=sM(Jw("Optional"),8);var QP=sM(Jw("SkipSelf"),4);function vl(n,t){let e=n.hasOwnProperty(dp);return e?n[dp]:null}function eI(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=t[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function tI(n){return n.flat(Number.POSITIVE_INFINITY)}function By(n,t){n.forEach(e=>Array.isArray(e)?By(e,t):t(e))}function aM(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function pp(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function nI(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let o=r-2;n[r]=n[o],r--}n[t]=e,n[t+1]=i}}function Lp(n,t,e){let i=t0(n,t);return i>=0?n[i|1]=e:(i=~i,nI(n,i,t,e)),i}function T6(n,t){let e=t0(n,t);if(e>=0)return n[e|1]}function t0(n,t){return iI(n,t,1)}function iI(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<e];if(t===s)return o<<e;s>t?r=o:i=o+1}return~(r<<e)}var xl={},ur=[],Yd=new at(""),lM=new at("",-1),uM=new at(""),mp=class{get(t,e=gl){if(e===gl){let i=new Error(`NullInjectorError: No provider for ${cr(t)}!`);throw i.name="NullInjectorError",i}return e}};function cM(n,t){let e=n[HP]||null;if(!e&&t===!0)throw new Error(`Type ${cr(n)} does not have '\u0275mod' property.`);return e}function yl(n){return n[UP]||null}function rI(n){return n[BP]||null}function oI(n){return n[zP]||null}function n0(n){return{\u0275providers:n}}function sI(...n){return{\u0275providers:dM(!0,n),\u0275fromNgModule:!0}}function dM(n,...t){let e=[],i=new Set,r,o=s=>{e.push(s)};return By(t,s=>{let u=s;$6(u,o,[],i)&&(r||=[],r.push(u))}),r!==void 0&&fM(r,o),e}function fM(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];zy(r,o=>{t(o,i)})}}function $6(n,t,e,i){if(n=Ki(n),!n)return!1;let r=null,o=uw(n),s=!o&&yl(n);if(!o&&!s){let d=n.ngModule;if(o=uw(d),o)r=d;else return!1}else{if(s&&!s.standalone)return!1;r=n}let u=i.has(r);if(s){if(u)return!1;if(i.add(r),s.dependencies){let d=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let p of d)$6(p,t,e,i)}}else if(o){if(o.imports!=null&&!u){i.add(r);let p;try{By(o.imports,_=>{$6(_,t,e,i)&&(p||=[],p.push(_))})}finally{}p!==void 0&&fM(p,t)}if(!u){let p=vl(r)||(()=>new r);t({provide:r,useFactory:p,deps:ur},r),t({provide:uM,useValue:r,multi:!0},r),t({provide:Yd,useValue:()=>Ve(r),multi:!0},r)}let d=o.providers;if(d!=null&&!u){let p=n;zy(d,_=>{t(_,p)})}}else return!1;return r!==n&&n.providers!==void 0}function zy(n,t){for(let e of n)nM(e)&&(e=e.\u0275providers),Array.isArray(e)?zy(e,t):t(e)}var aI=Rn({provide:String,useValue:Rn});function hM(n){return n!==null&&typeof n=="object"&&aI in n}function lI(n){return!!(n&&n.useExisting)}function uI(n){return!!(n&&n.useFactory)}function ju(n){return typeof n=="function"}function cI(n){return!!n.useClass}var Vp=new at(""),op={},hw={},D6;function Hy(){return D6===void 0&&(D6=new mp),D6}var Bi=class{},qd=class extends Bi{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,q6(t,s=>this.processProvider(s)),this.records.set(lM,Lu(void 0,this)),r.has("environment")&&this.records.set(Bi,Lu(void 0,this));let o=this.records.get(Vp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(uM,ur,Nt.Self))}retrieve(t,e){let i=e;return this.get(t,i.optional?Rh:gl,i)}destroy(){Wd(this),this._destroyed=!0;let t=tn(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),tn(t)}}onDestroy(t){return Wd(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Wd(this);let e=Ss(this),i=lr(void 0),r;try{return t()}finally{Ss(e),lr(i)}}get(t,e=gl,i=Nt.Default){if(Wd(this),t.hasOwnProperty(dw))return t[dw](this);i=Np(i);let r,o=Ss(this),s=lr(void 0);try{if(!(i&Nt.SkipSelf)){let d=this.records.get(t);if(d===void 0){let p=mI(t)&&Fp(t);p&&this.injectableDefInScope(p)?d=Lu(Y6(t),op):d=null,this.records.set(t,d)}if(d!=null)return this.hydrate(t,d,i)}let u=i&Nt.Self?Hy():this.parent;return e=i&Nt.Optional&&e===gl?null:e,u.get(t,e)}catch(u){if(u.name==="NullInjectorError"){if((u[hp]=u[hp]||[]).unshift(cr(t)),o)throw u;return ZP(u,t,"R3InjectorError",this.source)}else throw u}finally{lr(s),Ss(o)}}resolveInjectorInitializers(){let t=tn(null),e=Ss(this),i=lr(void 0),r;try{let o=this.get(Yd,ur,Nt.Self);for(let s of o)s()}finally{Ss(e),lr(i),tn(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(cr(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Ki(t);let e=ju(t)?t:Ki(t&&t.provide),i=fI(t);if(!ju(t)&&t.multi===!0){let r=this.records.get(e);r||(r=Lu(void 0,op,!0),r.factory=()=>G6(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e,i){let r=tn(null);try{return e.value===hw?iM(cr(t)):e.value===op&&(e.value=hw,e.value=e.factory(void 0,i)),typeof e.value=="object"&&e.value&&pI(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{tn(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=Ki(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function Y6(n){let t=Fp(n),e=t!==null?t.factory:vl(n);if(e!==null)return e;if(n instanceof at)throw new tt(204,!1);if(n instanceof Function)return dI(n);throw new tt(204,!1)}function dI(n){if(n.length>0)throw new tt(204,!1);let e=LP(n);return e!==null?()=>e.factory(n):()=>new n}function fI(n){if(hM(n))return Lu(void 0,n.useValue);{let t=pM(n);return Lu(t,op)}}function pM(n,t,e){let i;if(ju(n)){let r=Ki(n);return vl(r)||Y6(r)}else if(hM(n))i=()=>Ki(n.useValue);else if(uI(n))i=()=>n.useFactory(...G6(n.deps||[]));else if(lI(n))i=(r,o)=>Ve(Ki(n.useExisting),o!==void 0&&o&Nt.Optional?Nt.Optional:void 0);else{let r=Ki(n&&(n.useClass||n.provide));if(hI(n))i=()=>new r(...G6(n.deps));else return vl(r)||Y6(r)}return i}function Wd(n){if(n.destroyed)throw new tt(205,!1)}function Lu(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function hI(n){return!!n.deps}function pI(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function mI(n){return typeof n=="function"||typeof n=="object"&&n instanceof at}function q6(n,t){for(let e of n)Array.isArray(e)?q6(e,t):e&&nM(e)?q6(e.\u0275providers,t):t(e)}function hr(n,t){let e;n instanceof qd?(Wd(n),e=n):e=new fp(n);let i,r=Ss(e),o=lr(void 0);try{return t()}finally{Ss(r),lr(o)}}function mM(){return rM()!==void 0||Vd()!=null}function gI(n){if(!mM())throw new tt(-203,!1)}function _I(n){return typeof n=="function"}var Fs=0,Yt=1,Tt=2,zi=3,xo=4,bo=5,gp=6,_p=7,dr=8,Wu=9,Os=10,ti=11,Xd=12,pw=13,Qu=14,$o=15,bl=16,Vu=17,Rs=18,Up=19,gM=20,pa=21,P6=22,vp=23,Jr=24,zu=25,fr=26,_M=1;var Cl=7,xp=8,Gu=9,Pr=10;function ma(n){return Array.isArray(n)&&typeof n[_M]=="object"}function Ns(n){return Array.isArray(n)&&n[_M]===!0}function jy(n){return(n.flags&4)!==0}function ec(n){return n.componentOffset>-1}function Bp(n){return(n.flags&1)===1}function Yo(n){return!!n.template}function yp(n){return(n[Tt]&512)!==0}function tc(n){return(n[Tt]&256)===256}var X6=class{previousValue;currentValue;firstChange;constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function vM(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}var Ls=(()=>{let n=()=>xM;return n.ngInherit=!0,n})();function xM(n){return n.type.prototype.ngOnChanges&&(n.setInput=xI),vI}function vI(){let n=bM(this),t=n?.current;if(t){let e=n.previous;if(e===xl)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function xI(n,t,e,i,r){let o=this.declaredInputs[i],s=bM(n)||yI(n,{previous:xl,current:null}),u=s.current||(s.current={}),d=s.previous,p=d[o];u[o]=new X6(p&&p.currentValue,e,d===xl),vM(n,t,r,e)}var yM="__ngSimpleChanges__";function bM(n){return n[yM]||null}function yI(n,t){return n[yM]=t}var mw=null;var An=function(n,t=null,e){mw?.(n,t,e)},bI="svg",CI="math";function qo(n){for(;Array.isArray(n);)n=n[Fs];return n}function CM(n,t){return qo(t[n])}function Qo(n,t){return qo(t[n.index])}function wM(n,t){return n.data[t]}function Wy(n,t){return n[t]}function wI(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function Xo(n,t){let e=t[n];return ma(e)?e:e[Fs]}function MI(n){return(n[Tt]&4)===4}function Gy(n){return(n[Tt]&128)===128}function SI(n){return Ns(n[zi])}function $u(n,t){return t==null?null:n[t]}function MM(n){n[Vu]=0}function SM(n){n[Tt]&1024||(n[Tt]|=1024,Gy(n)&&i0(n))}function EI(n,t){for(;n>0;)t=t[Qu],n--;return t}function zp(n){return!!(n[Tt]&9216||n[Jr]?.dirty)}function Z6(n){n[Os].changeDetectionScheduler?.notify(8),n[Tt]&64&&(n[Tt]|=1024),zp(n)&&i0(n)}function i0(n){n[Os].changeDetectionScheduler?.notify(0);let t=wl(n);for(;t!==null&&!(t[Tt]&8192||(t[Tt]|=8192,!Gy(t)));)t=wl(t)}function EM(n,t){if(tc(n))throw new tt(911,!1);n[pa]===null&&(n[pa]=[]),n[pa].push(t)}function AI(n,t){if(n[pa]===null)return;let e=n[pa].indexOf(t);e!==-1&&n[pa].splice(e,1)}function wl(n){let t=n[zi];return Ns(t)?t[zi]:t}function $y(n){return n[_p]??=[]}function Yy(n){return n.cleanup??=[]}function TI(n,t,e,i){let r=$y(t);r.push(e),n.firstCreatePass&&Yy(n).push(i,r.length-1)}var Bt={lFrame:kM(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var J6=!1;function DI(){return Bt.lFrame.elementDepthCount}function PI(){Bt.lFrame.elementDepthCount++}function II(){Bt.lFrame.elementDepthCount--}function qy(){return Bt.bindingsEnabled}function OI(){return Bt.skipHydrationRootTNode!==null}function RI(n){return Bt.skipHydrationRootTNode===n}function kI(){Bt.skipHydrationRootTNode=null}function zt(){return Bt.lFrame.lView}function gi(){return Bt.lFrame.tView}function k(n){return Bt.lFrame.contextLView=n,n[dr]}function F(n){return Bt.lFrame.contextLView=null,n}function pr(){let n=AM();for(;n!==null&&n.type===64;)n=n.parent;return n}function AM(){return Bt.lFrame.currentTNode}function FI(){let n=Bt.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function Dl(n,t){let e=Bt.lFrame;e.currentTNode=n,e.isParent=t}function Xy(){return Bt.lFrame.isParent}function TM(){Bt.lFrame.isParent=!1}function NI(){return Bt.lFrame.contextLView}function DM(){return J6}function gw(n){let t=J6;return J6=n,t}function r0(){let n=Bt.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function PM(){return Bt.lFrame.bindingIndex}function LI(n){return Bt.lFrame.bindingIndex=n}function Hp(){return Bt.lFrame.bindingIndex++}function jp(n){let t=Bt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function VI(){return Bt.lFrame.inI18n}function UI(n,t){let e=Bt.lFrame;e.bindingIndex=e.bindingRootIndex=n,K6(t)}function BI(){return Bt.lFrame.currentDirectiveIndex}function K6(n){Bt.lFrame.currentDirectiveIndex=n}function zI(n){let t=Bt.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function IM(){return Bt.lFrame.currentQueryIndex}function Zy(n){Bt.lFrame.currentQueryIndex=n}function HI(n){let t=n[Yt];return t.type===2?t.declTNode:t.type===1?n[bo]:null}function OM(n,t,e){if(e&Nt.SkipSelf){let r=t,o=n;for(;r=r.parent,r===null&&!(e&Nt.Host);)if(r=HI(o),r===null||(o=o[Qu],r.type&10))break;if(r===null)return!1;t=r,n=o}let i=Bt.lFrame=RM();return i.currentTNode=t,i.lView=n,!0}function Jy(n){let t=RM(),e=n[Yt];Bt.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function RM(){let n=Bt.lFrame,t=n===null?null:n.child;return t===null?kM(n):t}function kM(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function FM(){let n=Bt.lFrame;return Bt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var NM=FM;function Ky(){let n=FM();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function jI(n){return(Bt.lFrame.contextLView=EI(n,Bt.lFrame.contextLView))[dr]}function Vs(){return Bt.lFrame.selectedIndex}function Ml(n){Bt.lFrame.selectedIndex=n}function Wp(){let n=Bt.lFrame;return wM(n.tView,n.selectedIndex)}function WI(){return Bt.lFrame.currentNamespace}var LM=!0;function Gp(){return LM}function $p(n){LM=n}function GI(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let s=xM(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}r&&(e.preOrderHooks??=[]).push(0-n,r),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function Qy(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:u,ngAfterViewInit:d,ngAfterViewChecked:p,ngOnDestroy:_}=o;s&&(n.contentHooks??=[]).push(-e,s),u&&((n.contentHooks??=[]).push(e,u),(n.contentCheckHooks??=[]).push(e,u)),d&&(n.viewHooks??=[]).push(-e,d),p&&((n.viewHooks??=[]).push(e,p),(n.viewCheckHooks??=[]).push(e,p)),_!=null&&(n.destroyHooks??=[]).push(e,_)}}function sp(n,t,e){VM(n,t,3,e)}function ap(n,t,e,i){(n[Tt]&3)===e&&VM(n,t,e,i)}function I6(n,t){let e=n[Tt];(e&3)===t&&(e&=16383,e+=1,n[Tt]=e)}function VM(n,t,e,i){let r=i!==void 0?n[Vu]&65535:0,o=i??-1,s=t.length-1,u=0;for(let d=r;d<s;d++)if(typeof t[d+1]=="number"){if(u=t[d],i!=null&&u>=i)break}else t[d]<0&&(n[Vu]+=65536),(u<o||o==-1)&&($I(n,e,t,d),n[Vu]=(n[Vu]&4294901760)+d+2),d++}function _w(n,t){An(4,n,t);let e=tn(null);try{t.call(n)}finally{tn(e),An(5,n,t)}}function $I(n,t,e,i){let r=e[i]<0,o=e[i+1],s=r?-e[i]:e[i],u=n[s];r?n[Tt]>>14<n[Vu]>>16&&(n[Tt]&3)===t&&(n[Tt]+=16384,_w(u,o)):_w(u,o)}var Hu=-1,Sl=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,i){this.factory=t,this.canSeeViewProviders=e,this.injectImpl=i}};function YI(n){return(n.flags&8)!==0}function qI(n){return(n.flags&16)!==0}function XI(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let o=e[i++],s=e[i++],u=e[i++];n.setAttribute(t,s,u,o)}else{let o=r,s=e[++i];JI(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),i++}}return i}function ZI(n){return n===3||n===4||n===6}function JI(n){return n.charCodeAt(0)===64}function Yu(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?vw(n,e,r,null,t[++i]):vw(n,e,r,null,null))}}return n}function vw(n,t,e,i,r){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let u=n[o++];if(typeof u=="number"){if(u===t){s=-1;break}else if(u>t){s=o-1;break}}}for(;o<n.length;){let u=n[o];if(typeof u=="number")break;if(u===e){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),r!==null&&n.splice(o++,0,r)}function UM(n){return n!==Hu}function bp(n){return n&32767}function KI(n){return n>>16}function Cp(n,t){let e=KI(n),i=t;for(;e>0;)i=i[Qu],e--;return i}var Q6=!0;function wp(n){let t=Q6;return Q6=n,t}var QI=256,BM=QI-1,zM=5,eO=0,Go={};function tO(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty($d)&&(i=e[$d]),i==null&&(i=e[$d]=eO++);let r=i&BM,o=1<<r;t.data[n+(r>>zM)]|=o}function Mp(n,t){let e=HM(n,t);if(e!==-1)return e;let i=t[Yt];i.firstCreatePass&&(n.injectorIndex=t.length,O6(i.data,n),O6(t,null),O6(i.blueprint,null));let r=e1(n,t),o=n.injectorIndex;if(UM(r)){let s=bp(r),u=Cp(r,t),d=u[Yt].data;for(let p=0;p<8;p++)t[o+p]=u[s+p]|d[s+p]}return t[o+8]=r,o}function O6(n,t){n.push(0,0,0,0,0,0,0,0,t)}function HM(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function e1(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=YM(r),i===null)return Hu;if(e++,r=r[Qu],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Hu}function ey(n,t,e){tO(n,t,e)}function jM(n,t,e){if(e&Nt.Optional||n!==void 0)return n;Uy(t,"NodeInjector")}function WM(n,t,e,i){if(e&Nt.Optional&&i===void 0&&(i=null),(e&(Nt.Self|Nt.Host))===0){let r=n[Wu],o=lr(void 0);try{return r?r.get(t,i,e&Nt.Optional):oM(t,i,e&Nt.Optional)}finally{lr(o)}}return jM(i,t,e)}function GM(n,t,e,i=Nt.Default,r){if(n!==null){if(t[Tt]&2048&&!(i&Nt.Self)){let s=oO(n,t,e,i,Go);if(s!==Go)return s}let o=$M(n,t,e,i,Go);if(o!==Go)return o}return WM(t,e,i,r)}function $M(n,t,e,i,r){let o=iO(e);if(typeof o=="function"){if(!OM(t,n,i))return i&Nt.Host?jM(r,e,i):WM(t,e,i,r);try{let s;if(s=o(i),s==null&&!(i&Nt.Optional))Uy(e);else return s}finally{NM()}}else if(typeof o=="number"){let s=null,u=HM(n,t),d=Hu,p=i&Nt.Host?t[$o][bo]:null;for((u===-1||i&Nt.SkipSelf)&&(d=u===-1?e1(n,t):t[u+8],d===Hu||!yw(i,!1)?u=-1:(s=t[Yt],u=bp(d),t=Cp(d,t)));u!==-1;){let _=t[Yt];if(xw(o,u,_.data)){let m=nO(u,t,e,s,i,p);if(m!==Go)return m}d=t[u+8],d!==Hu&&yw(i,t[Yt].data[u+8]===p)&&xw(o,u,t)?(s=_,u=bp(d),t=Cp(d,t)):u=-1}}return r}function nO(n,t,e,i,r,o){let s=t[Yt],u=s.data[n+8],d=i==null?ec(u)&&Q6:i!=s&&(u.type&3)!==0,p=r&Nt.Host&&o===u,_=lp(u,s,e,d,p);return _!==null?Zd(t,s,_,u,r):Go}function lp(n,t,e,i,r){let o=n.providerIndexes,s=t.data,u=o&1048575,d=n.directiveStart,p=n.directiveEnd,_=o>>20,m=i?u:u+_,y=r?u+_:p;for(let b=m;b<y;b++){let M=s[b];if(b<d&&e===M||b>=d&&M.type===e)return b}if(r){let b=s[d];if(b&&Yo(b)&&b.type===e)return d}return null}function Zd(n,t,e,i,r){let o=n[e],s=t.data;if(o instanceof Sl){let u=o;u.resolving&&iM(jP(s[e]));let d=wp(u.canSeeViewProviders);u.resolving=!0;let p,_=u.injectImpl?lr(u.injectImpl):null,m=OM(n,i,Nt.Default);try{o=n[e]=u.factory(void 0,r,s,n,i),t.firstCreatePass&&e>=i.directiveStart&&GI(e,s[e],t)}finally{_!==null&&lr(_),wp(d),u.resolving=!1,NM()}}return o}function iO(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty($d)?n[$d]:void 0;return typeof t=="number"?t>=0?t&BM:rO:t}function xw(n,t,e){let i=1<<n;return!!(e[t+(n>>zM)]&i)}function yw(n,t){return!(n&Nt.Self)&&!(n&Nt.Host&&t)}var _l=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return GM(this._tNode,this._lView,t,Np(i),e)}};function rO(){return new _l(pr(),zt())}function Qr(n){return e0(()=>{let t=n.prototype.constructor,e=t[dp]||ty(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[dp]||ty(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function ty(n){return Kw(n)?()=>{let t=ty(Ki(n));return t&&t()}:vl(n)}function oO(n,t,e,i,r){let o=n,s=t;for(;o!==null&&s!==null&&s[Tt]&2048&&!yp(s);){let u=$M(o,s,e,i|Nt.Self,Go);if(u!==Go)return u;let d=o.parent;if(!d){let p=s[gM];if(p){let _=p.get(e,Go,i);if(_!==Go)return _}d=YM(s),s=s[Qu]}o=d}return r}function YM(n){let t=n[Yt],e=t.type;return e===2?t.declTNode:e===1?n[bo]:null}function bw(n,t=null,e=null,i){let r=qM(n,t,e,i);return r.resolveInjectorInitializers(),r}function qM(n,t=null,e=null,i,r=new Set){let o=[e||ur,sI(n)];return i=i||(typeof n=="object"?void 0:cr(n)),new qd(o,t||Hy(),i||null,r)}var Kr=class n{static THROW_IF_NOT_FOUND=gl;static NULL=new mp;static create(t,e){if(Array.isArray(t))return bw({name:""},e,t,"");{let i=t.name??"";return bw({name:i},t.parent,t.providers,i)}}static \u0275prov=je({token:n,providedIn:"any",factory:()=>Ve(lM)});static __NG_ELEMENT_ID__=-1};var sO=new at("");sO.__NG_ELEMENT_ID__=n=>{let t=pr();if(t===null)throw new tt(204,!1);if(t.type&2)return t.value;if(n&Nt.Optional)return null;throw new tt(204,!1)};var XM=!1,nc=(()=>{class n{static __NG_ELEMENT_ID__=aO;static __NG_ENV_ID__=e=>e}return n})(),ny=class extends nc{_lView;constructor(t){super(),this._lView=t}onDestroy(t){let e=this._lView;return tc(e)?(t(),()=>{}):(EM(e,t),()=>AI(e,t))}};function aO(){return new ny(zt())}var qu=class{},ZM=new at("",{providedIn:"root",factory:()=>!1});var JM=new at(""),KM=new at(""),ga=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new wi(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=je({token:n,providedIn:"root",factory:()=>new n})}return n})();var iy=class extends hi{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,mM()&&(this.destroyRef=Re(nc,{optional:!0})??void 0,this.pendingTasks=Re(ga,{optional:!0})??void 0)}emit(t){let e=tn(null);try{super.next(t)}finally{tn(e)}}subscribe(t,e,i){let r=t,o=e||(()=>null),s=i;if(t&&typeof t=="object"){let d=t;r=d.next?.bind(d),o=d.error?.bind(d),s=d.complete?.bind(d)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let u=super.subscribe({next:r,error:o,complete:s});return t instanceof fi&&t.add(u),u}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Xn=iy;function Sp(...n){}function QM(n){let t,e;function i(){n=Sp;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function Cw(n){return queueMicrotask(()=>n()),()=>{n=Sp}}var t1="isAngularZone",Ep=t1+"_ID",lO=0,Zn=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Xn(!1);onMicrotaskEmpty=new Xn(!1);onStable=new Xn(!1);onError=new Xn(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=XM}=t;if(typeof Zone>"u")throw new tt(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,dO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(t1)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new tt(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new tt(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,uO,Sp,Sp);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},uO={};function n1(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function cO(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){QM(()=>{n.callbackScheduled=!1,ry(n),n.isCheckStableRunning=!0,n1(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),ry(n)}function dO(n){let t=()=>{cO(n)},e=lO++;n._inner=n._inner.fork({name:"angular",properties:{[t1]:!0,[Ep]:e,[Ep+e]:!0},onInvokeTask:(i,r,o,s,u,d)=>{if(fO(d))return i.invokeTask(o,s,u,d);try{return ww(n),i.invokeTask(o,s,u,d)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),Mw(n)}},onInvoke:(i,r,o,s,u,d,p)=>{try{return ww(n),i.invoke(o,s,u,d,p)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!hO(d)&&t(),Mw(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,ry(n),n1(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function ry(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ww(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Mw(n){n._nesting--,n1(n)}var oy=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Xn;onMicrotaskEmpty=new Xn;onStable=new Xn;onError=new Xn;run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function fO(n){return eS(n,"__ignore_ng_zone__")}function hO(n){return eS(n,"__scheduler_tick__")}function eS(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var Zo=class{_console=console;handleError(t){this._console.error("ERROR",t)}},pO=new at("",{providedIn:"root",factory:()=>{let n=Re(Zn),t=Re(Zo);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function Sw(n,t){return Zw(n,t)}function mO(n){return Zw(Xw,n)}var tS=(Sw.required=mO,Sw);function gO(){return ic(pr(),zt())}function ic(n,t){return new Ir(Qo(n,t))}var Ir=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=gO}return n})();function _O(n){return n instanceof Ir?n.nativeElement:n}function vO(n){return typeof n=="function"&&n[Zr]!==void 0}function rc(n,t){let e=c6(n,t?.equal),i=e[Zr];return e.set=r=>Ld(i,r),e.update=r=>d6(i,r),e.asReadonly=xO.bind(e),e}function xO(){let n=this[Zr];if(n.readonlyFn===void 0){let t=()=>this();t[Zr]=n,n.readonlyFn=t}return n.readonlyFn}function nS(n){return vO(n)&&typeof n.set=="function"}function yO(){return this._results[Symbol.iterator]()}var sy=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new hi}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=tI(t);(this._changesDetected=!eI(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=yO};function iS(n){return(n.flags&128)===128}var rS=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(rS||{}),oS=new Map,bO=0;function CO(){return bO++}function wO(n){oS.set(n[Up],n)}function ay(n){oS.delete(n[Up])}var Ew="__ngContext__";function oc(n,t){ma(t)?(n[Ew]=t[Up],wO(t)):n[Ew]=t}function sS(n){return lS(n[Xd])}function aS(n){return lS(n[xo])}function lS(n){for(;n!==null&&!Ns(n);)n=n[xo];return n}var ly;function uS(n){ly=n}function MO(){if(ly!==void 0)return ly;if(typeof document<"u")return document;throw new tt(210,!1)}var i1=new at("",{providedIn:"root",factory:()=>SO}),SO="ng",r1=new at(""),sc=new at("",{providedIn:"platform",factory:()=>"unknown"});var o1=new at("",{providedIn:"root",factory:()=>MO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var EO="h",AO="b";var cS=!1,TO=new at("",{providedIn:"root",factory:()=>cS});var s1=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(s1||{}),ac=new at(""),Aw=new Set;function o0(n){Aw.has(n)||(Aw.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var dS=(()=>{class n{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=DO}return n})();function DO(){return new dS(zt(),pr())}var Uu=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Uu||{}),fS=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=je({token:n,providedIn:"root",factory:()=>new n})}return n})(),PO=[Uu.EarlyRead,Uu.Write,Uu.MixedReadWrite,Uu.Read],IO=(()=>{class n{ngZone=Re(Zn);scheduler=Re(qu);errorHandler=Re(Zo,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Re(ac,{optional:!0})}execute(){let e=this.sequences.size>0;e&&An(16),this.executing=!0;for(let i of PO)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&An(17)}register(e){let{view:i}=e;i!==void 0?((i[zu]??=[]).push(e),i0(i),i[Tt]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(s1.AFTER_NEXT_RENDER,e):e()}static \u0275prov=je({token:n,providedIn:"root",factory:()=>new n})}return n})(),uy=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,i,r,o,s=null){this.impl=t,this.hooks=e,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[zu];t&&(this.view[zu]=t.filter(e=>e!==this))}};function a1(n,t){!t?.injector&&gI(a1);let e=t?.injector??Re(Kr);return o0("NgAfterNextRender"),RO(n,e,t,!0)}function OO(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function RO(n,t,e,i){let r=t.get(fS);r.impl??=t.get(IO);let o=t.get(ac,null,{optional:!0}),s=e?.phase??Uu.MixedReadWrite,u=e?.manualCleanup!==!0?t.get(nc):null,d=t.get(dS,null,{optional:!0}),p=new uy(r.impl,OO(n,s),d?.view,i,u,o?.snapshot(null));return r.impl.register(p),p}var kO=(n,t,e,i)=>{};function FO(n,t,e,i){kO(n,t,e,i)}var NO=()=>null;function hS(n,t,e=!1){return NO(n,t,e)}function pS(n,t){let e=n.contentQueries;if(e!==null){let i=tn(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s!==-1){let u=n.data[s];Zy(o),u.contentQueries(2,t[s],s)}}}finally{tn(i)}}}function cy(n,t,e){Zy(0);let i=tn(null);try{t(n,e)}finally{tn(i)}}function l1(n,t,e){if(jy(t)){let i=tn(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let s=r;s<o;s++){let u=n.data[s];if(u.contentQueries){let d=e[s];u.contentQueries(1,d,s)}}}finally{tn(i)}}}var Jo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Jo||{});var Ap=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Yw})`}};function Yp(n){return n instanceof Ap?n.changingThisBreaksApplicationSecurity:n}function LO(n,t){let e=VO(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Yw})`)}return e===t}function VO(n){return n instanceof Ap&&n.getTypeName()||null}var UO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function BO(n){return n=String(n),n.match(UO)?n:"unsafe:"+n}var zO=/^>|^->|<!--|-->|--!>|<!-$/g,HO=/(<|>)/g,jO="\u200B$1\u200B";function WO(n){return n.replace(zO,t=>t.replace(HO,jO))}function GO(n,t){return n.createText(t)}function $O(n,t,e){n.setValue(t,e)}function YO(n,t){return n.createComment(WO(t))}function mS(n,t,e){return n.createElement(t,e)}function Tp(n,t,e,i,r){n.insertBefore(t,e,i,r)}function gS(n,t,e){n.appendChild(t,e)}function Tw(n,t,e,i,r){i!==null?Tp(n,t,e,i,r):gS(n,t,e)}function qO(n,t,e){n.removeChild(null,t,e)}function XO(n,t,e){n.setAttribute(t,"style",e)}function ZO(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function _S(n,t,e){let{mergedAttrs:i,classes:r,styles:o}=e;i!==null&&XI(n,t,i),r!==null&&ZO(n,t,r),o!==null&&XO(n,t,o)}var vS=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(vS||{});function qp(n){let t=JO();return t?t.sanitize(vS.URL,n)||"":LO(n,"URL")?Yp(n):BO(Is(n))}function JO(){let n=zt();return n&&n[Os].sanitizer}function es(n){return n.ownerDocument.defaultView}function xS(n){return n.ownerDocument}function yS(n){return n instanceof Function?n():n}function KO(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}e=r+1}}var bS="ng-template";function QO(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&KO(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(u1(n))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function u1(n){return n.type===4&&n.value!==bS}function eR(n,t,e){let i=n.type===4&&!e?bS:n.value;return t===i}function tR(n,t,e){let i=4,r=n.attrs,o=r!==null?rR(r):0,s=!1;for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="number"){if(!s&&!_o(i)&&!_o(d))return!1;if(s&&_o(d))continue;s=!1,i=d|i&1;continue}if(!s)if(i&4){if(i=2|i&1,d!==""&&!eR(n,d,e)||d===""&&t.length===1){if(_o(i))return!1;s=!0}}else if(i&8){if(r===null||!QO(n,r,d,e)){if(_o(i))return!1;s=!0}}else{let p=t[++u],_=nR(d,r,u1(n),e);if(_===-1){if(_o(i))return!1;s=!0;continue}if(p!==""){let m;if(_>o?m="":m=r[_+1].toLowerCase(),i&2&&p!==m){if(_o(i))return!1;s=!0}}}}return _o(i)||s}function _o(n){return(n&1)===0}function nR(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let o=!1;for(;r<t.length;){let s=t[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let u=t[++r];for(;typeof u=="string";)u=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return oR(t,n)}function iR(n,t,e=!1){for(let i=0;i<t.length;i++)if(tR(n,t[i],e))return!0;return!1}function rR(n){for(let t=0;t<n.length;t++){let e=n[t];if(ZI(e))return t}return n.length}function oR(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function Dw(n,t){return n?":not("+t.trim()+")":t}function sR(n){let t=n[0],e=1,i=2,r="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(i&2){let u=n[++e];r+="["+s+(u.length>0?'="'+u+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!_o(s)&&(t+=Dw(o,r),r=""),i=s,o=o||!_o(i);e++}return r!==""&&(t+=Dw(o,r)),t}function aR(n){return n.map(sR).join(",")}function lR(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&t.push(o,n[++i]):r===8&&e.push(o);else{if(!_o(r))break;r=o}i++}return e.length&&t.push(1,...e),t}var er={};function c1(n,t,e,i,r,o,s,u,d,p,_){let m=fr+i,y=m+r,b=uR(m,y),M=typeof p=="function"?p():p;return b[Yt]={type:n,blueprint:b,template:e,queries:null,viewQuery:u,declTNode:t,data:b.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:d,consts:M,incompleteFirstPass:!1,ssrId:_}}function uR(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:er);return e}function cR(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=c1(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function d1(n,t,e,i,r,o,s,u,d,p,_){let m=t.blueprint.slice();return m[Fs]=r,m[Tt]=i|4|128|8|64|1024,(p!==null||n&&n[Tt]&2048)&&(m[Tt]|=2048),MM(m),m[zi]=m[Qu]=n,m[dr]=e,m[Os]=s||n&&n[Os],m[ti]=u||n&&n[ti],m[Wu]=d||n&&n[Wu]||null,m[bo]=o,m[Up]=CO(),m[gp]=_,m[gM]=p,m[$o]=t.type==2?n[$o]:m,m}function dR(n,t,e){let i=Qo(t,n),r=cR(e),o=n[Os].rendererFactory,s=f1(n,d1(n,r,null,CS(e),i,t,null,o.createRenderer(i,e),null,null,null));return n[t.index]=s}function CS(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function wS(n,t,e,i){if(e===0)return-1;let r=t.length;for(let o=0;o<e;o++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function f1(n,t){return n[Xd]?n[pw][xo]=t:n[Xd]=t,n[pw]=t,t}function h(n=1){MS(gi(),zt(),Vs()+n,!1)}function MS(n,t,e,i){if(!i)if((t[Tt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&sp(t,o,e)}else{let o=n.preOrderHooks;o!==null&&ap(t,o,0,e)}Ml(e)}var Xp=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Xp||{});function dy(n,t,e,i){let r=tn(null);try{let[o,s,u]=n.inputs[e],d=null;(s&Xp.SignalBased)!==0&&(d=t[o][Zr]),d!==null&&d.transformFn!==void 0?i=d.transformFn(i):u!==null&&(i=u.call(t,i)),n.setInput!==null?n.setInput(t,d,i,e,o):vM(t,d,o,i)}finally{tn(r)}}function SS(n,t,e,i,r){let o=Vs(),s=i&2;try{Ml(-1),s&&t.length>fr&&MS(n,t,fr,!1),An(s?2:0,r),e(i,r)}finally{Ml(o),An(s?3:1,r)}}function Zp(n,t,e){_R(n,t,e),(e.flags&64)===64&&vR(n,t,e)}function h1(n,t,e=Qo){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],u=s===-1?e(t,n):n[s];n[r++]=u}}}function fR(n,t,e,i){let o=i.get(TO,cS)||e===Jo.ShadowDom,s=n.selectRootElement(t,o);return hR(s),s}function hR(n){pR(n)}var pR=()=>null;function mR(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function p1(n,t,e,i,r,o,s,u){if(!u&&g1(t,n,e,i,r)){ec(t)&&gR(e,t.index);return}if(t.type&3){let d=Qo(t,e);i=mR(i),r=s!=null?s(r,t.value||"",i):r,o.setProperty(d,i,r)}else t.type&12}function gR(n,t){let e=Xo(t,n);e[Tt]&16||(e[Tt]|=64)}function _R(n,t,e){let i=e.directiveStart,r=e.directiveEnd;ec(e)&&dR(t,e,n.data[i+e.componentOffset]),n.firstCreatePass||Mp(e,t);let o=e.initialInputs;for(let s=i;s<r;s++){let u=n.data[s],d=Zd(t,n,s,e);if(oc(d,t),o!==null&&CR(t,s-i,d,u,e,o),Yo(u)){let p=Xo(e.index,t);p[dr]=Zd(t,n,s,e)}}}function vR(n,t,e){let i=e.directiveStart,r=e.directiveEnd,o=e.index,s=BI();try{Ml(o);for(let u=i;u<r;u++){let d=n.data[u],p=t[u];K6(u),(d.hostBindings!==null||d.hostVars!==0||d.hostAttrs!==null)&&xR(d,p)}}finally{Ml(-1),K6(s)}}function xR(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function m1(n,t){let e=n.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let o=e[r];iR(t,o.selectors,!1)&&(i??=[],Yo(o)?i.unshift(o):i.push(o))}return i}function yR(n,t,e,i,r,o){let s=Qo(n,t);bR(t[ti],s,o,n.value,e,i,r)}function bR(n,t,e,i,r,o,s){if(o==null)n.removeAttribute(t,r,e);else{let u=s==null?Is(o):s(o,i||"",r);n.setAttribute(t,r,u,e)}}function CR(n,t,e,i,r,o){let s=o[t];if(s!==null)for(let u=0;u<s.length;u+=2){let d=s[u],p=s[u+1];dy(i,e,d,p)}}function wR(n,t){let e=n[Wu],i=e?e.get(Zo,null):null;i&&i.handleError(t)}function g1(n,t,e,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],u=!1;if(s)for(let d=0;d<s.length;d+=2){let p=s[d],_=s[d+1],m=t.data[p];dy(m,e[p],_,r),u=!0}if(o)for(let d of o){let p=e[d],_=t.data[d];dy(_,p,i,r),u=!0}return u}function MR(n,t){let e=Xo(t,n),i=e[Yt];SR(i,e);let r=e[Fs];r!==null&&e[gp]===null&&(e[gp]=hS(r,e[Wu])),An(18),_1(i,e,e[dr]),An(19,e[dr])}function SR(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function _1(n,t,e){Jy(t);try{let i=n.viewQuery;i!==null&&cy(1,i,e);let r=n.template;r!==null&&SS(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[Rs]?.finishViewCreation(n),n.staticContentQueries&&pS(n,t),n.staticViewQueries&&cy(2,n.viewQuery,e);let o=n.components;o!==null&&ER(t,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[Tt]&=-5,Ky()}}function ER(n,t){for(let e=0;e<t.length;e++)MR(n,t[e])}function AR(n,t,e,i){let r=tn(null);try{let o=t.tView,u=n[Tt]&4096?4096:16,d=d1(n,o,e,u,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),p=n[t.index];d[bl]=p;let _=n[Rs];return _!==null&&(d[Rs]=_.createEmbeddedView(o)),_1(o,d,e),d}finally{tn(r)}}function Pw(n,t){return!t||t.firstChild===null||iS(n)}var TR;function v1(n,t){return TR(n,t)}var ks=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ks||{});function ES(n){return(n.flags&32)===32}function Bu(n,t,e,i,r){if(i!=null){let o,s=!1;Ns(i)?o=i:ma(i)&&(s=!0,i=i[Fs]);let u=qo(i);n===0&&e!==null?r==null?gS(t,e,u):Tp(t,e,u,r||null,!0):n===1&&e!==null?Tp(t,e,u,r||null,!0):n===2?qO(t,u,s):n===3&&t.destroyNode(u),o!=null&&BR(t,n,o,e,r)}}function DR(n,t){AS(n,t),t[Fs]=null,t[bo]=null}function PR(n,t,e,i,r,o){i[Fs]=r,i[bo]=t,Kp(n,i,e,1,r,o)}function AS(n,t){t[Os].changeDetectionScheduler?.notify(9),Kp(n,t,t[ti],2,null,null)}function IR(n){let t=n[Xd];if(!t)return R6(n[Yt],n);for(;t;){let e=null;if(ma(t))e=t[Xd];else{let i=t[Pr];i&&(e=i)}if(!e){for(;t&&!t[xo]&&t!==n;)ma(t)&&R6(t[Yt],t),t=t[zi];t===null&&(t=n),ma(t)&&R6(t[Yt],t),e=t&&t[xo]}t=e}}function x1(n,t){let e=n[Gu],i=e.indexOf(t);e.splice(i,1)}function TS(n,t){if(tc(t))return;let e=t[ti];e.destroyNode&&Kp(n,t,e,3,null,null),IR(t)}function R6(n,t){if(tc(t))return;let e=tn(null);try{t[Tt]&=-129,t[Tt]|=256,t[Jr]&&a6(t[Jr]),RR(n,t),OR(n,t),t[Yt].type===1&&t[ti].destroy();let i=t[bl];if(i!==null&&Ns(t[zi])){i!==t[zi]&&x1(i,t);let r=t[Rs];r!==null&&r.detachView(n)}ay(t)}finally{tn(e)}}function OR(n,t){let e=n.cleanup,i=t[_p];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let u=e[s+3];u>=0?i[u]():i[-u].unsubscribe(),s+=2}else{let u=i[e[s+1]];e[s].call(u)}i!==null&&(t[_p]=null);let r=t[pa];if(r!==null){t[pa]=null;for(let s=0;s<r.length;s++){let u=r[s];u()}}let o=t[vp];if(o!==null){t[vp]=null;for(let s of o)s.destroy()}}function RR(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof Sl)){let o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let u=r[o[s]],d=o[s+1];An(4,u,d);try{d.call(u)}finally{An(5,u,d)}}else{An(4,r,o);try{o.call(r)}finally{An(5,r,o)}}}}}function kR(n,t,e){return FR(n,t.parent,e)}function FR(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[Fs];if(ec(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===Jo.None||r===Jo.Emulated)return null}return Qo(i,e)}function NR(n,t,e){return VR(n,t,e)}function LR(n,t,e){return n.type&40?Qo(n,e):null}var VR=LR,Iw;function Jp(n,t,e,i){let r=kR(n,i,t),o=t[ti],s=i.parent||t[bo],u=NR(s,i,t);if(r!=null)if(Array.isArray(e))for(let d=0;d<e.length;d++)Tw(o,r,e[d],u,!1);else Tw(o,r,e,u,!1);Iw!==void 0&&Iw(o,i,t,e,r)}function Gd(n,t){if(t!==null){let e=t.type;if(e&3)return Qo(t,n);if(e&4)return fy(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return Gd(n,i);{let r=n[t.index];return Ns(r)?fy(-1,r):qo(r)}}else{if(e&128)return Gd(n,t.next);if(e&32)return v1(t,n)()||qo(n[t.index]);{let i=DS(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=wl(n[$o]);return Gd(r,i)}else return Gd(n,t.next)}}}return null}function DS(n,t){if(t!==null){let i=n[$o][bo],r=t.projection;return i.projection[r]}return null}function fy(n,t){let e=Pr+n+1;if(e<t.length){let i=t[e],r=i[Yt].firstChild;if(r!==null)return Gd(i,r)}return t[Cl]}function y1(n,t,e,i,r,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let u=i[e.index],d=e.type;if(s&&t===0&&(u&&oc(qo(u),i),e.flags|=2),!ES(e))if(d&8)y1(n,t,e.child,i,r,o,!1),Bu(t,n,r,u,o);else if(d&32){let p=v1(e,i),_;for(;_=p();)Bu(t,n,r,_,o);Bu(t,n,r,u,o)}else d&16?UR(n,t,i,e,r,o):Bu(t,n,r,u,o);e=s?e.projectionNext:e.next}}function Kp(n,t,e,i,r,o){y1(e,i,n.firstChild,t,r,o,!1)}function UR(n,t,e,i,r,o){let s=e[$o],d=s[bo].projection[i.projection];if(Array.isArray(d))for(let p=0;p<d.length;p++){let _=d[p];Bu(t,n,r,_,o)}else{let p=d,_=s[zi];iS(i)&&(p.flags|=128),y1(n,t,p,_,r,o,!0)}}function BR(n,t,e,i,r){let o=e[Cl],s=qo(e);o!==s&&Bu(t,n,i,o,r);for(let u=Pr;u<e.length;u++){let d=e[u];Kp(d[Yt],d,n,t,i,o)}}function zR(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let o=i.indexOf("-")===-1?void 0:ks.DashCase;r==null?n.removeStyle(e,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ks.Important),n.setStyle(e,i,r,o))}}function Dp(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&i.push(qo(o)),Ns(o)&&HR(o,i);let s=e.type;if(s&8)Dp(n,t,e.child,i);else if(s&32){let u=v1(e,t),d;for(;d=u();)i.push(d)}else if(s&16){let u=DS(t,e);if(Array.isArray(u))i.push(...u);else{let d=wl(t[$o]);Dp(d[Yt],d,u,i,!0)}}e=r?e.projectionNext:e.next}return i}function HR(n,t){for(let e=Pr;e<n.length;e++){let i=n[e],r=i[Yt].firstChild;r!==null&&Dp(i[Yt],i,r,t)}n[Cl]!==n[Fs]&&t.push(n[Cl])}function PS(n){if(n[zu]!==null){for(let t of n[zu])t.impl.addSequence(t);n[zu].length=0}}var IS=[];function jR(n){return n[Jr]??WR(n)}function WR(n){let t=IS.pop()??Object.create($R);return t.lView=n,t}function GR(n){n.lView[Jr]!==n&&(n.lView=null,IS.push(n))}var $R=yt(Ie({},Fd),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{i0(n.lView)},consumerOnSignalRead(){this.lView[Jr]=this}});function YR(n){let t=n[Jr]??Object.create(qR);return t.lView=n,t}var qR=yt(Ie({},Fd),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=wl(n.lView);for(;t&&!OS(t[Yt]);)t=wl(t);t&&SM(t)},consumerOnSignalRead(){this.lView[Jr]=this}});function OS(n){return n.type!==2}function RS(n){if(n[vp]===null)return;let t=!0;for(;t;){let e=!1;for(let i of n[vp])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=e&&!!(n[Tt]&8192)}}var XR=100;function kS(n,t=!0,e=0){let r=n[Os].rendererFactory,o=!1;o||r.begin?.();try{ZR(n,e)}catch(s){throw t&&wR(n,s),s}finally{o||r.end?.()}}function ZR(n,t){let e=DM();try{gw(!0),hy(n,t);let i=0;for(;zp(n);){if(i===XR)throw new tt(103,!1);i++,hy(n,1)}}finally{gw(e)}}function JR(n,t,e,i){if(tc(t))return;let r=t[Tt],o=!1,s=!1;Jy(t);let u=!0,d=null,p=null;o||(OS(n)?(p=jR(t),d=Dh(p)):t6()===null?(u=!1,p=YR(t),d=Dh(p)):t[Jr]&&(a6(t[Jr]),t[Jr]=null));try{MM(t),LI(n.bindingStartIndex),e!==null&&SS(n,t,e,2,i);let _=(r&3)===3;if(!o)if(_){let b=n.preOrderCheckHooks;b!==null&&sp(t,b,null)}else{let b=n.preOrderHooks;b!==null&&ap(t,b,0,null),I6(t,0)}if(s||KR(t),RS(t),FS(t,0),n.contentQueries!==null&&pS(n,t),!o)if(_){let b=n.contentCheckHooks;b!==null&&sp(t,b)}else{let b=n.contentHooks;b!==null&&ap(t,b,1),I6(t,1)}ek(n,t);let m=n.components;m!==null&&LS(t,m,0);let y=n.viewQuery;if(y!==null&&cy(2,y,i),!o)if(_){let b=n.viewCheckHooks;b!==null&&sp(t,b)}else{let b=n.viewHooks;b!==null&&ap(t,b,2),I6(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[P6]){for(let b of t[P6])b();t[P6]=null}o||(PS(t),t[Tt]&=-73)}catch(_){throw o||i0(t),_}finally{p!==null&&(o6(p,d),u&&GR(p)),Ky()}}function FS(n,t){for(let e=sS(n);e!==null;e=aS(e))for(let i=Pr;i<e.length;i++){let r=e[i];NS(r,t)}}function KR(n){for(let t=sS(n);t!==null;t=aS(t)){if(!(t[Tt]&2))continue;let e=t[Gu];for(let i=0;i<e.length;i++){let r=e[i];SM(r)}}}function QR(n,t,e){An(18);let i=Xo(t,n);NS(i,e),An(19,i[dr])}function NS(n,t){Gy(n)&&hy(n,t)}function hy(n,t){let i=n[Yt],r=n[Tt],o=n[Jr],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(o?.dirty&&s6(o)),s||=!1,o&&(o.dirty=!1),n[Tt]&=-9217,s)JR(i,n,i.template,n[dr]);else if(r&8192){RS(n),FS(n,1);let u=i.components;u!==null&&LS(n,u,1),PS(n)}}function LS(n,t,e){for(let i=0;i<t.length;i++)QR(n,t[i],e)}function ek(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)Ml(~r);else{let o=r,s=e[++i],u=e[++i];UI(s,o);let d=t[o];An(24,d),u(2,d),An(25,d)}}}finally{Ml(-1)}}function b1(n,t){let e=DM()?64:1088;for(n[Os].changeDetectionScheduler?.notify(t);n;){n[Tt]|=e;let i=wl(n);if(yp(n)&&!i)return n;n=i}return null}function VS(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function tk(n,t,e,i=!0){let r=t[Yt];if(nk(r,t,n,e),i){let s=fy(e,n),u=t[ti],d=u.parentNode(n[Cl]);d!==null&&PR(r,n[bo],u,t,d,s)}let o=t[gp];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function py(n,t){if(n.length<=Pr)return;let e=Pr+t,i=n[e];if(i){let r=i[bl];r!==null&&r!==n&&x1(r,i),t>0&&(n[e-1][xo]=i[xo]);let o=pp(n,Pr+t);DR(i[Yt],i);let s=o[Rs];s!==null&&s.detachView(o[Yt]),i[zi]=null,i[xo]=null,i[Tt]&=-129}return i}function nk(n,t,e,i){let r=Pr+i,o=e.length;i>0&&(e[r-1][xo]=t),i<o-Pr?(t[xo]=e[r],aM(e,Pr+i,t)):(e.push(t),t[xo]=null),t[zi]=e;let s=t[bl];s!==null&&e!==s&&US(s,t);let u=t[Rs];u!==null&&u.insertView(n),Z6(t),t[Tt]|=128}function US(n,t){let e=n[Gu],i=t[zi];if(ma(i))n[Tt]|=2;else{let r=i[zi][$o];t[$o]!==r&&(n[Tt]|=2)}e===null?n[Gu]=[t]:e.push(t)}var Jd=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,e=t[Yt];return Dp(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i}get context(){return this._lView[dr]}set context(t){this._lView[dr]=t}get destroyed(){return tc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[zi];if(Ns(t)){let e=t[xp],i=e?e.indexOf(this):-1;i>-1&&(py(t,i),pp(e,i))}this._attachedToViewContainer=!1}TS(this._lView[Yt],this._lView)}onDestroy(t){EM(this._lView,t)}markForCheck(){b1(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Tt]&=-129}reattach(){Z6(this._lView),this._lView[Tt]|=128}detectChanges(){this._lView[Tt]|=1024,kS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new tt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=yp(this._lView),e=this._lView[bl];e!==null&&!t&&x1(e,this._lView),AS(this._lView[Yt],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new tt(902,!1);this._appRef=t;let e=yp(this._lView),i=this._lView[bl];i!==null&&!e&&US(i,this._lView),Z6(this._lView)}};var El=(()=>{class n{static __NG_ELEMENT_ID__=ok}return n})(),ik=El,rk=class extends ik{_declarationLView;_declarationTContainer;elementRef;constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=AR(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new Jd(r)}};function ok(){return Qp(pr(),zt())}function Qp(n,t){return n.type&4?new rk(t,n,ic(n,t)):null}function em(n,t,e,i,r){let o=n.data[t];if(o===null)o=sk(n,t,e,i,r),VI()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=i,o.attrs=r;let s=FI();o.injectorIndex=s===null?-1:s.injectorIndex}return Dl(o,!0),o}function sk(n,t,e,i,r){let o=AM(),s=Xy(),u=s?o:o&&o.parent,d=n.data[t]=lk(n,u,e,t,i,r);return ak(n,d,o,s),d}function ak(n,t,e,i){n.firstChild===null&&(n.firstChild=t),e!==null&&(i?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function lk(n,t,e,i,r,o){let s=t?t.injectorIndex:-1,u=0;return OI()&&(u|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:u,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var EQ=new RegExp(`^(\\d+)*(${AO}|${EO})*(.*)`);var uk=()=>null;function Ow(n,t){return uk(n,t)}var ck=class{},BS=class{},my=class{resolveComponentFactory(t){throw Error(`No component factory found for ${cr(t)}.`)}},tm=class{static NULL=new my},Xu=class{},Us=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>dk()}return n})();function dk(){let n=zt(),t=pr(),e=Xo(t.index,n);return(ma(e)?e:n)[ti]}var fk=(()=>{class n{static \u0275prov=je({token:n,providedIn:"root",factory:()=>null})}return n})();var k6={},gy=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=Np(i);let r=this.injector.get(t,k6,i);return r!==k6||e===k6?r:this.parentInjector.get(t,e,i)}};function _y(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let u=t[s];if(typeof u=="number")o=u;else if(o==1)r=H6(r,u);else if(o==2){let d=u,p=t[++s];i=H6(i,d+": "+p+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function Te(n,t=Nt.Default){let e=zt();if(e===null)return Ve(n,t);let i=pr();return GM(i,e,Ki(n),t)}function zS(){let n="invalid";throw new Error(n)}function C1(n,t,e,i,r){let o=i===null?null:{"":-1},s=r(n,e);if(s!==null){let u,d=null,p=null,_=pk(s);_===null?u=s:[u,d,p]=_,_k(n,t,e,u,o,d,p)}o!==null&&i!==null&&hk(e,i,o)}function hk(n,t,e){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let o=e[t[r+1]];if(o==null)throw new tt(-301,!1);i.push(t[r],o)}}function pk(n){let t=null,e=!1;for(let s=0;s<n.length;s++){let u=n[s];if(s===0&&Yo(u)&&(t=u),u.findHostDirectiveDefs!==null){e=!0;break}}if(!e)return null;let i=null,r=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,o??=new Map,mk(s,i,o,r)),s===t&&(i??=[],i.push(s));return i!==null?(i.push(...t===null?n:n.slice(1)),[i,r,o]):null}function mk(n,t,e,i){let r=t.length;n.findHostDirectiveDefs(n,t,i),e.set(n,[r,t.length-1])}function gk(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function _k(n,t,e,i,r,o,s){let u=i.length,d=!1;for(let y=0;y<u;y++){let b=i[y];!d&&Yo(b)&&(d=!0,gk(n,e,y)),ey(Mp(e,t),n,b.type)}wk(e,n.data.length,u);for(let y=0;y<u;y++){let b=i[y];b.providersResolver&&b.providersResolver(b)}let p=!1,_=!1,m=wS(n,t,u,null);u>0&&(e.directiveToIndex=new Map);for(let y=0;y<u;y++){let b=i[y];if(e.mergedAttrs=Yu(e.mergedAttrs,b.hostAttrs),xk(n,e,t,m,b),Ck(m,b,r),s!==null&&s.has(b)){let[O,E]=s.get(b);e.directiveToIndex.set(b.type,[m,O+e.directiveStart,E+e.directiveStart])}else(o===null||!o.has(b))&&e.directiveToIndex.set(b.type,m);b.contentQueries!==null&&(e.flags|=4),(b.hostBindings!==null||b.hostAttrs!==null||b.hostVars!==0)&&(e.flags|=64);let M=b.type.prototype;!p&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),p=!0),!_&&(M.ngOnChanges||M.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),_=!0),m++}vk(n,e,o)}function vk(n,t,e){for(let i=t.directiveStart;i<t.directiveEnd;i++){let r=n.data[i];if(e===null||!e.has(r))Rw(0,t,r,i),Rw(1,t,r,i),Fw(t,i,!1);else{let o=e.get(r);kw(0,t,o,i),kw(1,t,o,i),Fw(t,i,!0)}}}function Rw(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(i),HS(t,o)}}function kw(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],u;n===0?u=t.hostDirectiveInputs??={}:u=t.hostDirectiveOutputs??={},u[s]??=[],u[s].push(i,o),HS(t,s)}}function HS(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function Fw(n,t,e){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!e&&r===null||e&&o===null||u1(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,u=0;for(;u<i.length;){let d=i[u];if(d===0){u+=4;continue}else if(d===5){u+=2;continue}else if(typeof d=="number")break;if(!e&&r.hasOwnProperty(d)){let p=r[d];for(let _ of p)if(_===t){s??=[],s.push(d,i[u+1]);break}}else if(e&&o.hasOwnProperty(d)){let p=o[d];for(let _=0;_<p.length;_+=2)if(p[_]===t){s??=[],s.push(p[_+1],i[u+1]);break}}u+=2}n.initialInputs??=[],n.initialInputs.push(s)}function xk(n,t,e,i,r){n.data[i]=r;let o=r.factory||(r.factory=vl(r.type,!0)),s=new Sl(o,Yo(r),Te);n.blueprint[i]=s,e[i]=s,yk(n,t,i,wS(n,e,r.hostVars,er),r)}function yk(n,t,e,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let u=~t.index;bk(s)!=u&&s.push(u),s.push(e,i,o)}}function bk(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function Ck(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;Yo(t)&&(e[""]=n)}}function wk(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function jS(n,t,e,i,r,o,s,u){let d=t.consts,p=$u(d,s),_=em(t,n,2,i,p);return o&&C1(t,e,_,$u(d,u),r),_.mergedAttrs=Yu(_.mergedAttrs,_.attrs),_.attrs!==null&&_y(_,_.attrs,!1),_.mergedAttrs!==null&&_y(_,_.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,_),_}function WS(n,t){Qy(n,t),jy(t)&&n.queries.elementEnd(t)}var Pp=class extends tm{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=yl(t);return new Zu(e,this.ngModule)}};function Mk(n){return Object.keys(n).map(t=>{let[e,i,r]=n[t],o={propName:e,templateName:t,isSignal:(i&Xp.SignalBased)!==0};return r&&(o.transform=r),o})}function Sk(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function Ek(n,t,e){let i=t instanceof Bi?t:t?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new gy(e,i):e}function Ak(n){let t=n.get(Xu,null);if(t===null)throw new tt(407,!1);let e=n.get(fk,null),i=n.get(qu,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:i}}function Tk(n,t){let e=(n.selectors[0][0]||"div").toLowerCase();return mS(t,e,e==="svg"?bI:e==="math"?CI:null)}var Zu=class extends BS{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Mk(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Sk(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=aR(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,i,r){An(22);let o=tn(null);try{let s=this.componentDef,u=i?["ng-version","19.2.17"]:lR(this.componentDef.selectors[0]),d=c1(0,null,null,1,0,null,null,null,null,[u],null),p=Ek(s,r||this.ngModule,t),_=Ak(p),m=_.rendererFactory.createRenderer(null,s),y=i?fR(m,i,s.encapsulation,p):Tk(s,m),b=d1(null,d,null,512|CS(s),null,null,_,m,p,null,hS(y,p,!0));b[fr]=y,Jy(b);let M=null;try{let O=jS(fr,d,b,"#host",()=>[this.componentDef],!0,0);y&&(_S(m,y,O),oc(y,b)),Zp(d,b,O),l1(d,O,b),WS(d,O),e!==void 0&&Dk(O,this.ngContentSelectors,e),M=Xo(O.index,b),b[dr]=M[dr],_1(d,b,null)}catch(O){throw M!==null&&ay(M),ay(b),O}finally{An(23),Ky()}return new vy(this.componentType,b)}finally{tn(o)}}},vy=class extends ck{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e){super(),this._rootLView=e,this._tNode=wM(e[Yt],fr),this.location=ic(this._tNode,e),this.instance=Xo(this._tNode.index,e)[dr],this.hostView=this.changeDetectorRef=new Jd(e,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let r=this._rootLView,o=g1(i,r[Yt],r,t,e);this.previousInputValues.set(t,e);let s=Xo(i.index,r);b1(s,1)}get injector(){return new _l(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Dk(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let o=e[r];i.push(o!=null&&o.length?Array.from(o):null)}}var _a=(()=>{class n{static __NG_ELEMENT_ID__=Pk}return n})();function Pk(){let n=pr();return $S(n,zt())}var Ik=_a,GS=class extends Ik{_lContainer;_hostTNode;_hostLView;constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return ic(this._hostTNode,this._hostLView)}get injector(){return new _l(this._hostTNode,this._hostLView)}get parentInjector(){let t=e1(this._hostTNode,this._hostLView);if(UM(t)){let e=Cp(t,this._hostLView),i=bp(t),r=e[Yt].data[i+8];return new _l(r,e)}else return new _l(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=Nw(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Pr}createEmbeddedView(t,e,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=Ow(this._lContainer,t.ssrId),u=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(u,r,Pw(this._hostTNode,s)),u}createComponent(t,e,i,r,o){let s=t&&!_I(t),u;if(s)u=e;else{let M=e||{};u=M.index,i=M.injector,r=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let d=s?t:new Zu(yl(t)),p=i||this.parentInjector;if(!o&&d.ngModule==null){let O=(s?p:this.parentInjector).get(Bi,null);O&&(o=O)}let _=yl(d.componentType??{}),m=Ow(this._lContainer,_?.id??null),y=m?.firstChild??null,b=d.create(p,r,y,o);return this.insertImpl(b.hostView,u,Pw(this._hostTNode,m)),b}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(SI(r)){let u=this.indexOf(t);if(u!==-1)this.detach(u);else{let d=r[zi],p=new GS(d,d[bo],d[zi]);p.detach(p.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return tk(s,r,o,i),t.attachToViewContainerRef(),aM(F6(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=Nw(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=py(this._lContainer,e);i&&(pp(F6(this._lContainer),e),TS(i[Yt],i))}detach(t){let e=this._adjustIndex(t,-1),i=py(this._lContainer,e);return i&&pp(F6(this._lContainer),e)!=null?new Jd(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function Nw(n){return n[xp]}function F6(n){return n[xp]||(n[xp]=[])}function $S(n,t){let e,i=t[n.index];return Ns(i)?e=i:(e=VS(i,t,null,n),t[n.index]=e,f1(t,e)),Rk(e,t,n,i),new GS(e,n,t)}function Ok(n,t){let e=n[ti],i=e.createComment(""),r=Qo(t,n),o=e.parentNode(r);return Tp(e,o,i,e.nextSibling(r),!1),i}var Rk=Nk,kk=()=>!1;function Fk(n,t,e){return kk(n,t,e)}function Nk(n,t,e,i){if(n[Cl])return;let r;e.type&8?r=qo(i):r=Ok(t,e),n[Cl]=r}var xy=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},yy=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){let s=e.getByIndex(o),u=this.queries[s.indexInDeclarationView];r.push(u.clone())}return new n(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)w1(t,e).matches!==null&&this.queries[e].setDirty()}},by=class{flags;read;predicate;constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=Wk(t):this.predicate=t}},Cy=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},wy=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,e,Lk(e,o)),this.matchTNodeWithReadOption(t,e,lp(e,t,o,!1,!1))}else i===El?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,lp(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Ir||r===_a||r===El&&e.type&4)this.addMatch(e.index,-2);else{let o=lp(e,t,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function Lk(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function Vk(n,t){return n.type&11?ic(n,t):n.type&4?Qp(n,t):null}function Uk(n,t,e,i){return e===-1?Vk(t,n):e===-2?Bk(n,t,i):Zd(n,n[Yt],e,t)}function Bk(n,t,e){if(e===Ir)return ic(t,n);if(e===El)return Qp(t,n);if(e===_a)return $S(t,n)}function YS(n,t,e,i){let r=t[Rs].queries[i];if(r.matches===null){let o=n.data,s=e.matches,u=[];for(let d=0;s!==null&&d<s.length;d+=2){let p=s[d];if(p<0)u.push(null);else{let _=o[p];u.push(Uk(t,_,s[d+1],e.metadata.read))}}r.matches=u}return r.matches}function My(n,t,e,i){let r=n.queries.getByIndex(e),o=r.matches;if(o!==null){let s=YS(n,t,r,e);for(let u=0;u<o.length;u+=2){let d=o[u];if(d>0)i.push(s[u/2]);else{let p=o[u+1],_=t[-d];for(let m=Pr;m<_.length;m++){let y=_[m];y[bl]===y[zi]&&My(y[Yt],y,p,i)}if(_[Gu]!==null){let m=_[Gu];for(let y=0;y<m.length;y++){let b=m[y];My(b[Yt],b,p,i)}}}}}return i}function zk(n,t){return n[Rs].queries[t].queryList}function Hk(n,t,e){let i=new sy((e&4)===4);return TI(n,t,i,i.destroy),(t[Rs]??=new yy).queries.push(new xy(i))-1}function jk(n,t,e){let i=gi();return i.firstCreatePass&&(Gk(i,new by(n,t,e),-1),(t&2)===2&&(i.staticViewQueries=!0)),Hk(i,zt(),t)}function Wk(n){return n.split(",").map(t=>t.trim())}function Gk(n,t,e){n.queries===null&&(n.queries=new Cy),n.queries.track(new wy(t,e))}function w1(n,t){return n.queries.getByIndex(t)}function $k(n,t){let e=n[Yt],i=w1(e,t);return i.crossesNgTemplate?My(e,n,t,[]):YS(e,n,i,t)}var Ju=class{},M1=class{};var Sy=class extends Ju{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Pp(this);constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e;let o=cM(t);this._bootstrapComponents=yS(o.bootstrap),this._r3Injector=qM(t,e,[{provide:Ju,useValue:this},{provide:tm,useValue:this.componentFactoryResolver},...i],cr(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Ey=class extends M1{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Sy(this.moduleType,t,[])}};var Ip=class extends Ju{injector;componentFactoryResolver=new Pp(this);instance=null;constructor(t){super();let e=new qd([...t.providers,{provide:Ju,useValue:this},{provide:tm,useValue:this.componentFactoryResolver}],t.parent||Hy(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function s0(n,t,e=null){return new Ip({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var Yk=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=dM(!1,e.type),r=i.length>0?s0([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=je({token:n,providedIn:"environment",factory:()=>new n(Ve(Bi))})}return n})();function vn(n){return e0(()=>{let t=qS(n),e=yt(Ie({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===rS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(Yk).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Jo.Emulated,styles:n.styles||ur,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&o0("NgStandalone"),XS(e);let i=n.dependencies;return e.directiveDefs=Lw(i,!1),e.pipeDefs=Lw(i,!0),e.id=Kk(e),e})}function qk(n){return yl(n)||rI(n)}function Xk(n){return n!==null}function Co(n){return e0(()=>({type:n.type,bootstrap:n.bootstrap||ur,declarations:n.declarations||ur,imports:n.imports||ur,exports:n.exports||ur,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Zk(n,t){if(n==null)return xl;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,u,d;Array.isArray(r)?(u=r[0],o=r[1],s=r[2]??o,d=r[3]||null):(o=r,s=r,u=Xp.None,d=null),e[o]=[i,u,d],t[o]=s}return e}function Jk(n){if(n==null)return xl;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function Tn(n){return e0(()=>{let t=qS(n);return XS(t),t})}function S1(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function qS(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||xl,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ur,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Zk(n.inputs,t),outputs:Jk(n.outputs),debugInfo:null}}function XS(n){n.features?.forEach(t=>t(n))}function Lw(n,t){if(!n)return null;let e=t?oI:qk;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter(Xk)}function Kk(n){let t=0,e=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Qk(n){return Object.getPrototypeOf(n.prototype).constructor}function Ni(n){let t=Qk(n.type),e=!0,i=[n];for(;t;){let r;if(Yo(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new tt(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let s=n;s.inputs=N6(n.inputs),s.declaredInputs=N6(n.declaredInputs),s.outputs=N6(n.outputs);let u=r.hostBindings;u&&r5(n,u);let d=r.viewQuery,p=r.contentQueries;if(d&&n5(n,d),p&&i5(n,p),e5(n,r),FP(n.outputs,r.outputs),Yo(r)&&r.data.animation){let _=n.data;_.animation=(_.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let u=o[s];u&&u.ngInherit&&u(n),u===Ni&&(e=!1)}}t=Object.getPrototypeOf(t)}t5(i)}function e5(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e])}}function t5(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Yu(r.hostAttrs,e=Yu(e,r.hostAttrs))}}function N6(n){return n===xl?{}:n===ur?[]:n}function n5(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function i5(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,o)=>{t(i,r,o),e(i,r,o)}:n.contentQueries=t}function r5(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function ZS(n){return s5(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function o5(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function s5(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function a0(n,t,e){return n[t]=e}function a5(n,t){return n[t]}function Ko(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function Kd(n,t,e,i){let r=Ko(n,t,e);return Ko(n,t+1,i)||r}function JS(n,t,e,i,r){let o=Kd(n,t,e,i);return Ko(n,t+2,r)||o}function l5(n,t,e,i,r,o){let s=Kd(n,t,e,i);return Kd(n,t+2,r,o)||s}function u5(n,t,e,i,r,o,s,u,d){let p=t.consts,_=em(t,n,4,s||null,u||null);qy()&&C1(t,e,_,$u(p,d),m1),_.mergedAttrs=Yu(_.mergedAttrs,_.attrs),Qy(t,_);let m=_.tView=c1(2,_,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,p,null);return t.queries!==null&&(t.queries.template(t,_),m.queries=t.queries.embeddedTView(_)),_}function c5(n,t,e,i,r,o,s,u,d,p){let _=e+fr,m=t.firstCreatePass?u5(_,t,n,i,r,o,s,u,d):t.data[_];Dl(m,!1);let y=d5(t,n,m,e);Gp()&&Jp(t,n,y,m),oc(y,n);let b=VS(y,n,y,m);return n[_]=b,f1(n,b),Fk(b,m,n),Bp(m)&&Zp(t,n,m),d!=null&&h1(n,m,p),m}function te(n,t,e,i,r,o,s,u){let d=zt(),p=gi(),_=$u(p.consts,o);return c5(d,p,n,t,e,i,r,_,s,u),te}var d5=f5;function f5(n,t,e,i){return $p(!0),t[ti].createComment("")}var KS=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var QS=new at("");var h5=(()=>{class n{static \u0275prov=je({token:n,providedIn:"root",factory:()=>new Ay})}return n})(),Ay=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let e=t.zone,i=this.queues.get(e);i.has(t)&&(i.delete(t),this.queuedEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(t)||(this.queuedEffectCount++,i.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}};function Pl(n){return!!n&&typeof n.then=="function"}function e4(n){return!!n&&typeof n.subscribe=="function"}var t4=new at("");function E1(n){return n0([{provide:t4,multi:!0,useValue:n}])}var n4=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=Re(t4,{optional:!0})??[];injector=Re(Kr);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=hr(this.injector,r);if(Pl(o))e.push(o);else if(e4(o)){let s=new Promise((u,d)=>{o.subscribe({complete:u,error:d})});e.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nm=new at("");function p5(){u6(()=>{throw new tt(600,!1)})}function m5(n){return n.isBoundToModule}var g5=10;var Al=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Re(pO);afterRenderManager=Re(fS);zonelessEnabled=Re(ZM);rootEffectScheduler=Re(h5);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new hi;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=Re(ga).hasPendingTasks.pipe(Ut(e=>!e));constructor(){Re(ac,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=Re(Bi);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){return this.bootstrapImpl(e,i)}bootstrapImpl(e,i,r=Kr.NULL){An(10);let o=e instanceof BS;if(!this._injector.get(n4).done){let b="";throw new tt(405,b)}let u;o?u=e:u=this._injector.get(tm).resolveComponentFactory(e),this.componentTypes.push(u.componentType);let d=m5(u)?void 0:this._injector.get(Ju),p=i||u.selector,_=u.create(r,[],p,d),m=_.location.nativeElement,y=_.injector.get(QS,null);return y?.registerApplication(m),_.onDestroy(()=>{this.detachView(_.hostView),up(this.components,_),y?.unregisterApplication(m)}),this._loadComponent(_),An(11,_),_}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){An(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(s1.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new tt(101,!1);let e=tn(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,tn(e),this.afterTick.next(),An(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Xu,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<g5;)An(14),this.synchronizeOnce(),An(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)_5(i,r,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>zp(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;up(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(nm,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>up(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new tt(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function up(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function _5(n,t,e,i){if(!e&&!zp(n))return;kS(n,t,e&&!i?0:1)}function lc(n,t,e,i){let r=zt(),o=Hp();if(Ko(r,o,t)){let s=gi(),u=Wp();yR(u,r,n,t,e,i)}return lc}function A1(n,t,e,i){return Ko(n,Hp(),e)?t+Is(e)+i:er}function v5(n,t,e,i,r,o){let s=PM(),u=Kd(n,s,e,r);return jp(2),u?t+Is(e)+i+Is(r)+o:er}function x5(n,t,e,i,r,o,s,u){let d=PM(),p=JS(n,d,e,r,s);return jp(3),p?t+Is(e)+i+Is(r)+o+Is(s)+u:er}function rp(n,t){return n<<17|t<<2}function Tl(n){return n>>17&32767}function y5(n){return(n&2)==2}function b5(n,t){return n&131071|t<<17}function Ty(n){return n|2}function Ku(n){return(n&131068)>>2}function L6(n,t){return n&-131069|t<<2}function C5(n){return(n&1)===1}function Dy(n){return n|1}function w5(n,t,e,i,r,o){let s=o?t.classBindings:t.styleBindings,u=Tl(s),d=Ku(s);n[i]=e;let p=!1,_;if(Array.isArray(e)){let m=e;_=m[1],(_===null||t0(m,_)>0)&&(p=!0)}else _=e;if(r)if(d!==0){let y=Tl(n[u+1]);n[i+1]=rp(y,u),y!==0&&(n[y+1]=L6(n[y+1],i)),n[u+1]=b5(n[u+1],i)}else n[i+1]=rp(u,0),u!==0&&(n[u+1]=L6(n[u+1],i)),u=i;else n[i+1]=rp(d,0),u===0?u=i:n[d+1]=L6(n[d+1],i),d=i;p&&(n[i+1]=Ty(n[i+1])),Vw(n,_,i,!0),Vw(n,_,i,!1),M5(t,_,n,i,o),s=rp(u,d),o?t.classBindings=s:t.styleBindings=s}function M5(n,t,e,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&t0(o,t)>=0&&(e[i+1]=Dy(e[i+1]))}function Vw(n,t,e,i){let r=n[e+1],o=t===null,s=i?Tl(r):Ku(r),u=!1;for(;s!==0&&(u===!1||o);){let d=n[s],p=n[s+1];S5(d,t)&&(u=!0,n[s+1]=i?Dy(p):Ty(p)),s=i?Tl(p):Ku(p)}u&&(n[e+1]=i?Ty(r):Dy(r))}function S5(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?t0(n,t)>=0:!1}var vo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function E5(n){return n.substring(vo.key,vo.keyEnd)}function A5(n){return T5(n),i4(n,r4(n,0,vo.textEnd))}function i4(n,t){let e=vo.textEnd;return e===t?-1:(t=vo.keyEnd=D5(n,vo.key=t,e),r4(n,t,e))}function T5(n){vo.key=0,vo.keyEnd=0,vo.value=0,vo.valueEnd=0,vo.textEnd=n.length}function r4(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function D5(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function P(n,t,e){let i=zt(),r=Hp();if(Ko(i,r,t)){let o=gi(),s=Wp();p1(o,s,i,n,t,i[ti],e,!1)}return P}function Py(n,t,e,i,r){g1(t,n,e,r?"class":"style",i)}function wo(n,t,e){return s4(n,t,e,!1),wo}function Ue(n,t){return s4(n,t,null,!0),Ue}function jn(n){a4(F5,o4,n,!0)}function o4(n,t){for(let e=A5(t);e>=0;e=i4(t,e))Lp(n,E5(t),!0)}function s4(n,t,e,i){let r=zt(),o=gi(),s=jp(2);if(o.firstUpdatePass&&u4(o,n,s,i),t!==er&&Ko(r,s,t)){let u=o.data[Vs()];c4(o,u,r,r[ti],n,r[s+1]=L5(t,e),i,s)}}function a4(n,t,e,i){let r=gi(),o=jp(2);r.firstUpdatePass&&u4(r,null,o,i);let s=zt();if(e!==er&&Ko(s,o,e)){let u=r.data[Vs()];if(d4(u,i)&&!l4(r,o)){let d=i?u.classesWithoutHost:u.stylesWithoutHost;d!==null&&(e=H6(d,e||"")),Py(r,u,s,e,i)}else N5(r,u,s,s[ti],s[o+1],s[o+1]=k5(n,t,e),i,o)}}function l4(n,t){return t>=n.expandoStartIndex}function u4(n,t,e,i){let r=n.data;if(r[e+1]===null){let o=r[Vs()],s=l4(n,e);d4(o,i)&&t===null&&!s&&(t=!1),t=P5(r,o,t,i),w5(r,o,t,e,s,i)}}function P5(n,t,e,i){let r=zI(n),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=V6(null,n,t,e,i),e=Qd(e,t.attrs,i),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==r)if(e=V6(r,n,t,e,i),o===null){let d=I5(n,t,i);d!==void 0&&Array.isArray(d)&&(d=V6(null,n,t,d[1],i),d=Qd(d,t.attrs,i),O5(n,t,i,d))}else o=R5(n,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),e}function I5(n,t,e){let i=e?t.classBindings:t.styleBindings;if(Ku(i)!==0)return n[Tl(i)]}function O5(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[Tl(r)]=i}function R5(n,t,e){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=Qd(i,s,e)}return Qd(i,t.attrs,e)}function V6(n,t,e,i,r){let o=null,s=e.directiveEnd,u=e.directiveStylingLast;for(u===-1?u=e.directiveStart:u++;u<s&&(o=t[u],i=Qd(i,o.hostAttrs,r),o!==n);)u++;return n!==null&&(e.directiveStylingLast=u),i}function Qd(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Lp(n,s,e?!0:t[++o]))}return n===void 0?null:n}function k5(n,t,e){if(e==null||e==="")return ur;let i=[],r=Yp(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&t(i,r);return i}function F5(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&Lp(n,i,e)}function N5(n,t,e,i,r,o,s,u){r===er&&(r=ur);let d=0,p=0,_=0<r.length?r[0]:null,m=0<o.length?o[0]:null;for(;_!==null||m!==null;){let y=d<r.length?r[d+1]:void 0,b=p<o.length?o[p+1]:void 0,M=null,O;_===m?(d+=2,p+=2,y!==b&&(M=m,O=b)):m===null||_!==null&&_<m?(d+=2,M=_):(p+=2,M=m,O=b),M!==null&&c4(n,t,e,i,M,O,s,u),_=d<r.length?r[d]:null,m=p<o.length?o[p]:null}}function c4(n,t,e,i,r,o,s,u){if(!(t.type&3))return;let d=n.data,p=d[u+1],_=C5(p)?Uw(d,t,e,r,Ku(p),s):void 0;if(!Op(_)){Op(o)||y5(p)&&(o=Uw(d,null,e,r,u,s));let m=CM(Vs(),e);zR(i,s,m,r,o)}}function Uw(n,t,e,i,r,o){let s=t===null,u;for(;r>0;){let d=n[r],p=Array.isArray(d),_=p?d[1]:d,m=_===null,y=e[r+1];y===er&&(y=m?ur:void 0);let b=m?T6(y,i):_===i?y:void 0;if(p&&!Op(b)&&(b=T6(d,i)),Op(b)&&(u=b,s))return u;let M=n[r+1];r=s?Tl(M):Ku(M)}if(t!==null){let d=o?t.residualClasses:t.residualStyles;d!=null&&(u=T6(d,i))}return u}function Op(n){return n!==void 0}function L5(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=cr(Yp(n)))),n}function d4(n,t){return(n.flags&(t?8:16))!==0}function f4(n,t,e){let i=zt(),r=A1(i,n,t,e);a4(Lp,o4,r,!0)}function a(n,t,e,i){let r=zt(),o=gi(),s=fr+n,u=r[ti],d=o.firstCreatePass?jS(s,o,r,t,m1,qy(),e,i):o.data[s],p=V5(o,r,d,u,t,n);r[s]=p;let _=Bp(d);return Dl(d,!0),_S(u,p,d),!ES(d)&&Gp()&&Jp(o,r,p,d),(DI()===0||_)&&oc(p,r),PI(),_&&(Zp(o,r,d),l1(o,d,r)),i!==null&&h1(r,d),a}function l(){let n=pr();Xy()?TM():(n=n.parent,Dl(n,!1));let t=n;RI(t)&&kI(),II();let e=gi();return e.firstCreatePass&&WS(e,t),t.classesWithoutHost!=null&&YI(t)&&Py(e,t,zt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&qI(t)&&Py(e,t,zt(),t.stylesWithoutHost,!1),l}function D(n,t,e,i){return a(n,t,e,i),l(),D}var V5=(n,t,e,i,r,o)=>($p(!0),mS(i,r,WI()));function U5(n,t,e,i,r){let o=t.consts,s=$u(o,i),u=em(t,n,8,"ng-container",s);s!==null&&_y(u,s,!0);let d=$u(o,r);return qy()&&C1(t,e,u,d,m1),u.mergedAttrs=Yu(u.mergedAttrs,u.attrs),t.queries!==null&&t.queries.elementStart(t,u),u}function va(n,t,e){let i=zt(),r=gi(),o=n+fr,s=r.firstCreatePass?U5(o,r,i,t,e):r.data[o];Dl(s,!0);let u=B5(r,i,s,n);return i[o]=u,Gp()&&Jp(r,i,u,s),oc(u,i),Bp(s)&&(Zp(r,i,s),l1(r,s,i)),e!=null&&h1(i,s),va}function xa(){let n=pr(),t=gi();return Xy()?TM():(n=n.parent,Dl(n,!1)),t.firstCreatePass&&(Qy(t,n),jy(n)&&t.queries.elementEnd(n)),xa}var B5=(n,t,e,i)=>($p(!0),YO(t[ti],""));function Se(){return zt()}var ml=void 0;function z5(n){let t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&e===0?1:5}var H5=["en",[["a","p"],["AM","PM"],ml],[["AM","PM"],ml,ml],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ml,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ml,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ml,"{1} 'at' {0}",ml],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",z5],U6={};function Or(n){let t=j5(n),e=Bw(t);if(e)return e;let i=t.split("-")[0];if(e=Bw(i),e)return e;if(i==="en")return H5;throw new tt(701,!1)}function Bw(n){return n in U6||(U6[n]=jd.ng&&jd.ng.common&&jd.ng.common.locales&&jd.ng.common.locales[n]),U6[n]}var ni=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(ni||{});function j5(n){return n.toLowerCase().replace(/_/g,"-")}var Rp="en-US";var W5=Rp;function G5(n){typeof n=="string"&&(W5=n.toLowerCase().replace(/_/g,"-"))}function zw(n,t,e){return function i(r){if(r===Function)return e;let o=ec(n)?Xo(n.index,t):t;b1(o,5);let s=t[dr],u=Hw(t,s,e,r),d=i.__ngNextListenerFn__;for(;d;)u=Hw(t,s,d,r)&&u,d=d.__ngNextListenerFn__;return u}}function Hw(n,t,e,i){let r=tn(null);try{return An(6,t,e),e(i)!==!1}catch(o){return $5(n,o),!1}finally{An(7,t,e),tn(r)}}function $5(n,t){let e=n[Wu],i=e?e.get(Zo,null):null;i&&i.handleError(t)}function jw(n,t,e,i,r,o){let s=t[e],u=t[Yt],p=u.data[e].outputs[i],_=s[p],m=u.firstCreatePass?Yy(u):null,y=$y(t),b=_.subscribe(o),M=y.length;y.push(o,b),m&&m.push(r,n.index,M,-(M+1))}function R(n,t,e,i){let r=zt(),o=gi(),s=pr();return h4(o,r,r[ti],s,n,t,i),R}function Y5(n,t,e,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===e&&r[o+1]===i){let u=t[_p],d=r[o+2];return u.length>d?u[d]:null}typeof s=="string"&&(o+=2)}return null}function h4(n,t,e,i,r,o,s){let u=Bp(i),p=n.firstCreatePass?Yy(n):null,_=$y(t),m=!0;if(i.type&3||s){let y=Qo(i,t),b=s?s(y):y,M=_.length,O=s?w=>s(qo(w[i.index])):i.index,E=null;if(!s&&u&&(E=Y5(n,t,r,i.index)),E!==null){let w=E.__ngLastListenerFn__||E;w.__ngNextListenerFn__=o,E.__ngLastListenerFn__=o,m=!1}else{o=zw(i,t,o),FO(t,b,r,o);let w=e.listen(b,r,o);_.push(o,w),p&&p.push(r,O,M,M+1)}}else o=zw(i,t,o);if(m){let y=i.outputs?.[r],b=i.hostDirectiveOutputs?.[r];if(b&&b.length)for(let M=0;M<b.length;M+=2){let O=b[M],E=b[M+1];jw(i,t,O,E,r,o)}if(y&&y.length)for(let M of y)jw(i,t,M,r,r,o)}}function T(n=1){return jI(n)}function T1(n,t,e){return p4(n,"",t,"",e),T1}function p4(n,t,e,i,r){let o=zt(),s=A1(o,t,e,i);if(s!==er){let u=gi(),d=Wp();p1(u,d,o,n,s,o[ti],r,!1)}return p4}function im(n,t,e){jk(n,t,e)}function l0(n){let t=zt(),e=gi(),i=IM();Zy(i+1);let r=w1(e,i);if(n.dirty&&MI(t)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=$k(t,i);n.reset(o,_O),n.notifyOnChanges()}return!0}return!1}function u0(){return zk(zt(),IM())}function c0(n){let t=NI();return Wy(t,fr+n)}function c(n,t=""){let e=zt(),i=gi(),r=n+fr,o=i.firstCreatePass?em(i,r,1,t,null):i.data[r],s=q5(i,e,o,t,n);e[r]=s,Gp()&&Jp(i,e,s,o),Dl(o,!1)}var q5=(n,t,e,i,r)=>($p(!0),GO(t[ti],i));function $(n){return Z("",n,""),$}function Z(n,t,e){let i=zt(),r=A1(i,n,t,e);return r!==er&&D1(i,Vs(),r),Z}function Jn(n,t,e,i,r){let o=zt(),s=v5(o,n,t,e,i,r);return s!==er&&D1(o,Vs(),s),Jn}function Mo(n,t,e,i,r,o,s){let u=zt(),d=x5(u,n,t,e,i,r,o,s);return d!==er&&D1(u,Vs(),d),Mo}function D1(n,t,e){let i=CM(t,n);$O(n[ti],i,e)}function xe(n,t,e){nS(t)&&(t=t());let i=zt(),r=Hp();if(Ko(i,r,t)){let o=gi(),s=Wp();p1(o,s,i,n,t,i[ti],e,!1)}return xe}function be(n,t){let e=nS(n);return e&&n.set(t),e}function ye(n,t){let e=zt(),i=gi(),r=pr();return h4(i,e,e[ti],r,n,t),ye}function X5(n,t,e){let i=gi();if(i.firstCreatePass){let r=Yo(n);Iy(e,i.data,i.blueprint,r,!0),Iy(t,i.data,i.blueprint,r,!1)}}function Iy(n,t,e,i,r){if(n=Ki(n),Array.isArray(n))for(let o=0;o<n.length;o++)Iy(n[o],t,e,i,r);else{let o=gi(),s=zt(),u=pr(),d=ju(n)?n:Ki(n.provide),p=pM(n),_=u.providerIndexes&1048575,m=u.directiveStart,y=u.providerIndexes>>20;if(ju(n)||!n.multi){let b=new Sl(p,r,Te),M=z6(d,t,r?_:_+y,m);M===-1?(ey(Mp(u,s),o,d),B6(o,n,t.length),t.push(d),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),e.push(b),s.push(b)):(e[M]=b,s[M]=b)}else{let b=z6(d,t,_+y,m),M=z6(d,t,_,_+y),O=b>=0&&e[b],E=M>=0&&e[M];if(r&&!E||!r&&!O){ey(Mp(u,s),o,d);let w=K5(r?J5:Z5,e.length,r,i,p);!r&&E&&(e[M].providerFactory=w),B6(o,n,t.length,0),t.push(d),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),e.push(w),s.push(w)}else{let w=m4(e[r?M:b],p,!r&&i);B6(o,n,b>-1?b:M,w)}!r&&i&&E&&e[M].componentProviders++}}}function B6(n,t,e,i){let r=ju(t),o=cI(t);if(r||o){let d=(o?Ki(t.useClass):t).prototype.ngOnDestroy;if(d){let p=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let _=p.indexOf(e);_===-1?p.push(e,[i,d]):p[_+1].push(i,d)}else p.push(e,d)}}}function m4(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function z6(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function Z5(n,t,e,i,r){return Oy(this.multi,[])}function J5(n,t,e,i,r){let o=this.multi,s;if(this.providerFactory){let u=this.providerFactory.componentProviders,d=Zd(i,i[Yt],this.providerFactory.index,r);s=d.slice(0,u),Oy(o,s);for(let p=u;p<d.length;p++)s.push(d[p])}else s=[],Oy(o,s);return s}function Oy(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function K5(n,t,e,i,r){let o=new Sl(n,e,Te);return o.multi=[],o.index=t,o.componentProviders=0,m4(o,r,i&&!e),o}function Rr(n,t=[]){return e=>{e.providersResolver=(i,r)=>X5(i,r?r(n):n,t)}}function ya(n,t,e){let i=r0()+n,r=zt();return r[i]===er?a0(r,i,e?t.call(e):t()):a5(r,i)}function g4(n,t,e,i,r,o){return tF(zt(),r0(),n,t,e,i,r,o)}function _4(n,t,e,i,r,o,s){return nF(zt(),r0(),n,t,e,i,r,o,s)}function rm(n,t){let e=n[t];return e===er?void 0:e}function Q5(n,t,e,i,r,o){let s=t+e;return Ko(n,s,r)?a0(n,s+1,o?i.call(o,r):i(r)):rm(n,s+1)}function eF(n,t,e,i,r,o,s){let u=t+e;return Kd(n,u,r,o)?a0(n,u+2,s?i.call(s,r,o):i(r,o)):rm(n,u+2)}function tF(n,t,e,i,r,o,s,u){let d=t+e;return JS(n,d,r,o,s)?a0(n,d+3,u?i.call(u,r,o,s):i(r,o,s)):rm(n,d+3)}function nF(n,t,e,i,r,o,s,u,d){let p=t+e;return l5(n,p,r,o,s,u)?a0(n,p+4,d?i.call(d,r,o,s,u):i(r,o,s,u)):rm(n,p+4)}function Ln(n,t){let e=gi(),i,r=n+fr;e.firstCreatePass?(i=iF(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let o=i.factory||(i.factory=vl(i.type,!0)),s,u=lr(Te);try{let d=wp(!1),p=o();return wp(d),wI(e,zt(),r,p),p}finally{lr(u)}}function iF(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function eo(n,t,e){let i=n+fr,r=zt(),o=Wy(r,i);return v4(r,i)?Q5(r,r0(),t,o.transform,e,o):o.transform(e)}function Hi(n,t,e,i){let r=n+fr,o=zt(),s=Wy(o,r);return v4(o,r)?eF(o,r0(),t,s.transform,e,i,s):s.transform(e,i)}function v4(n,t){return n[Yt].data[t].pure}function om(n,t){return Qp(n,t)}var Ry=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},x4=(()=>{class n{compileModuleSync(e){return new Ey(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=cM(e),o=yS(r.declarations).reduce((s,u)=>{let d=yl(u);return d&&s.push(new Zu(d)),s},[]);return new Ry(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var rF=(()=>{class n{zone=Re(Zn);changeDetectionScheduler=Re(qu);applicationRef=Re(Al);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oF({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new Zn(yt(Ie({},sF()),{scheduleInRootZone:e})),[{provide:Zn,useFactory:n},{provide:Yd,multi:!0,useFactory:()=>{let i=Re(rF,{optional:!0});return()=>i.initialize()}},{provide:Yd,multi:!0,useFactory:()=>{let i=Re(aF);return()=>{i.initialize()}}},t===!0?{provide:JM,useValue:!0}:[],{provide:KM,useValue:e??XM}]}function sF(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var aF=(()=>{class n{subscription=new fi;initialized=!1;zone=Re(Zn);pendingTasks=Re(ga);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Zn.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Zn.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lF=(()=>{class n{appRef=Re(Al);taskService=Re(ga);ngZone=Re(Zn);zonelessEnabled=Re(ZM);tracing=Re(ac,{optional:!0});disableScheduling=Re(JM,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new fi;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ep):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Re(KM,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof oy||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let i=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?Cw:QM;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ep+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Cw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uF(){return typeof $localize<"u"&&$localize.locale||Rp}var d0=new at("",{providedIn:"root",factory:()=>Re(d0,Nt.Optional|Nt.SkipSelf)||uF()});var ky=new at(""),cF=new at("");function Hd(n){return!n.moduleRef}function dF(n){let t=Hd(n)?n.r3Injector:n.moduleRef.injector,e=t.get(Zn);return e.run(()=>{Hd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(Zo,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:o=>{i.handleError(o)}})}),Hd(n)){let o=()=>t.destroy(),s=n.platformInjector.get(ky);s.add(o),t.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(ky);s.add(o),n.moduleRef.onDestroy(()=>{up(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return hF(i,e,()=>{let o=t.get(n4);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(d0,Rp);if(G5(s||Rp),!t.get(cF,!0))return Hd(n)?t.get(Al):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Hd(n)){let d=t.get(Al);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return fF(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function fF(n,t){let e=n.injector.get(Al);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new tt(-403,!1);t.push(n)}function hF(n,t,e){try{let i=e();return Pl(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}var cp=null;function pF(n=[],t){return Kr.create({name:t,providers:[{provide:Vp,useValue:"platform"},{provide:ky,useValue:new Set([()=>cp=null])},...n]})}function mF(n=[]){if(cp)return cp;let t=pF(n);return cp=t,p5(),gF(t),t}function gF(n){let t=n.get(r1,null);hr(n,()=>{t?.forEach(e=>e())})}var Il=(()=>{class n{static __NG_ELEMENT_ID__=_F}return n})();function _F(n){return vF(pr(),zt(),(n&16)===16)}function vF(n,t,e){if(ec(n)&&!e){let i=Xo(n.index,t);return new Jd(i,i)}else if(n.type&175){let i=t[$o];return new Jd(i,t)}return null}var Fy=class{constructor(){}supports(t){return ZS(t)}create(t){return new Ny(t)}},xF=(n,t)=>t,Ny=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||xF}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){let s=!i||e&&e.currentIndex<Ww(i,r,o)?e:i,u=Ww(s,r,o),d=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(e=e._next,s.previousIndex==null)r++;else{o||(o=[]);let p=u-r,_=d-r;if(p!=_){for(let y=0;y<p;y++){let b=y<o.length?o[y]:o[y]=0,M=b+y;_<=M&&M<p&&(o[y]=b+1)}let m=s.previousIndex;o[m]=_-p}}u!==d&&t(s,u,d)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!ZS(t))throw new tt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,o,s;if(Array.isArray(t)){this.length=t.length;for(let u=0;u<this.length;u++)o=t[u],s=this._trackByFn(u,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,u),i=!0):(i&&(e=this._verifyReinsertion(e,o,s,u)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else r=0,o5(t,u=>{s=this._trackByFn(r,u),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,u,s,r),i=!0):(i&&(e=this._verifyReinsertion(e,u,s,r)),Object.is(e.item,u)||this._addIdentityChange(e,u)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):t=this._addAfter(new Ly(e,i),o,r)),t}_verifyReinsertion(t,e,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,o=t._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new kp),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new kp),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Ly=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},Vy=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},kp=class{map=new Map;put(t){let e=t.trackById,i=this.map.get(e);i||(i=new Vy,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Ww(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}function Gw(){return new P1([new Fy])}var P1=(()=>{class n{factories;static \u0275prov=je({token:n,providedIn:"root",factory:Gw});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||Gw()),deps:[[n,new QP,new KP]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new tt(901,!1)}}return n})();function y4(n){let{rootComponent:t,appProviders:e,platformProviders:i,platformRef:r}=n;An(8);try{let o=r?.injector??mF(i),s=[oF({}),{provide:qu,useExisting:lF},...e||[]],u=new Ip({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return dF({r3Injector:u.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{An(9)}}function f0(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ts(n){return f6(n)}function uc(n,t){return l6(n,t?.equal)}var $w=class{[Zr];constructor(t){this[Zr]=t}destroy(){this[Zr].destroy()}};function b4(n){let t=yl(n);if(!t)return null;let e=new Zu(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var _i=new at("");var M4=null;function to(){return M4}function I1(n){M4??=n}var h0=class{},p0=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:()=>Re(S4),providedIn:"platform"})}return n})(),O1=new at(""),S4=(()=>{class n extends p0{_location;_history;_doc=Re(_i);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return to().getBaseHref(this._doc)}onPopState(e){let i=to().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=to().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function sm(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function C4(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function So(n){return n&&n[0]!=="?"?`?${n}`:n}var Bs=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:()=>Re(lm),providedIn:"root"})}return n})(),am=new at(""),lm=(()=>{class n extends Bs{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Re(_i).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return sm(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+So(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+So(o));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+So(o));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(Ve(p0),Ve(am,8))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ba=(()=>{class n{_subject=new hi;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=CF(C4(w4(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+So(i))}normalize(e){return n.stripTrailingSlash(bF(this._basePath,w4(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+So(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+So(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=So;static joinWithSlash=sm;static stripTrailingSlash=C4;static \u0275fac=function(i){return new(i||n)(Ve(Bs))};static \u0275prov=je({token:n,factory:()=>yF(),providedIn:"root"})}return n})();function yF(){return new ba(Ve(Bs))}function bF(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function w4(n){return n.replace(/\/index.html$/,"")}function CF(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var U1=(()=>{class n extends Bs{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=sm(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+So(o))||this._platformLocation.pathname;this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+So(o))||this._platformLocation.pathname;this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(Ve(p0),Ve(am,8))};static \u0275prov=je({token:n,factory:n.\u0275fac})}return n})();var B1=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(B1||{});var ji=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(ji||{}),Dn=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Dn||{}),mr=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(mr||{}),gr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function I4(n){return Or(n)[ni.LocaleId]}function O4(n,t,e){let i=Or(n),r=[i[ni.DayPeriodsFormat],i[ni.DayPeriodsStandalone]],o=no(r,t);return no(o,e)}function R4(n,t,e){let i=Or(n),r=[i[ni.DaysFormat],i[ni.DaysStandalone]],o=no(r,t);return no(o,e)}function k4(n,t,e){let i=Or(n),r=[i[ni.MonthsFormat],i[ni.MonthsStandalone]],o=no(r,t);return no(o,e)}function F4(n,t){let i=Or(n)[ni.Eras];return no(i,t)}function m0(n,t){let e=Or(n);return no(e[ni.DateFormat],t)}function g0(n,t){let e=Or(n);return no(e[ni.TimeFormat],t)}function _0(n,t){let i=Or(n)[ni.DateTimeFormat];return no(i,t)}function ns(n,t){let e=Or(n),i=e[ni.NumberSymbols][t];if(typeof i>"u"){if(t===gr.CurrencyDecimal)return e[ni.NumberSymbols][gr.Decimal];if(t===gr.CurrencyGroup)return e[ni.NumberSymbols][gr.Group]}return i}function N4(n,t){return Or(n)[ni.NumberFormats][t]}function L4(n){if(!n[ni.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[ni.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function V4(n){let t=Or(n);return L4(t),(t[ni.ExtraData][2]||[]).map(i=>typeof i=="string"?R1(i):[R1(i[0]),R1(i[1])])}function U4(n,t,e){let i=Or(n);L4(i);let r=[i[ni.ExtraData][0],i[ni.ExtraData][1]],o=no(r,t)||[];return no(o,e)||[]}function no(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function R1(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var MF=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,um={},SF=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function B4(n,t,e,i){let r=kF(n);t=zs(e,t)||t;let s=[],u;for(;t;)if(u=SF.exec(t),u){s=s.concat(u.slice(1));let _=s.pop();if(!_)break;t=_}else{s.push(t);break}let d=r.getTimezoneOffset();i&&(d=H4(i,d),r=RF(r,i));let p="";return s.forEach(_=>{let m=IF(_);p+=m?m(r,e,d):_==="''"?"'":_.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),p}function pm(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function zs(n,t){let e=I4(n);if(um[e]??={},um[e][t])return um[e][t];let i="";switch(t){case"shortDate":i=m0(n,mr.Short);break;case"mediumDate":i=m0(n,mr.Medium);break;case"longDate":i=m0(n,mr.Long);break;case"fullDate":i=m0(n,mr.Full);break;case"shortTime":i=g0(n,mr.Short);break;case"mediumTime":i=g0(n,mr.Medium);break;case"longTime":i=g0(n,mr.Long);break;case"fullTime":i=g0(n,mr.Full);break;case"short":let r=zs(n,"shortTime"),o=zs(n,"shortDate");i=cm(_0(n,mr.Short),[r,o]);break;case"medium":let s=zs(n,"mediumTime"),u=zs(n,"mediumDate");i=cm(_0(n,mr.Medium),[s,u]);break;case"long":let d=zs(n,"longTime"),p=zs(n,"longDate");i=cm(_0(n,mr.Long),[d,p]);break;case"full":let _=zs(n,"fullTime"),m=zs(n,"fullDate");i=cm(_0(n,mr.Full),[_,m]);break}return i&&(um[e][t]=i),i}function cm(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function Eo(n,t,e="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return i&&(s=s.slice(s.length-t)),o+s}function EF(n,t){return Eo(n,3).substring(0,t)}function vi(n,t,e=0,i=!1,r=!1){return function(o,s){let u=AF(n,o);if((e>0||u>-e)&&(u+=e),n===3)u===0&&e===-12&&(u=12);else if(n===6)return EF(u,t);let d=ns(s,gr.MinusSign);return Eo(u,t,d,i,r)}}function AF(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Vn(n,t,e=ji.Format,i=!1){return function(r,o){return TF(r,o,n,t,e,i)}}function TF(n,t,e,i,r,o){switch(e){case 2:return k4(t,r,i)[n.getMonth()];case 1:return R4(t,r,i)[n.getDay()];case 0:let s=n.getHours(),u=n.getMinutes();if(o){let p=V4(t),_=U4(t,r,i),m=p.findIndex(y=>{if(Array.isArray(y)){let[b,M]=y,O=s>=b.hours&&u>=b.minutes,E=s<M.hours||s===M.hours&&u<M.minutes;if(b.hours<M.hours){if(O&&E)return!0}else if(O||E)return!0}else if(y.hours===s&&y.minutes===u)return!0;return!1});if(m!==-1)return _[m]}return O4(t,r,i)[s<12?0:1];case 3:return F4(t,i)[n.getFullYear()<=0?0:1];default:let d=e;throw new Error(`unexpected translation type ${d}`)}}function dm(n){return function(t,e,i){let r=-1*i,o=ns(e,gr.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+Eo(s,2,o)+Eo(Math.abs(r%60),2,o);case 1:return"GMT"+(r>=0?"+":"")+Eo(s,1,o);case 2:return"GMT"+(r>=0?"+":"")+Eo(s,2,o)+":"+Eo(Math.abs(r%60),2,o);case 3:return i===0?"Z":(r>=0?"+":"")+Eo(s,2,o)+":"+Eo(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var DF=0,hm=4;function PF(n){let t=pm(n,DF,1).getDay();return pm(n,0,1+(t<=hm?hm:hm+7)-t)}function z4(n){let t=n.getDay(),e=t===0?-3:hm-t;return pm(n.getFullYear(),n.getMonth(),n.getDate()+e)}function k1(n,t=!1){return function(e,i){let r;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();r=1+Math.floor((s+o)/7)}else{let o=z4(e),s=PF(o.getFullYear()),u=o.getTime()-s.getTime();r=1+Math.round(u/6048e5)}return Eo(r,n,ns(i,gr.MinusSign))}}function fm(n,t=!1){return function(e,i){let o=z4(e).getFullYear();return Eo(o,n,ns(i,gr.MinusSign),t)}}var F1={};function IF(n){if(F1[n])return F1[n];let t;switch(n){case"G":case"GG":case"GGG":t=Vn(3,Dn.Abbreviated);break;case"GGGG":t=Vn(3,Dn.Wide);break;case"GGGGG":t=Vn(3,Dn.Narrow);break;case"y":t=vi(0,1,0,!1,!0);break;case"yy":t=vi(0,2,0,!0,!0);break;case"yyy":t=vi(0,3,0,!1,!0);break;case"yyyy":t=vi(0,4,0,!1,!0);break;case"Y":t=fm(1);break;case"YY":t=fm(2,!0);break;case"YYY":t=fm(3);break;case"YYYY":t=fm(4);break;case"M":case"L":t=vi(1,1,1);break;case"MM":case"LL":t=vi(1,2,1);break;case"MMM":t=Vn(2,Dn.Abbreviated);break;case"MMMM":t=Vn(2,Dn.Wide);break;case"MMMMM":t=Vn(2,Dn.Narrow);break;case"LLL":t=Vn(2,Dn.Abbreviated,ji.Standalone);break;case"LLLL":t=Vn(2,Dn.Wide,ji.Standalone);break;case"LLLLL":t=Vn(2,Dn.Narrow,ji.Standalone);break;case"w":t=k1(1);break;case"ww":t=k1(2);break;case"W":t=k1(1,!0);break;case"d":t=vi(2,1);break;case"dd":t=vi(2,2);break;case"c":case"cc":t=vi(7,1);break;case"ccc":t=Vn(1,Dn.Abbreviated,ji.Standalone);break;case"cccc":t=Vn(1,Dn.Wide,ji.Standalone);break;case"ccccc":t=Vn(1,Dn.Narrow,ji.Standalone);break;case"cccccc":t=Vn(1,Dn.Short,ji.Standalone);break;case"E":case"EE":case"EEE":t=Vn(1,Dn.Abbreviated);break;case"EEEE":t=Vn(1,Dn.Wide);break;case"EEEEE":t=Vn(1,Dn.Narrow);break;case"EEEEEE":t=Vn(1,Dn.Short);break;case"a":case"aa":case"aaa":t=Vn(0,Dn.Abbreviated);break;case"aaaa":t=Vn(0,Dn.Wide);break;case"aaaaa":t=Vn(0,Dn.Narrow);break;case"b":case"bb":case"bbb":t=Vn(0,Dn.Abbreviated,ji.Standalone,!0);break;case"bbbb":t=Vn(0,Dn.Wide,ji.Standalone,!0);break;case"bbbbb":t=Vn(0,Dn.Narrow,ji.Standalone,!0);break;case"B":case"BB":case"BBB":t=Vn(0,Dn.Abbreviated,ji.Format,!0);break;case"BBBB":t=Vn(0,Dn.Wide,ji.Format,!0);break;case"BBBBB":t=Vn(0,Dn.Narrow,ji.Format,!0);break;case"h":t=vi(3,1,-12);break;case"hh":t=vi(3,2,-12);break;case"H":t=vi(3,1);break;case"HH":t=vi(3,2);break;case"m":t=vi(4,1);break;case"mm":t=vi(4,2);break;case"s":t=vi(5,1);break;case"ss":t=vi(5,2);break;case"S":t=vi(6,1);break;case"SS":t=vi(6,2);break;case"SSS":t=vi(6,3);break;case"Z":case"ZZ":case"ZZZ":t=dm(0);break;case"ZZZZZ":t=dm(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=dm(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=dm(2);break;default:return null}return F1[n]=t,t}function H4(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function OF(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function RF(n,t,e){let r=n.getTimezoneOffset(),o=H4(t,r);return OF(n,-1*(o-r))}function kF(n){if(E4(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,s=1]=n.split("-").map(u=>+u);return pm(r,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(MF))return FF(i)}let t=new Date(n);if(!E4(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function FF(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,u=Number(n[5]||0)-i,d=Number(n[6]||0),p=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,u,d,p),t}function E4(n){return n instanceof Date&&!isNaN(n.valueOf())}var NF=/^(\d+)?\.((\d+)(-(\d+))?)?$/,A4=22,mm=".",v0="0",LF=";",VF=",",N1="#";function UF(n,t,e,i,r,o,s=!1){let u="",d=!1;if(!isFinite(n))u=ns(e,gr.Infinity);else{let p=HF(n);s&&(p=zF(p));let _=t.minInt,m=t.minFrac,y=t.maxFrac;if(o){let j=o.match(NF);if(j===null)throw new Error(`${o} is not a valid digit info`);let H=j[1],W=j[3],G=j[5];H!=null&&(_=L1(H)),W!=null&&(m=L1(W)),G!=null?y=L1(G):W!=null&&m>y&&(y=m)}jF(p,m,y);let b=p.digits,M=p.integerLen,O=p.exponent,E=[];for(d=b.every(j=>!j);M<_;M++)b.unshift(0);for(;M<0;M++)b.unshift(0);M>0?E=b.splice(M,b.length):(E=b,b=[0]);let w=[];for(b.length>=t.lgSize&&w.unshift(b.splice(-t.lgSize,b.length).join(""));b.length>t.gSize;)w.unshift(b.splice(-t.gSize,b.length).join(""));b.length&&w.unshift(b.join("")),u=w.join(ns(e,i)),E.length&&(u+=ns(e,r)+E.join("")),O&&(u+=ns(e,gr.Exponential)+"+"+O)}return n<0&&!d?u=t.negPre+u+t.negSuf:u=t.posPre+u+t.posSuf,u}function j4(n,t,e){let i=N4(t,B1.Decimal),r=BF(i,ns(t,gr.MinusSign));return UF(n,r,t,gr.Group,gr.Decimal,e)}function BF(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(LF),r=i[0],o=i[1],s=r.indexOf(mm)!==-1?r.split(mm):[r.substring(0,r.lastIndexOf(v0)+1),r.substring(r.lastIndexOf(v0)+1)],u=s[0],d=s[1]||"";e.posPre=u.substring(0,u.indexOf(N1));for(let _=0;_<d.length;_++){let m=d.charAt(_);m===v0?e.minFrac=e.maxFrac=_+1:m===N1?e.maxFrac=_+1:e.posSuf+=m}let p=u.split(VF);if(e.gSize=p[1]?p[1].length:0,e.lgSize=p[2]||p[1]?(p[2]||p[1]).length:0,o){let _=r.length-e.posPre.length-e.posSuf.length,m=o.indexOf(N1);e.negPre=o.substring(0,m).replace(/'/g,""),e.negSuf=o.slice(m+_).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function zF(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function HF(n){let t=Math.abs(n)+"",e=0,i,r,o,s,u;for((r=t.indexOf(mm))>-1&&(t=t.replace(mm,"")),(o=t.search(/e/i))>0?(r<0&&(r=o),r+=+t.slice(o+1),t=t.substring(0,o)):r<0&&(r=t.length),o=0;t.charAt(o)===v0;o++);if(o===(u=t.length))i=[0],r=1;else{for(u--;t.charAt(u)===v0;)u--;for(r-=o,i=[],s=0;o<=u;o++,s++)i[s]=Number(t.charAt(o))}return r>A4&&(i=i.splice(0,A4-1),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}function jF(n,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(t,r),e),s=o+n.integerLen,u=i[s];if(s>0){i.splice(Math.max(n.integerLen,s));for(let m=s;m<i.length;m++)i[m]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let m=1;m<s;m++)i[m]=0}if(u>=5)if(s-1<0){for(let m=0;m>s;m--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let d=o!==0,p=t+n.integerLen,_=i.reduceRight(function(m,y,b,M){return y=y+m,M[b]=y<10?y:y-10,d&&(M[b]===0&&b>=p?M.pop():d=!1),y>=10?1:0},0);_&&(i.unshift(_),n.integerLen++)}function L1(n){let t=parseInt(n);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+n);return t}var V1=/\s+/,T4=[],Ol=(()=>{class n{_ngEl;_renderer;initialClasses=T4;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(V1):T4}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(V1):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(V1).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(Te(Ir),Te(Us))};static \u0275dir=Tn({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var gm=class{$implicit;ngForOf;index;count;constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ii=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new gm(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,s),D4(u,r)}});for(let r=0,o=i.length;r<o;r++){let u=i.get(r).context;u.index=r,u.count=o,u.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);D4(o,r)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(Te(_a),Te(El),Te(P1))};static \u0275dir=Tn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function D4(n,t){n.context.$implicit=t.item}var Wn=(()=>{class n{_viewContainer;_context=new _m;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){P4(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){P4(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(Te(_a),Te(El))};static \u0275dir=Tn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),_m=class{$implicit=null;ngIf=null};function P4(n,t){if(n&&!n.createEmbeddedView)throw new tt(2020,!1)}function W4(n,t){return new tt(2100,!1)}var WF="mediumDate",G4=new at(""),$4=new at(""),Ao=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,o){if(e==null||e===""||e!==e)return null;try{let s=i??this.defaultOptions?.dateFormat??WF,u=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return B4(e,s,o||this.locale,u)}catch(s){throw W4(n,s.message)}}static \u0275fac=function(i){return new(i||n)(Te(d0,16),Te(G4,24),Te($4,24))};static \u0275pipe=S1({name:"date",type:n,pure:!0})}return n})();var x0=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,i,r){if(!GF(e))return null;r||=this._locale;try{let o=$F(e);return j4(o,r,i)}catch(o){throw W4(n,o.message)}}static \u0275fac=function(i){return new(i||n)(Te(d0,16))};static \u0275pipe=S1({name:"number",type:n,pure:!0})}return n})();function GF(n){return!(n==null||n===""||n!==n)}function $F(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var bn=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Co({type:n});static \u0275inj=yo({})}return n})();function y0(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,o]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var z1="browser",Y4="server";function vm(n){return n===Y4}var Rl=class{};var q4=(()=>{class n{static \u0275prov=je({token:n,providedIn:"root",factory:()=>new H1(Re(_i),window)})}return n})(),H1=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=qF(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function qF(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}var bm=new at(""),$1=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r,o){return this._findPluginFor(i).addEventListener(e,i,r,o)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new tt(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)(Ve(bm),Ve(Zn))};static \u0275prov=je({token:n,factory:n.\u0275fac})}return n})(),b0=class{_doc;constructor(t){this._doc=t}manager},xm="ng-app-id";function X4(n){for(let t of n)t.remove()}function Z4(n,t){let e=t.createElement("style");return e.textContent=n,e}function XF(n,t,e,i){let r=n.head?.querySelectorAll(`style[${xm}="${t}"],link[${xm}="${t}"]`);if(r)for(let o of r)o.removeAttribute(xm),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function W1(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Y1=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.isServer=vm(o),XF(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,Z4);i?.forEach(r=>this.addUsage(r,this.external,W1))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let o=i.get(e);o?o.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(X4(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])X4(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,Z4(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,W1(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(xm,this.appId),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Ve(_i),Ve(i1),Ve(o1,8),Ve(sc))};static \u0275prov=je({token:n,factory:n.\u0275fac})}return n})(),j1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},q1=/%COMP%/g;var K4="%COMP%",ZF=`_nghost-${K4}`,JF=`_ngcontent-${K4}`,KF=!0,QF=new at("",{providedIn:"root",factory:()=>KF});function eN(n){return JF.replace(q1,n)}function tN(n){return ZF.replace(q1,n)}function Q4(n,t){return t.map(e=>e.replace(q1,n))}var X1=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,o,s,u,d,p=null,_=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=u,this.ngZone=d,this.nonce=p,this.tracingService=_,this.platformIsServer=vm(u),this.defaultRenderer=new C0(e,s,d,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Jo.ShadowDom&&(i=yt(Ie({},i),{encapsulation:Jo.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof ym?r.applyToHost(e):r instanceof w0&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,u=this.ngZone,d=this.eventManager,p=this.sharedStylesHost,_=this.removeStylesOnCompDestroy,m=this.platformIsServer,y=this.tracingService;switch(i.encapsulation){case Jo.Emulated:o=new ym(d,p,i,this.appId,_,s,u,m,y);break;case Jo.ShadowDom:return new G1(d,p,e,i,s,u,this.nonce,m,y);default:o=new w0(d,p,i,_,s,u,m,y);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||n)(Ve($1),Ve(Y1),Ve(i1),Ve(QF),Ve(_i),Ve(sc),Ve(Zn),Ve(o1),Ve(ac,8))};static \u0275prov=je({token:n,factory:n.\u0275fac})}return n})(),C0=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,r,o){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(j1[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(J4(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(J4(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new tt(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let o=j1[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=j1[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(ks.DashCase|ks.Important)?t.style.setProperty(e,i,r&ks.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&ks.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i,r){if(typeof t=="string"&&(t=to().getGlobalEventTarget(this.doc,t),!t))throw new tt(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,e,o)),this.eventManager.addEventListener(t,e,o,r)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function J4(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var G1=class extends C0{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,i,r,o,s,u,d,p){super(t,o,s,d,p),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let _=r.styles;_=Q4(r.id,_);for(let y of _){let b=document.createElement("style");u&&b.setAttribute("nonce",u),b.textContent=y,this.shadowRoot.appendChild(b)}let m=r.getExternalStyles?.();if(m)for(let y of m){let b=W1(y,o);u&&b.setAttribute("nonce",u),this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},w0=class extends C0{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,r,o,s,u,d,p){super(t,o,s,u,d),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let _=i.styles;this.styles=p?Q4(p,_):_,this.styleUrls=i.getExternalStyles?.(p)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ym=class extends w0{contentAttr;hostAttr;constructor(t,e,i,r,o,s,u,d,p){let _=r+"-"+i.id;super(t,e,i,o,s,u,d,p,_),this.contentAttr=eN(_),this.hostAttr=tN(_)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}};var Cm=class n extends h0{supportsDOMEvents=!0;static makeCurrent(){I1(new n)}onAndCancel(t,e,i,r){return t.addEventListener(e,i,r),()=>{t.removeEventListener(e,i,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=nN();return e==null?null:iN(e)}resetBaseElement(){M0=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return y0(document.cookie,t)}},M0=null;function nN(){return M0=M0||document.head.querySelector("base"),M0?M0.getAttribute("href"):null}function iN(n){return new URL(n,document.baseURI).pathname}var rN=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:n.\u0275fac})}return n})(),tE=(()=>{class n extends b0{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,o){return e.addEventListener(i,r,o),()=>this.removeEventListener(e,i,r,o)}removeEventListener(e,i,r,o){return e.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(Ve(_i))};static \u0275prov=je({token:n,factory:n.\u0275fac})}return n})(),eE=["alt","control","meta","shift"],oN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},nE=(()=>{class n extends b0{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r,o){let s=n.parseEventName(i),u=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>to().onAndCancel(e,s.domEventName,u,o))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),s="code."),eE.forEach(p=>{let _=i.indexOf(p);_>-1&&(i.splice(_,1),s+=p+".")}),s+=o,i.length!=0||o.length===0)return null;let d={};return d.domEventName=r,d.fullKey=s,d}static matchEventFullKeyCode(e,i){let r=oN[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),eE.forEach(s=>{if(s!==r){let u=sN[s];u(e)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)(Ve(_i))};static \u0275prov=je({token:n,factory:n.\u0275fac})}return n})();function Z1(n,t,e){return y4(Ie({rootComponent:n,platformRef:e?.platformRef},aN(t)))}function aN(n){return{appProviders:[...fN,...n?.providers??[]],platformProviders:dN}}function lN(){Cm.makeCurrent()}function uN(){return new Zo}function cN(){return uS(document),document}var dN=[{provide:sc,useValue:z1},{provide:r1,useValue:lN,multi:!0},{provide:_i,useFactory:cN}];var fN=[{provide:Vp,useValue:"root"},{provide:Zo,useFactory:uN},{provide:bm,useClass:tE,multi:!0,deps:[_i]},{provide:bm,useClass:nE,multi:!0,deps:[_i]},X1,Y1,$1,{provide:Xu,useExisting:X1},{provide:Rl,useClass:rN},[]];var dc=class{},S0=class{},To=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),o=e.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(u=>o.indexOf(u)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(t,e){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Mm=class{encodeKey(t){return iE(t)}encodeValue(t){return iE(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function hN(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,u]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],d=e.get(s)||[];d.push(u),e.set(s,d)}),e}var pN=/%(\d[a-f0-9])/gi,mN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function iE(n){return encodeURIComponent(n).replace(pN,(t,e)=>mN[e]??t)}function wm(n){return`${n}`}var Gn=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new Mm,t.fromString){if(t.fromObject)throw new tt(2805,!1);this.map=hN(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(wm):[wm(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(wm(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(wm(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Sm=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function gN(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function rE(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function oE(n){return typeof Blob<"u"&&n instanceof Blob}function sE(n){return typeof FormData<"u"&&n instanceof FormData}function _N(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var aE="Content-Type",lE="Accept",uE="X-Request-URL",cE="text/plain",dE="application/json",vN=`${dE}, ${cE}, */*`,cc=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,i,r){this.url=e,this.method=t.toUpperCase();let o;if(gN(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new To,this.context??=new Sm,!this.params)this.params=new Gn,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let u=e.indexOf("?"),d=u===-1?"?":u<e.length-1?"&":"";this.urlWithParams=e+d+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||rE(this.body)||oE(this.body)||sE(this.body)||_N(this.body)?this.body:this.body instanceof Gn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||sE(this.body)?null:oE(this.body)?this.body.type||null:rE(this.body)?null:typeof this.body=="string"?cE:this.body instanceof Gn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?dE:null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,u=t.withCredentials??this.withCredentials,d=t.reportProgress??this.reportProgress,p=t.headers||this.headers,_=t.params||this.params,m=t.context??this.context;return t.setHeaders!==void 0&&(p=Object.keys(t.setHeaders).reduce((y,b)=>y.set(b,t.setHeaders[b]),p)),t.setParams&&(_=Object.keys(t.setParams).reduce((y,b)=>y.set(b,t.setParams[b]),_)),new n(e,i,s,{params:_,headers:p,context:m,reportProgress:d,responseType:r,withCredentials:u,transferCache:o})}},kl=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(kl||{}),fc=class{headers;status;statusText;url;ok;type;constructor(t,e=200,i="OK"){this.headers=t.headers||new To,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Em=class n extends fc{constructor(t={}){super(t)}type=kl.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},E0=class n extends fc{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=kl.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},A0=class extends fc{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},xN=200,yN=204;function J1(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Un=(()=>{class n{handler;constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof cc)o=e;else{let d;r.headers instanceof To?d=r.headers:d=new To(r.headers);let p;r.params&&(r.params instanceof Gn?p=r.params:p=new Gn({fromObject:r.params})),o=new cc(e,i,r.body!==void 0?r.body:null,{headers:d,context:r.context,params:p,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=xt(o).pipe(Wo(d=>this.handler.handle(d)));if(e instanceof cc||r.observe==="events")return s;let u=s.pipe(Ji(d=>d instanceof E0));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe(Ut(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new tt(2806,!1);return d.body}));case"blob":return u.pipe(Ut(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new tt(2807,!1);return d.body}));case"text":return u.pipe(Ut(d=>{if(d.body!==null&&typeof d.body!="string")throw new tt(2808,!1);return d.body}));case"json":default:return u.pipe(Ut(d=>d.body))}case"response":return u;default:throw new tt(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new Gn().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,J1(r,i))}post(e,i,r={}){return this.request("POST",e,J1(r,i))}put(e,i,r={}){return this.request("PUT",e,J1(r,i))}static \u0275fac=function(i){return new(i||n)(Ve(dc))};static \u0275prov=je({token:n,factory:n.\u0275fac})}return n})();var bN=new at("");function CN(n,t){return t(n)}function wN(n,t,e){return(i,r)=>hr(e,()=>t(i,o=>n(o,r)))}var fE=new at(""),hE=new at(""),pE=new at("",{providedIn:"root",factory:()=>!0});var Am=(()=>{class n extends dc{backend;injector;chain=null;pendingTasks=Re(ga);contributeToStability=Re(pE);constructor(e,i){super(),this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(fE),...this.injector.get(hE,[])]));this.chain=i.reduceRight((r,o)=>wN(r,o,this.injector),CN)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(pl(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(Ve(S0),Ve(Bi))};static \u0275prov=je({token:n,factory:n.\u0275fac})}return n})();var MN=/^\)\]\}',?\n/,SN=RegExp(`^${uE}:`,"m");function EN(n){return"responseURL"in n&&n.responseURL?n.responseURL:SN.test(n.getAllResponseHeaders())?n.getResponseHeader(uE):null}var K1=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new tt(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Nn(i.\u0275loadImpl()):xt(null)).pipe(ar(()=>new hn(o=>{let s=i.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((O,E)=>s.setRequestHeader(O,E.join(","))),e.headers.has(lE)||s.setRequestHeader(lE,vN),!e.headers.has(aE)){let O=e.detectContentTypeHeader();O!==null&&s.setRequestHeader(aE,O)}if(e.responseType){let O=e.responseType.toLowerCase();s.responseType=O!=="json"?O:"text"}let u=e.serializeBody(),d=null,p=()=>{if(d!==null)return d;let O=s.statusText||"OK",E=new To(s.getAllResponseHeaders()),w=EN(s)||e.url;return d=new Em({headers:E,status:s.status,statusText:O,url:w}),d},_=()=>{let{headers:O,status:E,statusText:w,url:j}=p(),H=null;E!==yN&&(H=typeof s.response>"u"?s.responseText:s.response),E===0&&(E=H?xN:0);let W=E>=200&&E<300;if(e.responseType==="json"&&typeof H=="string"){let G=H;H=H.replace(MN,"");try{H=H!==""?JSON.parse(H):null}catch(Y){H=G,W&&(W=!1,H={error:Y,text:H})}}W?(o.next(new E0({body:H,headers:O,status:E,statusText:w,url:j||void 0})),o.complete()):o.error(new A0({error:H,headers:O,status:E,statusText:w,url:j||void 0}))},m=O=>{let{url:E}=p(),w=new A0({error:O,status:s.status||0,statusText:s.statusText||"Unknown Error",url:E||void 0});o.error(w)},y=!1,b=O=>{y||(o.next(p()),y=!0);let E={type:kl.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(E.total=O.total),e.responseType==="text"&&s.responseText&&(E.partialText=s.responseText),o.next(E)},M=O=>{let E={type:kl.UploadProgress,loaded:O.loaded};O.lengthComputable&&(E.total=O.total),o.next(E)};return s.addEventListener("load",_),s.addEventListener("error",m),s.addEventListener("timeout",m),s.addEventListener("abort",m),e.reportProgress&&(s.addEventListener("progress",b),u!==null&&s.upload&&s.upload.addEventListener("progress",M)),s.send(u),o.next({type:kl.Sent}),()=>{s.removeEventListener("error",m),s.removeEventListener("abort",m),s.removeEventListener("load",_),s.removeEventListener("timeout",m),e.reportProgress&&(s.removeEventListener("progress",b),u!==null&&s.upload&&s.upload.removeEventListener("progress",M)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(Ve(Rl))};static \u0275prov=je({token:n,factory:n.\u0275fac})}return n})(),mE=new at(""),AN="XSRF-TOKEN",TN=new at("",{providedIn:"root",factory:()=>AN}),DN="X-XSRF-TOKEN",PN=new at("",{providedIn:"root",factory:()=>DN}),T0=class{},IN=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,i){this.doc=e,this.cookieName=i}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=y0(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||n)(Ve(_i),Ve(TN))};static \u0275prov=je({token:n,factory:n.\u0275fac})}return n})(),ON=/^(?:https?:)?\/\//i;function RN(n,t){if(!Re(mE)||n.method==="GET"||n.method==="HEAD"||ON.test(n.url))return t(n);let e=Re(T0).getToken(),i=Re(PN);return e!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,e)})),t(n)}function Q1(...n){let t=[Un,K1,Am,{provide:dc,useExisting:Am},{provide:S0,useFactory:()=>Re(bN,{optional:!0})??Re(K1)},{provide:fE,useValue:RN,multi:!0},{provide:mE,useValue:!0},{provide:T0,useClass:IN}];for(let e of n)t.push(...e.\u0275providers);return n0(t)}var gE=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)(Ve(_i))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Rt="primary",z0=Symbol("RouteTitle"),rb=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Ll(n){return new rb(n)}function ME(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],u=n[o];if(s[0]===":")r[s.substring(1)]=u;else if(s!==u.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function FN(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!is(n[e],t[e]))return!1;return!0}function is(n,t){let e=n?ob(n):void 0,i=t?ob(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!SE(n[r],t[r]))return!1;return!0}function ob(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function SE(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}else return n===t}function EE(n){return n.length>0?n[n.length-1]:null}function Sa(n){return w6(n)?n:Pl(n)?Nn(Promise.resolve(n)):xt(n)}var NN={exact:TE,subset:DE},AE={exact:LN,subset:VN,ignored:()=>!0};function _E(n,t,e){return NN[e.paths](n.root,t.root,e.matrixParams)&&AE[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function LN(n,t){return is(n,t)}function TE(n,t,e){if(!Fl(n.segments,t.segments)||!Pm(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!TE(n.children[i],t.children[i],e))return!1;return!0}function VN(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>SE(n[e],t[e]))}function DE(n,t,e){return PE(n,t,t.segments,e)}function PE(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!Fl(r,e)||t.hasChildren()||!Pm(r,e,i))}else if(n.segments.length===e.length){if(!Fl(n.segments,e)||!Pm(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!DE(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!Fl(n.segments,r)||!Pm(n.segments,r,i)||!n.children[Rt]?!1:PE(n.children[Rt],t,o,i)}}function Pm(n,t,e){return t.every((i,r)=>AE[e](n[r].parameters,i.parameters))}var os=class{root;queryParams;fragment;_queryParamMap;constructor(t=new xn([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Ll(this.queryParams),this._queryParamMap}toString(){return zN.serialize(this)}},xn=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Im(this)}},Ca=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Ll(this.parameters),this._parameterMap}toString(){return OE(this)}};function UN(n,t){return Fl(n,t)&&n.every((e,i)=>is(e.parameters,t[i].parameters))}function Fl(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function BN(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===Rt&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Rt&&(e=e.concat(t(r,i)))}),e}var Vl=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:()=>new wa,providedIn:"root"})}return n})(),wa=class{parse(t){let e=new ab(t);return new os(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${D0(t.root,!0)}`,i=WN(t.queryParams),r=typeof t.fragment=="string"?`#${HN(t.fragment)}`:"";return`${e}${i}${r}`}},zN=new wa;function Im(n){return n.segments.map(t=>OE(t)).join("/")}function D0(n,t){if(!n.hasChildren())return Im(n);if(t){let e=n.children[Rt]?D0(n.children[Rt],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==Rt&&i.push(`${r}:${D0(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=BN(n,(i,r)=>r===Rt?[D0(n.children[Rt],!1)]:[`${r}:${D0(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Rt]!=null?`${Im(n)}/${e[0]}`:`${Im(n)}/(${e.join("//")})`}}function IE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tm(n){return IE(n).replace(/%3B/gi,";")}function HN(n){return encodeURI(n)}function sb(n){return IE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Om(n){return decodeURIComponent(n)}function vE(n){return Om(n.replace(/\+/g,"%20"))}function OE(n){return`${sb(n.path)}${jN(n.parameters)}`}function jN(n){return Object.entries(n).map(([t,e])=>`;${sb(t)}=${sb(e)}`).join("")}function WN(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${Tm(e)}=${Tm(r)}`).join("&"):`${Tm(e)}=${Tm(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var GN=/^[^\/()?;#]+/;function eb(n){let t=n.match(GN);return t?t[0]:""}var $N=/^[^\/()?;=#]+/;function YN(n){let t=n.match($N);return t?t[0]:""}var qN=/^[^=?&#]+/;function XN(n){let t=n.match(qN);return t?t[0]:""}var ZN=/^[^&#]+/;function JN(n){let t=n.match(ZN);return t?t[0]:""}var ab=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xn([],{}):new xn([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Rt]=new xn(t,e)),i}parseSegment(){let t=eb(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new tt(4009,!1);return this.capture(t),new Ca(Om(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=YN(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=eb(this.remaining);r&&(i=r,this.capture(i))}t[Om(e)]=Om(i)}parseQueryParam(t){let e=XN(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let s=JN(this.remaining);s&&(i=s,this.capture(i))}let r=vE(e),o=vE(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=eb(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new tt(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Rt);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[Rt]:new xn([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new tt(4011,!1)}};function RE(n){return n.segments.length>0?new xn([],{[Rt]:n}):n}function kE(n){let t={};for(let[i,r]of Object.entries(n.children)){let o=kE(r);if(i===Rt&&o.segments.length===0&&o.hasChildren())for(let[s,u]of Object.entries(o.children))t[s]=u;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let e=new xn(n.segments,t);return KN(e)}function KN(n){if(n.numberOfChildren===1&&n.children[Rt]){let t=n.children[Rt];return new xn(n.segments.concat(t.segments),t.children)}return n}function _c(n){return n instanceof os}function FE(n,t,e=null,i=null){let r=NE(n);return LE(r,t,e,i)}function NE(n){let t;function e(o){let s={};for(let d of o.children){let p=e(d);s[d.outlet]=p}let u=new xn(o.url,s);return o===n&&(t=u),u}let i=e(n.root),r=RE(i);return t??r}function LE(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return tb(r,r,r,e,i);let o=QN(t);if(o.toRoot())return tb(r,r,new xn([],{}),e,i);let s=eL(o,r,n),u=s.processChildren?I0(s.segmentGroup,s.index,o.commands):UE(s.segmentGroup,s.index,o.commands);return tb(r,s.segmentGroup,u,e,i)}function km(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function R0(n){return typeof n=="object"&&n!=null&&n.outlets}function tb(n,t,e,i,r){let o={};i&&Object.entries(i).forEach(([d,p])=>{o[d]=Array.isArray(p)?p.map(_=>`${_}`):`${p}`});let s;n===t?s=e:s=VE(n,t,e);let u=RE(kE(s));return new os(u,o,r)}function VE(n,t,e){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===t?i[r]=e:i[r]=VE(o,t,e)}),new xn(n.segments,i)}var Fm=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&km(i[0]))throw new tt(4003,!1);let r=i.find(R0);if(r&&r!==EE(i))throw new tt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function QN(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Fm(!0,0,n);let t=0,e=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let u={};return Object.entries(o.outlets).forEach(([d,p])=>{u[d]=typeof p=="string"?p.split("/"):p}),[...r,{outlets:u}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((u,d)=>{d==0&&u==="."||(d==0&&u===""?e=!0:u===".."?t++:u!=""&&r.push(u))}),r):[...r,o]},[]);return new Fm(e,t,i)}var mc=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function eL(n,t,e){if(n.isAbsolute)return new mc(t,!0,0);if(!e)return new mc(t,!1,NaN);if(e.parent===null)return new mc(e,!0,0);let i=km(n.commands[0])?0:1,r=e.segments.length-1+i;return tL(e,r,n.numberOfDoubleDots)}function tL(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new tt(4005,!1);r=i.segments.length}return new mc(i,!1,r-o)}function nL(n){return R0(n[0])?n[0].outlets:{[Rt]:n}}function UE(n,t,e){if(n??=new xn([],{}),n.segments.length===0&&n.hasChildren())return I0(n,t,e);let i=iL(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new xn(n.segments.slice(0,i.pathIndex),{});return o.children[Rt]=new xn(n.segments.slice(i.pathIndex),n.children),I0(o,0,r)}else return i.match&&r.length===0?new xn(n.segments,{}):i.match&&!n.hasChildren()?lb(n,t,e):i.match?I0(n,0,r):lb(n,t,e)}function I0(n,t,e){if(e.length===0)return new xn(n.segments,{});{let i=nL(e),r={};if(Object.keys(i).some(o=>o!==Rt)&&n.children[Rt]&&n.numberOfChildren===1&&n.children[Rt].segments.length===0){let o=I0(n.children[Rt],t,e);return new xn(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=UE(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new xn(n.segments,r)}}function iL(n,t,e){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;let s=n.segments[r],u=e[i];if(R0(u))break;let d=`${u}`,p=i<e.length-1?e[i+1]:null;if(r>0&&d===void 0)break;if(d&&p&&typeof p=="object"&&p.outlets===void 0){if(!yE(d,p,s))return o;i+=2}else{if(!yE(d,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function lb(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let o=e[r];if(R0(o)){let d=rL(o.outlets);return new xn(i,d)}if(r===0&&km(e[0])){let d=n.segments[t];i.push(new Ca(d.path,xE(e[0]))),r++;continue}let s=R0(o)?o.outlets[Rt]:`${o}`,u=r<e.length-1?e[r+1]:null;s&&u&&km(u)?(i.push(new Ca(s,xE(u))),r+=2):(i.push(new Ca(s,{})),r++)}return new xn(i,{})}function rL(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=lb(new xn([],{}),0,i))}),t}function xE(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function yE(n,t,e){return n==e.path&&is(t,e.parameters)}var Rm="imperative",Mi=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Mi||{}),Fr=class{id;url;constructor(t,e){this.id=t,this.url=e}},Ma=class extends Fr{type=Mi.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Po=class extends Fr{urlAfterRedirects;type=Mi.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_r=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(_r||{}),vc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(vc||{}),rs=class extends Fr{reason;code;type=Mi.NavigationCancel;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ss=class extends Fr{reason;code;type=Mi.NavigationSkipped;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}},xc=class extends Fr{error;target;type=Mi.NavigationError;constructor(t,e,i,r){super(t,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},k0=class extends Fr{urlAfterRedirects;state;type=Mi.RoutesRecognized;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nm=class extends Fr{urlAfterRedirects;state;type=Mi.GuardsCheckStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lm=class extends Fr{urlAfterRedirects;state;shouldActivate;type=Mi.GuardsCheckEnd;constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vm=class extends Fr{urlAfterRedirects;state;type=Mi.ResolveStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Um=class extends Fr{urlAfterRedirects;state;type=Mi.ResolveEnd;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bm=class{route;type=Mi.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zm=class{route;type=Mi.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Hm=class{snapshot;type=Mi.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jm=class{snapshot;type=Mi.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wm=class{snapshot;type=Mi.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gm=class{snapshot;type=Mi.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yc=class{routerEvent;position;anchor;type=Mi.Scroll;constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},F0=class{},bc=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function oL(n,t){return n.providers&&!n._injector&&(n._injector=s0(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Do(n){return n.outlet||Rt}function sL(n,t){let e=n.filter(i=>Do(i)===t);return e.push(...n.filter(i=>Do(i)!==t)),e}function H0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var $m=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return H0(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Ul(this.rootInjector)}},Ul=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new $m(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(Ve(Bi))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ym=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=ub(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=ub(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=cb(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return cb(t,this._root).map(e=>e.value)}};function ub(n,t){if(n===t.value)return t;for(let e of t.children){let i=ub(n,e);if(i)return i}return null}function cb(n,t){if(n===t.value)return[t];for(let e of t.children){let i=cb(n,e);if(i.length)return i.unshift(t),i}return[]}var kr=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function pc(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var N0=class extends Ym{snapshot;constructor(t,e){super(t),this.snapshot=e,vb(this,t)}toString(){return this.snapshot.toString()}};function BE(n){let t=aL(n),e=new wi([new Ca("",{})]),i=new wi({}),r=new wi({}),o=new wi({}),s=new wi(""),u=new Io(e,i,o,s,r,Rt,n,t.root);return u.snapshot=t.root,new N0(new kr(u,[]),t)}function aL(n){let t={},e={},i={},r="",o=new Nl([],t,i,r,e,Rt,n,null,{});return new L0("",new kr(o,[]))}var Io=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,r,o,s,u,d){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=u,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(Ut(p=>p[z0]))??xt(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ut(t=>Ll(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ut(t=>Ll(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qm(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:Ie(Ie({},t.params),n.params),data:Ie(Ie({},t.data),n.data),resolve:Ie(Ie(Ie(Ie({},n.data),t.data),r?.data),n._resolvedData)}:i={params:Ie({},n.params),data:Ie({},n.data),resolve:Ie(Ie({},n.data),n._resolvedData??{})},r&&HE(r)&&(i.resolve[z0]=r.title),i}var Nl=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[z0]}constructor(t,e,i,r,o,s,u,d,p){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=u,this.routeConfig=d,this._resolve=p}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ll(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ll(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},L0=class extends Ym{url;constructor(t,e){super(e),this.url=t,vb(this,e)}toString(){return zE(this._root)}};function vb(n,t){t.value._routerState=n,t.children.forEach(e=>vb(n,e))}function zE(n){let t=n.children.length>0?` { ${n.children.map(zE).join(", ")} } `:"";return`${n.value}${t}`}function nb(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,is(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),is(t.params,e.params)||n.paramsSubject.next(e.params),FN(t.url,e.url)||n.urlSubject.next(e.url),is(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function db(n,t){let e=is(n.params,t.params)&&UN(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||db(n.parent,t.parent))}function HE(n){return typeof n.title=="string"||n.title===null}var jE=new at(""),Bl=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Rt;activateEvents=new Xn;deactivateEvents=new Xn;attachEvents=new Xn;detachEvents=new Xn;routerOutletData=tS(void 0);parentContexts=Re(Ul);location=Re(_a);changeDetector=Re(Il);inputBinder=Re(j0,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new tt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new tt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new tt(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new tt(4013,!1);this._activatedRoute=e;let r=this.location,s=e.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,d=new fb(e,u,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:d,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Tn({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ls]})}return n})(),fb=class{route;childContexts;parent;outletData;constructor(t,e,i,r){this.route=t,this.childContexts=e,this.parent=i,this.outletData=r}get(t,e){return t===Io?this.route:t===Ul?this.childContexts:t===jE?this.outletData:this.parent.get(t,e)}},j0=new at(""),xb=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=zd([i.queryParams,i.params,i.data]).pipe(ar(([o,s,u],d)=>(u=Ie(Ie(Ie({},o),s),u),d===0?xt(u):Promise.resolve(u)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let s=b4(i.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:u}of s.inputs)e.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:n.\u0275fac})}return n})(),yb=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=vn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&D(0,"router-outlet")},dependencies:[Bl],encapsulation:2})}return n})();function bb(n){let t=n.children&&n.children.map(bb),e=t?yt(Ie({},n),{children:t}):Ie({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Rt&&(e.component=yb),e}function lL(n,t,e){let i=V0(n,t._root,e?e._root:void 0);return new N0(i,t)}function V0(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=uL(n,t,e);return new kr(i,r)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(u=>V0(n,u)),s}}let i=cL(t.value),r=t.children.map(o=>V0(n,o));return new kr(i,r)}}function uL(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return V0(n,i,r);return V0(n,i)})}function cL(n){return new Io(new wi(n.url),new wi(n.params),new wi(n.queryParams),new wi(n.fragment),new wi(n.data),n.outlet,n.component,n)}var Cc=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},WE="ngNavigationCancelingError";function Xm(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=_c(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=GE(!1,_r.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function GE(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[WE]=!0,e.cancellationCode=t,e}function dL(n){return $E(n)&&_c(n.url)}function $E(n){return!!n&&n[WE]}var fL=(n,t,e,i)=>Ut(r=>(new hb(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),hb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),nb(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=pc(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=pc(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),u=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:u})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=pc(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=pc(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Gm(o.value.snapshot))}),t.children.length&&this.forwardEvent(new jm(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(nb(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let u=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(u.contexts),s.attachRef=u.componentRef,s.route=u.route.value,s.outlet&&s.outlet.attach(u.componentRef,u.route.value),nb(u.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,i)}},Zm=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},gc=class{component;route;constructor(t,e){this.component=t,this.route=e}};function hL(n,t,e){let i=n._root,r=t?t._root:null;return P0(i,r,e,[i.value])}function pL(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Mc(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!Qw(n)?n:t.get(n):i}function P0(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=pc(t);return n.children.forEach(s=>{mL(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,u])=>O0(u,e.getContext(s),r)),r}function mL(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,u=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let d=gL(s,o,o.routeConfig.runGuardsAndResolvers);d?r.canActivateChecks.push(new Zm(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?P0(n,t,u?u.children:null,i,r):P0(n,t,e,i,r),d&&u&&u.outlet&&u.outlet.isActivated&&r.canDeactivateChecks.push(new gc(u.outlet.component,s))}else s&&O0(t,u,r),r.canActivateChecks.push(new Zm(i)),o.component?P0(n,null,u?u.children:null,i,r):P0(n,null,e,i,r);return r}function gL(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Fl(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Fl(n.url,t.url)||!is(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!db(n,t)||!is(n.queryParams,t.queryParams);case"paramsChange":default:return!db(n,t)}}function O0(n,t,e){let i=pc(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?t?O0(s,t.children.getContext(o),e):O0(s,null,e):O0(s,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new gc(t.outlet.component,r)):e.canDeactivateChecks.push(new gc(null,r)):e.canDeactivateChecks.push(new gc(null,r))}function W0(n){return typeof n=="function"}function _L(n){return typeof n=="boolean"}function vL(n){return n&&W0(n.canLoad)}function xL(n){return n&&W0(n.canActivate)}function yL(n){return n&&W0(n.canActivateChild)}function bL(n){return n&&W0(n.canDeactivate)}function CL(n){return n&&W0(n.canMatch)}function YE(n){return n instanceof Es||n?.name==="EmptyError"}var Dm=Symbol("INITIAL_VALUE");function wc(){return ar(n=>zd(n.map(t=>t.pipe(Ds(1),E6(Dm)))).pipe(Ut(t=>{for(let e of t)if(e!==!0){if(e===Dm)return Dm;if(e===!1||wL(e))return e}return!0}),Ji(t=>t!==Dm),Ds(1)))}function wL(n){return _c(n)||n instanceof Cc}function ML(n,t){return ui(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?xt(yt(Ie({},e),{guardsResult:!0})):SL(s,i,r,n).pipe(ui(u=>u&&_L(u)?EL(i,o,n,t):xt(u)),Ut(u=>yt(Ie({},e),{guardsResult:u})))})}function SL(n,t,e,i){return Nn(n).pipe(ui(r=>IL(r.component,r.route,e,t,i)),Ps(r=>r!==!0,!0))}function EL(n,t,e,i){return Nn(t).pipe(Wo(r=>Fu(TL(r.route.parent,i),AL(r.route,i),PL(n,r.path,e),DL(n,r.route,e))),Ps(r=>r!==!0,!0))}function AL(n,t){return n!==null&&t&&t(new Wm(n)),xt(!0)}function TL(n,t){return n!==null&&t&&t(new Hm(n)),xt(!0)}function DL(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return xt(!0);let r=i.map(o=>tp(()=>{let s=H0(t)??e,u=Mc(o,s),d=xL(u)?u.canActivate(t,n):hr(s,()=>u(t,n));return Sa(d).pipe(Ps())}));return xt(r).pipe(wc())}function PL(n,t,e){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>pL(s)).filter(s=>s!==null).map(s=>tp(()=>{let u=s.guards.map(d=>{let p=H0(s.node)??e,_=Mc(d,p),m=yL(_)?_.canActivateChild(i,n):hr(p,()=>_(i,n));return Sa(m).pipe(Ps())});return xt(u).pipe(wc())}));return xt(o).pipe(wc())}function IL(n,t,e,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return xt(!0);let s=o.map(u=>{let d=H0(t)??r,p=Mc(u,d),_=bL(p)?p.canDeactivate(n,t,e,i):hr(d,()=>p(n,t,e,i));return Sa(_).pipe(Ps())});return xt(s).pipe(wc())}function OL(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return xt(!0);let o=r.map(s=>{let u=Mc(s,n),d=vL(u)?u.canLoad(t,e):hr(n,()=>u(t,e));return Sa(d)});return xt(o).pipe(wc(),qE(i))}function qE(n){return x6(mi(t=>{if(typeof t!="boolean")throw Xm(n,t)}),Ut(t=>t===!0))}function RL(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return xt(!0);let o=r.map(s=>{let u=Mc(s,n),d=CL(u)?u.canMatch(t,e):hr(n,()=>u(t,e));return Sa(d)});return xt(o).pipe(wc(),qE(i))}var U0=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},B0=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function hc(n){return Ru(new U0(n))}function kL(n){return Ru(new tt(4e3,!1))}function FL(n){return Ru(GE(!1,_r.GuardRejected))}var pb=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return xt(i);if(r.numberOfChildren>1||!r.children[Rt])return kL(`${t.redirectTo}`);r=r.children[Rt]}}applyRedirectCommands(t,e,i,r,o){if(typeof e!="string"){let u=e,{queryParams:d,fragment:p,routeConfig:_,url:m,outlet:y,params:b,data:M,title:O}=r,E=hr(o,()=>u({params:b,data:M,queryParams:d,fragment:p,routeConfig:_,url:m,outlet:y,title:O}));if(E instanceof os)throw new B0(E);e=E}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new B0(s);return s}applyRedirectCreateUrlTree(t,e,i,r){let o=this.createSegmentGroup(t,e.root,i,r);return new os(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let u=o.substring(1);i[r]=e[u]}else i[r]=o}),i}createSegmentGroup(t,e,i,r){let o=this.createSegments(t,e.segments,i,r),s={};return Object.entries(e.children).forEach(([u,d])=>{s[u]=this.createSegmentGroup(t,d,i,r)}),new xn(o,s)}createSegments(t,e,i,r){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new tt(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},mb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function NL(n,t,e,i,r){let o=XE(n,t,e);return o.matched?(i=oL(t,i),RL(i,t,e,r).pipe(Ut(s=>s===!0?o:Ie({},mb)))):xt(o)}function XE(n,t,e){if(t.path==="**")return LL(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?Ie({},mb):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||ME)(e,n,t);if(!r)return Ie({},mb);let o={};Object.entries(r.posParams??{}).forEach(([u,d])=>{o[u]=d.path});let s=r.consumed.length>0?Ie(Ie({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function LL(n){return{matched:!0,parameters:n.length>0?EE(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function bE(n,t,e,i){return e.length>0&&BL(n,e,i)?{segmentGroup:new xn(t,UL(i,new xn(e,n.children))),slicedSegments:[]}:e.length===0&&zL(n,e,i)?{segmentGroup:new xn(n.segments,VL(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new xn(n.segments,n.children),slicedSegments:e}}function VL(n,t,e,i){let r={};for(let o of e)if(Km(n,t,o)&&!i[Do(o)]){let s=new xn([],{});r[Do(o)]=s}return Ie(Ie({},i),r)}function UL(n,t){let e={};e[Rt]=t;for(let i of n)if(i.path===""&&Do(i)!==Rt){let r=new xn([],{});e[Do(i)]=r}return e}function BL(n,t,e){return e.some(i=>Km(n,t,i)&&Do(i)!==Rt)}function zL(n,t,e){return e.some(i=>Km(n,t,i))}function Km(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function HL(n,t,e){return t.length===0&&!n.children[e]}var gb=class{};function jL(n,t,e,i,r,o,s="emptyOnly"){return new _b(n,t,e,i,r,s,o).recognize()}var WL=31,_b=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,r,o,s,u){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=u,this.applyRedirects=new pb(this.urlSerializer,this.urlTree)}noMatchError(t){return new tt(4002,`'${t.segmentGroup}'`)}recognize(){let t=bE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Ut(({children:e,rootSnapshot:i})=>{let r=new kr(i,e),o=new L0("",r),s=FE(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new Nl([],Object.freeze({}),Object.freeze(Ie({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Rt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,Rt,e).pipe(Ut(i=>({children:i,rootSnapshot:e})),Ts(i=>{if(i instanceof B0)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof U0?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,o):this.processSegment(t,e,i,i.segments,r,!0,o).pipe(Ut(s=>s instanceof kr?[s]:[]))}processChildren(t,e,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return Nn(o).pipe(Wo(s=>{let u=i.children[s],d=sL(e,s);return this.processSegmentGroup(t,d,u,s,r)}),S6((s,u)=>(s.push(...u),s)),ha(null),M6(),ui(s=>{if(s===null)return hc(i);let u=ZE(s);return GL(u),xt(u)}))}processSegment(t,e,i,r,o,s,u){return Nn(e).pipe(Wo(d=>this.processSegmentAgainstRoute(d._injector??t,e,d,i,r,o,s,u).pipe(Ts(p=>{if(p instanceof U0)return xt(null);throw p}))),Ps(d=>!!d),Ts(d=>{if(YE(d))return HL(i,r,o)?xt(new gb):hc(i);throw d}))}processSegmentAgainstRoute(t,e,i,r,o,s,u,d){return Do(i)!==s&&(s===Rt||!Km(r,o,i))?hc(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s,d):this.allowRedirects&&u?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,o,s,d):hc(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s,u){let{matched:d,parameters:p,consumedSegments:_,positionalParamSegments:m,remainingSegments:y}=XE(e,r,o);if(!d)return hc(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>WL&&(this.allowRedirects=!1));let b=new Nl(o,p,Object.freeze(Ie({},this.urlTree.queryParams)),this.urlTree.fragment,CE(r),Do(r),r.component??r._loadedComponent??null,r,wE(r)),M=qm(b,u,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data);let O=this.applyRedirects.applyRedirectCommands(_,r.redirectTo,m,b,t);return this.applyRedirects.lineralizeSegments(r,O).pipe(ui(E=>this.processSegment(t,i,e,E.concat(y),s,!1,u)))}matchSegmentAgainstRoute(t,e,i,r,o,s){let u=NL(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),u.pipe(ar(d=>d.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(ar(({routes:p})=>{let _=i._loadedInjector??t,{parameters:m,consumedSegments:y,remainingSegments:b}=d,M=new Nl(y,m,Object.freeze(Ie({},this.urlTree.queryParams)),this.urlTree.fragment,CE(i),Do(i),i.component??i._loadedComponent??null,i,wE(i)),O=qm(M,s,this.paramsInheritanceStrategy);M.params=Object.freeze(O.params),M.data=Object.freeze(O.data);let{segmentGroup:E,slicedSegments:w}=bE(e,y,b,p);if(w.length===0&&E.hasChildren())return this.processChildren(_,p,E,M).pipe(Ut(H=>new kr(M,H)));if(p.length===0&&w.length===0)return xt(new kr(M,[]));let j=Do(i)===o;return this.processSegment(_,p,E,w,j?Rt:o,!0,M).pipe(Ut(H=>new kr(M,H instanceof kr?[H]:[])))}))):hc(e)))}getChildConfig(t,e,i){return e.children?xt({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?xt({routes:e._loadedRoutes,injector:e._loadedInjector}):OL(t,e,i,this.urlSerializer).pipe(ui(r=>r?this.configLoader.loadChildren(t,e).pipe(mi(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):FL(e))):xt({routes:[],injector:t})}};function GL(n){n.sort((t,e)=>t.value.outlet===Rt?-1:e.value.outlet===Rt?1:t.value.outlet.localeCompare(e.value.outlet))}function $L(n){let t=n.value.routeConfig;return t&&t.path===""}function ZE(n){let t=[],e=new Set;for(let i of n){if(!$L(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=ZE(i.children);t.push(new kr(i.value,r))}return t.filter(i=>!e.has(i))}function CE(n){return n.data||{}}function wE(n){return n.resolve||{}}function YL(n,t,e,i,r,o){return ui(s=>jL(n,t,e,i,s.extractedUrl,r,o).pipe(Ut(({state:u,tree:d})=>yt(Ie({},s),{targetSnapshot:u,urlAfterRedirects:d}))))}function qL(n,t){return ui(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return xt(e);let o=new Set(r.map(d=>d.route)),s=new Set;for(let d of o)if(!s.has(d))for(let p of JE(d))s.add(p);let u=0;return Nn(s).pipe(Wo(d=>o.has(d)?XL(d,i,n,t):(d.data=qm(d,d.parent,n).resolve,xt(void 0))),mi(()=>u++),Nu(1),ui(d=>u===s.size?xt(e):or))})}function JE(n){let t=n.children.map(e=>JE(e)).flat();return[n,...t]}function XL(n,t,e,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!HE(r)&&(o[z0]=r.title),ZL(o,n,t,i).pipe(Ut(s=>(n._resolvedData=s,n.data=qm(n,n.parent,e).resolve,null)))}function ZL(n,t,e,i){let r=ob(n);if(r.length===0)return xt({});let o={};return Nn(r).pipe(ui(s=>JL(n[s],t,e,i).pipe(Ps(),mi(u=>{if(u instanceof Cc)throw Xm(new wa,u);o[s]=u}))),Nu(1),Ut(()=>o),Ts(s=>YE(s)?or:Ru(s)))}function JL(n,t,e,i){let r=H0(t)??i,o=Mc(n,r),s=o.resolve?o.resolve(t,e):hr(r,()=>o(t,e));return Sa(s)}function ib(n){return ar(t=>{let e=n(t);return e?Nn(e).pipe(Ut(()=>t)):xt(t)})}var Cb=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Rt);return i}getResolvedTitleForRoute(e){return e.data[z0]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:()=>Re(KE),providedIn:"root"})}return n})(),KE=(()=>{class n extends Cb{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(Ve(gE))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zl=new at("",{providedIn:"root",factory:()=>({})}),Hl=new at(""),Qm=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Re(x4);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return xt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=Sa(e.loadComponent()).pipe(Ut(e3),mi(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),pl(()=>{this.componentLoaders.delete(e)})),r=new Ou(i,()=>new hi).pipe(Iu());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return xt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=QE(i,this.compiler,e,this.onLoadEndListener).pipe(pl(()=>{this.childrenLoaders.delete(i)})),s=new Ou(o,()=>new hi).pipe(Iu());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QE(n,t,e,i){return Sa(n.loadChildren()).pipe(Ut(e3),ui(r=>r instanceof M1||Array.isArray(r)?xt(r):Nn(t.compileModuleAsync(r))),Ut(r=>{i&&i(n);let o,s,u=!1;return Array.isArray(r)?(s=r,u=!0):(o=r.create(e).injector,s=o.get(Hl,[],{optional:!0,self:!0}).flat()),{routes:s.map(bb),injector:o}}))}function KL(n){return n&&typeof n=="object"&&"default"in n}function e3(n){return KL(n)?n.default:n}var eg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:()=>Re(QL),providedIn:"root"})}return n})(),QL=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wb=new at(""),Mb=new at("");function t3(n,t,e){let i=n.get(Mb),r=n.get(_i);return n.get(Zn).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(p=>setTimeout(p));let o,s=new Promise(p=>{o=p}),u=r.startViewTransition(()=>(o(),e7(n))),{onViewTransitionCreated:d}=i;return d&&hr(n,()=>d({transition:u,from:t,to:e})),s})}function e7(n){return new Promise(t=>{a1({read:()=>setTimeout(t)},{injector:n})})}var Sb=new at(""),tg=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new hi;transitionAbortSubject=new hi;configLoader=Re(Qm);environmentInjector=Re(Bi);destroyRef=Re(nc);urlSerializer=Re(Vl);rootContexts=Re(Ul);location=Re(ba);inputBindingEnabled=Re(j0,{optional:!0})!==null;titleStrategy=Re(Cb);options=Re(zl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Re(eg);createViewTransition=Re(wb,{optional:!0});navigationErrorHandler=Re(Sb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>xt(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new Bm(r)),i=r=>this.events.next(new zm(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(yt(Ie({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(e){return this.transitions=new wi(null),this.transitions.pipe(Ji(i=>i!==null),ar(i=>{let r=!1,o=!1;return xt(i).pipe(ar(s=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",_r.SupersededByNewNavigation),or;this.currentTransition=i,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?yt(Ie({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!u&&d!=="reload"){let p="";return this.events.next(new ss(s.id,this.urlSerializer.serialize(s.rawUrl),p,vc.IgnoredSameUrlNavigation)),s.resolve(!1),or}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return xt(s).pipe(ar(p=>(this.events.next(new Ma(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),p.id!==this.navigationId?or:Promise.resolve(p))),YL(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),mi(p=>{i.targetSnapshot=p.targetSnapshot,i.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=yt(Ie({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let _=new k0(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:p,extractedUrl:_,source:m,restoredState:y,extras:b}=s,M=new Ma(p,this.urlSerializer.serialize(_),m,y);this.events.next(M);let O=BE(this.rootComponentType).snapshot;return this.currentTransition=i=yt(Ie({},s),{targetSnapshot:O,urlAfterRedirects:_,extras:yt(Ie({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,xt(i)}else{let p="";return this.events.next(new ss(s.id,this.urlSerializer.serialize(s.extractedUrl),p,vc.IgnoredByUrlHandlingStrategy)),s.resolve(!1),or}}),mi(s=>{let u=new Nm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(u)}),Ut(s=>(this.currentTransition=i=yt(Ie({},s),{guards:hL(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),i)),ML(this.environmentInjector,s=>this.events.next(s)),mi(s=>{if(i.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Xm(this.urlSerializer,s.guardsResult);let u=new Lm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(u)}),Ji(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",_r.GuardRejected),!1)),ib(s=>{if(s.guards.canActivateChecks.length!==0)return xt(s).pipe(mi(u=>{let d=new Vm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),ar(u=>{let d=!1;return xt(u).pipe(qL(this.paramsInheritanceStrategy,this.environmentInjector),mi({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",_r.NoDataFromResolver)}}))}),mi(u=>{let d=new Um(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),ib(s=>{let u=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(mi(_=>{d.component=_}),Ut(()=>{})));for(let _ of d.children)p.push(...u(_));return p};return zd(u(s.targetSnapshot.root)).pipe(ha(null),Ds(1))}),ib(()=>this.afterPreactivation()),ar(()=>{let{currentSnapshot:s,targetSnapshot:u}=i,d=this.createViewTransition?.(this.environmentInjector,s.root,u.root);return d?Nn(d).pipe(Ut(()=>i)):xt(i)}),Ut(s=>{let u=lL(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=i=yt(Ie({},s),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,i}),mi(()=>{this.events.next(new F0)}),fL(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Ds(1),mi({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Po(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),A6(this.transitionAbortSubject.pipe(mi(s=>{throw s}))),pl(()=>{!r&&!o&&this.cancelNavigationTransition(i,"",_r.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ts(s=>{if(this.destroyed)return i.resolve(!1),or;if(o=!0,$E(s))this.events.next(new rs(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode)),dL(s)?this.events.next(new bc(s.url,s.navigationBehaviorOptions)):i.resolve(!1);else{let u=new xc(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);try{let d=hr(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof Cc){let{message:p,cancellationCode:_}=Xm(this.urlSerializer,d);this.events.next(new rs(i.id,this.urlSerializer.serialize(i.extractedUrl),p,_)),this.events.next(new bc(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(u),s}catch(d){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(d)}}return or}))}))}cancelNavigationTransition(e,i,r){let o=new rs(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function t7(n){return n!==Rm}var n3=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:()=>Re(n7),providedIn:"root"})}return n})(),Jm=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},n7=(()=>{class n extends Jm{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Qr(n)))(r||n)}})();static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),i3=(()=>{class n{urlSerializer=Re(Vl);options=Re(zl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Re(ba);urlHandlingStrategy=Re(eg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new os;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,s=r??o;return s instanceof os?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=BE(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:()=>Re(i7),providedIn:"root"})}return n})(),i7=(()=>{class n extends i3{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof Ma?this.updateStateMemento():e instanceof ss?this.commitTransition(i):e instanceof k0?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof F0?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof rs&&(e.code===_r.GuardRejected||e.code===_r.NoDataFromResolver)?this.restoreHistory(i):e instanceof xc?this.restoreHistory(i,!0):e instanceof Po&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(e)||o){let u=this.browserPageId,d=Ie(Ie({},s),this.generateNgRouterState(r,u));this.location.replaceState(e,"",d)}else{let u=Ie(Ie({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",u)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Qr(n)))(r||n)}})();static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ng(n,t){n.events.pipe(Ji(e=>e instanceof Po||e instanceof rs||e instanceof xc||e instanceof ss),Ut(e=>e instanceof Po||e instanceof ss?0:(e instanceof rs?e.code===_r.Redirect||e.code===_r.SupersededByNewNavigation:!1)?2:1),Ji(e=>e!==2),Ds(1)).subscribe(()=>{t()})}var r7={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},o7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Si=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Re(KS);stateManager=Re(i3);options=Re(zl,{optional:!0})||{};pendingTasks=Re(ga);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Re(tg);urlSerializer=Re(Vl);location=Re(ba);urlHandlingStrategy=Re(eg);_events=new hi;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Re(n3);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Re(Hl,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Re(j0,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new fi;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof rs&&i.code!==_r.Redirect&&i.code!==_r.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Po)this.navigated=!0;else if(i instanceof bc){let s=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),d=Ie({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||t7(r.source)},s);this.scheduleNavigation(u,Rm,null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}a7(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Rm,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let d=Ie({},r);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(o.state=d)}let u=this.parseUrl(e);this.scheduleNavigation(u,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(bb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:u,preserveFragment:d}=i,p=d?this.currentUrlTree.fragment:s,_=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":_=Ie(Ie({},this.currentUrlTree.queryParams),o);break;case"preserve":_=this.currentUrlTree.queryParams;break;default:_=o||null}_!==null&&(_=this.removeEmptyProps(_));let m;try{let y=r?r.snapshot:this.routerState.snapshot.root;m=NE(y)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),m=this.currentUrlTree.root}return LE(m,e,_,p??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=_c(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Rm,null,i)}navigate(e,i={skipLocationChange:!1}){return s7(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=Ie({},r7):i===!1?r=Ie({},o7):r=i,_c(e))return _E(this.currentUrlTree,e,r);let o=this.parseUrl(e);return _E(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let u,d,p;s?(u=s.resolve,d=s.reject,p=s.promise):p=new Promise((m,y)=>{u=m,d=y});let _=this.pendingTasks.add();return ng(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(_))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:u,reject:d,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(m=>Promise.reject(m))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function s7(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new tt(4008,!1)}function a7(n){return!(n instanceof F0)&&!(n instanceof bc)}var G0=class{};var r3=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,i,r,o){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ji(e=>e instanceof Po),Wo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=s0(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,u=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(u,o.children??o._loadedRoutes))}return Nn(r).pipe(ku())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=xt(null);let o=r.pipe(ui(s=>s===null?xt(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return Nn([o,s]).pipe(ku())}else return o})}static \u0275fac=function(i){return new(i||n)(Ve(Si),Ve(Bi),Ve(G0),Ve(Qm))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),o3=new at(""),l7=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,i,r,o,s={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Ma?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Po?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof ss&&e.code===vc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof yc&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new yc(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){zS()};static \u0275prov=je({token:n,factory:n.\u0275fac})}return n})();function Ab(n,...t){return n0([{provide:Hl,multi:!0,useValue:n},[],{provide:Io,useFactory:s3,deps:[Si]},{provide:nm,multi:!0,useFactory:a3},t.map(e=>e.\u0275providers)])}function s3(n){return n.routerState.root}function $0(n,t){return{\u0275kind:n,\u0275providers:t}}function a3(){let n=Re(Kr);return t=>{let e=n.get(Al);if(t!==e.components[0])return;let i=n.get(Si),r=n.get(l3);n.get(Tb)===1&&i.initialNavigation(),n.get(d3,null,Nt.Optional)?.setUpPreloading(),n.get(o3,null,Nt.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var l3=new at("",{factory:()=>new hi}),Tb=new at("",{providedIn:"root",factory:()=>1});function u3(){let n=[{provide:Tb,useValue:0},E1(()=>{let t=Re(Kr);return t.get(O1,Promise.resolve()).then(()=>new Promise(i=>{let r=t.get(Si),o=t.get(l3);ng(r,()=>{i(!0)}),t.get(tg).afterPreactivation=()=>(i(!0),o.closed?xt(void 0):o),r.initialNavigation()}))})];return $0(2,n)}function c3(){let n=[E1(()=>{Re(Si).setUpLocationChangeListener()}),{provide:Tb,useValue:2}];return $0(3,n)}var d3=new at("");function f3(n){return $0(0,[{provide:d3,useExisting:r3},{provide:G0,useExisting:n}])}function h3(){return $0(8,[xb,{provide:j0,useExisting:xb}])}function p3(n){o0("NgRouterViewTransitions");let t=[{provide:wb,useValue:t3},{provide:Mb,useValue:Ie({skipNextTransition:!!n?.skipInitialTransition},n)}];return $0(9,t)}var m3=[ba,{provide:Vl,useClass:wa},Si,Ul,{provide:Io,useFactory:s3,deps:[Si]},Qm,[]],Y0=(()=>{class n{constructor(){}static forRoot(e,i){return{ngModule:n,providers:[m3,[],{provide:Hl,multi:!0,useValue:e},[],i?.errorHandler?{provide:Sb,useValue:i.errorHandler}:[],{provide:zl,useValue:i||{}},i?.useHash?c7():d7(),u7(),i?.preloadingStrategy?f3(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?f7(i):[],i?.bindToComponentInputs?h3().\u0275providers:[],i?.enableViewTransitions?p3().\u0275providers:[],h7()]}}static forChild(e){return{ngModule:n,providers:[{provide:Hl,multi:!0,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Co({type:n});static \u0275inj=yo({})}return n})();function u7(){return{provide:o3,useFactory:()=>{let n=Re(q4),t=Re(Zn),e=Re(zl),i=Re(tg),r=Re(Vl);return e.scrollOffset&&n.setOffset(e.scrollOffset),new l7(r,i,n,t,e)}}}function c7(){return{provide:Bs,useClass:U1}}function d7(){return{provide:Bs,useClass:lm}}function f7(n){return[n.initialNavigation==="disabled"?c3().\u0275providers:[],n.initialNavigation==="enabledBlocking"?u3().\u0275providers:[]]}var Eb=new at("");function h7(){return[{provide:Eb,useFactory:a3},{provide:nm,multi:!0,useExisting:Eb}]}var S3=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(Te(Us),Te(Ir))};static \u0275dir=Tn({type:n})}return n})(),ef=(()=>{class n extends S3{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Qr(n)))(r||n)}})();static \u0275dir=Tn({type:n,features:[Ni]})}return n})(),Gl=new at(""),m7={provide:Gl,useExisting:Qi(()=>$l),multi:!0},$l=(()=>{class n extends ef{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Qr(n)))(r||n)}})();static \u0275dir=Tn({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&R("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Rr([m7]),Ni]})}return n})(),g7={provide:Gl,useExisting:Qi(()=>Yn),multi:!0};function _7(){let n=to()?to().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var v7=new at(""),Yn=(()=>{class n extends S3{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!_7())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(Te(Us),Te(Ir),Te(v7,8))};static \u0275dir=Tn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&R("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[Rr([g7]),Ni]})}return n})();function Ob(n){return n==null||Rb(n)===0}function Rb(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Yl=new at(""),pg=new at(""),x7=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ht=class{static min(t){return E3(t)}static max(t){return A3(t)}static required(t){return T3(t)}static requiredTrue(t){return y7(t)}static email(t){return b7(t)}static minLength(t){return C7(t)}static maxLength(t){return w7(t)}static pattern(t){return M7(t)}static nullValidator(t){return rg()}static compose(t){return k3(t)}static composeAsync(t){return F3(t)}};function E3(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function A3(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function T3(n){return Ob(n.value)?{required:!0}:null}function y7(n){return n.value===!0?null:{required:!0}}function b7(n){return Ob(n.value)||x7.test(n.value)?null:{email:!0}}function C7(n){return t=>{let e=t.value?.length??Rb(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function w7(n){return t=>{let e=t.value?.length??Rb(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function M7(n){if(!n)return rg;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Ob(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function rg(n){return null}function D3(n){return n!=null}function P3(n){return Pl(n)?Nn(n):n}function I3(n){let t={};return n.forEach(e=>{t=e!=null?Ie(Ie({},t),e):t}),Object.keys(t).length===0?null:t}function O3(n,t){return t.map(e=>e(n))}function S7(n){return!n.validate}function R3(n){return n.map(t=>S7(t)?t:e=>t.validate(e))}function k3(n){if(!n)return null;let t=n.filter(D3);return t.length==0?null:function(e){return I3(O3(e,t))}}function kb(n){return n!=null?k3(R3(n)):null}function F3(n){if(!n)return null;let t=n.filter(D3);return t.length==0?null:function(e){let i=O3(e,t).map(P3);return As(i).pipe(Ut(I3))}}function Fb(n){return n!=null?F3(R3(n)):null}function g3(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function N3(n){return n._rawValidators}function L3(n){return n._rawAsyncValidators}function Db(n){return n?Array.isArray(n)?n:[n]:[]}function og(n,t){return Array.isArray(n)?n.includes(t):n===t}function _3(n,t){let e=Db(t);return Db(n).forEach(r=>{og(e,r)||e.push(r)}),e}function v3(n,t){return Db(t).filter(e=>!og(n,e))}var sg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=kb(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Fb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Hs=class extends sg{name;get formDirective(){return null}get path(){return null}},Wl=class extends sg{_parent=null;name=null;valueAccessor=null},ag=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},E7={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},yie=yt(Ie({},E7),{"[class.ng-submitted]":"isSubmitted"}),ri=(()=>{class n extends ag{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(Te(Wl,2))};static \u0275dir=Tn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Ue("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Ni]})}return n})(),vr=(()=>{class n extends ag{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(Te(Hs,10))};static \u0275dir=Tn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Ue("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Ni]})}return n})();var q0="VALID",ig="INVALID",Sc="PENDING",X0="DISABLED",Ea=class{},lg=class extends Ea{value;source;constructor(t,e){super(),this.value=t,this.source=e}},J0=class extends Ea{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},K0=class extends Ea{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Ec=class extends Ea{status;source;constructor(t,e){super(),this.status=t,this.source=e}},ug=class extends Ea{source;constructor(t){super(),this.source=t}},cg=class extends Ea{source;constructor(t){super(),this.source=t}};function Nb(n){return(mg(n)?n.validators:n)||null}function A7(n){return Array.isArray(n)?kb(n):n||null}function Lb(n,t){return(mg(t)?t.asyncValidators:n)||null}function T7(n){return Array.isArray(n)?Fb(n):n||null}function mg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function V3(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new tt(1e3,"");if(!i[e])throw new tt(1001,"")}function U3(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new tt(1002,"")})}var Ac=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return ts(this.statusReactive)}set status(t){ts(()=>this.statusReactive.set(t))}_status=uc(()=>this.statusReactive());statusReactive=rc(void 0);get valid(){return this.status===q0}get invalid(){return this.status===ig}get pending(){return this.status==Sc}get disabled(){return this.status===X0}get enabled(){return this.status!==X0}errors;get pristine(){return ts(this.pristineReactive)}set pristine(t){ts(()=>this.pristineReactive.set(t))}_pristine=uc(()=>this.pristineReactive());pristineReactive=rc(!0);get dirty(){return!this.pristine}get touched(){return ts(this.touchedReactive)}set touched(t){ts(()=>this.touchedReactive.set(t))}_touched=uc(()=>this.touchedReactive());touchedReactive=rc(!1);get untouched(){return!this.touched}_events=new hi;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(_3(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(_3(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(v3(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(v3(t,this._rawAsyncValidators))}hasValidator(t){return og(this._rawValidators,t)}hasAsyncValidator(t){return og(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(yt(Ie({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new K0(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new K0(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(yt(Ie({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new J0(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new J0(!0,i))}markAsPending(t={}){this.status=Sc;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ec(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(yt(Ie({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=X0,this.errors=null,this._forEachChild(r=>{r.disable(yt(Ie({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new lg(this.value,i)),this._events.next(new Ec(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(yt(Ie({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=q0,this._forEachChild(i=>{i.enable(yt(Ie({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(yt(Ie({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===q0||this.status===Sc)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new lg(this.value,e)),this._events.next(new Ec(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(yt(Ie({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?X0:q0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Sc,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=P3(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Ec(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new Xn,this.statusChanges=new Xn}_calculateStatus(){return this._allControlsDisabled()?X0:this.errors?ig:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sc)?Sc:this._anyControlsHaveStatus(ig)?ig:q0}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new J0(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new K0(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){mg(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=A7(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=T7(this._rawAsyncValidators)}},Aa=class extends Ac{constructor(t,e,i){super(Nb(e),Lb(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){U3(this,!0,t),Object.keys(t).forEach(i=>{V3(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Pb=class extends Aa{};var tf=new at("",{providedIn:"root",factory:()=>gg}),gg="always";function B3(n,t){return[...t.path,n]}function dg(n,t,e=gg){Vb(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),P7(n,t),O7(n,t),I7(n,t),D7(n,t)}function x3(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),hg(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function fg(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function D7(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Vb(n,t){let e=N3(n);t.validator!==null?n.setValidators(g3(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=L3(n);t.asyncValidator!==null?n.setAsyncValidators(g3(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();fg(t._rawValidators,r),fg(t._rawAsyncValidators,r)}function hg(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=N3(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let r=L3(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}let i=()=>{};return fg(t._rawValidators,i),fg(t._rawAsyncValidators,i),e}function P7(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&z3(n,t)})}function I7(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&z3(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function z3(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function O7(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function H3(n,t){n==null,Vb(n,t)}function R7(n,t){return hg(n,t)}function j3(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function k7(n){return Object.getPrototypeOf(n.constructor)===ef}function W3(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function G3(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===Yn?e=o:k7(o)?i=o:r=o}),r||i||e||null}function F7(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var N7={provide:Hs,useExisting:Qi(()=>Oo)},Z0=Promise.resolve(),Oo=(()=>{class n extends Hs{callSetDisabledState;get submitted(){return ts(this.submittedReactive)}_submitted=uc(()=>this.submittedReactive());submittedReactive=rc(!1);_directives=new Set;form;ngSubmit=new Xn;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new Aa({},kb(e),Fb(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Z0.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),dg(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Z0.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Z0.then(()=>{let i=this._findContainer(e.path),r=new Aa({});H3(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Z0.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Z0.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),W3(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new ug(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1),this.form._events.next(new cg(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(Te(Yl,10),Te(pg,10),Te(tf,8))};static \u0275dir=Tn({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&R("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Rr([N7]),Ni]})}return n})();function y3(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function b3(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Q0=class extends Ac{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(Nb(e),Lb(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mg(e)&&(e.nonNullable||e.initialValueIsDefault)&&(b3(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){y3(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){y3(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){b3(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var L7=n=>n instanceof Q0;var V7={provide:Wl,useExisting:Qi(()=>Kn)},C3=Promise.resolve(),Kn=(()=>{class n extends Wl{_changeDetectorRef;callSetDisabledState;control=new Q0;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Xn;constructor(e,i,r,o,s,u){super(),this._changeDetectorRef=s,this.callSetDisabledState=u,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=G3(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),j3(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){dg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){C3.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&f0(i);C3.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?B3(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(Te(Hs,9),Te(Yl,10),Te(pg,10),Te(Gl,10),Te(Il,8),Te(tf,8))};static \u0275dir=Tn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Rr([V7]),Ni,Ls]})}return n})();var xr=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Tn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),U7={provide:Gl,useExisting:Qi(()=>Nr),multi:!0},Nr=(()=>{class n extends ef{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Qr(n)))(r||n)}})();static \u0275dir=Tn({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&R("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Rr([U7]),Ni]})}return n})();var $3=new at("");var B7={provide:Hs,useExisting:Qi(()=>nf)},nf=(()=>{class n extends Hs{callSetDisabledState;get submitted(){return ts(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=uc(()=>this._submittedReactive());_submittedReactive=rc(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Xn;constructor(e,i,r){super(),this.callSetDisabledState=r,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return dg(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){x3(e.control||null,e,!1),F7(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),W3(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new ug(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new cg(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(x3(i||null,e),L7(r)&&(dg(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);H3(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&R7(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Vb(this.form,this),this._oldForm&&hg(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(Te(Yl,10),Te(pg,10),Te(tf,8))};static \u0275dir=Tn({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&R("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Rr([B7]),Ni,Ls]})}return n})();var z7={provide:Wl,useExisting:Qi(()=>rf)},rf=(()=>{class n extends Wl{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new Xn;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,i,r,o,s){super(),this._ngModelWarningConfig=s,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=G3(this,o)}ngOnChanges(e){this._added||this._setUpControl(),j3(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return B3(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(Te(Hs,13),Te(Yl,10),Te(pg,10),Te(Gl,10),Te($3,8))};static \u0275dir=Tn({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Rr([z7]),Ni,Ls]})}return n})();var H7={provide:Gl,useExisting:Qi(()=>xi),multi:!0};function Y3(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function j7(n){return n.split(":")[0]}var xi=(()=>{class n extends ef{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i=this._getOptionId(e),r=Y3(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=j7(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Qr(n)))(r||n)}})();static \u0275dir=Tn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&R("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Rr([H7]),Ni]})}return n})(),Ii=(()=>{class n{_element;_renderer;_select;id;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(Y3(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(Te(Ir),Te(Us),Te(xi,9))};static \u0275dir=Tn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),W7={provide:Gl,useExisting:Qi(()=>q3),multi:!0};function w3(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function G7(n){return n.split(":")[0]}var q3=(()=>{class n extends ef{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let u=0;u<s.length;u++){let d=s[u],p=this._getOptionValue(d.value);r.push(p)}}else{let s=i.options;for(let u=0;u<s.length;u++){let d=s[u];if(d.selected){let p=this._getOptionValue(d.value);r.push(p)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=G7(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Qr(n)))(r||n)}})();static \u0275dir=Tn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&R("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Rr([W7]),Ni]})}return n})(),Oi=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(w3(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(w3(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(Te(Ir),Te(Us),Te(q3,9))};static \u0275dir=Tn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function X3(n){return typeof n=="number"?n:parseFloat(n)}var Ub=(()=>{class n{_validator=rg;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):rg,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Tn({type:n,features:[Ls]})}return n})(),$7={provide:Yl,useExisting:Qi(()=>of),multi:!0},of=(()=>{class n extends Ub{max;inputName="max";normalizeInput=e=>X3(e);createValidator=e=>A3(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Qr(n)))(r||n)}})();static \u0275dir=Tn({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&lc("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[Rr([$7]),Ni]})}return n})(),Y7={provide:Yl,useExisting:Qi(()=>Ro),multi:!0},Ro=(()=>{class n extends Ub{min;inputName="min";normalizeInput=e=>X3(e);createValidator=e=>E3(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Qr(n)))(r||n)}})();static \u0275dir=Tn({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&lc("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[Rr([Y7]),Ni]})}return n})(),q7={provide:Yl,useExisting:Qi(()=>Lr),multi:!0};var Lr=(()=>{class n extends Ub{required;inputName="required";normalizeInput=f0;createValidator=e=>T3;enabled(e){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Qr(n)))(r||n)}})();static \u0275dir=Tn({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&lc("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Rr([q7]),Ni]})}return n})();var Z3=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Co({type:n});static \u0275inj=yo({})}return n})(),Ib=class extends Ac{constructor(t,e,i){super(Nb(e),Lb(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){U3(this,!1,t),t.forEach((i,r)=>{V3(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function M3(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var _g=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,i=null){let r=this._reduceControls(e),o={};return M3(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Aa(r,o)}record(e,i=null){let r=this._reduceControls(e);return new Pb(r,i)}control(e,i,r){let o={};return this.useNonNullable?(M3(i)?o=i:(o.validators=i,o.asyncValidators=r),new Q0(e,yt(Ie({},o),{nonNullable:!0}))):new Q0(e,i,r)}array(e,i,r){let o=e.map(s=>this._createControl(s));return new Ib(o,i,r)}_reduceControls(e){let i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){if(e instanceof Q0)return e;if(e instanceof Ac)return e;if(Array.isArray(e)){let i=e[0],r=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(i,r,o)}else return this.control(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oi=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:tf,useValue:e.callSetDisabledState??gg}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Co({type:n});static \u0275inj=yo({imports:[Z3]})}return n})(),vg=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:$3,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:tf,useValue:e.callSetDisabledState??gg}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Co({type:n});static \u0275inj=yo({imports:[Z3]})}return n})();var J3=da(Ta());var Cn=class n{constructor(t,e){this.http=t;this.router=e;this.loadUserFromStorage()}apiUrl="/api";currentUserSubject=new wi(null);currentUser$=this.currentUserSubject.asObservable();loadUserFromStorage(){let t=localStorage.getItem("token"),e=localStorage.getItem("user");t&&e&&this.currentUserSubject.next(JSON.parse(e))}login(t,e){return this.http.post(`${this.apiUrl}/auth/login`,{username:t,password:e}).pipe(mi(i=>{i.token&&(localStorage.setItem("token",i.token),localStorage.setItem("user",JSON.stringify(i.user)),this.currentUserSubject.next(i.user))}))}isLoggedIn(){return this.getToken()!==null}redirectToLogin(){J3.default.fire({icon:"warning",title:"Session Expired",text:"Please log in again to continue.",confirmButtonText:"OK"}).then(()=>{this.router.navigate(["/login"])})}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.currentUserSubject.next(null),this.router.navigate(["/login"])}getToken(){return localStorage.getItem("token")}getCurrentUser(){let t=localStorage.getItem("user");return t?JSON.parse(t):null}isAuthenticated(){return!!this.getToken()}getAuthHeaders(){let t=this.getToken();return t?new To({Authorization:`Bearer ${t}`,"Content-Type":"application/json"}):new To({"Content-Type":"application/json"})}static \u0275fac=function(e){return new(e||n)(Ve(Un),Ve(Si))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})};var xg=class n{constructor(t,e){this.http=t;this.authService=e}apiUrl="/api/count";getClassesNumber(){return this.http.get(`${this.apiUrl}/classes`,{headers:this.authService.getAuthHeaders()})}getStudentsNumber(){return this.http.get(`${this.apiUrl}/students`,{headers:this.authService.getAuthHeaders()})}getTeachersNumber(){return this.http.get(`${this.apiUrl}/teachers`,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(e){return new(e||n)(Ve(Un),Ve(Cn))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})};var yg=class n{constructor(t){this.countService=t}studentCount=0;teacherCount=0;lessonCount=0;userName="\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645";userRole="\u0627\u0644\u062F\u0648\u0631";userAvatar="https://ui-avatars.com/api/?name=User&background=random";notificationCount=3;searchTerm;ngOnInit(){this.loadStats(),this.loadUserData()}loadStats(){As({students:this.countService.getStudentsNumber(),teachers:this.countService.getTeachersNumber(),classes:this.countService.getClassesNumber()}).subscribe(t=>{this.studentCount=t.students.count,this.teacherCount=t.teachers.count,this.lessonCount=t.classes.count})}loadUserData(){setTimeout(()=>{this.userName="\u064A\u0627\u0633\u0631 \u062E\u064A\u0634\u0647",this.userRole="\u0645\u062F\u064A\u0631 \u0627\u0644\u0646\u0638\u0627\u0645",this.userAvatar="https://ui-avatars.com/api/?name=\u0623\u062D\u0645\u062F+\u0645\u062D\u0645\u062F&background=0D8ABC&color=fff"},800)}static \u0275fac=function(e){return new(e||n)(Te(xg))};static \u0275cmp=vn({type:n,selectors:[["app-header"]],decls:28,vars:7,consts:[[1,"glass-header"],[1,"stats-container"],[1,"stat-item"],[1,"bi","bi-people"],[1,"bi","bi-person-video3"],[1,"bi","bi-journal-bookmark"],[1,"search-container",2,"position","relative","width","200px","height","40px","margin-right","10px","margin-left","10px","margin-top","10px","margin-bottom","10px"],["type","text","placeholder","\u0627\u0628\u062D\u062B",2,"width","100%","height","100%","padding-left","35px","border-radius","20px","border","1px solid #ccc","outline","none",3,"ngModelChange","ngModel"],[1,"bi","bi-search",2,"display","inline-block","position","absolute","top","50%","left","10px","transform","translateY(-50%)","color","#999"],[1,"logo"],[1,"bi","bi-people-fill"],[1,"user-actions"],[1,"notification-badge"],[1,"bi","bi-bell"],[1,"dot"],[1,"profile-pill"],["alt","Avatar",3,"src"]],template:function(e,i){e&1&&(a(0,"header",0)(1,"div",1)(2,"div",2),D(3,"i",3),a(4,"span"),c(5),l()(),a(6,"div",2),D(7,"i",4),a(8,"span"),c(9),l()(),a(10,"div",2),D(11,"i",5),a(12,"span"),c(13),l()()(),a(14,"div",6)(15,"input",7),ye("ngModelChange",function(o){return be(i.searchTerm,o)||(i.searchTerm=o),o}),l(),D(16,"i",8),l(),a(17,"div",9),D(18,"i",10),l(),a(19,"div",11)(20,"div",12),D(21,"i",13),a(22,"span",14),c(23),l()(),a(24,"div",15)(25,"span"),c(26),l(),D(27,"img",16),l()()()),e&2&&(h(5),Z("",i.studentCount," \u0637\u0627\u0644\u0628"),h(4),Z("",i.teacherCount," \u0623\u0633\u062A\u0627\u0630"),h(4),Z("",i.lessonCount," \u062D\u0635\u0629"),h(2),xe("ngModel",i.searchTerm),h(8),$(i.notificationCount),h(3),$(i.userName),h(),P("src",i.userAvatar,qp))},dependencies:[bn,oi,Yn,ri,Kn],styles:["[_ngcontent-%COMP%]:root{--glass-bg: rgba(255, 255, 255, .12);--glass-border: rgba(255, 255, 255, .2);--deep-blue: #003366;--accent-red: #ff4d4d}.glass-header[_ngcontent-%COMP%]{height:70px;background:var(--glass-bg);backdrop-filter:blur(15px);border-bottom:1px solid var(--glass-border);display:flex;justify-content:space-between;align-items:center;padding:0 25px;color:#fff;z-index:100;position:sticky;top:0;width:100%}.stats-container[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}.stat-item[_ngcontent-%COMP%]{background:#ffffff26;padding:8px 16px;border-radius:12px;display:flex;align-items:center;gap:10px;font-size:.9rem;border:1px solid rgba(255,255,255,.1);color:#fff;transition:all .3s ease;min-width:140px}.stat-item[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px);box-shadow:0 5px 15px #0003}.stat-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff}.user-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:25px}.notification-badge[_ngcontent-%COMP%]{position:relative;font-size:1.4rem;color:#fff;cursor:pointer;padding:8px;border-radius:50%;transition:all .3s ease}.notification-badge[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:scale(1.1)}.dot[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:var(--accent-red);color:#fff;font-size:.7rem;padding:2px 6px;border-radius:10px;font-weight:700;min-width:20px;text-align:center}.profile-pill[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:#fff;color:var(--deep-blue);padding:5px 5px 5px 15px;border-radius:30px;font-weight:700;box-shadow:0 4px 15px #0003;transition:all .3s ease;cursor:pointer;min-width:180px}.profile-pill[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00000040}.profile-pill[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:2px solid var(--deep-blue);object-fit:cover}@media (max-width: 480px){.glass-header[_ngcontent-%COMP%]{padding:0 10px}.profile-pill[_ngcontent-%COMP%]{padding:2px}.profile-pill[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px}}.profile-pill[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;color:#1f1f8b;font-weight:700;font-family:Amiri,serif}@media (max-width: 768px){.glass-header[_ngcontent-%COMP%]{padding:0 15px;height:60px;justify-content:flex-end}.stats-container[_ngcontent-%COMP%]{display:none}.profile-pill[_ngcontent-%COMP%]{min-width:auto;padding:4px 4px 4px 12px}.profile-pill[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.profile-pill[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;height:35px}.user-actions[_ngcontent-%COMP%]{gap:15px}.notification-badge[_ngcontent-%COMP%]{font-size:1.2rem}}search-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:12px;background:#fff;color:var(--deep-blue);padding:5px 5px 5px 15px;border-radius:30px;font-weight:700;box-shadow:0 4px 15px #0003;transition:all .3s ease;cursor:pointer;min-width:180px}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;font-size:1rem;color:var(--deep-blue);width:120px;font-weight:700;font-family:Amiri,serif;align-items:center}.search-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--deep-blue)}.search-container[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00000040}.mobile-menu-toggle[_ngcontent-%COMP%]{background:#ffffff1a;border-radius:10px;width:45px;height:45px;display:flex;align-items:center;justify-content:center;color:var(--text-light);font-size:1.5rem;cursor:pointer;transition:all .3s ease}.mobile-menu-toggle[_ngcontent-%COMP%]:hover{background:#fff3}.mobile-menu-toggle[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 768px){.mobile-menu-toggle[_ngcontent-%COMP%]{display:flex}}.main-content[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}"]})};function Z7(n,t){if(n&1){let e=Se();a(0,"div",15),R("click",function(){k(e);let r=T();return F(r.closeSidebar())}),D(1,"i",16),l()}}function J7(n,t){if(n&1){let e=Se();a(0,"i",17),R("click",function(){k(e);let r=T();return F(r.toggleCollapsed())}),l()}}function K7(n,t){if(n&1&&(a(0,"span",25),c(1),l()),n&2){let e=T().$implicit;h(),$(e.notification)}}function Q7(n,t){n&1&&D(0,"i",26)}function e8(n,t){if(n&1){let e=Se();a(0,"li")(1,"a",29),R("click",function(){let r=k(e).$implicit,o=T(2).$implicit,s=T();return F(s.navigateTo(r.route,o.id))}),c(2),l()()}if(n&2){let e=t.$implicit;h(2),$(e.label)}}function t8(n,t){if(n&1&&(a(0,"ul",27),te(1,e8,3,1,"li",28),l()),n&2){let e=T().$implicit;h(),P("ngForOf",e.subItems)}}function n8(n,t){if(n&1){let e=Se();a(0,"li",18)(1,"a",19),R("click",function(){let r=k(e).$implicit,o=T();return F(o.navigateTo(r.route,r.id))}),a(2,"div",20),D(3,"i"),te(4,K7,2,1,"span",21),l(),a(5,"span",22),c(6),l(),te(7,Q7,1,0,"i",23),l(),te(8,t8,2,1,"ul",24),l()}if(n&2){let e=t.$implicit,i=T();h(),Ue("active",i.activeSection===e.id),P("title",e.label),h(2),f4("bi ",e.icon,""),h(),P("ngIf",e.notification),h(),Ue("collapsed",i.collapsed),h(),$(e.label),h(),P("ngIf",e.subItems),h(),P("ngIf",e.subItems)}}function i8(n,t){n&1&&(a(0,"div",30),D(1,"i",31),l())}var bg=class n{constructor(t){this.router=t}isMobile=!1;sidebarClosed=new Xn;collapsed=!1;activeSection="dashboard";hoveredItem=null;userName="Yasser";userRole="\u0645\u062F\u064A\u0631 \u0627\u0644\u0646\u0638\u0627\u0645";userAvatar="https://ui-avatars.com/api/?name=\u0623\u062D\u0645\u062F+\u0645\u062D\u0645\u062F&background=0D8ABC&color=fff";menuItems=[{id:"dashboard",icon:"bi-speedometer2",label:"\u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645",route:"/home/lesson-management",notification:3},{id:"live-classes",icon:"bi-camera-video",label:"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u062D\u064A\u0629",route:"/home/live-class"},{id:"students",icon:"bi-people",label:"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0637\u0644\u0627\u0628",route:"/home/students-management",subItems:[{label:"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0637\u0644\u0627\u0628",route:"/home/students-management"},{label:"\u062D\u0633\u0627\u0628\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628",route:"/home/students-accounts"},{label:"\u0637\u0644\u0628\u0627\u062A \u0627\u0644\u062A\u0633\u062C\u064A\u0644",route:"/home/registration-requests"}]},{id:"teachers",icon:"bi-person-video3",label:"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629",route:"/home/teachers-management"},{id:"classes",icon:"bi-book",label:"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062D\u0635\u0635",route:"/home/lesson-management"},{id:"classrooms",icon:"bi-building",label:"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0642\u0627\u0639\u0627\u062A",route:"/home/rooms-management"},{id:"payments",icon:"bi-cash-coin",label:"\u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A",route:"/home/payments-management",notification:5},{id:"cards",icon:"bi-credit-card",label:"\u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062A",route:"/home/cards-management"},{id:"gate-interface",icon:"bi-door-open",label:"\u0648\u0627\u062C\u0647\u0629 \u0627\u0644\u0645\u062F\u062E\u0644",route:"/home/gate-interface"},{id:"settings",icon:"bi-gear",label:"\u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A",route:"/home/settings",subItems:[{label:"\u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0639\u0627\u0645\u0629",route:"/home/settings/general"},{label:"\u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646",route:"/home/settings/permissions"},{label:"\u0646\u0633\u062E \u0627\u062D\u062A\u064A\u0627\u0637\u064A",route:"/home/settings/backup"}]}];ngOnInit(){this.setActiveFromRoute(),this.checkScreenSize()}onResize(){this.checkScreenSize()}checkScreenSize(){this.isMobile=window.innerWidth<=768,this.isMobile||(this.collapsed=!1)}setActiveFromRoute(){let t=this.router.url,e=this.menuItems.find(i=>t.includes(i.route)||i.subItems&&i.subItems.some(r=>t.includes(r.route)));e&&(this.activeSection=e.id)}toggleCollapsed(){this.isMobile||(this.collapsed=!this.collapsed)}navigateTo(t,e){this.activeSection=e,this.router.navigate([t]).then(()=>{this.isMobile&&this.closeSidebar()})}closeSidebar(){this.sidebarClosed.emit()}logout(){this.router.navigate(["/login"])}onItemHover(t){this.collapsed&&!this.isMobile&&(this.hoveredItem=t)}onItemLeave(){this.hoveredItem=null}static \u0275fac=function(e){return new(e||n)(Te(Si))};static \u0275cmp=vn({type:n,selectors:[["app-nav-bar"]],hostBindings:function(e,i){e&1&&R("resize",function(){return i.onResize()},!1,es)},inputs:{isMobile:"isMobile"},outputs:{sidebarClosed:"sidebarClosed"},decls:19,vars:12,consts:[[1,"sidebar"],["class","mobile-close-btn",3,"click",4,"ngIf"],[1,"user-info-compact"],[1,"user-avatar",3,"src","alt"],[1,"user-details"],[1,"user-name"],[1,"user-role"],["class","bi bi-chevron-left toggle-icon",3,"click",4,"ngIf"],[1,"nav-menu"],[1,"nav-list"],["class","nav-item",4,"ngFor","ngForOf"],[1,"logout-section"],[1,"logout-btn",3,"click"],[1,"bi","bi-box-arrow-left"],["class","mini-logo",4,"ngIf"],[1,"mobile-close-btn",3,"click"],[1,"bi","bi-x-lg"],[1,"bi","bi-chevron-left","toggle-icon",3,"click"],[1,"nav-item"],[1,"nav-link",3,"click","title"],[1,"nav-icon"],["class","notification-badge",4,"ngIf"],[1,"nav-label"],["class","bi bi-chevron-left arrow",4,"ngIf"],["class","sub-menu",4,"ngIf"],[1,"notification-badge"],[1,"bi","bi-chevron-left","arrow"],[1,"sub-menu"],[4,"ngFor","ngForOf"],[3,"click"],[1,"mini-logo"],[1,"bi","bi-building"]],template:function(e,i){e&1&&(a(0,"div",0),te(1,Z7,2,0,"div",1),a(2,"div",2),D(3,"img",3),a(4,"div",4)(5,"p",5),c(6),l(),a(7,"small",6),c(8),l()(),te(9,J7,1,0,"i",7),l(),a(10,"div",8)(11,"ul",9),te(12,n8,9,12,"li",10),l()(),a(13,"div",11)(14,"a",12),R("click",function(){return i.logout()}),D(15,"i",13),a(16,"span"),c(17,"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062E\u0631\u0648\u062C"),l()()(),te(18,i8,2,0,"div",14),l()),e&2&&(Ue("mobile-open",i.isMobile),h(),P("ngIf",i.isMobile),h(2),P("src",i.userAvatar,qp)("alt",i.userName),h(3),$(i.userName),h(2),$(i.userRole),h(),P("ngIf",!i.isMobile),h(3),P("ngForOf",i.menuItems),h(4),Ue("collapsed",i.collapsed),h(2),P("ngIf",i.collapsed&&!i.isMobile))},dependencies:[bn,ii,Wn],styles:["[_ngcontent-%COMP%]:root{--sidebar-bg: rgba(255, 255, 255, .08);--sidebar-border: rgba(255, 255, 255, .15);--glass-blur: 20px;--text-primary: #ffffff;--text-secondary: rgba(255, 255, 255, .7);--accent-color: #ffffff;--hover-bg: rgba(255, 255, 255, .2);--active-bg: rgba(255, 255, 255, .25);--active-color: #0a66c2;--shadow-color: rgba(0, 0, 0, .2);--logout-color: rgba(255, 153, 153, .9)}*[_ngcontent-%COMP%]{color:#fff}.sidebar[_ngcontent-%COMP%]{width:100%;height:100%;background:var(--sidebar-bg);backdrop-filter:blur(var(--glass-blur));border-left:1px solid var(--sidebar-border);display:flex;flex-direction:column;padding:20px 0;color:var(--text-primary);position:relative;overflow:hidden}.mobile-close-btn[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;width:40px;height:40px;background:#ffffff1a;border-radius:12px;display:flex;align-items:center;justify-content:center;color:var(--text-primary);font-size:1.2rem;cursor:pointer;transition:all .3s;border:1px solid var(--sidebar-border);z-index:1001}.mobile-close-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:rotate(90deg)}.user-info-compact[_ngcontent-%COMP%]{padding:25px 20px;display:flex;align-items:center;gap:15px;background:#ffffff0d;border-bottom:1px solid var(--sidebar-border);position:relative;transition:all .3s}.sidebar.collapsed[_ngcontent-%COMP%]   .user-info-compact[_ngcontent-%COMP%]{padding:20px 15px;justify-content:center}.user-avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:12px;border:2px solid rgba(255,255,255,.3);object-fit:cover;box-shadow:0 4px 12px #0003;transition:all .3s}.sidebar.collapsed[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:40px;height:40px}.user-details[_ngcontent-%COMP%]{flex:1;overflow:hidden}.user-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user-role[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);display:block;margin-top:3px}.toggle-icon[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1.2rem;cursor:pointer;transition:all .3s;padding:5px;border-radius:8px}.toggle-icon[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:var(--hover-bg);transform:rotate(180deg)}.sidebar.collapsed[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{display:none}.nav-menu[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px 0;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.2) transparent}.nav-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.nav-item[_ngcontent-%COMP%]{position:relative;margin:5px 15px}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 15px;color:var(--text-secondary);text-decoration:none;border-radius:12px;transition:all .3s;cursor:pointer;position:relative;overflow:hidden;gap:15px}.nav-link[_ngcontent-%COMP%]:hover:not(.active):not(.logout-btn){background:var(--hover-bg);color:var(--text-primary);border-color:var(--sidebar-border);transform:translate(-5px);padding-right:20px}.nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.1)}.nav-link.active[_ngcontent-%COMP%]{background:var(--active-bg);color:var(--accent-color);border-color:var(--sidebar-border);font-weight:600;padding-right:20px}.nav-link.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent-color);transform:scale(1.1)}.nav-icon[_ngcontent-%COMP%]{position:relative;width:24px;height:24px;display:flex;align-items:center;justify-content:center;transition:all .3s}.nav-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;transition:all .3s}.notification-badge[_ngcontent-%COMP%]{position:absolute;top:-5px;left:-5px;background:#ff6b6b;color:#fff;font-size:.7rem;padding:2px 6px;border-radius:10px;font-weight:700;min-width:18px;text-align:center;box-shadow:0 2px 8px #ff6b6b4d}.nav-label[_ngcontent-%COMP%]{flex:1;font-size:.9rem;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:all .3s}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{opacity:0;width:0}.arrow[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);transition:transform .3s}.nav-link[_ngcontent-%COMP%]:hover   .arrow[_ngcontent-%COMP%]{transform:translate(-3px)}.sub-menu[_ngcontent-%COMP%]{list-style:none;padding:0;margin:5px 0 5px 30px;background:#0000001a;border-radius:10px;overflow:hidden;max-height:0;transition:max-height .3s ease-out}.nav-item[_ngcontent-%COMP%]:hover   .sub-menu[_ngcontent-%COMP%]{max-height:300px;transition:max-height .3s ease-in}.sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0}.sub-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:10px 15px;color:var(--text-secondary);text-decoration:none;font-size:.9rem;transition:all .3s;cursor:pointer}.sub-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:var(--text-primary);padding-right:20px}.logout-section[_ngcontent-%COMP%]{padding:20px;border-top:1px solid var(--sidebar-border);background:#0000001a}.logout-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:12px 20px;color:var(--logout-color);text-decoration:none;border-radius:12px;transition:all .3s;cursor:pointer;background:#ff6b6b1a;border:1px solid rgba(255,107,107,.2)}.logout-btn[_ngcontent-%COMP%]:hover{background:#ff6b6b33;color:#fff;transform:translate(-5px)}.logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.logout-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-size:.95rem;font-weight:500;transition:all .3s}.sidebar.collapsed[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:0;width:0}.mini-logo[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:50%;transform:translate(50%);width:40px;height:40px;background:#ffffff1a;border-radius:10px;display:flex;align-items:center;justify-content:center;color:var(--text-primary);font-size:1.5rem;cursor:pointer;transition:all .3s}.mini-logo[_ngcontent-%COMP%]:hover{background:#fff3;transform:translate(50%) scale(1.1)}.nav-link[_ngcontent-%COMP%]:hover   .nav-label.collapsed[_ngcontent-%COMP%]{position:absolute;right:70px;background:#000000e6;color:#fff;padding:8px 15px;border-radius:8px;white-space:nowrap;opacity:1;width:auto;z-index:1000;box-shadow:0 4px 15px #0000004d;font-size:.9rem}.nav-menu[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.nav-menu[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d;border-radius:4px}.nav-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:4px}.nav-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff4d}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{box-shadow:-5px 0 25px #0000004d}.mobile-close-btn[_ngcontent-%COMP%]{display:flex}.toggle-icon[_ngcontent-%COMP%]{display:none}.sidebar.collapsed[_ngcontent-%COMP%]{width:100%}.nav-link[_ngcontent-%COMP%]{padding:12px 15px}}"]})};function r8(n,t){if(n&1){let e=Se();a(0,"div",8),R("click",function(){k(e);let r=T();return F(r.toggleSidebar())}),D(1,"i",9),l()}if(n&2){let e=T();h(),Ue("bi-list",!e.sidebarOpen)("bi-x",e.sidebarOpen)}}var Cg=class n{sidebarOpen=!1;isMobile=!1;ngOnInit(){this.checkScreenSize(),this.setupKeyboardListeners()}onResize(t){this.checkScreenSize()}onKeyDown(t){t.key==="Escape"&&this.sidebarOpen&&this.isMobile&&this.closeSidebar()}checkScreenSize(){this.isMobile=window.innerWidth<=768,!this.isMobile&&this.sidebarOpen&&this.closeSidebar()}setupKeyboardListeners(){document.addEventListener("keydown",t=>{(t.ctrlKey||t.metaKey)&&t.key==="m"&&(t.preventDefault(),this.toggleSidebar())})}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen,this.updateBodyScroll(),this.playClickSound()}closeSidebar(){this.sidebarOpen=!1,this.updateBodyScroll()}updateBodyScroll(){this.isMobile&&(this.sidebarOpen?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"))}playClickSound(){}isLandscape(){return window.innerWidth>window.innerHeight&&this.isMobile}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=vn({type:n,selectors:[["app-home"]],hostBindings:function(e,i){e&1&&R("resize",function(o){return i.onResize(o)},!1,es)("keydown",function(o){return i.onKeyDown(o)},!1,es)},decls:9,vars:6,consts:[[1,"app-container"],[1,"app-header"],[1,"main-content"],["class","mobile-menu-toggle",3,"click",4,"ngIf"],[1,"app-sidebar",3,"sidebarClosed","isMobile"],[1,"mobile-overlay",3,"click"],[1,"content-area"],[1,"page-content"],[1,"mobile-menu-toggle",3,"click"],[1,"bi"]],template:function(e,i){e&1&&(a(0,"div",0),D(1,"app-header",1),a(2,"div",2),te(3,r8,2,4,"div",3),a(4,"app-nav-bar",4),R("sidebarClosed",function(){return i.closeSidebar()}),l(),a(5,"div",5),R("click",function(){return i.closeSidebar()}),l(),a(6,"main",6)(7,"div",7),D(8,"router-outlet"),l()()()()),e&2&&(h(3),P("ngIf",i.isMobile),h(),Ue("sidebar-open",i.sidebarOpen),P("isMobile",i.isMobile),h(),Ue("active",i.sidebarOpen&&i.isMobile))},dependencies:[bn,Wn,Y0,Bl,yg,bg],styles:["[_ngcontent-%COMP%]:root{--header-height: 70px;--sidebar-width: 280px;--mobile-sidebar-width: 280px;--glass-bg: rgba(255, 255, 255, .1);--glass-border: rgba(255, 255, 255, .15);--overlay-color: rgba(0, 0, 0, .5);--transition-speed: .3s;--blur-intensity: 20px;--shadow-intensity: 0 10px 30px rgba(0, 0, 0, .2)}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.app-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden;background:linear-gradient(135deg,#0a66c2f2,#004182e6),url(https://images.unsplash.com/photo-1509062522246-3755977927d7?q=80&w=2000);background-size:cover;background-position:center;background-attachment:fixed}.app-header[_ngcontent-%COMP%]{height:var(--header-height);position:sticky;top:0;z-index:100;flex-shrink:0}.main-content[_ngcontent-%COMP%]{display:flex;flex:1;height:calc(100vh - var(--header-height));position:relative;overflow:hidden}.mobile-menu-toggle[_ngcontent-%COMP%]{display:none;position:fixed;top:85px;right:25px;z-index:1002;background:var(--glass-bg);backdrop-filter:blur(var(--blur-intensity));border:1px solid var(--glass-border);border-radius:12px;width:48px;height:48px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.5rem;cursor:pointer;transition:all var(--transition-speed);box-shadow:var(--shadow-intensity)}.mobile-menu-toggle[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.mobile-menu-toggle[_ngcontent-%COMP%]:active{transform:scale(.95)}.app-sidebar[_ngcontent-%COMP%]{width:var(--sidebar-width);height:100%;flex-shrink:0;transition:transform var(--transition-speed);z-index:999;position:relative}.content-area[_ngcontent-%COMP%]{flex:1;height:100%;overflow-y:auto;padding:25px;position:relative;background:#ffffff08;backdrop-filter:blur(5px)}.page-content[_ngcontent-%COMP%]{width:100%;max-width:1400px;margin:0 auto;min-height:100%;position:relative}.mobile-overlay[_ngcontent-%COMP%]{display:none;position:fixed;top:var(--header-height);left:0;width:100%;height:calc(100% - var(--header-height));background:var(--overlay-color);z-index:998;opacity:0;visibility:hidden;transition:all var(--transition-speed);backdrop-filter:blur(3px)}.mobile-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d;border-radius:4px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:4px;transition:background var(--transition-speed)}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff4d}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.page-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards}@media (max-width: 768px){[_ngcontent-%COMP%]:root{--header-height: 65px}.mobile-menu-toggle[_ngcontent-%COMP%]{display:flex!important;top:80px;right:20px}.app-sidebar[_ngcontent-%COMP%]{position:fixed;top:var(--header-height);right:-100%;width:var(--mobile-sidebar-width);height:calc(100% - var(--header-height));transform:translate(100%);transition:transform var(--transition-speed);z-index:1000;box-shadow:-10px 0 40px #0000004d}.app-sidebar.sidebar-open[_ngcontent-%COMP%]{transform:translate(0);right:0}.mobile-overlay[_ngcontent-%COMP%]{display:block}.content-area[_ngcontent-%COMP%]{padding:20px 15px}}@media (max-width: 480px){[_ngcontent-%COMP%]:root{--mobile-sidebar-width: 260px;--header-height: 60px}.mobile-menu-toggle[_ngcontent-%COMP%]{top:75px;right:15px;width:44px;height:44px;font-size:1.3rem}.content-area[_ngcontent-%COMP%]{padding:15px 12px}}@media (min-width: 1440px){[_ngcontent-%COMP%]:root{--sidebar-width: 300px}.content-area[_ngcontent-%COMP%]{padding:30px}.page-content[_ngcontent-%COMP%]{max-width:1600px}}.content-area[_ngcontent-%COMP%]{position:relative!important;z-index:1!important}body.modal-open[_ngcontent-%COMP%]{overflow:hidden!important}.modal-overlay[_ngcontent-%COMP%]{position:fixed!important;inset:0!important;background:#000000d9!important;backdrop-filter:blur(12px)!important;display:flex!important;align-items:center!important;justify-content:center!important;z-index:99999!important;padding:20px!important;animation:_ngcontent-%COMP%_fadeIn .2s ease!important}.modal[_ngcontent-%COMP%]{background:#fff!important;border-radius:24px!important;width:100%!important;max-width:600px!important;max-height:90vh!important;overflow-y:auto!important;box-shadow:0 30px 80px #00000080!important;animation:_ngcontent-%COMP%_modalScaleIn .3s cubic-bezier(.175,.885,.32,1.275)!important;position:relative!important;z-index:100000!important}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_modalScaleIn{0%{opacity:0;transform:scale(.9) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}.modal-lg[_ngcontent-%COMP%]{max-width:900px!important}"]})};var Tc=da(Ta());function o8(n,t){n&1&&(a(0,"span"),c(1,"\u062F\u062E\u0648\u0644 \u0627\u0644\u0646\u0638\u0627\u0645"),l())}function s8(n,t){n&1&&D(0,"div",29)}var wg=class n{constructor(t){this.router=t}username="";password="";rememberMe=!1;currentYear=new Date().getFullYear();isLoading=!1;passwordFieldType="password";ngOnInit(){this.loadRememberedUser()}loadRememberedUser(){let t=localStorage.getItem("rememberedUser");if(t)try{let e=JSON.parse(t);e.rememberMe&&(this.username=e.username,this.rememberMe=!0)}catch{localStorage.removeItem("rememberedUser")}}togglePasswordVisibility(){this.passwordFieldType=this.passwordFieldType==="password"?"text":"password"}login(){return _n(this,null,function*(){if(!this.isFormValid()){Tc.default.fire({title:"\u062E\u0637\u0623",text:"\u064A\u0631\u062C\u0649 \u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A",icon:"error",confirmButtonColor:"#0a66c2"});return}this.isLoading=!0;try{let t=yield fetch("https://redox-sm.onrender.com/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username.trim(),password:this.password})}),e=yield t.json();t.ok&&e.token?(localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),this.rememberMe?localStorage.setItem("rememberedUser",JSON.stringify({username:this.username.trim(),rememberMe:!0})):localStorage.removeItem("rememberedUser"),yield Tc.default.fire({title:"\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644",text:"\u062C\u0627\u0631\u064A \u062A\u062D\u0648\u064A\u0644\u0643 \u0625\u0644\u0649 \u0645\u062F\u0631\u0633\u0629 \u0627\u0644\u0631\u0648\u0627\u062F...",icon:"success",timer:1500,showConfirmButton:!1}),this.router.navigate(["/home/lesson-management"])):Tc.default.fire({title:"\u0641\u0634\u0644 \u0627\u0644\u062F\u062E\u0648\u0644",text:e.message||"\u0628\u064A\u0627\u0646\u0627\u062A \u063A\u064A\u0631 \u0635\u062D\u064A\u062D\u0629",icon:"error"})}catch{Tc.default.fire({title:"\u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u0627\u062A\u0635\u0627\u0644",text:"\u064A\u0631\u062C\u0649 \u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0627\u0644\u0625\u0646\u062A\u0631\u0646\u062A",icon:"error"})}finally{this.isLoading=!1}})}onUsernameKeyPress(t){t.key==="Enter"&&document.getElementById("password")?.focus()}onPasswordKeyPress(t){t.key==="Enter"&&this.login()}forgotPassword(){Tc.default.fire({title:"\u0646\u0633\u064A\u062A \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631\u061F",text:"\u064A\u0631\u062C\u0649 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0625\u062F\u0627\u0631\u0629 \u0645\u062F\u0631\u0633\u0629 \u0627\u0644\u0631\u0648\u0627\u062F \u0644\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u062D\u0633\u0627\u0628\u0643.",icon:"info",confirmButtonText:"\u062D\u0633\u0646\u0627\u064B"})}navigateToRegister(){this.router.navigate(["/register"])}isFormValid(){return this.username.trim().length>0&&this.password.length>0}getGreeting(){return new Date().getHours()<12?"\u0635\u0628\u0627\u062D \u0627\u0644\u062E\u064A\u0631":"\u0645\u0633\u0627\u0621 \u0627\u0644\u062E\u064A\u0631"}static \u0275fac=function(e){return new(e||n)(Te(Si))};static \u0275cmp=vn({type:n,selectors:[["app-login"]],decls:44,vars:13,consts:[[1,"bg-animation"],[1,"login-container"],[1,"glass-card","animate-fade-up"],[1,"top-badge"],[1,"card-header"],[1,"logo-circle"],[1,"bi","bi-mortarboard-fill"],[1,"header-text"],[1,"title"],[1,"subtitle"],[1,"login-form",3,"ngSubmit"],[1,"input-group"],[1,"input-wrapper"],["type","text","name","username","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645",3,"ngModelChange","keypress","ngModel","disabled"],[1,"bi","bi-person-fill"],["name","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"ngModelChange","keypress","type","ngModel","disabled"],[1,"bi",2,"cursor","pointer",3,"click","ngClass"],[1,"form-options"],[1,"checkbox-container"],["type","checkbox","name","rememberMe",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"forgot-link",3,"click"],[1,"button-group"],["type","submit",1,"btn-login",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"divider-line"],[1,"btn-new",3,"click","disabled"],[1,"footer-info"],[1,"spinner"]],template:function(e,i){e&1&&(D(0,"div",0),a(1,"div",1)(2,"div",2)(3,"div",3),c(4,"\u0645\u062F\u0631\u0633\u0629 \u0627\u0644\u0631\u0648\u0627\u062F \u0644\u0644\u062A\u0639\u0644\u064A\u0645 \u0648 \u0627\u0644\u0645\u0639\u0627\u0631\u0641"),l(),a(5,"div",4)(6,"div",5),D(7,"i",6),l(),a(8,"div",7)(9,"h2",8),c(10,"Ta3limi"),l(),a(11,"p",9),c(12),l()()(),a(13,"form",10),R("ngSubmit",function(){return i.login()}),a(14,"div",11)(15,"label"),c(16,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),l(),a(17,"div",12)(18,"input",13),ye("ngModelChange",function(o){return be(i.username,o)||(i.username=o),o}),R("keypress",function(o){return i.onUsernameKeyPress(o)}),l(),D(19,"i",14),l()(),a(20,"div",11)(21,"label"),c(22,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),l(),a(23,"div",12)(24,"input",15),ye("ngModelChange",function(o){return be(i.password,o)||(i.password=o),o}),R("keypress",function(o){return i.onPasswordKeyPress(o)}),l(),a(25,"i",16),R("click",function(){return i.togglePasswordVisibility()}),l()()(),a(26,"div",17)(27,"label",18)(28,"input",19),ye("ngModelChange",function(o){return be(i.rememberMe,o)||(i.rememberMe=o),o}),l(),D(29,"span",20),c(30," \u062A\u0630\u0643\u0631\u0646\u064A "),l(),a(31,"a",21),R("click",function(){return i.forgotPassword()}),c(32,"\u0646\u0633\u064A\u062A \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631\u061F"),l()(),a(33,"div",22)(34,"button",23),te(35,o8,2,0,"span",24)(36,s8,1,0,"div",25),l()()(),a(37,"div",26)(38,"span"),c(39,"\u0623\u0648"),l()(),a(40,"button",27),R("click",function(){return i.navigateToRegister()}),c(41," \u0625\u0646\u0634\u0627\u0621 \u062D\u0633\u0627\u0628 \u062C\u062F\u064A\u062F "),l(),a(42,"footer",28),c(43),l()()()),e&2&&(h(12),Z("",i.getGreeting(),"\u060C \u0646\u0638\u0627\u0645 \u0627\u0644\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0630\u0643\u064A"),h(6),xe("ngModel",i.username),P("disabled",i.isLoading),h(6),P("type",i.passwordFieldType),xe("ngModel",i.password),P("disabled",i.isLoading),h(),P("ngClass",i.passwordFieldType==="password"?"bi-eye-slash-fill":"bi-eye-fill"),h(3),xe("ngModel",i.rememberMe),h(6),P("disabled",i.isLoading||!i.isFormValid()),h(),P("ngIf",!i.isLoading),h(),P("ngIf",i.isLoading),h(4),P("disabled",i.isLoading),h(3),Z(" \xA9 ",i.currentYear," Redox Club | \u0627\u0644\u0625\u0635\u062F\u0627\u0631 1.0.3 "))},dependencies:[oi,xr,Yn,$l,ri,vr,Kn,Oo,bn,Ol,Wn],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;width:100vw;padding:20px;position:relative}.bg-animation[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;background:linear-gradient(135deg,#0a66c2f2,#004182f2),url(https://images.unsplash.com/photo-1509062522246-3755977927d7?q=80&w=2000);background-size:cover;background-position:center}.glass-card[_ngcontent-%COMP%]{background:#ffffff1f;backdrop-filter:blur(25px);-webkit-backdrop-filter:blur(25px);border:1px solid var(--glass-border);border-radius:40px;padding:40px;color:var(--text-light);width:100%;max-width:420px;box-shadow:0 25px 50px #0000004d;text-align:center}.top-badge[_ngcontent-%COMP%]{background:#fff;color:var(--dark-blue);display:inline-block;padding:8px 20px;border-radius:30px;font-weight:700;font-size:1.1rem;margin-bottom:25px;box-shadow:0 4px 10px #0000001a}.card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:30px}.logo-circle[_ngcontent-%COMP%]{width:70px;height:70px;background:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:2.2rem;color:var(--main-blue);margin:0 auto 15px}.title[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:700}.subtitle[_ngcontent-%COMP%]{margin:5px 0 30px;opacity:.8;font-size:.9rem}.login-form[_ngcontent-%COMP%]{width:100%}.input-group[_ngcontent-%COMP%]{margin-bottom:18px;text-align:right;width:100%}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:.85rem;margin-right:10px;color:var(--text-light)}.input-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%!important;padding:14px 15px 14px 45px;border-radius:18px;border:none;font-size:1rem;color:var(--text-dark);background:#fff;outline:none;direction:rtl}.input-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:var(--main-blue);font-size:1.1rem;z-index:5}.form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;font-size:.85rem}.forgot-link[_ngcontent-%COMP%]{color:#90c4ff;cursor:pointer;text-decoration:none;transition:all .3s ease}.forgot-link[_ngcontent-%COMP%]:hover{color:#fff;text-decoration:underline}.btn-login[_ngcontent-%COMP%]{width:100%;padding:15px;border-radius:18px;border:none;background:#fff;color:var(--dark-blue);font-weight:700;font-size:1.1rem;cursor:pointer;transition:.3s;margin-top:10px}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.02);background:#f0f0f0}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-new[_ngcontent-%COMP%]{width:100%;padding:12px;border-radius:18px;border:1px solid white;background:transparent;color:#fff;cursor:pointer;margin-top:10px;transition:all .3s ease}.btn-new[_ngcontent-%COMP%]:hover{background:#ffffff1a}.divider-line[_ngcontent-%COMP%]{margin:25px 0;border-bottom:1px solid rgba(255,255,255,.2);position:relative}.divider-line[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:-10px;left:50%;transform:translate(-50%);background:var(--dark-blue);padding:0 15px;font-size:.8rem;border-radius:10px}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:3px solid rgba(0,0,0,.1);border-radius:50%;border-top-color:var(--main-blue);animation:_ngcontent-%COMP%_spin .8s linear infinite;display:inline-block}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.animate-fade-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_floatIn .8s ease-out forwards}@keyframes _ngcontent-%COMP%_floatIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.glass-card[_ngcontent-%COMP%]{padding:30px 20px;border-radius:30px}.logo-circle[_ngcontent-%COMP%]{width:60px;height:60px;font-size:1.8rem}.title[_ngcontent-%COMP%]{font-size:1.5rem}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 12px 12px 40px}.btn-login[_ngcontent-%COMP%], .btn-new[_ngcontent-%COMP%]{padding:12px}}"]})};var Da=class n{constructor(t,e){this.http=t;this.authService=e}apiUrl="/api";getClasses(){return this.http.get(`${this.apiUrl}/classes`,{headers:this.authService.getAuthHeaders()})}getClassById(t){return this.http.get(`${this.apiUrl}/classes/${t}`,{headers:this.authService.getAuthHeaders()})}createClass(t){return this.http.post(`${this.apiUrl}/classes`,t,{headers:this.authService.getAuthHeaders()})}updateClass(t,e){return this.http.put(`${this.apiUrl}/classes/${t}`,e,{headers:this.authService.getAuthHeaders()})}deleteClass(t){return this.http.delete(`${this.apiUrl}/classes/${t}`,{headers:this.authService.getAuthHeaders()})}enrollStudent(t,e){return this.http.post(`${this.apiUrl}/classes/${t}/enroll/${e}`,{},{headers:this.authService.getAuthHeaders()})}unenrollStudent(t,e){return this.http.delete(`${this.apiUrl}/classes/${t}/unenroll/${e}`,{headers:this.authService.getAuthHeaders()})}getAvailableClasses(t,e){let i=`${this.apiUrl}/classes/available`,r={};return t&&(r.academicYear=t),e&&(r.studentId=e),this.http.get(i,{params:r,headers:this.authService.getAuthHeaders()})}getAvailableClassesForStudent(t,e){return this.http.get(`${this.apiUrl}/classes/available/${t}?studentId=${e}`,{headers:this.authService.getAuthHeaders()})}addStudentToClass(t,e){return this.http.post(`${this.apiUrl}/classes/${t}/enroll/${e}`,{},{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(e){return new(e||n)(Ve(Un),Ve(Cn))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})};var oo=class n{constructor(t,e){this.http=t;this.authService=e}apiUrl="/api";getStudents(){return this.http.get(`${this.apiUrl}/students`,{headers:this.authService.getAuthHeaders()})}getStudentById(t){return this.http.get(`${this.apiUrl}/students/${t}`,{headers:this.authService.getAuthHeaders()})}createStudent(t){return this.http.post(`${this.apiUrl}/students`,t,{headers:this.authService.getAuthHeaders()})}updateStudent(t,e){return this.http.put(`${this.apiUrl}/students/${t}`,e,{headers:this.authService.getAuthHeaders()})}deleteStudent(t){return this.http.delete(`${this.apiUrl}/students/${t}`,{headers:this.authService.getAuthHeaders()})}payRegistrationFee(t,e){return this.http.post(`${this.apiUrl}/students/${t}/pay-registration`,e,{headers:this.authService.getAuthHeaders()})}getStudentClasses(t){return this.http.get(`${this.apiUrl}/students/${t}/classes`,{headers:this.authService.getAuthHeaders()})}getStudentsWithoutAccounts(){return this.http.get(`${this.apiUrl}/students?hasAccount=false`,{headers:this.authService.getAuthHeaders()})}enrollStudentMultiple(t,e){return this.http.post(`${this.apiUrl}/students/${t}/enroll-multiple`,e,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(e){return new(e||n)(Ve(Un),Ve(Cn))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})};var Pa=class n{constructor(t,e){this.http=t;this.authService=e}apiUrl="/api";getLiveClasses(t){let e=`${this.apiUrl}/live-classes`;if(t){let i=new URLSearchParams;t.status&&i.append("status",t.status),t.date&&i.append("date",t.date),e+=`?${i.toString()}`}return this.http.get(e,{headers:this.authService.getAuthHeaders()})}getLiveClassById(t){return this.http.get(`${this.apiUrl}/live-classes/${t}`,{headers:this.authService.getAuthHeaders()})}createLiveClass(t){return this.http.post(`${this.apiUrl}/live-classes`,t,{headers:this.authService.getAuthHeaders()})}updateLiveClass(t,e){return this.http.put(`${this.apiUrl}/live-classes/${t}`,e,{headers:this.authService.getAuthHeaders()})}recordAttendance(t,e){return this.http.post(`${this.apiUrl}/live-classes/${t}/attendance`,e,{headers:this.authService.getAuthHeaders()})}startLiveClass(t){return this.http.put(`${this.apiUrl}/live-classes/${t}`,{status:"ongoing"},{headers:this.authService.getAuthHeaders()})}endLiveClass(t,e){let i={status:"completed"};return e&&(i.endTime=e),this.http.put(`${this.apiUrl}/live-classes/${t}`,i,{headers:this.authService.getAuthHeaders()})}cancelLiveClass(t){return this.http.put(`${this.apiUrl}/live-classes/${t}`,{status:"cancelled"},{headers:this.authService.getAuthHeaders()})}getClassAttendance(t){return this.http.get(`${this.apiUrl}/live-classes/class/${t}/attendance`,{headers:this.authService.getAuthHeaders()})}autoMarkAbsent(t){return this.http.post(`${this.apiUrl}/live-classes/${t}/auto-mark-absent`,{},{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(e){return new(e||n)(Ve(Un),Ve(Cn))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ia=class n{constructor(t,e){this.http=t;this.authService=e}apiUrl="/api";getPayments(t){return this.http.get(`${this.apiUrl}/payments`,{params:t,headers:this.authService.getAuthHeaders()})}cancelPayment(t){return this.http.put(`${this.apiUrl}/payments/${t}/cancel`,{},{headers:this.authService.getAuthHeaders()})}deletePayment(t){return this.http.delete(`${this.apiUrl}/payments/${t}`,{headers:this.authService.getAuthHeaders()})}updatePaymentAmount(t,e){return this.http.put(`${this.apiUrl}/payments/${t}/amount`,{amount:e},{headers:this.authService.getAuthHeaders()})}createPayment(t){return this.http.post(`${this.apiUrl}/payments`,t,{headers:this.authService.getAuthHeaders()})}payPayment(t,e){return this.http.put(`${this.apiUrl}/payments/${t}/pay`,e,{headers:this.authService.getAuthHeaders()})}getClassPayments(t){return this.http.get(`${this.apiUrl}/payments/class/${t}`,{headers:this.authService.getAuthHeaders()})}getStudentPayments(t){return this.http.get(`${this.apiUrl}/payments/student/${t}`,{headers:this.authService.getAuthHeaders()})}recordPayment(t){return this.http.post(`${this.apiUrl}/payments`,t,{headers:this.authService.getAuthHeaders()})}updatePayment(t,e){return this.http.put(`${this.apiUrl}/payments/${t}`,e,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(e){return new(e||n)(Ve(Un),Ve(Cn))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})};var K3=()=>[];function a8(n,t){if(n&1&&(a(0,"option",71),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Jn(" ",e.name," - ",e.subjects==null?null:e.subjects.join(", ")," ")}}function l8(n,t){if(n&1&&(a(0,"option",71),c(1),l()),n&2){let e=t.$implicit;P("value",e.value),h(),Z(" ",e.label," ")}}function u8(n,t){if(n&1&&(a(0,"option",71),c(1),l()),n&2){let e=t.$implicit;P("value",e),h(),Z(" ",e," ")}}function c8(n,t){if(n&1&&(a(0,"option",71),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Jn(" ",e.name," (\u0627\u0644\u0633\u0639\u0629: ",e.capacity,") ")}}function d8(n,t){if(n&1){let e=Se();a(0,"div",72)(1,"div",42)(2,"div",43)(3,"label",73),c(4,"\u0627\u0644\u064A\u0648\u0645:"),l(),a(5,"select",74),ye("ngModelChange",function(r){k(e);let o=T(3);return be(o.newScheduleItem.day,r)||(o.newScheduleItem.day=r),F(r)}),a(6,"option",18),c(7,"\u0627\u062E\u062A\u0631 \u0627\u0644\u064A\u0648\u0645"),l(),te(8,l8,2,2,"option",33),l()(),a(9,"div",43)(10,"label",75),c(11,"\u0627\u0644\u0648\u0642\u062A:"),l(),a(12,"select",76),ye("ngModelChange",function(r){k(e);let o=T(3);return be(o.newScheduleItem.time,r)||(o.newScheduleItem.time=r),F(r)}),a(13,"option",18),c(14,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0648\u0642\u062A"),l(),te(15,u8,2,2,"option",33),l()()(),a(16,"div",42)(17,"div",43)(18,"label",77),c(19,"\u0627\u0644\u0642\u0627\u0639\u0629:"),l(),a(20,"select",78),ye("ngModelChange",function(r){k(e);let o=T(3);return be(o.newScheduleItem.classroom,r)||(o.newScheduleItem.classroom=r),F(r)}),a(21,"option",18),c(22,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0642\u0627\u0639\u0629"),l(),te(23,c8,2,3,"option",33),l()(),a(24,"div",43)(25,"button",79),R("click",function(){k(e);let r=T(3);return F(r.addScheduleItem())}),c(26," \u2795 \u0625\u0636\u0627\u0641\u0629 \u0625\u0644\u0649 \u0627\u0644\u062C\u062F\u0648\u0644 "),l()()()()}if(n&2){let e=T(3);h(5),xe("ngModel",e.newScheduleItem.day),h(3),P("ngForOf",e.daysOfWeek),h(4),xe("ngModel",e.newScheduleItem.time),h(3),P("ngForOf",e.timeSlots),h(5),xe("ngModel",e.newScheduleItem.classroom),h(3),P("ngForOf",e.classrooms),h(2),P("disabled",!e.newScheduleItem.day||!e.newScheduleItem.time||!e.newScheduleItem.classroom)}}function f8(n,t){if(n&1){let e=Se();a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l(),a(7,"td")(8,"button",83),R("click",function(){let r=k(e).index,o=T(4);return F(o.removeScheduleItem(r))}),c(9," \u{1F5D1}\uFE0F \u062D\u0630\u0641 "),l()()()}if(n&2){let e=t.$implicit,i=T(4);h(2),$(e.day),h(2),$(e.time),h(2),Z(" ",i.getClassroomName(e.classroom)," ")}}function h8(n,t){if(n&1&&(a(0,"div",80)(1,"h4"),c(2,"\u{1F4CB} \u0627\u0644\u062C\u062F\u0648\u0644 \u0627\u0644\u0645\u0636\u0627\u0641"),l(),a(3,"div",81)(4,"table")(5,"thead")(6,"tr")(7,"th"),c(8,"\u0627\u0644\u064A\u0648\u0645"),l(),a(9,"th"),c(10,"\u0627\u0644\u0648\u0642\u062A"),l(),a(11,"th"),c(12,"\u0627\u0644\u0642\u0627\u0639\u0629"),l(),a(13,"th"),c(14,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(15,"tbody"),te(16,f8,10,3,"tr",82),l()()()()),n&2){let e=T(3);h(16),P("ngForOf",e.newClass.schedule)}}function p8(n,t){if(n&1){let e=Se();a(0,"div",39)(1,"h2",12),c(2,"\u2795 \u0625\u0646\u0634\u0627\u0621 \u062D\u0635\u0629 \u062C\u062F\u064A\u062F\u0629"),l(),a(3,"div",40)(4,"div",41)(5,"h3"),c(6,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u062D\u0635\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629"),l()(),a(7,"div",42)(8,"div",43)(9,"label",44),c(10,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629:"),l(),a(11,"input",45),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.newClass.name,r)||(o.newClass.name=r),F(r)}),l()(),a(12,"div",43)(13,"label",46),c(14,"\u0627\u0644\u0645\u0627\u062F\u0629:"),l(),a(15,"select",47),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.newClass.subject,r)||(o.newClass.subject=r),F(r)}),a(16,"option",18),c(17,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0627\u062F\u0629"),l(),a(18,"option",27),c(19,"\u0631\u064A\u0627\u0636\u064A\u0627\u062A"),l(),a(20,"option",28),c(21,"\u0641\u064A\u0632\u064A\u0627\u0621"),l(),a(22,"option",29),c(23,"\u0639\u0644\u0648\u0645"),l(),a(24,"option",30),c(25,"\u0644\u063A\u0629 \u0639\u0631\u0628\u064A\u0629"),l(),a(26,"option",31),c(27,"\u0644\u063A\u0629 \u0641\u0631\u0646\u0633\u064A\u0629"),l(),a(28,"option",32),c(29,"\u0644\u063A\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629"),l(),a(30,"option",48),c(31,"\u062A\u0627\u0631\u064A\u062E"),l(),a(32,"option",49),c(33,"\u062C\u063A\u0631\u0627\u0641\u064A\u0627"),l(),a(34,"option",50),c(35,"\u0641\u0644\u0633\u0641\u0629"),l(),a(36,"option",51),c(37,"\u0625\u0639\u0644\u0627\u0645 \u0622\u0644\u064A"),l()()()(),a(38,"div",42)(39,"div",43)(40,"label",52),c(41,"\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062F\u0631\u0627\u0633\u064A\u0629:"),l(),a(42,"select",53),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.newClass.academicYear,r)||(o.newClass.academicYear=r),F(r)}),a(43,"option",18),c(44,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0633\u0646\u0629"),l(),a(45,"option",19),c(46,"\u0627\u0644\u0623\u0648\u0644\u0649 \u062B\u0627\u0646\u0648\u064A"),l(),a(47,"option",20),c(48,"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u062B\u0627\u0646\u0648\u064A"),l(),a(49,"option",21),c(50,"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u062B\u0627\u0646\u0648\u064A"),l(),a(51,"option",22),c(52,"\u0627\u0644\u0623\u0648\u0644\u0649 \u0645\u062A\u0648\u0633\u0637"),l(),a(53,"option",23),c(54,"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0645\u062A\u0648\u0633\u0637"),l(),a(55,"option",24),c(56,"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u0645\u062A\u0648\u0633\u0637"),l(),a(57,"option",25),c(58,"\u0627\u0644\u0631\u0627\u0628\u0639\u0629 \u0645\u062A\u0648\u0633\u0637"),l(),a(59,"option",26),c(60,"\u0627\u0644\u062E\u0627\u0645\u0633\u0629 \u0645\u062A\u0648\u0633\u0637"),l(),a(61,"option",54),c(62,"\u0627\u0644\u0623\u0648\u0644\u0649 \u0625\u0628\u062A\u062F\u0627\u0626\u064A"),l(),a(63,"option",55),c(64,"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0625\u0628\u062A\u062F\u0627\u0626\u064A"),l(),a(65,"option",56),c(66,"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u0625\u0628\u062A\u062F\u0627\u0626\u064A"),l(),a(67,"option",57),c(68,"\u0627\u0644\u0631\u0627\u0628\u0639\u0629 \u0625\u0628\u062A\u062F\u0627\u0626\u064A"),l(),a(69,"option",58),c(70,"\u0627\u0644\u062E\u0627\u0645\u0633\u0629 \u0625\u0628\u062A\u062F\u0627\u0626\u064A"),l(),a(71,"option",59),c(72,"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),l()()(),a(73,"div",43)(74,"label",60),c(75,"\u0627\u0644\u0633\u0639\u0631 (\u062F.\u062C):"),l(),a(76,"input",61),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.newClass.price,r)||(o.newClass.price=r),F(r)}),l()()(),a(77,"div",42)(78,"div",43)(79,"label",62),c(80,"\u0627\u0644\u0645\u0639\u0644\u0645:"),l(),a(81,"select",63),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.newClass.teacher,r)||(o.newClass.teacher=r),F(r)}),a(82,"option",18),c(83,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0639\u0644\u0645"),l(),te(84,a8,2,3,"option",33),l()()(),a(85,"div",64)(86,"label",65),c(87,"\u0648\u0635\u0641 \u0627\u0644\u062D\u0635\u0629:"),l(),a(88,"textarea",66),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.newClass.description,r)||(o.newClass.description=r),F(r)}),l()(),a(89,"div",41)(90,"h3"),c(91,"\u{1F4C5} \u062C\u062F\u0648\u0644 \u0627\u0644\u062D\u0635\u0635"),l(),a(92,"button",35),R("click",function(){k(e);let r=T(2);return F(r.showScheduleForm=!r.showScheduleForm)}),c(93),l()(),te(94,d8,27,7,"div",67)(95,h8,17,1,"div",68),a(96,"div",69)(97,"button",13),R("click",function(){k(e);let r=T(2);return F(r.createClass())}),c(98," \u{1F4BE} \u062D\u0641\u0638 \u0627\u0644\u062D\u0635\u0629 "),l(),a(99,"button",35),R("click",function(){k(e);let r=T(2);return F(r.resetNewClassForm())}),c(100," \u{1F504} \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),l(),a(101,"button",70),R("click",function(){k(e);let r=T(2);return F(r.isCreatingClass=!1)}),c(102," \u274C \u0625\u0644\u063A\u0627\u0621 "),l()()()()}if(n&2){let e=T(2);h(11),xe("ngModel",e.newClass.name),h(4),xe("ngModel",e.newClass.subject),h(27),xe("ngModel",e.newClass.academicYear),h(34),xe("ngModel",e.newClass.price),h(5),xe("ngModel",e.newClass.teacher),h(3),P("ngForOf",e.teachers),h(4),xe("ngModel",e.newClass.description),h(5),Z(" ",e.showScheduleForm?"\u0625\u062E\u0641\u0627\u0621 \u0627\u0644\u0646\u0645\u0648\u0630\u062C":"\u2795 \u0625\u0636\u0627\u0641\u0629 \u062C\u062F\u0648\u0644"," "),h(),P("ngIf",e.showScheduleForm),h(),P("ngIf",e.newClass.schedule&&e.newClass.schedule.length>0)}}function m8(n,t){if(n&1&&(a(0,"option",71),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Z(" ",e.name," ")}}function g8(n,t){if(n&1){let e=Se();a(0,"div",84),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.selectClass(r))}),a(1,"div",85)(2,"h3"),c(3),l(),a(4,"span",86),c(5),l()(),a(6,"div",87)(7,"div",88)(8,"span",89),c(9,"\u0627\u0644\u0645\u0627\u062F\u0629:"),l(),a(10,"span",90),c(11),l()(),a(12,"div",88)(13,"span",89),c(14,"\u0627\u0644\u0633\u0646\u0629:"),l(),a(15,"span",90),c(16),l()(),a(17,"div",88)(18,"span",89),c(19,"\u0627\u0644\u0633\u0639\u0631:"),l(),a(20,"span",91),c(21),l()(),a(22,"div",88)(23,"span",89),c(24,"\u0627\u0644\u0645\u0639\u0644\u0645:"),l(),a(25,"span",90),c(26),l()(),a(27,"div",88)(28,"span",89),c(29,"\u0627\u0644\u062C\u062F\u0648\u0644:"),l(),a(30,"span",90),c(31),l()()(),a(32,"div",92)(33,"button",93),R("click",function(r){let o=k(e).$implicit;return T(2).selectClass(o),F(r.stopPropagation())}),c(34," \u{1F441}\uFE0F \u062A\u0641\u0627\u0635\u064A\u0644 "),l(),a(35,"button",83),R("click",function(r){let o=k(e).$implicit;return T(2).deleteClass(o._id),F(r.stopPropagation())}),c(36," \u{1F5D1}\uFE0F \u062D\u0630\u0641 "),l()()()}if(n&2){let e=t.$implicit,i=T(2);Ue("selected",(i.selectedClass==null?null:i.selectedClass._id)===e._id),h(3),$(e.name),h(),Ue("active",e.students&&e.students.length>0||!1),h(),Z(" ",e.students&&e.students.length||0," \u0637\u0627\u0644\u0628 "),h(6),$(e.subject),h(5),$(e.academicYear),h(5),Z("",e.price," \u062F.\u062C"),h(5),$(i.getTeacherName(e.teacher)),h(5),Z(" ",e.schedule&&e.schedule.length||0," \u062C\u0644\u0633\u0629 ")}}function _8(n,t){if(n&1){let e=Se();a(0,"button",108),R("click",function(){k(e);let r=T(3);return F(r.isCreatingLiveClass=!0)}),c(1," \u{1F3A5} \u0625\u0646\u0634\u0627\u0621 \u062D\u0635\u0629 \u062D\u064A\u0629 "),l()}}function v8(n,t){if(n&1){let e=Se();a(0,"div",109)(1,"div",42)(2,"div",43)(3,"label"),c(4,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629:"),l(),a(5,"input",110),ye("ngModelChange",function(r){k(e);let o=T(3);return be(o.selectedClass.name,r)||(o.selectedClass.name=r),F(r)}),l()(),a(6,"div",43)(7,"label"),c(8,"\u0627\u0644\u0633\u0639\u0631:"),l(),a(9,"input",111),ye("ngModelChange",function(r){k(e);let o=T(3);return be(o.selectedClass.price,r)||(o.selectedClass.price=r),F(r)}),l()()(),a(10,"div",64)(11,"label"),c(12,"\u0627\u0644\u0648\u0635\u0641:"),l(),a(13,"textarea",112),ye("ngModelChange",function(r){k(e);let o=T(3);return be(o.selectedClass.description,r)||(o.selectedClass.description=r),F(r)}),l()(),a(14,"div",69)(15,"button",13),R("click",function(){k(e);let r=T(3);return F(r.updateClass())}),c(16," \u{1F4BE} \u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A "),l(),a(17,"button",35),R("click",function(){k(e);let r=T(3);return F(r.isEditingClass=!1)}),c(18," \u274C \u0625\u0644\u063A\u0627\u0621 "),l()()()}if(n&2){let e=T(3);h(5),xe("ngModel",e.selectedClass.name),h(4),xe("ngModel",e.selectedClass.price),h(4),xe("ngModel",e.selectedClass.description)}}function x8(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l()()),n&2){let e=t.$implicit,i=T(4);h(2),$(e.day),h(2),$(e.time),h(2),$(i.getClassroomName(e.classroom))}}function y8(n,t){if(n&1&&(a(0,"div",113)(1,"h3"),c(2,"\u{1F4C5} \u062C\u062F\u0648\u0644 \u0627\u0644\u062D\u0635\u0635"),l(),a(3,"div",81)(4,"table")(5,"thead")(6,"tr")(7,"th"),c(8,"\u0627\u0644\u064A\u0648\u0645"),l(),a(9,"th"),c(10,"\u0627\u0644\u0648\u0642\u062A"),l(),a(11,"th"),c(12,"\u0627\u0644\u0642\u0627\u0639\u0629"),l()()(),a(13,"tbody"),te(14,x8,7,3,"tr",82),l()()()()),n&2){let e=T(3);h(14),P("ngForOf",e.selectedClass.schedule)}}function b8(n,t){if(n&1&&(a(0,"option",114),c(1),l()),n&2){let e=t.$implicit;P("ngValue",e),h(),Mo(" ",e.name," - ",e.academicYear," - ",e.parentPhone," ")}}function C8(n,t){if(n&1){let e=Se();a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l(),a(7,"td"),c(8),l(),a(9,"td"),c(10),l(),a(11,"td")(12,"button",83),R("click",function(){let r=k(e).$implicit,o=T(3);return F(o.unenrollStudent(r._id||r))}),c(13," \u{1F5D1}\uFE0F \u0625\u0632\u0627\u0644\u0629 "),l()()()}if(n&2){let e=t.$implicit,i=T(3);h(2),$(i.getStudentName(e)),h(2),$(i.getStudentId(e)),h(2),$(i.getStudentAcademicYear(e)),h(2),$(i.getStudentParentName(e)),h(2),$(i.getStudentParentPhone(e))}}function w8(n,t){n&1&&(a(0,"tr")(1,"td",115),c(2,"\u0644\u0627 \u064A\u0648\u062C\u062F \u0637\u0644\u0627\u0628 \u0645\u0633\u062C\u0644\u064A\u0646 \u0641\u064A \u0647\u0630\u0647 \u0627\u0644\u062D\u0635\u0629"),l()())}function M8(n,t){if(n&1){let e=Se();a(0,"div",94)(1,"h2",12),c(2),l(),a(3,"div",95)(4,"div",96)(5,"div",97)(6,"button",13),R("click",function(){k(e);let r=T(2);return F(r.isEditingClass=!r.isEditingClass)}),c(7," \u270F\uFE0F \u062A\u0639\u062F\u064A\u0644 "),l(),te(8,_8,2,0,"button",98),a(9,"button",35),R("click",function(){k(e);let r=T(2);return F(r.selectedClass=null)}),c(10," \u2716\uFE0F \u0625\u063A\u0644\u0627\u0642 "),l()()(),te(11,v8,19,3,"div",99),a(12,"div",100)(13,"div",101)(14,"div",102)(15,"strong"),c(16,"\u0627\u0644\u0645\u0627\u062F\u0629:"),l(),c(17),l(),a(18,"div",102)(19,"strong"),c(20,"\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062F\u0631\u0627\u0633\u064A\u0629:"),l(),c(21),l(),a(22,"div",102)(23,"strong"),c(24,"\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0634\u0647\u0631\u064A:"),l(),c(25),l(),a(26,"div",102)(27,"strong"),c(28,"\u0627\u0644\u0645\u0639\u0644\u0645:"),l(),c(29),l(),a(30,"div",102)(31,"strong"),c(32,"\u0639\u062F\u062F \u0627\u0644\u0637\u0644\u0627\u0628:"),l(),c(33),l()(),te(34,y8,15,1,"div",103),a(35,"div",104)(36,"h3"),c(37,"\u2795 \u0625\u0636\u0627\u0641\u0629 \u0637\u0627\u0644\u0628 \u0644\u0644\u062D\u0635\u0629"),l(),a(38,"div",42)(39,"div",43)(40,"label"),c(41,"\u0627\u062E\u062A\u0631 \u0637\u0627\u0644\u0628\u0627\u064B:"),l(),a(42,"select",17),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.selectedStudent,r)||(o.selectedStudent=r),F(r)}),a(43,"option",18),c(44,"\u0627\u062E\u062A\u0631 \u0637\u0627\u0644\u0628\u0627\u064B"),l(),te(45,b8,2,4,"option",105),l()(),a(46,"div",43)(47,"button",79),R("click",function(){k(e);let r=T(2);return F(r.enrollStudent(r.selectedStudent))}),c(48," \u2795 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0637\u0627\u0644\u0628 "),l()()()(),a(49,"div",106)(50,"h3"),c(51),l(),a(52,"div",81)(53,"table")(54,"thead")(55,"tr")(56,"th"),c(57,"\u0627\u0644\u0627\u0633\u0645"),l(),a(58,"th"),c(59,"\u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628"),l(),a(60,"th"),c(61,"\u0627\u0644\u0633\u0646\u0629"),l(),a(62,"th"),c(63,"\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631"),l(),a(64,"th"),c(65,"\u0627\u0644\u0647\u0627\u062A\u0641"),l(),a(66,"th"),c(67,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(68,"tbody"),te(69,C8,14,5,"tr",82)(70,w8,3,0,"tr",107),l()()()()()()()}if(n&2){let e=T(2);h(2),Z("\u{1F4CB} \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062D\u0635\u0629: ",e.selectedClass.name,""),h(6),P("ngIf",!e.isCreatingLiveClass),h(3),P("ngIf",e.isEditingClass),h(6),Z(" ",e.selectedClass.subject," "),h(4),Z(" ",e.selectedClass.academicYear," "),h(4),Z(" ",e.selectedClass.price," \u062F.\u062C "),h(4),Z(" ",e.getTeacherName(e.selectedClass.teacher)," "),h(4),Z(" ",e.selectedClass.students&&e.selectedClass.students.length||0," \u0637\u0627\u0644\u0628 "),h(),P("ngIf",e.selectedClass.schedule&&e.selectedClass.schedule.length>0),h(8),xe("ngModel",e.selectedStudent),h(3),P("ngForOf",e.availableStudents),h(2),P("disabled",!e.selectedStudent),h(4),Z("\u{1F468}\u200D\u{1F393} \u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u0645\u0633\u062C\u0644\u064A\u0646 (",e.selectedClass.students&&e.selectedClass.students.length||0,")"),h(18),P("ngForOf",e.selectedClass.students||ya(15,K3)),h(),P("ngIf",!e.selectedClass.students||e.selectedClass.students.length===0)}}function S8(n,t){if(n&1){let e=Se();a(0,"div",8),te(1,p8,103,10,"div",9),a(2,"div",10)(3,"div",11)(4,"h2",12),c(5),l(),a(6,"button",13),R("click",function(){k(e);let r=T();return F(r.isCreatingClass=!0)}),c(7," \u2795 \u0625\u0646\u0634\u0627\u0621 \u062D\u0635\u0629 \u062C\u062F\u064A\u062F\u0629 "),l()(),a(8,"div",14)(9,"div",15)(10,"div",16)(11,"label"),c(12,"\u062A\u0635\u0641\u064A\u0629 \u062D\u0633\u0628:"),l(),a(13,"select",17),ye("ngModelChange",function(r){k(e);let o=T();return be(o.classFilter.academicYear,r)||(o.classFilter.academicYear=r),F(r)}),a(14,"option",18),c(15,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0633\u0646\u0648\u0627\u062A"),l(),a(16,"option",19),c(17,"\u0627\u0644\u0623\u0648\u0644\u0649 \u062B\u0627\u0646\u0648\u064A"),l(),a(18,"option",20),c(19,"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u062B\u0627\u0646\u0648\u064A"),l(),a(20,"option",21),c(21,"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u062B\u0627\u0646\u0648\u064A"),l(),a(22,"option",22),c(23,"\u0627\u0644\u0623\u0648\u0644\u0649 \u0645\u062A\u0648\u0633\u0637"),l(),a(24,"option",23),c(25,"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0645\u062A\u0648\u0633\u0637"),l(),a(26,"option",24),c(27,"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u0645\u062A\u0648\u0633\u0637"),l(),a(28,"option",25),c(29,"\u0627\u0644\u0631\u0627\u0628\u0639\u0629 \u0645\u062A\u0648\u0633\u0637"),l(),a(30,"option",26),c(31,"\u0627\u0644\u062E\u0627\u0645\u0633\u0629 \u0645\u062A\u0648\u0633\u0637"),l()()(),a(32,"div",16)(33,"select",17),ye("ngModelChange",function(r){k(e);let o=T();return be(o.classFilter.subject,r)||(o.classFilter.subject=r),F(r)}),a(34,"option",18),c(35,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0648\u0627\u062F"),l(),a(36,"option",27),c(37,"\u0631\u064A\u0627\u0636\u064A\u0627\u062A"),l(),a(38,"option",28),c(39,"\u0641\u064A\u0632\u064A\u0627\u0621"),l(),a(40,"option",29),c(41,"\u0639\u0644\u0648\u0645"),l(),a(42,"option",30),c(43,"\u0644\u063A\u0629 \u0639\u0631\u0628\u064A\u0629"),l(),a(44,"option",31),c(45,"\u0644\u063A\u0629 \u0641\u0631\u0646\u0633\u064A\u0629"),l(),a(46,"option",32),c(47,"\u0644\u063A\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629"),l()()(),a(48,"div",16)(49,"select",17),ye("ngModelChange",function(r){k(e);let o=T();return be(o.classFilter.teacher,r)||(o.classFilter.teacher=r),F(r)}),a(50,"option",18),c(51,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0639\u0644\u0645\u064A\u0646"),l(),te(52,m8,2,2,"option",33),l()(),a(53,"div",34)(54,"button",13),R("click",function(){k(e);let r=T();return F(r.applyClassFilter())}),c(55," \u{1F50D} \u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u062A\u0635\u0641\u064A\u0629 "),l(),a(56,"button",35),R("click",function(){k(e);let r=T();return F(r.resetClassFilter())}),c(57," \u267B\uFE0F \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),l()()()(),a(58,"div",36),te(59,g8,37,11,"div",37),l()(),te(60,M8,71,16,"div",38),l()}if(n&2){let e=T();h(),P("ngIf",e.isCreatingClass),h(4),Z("\u{1F4CB} \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u062D\u0635\u0635 (",e.classes.length,")"),h(8),xe("ngModel",e.classFilter.academicYear),h(20),xe("ngModel",e.classFilter.subject),h(16),xe("ngModel",e.classFilter.teacher),h(3),P("ngForOf",e.teachers),h(7),P("ngForOf",e.classes),h(),P("ngIf",e.selectedClass)}}function E8(n,t){if(n&1){let e=Se();a(0,"div",39)(1,"div",121)(2,"h2",12),c(3),l(),a(4,"button",35),R("click",function(){k(e);let r=T(2);return F(r.isCreatingLiveClass=!1)}),c(5," \u2716\uFE0F \u0625\u0644\u063A\u0627\u0621 "),l()(),a(6,"div",40)(7,"div",42)(8,"div",43)(9,"label",122),c(10,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E:"),l(),a(11,"input",123),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.newLiveClass.date,r)||(o.newLiveClass.date=r),F(r)}),l()(),a(12,"div",43)(13,"label",124),c(14,"\u0648\u0642\u062A \u0627\u0644\u0628\u062F\u0627\u064A\u0629:"),l(),a(15,"input",125),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.newLiveClass.startTime,r)||(o.newLiveClass.startTime=r),F(r)}),l()()(),a(16,"div",64)(17,"label",126),c(18,"\u0627\u0644\u062D\u0627\u0644\u0629:"),l(),a(19,"select",127),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.newLiveClass.status,r)||(o.newLiveClass.status=r),F(r)}),a(20,"option",116),c(21,"\u0645\u062C\u062F\u0648\u0644\u0629"),l(),a(22,"option",117),c(23,"\u062C\u0627\u0631\u064A\u0629"),l(),a(24,"option",118),c(25,"\u0645\u0646\u062A\u0647\u064A\u0629"),l()()(),a(26,"div",69)(27,"button",13),R("click",function(){k(e);let r=T(2);return F(r.createLiveClass())}),c(28," \u{1F4BE} \u062D\u0641\u0638 \u0627\u0644\u062D\u0635\u0629 \u0627\u0644\u062D\u064A\u0629 "),l(),a(29,"button",35),R("click",function(){k(e);let r=T(2);return F(r.resetNewLiveClassForm())}),c(30," \u{1F504} \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),l()()()()}if(n&2){let e=T(2);h(3),Z("\u2795 \u0625\u0646\u0634\u0627\u0621 \u062D\u0635\u0629 \u062D\u064A\u0629 \u0644\u0644\u062D\u0635\u0629: ",e.selectedClass.name,""),h(8),xe("ngModel",e.newLiveClass.date),h(4),xe("ngModel",e.newLiveClass.startTime),h(4),xe("ngModel",e.newLiveClass.status)}}function A8(n,t){if(n&1){let e=Se();a(0,"button",83),R("click",function(r){k(e);let o=T().$implicit;return T(2).cancelLiveClass(o._id),F(r.stopPropagation())}),c(1," \u274C \u0625\u0644\u063A\u0627\u0621 "),l()}}function T8(n,t){if(n&1){let e=Se();a(0,"button",131),R("click",function(r){k(e);let o=T().$implicit;return T(2).startLiveClass(o._id),F(r.stopPropagation())}),c(1," \u25B6\uFE0F \u0628\u062F\u0621 "),l()}}function D8(n,t){if(n&1){let e=Se();a(0,"button",132),R("click",function(r){k(e);let o=T().$implicit;return T(2).endLiveClass(o._id),F(r.stopPropagation())}),c(1," \u23F9\uFE0F \u0625\u0646\u0647\u0627\u0621 "),l()}}function P8(n,t){if(n&1){let e=Se();a(0,"div",84),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.selectLiveClass(r))}),a(1,"div",85)(2,"h3"),c(3),l(),a(4,"span",86),c(5),l()(),a(6,"div",87)(7,"div",88)(8,"span",89),c(9,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E:"),l(),a(10,"span",90),c(11),Ln(12,"date"),l()(),a(13,"div",88)(14,"span",89),c(15,"\u0627\u0644\u0648\u0642\u062A:"),l(),a(16,"span",90),c(17),l()(),a(18,"div",88)(19,"span",89),c(20,"\u0627\u0644\u062D\u0636\u0648\u0631:"),l(),a(21,"span",90),c(22),l()(),a(23,"div",88)(24,"span",89),c(25,"\u0627\u0644\u0645\u0627\u062F\u0629:"),l(),a(26,"span",90),c(27),l()()(),a(28,"div",92)(29,"button",93),R("click",function(r){let o=k(e).$implicit;return T(2).viewAttendance(o),F(r.stopPropagation())}),c(30," \u{1F4DD} \u0627\u0644\u062D\u0636\u0648\u0631 "),l(),te(31,A8,2,0,"button",128)(32,T8,2,0,"button",129)(33,D8,2,0,"button",130),l()()}if(n&2){let e=t.$implicit,i=T(2);Ue("selected",(i.selectedLiveClass==null?null:i.selectedLiveClass._id)===e._id),h(3),$((e.class==null?null:e.class.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),h(),jn("status-"+e.status),h(),Z(" ",i.getStatusText(e.status)," "),h(6),$(Hi(12,14,e.date,"dd/MM/yyyy")),h(6),$(e.startTime),h(5),Jn(" ",i.getPresentCount(e)," / ",e.class&&e.class.students&&e.class.students.length||0," "),h(5),$((e.class==null?null:e.class.subject)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),h(4),P("ngIf",e.status==="scheduled"),h(),P("ngIf",e.status==="scheduled"),h(),P("ngIf",e.status==="ongoing")}}function I8(n,t){if(n&1){let e=Se();a(0,"div",8),te(1,E8,31,4,"div",9),a(2,"div",10)(3,"h2",12),c(4),l(),a(5,"div",14)(6,"div",15)(7,"div",16)(8,"label"),c(9,"\u062A\u0635\u0641\u064A\u0629 \u062D\u0633\u0628:"),l(),a(10,"select",17),ye("ngModelChange",function(r){k(e);let o=T();return be(o.liveClassFilter.status,r)||(o.liveClassFilter.status=r),F(r)}),a(11,"option",18),c(12,"\u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0627\u0644\u0627\u062A"),l(),a(13,"option",116),c(14,"\u0645\u062C\u062F\u0648\u0644\u0629"),l(),a(15,"option",117),c(16,"\u062C\u0627\u0631\u064A\u0629"),l(),a(17,"option",118),c(18,"\u0645\u0646\u062A\u0647\u064A\u0629"),l(),a(19,"option",119),c(20,"\u0645\u0644\u063A\u0627\u0629"),l()()(),a(21,"div",16)(22,"input",120),ye("ngModelChange",function(r){k(e);let o=T();return be(o.liveClassFilter.date,r)||(o.liveClassFilter.date=r),F(r)}),l()(),a(23,"div",34)(24,"button",13),R("click",function(){k(e);let r=T();return F(r.applyLiveClassFilter())}),c(25," \u{1F50D} \u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u062A\u0635\u0641\u064A\u0629 "),l(),a(26,"button",35),R("click",function(){k(e);let r=T();return F(r.resetLiveClassFilter())}),c(27," \u267B\uFE0F \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),l()()()(),a(28,"div",36),te(29,P8,34,17,"div",37),l()()()}if(n&2){let e=T();h(),P("ngIf",e.selectedClass&&e.isCreatingLiveClass),h(3),Z("\u{1F3A5} \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u062D\u064A\u0629 (",e.liveClasses.length,")"),h(6),xe("ngModel",e.liveClassFilter.status),h(12),xe("ngModel",e.liveClassFilter.date),h(7),P("ngForOf",e.liveClasses)}}function O8(n,t){if(n&1&&(a(0,"div",141)(1,"div",142)(2,"div",3),c(3,"\u{1F465}"),l(),a(4,"div",4)(5,"h3"),c(6),l(),a(7,"p"),c(8,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0637\u0644\u0627\u0628"),l()()(),a(9,"div",142)(10,"div",3),c(11,"\u2705"),l(),a(12,"div",4)(13,"h3"),c(14),l(),a(15,"p"),c(16,"\u062D\u0627\u0636\u0631"),l()()(),a(17,"div",142)(18,"div",3),c(19,"\u274C"),l(),a(20,"div",4)(21,"h3"),c(22),l(),a(23,"p"),c(24,"\u063A\u0627\u0626\u0628"),l()()()()),n&2){let e=T(2);h(6),$(e.selectedLiveClass.class&&e.selectedLiveClass.class.students&&e.selectedLiveClass.class.students.length||0),h(8),$(e.getPresentCount(e.selectedLiveClass)),h(8),$((e.selectedLiveClass.class&&e.selectedLiveClass.class.students&&e.selectedLiveClass.class.students.length||0)-e.getPresentCount(e.selectedLiveClass))}}function R8(n,t){if(n&1){let e=Se();a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l(),a(7,"td"),c(8),l(),a(9,"td"),c(10),l(),a(11,"td"),c(12),l(),a(13,"td")(14,"span",145),c(15),l()(),a(16,"td")(17,"div",146)(18,"button",131),R("click",function(){let r=k(e).$implicit,o=T(3);return F(o.recordAttendance(r,"present"))}),c(19," \u2705 \u062D\u0627\u0636\u0631 "),l(),a(20,"button",83),R("click",function(){let r=k(e).$implicit,o=T(3);return F(o.recordAttendance(r,"absent"))}),c(21," \u274C \u063A\u0627\u0626\u0628 "),l(),a(22,"button",132),R("click",function(){let r=k(e).$implicit,o=T(3);return F(o.recordAttendance(r,"late"))}),c(23," \u23F0 \u0645\u062A\u0623\u062E\u0631 "),l()()()()}if(n&2){let e=t.$implicit,i=t.index,r=T(3);jn(r.getAttendanceStatusClass(e)),h(2),$(i+1),h(2),$(r.getStudentName(e)),h(2),$(r.getStudentId(e)),h(2),$(r.getStudentAcademicYear(e)),h(2),$(r.getStudentParentName(e)),h(2),$(r.getStudentParentPhone(e)),h(2),jn("status-"+r.getAttendanceStatus(e)),h(),Z(" ",r.getAttendanceStatus(e)," ")}}function k8(n,t){if(n&1&&(a(0,"div",143)(1,"div",81)(2,"table")(3,"thead")(4,"tr")(5,"th"),c(6,"#"),l(),a(7,"th"),c(8,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628"),l(),a(9,"th"),c(10,"\u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628"),l(),a(11,"th"),c(12,"\u0627\u0644\u0633\u0646\u0629"),l(),a(13,"th"),c(14,"\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631"),l(),a(15,"th"),c(16,"\u0627\u0644\u0647\u0627\u062A\u0641"),l(),a(17,"th"),c(18,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(19,"th"),c(20,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(21,"tbody"),te(22,R8,24,11,"tr",144),l()()()()),n&2){let e=T(2);h(22),P("ngForOf",e.selectedLiveClass.class.students)}}function F8(n,t){if(n&1){let e=Se();a(0,"div",147)(1,"div",148),c(2,"\u{1F468}\u200D\u{1F393}"),l(),a(3,"h3"),c(4,"\u0644\u0627 \u064A\u0648\u062C\u062F \u0637\u0644\u0627\u0628 \u0645\u0633\u062C\u0644\u064A\u0646 \u0641\u064A \u0647\u0630\u0647 \u0627\u0644\u062D\u0635\u0629"),l(),a(5,"p"),c(6,"\u064A\u062C\u0628 \u062A\u0633\u062C\u064A\u0644 \u0637\u0644\u0627\u0628 \u0641\u064A \u0627\u0644\u062D\u0635\u0629 \u0642\u0628\u0644 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062D\u0636\u0648\u0631"),l(),a(7,"button",13),R("click",function(){k(e);let r=T(2);return F(r.goToClassDetails())}),c(8," \u{1F4DA} \u0627\u0644\u0630\u0647\u0627\u0628 \u0644\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0644\u0627\u0628 "),l()()}}function N8(n,t){if(n&1){let e=Se();a(0,"div",8)(1,"div",133)(2,"div",134)(3,"h2",12),c(4,"\u{1F4DD} \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062D\u0636\u0648\u0631"),l(),a(5,"div",135)(6,"span"),c(7),l(),a(8,"span"),c(9),Ln(10,"date"),l(),a(11,"span"),c(12),l()()(),a(13,"div",136)(14,"button",13),R("click",function(){k(e);let r=T();return F(r.autoMarkAbsent())}),c(15," \u26A1 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u063A\u064A\u0627\u0628 \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A "),l(),a(16,"button",35),R("click",function(){k(e);let r=T();return F(r.debugAttendance())}),c(17," \u{1F41B} \u062A\u0635\u062D\u064A\u062D "),l(),a(18,"button",70),R("click",function(){k(e);let r=T();return F(r.goToClassDetails())}),c(19," \u{1F4DA} \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062D\u0635\u0629 "),l(),a(20,"button",137),R("click",function(){k(e);let r=T();return r.selectedLiveClass=null,F(r.viewMode="liveClasses")}),c(21," \u2716\uFE0F \u0625\u063A\u0644\u0627\u0642 "),l()(),te(22,O8,25,3,"div",138)(23,k8,23,1,"div",139)(24,F8,9,0,"div",140),l()()}if(n&2){let e=T();h(7),Z("\u0627\u0644\u062D\u0635\u0629: ",e.selectedLiveClass.class==null?null:e.selectedLiveClass.class.name,""),h(2),Z("\u0627\u0644\u062A\u0627\u0631\u064A\u062E: ",Hi(10,6,e.selectedLiveClass.date,"dd/MM/yyyy"),""),h(3),Z("\u0627\u0644\u0648\u0642\u062A: ",e.selectedLiveClass.startTime,""),h(10),P("ngIf",e.hasValidLiveClassData()),h(),P("ngIf",e.hasValidLiveClassData()&&e.selectedLiveClass.class&&e.selectedLiveClass.class.students),h(),P("ngIf",!e.hasValidLiveClassData())}}function L8(n,t){if(n&1){let e=Se();a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l(),a(7,"td"),c(8),l(),a(9,"td"),c(10),l(),a(11,"td")(12,"button",93),R("click",function(){let r=k(e).$implicit,o=T(2);return o.selectClass(r),F(o.viewMode="classes")}),c(13," \u{1F441}\uFE0F \u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644 "),l()()()}if(n&2){let e=t.$implicit;h(2),$(e.name),h(2),$(e.subject),h(2),$(e.academicYear),h(2),Z("",e.price," \u062F.\u062C"),h(2),$(e.schedule&&e.schedule.length||0)}}function V8(n,t){n&1&&(a(0,"tr")(1,"td",115),c(2,"\u0644\u0627 \u064A\u0648\u062C\u062F \u062D\u0635\u0635 \u0645\u0633\u062C\u0644\u0629 \u0644\u0647\u0630\u0627 \u0627\u0644\u0637\u0627\u0644\u0628"),l()())}function U8(n,t){if(n&1){let e=Se();a(0,"div",8)(1,"div",149)(2,"div",11)(3,"h2",12),c(4),l(),a(5,"button",35),R("click",function(){k(e);let r=T();return F(r.selectedStudent=null)}),c(6," \u2716\uFE0F \u0625\u063A\u0644\u0627\u0642 "),l()(),a(7,"div",150)(8,"div",101)(9,"div",102)(10,"strong"),c(11,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628:"),l(),c(12),l(),a(13,"div",102)(14,"strong"),c(15,"\u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628:"),l(),c(16),l(),a(17,"div",102)(18,"strong"),c(19,"\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062F\u0631\u0627\u0633\u064A\u0629:"),l(),c(20),l(),a(21,"div",102)(22,"strong"),c(23,"\u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u0633\u062C\u064A\u0644:"),l(),a(24,"span"),c(25),l()(),a(26,"div",102)(27,"strong"),c(28,"\u0627\u0633\u0645 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631:"),l(),c(29),l(),a(30,"div",102)(31,"strong"),c(32,"\u0647\u0627\u062A\u0641 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631:"),l(),c(33),l(),a(34,"div",102)(35,"strong"),c(36,"\u062F\u0641\u0639 \u0627\u0644\u062A\u0633\u062C\u064A\u0644:"),l(),a(37,"span"),c(38),l()(),a(39,"div",102)(40,"strong"),c(41,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0633\u062C\u064A\u0644:"),l(),c(42),Ln(43,"date"),l()()(),a(44,"div",151)(45,"h3"),c(46,"\u{1F4DA} \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u0633\u062C\u0644 \u0641\u064A\u0647\u0627"),l(),a(47,"div",81)(48,"table")(49,"thead")(50,"tr")(51,"th"),c(52,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629"),l(),a(53,"th"),c(54,"\u0627\u0644\u0645\u0627\u062F\u0629"),l(),a(55,"th"),c(56,"\u0627\u0644\u0633\u0646\u0629"),l(),a(57,"th"),c(58,"\u0627\u0644\u0633\u0639\u0631"),l(),a(59,"th"),c(60,"\u0639\u062F\u062F \u0627\u0644\u062C\u0644\u0633\u0627\u062A"),l(),a(61,"th"),c(62,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(63,"tbody"),te(64,L8,14,5,"tr",82)(65,V8,3,0,"tr",107),l()()()()()()}if(n&2){let e=T();h(4),Z("\u{1F468}\u200D\u{1F393} \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628: ",e.selectedStudent.name,""),h(8),Z(" ",e.selectedStudent.name," "),h(4),Z(" ",e.selectedStudent.studentId," "),h(4),Z(" ",e.selectedStudent.academicYear," "),h(4),jn("status-"+e.selectedStudent.status),h(),Z(" ",e.getStudentStatusText(e.selectedStudent.status)," "),h(4),Z(" ",e.selectedStudent.parentName," "),h(4),Z(" ",e.selectedStudent.parentPhone," "),h(4),jn(e.selectedStudent.hasPaidRegistration?"status-active":"status-inactive"),h(),Z(" ",e.selectedStudent.hasPaidRegistration?"\u0645\u062F\u0641\u0648\u0639":"\u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639"," "),h(4),Z(" ",Hi(43,15,e.selectedStudent.registrationDate,"dd/MM/yyyy")," "),h(22),P("ngForOf",e.selectedStudent.classes||ya(18,K3)),h(),P("ngIf",!e.selectedStudent.classes||e.selectedStudent.classes.length===0)}}var Mg=class n{constructor(t,e,i,r,o){this.classesService=t;this.studentsService=e;this.liveClassesService=i;this.paymentsService=r;this.http=o}classes=[];students=[];liveClasses=[];availableStudents=[];teachers=[];classrooms=[];selectedClass=null;selectedLiveClass=null;selectedStudent=null;newClass={name:"",subject:"",description:"",academicYear:"",price:0,schedule:[],teacher:"",students:[]};newLiveClass={date:new Date().toISOString().split("T")[0],startTime:"08:00",status:"scheduled"};newScheduleItem={day:"",time:"",classroom:""};daysOfWeek=[{value:"\u0627\u0644\u0633\u0628\u062A",label:"\u0627\u0644\u0633\u0628\u062A"},{value:"\u0627\u0644\u0623\u062D\u062F",label:"\u0627\u0644\u0623\u062D\u062F"},{value:"\u0627\u0644\u0625\u062B\u0646\u064A\u0646",label:"\u0627\u0644\u0625\u062B\u0646\u064A\u0646"},{value:"\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621",label:"\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621"},{value:"\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621",label:"\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621"},{value:"\u0627\u0644\u062E\u0645\u064A\u0633",label:"\u0627\u0644\u062E\u0645\u064A\u0633"},{value:"\u0627\u0644\u062C\u0645\u0639\u0629",label:"\u0627\u0644\u062C\u0645\u0639\u0629"}];timeSlots=[];viewMode="classes";isEditingClass=!1;isCreatingLiveClass=!1;isViewingAttendance=!1;showScheduleForm=!1;isCreatingClass=!1;classFilter={academicYear:"",subject:"",teacher:""};liveClassFilter={status:"",date:"",class:""};stats={totalClasses:0,totalStudents:0,totalLiveClasses:0,upcomingClasses:0};ngOnInit(){this.loadData(),this.generateTimeSlots()}loadData(){this.loadClasses(),this.loadStudents(),this.loadLiveClasses(),this.loadTeachers(),this.loadClassrooms(),this.calculateStats()}generateTimeSlots(){this.timeSlots=[];for(let t=8;t<=20;t++)for(let e=0;e<60;e+=30){let i=`${t.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`;this.timeSlots.push(i)}}loadClasses(){this.classesService.getClasses().subscribe({next:t=>{this.classes=t,this.stats.totalClasses=t.length},error:t=>{console.error("Error loading classes:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062D\u0635\u0635")}})}loadStudents(){this.studentsService.getStudents().subscribe({next:t=>{this.students=t,this.stats.totalStudents=t.length},error:t=>{console.error("Error loading students:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0637\u0644\u0627\u0628")}})}loadTeachers(){this.http.get("http://localhost:3000/api/teachers").subscribe({next:t=>{this.teachers=t},error:t=>{console.error("Error loading teachers:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0639\u0644\u0645\u064A\u0646")}})}loadClassrooms(){this.http.get("http://localhost:3000/api/classrooms").subscribe({next:t=>{this.classrooms=t},error:t=>{console.error("Error loading classrooms:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0642\u0627\u0639\u0627\u062A")}})}loadLiveClasses(){this.liveClassesService.getLiveClasses(this.liveClassFilter).subscribe({next:t=>{this.liveClasses=t,console.log("Live classes loaded:",t),t.forEach((e,i)=>{console.log(`Live class ${i+1}:`,{id:e._id,name:e.class?.name,hasClass:!!e.class,hasStudents:!!e.class?.students,studentCount:e.class?.students?.length||0,students:e.class?.students})}),this.stats.totalLiveClasses=t.length,this.stats.upcomingClasses=t.filter(e=>e.status==="scheduled"||e.status==="ongoing").length},error:t=>{console.error("Error loading live classes:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u062D\u064A\u0629")}})}hasValidLiveClassData(){return this.selectedLiveClass?(console.log("Selected live class:",{liveClass:this.selectedLiveClass,hasClass:!!this.selectedLiveClass.class,hasStudents:!!this.selectedLiveClass.class?.students,students:this.selectedLiveClass.class?.students}),!!this.selectedLiveClass.class?.students):!1}getPresentCount(t){return t.attendance?t.attendance.filter(e=>e.status==="present").length:0}getStudentName(t){return typeof t=="string"?this.students.find(i=>i._id===t||i.id===t)?.name||`\u0637\u0627\u0644\u0628 (${t.substring(0,8)}...)`:t?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}getStudentId(t){return typeof t=="string"?this.students.find(i=>i._id===t||i.id===t)?.studentId||t:t?.studentId||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}getStudentAcademicYear(t){return typeof t=="string"?this.students.find(i=>i._id===t||i.id===t)?.academicYear||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641":t?.academicYear||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}getStudentParentName(t){return typeof t=="string"?this.students.find(i=>i._id===t||i.id===t)?.parentName||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641":t?.parentName||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}getStudentParentPhone(t){return typeof t=="string"?this.students.find(i=>i._id===t||i.id===t)?.parentPhone||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641":t?.parentPhone||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}getStatusText(t){return{scheduled:"\u0645\u062C\u062F\u0648\u0644\u0629",ongoing:"\u062C\u0627\u0631\u064A\u0629",completed:"\u0645\u0646\u062A\u0647\u064A\u0629",cancelled:"\u0645\u0644\u063A\u0627\u0629"}[t]||t}getStudentStatusText(t){return{active:"\u0646\u0634\u0637",pending:"\u0642\u064A\u062F \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631",inactive:"\u063A\u064A\u0631 \u0646\u0634\u0637",banned:"\u0645\u062D\u0638\u0648\u0631"}[t]||t}getAttendanceStatus(t){if(console.log("Getting attendance status for student:",t),!this.selectedLiveClass||!this.selectedLiveClass.attendance)return console.log("No live class or attendance data"),"\u063A\u064A\u0631 \u0645\u0633\u062C\u0644";let e=typeof t=="string"?t:t?._id;if(!e)return console.log("No student ID found"),"\u063A\u0627\u0626\u0628";if(!Array.isArray(this.selectedLiveClass.attendance))return console.log("Attendance is not an array:",this.selectedLiveClass.attendance),"\u063A\u0627\u0626\u0628";let i=this.selectedLiveClass.attendance.find(o=>{if(!o||!o.student)return!1;let s=o.student;return typeof s=="string"?s===e:s?._id===e});return console.log("Found attendance:",i),i?{present:"\u062D\u0627\u0636\u0631",absent:"\u063A\u0627\u0626\u0628",late:"\u0645\u062A\u0623\u062E\u0631"}[i.status]||i.status:"\u063A\u0627\u0626\u0628"}getAttendanceStatusClass(t){if(!this.selectedLiveClass)return"";let e=typeof t=="string"?t:t?._id;if(!e)return"status-absent";let i=this.selectedLiveClass.attendance?.find(r=>{let o=r.student;return typeof o=="string"?o===e:o?._id===e});return i?`status-${i.status}`:"status-absent"}getStudentFullObject(t){return typeof t=="string"?this.students.find(e=>e._id===t)||null:t||null}selectClass(t){this.selectedClass=t,this.loadAvailableStudents(t._id)}addScheduleItem(){this.newScheduleItem.day&&this.newScheduleItem.time&&this.newScheduleItem.classroom?(this.newClass.schedule||(this.newClass.schedule=[]),this.newClass.schedule.push({day:this.newScheduleItem.day,time:this.newScheduleItem.time,classroom:this.newScheduleItem.classroom}),this.resetScheduleForm()):alert("\u0627\u0644\u0631\u062C\u0627\u0621 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644")}removeScheduleItem(t){this.newClass.schedule&&this.newClass.schedule.splice(t,1)}resetScheduleForm(){this.newScheduleItem={day:"",time:"",classroom:""}}createClass(){this.validateClass()&&this.classesService.createClass(this.newClass).subscribe({next:t=>{this.classes.push(t),this.resetNewClassForm(),this.isCreatingClass=!1,alert("\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D")},error:t=>{console.error("Error creating class:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062D\u0635\u0629")}})}updateClass(){!this.selectedClass||!this.validateClass()||this.classesService.updateClass(this.selectedClass._id,this.selectedClass).subscribe({next:t=>{let e=this.classes.findIndex(i=>i._id===t._id);e!==-1&&(this.classes[e]=t),this.isEditingClass=!1,alert("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D")},error:t=>{console.error("Error updating class:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062D\u0635\u0629")}})}deleteClass(t){confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u062D\u0635\u0629\u061F")&&this.classesService.deleteClass(t).subscribe({next:()=>{this.classes=this.classes.filter(e=>e._id!==t),this.selectedClass?._id===t&&(this.selectedClass=null),alert("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D")},error:e=>{console.error("Error deleting class:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u062D\u0630\u0641 \u0627\u0644\u062D\u0635\u0629")}})}loadAvailableStudents(t){this.classesService.getAvailableClasses("","").subscribe({next:e=>{let i=e.find(r=>r._id===t);if(i){let r=i.students?.map(o=>typeof o=="string"?o:o._id)||[];this.availableStudents=this.students.filter(o=>!r.includes(o._id))}},error:e=>{console.error("Error loading available students:",e)}})}enrollStudent(t){this.selectedClass&&confirm(`\u0647\u0644 \u062A\u0631\u064A\u062F \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628 ${t.name} \u0641\u064A \u0627\u0644\u062D\u0635\u0629 ${this.selectedClass.name}\u061F`)&&this.classesService.enrollStudent(this.selectedClass._id,t._id).subscribe({next:e=>{this.selectedClass&&(this.selectedClass.students||(this.selectedClass.students=[]),this.selectedClass.students.push(t),this.availableStudents=this.availableStudents.filter(i=>i._id!==t._id)),alert("\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D")},error:e=>{console.error("Error enrolling student:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628")}})}unenrollStudent(t){this.selectedClass&&confirm("\u0647\u0644 \u062A\u0631\u064A\u062F \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0637\u0627\u0644\u0628 \u0645\u0646 \u0647\u0630\u0647 \u0627\u0644\u062D\u0635\u0629\u061F")&&this.classesService.unenrollStudent(this.selectedClass._id,t).subscribe({next:()=>{this.selectedClass&&this.selectedClass.students&&(this.selectedClass.students=this.selectedClass.students.filter(e=>(typeof e=="string"?e:e._id)!==t),this.loadAvailableStudents(this.selectedClass._id)),alert("\u062A\u0645 \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D")},error:e=>{console.error("Error unenrolling student:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0637\u0627\u0644\u0628")}})}selectLiveClass(t){this.selectedLiveClass=t}createLiveClass(){if(!this.selectedClass||!this.validateLiveClass())return;let t=yt(Ie({},this.newLiveClass),{class:this.selectedClass._id,teacher:this.selectedClass.teacher?._id||this.selectedClass.teacher});this.liveClassesService.createLiveClass(t).subscribe({next:e=>{this.liveClasses.push(e),this.isCreatingLiveClass=!1,this.resetNewLiveClassForm(),alert("\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 \u0627\u0644\u062D\u064A\u0629 \u0628\u0646\u062C\u0627\u062D")},error:e=>{console.error("Error creating live class:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 \u0627\u0644\u062D\u064A\u0629")}})}startLiveClass(t){this.liveClassesService.startLiveClass(t).subscribe({next:e=>{this.updateLiveClassInList(e),alert("\u062A\u0645 \u0628\u062F\u0621 \u0627\u0644\u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D")},error:e=>{console.error("Error starting live class:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u0628\u062F\u0621 \u0627\u0644\u062D\u0635\u0629")}})}endLiveClass(t){this.liveClassesService.endLiveClass(t).subscribe({next:e=>{this.updateLiveClassInList(e),alert("\u062A\u0645 \u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D")},error:e=>{console.error("Error ending live class:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062D\u0635\u0629")}})}cancelLiveClass(t){confirm("\u0647\u0644 \u062A\u0631\u064A\u062F \u0625\u0644\u063A\u0627\u0621 \u0647\u0630\u0647 \u0627\u0644\u062D\u0635\u0629\u061F")&&this.liveClassesService.cancelLiveClass(t).subscribe({next:e=>{this.updateLiveClassInList(e),alert("\u062A\u0645 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D")},error:e=>{console.error("Error canceling live class:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u0635\u0629")}})}viewAttendance(t){this.selectedLiveClass=t,this.viewMode="attendance"}recordAttendance(t,e){if(!this.selectedLiveClass)return;let i;if(typeof t=="string")i=t;else if(t?._id)i=t._id;else{console.error("Invalid student format:",t),alert("\u062E\u0637\u0623 \u0641\u064A \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628");return}let r={studentId:i,status:e,method:"manual"};this.liveClassesService.recordAttendance(this.selectedLiveClass._id,r).subscribe({next:o=>{if(this.selectedLiveClass){this.selectedLiveClass.attendance||(this.selectedLiveClass.attendance=[]);let s=this.selectedLiveClass.attendance.findIndex(u=>{let d=u.student;return typeof d=="string"?d===i:d?._id===i});if(s>=0)this.selectedLiveClass.attendance[s].status=e;else{let u=this.getStudentFullObject(i);this.selectedLiveClass.attendance.push({student:u||i,status:e,timestamp:new Date().toISOString(),method:"manual"})}}alert("\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062D\u0636\u0648\u0631 \u0628\u0646\u062C\u0627\u062D")},error:o=>{console.error("Error recording attendance:",o),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062D\u0636\u0648\u0631")}})}autoMarkAbsent(){this.selectedLiveClass&&confirm("\u0647\u0644 \u062A\u0631\u064A\u062F \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u063A\u064A\u0627\u0628 \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A \u0644\u0644\u0637\u0644\u0627\u0628 \u063A\u064A\u0631 \u0627\u0644\u062D\u0627\u0636\u0631\u064A\u0646\u061F")&&this.liveClassesService.autoMarkAbsent(this.selectedLiveClass._id).subscribe({next:t=>{alert(`\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 ${t.absentStudents?.length||0} \u0637\u0627\u0644\u0628 \u0643\u063A\u0627\u0626\u0628\u064A\u0646`),this.loadLiveClasses()},error:t=>{console.error("Error auto-marking absent:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u063A\u064A\u0627\u0628 \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A")}})}viewStudentPayments(t){this.selectedStudent=t,this.viewMode="students"}viewAttendanceForStudent(t){this.selectedStudent=t,this.viewMode="attendance",console.log("Viewing attendance for student:",t.name)}validateClass(){return!this.newClass.name||!this.newClass.subject||!this.newClass.academicYear||!this.newClass.price||!this.newClass.teacher||this.newClass.schedule&&this.newClass.schedule.length===0?(alert("\u0627\u0644\u0631\u062C\u0627\u0621 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u0648\u0625\u0636\u0627\u0641\u0629 \u062C\u062F\u0648\u0644 \u0627\u0644\u062D\u0635\u0635"),!1):!0}validateLiveClass(){return!this.newLiveClass.date||!this.newLiveClass.startTime?(alert("\u0627\u0644\u0631\u062C\u0627\u0621 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629"),!1):!0}resetNewClassForm(){this.newClass={name:"",subject:"",description:"",academicYear:"",price:0,schedule:[],teacher:"",students:[]},this.resetScheduleForm()}resetNewLiveClassForm(){this.newLiveClass={date:new Date().toISOString().split("T")[0],startTime:"08:00",status:"scheduled"}}updateLiveClassInList(t){let e=this.liveClasses.findIndex(i=>i._id===t._id);e!==-1&&(this.liveClasses[e]=t),this.selectedLiveClass?._id===t._id&&(this.selectedLiveClass=t)}applyClassFilter(){this.loadClasses()}applyLiveClassFilter(){this.loadLiveClasses()}resetClassFilter(){this.classFilter={academicYear:"",subject:"",teacher:""},this.loadClasses()}resetLiveClassFilter(){this.liveClassFilter={status:"",date:"",class:""},this.loadLiveClasses()}setViewMode(t){this.viewMode=t,this.isEditingClass=!1,this.isCreatingLiveClass=!1,this.isViewingAttendance=!1,this.isCreatingClass=!1}exportClassData(){console.log("Exporting class data...")}printAttendanceReport(){console.log("Printing attendance report...")}calculateStats(){}goToClassDetails(){if(this.selectedLiveClass?.class?._id){let t=this.classes.find(e=>e._id===this.selectedLiveClass?.class?._id);t&&(this.selectClass(t),this.setViewMode("classes"))}}debugAttendance(){console.log("=== Attendance Debug ==="),console.log("Selected live class:",this.selectedLiveClass),this.selectedLiveClass?.class?.students&&(console.log("Students in class:",this.selectedLiveClass.class.students),this.selectedLiveClass.class.students.forEach((t,e)=>{console.log(`Student ${e+1}:`,{id:t,name:this.getStudentName(t),attendanceStatus:this.getAttendanceStatus(t)})})),console.log("All students loaded:",this.students)}getTeacherName(t){return t?typeof t=="string"?this.teachers.find(i=>i._id===t)?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641":t?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641":"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}getClassroomName(t){return t?typeof t=="string"?this.classrooms.find(i=>i._id===t)?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641":t?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641":"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}static \u0275fac=function(e){return new(e||n)(Te(Da),Te(oo),Te(Pa),Te(Ia),Te(Un))};static \u0275cmp=vn({type:n,selectors:[["app-lesson-management"]],decls:47,vars:16,consts:[[1,"lesson-management-container"],[1,"stats-overview"],[1,"stat-card",3,"click"],[1,"stat-icon"],[1,"stat-info"],[1,"navigation-tabs"],[1,"tab-btn",3,"click"],["class","section-container",4,"ngIf"],[1,"section-container"],["class","form-section",4,"ngIf"],[1,"list-section"],[1,"section-header"],[1,"section-title"],[1,"btn","btn-primary",3,"click"],[1,"filter-section"],[1,"filter-row"],[1,"filter-group"],[3,"ngModelChange","ngModel"],["value",""],["value","1AS"],["value","2AS"],["value","3AS"],["value","1MS"],["value","2MS"],["value","3MS"],["value","4MS"],["value","5MS"],["value","\u0631\u064A\u0627\u0636\u064A\u0627\u062A"],["value","\u0641\u064A\u0632\u064A\u0627\u0621"],["value","\u0639\u0644\u0648\u0645"],["value","\u0644\u063A\u0629 \u0639\u0631\u0628\u064A\u0629"],["value","\u0644\u063A\u0629 \u0641\u0631\u0646\u0633\u064A\u0629"],["value","\u0644\u063A\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629"],[3,"value",4,"ngFor","ngForOf"],[1,"filter-actions"],[1,"btn","btn-secondary",3,"click"],[1,"grid-container"],["class","grid-card",3,"selected","click",4,"ngFor","ngForOf"],["class","detail-section",4,"ngIf"],[1,"form-section"],[1,"form-card"],[1,"form-section-header"],[1,"form-row"],[1,"form-group"],["for","className"],["type","text","id","className","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629",3,"ngModelChange","ngModel"],["for","classSubject"],["id","classSubject",3,"ngModelChange","ngModel"],["value","\u062A\u0627\u0631\u064A\u062E"],["value","\u062C\u063A\u0631\u0627\u0641\u064A\u0627"],["value","\u0641\u0644\u0633\u0641\u0629"],["value","\u0625\u0639\u0644\u0627\u0645 \u0622\u0644\u064A"],["for","academicYear"],["id","academicYear",3,"ngModelChange","ngModel"],["value","1AP"],["value","2AP"],["value","3AP"],["value","4AP"],["value","5AP"],["value","NS"],["for","classPrice"],["type","number","id","classPrice","placeholder","\u0623\u062F\u062E\u0644 \u0633\u0639\u0631 \u0627\u0644\u062D\u0635\u0629",3,"ngModelChange","ngModel"],["for","classTeacher"],["id","classTeacher",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["for","classDescription"],["id","classDescription","placeholder","\u0623\u062F\u062E\u0644 \u0648\u0635\u0641\u0627\u064B \u0644\u0644\u062D\u0635\u0629","rows","3",3,"ngModelChange","ngModel"],["class","schedule-form",4,"ngIf"],["class","schedule-table",4,"ngIf"],[1,"form-actions"],[1,"btn","btn-warning",3,"click"],[3,"value"],[1,"schedule-form"],["for","scheduleDay"],["id","scheduleDay",3,"ngModelChange","ngModel"],["for","scheduleTime"],["id","scheduleTime",3,"ngModelChange","ngModel"],["for","scheduleClassroom"],["id","scheduleClassroom",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click","disabled"],[1,"schedule-table"],[1,"table-container"],[4,"ngFor","ngForOf"],[1,"btn-action","btn-danger",3,"click"],[1,"grid-card",3,"click"],[1,"card-header"],[1,"status-badge"],[1,"card-body"],[1,"info-row"],[1,"label"],[1,"value"],[1,"value","price"],[1,"card-actions"],[1,"btn-action",3,"click"],[1,"detail-section"],[1,"detail-card"],[1,"detail-header"],[1,"header-actions"],["class","btn btn-success",3,"click",4,"ngIf"],["class","edit-form",4,"ngIf"],[1,"detail-body"],[1,"info-grid"],[1,"info-item"],["class","schedule-section",4,"ngIf"],[1,"add-student-form"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"students-list"],[4,"ngIf"],[1,"btn","btn-success",3,"click"],[1,"edit-form"],["type","text",3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],["rows","3",3,"ngModelChange","ngModel"],[1,"schedule-section"],[3,"ngValue"],["colspan","6",1,"empty-row"],["value","scheduled"],["value","ongoing"],["value","completed"],["value","cancelled"],["type","date","placeholder","\u0627\u0644\u062A\u0627\u0631\u064A\u062E",3,"ngModelChange","ngModel"],[1,"form-header"],["for","liveDate"],["type","date","id","liveDate",3,"ngModelChange","ngModel"],["for","startTime"],["type","time","id","startTime",3,"ngModelChange","ngModel"],["for","liveStatus"],["id","liveStatus",3,"ngModelChange","ngModel"],["class","btn-action btn-danger",3,"click",4,"ngIf"],["class","btn-action btn-success",3,"click",4,"ngIf"],["class","btn-action btn-warning",3,"click",4,"ngIf"],[1,"btn-action","btn-success",3,"click"],[1,"btn-action","btn-warning",3,"click"],[1,"attendance-section"],[1,"attendance-header"],[1,"header-info"],[1,"attendance-actions"],[1,"btn","btn-danger",3,"click"],["class","stats-cards",4,"ngIf"],["class","attendance-table",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"stats-cards"],[1,"stat-card"],[1,"attendance-table"],[3,"class",4,"ngFor","ngForOf"],[1,"attendance-status"],[1,"action-buttons"],[1,"empty-state"],[1,"empty-icon"],[1,"student-details-section"],[1,"student-info-card"],[1,"student-classes-section"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),R("click",function(){return i.setViewMode("classes")}),a(3,"div",3),c(4,"\u{1F4DA}"),l(),a(5,"div",4)(6,"h3"),c(7),l(),a(8,"p"),c(9,"\u0627\u0644\u062D\u0635\u0635"),l()()(),a(10,"div",2),R("click",function(){return i.setViewMode("liveClasses")}),a(11,"div",3),c(12,"\u{1F3A5}"),l(),a(13,"div",4)(14,"h3"),c(15),l(),a(16,"p"),c(17,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u062D\u064A\u0629"),l()()(),a(18,"div",2),R("click",function(){return i.setViewMode("students")}),a(19,"div",3),c(20,"\u{1F468}\u200D\u{1F393}"),l(),a(21,"div",4)(22,"h3"),c(23),l(),a(24,"p"),c(25,"\u0627\u0644\u0637\u0644\u0627\u0628"),l()()(),a(26,"div",2),R("click",function(){return i.setViewMode("liveClasses")}),a(27,"div",3),c(28,"\u{1F4C5}"),l(),a(29,"div",4)(30,"h3"),c(31),l(),a(32,"p"),c(33,"\u062D\u0635\u0635 \u0642\u0627\u062F\u0645\u0629"),l()()()(),a(34,"div",5)(35,"button",6),R("click",function(){return i.setViewMode("classes")}),c(36," \u{1F4DA} \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062D\u0635\u0635 "),l(),a(37,"button",6),R("click",function(){return i.setViewMode("liveClasses")}),c(38," \u{1F3A5} \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u062D\u064A\u0629 "),l(),a(39,"button",6),R("click",function(){return i.setViewMode("attendance")}),c(40," \u{1F4DD} \u0627\u0644\u062D\u0636\u0648\u0631 \u0648\u0627\u0644\u063A\u064A\u0627\u0628 "),l(),a(41,"button",6),R("click",function(){return i.setViewMode("students")}),c(42," \u{1F468}\u200D\u{1F393} \u0627\u0644\u0637\u0644\u0627\u0628 "),l()(),te(43,S8,61,8,"div",7)(44,I8,30,5,"div",7)(45,N8,25,9,"div",7)(46,U8,66,19,"div",7),l()),e&2&&(h(7),$(i.stats.totalClasses),h(8),$(i.stats.totalLiveClasses),h(8),$(i.stats.totalStudents),h(8),$(i.stats.upcomingClasses),h(4),Ue("active",i.viewMode==="classes"),h(2),Ue("active",i.viewMode==="liveClasses"),h(2),Ue("active",i.viewMode==="attendance"),h(2),Ue("active",i.viewMode==="students"),h(2),P("ngIf",i.viewMode==="classes"),h(),P("ngIf",i.viewMode==="liveClasses"),h(),P("ngIf",i.viewMode==="attendance"&&i.selectedLiveClass),h(),P("ngIf",i.viewMode==="students"&&i.selectedStudent))},dependencies:[bn,ii,Wn,Ao,oi,Ii,Oi,Yn,Nr,xi,ri,Kn],styles:[".lesson-management-container[_ngcontent-%COMP%]{padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;direction:rtl;background:#f5f7fa;min-height:100vh}.stats-overview[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 6px #0000001a;display:flex;align-items:center;gap:15px;cursor:pointer;transition:transform .3s,box-shadow .3s;border:2px solid transparent}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 6px 12px #00000026;border-color:#3498db}.stat-icon[_ngcontent-%COMP%]{font-size:2.5em;color:#3498db}.stat-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.8em;color:#2c3e50}.stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#7f8c8d;font-size:.9em}.navigation-tabs[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:30px;flex-wrap:wrap}.tab-btn[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;font-size:1em;font-weight:500;color:#555;transition:all .3s;display:flex;align-items:center;gap:8px}.tab-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;border-color:#3498db;color:#3498db}.tab-btn.active[_ngcontent-%COMP%]{background:#3498db;color:#fff;border-color:#3498db}.section-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 4px 12px #00000014;margin-bottom:30px}.section-title[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:20px;font-size:1.5em;border-bottom:2px solid #f0f0f0;padding-bottom:10px}.form-section[_ngcontent-%COMP%]{margin-bottom:30px}.form-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px;padding:25px;border:1px solid #e0e0e0}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:8px;color:#34495e;font-weight:500;font-size:.95em}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:12px 15px;border:2px solid #e0e0e0;border-radius:8px;font-size:1em;transition:border-color .3s;background:#fff}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.form-actions[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:25px;justify-content:flex-end}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;cursor:pointer;font-size:1em;font-weight:500;transition:all .3s;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:#3498db;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#2980b9;transform:translateY(-2px)}.btn-secondary[_ngcontent-%COMP%]{background:#95a5a6;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#7f8c8d}.btn-success[_ngcontent-%COMP%]{background:#27ae60;color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background:#219a52}.btn-danger[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:#c0392b}.btn-warning[_ngcontent-%COMP%]{background:#f39c12;color:#fff}.btn-warning[_ngcontent-%COMP%]:hover{background:#d68910}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;margin-top:20px}.grid-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 8px #0000001a;border:2px solid transparent;transition:all .3s;cursor:pointer}.grid-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 16px #00000026;border-color:#3498db}.grid-card.selected[_ngcontent-%COMP%]{border-color:#3498db;background:#f8f9ff}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:1.2em}.status-badge[_ngcontent-%COMP%]{padding:5px 12px;border-radius:20px;font-size:.8em;font-weight:500}.status-scheduled[_ngcontent-%COMP%]{background:#f1c40f;color:#7d6608}.status-ongoing[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.status-completed[_ngcontent-%COMP%]{background:#3498db;color:#fff}.status-cancelled[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.status-active[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.status-inactive[_ngcontent-%COMP%]{background:#95a5a6;color:#fff}.status-pending[_ngcontent-%COMP%]{background:#f39c12;color:#fff}.status-banned[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.card-body[_ngcontent-%COMP%]{color:#34495e}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px;padding-bottom:8px;border-bottom:1px solid #f0f0f0}.info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#7f8c8d;font-weight:500}.info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2c3e50;font-weight:600}.info-row[_ngcontent-%COMP%]   .value.price[_ngcontent-%COMP%]{color:#27ae60}.card-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:15px;flex-wrap:wrap}.btn-action[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;cursor:pointer;font-size:.9em;transition:all .3s;display:inline-flex;align-items:center;gap:5px;background:#ecf0f1;color:#34495e}.btn-action[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.filter-section[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:10px;margin-bottom:20px}.filter-row[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:200px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;color:#34495e;font-weight:500}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 15px;border:2px solid #e0e0e0;border-radius:8px;font-size:1em}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:auto}.detail-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 4px 12px #00000014;border:2px solid #f0f0f0}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #f0f0f0}.edit-form[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:10px;margin-bottom:20px}.detail-body[_ngcontent-%COMP%]{margin-top:20px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px;margin-bottom:25px}.info-item[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px;border-radius:8px;border-right:4px solid #3498db}.add-student-form[_ngcontent-%COMP%]{background:#e8f4fc;padding:20px;border-radius:10px;margin-bottom:25px;border:2px dashed #3498db}.table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:15px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a}thead[_ngcontent-%COMP%]{background:#3498db;color:#fff}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;text-align:right;font-weight:600}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f0f0f0;transition:background .3s}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9ff}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;text-align:right;color:#34495e}.attendance-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px}.attendance-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;flex-wrap:wrap;gap:15px}.header-info[_ngcontent-%COMP%]{display:flex;gap:25px;color:#34495e;font-weight:500}.attendance-actions[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:25px;flex-wrap:wrap}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-bottom:25px}.attendance-status[_ngcontent-%COMP%]{padding:5px 12px;border-radius:20px;font-size:.9em;font-weight:500}.status-present[_ngcontent-%COMP%]{background:#d5f4e6;color:#27ae60}.status-absent[_ngcontent-%COMP%]{background:#ffeaea;color:#e74c3c}.status-late[_ngcontent-%COMP%]{background:#fff3cd;color:#d68910}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:50px 20px;color:#7f8c8d}.empty-icon[_ngcontent-%COMP%]{font-size:4em;margin-bottom:20px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#34495e;margin-bottom:10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:25px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px}.student-info-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px;padding:25px;margin-bottom:25px}.student-classes-section[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;border:2px solid #f0f0f0}@media (max-width: 768px){.form-row[_ngcontent-%COMP%], .info-grid[_ngcontent-%COMP%], .stats-overview[_ngcontent-%COMP%], .grid-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.navigation-tabs[_ngcontent-%COMP%]{flex-direction:column}.tab-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.filter-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-group[_ngcontent-%COMP%]{min-width:auto}.attendance-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.header-info[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.section-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.loading[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.full-width[_ngcontent-%COMP%]{width:100%}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-20[_ngcontent-%COMP%]{margin-top:20px}.mb-20[_ngcontent-%COMP%]{margin-bottom:20px}.p-20[_ngcontent-%COMP%]{padding:20px}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:.8em;font-weight:500}.badge-primary[_ngcontent-%COMP%]{background:#3498db;color:#fff}.badge-success[_ngcontent-%COMP%]{background:#27ae60;color:#fff}.badge-warning[_ngcontent-%COMP%]{background:#f39c12;color:#fff}.badge-danger[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}"]})};var $n=da(Ta());function B8(n,t){if(n&1&&(a(0,"option",30),c(1),l()),n&2){let e=t.$implicit;P("value",e.value),h(),Z(" ",e.label," ")}}function z8(n,t){n&1&&(a(0,"div",31),D(1,"div",32),a(2,"h3"),c(3,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628..."),l(),a(4,"p"),c(5,"\u064A\u0631\u062C\u0649 \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631 \u0642\u0644\u064A\u0644\u0627\u064B"),l()())}function H8(n,t){if(n&1){let e=Se();a(0,"div",33),D(1,"i",34),a(2,"h3"),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0637\u0644\u0627\u0628"),l(),a(4,"p"),c(5,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0637\u0644\u0627\u0628 \u0645\u0637\u0627\u0628\u0642\u064A\u0646 \u0644\u0628\u062D\u062B\u0643. \u062C\u0631\u0628 \u0645\u0635\u0637\u0644\u062D\u0627\u062A \u0628\u062D\u062B \u0645\u062E\u062A\u0644\u0641\u0629 \u0623\u0648 \u0633\u062C\u0644 \u0637\u0627\u0644\u0628\u0627\u064B \u062C\u062F\u064A\u062F\u0627\u064B."),l(),a(6,"div",35)(7,"button",7),R("click",function(){k(e);let r=T();return F(r.openRegistrationForm())}),D(8,"i",8),a(9,"span"),c(10,"\u0625\u0636\u0627\u0641\u0629 \u0637\u0627\u0644\u0628"),l()(),a(11,"button",9),R("click",function(){k(e);let r=T();return F(r.openBulkImportForm())}),D(12,"i",10),a(13,"span"),c(14,"\u0627\u0633\u062A\u064A\u0631\u0627\u062F \u062C\u0645\u0627\u0639\u064A"),l()()()()}}function j8(n,t){if(n&1&&(a(0,"div",60),D(1,"i",69),a(2,"span"),c(3),Ln(4,"date"),l()()),n&2){let e=T().$implicit;h(3),Z("\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0633\u062C\u064A\u0644: ",Hi(4,1,e.registrationDate,"dd/MM/yyyy"),"")}}function W8(n,t){if(n&1&&(a(0,"div",60),D(1,"i",70),a(2,"span"),c(3),Ln(4,"date"),l()()),n&2){let e=T().$implicit;h(3),Z("\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u064A\u0644\u0627\u062F: ",Hi(4,1,e.birthDate,"dd/MM/yyyy"),"")}}function G8(n,t){if(n&1){let e=Se();a(0,"div",38)(1,"div",39)(2,"div",40)(3,"div",41),c(4),l()(),a(5,"div",42)(6,"h3"),c(7),l(),a(8,"p",43),c(9),l(),a(10,"div",44)(11,"span",45),c(12),l(),a(13,"span",46),c(14),l()()(),a(15,"div",47)(16,"button",48),R("click",function(r){k(e);let o=T(2);return F(o.toggleDropdown(r))}),D(17,"i",49),l(),a(18,"div",50)(19,"button",51),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.viewStudentDetails(r))}),D(20,"i",52),a(21,"span"),c(22,"\u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644"),l()(),a(23,"button",51),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.editStudent(r))}),D(24,"i",53),a(25,"span"),c(26,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"),l()(),a(27,"button",54),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.openPaymentModal(r))}),D(28,"i",55),a(29,"span"),c(30),l()(),D(31,"div",56),a(32,"button",57),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.deleteStudent(r))}),D(33,"i",58),a(34,"span"),c(35,"\u062D\u0630\u0641 \u0627\u0644\u0637\u0627\u0644\u0628"),l()()()()(),a(36,"div",59)(37,"div",60),D(38,"i",61),a(39,"span"),c(40),l()(),a(41,"div",60),D(42,"i",62),a(43,"span"),c(44),l()(),a(45,"div",60),D(46,"i",63),a(47,"span"),c(48),l()(),te(49,j8,5,4,"div",64)(50,W8,5,4,"div",64),l(),a(51,"div",65)(52,"button",66),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.viewStudentDetails(r))}),D(53,"i",52),a(54,"span",67),c(55,"\u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644"),l()(),a(56,"button",68),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.openPaymentModal(r))}),D(57,"i",55),a(58,"span",67),c(59),l()()()()}if(n&2){let e=t.$implicit,i=T(2);h(2),wo("background",i.getAvatarColor(e)),h(2),Z(" ",i.getStudentInitials(e)," "),h(3),$(e.name),h(2),Z("\u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628: ",e.studentId||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F",""),h(3),$(i.getAcademicYearName(e.academicYear)),h(),jn(i.getPaymentStatusClass(e)),h(),Z(" ",i.getPaymentStatus(e)," "),h(13),P("disabled",e.hasPaidRegistration),h(3),$(e.hasPaidRegistration?"\u0631\u0633\u0648\u0645 \u0645\u062F\u0641\u0648\u0639\u0629":"\u062F\u0641\u0639 \u0627\u0644\u0631\u0633\u0648\u0645"),h(10),Z("\u0627\u0644\u0645\u0633\u062A\u0648\u0649: ",i.getAcademicYearName(e.academicYear),""),h(4),Z("\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631: ",e.parentName||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F",""),h(4),Z("\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641: ",e.parentPhone||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F",""),h(),P("ngIf",e.registrationDate),h(),P("ngIf",e.birthDate),h(6),P("disabled",e.hasPaidRegistration),h(3),Z(" ",e.hasPaidRegistration?"\u0645\u062F\u0641\u0648\u0639":"\u062F\u0641\u0639 \u0627\u0644\u0631\u0633\u0648\u0645"," ")}}function $8(n,t){if(n&1&&(a(0,"div",36),te(1,G8,60,18,"div",37),l()),n&2){let e=T();h(),P("ngForOf",e.getDisplayedStudents())}}function Y8(n,t){if(n&1&&(a(0,"option",30),c(1),l()),n&2){let e=t.$implicit;P("value",e.value),h(),Z(" ",e.label," ")}}function q8(n,t){n&1&&D(0,"span",98)}function X8(n,t){if(n&1){let e=Se();a(0,"div",71),R("click",function(){k(e);let r=T();return F(r.closeRegistrationForm())}),a(1,"div",72),R("click",function(r){return k(e),F(r.stopPropagation())}),a(2,"div",73)(3,"h2"),c(4),l(),a(5,"button",74),R("click",function(){k(e);let r=T();return F(r.closeRegistrationForm())}),D(6,"i",75),l()(),a(7,"div",76)(8,"form",77),R("submit",function(r){return k(e),T().registerStudent(),F(r.preventDefault())}),a(9,"div",78)(10,"div",79)(11,"label",80),c(12,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628 *"),l(),a(13,"input",81),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newStudent.name,r)||(o.newStudent.name=r),F(r)}),l()(),a(14,"div",79)(15,"label",82),c(16,"\u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062F\u0631\u0627\u0633\u064A *"),l(),a(17,"select",83),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newStudent.academicYear,r)||(o.newStudent.academicYear=r),F(r)}),a(18,"option",84),c(19,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u0649"),l(),te(20,Y8,2,2,"option",22),l()()(),a(21,"div",78)(22,"div",79)(23,"label",85),c(24,"\u0627\u0633\u0645 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631"),l(),a(25,"input",86),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newStudent.parentName,r)||(o.newStudent.parentName=r),F(r)}),l()(),a(26,"div",79)(27,"label",87),c(28,"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631"),l(),a(29,"input",88),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newStudent.parentPhone,r)||(o.newStudent.parentPhone=r),F(r)}),l()()(),a(30,"div",78)(31,"div",79)(32,"label",89),c(33,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u064A\u0644\u0627\u062F"),l(),a(34,"input",90),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newStudent.birthDate,r)||(o.newStudent.birthDate=r),F(r)}),l()(),a(35,"div",79)(36,"label",91),c(37,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0633\u062C\u064A\u0644"),l(),a(38,"input",92),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newStudent.registrationDate,r)||(o.newStudent.registrationDate=r),F(r)}),l()()()()(),a(39,"div",93)(40,"button",11),R("click",function(){k(e);let r=T();return F(r.closeRegistrationForm())}),D(41,"i",94),a(42,"span"),c(43,"\u0625\u0644\u063A\u0627\u0621"),l()(),a(44,"button",95),R("click",function(){k(e);let r=T();return F(r.registerStudent())}),D(45,"i",96),a(46,"span"),c(47),l(),te(48,q8,1,0,"span",97),l()()()()}if(n&2){let e=T();h(4),$(e.editMode?"\u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628":"\u062A\u0633\u062C\u064A\u0644 \u0637\u0627\u0644\u0628 \u062C\u062F\u064A\u062F"),h(9),xe("ngModel",e.newStudent.name),h(4),xe("ngModel",e.newStudent.academicYear),h(3),P("ngForOf",e.academicYears.slice(1)),h(5),xe("ngModel",e.newStudent.parentName),h(4),xe("ngModel",e.newStudent.parentPhone),h(5),xe("ngModel",e.newStudent.birthDate),h(4),xe("ngModel",e.newStudent.registrationDate),h(6),P("disabled",e.loading),h(3),$(e.editMode?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A":"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628"),h(),P("ngIf",e.loading)}}function Z8(n,t){if(n&1&&(a(0,"option",30),c(1),l()),n&2){let e=t.$implicit;P("value",e.value),h(),Z(" ",e.label," ")}}function J8(n,t){if(n&1&&(a(0,"option",30),c(1),l()),n&2){let e=t.$implicit;P("value",e.value),h(),Z(" ",e.label," ")}}function K8(n,t){if(n&1){let e=Se();a(0,"tr")(1,"td"),c(2),l(),a(3,"td")(4,"input",118),ye("ngModelChange",function(r){let o=k(e).$implicit;return be(o.name,r)||(o.name=r),F(r)}),l()(),a(5,"td")(6,"input",119),ye("ngModelChange",function(r){let o=k(e).$implicit;return be(o.parentName,r)||(o.parentName=r),F(r)}),l()(),a(7,"td")(8,"input",120),ye("ngModelChange",function(r){let o=k(e).$implicit;return be(o.parentPhone,r)||(o.parentPhone=r),F(r)}),l()(),a(9,"td")(10,"select",121),ye("ngModelChange",function(r){let o=k(e).$implicit;return be(o.academicYear,r)||(o.academicYear=r),F(r)}),a(11,"option",84),c(12,"\u0627\u062E\u062A\u0631 \u0645\u0633\u062A\u0648\u0649"),l(),te(13,J8,2,2,"option",22),l()(),a(14,"td")(15,"input",122),ye("ngModelChange",function(r){let o=k(e).$implicit;return be(o.birthDate,r)||(o.birthDate=r),F(r)}),l()(),a(16,"td")(17,"button",123),R("click",function(){let r=k(e).index,o=T(2);return F(o.removeImportRow(r))}),D(18,"i",124),l()()()}if(n&2){let e=t.$implicit,i=t.index,r=T(2);h(2),$(i+1),h(2),xe("ngModel",e.name),h(2),xe("ngModel",e.parentName),h(2),xe("ngModel",e.parentPhone),h(2),xe("ngModel",e.academicYear),h(3),P("ngForOf",r.academicYears.slice(1)),h(2),xe("ngModel",e.birthDate),h(2),P("disabled",r.bulkImportData.students.length===1)}}function Q8(n,t){n&1&&D(0,"span",98)}function eV(n,t){if(n&1){let e=Se();a(0,"div",71),R("click",function(){k(e);let r=T();return F(r.closeBulkImportForm())}),a(1,"div",99),R("click",function(r){return k(e),F(r.stopPropagation())}),a(2,"div",73)(3,"h2"),c(4,"\u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u062C\u0645\u0627\u0639\u064A\u0629 \u0644\u0644\u0637\u0644\u0627\u0628"),l(),a(5,"button",74),R("click",function(){k(e);let r=T();return F(r.closeBulkImportForm())}),D(6,"i",75),l()(),a(7,"div",76)(8,"div",100)(9,"div",101)(10,"div",102),R("click",function(){k(e);let r=T();return F(r.downloadImportTemplate())}),D(11,"i",103),a(12,"h4"),c(13,"\u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0646\u0645\u0648\u0630\u062C"),l(),a(14,"p"),c(15,"\u0646\u0645\u0648\u0630\u062C CSV \u0644\u0645\u0644\u0621 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"),l()(),a(16,"div",102),R("click",function(){k(e);let r=T();return F(r.importFromText())}),D(17,"i",104),a(18,"h4"),c(19,"\u0646\u0633\u062E \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"),l(),a(20,"p"),c(21,"\u0625\u062F\u062E\u0627\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0643\u0646\u0635"),l()(),a(22,"div",102),R("click",function(){k(e);let r=T();return F(r.addImportRow())}),D(23,"i",105),a(24,"h4"),c(25,"\u0625\u0636\u0627\u0641\u0629 \u064A\u062F\u0648\u064A\u0629"),l(),a(26,"p"),c(27,"\u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644\u0627\u062A \u062C\u062F\u064A\u062F\u0629"),l()()(),a(28,"div",106)(29,"label",107),c(30,"\u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u0627\u0641\u062A\u0631\u0627\u0636\u064A \u0644\u062C\u0645\u064A\u0639 \u0627\u0644\u0637\u0644\u0627\u0628 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),l(),a(31,"select",108),ye("ngModelChange",function(r){k(e);let o=T();return be(o.bulkImportData.academicYear,r)||(o.bulkImportData.academicYear=r),F(r)}),a(32,"option",84),c(33,"\u0627\u062E\u062A\u0631 \u0645\u0633\u062A\u0648\u0649 \u0627\u0641\u062A\u0631\u0627\u0636\u064A"),l(),te(34,Z8,2,2,"option",22),l(),a(35,"small",109),c(36,"\u0633\u064A\u062A\u0645 \u062A\u0637\u0628\u064A\u0642 \u0647\u0630\u0627 \u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0639\u0644\u0649 \u062C\u0645\u064A\u0639 \u0627\u0644\u0637\u0644\u0627\u0628 \u0645\u0627 \u0644\u0645 \u064A\u062A\u0645 \u062A\u062D\u062F\u064A\u062F \u0645\u0633\u062A\u0648\u0649 \u0645\u062E\u062A\u0644\u0641 \u0644\u0643\u0644 \u0637\u0627\u0644\u0628"),l()(),a(37,"div",110)(38,"div",111)(39,"h4"),c(40),l(),a(41,"button",112),R("click",function(){k(e);let r=T();return F(r.addImportRow())}),D(42,"i",113),c(43," \u0625\u0636\u0627\u0641\u0629 \u0637\u0627\u0644\u0628 "),l()(),a(44,"div",114)(45,"table",115)(46,"thead")(47,"tr")(48,"th"),c(49,"#"),l(),a(50,"th"),c(51,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628 *"),l(),a(52,"th"),c(53,"\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631"),l(),a(54,"th"),c(55,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),l(),a(56,"th"),c(57,"\u0627\u0644\u0645\u0633\u062A\u0648\u0649"),l(),a(58,"th"),c(59,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u064A\u0644\u0627\u062F"),l(),a(60,"th"),c(61,"\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(62,"tbody"),te(63,K8,19,8,"tr",116),l()()()()()(),a(64,"div",93)(65,"button",11),R("click",function(){k(e);let r=T();return F(r.closeBulkImportForm())}),D(66,"i",94),a(67,"span"),c(68,"\u0625\u0644\u063A\u0627\u0621"),l()(),a(69,"button",13),R("click",function(){k(e);let r=T();return F(r.downloadImportTemplate())}),D(70,"i",117),a(71,"span"),c(72,"\u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0646\u0645\u0648\u0630\u062C"),l()(),a(73,"button",95),R("click",function(){k(e);let r=T();return F(r.importStudents())}),D(74,"i",10),a(75,"span"),c(76),l(),te(77,Q8,1,0,"span",97),l()()()()}if(n&2){let e=T();h(31),xe("ngModel",e.bulkImportData.academicYear),h(3),P("ngForOf",e.academicYears.slice(1)),h(6),Z("\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628 (",e.bulkImportData.students.length," \u0637\u0627\u0644\u0628)"),h(23),P("ngForOf",e.bulkImportData.students),h(10),P("disabled",e.loading||e.bulkImportData.students.length===0),h(3),Z("\u0627\u0633\u062A\u064A\u0631\u0627\u062F ",e.bulkImportData.students.length," \u0637\u0627\u0644\u0628"),h(),P("ngIf",e.loading)}}function tV(n,t){n&1&&D(0,"span",98)}function nV(n,t){if(n&1){let e=Se();a(0,"div",71),R("click",function(){k(e);let r=T();return F(r.closePaymentModal())}),a(1,"div",72),R("click",function(r){return k(e),F(r.stopPropagation())}),a(2,"div",73)(3,"h2"),c(4,"\u062F\u0641\u0639 \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644"),l(),a(5,"button",74),R("click",function(){k(e);let r=T();return F(r.closePaymentModal())}),D(6,"i",75),l()(),a(7,"div",76)(8,"div",125)(9,"div",126)(10,"div",40)(11,"div",41),c(12),l()(),a(13,"div",127)(14,"h3"),c(15),l(),a(16,"p",43),c(17),l(),a(18,"p",128),c(19),l()()(),a(20,"form",129),R("submit",function(r){return k(e),T().processPayment(),F(r.preventDefault())}),a(21,"div",78)(22,"div",79)(23,"label",130),c(24,"\u0627\u0644\u0645\u0628\u0644\u063A (\u062F\u064A\u0646\u0627\u0631 \u062C\u0632\u0627\u0626\u0631\u064A) *"),l(),a(25,"input",131),ye("ngModelChange",function(r){k(e);let o=T();return be(o.paymentData.amount,r)||(o.paymentData.amount=r),F(r)}),l()(),a(26,"div",79)(27,"label",132),c(28,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639 *"),l(),a(29,"select",133),ye("ngModelChange",function(r){k(e);let o=T();return be(o.paymentData.paymentMethod,r)||(o.paymentData.paymentMethod=r),F(r)}),a(30,"option",134),c(31,"\u0646\u0642\u062F\u0627\u064B"),l(),a(32,"option",135),c(33,"\u0628\u0637\u0627\u0642\u0629 \u0627\u0626\u062A\u0645\u0627\u0646"),l(),a(34,"option",136),c(35,"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A"),l(),a(36,"option",137),c(37,"\u0634\u064A\u0643"),l()()()(),a(38,"div",79)(39,"label",138),c(40,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629"),l(),a(41,"textarea",139),ye("ngModelChange",function(r){k(e);let o=T();return be(o.paymentData.notes,r)||(o.paymentData.notes=r),F(r)}),l()()()()(),a(42,"div",93)(43,"button",11),R("click",function(){k(e);let r=T();return F(r.closePaymentModal())}),D(44,"i",94),a(45,"span"),c(46,"\u0625\u0644\u063A\u0627\u0621"),l()(),a(47,"button",95),R("click",function(){k(e);let r=T();return F(r.processPayment())}),D(48,"i",55),a(49,"span"),c(50,"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062F\u0641\u0639"),l(),te(51,tV,1,0,"span",97),l()()()()}if(n&2){let e=T();h(10),wo("background",e.getAvatarColor(e.selectedStudent)),h(2),Z(" ",e.getStudentInitials(e.selectedStudent)," "),h(3),$(e.selectedStudent.name),h(2),Z("\u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628: ",e.selectedStudent.studentId||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F",""),h(2),Z("\u0627\u0644\u0645\u0633\u062A\u0648\u0649: ",e.getAcademicYearName(e.selectedStudent.academicYear),""),h(6),xe("ngModel",e.paymentData.amount),h(4),xe("ngModel",e.paymentData.paymentMethod),h(12),xe("ngModel",e.paymentData.notes),h(6),P("disabled",e.loading),h(4),P("ngIf",e.loading)}}var Sg=class n{constructor(t,e){this.studentsService=t;this.router=e}toggleBodyScroll(t){if(typeof document<"u"){let e=document.querySelector("body");e&&(t?e.classList.add("no-scroll","modal-open"):e.classList.remove("no-scroll","modal-open"))}}students=[];filteredStudents=[];loading=!1;searchTerm="";selectedAcademicYear="all";showRegistrationForm=!1;showEditForm=!1;showBulkImportForm=!1;showPaymentModal=!1;selectedStudent=null;editMode=!1;newStudent={name:"",parentName:"",parentPhone:"",academicYear:"",birthDate:"",registrationDate:new Date().toISOString().split("T")[0]};bulkImportData={students:[{name:"",parentName:"",parentPhone:"",academicYear:"",birthDate:""}],delimiter:",",academicYear:""};paymentData={amount:600,paymentMethod:"cash",notes:""};academicYears=[{value:"all",label:"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0633\u062A\u0648\u064A\u0627\u062A"},{value:"1AS",label:"\u0627\u0644\u0623\u0648\u0644\u0649 \u062B\u0627\u0646\u0648\u064A"},{value:"2AS",label:"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u062B\u0627\u0646\u0648\u064A"},{value:"3AS",label:"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u062B\u0627\u0646\u0648\u064A"},{value:"1MS",label:"\u0627\u0644\u0623\u0648\u0644\u0649 \u0645\u062A\u0648\u0633\u0637"},{value:"2MS",label:"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0645\u062A\u0648\u0633\u0637"},{value:"3MS",label:"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u0645\u062A\u0648\u0633\u0637"},{value:"4MS",label:"\u0627\u0644\u0631\u0627\u0628\u0639\u0629 \u0645\u062A\u0648\u0633\u0637"},{value:"1AP",label:"\u0627\u0644\u0623\u0648\u0644\u0649 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"2AP",label:"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"3AP",label:"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"4AP",label:"\u0627\u0644\u0631\u0627\u0628\u0639\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"5AP",label:"\u0627\u0644\u062E\u0627\u0645\u0633\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"}];ngOnInit(){this.loadStudents()}loadStudents(){this.loading=!0,this.studentsService.getStudents().subscribe({next:t=>{this.students=t,this.filteredStudents=[...this.students],this.loading=!1},error:t=>{console.error("Error loading students:",t),$n.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628","error"),this.loading=!1}})}filterStudents(){this.filteredStudents=this.students.filter(t=>{let e=!this.searchTerm||t.name.toLowerCase().includes(this.searchTerm.toLowerCase())||t.studentId&&t.studentId.includes(this.searchTerm)||t.parentName&&t.parentName.toLowerCase().includes(this.searchTerm.toLowerCase()),i=this.selectedAcademicYear==="all"||t.academicYear===this.selectedAcademicYear;return e&&i})}getDisplayedStudents(){return this.filteredStudents}clearSearch(){this.searchTerm="",this.selectedAcademicYear="all",this.filterStudents()}getAvatarColor(t){if(!t)return"#0a66c2";let e=["#0a66c2","#004182","#2563eb","#3b82f6","#7c3aed","#10b981","#06b6d4","#f59e0b","#ef4444","#8b5cf6"],i=t.name.length%e.length;return e[i]}getStudentInitials(t){return t?t.name.charAt(0).toUpperCase():"?"}getAcademicYearName(t){if(!t)return"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F";let e=this.academicYears.find(i=>i.value===t);return e?e.label:t}getPaymentStatus(t){return t.hasPaidRegistration?"\u0645\u062F\u0641\u0648\u0639":"\u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639"}getPaymentStatusClass(t){return t.hasPaidRegistration?"status-paid":"status-unpaid"}openRegistrationForm(){this.editMode=!1,this.resetForm(),this.showRegistrationForm=!0,this.toggleBodyScroll(!0)}editStudent(t){this.editMode=!0,this.selectedStudent=t,this.newStudent={name:t.name,parentName:t.parentName||"",parentPhone:t.parentPhone||"",academicYear:t.academicYear,birthDate:t.birthDate||"",registrationDate:t.registrationDate?new Date(t.registrationDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]},this.showRegistrationForm=!0}closeRegistrationForm(){this.showRegistrationForm=!1,this.selectedStudent=null,this.toggleBodyScroll(!1),this.resetForm()}registerStudent(){if(this.validateStudentForm())if(this.loading=!0,this.editMode&&this.selectedStudent){let t=this.selectedStudent._id||this.selectedStudent.id;if(!t){$n.default.fire("\u062E\u0637\u0623","\u0644\u0627 \u064A\u0645\u0643\u0646 \u062A\u062D\u062F\u064A\u062F \u0647\u0648\u064A\u0629 \u0627\u0644\u0637\u0627\u0644\u0628","error"),this.loading=!1;return}this.studentsService.updateStudent(t,this.newStudent).subscribe({next:e=>{$n.default.fire("\u0646\u062C\u0627\u062D","\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D","success"),this.closeRegistrationForm(),this.loadStudents()},error:e=>{console.error("Error updating student:",e),$n.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628","error"),this.loading=!1}})}else this.studentsService.createStudent(this.newStudent).subscribe({next:t=>{$n.default.fire("\u0646\u062C\u0627\u062D","\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D","success"),this.closeRegistrationForm(),this.loadStudents()},error:t=>{console.error("Error registering student:",t),$n.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628","error"),this.loading=!1}})}validateStudentForm(){return this.newStudent.name.trim()?this.newStudent.academicYear?!0:($n.default.fire("\u062E\u0637\u0623","\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062F\u0631\u0627\u0633\u064A","error"),!1):($n.default.fire("\u062E\u0637\u0623","\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628","error"),!1)}resetForm(){this.newStudent={name:"",parentName:"",parentPhone:"",academicYear:"",birthDate:"",registrationDate:new Date().toISOString().split("T")[0]}}toggleDropdown(t){t.stopPropagation();let e=t.target.closest(".student-actions-dropdown")?.querySelector(".dropdown-menu");e&&e.classList.toggle("show")}closeAllDropdowns(t){document.querySelectorAll(".dropdown-menu.show").forEach(i=>{i.closest(".student-actions-dropdown")?.contains(t.target)||i.classList.remove("show")})}openBulkImportForm(){this.bulkImportData={students:[{name:"",parentName:"",parentPhone:"",academicYear:"",birthDate:""}],delimiter:",",academicYear:""},this.showBulkImportForm=!0,this.toggleBodyScroll(!0)}closeBulkImportForm(){this.showBulkImportForm=!1,this.toggleBodyScroll(!1)}addImportRow(){this.bulkImportData.students.push({name:"",parentName:"",parentPhone:"",academicYear:"",birthDate:""})}removeImportRow(t){this.bulkImportData.students.length>1&&this.bulkImportData.students.splice(t,1)}importFromText(){$n.default.fire({title:"\u0625\u062F\u062E\u0627\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0646\u0635\u064A\u0629",html:`
        <div>
          <p>\u0623\u062F\u062E\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628\u060C \u0643\u0644 \u0637\u0627\u0644\u0628 \u0641\u064A \u0633\u0637\u0631 \u062C\u062F\u064A\u062F.</p>
          <p>\u0627\u0644\u0635\u064A\u063A\u0629: <strong>\u0627\u0644\u0627\u0633\u0645,\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631,\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641,\u0627\u0644\u0645\u0633\u062A\u0648\u0649,\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u064A\u0644\u0627\u062F (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)</strong></p>
          <p>\u0645\u062B\u0627\u0644: \u0645\u062D\u0645\u062F \u0623\u062D\u0645\u062F,\u0623\u062D\u0645\u062F \u0645\u062D\u0645\u062F,0551234567,1AS,2008-01-15</p>
          <textarea id="studentsText" rows="10" class="swal2-textarea" 
            placeholder="\u0623\u062F\u062E\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628 \u0647\u0646\u0627..."></textarea>
          <div class="mt-3">
            <label for="delimiter">\u0627\u0644\u0641\u0627\u0635\u0644:</label>
            <select id="delimiter" class="swal2-select">
              <option value=",">\u0641\u0627\u0635\u0644\u0629 (,)</option>
              <option value=";">\u0641\u0627\u0635\u0644\u0629 \u0645\u0646\u0642\u0648\u0637\u0629 (;)</option>
              <option value="	">\u062A\u0628\u0648\u064A\u0628 (Tab)</option>
            </select>
          </div>
        </div>
      `,showCancelButton:!0,confirmButtonText:"\u0627\u0633\u062A\u064A\u0631\u0627\u062F",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",preConfirm:()=>{let t=document.getElementById("studentsText").value,e=document.getElementById("delimiter").value;return t.trim()?{text:t,delimiter:e}:($n.default.showValidationMessage("\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628"),!1)}}).then(t=>{t.isConfirmed&&t.value&&this.parseTextData(t.value.text,t.value.delimiter)})}parseTextData(t,e){let r=t.split(`
`).filter(o=>o.trim()!=="").map(o=>{let s=o.split(e).map(u=>u.trim());return s.length>=3?{name:s[0],parentName:s[1]||"",parentPhone:s[2]||"",academicYear:this.bulkImportData.academicYear||s[3]||"",birthDate:s[4]||""}:null}).filter(o=>o!==null);r.length>0?(this.bulkImportData.students=r,$n.default.fire("\u0646\u062C\u0627\u062D",`\u062A\u0645 \u062A\u062D\u0644\u064A\u0644 ${r.length} \u0637\u0627\u0644\u0628`,"success")):$n.default.fire("\u062E\u0637\u0623","\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0628\u064A\u0627\u0646\u0627\u062A \u0635\u062D\u064A\u062D\u0629","error")}importStudents(){this.validateBulkImportData()&&$n.default.fire({title:"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0627\u0633\u062A\u064A\u0631\u0627\u062F",html:`\u0633\u064A\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 ${this.bulkImportData.students.length} \u0637\u0627\u0644\u0628. \u0647\u0644 \u062A\u0631\u064A\u062F \u0627\u0644\u0645\u062A\u0627\u0628\u0639\u0629\u061F`,icon:"warning",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645\u060C \u0627\u0633\u062A\u064A\u0631\u0627\u062F",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"}).then(t=>{t.isConfirmed&&this.processBulkImport()})}validateBulkImportData(){for(let t=0;t<this.bulkImportData.students.length;t++)if(!this.bulkImportData.students[t].name.trim())return $n.default.fire("\u062E\u0637\u0623",`\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628 \u0641\u064A \u0627\u0644\u0635\u0641 ${t+1}`,"error"),!1;return!this.bulkImportData.academicYear&&this.bulkImportData.students.some(t=>!t.academicYear)?($n.default.fire("\u062E\u0637\u0623","\u064A\u0631\u062C\u0649 \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062F\u0631\u0627\u0633\u064A \u0644\u0644\u0637\u0644\u0627\u0628","error"),!1):!0}processBulkImport(){this.loading=!0,this.bulkImportData.academicYear&&this.bulkImportData.students.forEach(o=>{o.academicYear||(o.academicYear=this.bulkImportData.academicYear)});let t=0,e=0,i=this.bulkImportData.students.length,r=o=>{if(o>=i){this.loading=!1,this.showBulkImportForm=!1,$n.default.fire({title:"\u062A\u0645 \u0627\u0644\u0627\u0633\u062A\u064A\u0631\u0627\u062F",html:`
            <div class="text-center">
              <i class="bi bi-check-circle-fill text-success" style="font-size: 3rem;"></i>
              <h4 class="mt-3">\u062A\u0645 \u0627\u0644\u0627\u0646\u062A\u0647\u0627\u0621 \u0645\u0646 \u0627\u0644\u0627\u0633\u062A\u064A\u0631\u0627\u062F</h4>
              <div class="mt-3">
                <p>\u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u0645\u0636\u0627\u0641\u0629 \u0628\u0646\u062C\u0627\u062D: <strong>${t}</strong></p>
                <p>\u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u062A\u064A \u0641\u0634\u0644 \u0625\u0636\u0627\u0641\u062A\u0647\u0627: <strong>${e}</strong></p>
              </div>
            </div>
          `,confirmButtonText:"\u062A\u0645"}).then(()=>{this.loadStudents()});return}let s=this.bulkImportData.students[o],u=yt(Ie({},s),{registrationDate:new Date().toISOString().split("T")[0]});this.studentsService.createStudent(u).subscribe({next:d=>{t++,r(o+1)},error:d=>{console.error(`Error importing student ${s.name}:`,d),e++,r(o+1)}})};r(0)}downloadImportTemplate(){let e=encodeURI(`data:text/csv;charset=utf-8,\u0627\u0644\u0627\u0633\u0645,\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631,\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641,\u0627\u0644\u0645\u0633\u062A\u0648\u0649,\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u064A\u0644\u0627\u062F
\u0645\u062D\u0645\u062F \u0623\u062D\u0645\u062F,\u0623\u062D\u0645\u062F \u0645\u062D\u0645\u062F,0551234567,1AS,2008-01-15
\u0633\u0627\u0631\u0629 \u0645\u062D\u0645\u062F,\u0645\u062D\u0645\u062F \u062E\u0627\u0644\u062F,0557654321,2AS,2007-05-20
\u0639\u0644\u064A \u062D\u0633\u0646,\u062D\u0633\u0646 \u0639\u0644\u064A,0551122334,1MS,2009-08-10`),i=document.createElement("a");i.setAttribute("href",e),i.setAttribute("download","\u0646\u0645\u0648\u0630\u062C_\u0627\u0633\u062A\u064A\u0631\u0627\u062F_\u0627\u0644\u0637\u0644\u0627\u0628.csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}openPaymentModal(t){this.selectedStudent=t,this.paymentData.amount=600,this.showPaymentModal=!0,this.toggleBodyScroll(!0)}closePaymentModal(){this.showPaymentModal=!1,this.selectedStudent=null,this.toggleBodyScroll(!1),this.paymentData={amount:600,paymentMethod:"cash",notes:""}}ngOnDestroy(){this.toggleBodyScroll(!1)}processPayment(){if(!this.selectedStudent)return;let t=this.selectedStudent._id||this.selectedStudent.id;if(!t){$n.default.fire("\u062E\u0637\u0623","\u0644\u0627 \u064A\u0645\u0643\u0646 \u062A\u062D\u062F\u064A\u062F \u0647\u0648\u064A\u0629 \u0627\u0644\u0637\u0627\u0644\u0628","error");return}this.loading=!0,this.studentsService.payRegistrationFee(t,this.paymentData).subscribe({next:e=>{$n.default.fire("\u0646\u062C\u0627\u062D","\u062A\u0645 \u062F\u0641\u0639 \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644 \u0628\u0646\u062C\u0627\u062D","success"),this.closePaymentModal(),this.loadStudents()},error:e=>{console.error("Error processing payment:",e),$n.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u062F\u0641\u0639","error"),this.loading=!1}})}viewStudentDetails(t){let e=t._id||t.id;e?this.router.navigate(["/home/students-management",e]):$n.default.fire("\u062E\u0637\u0623","\u0644\u0627 \u064A\u0645\u0643\u0646 \u0639\u0631\u0636 \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628","error")}deleteStudent(t){let e=t._id||t.id;if(!e){$n.default.fire("\u062E\u0637\u0623","\u0644\u0627 \u064A\u0645\u0643\u0646 \u062A\u062D\u062F\u064A\u062F \u0647\u0648\u064A\u0629 \u0627\u0644\u0637\u0627\u0644\u0628 \u0644\u0644\u062D\u0630\u0641","error");return}$n.default.fire({title:"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F\u061F",text:`\u0633\u064A\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0637\u0627\u0644\u0628 ${t.name} \u0628\u0634\u0643\u0644 \u062F\u0627\u0626\u0645`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"\u0646\u0639\u0645\u060C \u0627\u062D\u0630\u0641",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"}).then(i=>{i.isConfirmed&&this.studentsService.deleteStudent(e).subscribe({next:()=>{$n.default.fire("\u062A\u0645 \u0627\u0644\u062D\u0630\u0641","\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D","success"),this.loadStudents()},error:r=>{console.error("Error deleting student:",r),$n.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062D\u0630\u0641 \u0627\u0644\u0637\u0627\u0644\u0628","error")}})})}parseCSV(t,e=","){let i=t.split(`
`),r=[],o=i[0].split(e).map(s=>s.trim());for(let s=1;s<i.length;s++){if(!i[s].trim())continue;let u={},d=i[s].split(e).map(p=>p.trim());for(let p=0;p<o.length;p++)u[o[p]]=d[p]||"";r.push(u)}return r}static \u0275fac=function(e){return new(e||n)(Te(oo),Te(Si))};static \u0275cmp=vn({type:n,selectors:[["app-students-management"]],hostBindings:function(e,i){e&1&&R("click",function(o){return i.closeAllDropdowns(o)},!1,xS)},decls:45,vars:10,consts:[[1,"students-management"],[1,"header"],[1,"header-content"],[1,"logo-section"],[1,"logo"],[1,"bi","bi-people-fill"],[1,"header-actions"],[1,"btn-primary",3,"click"],[1,"bi","bi-person-plus-fill"],[1,"btn-success",3,"click"],[1,"bi","bi-upload"],[1,"btn-secondary",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"btn-info",3,"click"],[1,"bi","bi-cloud-download-fill"],[1,"controls-section"],[1,"search-box"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0637\u0627\u0644\u0628 \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0627\u0644\u0631\u0642\u0645 \u0623\u0648 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631...",3,"ngModelChange","input","ngModel"],[1,"bi","bi-search"],[1,"filter-group"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"stats-badge"],[1,"badge-count"],[1,"badge-label"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","students-grid",4,"ngIf"],["class","student-modal-overlay",3,"click",4,"ngIf"],[3,"value"],[1,"loading-container"],[1,"spinner"],[1,"empty-state"],[1,"bi","bi-person-x-fill"],[1,"empty-state-actions"],[1,"students-grid"],["class","student-card",4,"ngFor","ngForOf"],[1,"student-card"],[1,"student-header"],[1,"student-avatar","large"],[1,"avatar-fallback"],[1,"student-info"],[1,"student-id"],[1,"student-tags"],[1,"tag","academic-tag"],[1,"tag","status-tag"],[1,"student-actions-dropdown"],[1,"dropdown-toggle",3,"click"],[1,"bi","bi-three-dots-vertical"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"bi","bi-eye-fill"],[1,"bi","bi-pencil-square"],[1,"dropdown-item",3,"click","disabled"],[1,"bi","bi-cash-stack"],[1,"dropdown-divider"],[1,"dropdown-item","text-danger",3,"click"],[1,"bi","bi-trash3-fill"],[1,"student-details"],[1,"detail-item"],[1,"bi","bi-mortarboard-fill"],[1,"bi","bi-person-vcard-fill"],[1,"bi","bi-telephone-fill"],["class","detail-item",4,"ngIf"],[1,"student-actions"],[1,"btn-action","btn-view",3,"click"],[1,"btn-text"],[1,"btn-action","btn-payment",3,"click","disabled"],[1,"bi","bi-calendar-check-fill"],[1,"bi","bi-balloon-fill"],[1,"student-modal-overlay",3,"click"],[1,"student-modal",3,"click"],[1,"student-modal-header"],[1,"close-btn",3,"click"],[1,"bi","bi-x-lg"],[1,"student-modal-body"],[1,"student-form",3,"submit"],[1,"form-row"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628 \u0627\u0644\u0643\u0627\u0645\u0644","required","",3,"ngModelChange","ngModel"],["for","academicYear"],["id","academicYear","name","academicYear","required","",3,"ngModelChange","ngModel"],["value",""],["for","parentName"],["type","text","id","parentName","name","parentName","placeholder","\u0627\u0633\u0645 \u0648\u0644\u064A \u0623\u0645\u0631 \u0627\u0644\u0637\u0627\u0644\u0628",3,"ngModelChange","ngModel"],["for","parentPhone"],["type","tel","id","parentPhone","name","parentPhone","placeholder","05X XXX XXXX",3,"ngModelChange","ngModel"],["for","birthDate"],["type","date","id","birthDate","name","birthDate",3,"ngModelChange","ngModel"],["for","registrationDate"],["type","date","id","registrationDate","name","registrationDate",3,"ngModelChange","ngModel"],[1,"student-modal-footer"],[1,"bi","bi-x-circle"],[1,"btn-success",3,"click","disabled"],[1,"bi","bi-check-circle-fill"],["class","spinner-small",4,"ngIf"],[1,"spinner-small"],[1,"student-modal","student-modal-lg",3,"click"],[1,"bulk-import-container"],[1,"import-options"],[1,"option-card",3,"click"],[1,"bi","bi-file-earmark-arrow-down"],[1,"bi","bi-text-paragraph"],[1,"bi","bi-plus-circle"],[1,"form-group","full-width"],["for","defaultAcademicYear"],["id","defaultAcademicYear","name","defaultAcademicYear",3,"ngModelChange","ngModel"],[1,"form-text"],[1,"students-table-container"],[1,"table-header"],[1,"btn-sm","btn-success",3,"click"],[1,"bi","bi-plus"],[1,"table-responsive"],[1,"students-table"],[4,"ngFor","ngForOf"],[1,"bi","bi-download"],["type","text","placeholder","\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631",3,"ngModelChange","ngModel"],["type","tel","placeholder","05X XXX XXXX",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],[1,"btn-icon","btn-danger",3,"click","disabled"],[1,"bi","bi-trash"],[1,"payment-info"],[1,"student-payment-header"],[1,"student-payment-details"],[1,"academic-year"],[1,"payment-form",3,"submit"],["for","amount"],["type","number","id","amount","name","amount","min","0","step","100","required","",3,"ngModelChange","ngModel"],["for","paymentMethod"],["id","paymentMethod","name","paymentMethod","required","",3,"ngModelChange","ngModel"],["value","cash"],["value","card"],["value","transfer"],["value","check"],["for","notes"],["id","notes","name","notes","rows","3","placeholder","\u0623\u064A \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629 \u062D\u0648\u0644 \u0627\u0644\u062F\u0641\u0639...",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4),D(5,"i",5),l(),a(6,"h1"),c(7,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0637\u0644\u0627\u0628"),l()(),a(8,"div",6)(9,"button",7),R("click",function(){return i.openRegistrationForm()}),D(10,"i",8),a(11,"span"),c(12,"\u0637\u0627\u0644\u0628 \u062C\u062F\u064A\u062F"),l()(),a(13,"button",9),R("click",function(){return i.openBulkImportForm()}),D(14,"i",10),a(15,"span"),c(16,"\u0625\u0636\u0627\u0641\u0629 \u062C\u0645\u0627\u0639\u064A\u0629"),l()(),a(17,"button",11),R("click",function(){return i.clearSearch()}),D(18,"i",12),a(19,"span"),c(20,"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646"),l()(),a(21,"button",13),R("click",function(){return i.loadStudents()}),D(22,"i",14),a(23,"span"),c(24,"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"),l()()()()(),a(25,"div",15)(26,"div",16)(27,"input",17),ye("ngModelChange",function(o){return be(i.searchTerm,o)||(i.searchTerm=o),o}),R("input",function(){return i.filterStudents()}),l(),D(28,"i",18),l(),a(29,"div",19)(30,"select",20),ye("ngModelChange",function(o){return be(i.selectedAcademicYear,o)||(i.selectedAcademicYear=o),o}),R("change",function(){return i.filterStudents()}),a(31,"option",21),c(32,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0633\u062A\u0648\u064A\u0627\u062A"),l(),te(33,B8,2,2,"option",22),l()(),a(34,"div",23)(35,"span",24),c(36),l(),a(37,"span",25),c(38,"\u0637\u0627\u0644\u0628"),l()()(),te(39,z8,6,0,"div",26)(40,H8,15,0,"div",27)(41,$8,2,1,"div",28)(42,X8,49,11,"div",29)(43,eV,78,7,"div",29)(44,nV,52,11,"div",29),l()),e&2&&(h(27),xe("ngModel",i.searchTerm),h(3),xe("ngModel",i.selectedAcademicYear),h(3),P("ngForOf",i.academicYears.slice(1)),h(3),$(i.getDisplayedStudents().length),h(3),P("ngIf",i.loading),h(),P("ngIf",!i.loading&&i.getDisplayedStudents().length===0),h(),P("ngIf",!i.loading&&i.getDisplayedStudents().length>0),h(),P("ngIf",i.showRegistrationForm),h(),P("ngIf",i.showBulkImportForm),h(),P("ngIf",i.showPaymentModal&&i.selectedStudent))},dependencies:[bn,ii,Wn,Ao,oi,xr,Ii,Oi,Yn,Nr,xi,ri,vr,Lr,Ro,Kn,Oo],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:20px;width:100%;max-width:600px;max-height:85vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d}.modal-lg[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{padding:24px 32px;border-bottom:2px solid #f3f4f6;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;background:#fff;border-radius:20px 20px 0 0;z-index:1}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:24px;font-weight:700}.close-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:12px;background:#f3f4f6;border:none;display:flex;align-items:center;justify-content:center;color:#6b7280;cursor:pointer;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff}.modal-body[_ngcontent-%COMP%]{padding:32px}.modal-footer[_ngcontent-%COMP%]{padding:24px 32px;border-top:2px solid #f3f4f6;display:flex;justify-content:flex-end;gap:12px;position:sticky;bottom:0;background:#fff;border-radius:0 0 20px 20px}.student-form[_ngcontent-%COMP%], .payment-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#374151;font-size:14px;font-weight:600}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e5e7eb;border-radius:12px;font-family:Cairo,sans-serif;font-size:14px;transition:all .3s ease;background:#f9fafb}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff;box-shadow:0 0 0 4px #3b82f61a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-text[_ngcontent-%COMP%]{color:#6b7280;font-size:13px;margin-top:4px}.bulk-import-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.import-options[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}.option-card[_ngcontent-%COMP%]{background:#f9fafb;border:2px solid #e5e7eb;border-radius:16px;padding:24px;text-align:center;cursor:pointer;transition:all .3s ease}.option-card[_ngcontent-%COMP%]:hover{background:#fff;border-color:#3b82f6;transform:translateY(-2px);box-shadow:0 8px 25px #3b82f61a}.option-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:36px;color:#3b82f6;margin-bottom:12px;display:block}.option-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;color:#1f2937;font-size:16px}.option-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6b7280;font-size:14px}.students-table-container[_ngcontent-%COMP%]{background:#f9fafb;border-radius:16px;padding:20px;border:2px solid #e5e7eb}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.table-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:18px}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.students-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 6px #0000000d}.students-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f3f4f6}.students-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px;text-align:right;font-weight:600;color:#374151;border-bottom:2px solid #e5e7eb;white-space:nowrap}.students-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e5e7eb}.students-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.students-table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .students-table[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:2px solid #e5e7eb;border-radius:8px;font-family:Cairo,sans-serif;font-size:14px;background:#fff;transition:all .3s ease}.students-table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .students-table[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.students-table[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{min-width:120px}.payment-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.student-payment-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding:20px;background:#f9fafb;border-radius:16px;border:2px solid #e5e7eb}.student-payment-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;color:#1f2937;font-size:20px;font-weight:700}.student-payment-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;color:#6b7280;font-size:14px}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;text-align:center}.logo-section[_ngcontent-%COMP%]{justify-content:center;margin-bottom:16px}.header-actions[_ngcontent-%COMP%]{justify-content:center}.controls-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{min-width:100%}.filter-group[_ngcontent-%COMP%]{width:100%}.students-grid[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.student-payment-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.modal-footer[_ngcontent-%COMP%]{flex-direction:column}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.import-options[_ngcontent-%COMP%]{grid-template-columns:1fr}.students-table[_ngcontent-%COMP%]{min-width:800px}.empty-state-actions[_ngcontent-%COMP%]{flex-direction:column}.empty-state-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media (max-width: 480px){.students-management[_ngcontent-%COMP%]{padding:12px}.header[_ngcontent-%COMP%]{padding:20px}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.student-card[_ngcontent-%COMP%]{padding:20px}.student-header[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.student-actions[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal[_ngcontent-%COMP%]{margin:10px;max-height:95vh}.modal-lg[_ngcontent-%COMP%]{margin:10px}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.modal[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.modal[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.modal[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.text-center[_ngcontent-%COMP%]{text-align:center}.text-danger[_ngcontent-%COMP%]{color:#dc2626}.mt-3[_ngcontent-%COMP%]{margin-top:12px}@media print{.header-actions[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%], .student-actions[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%]{display:none!important}.students-management[_ngcontent-%COMP%]{background:#fff!important}.student-card[_ngcontent-%COMP%]{break-inside:avoid;box-shadow:none!important;border:1px solid #ddd!important}}[_nghost-%COMP%]{display:block;min-height:100vh;background:linear-gradient(135deg,#f8fafc,#f1f5f9);font-family:Cairo,sans-serif}.students-management[_ngcontent-%COMP%]{min-height:calc(100vh - 120px);padding:25px;margin:0;width:100%;box-sizing:border-box}.header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0a66c2,#004182);border-radius:20px;padding:24px 32px;margin-bottom:24px;color:#fff;box-shadow:0 10px 30px #0a66c233}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.logo[_ngcontent-%COMP%]{width:56px;height:56px;background:#ffffff26;border-radius:16px;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}.logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:28px;color:#fff}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:700;background:linear-gradient(45deg,#fff,#e0f2fe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}button[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:12px;font-family:Cairo,sans-serif;font-weight:600;font-size:14px;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;justify-content:center;gap:8px}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6b7280,#4b5563);color:#fff}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.btn-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0ea5e9,#0284c7);color:#fff}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:8px 16px;font-size:13px}.btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;padding:0;border-radius:10px}.controls-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;margin-bottom:24px;display:flex;align-items:center;gap:20px;flex-wrap:wrap;box-shadow:0 4px 20px #00000014;border:1px solid #e5e7eb}.search-box[_ngcontent-%COMP%]{flex:1;min-width:300px;position:relative}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 48px 14px 16px;border:2px solid #e5e7eb;border-radius:12px;font-family:Cairo,sans-serif;font-size:14px;transition:all .3s ease;background:#f9fafb}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff;box-shadow:0 0 0 4px #3b82f61a}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:16px;top:50%;transform:translateY(-50%);color:#9ca3af}.filter-group[_ngcontent-%COMP%]{min-width:200px}.form-select[_ngcontent-%COMP%]{width:100%;padding:14px 16px;border:2px solid #e5e7eb;border-radius:12px;font-family:Cairo,sans-serif;font-size:14px;background:#f9fafb;cursor:pointer;transition:all .3s ease}.form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff;box-shadow:0 0 0 4px #3b82f61a}.stats-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;padding:12px 24px;border-radius:12px;display:flex;flex-direction:column;align-items:center;min-width:100px}.badge-count[_ngcontent-%COMP%]{font-size:28px;font-weight:800}.badge-label[_ngcontent-%COMP%]{font-size:14px;opacity:.9}.loading-container[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:60px 40px;text-align:center;box-shadow:0 4px 20px #00000014;border:1px solid #e5e7eb;margin:20px 0}.spinner[_ngcontent-%COMP%]{width:60px;height:60px;border:4px solid #e5e7eb;border-top-color:#3b82f6;border-radius:50%;margin:0 auto 24px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#1f2937;font-size:20px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6b7280}.spinner-small[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;display:inline-block;margin-right:8px}.empty-state[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:60px 40px;text-align:center;box-shadow:0 4px 20px #00000014;border:1px solid #e5e7eb;margin:20px 0}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px;color:#9ca3af;margin-bottom:24px;display:block}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;color:#1f2937;font-size:24px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;max-width:500px;margin:0 auto 32px;line-height:1.6}.empty-state-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}.students-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(380px,1fr));gap:24px;margin-top:24px}.student-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:24px;transition:all .3s ease;box-shadow:0 4px 20px #00000014;border:1px solid #e5e7eb;display:flex;flex-direction:column;gap:20px;position:relative}.student-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 32px #00000026}.student-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px;padding-bottom:20px;border-bottom:2px solid #f3f4f6}.student-avatar.large[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:16px;overflow:hidden;flex-shrink:0;position:relative;display:flex;align-items:center;justify-content:center;font-size:24px;font-weight:700;color:#fff}.avatar-fallback[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.student-info[_ngcontent-%COMP%]{flex:1;min-width:0}.student-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;color:#1f2937;font-size:20px;font-weight:700;word-break:break-word}.student-id[_ngcontent-%COMP%]{margin:0 0 8px;color:#6b7280;font-size:14px}.student-tags[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.tag[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600}.academic-tag[_ngcontent-%COMP%]{background:#e0f2fe;color:#0369a1}.status-tag[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.status-tag.status-unpaid[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.student-actions-dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-toggle[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;background:#f3f4f6;border:none;display:flex;align-items:center;justify-content:center;color:#6b7280;cursor:pointer;transition:all .3s ease}.dropdown-toggle[_ngcontent-%COMP%]:hover{background:#e5e7eb}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:1000;min-width:200px;background:#fff;border-radius:12px;box-shadow:0 10px 25px #0000001a;border:1px solid #e5e7eb;padding:8px 0;display:none}.dropdown-menu.show[_ngcontent-%COMP%]{display:block}.dropdown-item[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:none;background:transparent;display:flex;align-items:center;gap:10px;color:#4b5563;font-size:14px;text-align:right;cursor:pointer;transition:all .2s ease}.dropdown-item[_ngcontent-%COMP%]:hover{background:#f9fafb;color:#111827}.dropdown-item.text-danger[_ngcontent-%COMP%]{color:#dc2626}.dropdown-item.text-danger[_ngcontent-%COMP%]:hover{background:#fef2f2;color:#991b1b}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background:#e5e7eb;margin:8px 0}.student-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:#4b5563;font-size:14px}.detail-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:16px;width:20px;text-align:center}.student-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;padding-top:20px;border-top:2px solid #f3f4f6}.btn-action[_ngcontent-%COMP%]{padding:10px 16px;border-radius:10px;font-size:13px;display:flex;align-items:center;justify-content:center;gap:6px;transition:all .2s ease}.btn-action[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-size:12px}.btn-view[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.btn-payment[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.btn-payment[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#6b7280,#4b5563)}.student-modal-overlay[_ngcontent-%COMP%]{position:fixed!important;inset:20% 0 0!important;backdrop-filter:blur(15px)!important;display:flex!important;z-index:999999!important;padding:20px!important;opacity:1!important;visibility:visible!important;height:100%!important;animation:_ngcontent-%COMP%_studentModalFadeIn .2s ease!important;width:80%!important;align-items:center!important;justify-content:center!important;margin:auto!important;border-radius:20px!important}.student-modal-overlay.hidden[_ngcontent-%COMP%]{opacity:0!important;visibility:hidden!important;animation:_ngcontent-%COMP%_studentModalFadeOut .2s ease!important}.student-modal-overlay[_ngcontent-%COMP%]   button.close-btn[_ngcontent-%COMP%]{z-index:1001!important;padding:14px;margin:50px}.student-modal-footer[_ngcontent-%COMP%]{padding:24px 32px;border-top:2px solid #f3f4f6;display:flex;justify-content:flex-end;gap:12px;position:sticky;bottom:0;background:#fff;border-radius:0 0 20px 20px}@keyframes _ngcontent-%COMP%_studentModalFadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_studentModalFadeOut{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}"]})};var b_="182",$a={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ya={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},wA=0,C2=1,MA=2;var Ff=1,SA=2,td=3,Xs=0,nr=1,Gr=2,fs=0,Ql=1,w2=2,M2=3,S2=4,EA=5,Ua=100,AA=101,TA=102,DA=103,PA=104,IA=200,OA=201,RA=202,kA=203,qg=204,Xg=205,FA=206,NA=207,LA=208,VA=209,UA=210,BA=211,zA=212,HA=213,jA=214,C_=0,w_=1,M_=2,eu=3,S_=4,E_=5,A_=6,T_=7,D_=0,WA=1,GA=2,Bo=0,E2=1,A2=2,T2=3,D2=4,P2=5,I2=6,O2=7;var h2=300,qa=301,su=302,P_=303,I_=304,Nf=306,tu=1e3,ls=1001,Zg=1002,ki=1003,$A=1004;var Lf=1005;var Li=1006,O_=1007;var Xa=1008;var wr=1009,R2=1010,k2=1011,nd=1012,R_=1013,zo=1014,Ho=1015,hs=1016,k_=1017,F_=1018,id=1020,F2=35902,N2=35899,L2=1021,V2=1022,co=1023,us=1026,Za=1027,U2=1028,N_=1029,au=1030,L_=1031;var V_=1033,Vf=33776,Uf=33777,Bf=33778,zf=33779,U_=35840,B_=35841,z_=35842,H_=35843,j_=36196,W_=37492,G_=37496,$_=37488,Y_=37489,q_=37490,X_=37491,Z_=37808,J_=37809,K_=37810,Q_=37811,ev=37812,tv=37813,nv=37814,iv=37815,rv=37816,ov=37817,sv=37818,av=37819,lv=37820,uv=37821,cv=36492,dv=36494,fv=36495,hv=36283,pv=36284,mv=36285,gv=36286;var pf=2300,Jg=2301,$g=2302,p2=2400,m2=2401,g2=2402;var YA=3200;var B2=0,qA=1,Js="",Br="srgb",nu="srgb-linear",mf="linear",wn="srgb";var Kl=7680;var _2=519,XA=512,ZA=513,JA=514,_v=515,KA=516,QA=517,vv=518,eT=519,v2=35044;var z2="300 es",Vo=2e3,gf=2001;function H2(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function iV(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Wc(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function tT(){let n=Wc("canvas");return n.style.display="block",n}var Q3={},Gc=null;function j2(...n){let t="THREE."+n.shift();Gc?Gc("log",t,...n):console.log(t,...n)}function vt(...n){let t="THREE."+n.shift();Gc?Gc("warn",t,...n):console.warn(t,...n)}function bt(...n){let t="THREE."+n.shift();Gc?Gc("error",t,...n):console.error(t,...n)}function $c(...n){let t=n.join(" ");t in Q3||(Q3[t]=!0,vt(...n))}function nT(n,t,e){return new Promise(function(i,r){function o(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,e);break;default:i()}}setTimeout(o,e)})}var cs=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){let i=this._listeners;return i===void 0?!1:i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){let i=this._listeners;if(i===void 0)return;let r=i[t];if(r!==void 0){let o=r.indexOf(e);o!==-1&&r.splice(o,1)}}dispatchEvent(t){let e=this._listeners;if(e===void 0)return;let i=e[t.type];if(i!==void 0){t.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,t);t.target=null}}},Wi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],eA=1234567,ff=Math.PI/180,Yc=180/Math.PI;function rd(){let n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Wi[n&255]+Wi[n>>8&255]+Wi[n>>16&255]+Wi[n>>24&255]+"-"+Wi[t&255]+Wi[t>>8&255]+"-"+Wi[t>>16&15|64]+Wi[t>>24&255]+"-"+Wi[e&63|128]+Wi[e>>8&255]+"-"+Wi[e>>16&255]+Wi[e>>24&255]+Wi[i&255]+Wi[i>>8&255]+Wi[i>>16&255]+Wi[i>>24&255]).toLowerCase()}function Xt(n,t,e){return Math.max(t,Math.min(e,n))}function W2(n,t){return(n%t+t)%t}function rV(n,t,e,i,r){return i+(n-t)*(r-i)/(e-t)}function oV(n,t,e){return n!==t?(e-n)/(t-n):0}function hf(n,t,e){return(1-e)*n+e*t}function sV(n,t,e,i){return hf(n,t,1-Math.exp(-e*i))}function aV(n,t=1){return t-Math.abs(W2(n,t*2)-t)}function lV(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function uV(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function cV(n,t){return n+Math.floor(Math.random()*(t-n+1))}function dV(n,t){return n+Math.random()*(t-n)}function fV(n){return n*(.5-Math.random())}function hV(n){n!==void 0&&(eA=n);let t=eA+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function pV(n){return n*ff}function mV(n){return n*Yc}function gV(n){return(n&n-1)===0&&n!==0}function _V(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function vV(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function xV(n,t,e,i,r){let o=Math.cos,s=Math.sin,u=o(e/2),d=s(e/2),p=o((t+i)/2),_=s((t+i)/2),m=o((t-i)/2),y=s((t-i)/2),b=o((i-t)/2),M=s((i-t)/2);switch(r){case"XYX":n.set(u*_,d*m,d*y,u*p);break;case"YZY":n.set(d*y,u*_,d*m,u*p);break;case"ZXZ":n.set(d*m,d*y,u*_,u*p);break;case"XZX":n.set(u*_,d*M,d*b,u*p);break;case"YXY":n.set(d*b,u*_,d*M,u*p);break;case"ZYZ":n.set(d*M,d*b,u*_,u*p);break;default:vt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Hc(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function tr(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var G2={DEG2RAD:ff,RAD2DEG:Yc,generateUUID:rd,clamp:Xt,euclideanModulo:W2,mapLinear:rV,inverseLerp:oV,lerp:hf,damp:sV,pingpong:aV,smoothstep:lV,smootherstep:uV,randInt:cV,randFloat:dV,randFloatSpread:fV,seededRandom:hV,degToRad:pV,radToDeg:mV,isPowerOfTwo:gV,ceilPowerOfTwo:_V,floorPowerOfTwo:vV,setQuaternionFromProperEuler:xV,normalize:tr,denormalize:Hc},Et=class n{constructor(t=0,e=0){n.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Xt(this.x,t.x,e.x),this.y=Xt(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=Xt(this.x,t,e),this.y=Xt(this.y,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Xt(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(Xt(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let i=Math.cos(e),r=Math.sin(e),o=this.x-t.x,s=this.y-t.y;return this.x=o*i-s*r+t.x,this.y=o*r+s*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},uo=class{constructor(t=0,e=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=r}static slerpFlat(t,e,i,r,o,s,u){let d=i[r+0],p=i[r+1],_=i[r+2],m=i[r+3],y=o[s+0],b=o[s+1],M=o[s+2],O=o[s+3];if(u<=0){t[e+0]=d,t[e+1]=p,t[e+2]=_,t[e+3]=m;return}if(u>=1){t[e+0]=y,t[e+1]=b,t[e+2]=M,t[e+3]=O;return}if(m!==O||d!==y||p!==b||_!==M){let E=d*y+p*b+_*M+m*O;E<0&&(y=-y,b=-b,M=-M,O=-O,E=-E);let w=1-u;if(E<.9995){let j=Math.acos(E),H=Math.sin(j);w=Math.sin(w*j)/H,u=Math.sin(u*j)/H,d=d*w+y*u,p=p*w+b*u,_=_*w+M*u,m=m*w+O*u}else{d=d*w+y*u,p=p*w+b*u,_=_*w+M*u,m=m*w+O*u;let j=1/Math.sqrt(d*d+p*p+_*_+m*m);d*=j,p*=j,_*=j,m*=j}}t[e]=d,t[e+1]=p,t[e+2]=_,t[e+3]=m}static multiplyQuaternionsFlat(t,e,i,r,o,s){let u=i[r],d=i[r+1],p=i[r+2],_=i[r+3],m=o[s],y=o[s+1],b=o[s+2],M=o[s+3];return t[e]=u*M+_*m+d*b-p*y,t[e+1]=d*M+_*y+p*m-u*b,t[e+2]=p*M+_*b+u*y-d*m,t[e+3]=_*M-u*m-d*y-p*b,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){let i=t._x,r=t._y,o=t._z,s=t._order,u=Math.cos,d=Math.sin,p=u(i/2),_=u(r/2),m=u(o/2),y=d(i/2),b=d(r/2),M=d(o/2);switch(s){case"XYZ":this._x=y*_*m+p*b*M,this._y=p*b*m-y*_*M,this._z=p*_*M+y*b*m,this._w=p*_*m-y*b*M;break;case"YXZ":this._x=y*_*m+p*b*M,this._y=p*b*m-y*_*M,this._z=p*_*M-y*b*m,this._w=p*_*m+y*b*M;break;case"ZXY":this._x=y*_*m-p*b*M,this._y=p*b*m+y*_*M,this._z=p*_*M+y*b*m,this._w=p*_*m-y*b*M;break;case"ZYX":this._x=y*_*m-p*b*M,this._y=p*b*m+y*_*M,this._z=p*_*M-y*b*m,this._w=p*_*m+y*b*M;break;case"YZX":this._x=y*_*m+p*b*M,this._y=p*b*m+y*_*M,this._z=p*_*M-y*b*m,this._w=p*_*m-y*b*M;break;case"XZY":this._x=y*_*m-p*b*M,this._y=p*b*m-y*_*M,this._z=p*_*M+y*b*m,this._w=p*_*m+y*b*M;break;default:vt("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,i=e[0],r=e[4],o=e[8],s=e[1],u=e[5],d=e[9],p=e[2],_=e[6],m=e[10],y=i+u+m;if(y>0){let b=.5/Math.sqrt(y+1);this._w=.25/b,this._x=(_-d)*b,this._y=(o-p)*b,this._z=(s-r)*b}else if(i>u&&i>m){let b=2*Math.sqrt(1+i-u-m);this._w=(_-d)/b,this._x=.25*b,this._y=(r+s)/b,this._z=(o+p)/b}else if(u>m){let b=2*Math.sqrt(1+u-i-m);this._w=(o-p)/b,this._x=(r+s)/b,this._y=.25*b,this._z=(d+_)/b}else{let b=2*Math.sqrt(1+m-i-u);this._w=(s-r)/b,this._x=(o+p)/b,this._y=(d+_)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<1e-8?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Xt(this.dot(t),-1,1)))}rotateTowards(t,e){let i=this.angleTo(t);if(i===0)return this;let r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let i=t._x,r=t._y,o=t._z,s=t._w,u=e._x,d=e._y,p=e._z,_=e._w;return this._x=i*_+s*u+r*p-o*d,this._y=r*_+s*d+o*u-i*p,this._z=o*_+s*p+i*d-r*u,this._w=s*_-i*u-r*d-o*p,this._onChangeCallback(),this}slerp(t,e){if(e<=0)return this;if(e>=1)return this.copy(t);let i=t._x,r=t._y,o=t._z,s=t._w,u=this.dot(t);u<0&&(i=-i,r=-r,o=-o,s=-s,u=-u);let d=1-e;if(u<.9995){let p=Math.acos(u),_=Math.sin(p);d=Math.sin(d*p)/_,e=Math.sin(e*p)/_,this._x=this._x*d+i*e,this._y=this._y*d+r*e,this._z=this._z*d+o*e,this._w=this._w*d+s*e,this._onChangeCallback()}else this._x=this._x*d+i*e,this._y=this._y*d+r*e,this._z=this._z*d+o*e,this._w=this._w*d+s*e,this.normalize();return this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){let t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(t),r*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},se=class n{constructor(t=0,e=0,i=0){n.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(tA.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(tA.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,i=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[3]*i+o[6]*r,this.y=o[1]*e+o[4]*i+o[7]*r,this.z=o[2]*e+o[5]*i+o[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,o=t.elements,s=1/(o[3]*e+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*e+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*e+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*e+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(t){let e=this.x,i=this.y,r=this.z,o=t.x,s=t.y,u=t.z,d=t.w,p=2*(s*r-u*i),_=2*(u*e-o*r),m=2*(o*i-s*e);return this.x=e+d*p+s*m-u*_,this.y=i+d*_+u*p-o*m,this.z=r+d*m+o*_-s*p,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,i=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*r,this.y=o[1]*e+o[5]*i+o[9]*r,this.z=o[2]*e+o[6]*i+o[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Xt(this.x,t.x,e.x),this.y=Xt(this.y,t.y,e.y),this.z=Xt(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=Xt(this.x,t,e),this.y=Xt(this.y,t,e),this.z=Xt(this.z,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Xt(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let i=t.x,r=t.y,o=t.z,s=e.x,u=e.y,d=e.z;return this.x=r*d-o*u,this.y=o*s-i*d,this.z=i*u-r*s,this}projectOnVector(t){let e=t.lengthSq();if(e===0)return this.set(0,0,0);let i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Wb.copy(this).projectOnVector(t),this.sub(Wb)}reflect(t){return this.sub(Wb.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(Xt(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){let r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},Wb=new se,tA=new uo,kt=class n{constructor(t,e,i,r,o,s,u,d,p){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,r,o,s,u,d,p)}set(t,e,i,r,o,s,u,d,p){let _=this.elements;return _[0]=t,_[1]=r,_[2]=u,_[3]=e,_[4]=o,_[5]=d,_[6]=i,_[7]=s,_[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,o=this.elements,s=i[0],u=i[3],d=i[6],p=i[1],_=i[4],m=i[7],y=i[2],b=i[5],M=i[8],O=r[0],E=r[3],w=r[6],j=r[1],H=r[4],W=r[7],G=r[2],Y=r[5],q=r[8];return o[0]=s*O+u*j+d*G,o[3]=s*E+u*H+d*Y,o[6]=s*w+u*W+d*q,o[1]=p*O+_*j+m*G,o[4]=p*E+_*H+m*Y,o[7]=p*w+_*W+m*q,o[2]=y*O+b*j+M*G,o[5]=y*E+b*H+M*Y,o[8]=y*w+b*W+M*q,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],u=t[5],d=t[6],p=t[7],_=t[8];return e*s*_-e*u*p-i*o*_+i*u*d+r*o*p-r*s*d}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],u=t[5],d=t[6],p=t[7],_=t[8],m=_*s-u*p,y=u*d-_*o,b=p*o-s*d,M=e*m+i*y+r*b;if(M===0)return this.set(0,0,0,0,0,0,0,0,0);let O=1/M;return t[0]=m*O,t[1]=(r*p-_*i)*O,t[2]=(u*i-r*s)*O,t[3]=y*O,t[4]=(_*e-r*d)*O,t[5]=(r*o-u*e)*O,t[6]=b*O,t[7]=(i*d-p*e)*O,t[8]=(s*e-i*o)*O,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,o,s,u){let d=Math.cos(o),p=Math.sin(o);return this.set(i*d,i*p,-i*(d*s+p*u)+s+t,-r*p,r*d,-r*(-p*s+d*u)+u+e,0,0,1),this}scale(t,e){return this.premultiply(Gb.makeScale(t,e)),this}rotate(t){return this.premultiply(Gb.makeRotation(-t)),this}translate(t,e){return this.premultiply(Gb.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}},Gb=new kt,nA=new kt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),iA=new kt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function yV(){let n={enabled:!0,workingColorSpace:nu,spaces:{},convert:function(r,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===wn&&(r.r=qs(r.r),r.g=qs(r.g),r.b=qs(r.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[o].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===wn&&(r.r=jc(r.r),r.g=jc(r.g),r.b=jc(r.b))),r},workingToColorSpace:function(r,o){return this.convert(r,this.workingColorSpace,o)},colorSpaceToWorking:function(r,o){return this.convert(r,o,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Js?mf:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,o=this.workingColorSpace){return r.fromArray(this.spaces[o].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,o,s){return r.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,o){return $c("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,o)},toWorkingColorSpace:function(r,o){return $c("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,o)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[nu]:{primaries:t,whitePoint:i,transfer:mf,toXYZ:nA,fromXYZ:iA,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Br},outputColorSpaceConfig:{drawingBufferColorSpace:Br}},[Br]:{primaries:t,whitePoint:i,transfer:wn,toXYZ:nA,fromXYZ:iA,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Br}}}),n}var un=yV();function qs(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function jc(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var Dc,Kg=class{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{Dc===void 0&&(Dc=Wc("canvas")),Dc.width=t.width,Dc.height=t.height;let r=Dc.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),i=Dc}return i.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=Wc("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);let r=i.getImageData(0,0,t.width,t.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=qs(o[s]/255)*255;return i.putImageData(r,0,0),e}else if(t.data){let e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(qs(e[i]/255)*255):e[i]=qs(e[i]);return{data:e,width:t.width,height:t.height}}else return vt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},bV=0,qc=class{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:bV++}),this.uuid=rd(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){let e=this.data;return typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight,0):typeof VideoFrame<"u"&&e instanceof VideoFrame?t.set(e.displayHeight,e.displayWidth,0):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,u=r.length;s<u;s++)r[s].isDataTexture?o.push($b(r[s].image)):o.push($b(r[s]))}else o=$b(r);i.url=o}return e||(t.images[this.uuid]=i),i}};function $b(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Kg.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(vt("Texture: Unable to serialize Texture."),{})}var CV=0,Yb=new se,jo=(()=>{class n extends cs{constructor(e=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=ls,o=ls,s=Li,u=Xa,d=co,p=wr,_=n.DEFAULT_ANISOTROPY,m=Js){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:CV++}),this.uuid=rd(),this.name="",this.source=new qc(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=u,this.anisotropy=_,this.format=d,this.internalFormat=null,this.type=p,this.offset=new Et(0,0),this.repeat=new Et(1,1),this.center=new Et(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new kt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Yb).x}get height(){return this.source.getSize(Yb).y}get depth(){return this.source.getSize(Yb).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,i){this.updateRanges.push({start:e,count:i})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(let i in e){let r=e[i];if(r===void 0){vt(`Texture.setValues(): parameter '${i}' has value of undefined.`);continue}let o=this[i];if(o===void 0){vt(`Texture.setValues(): property '${i}' does not exist.`);continue}o&&r&&o.isVector2&&r.isVector2||o&&r&&o.isVector3&&r.isVector3||o&&r&&o.isMatrix3&&r.isMatrix3?o.copy(r):this[i]=r}}toJSON(e){let i=e===void 0||typeof e=="string";if(!i&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==h2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case tu:e.x=e.x-Math.floor(e.x);break;case ls:e.x=e.x<0?0:1;break;case Zg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case tu:e.y=e.y-Math.floor(e.y);break;case ls:e.y=e.y<0?0:1;break;case Zg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=h2,n.DEFAULT_ANISOTROPY=1,n})(),ei=class n{constructor(t=0,e=0,i=0,r=1){n.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,o=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*e+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*e+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*e+s[7]*i+s[11]*r+s[15]*o,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,o,d=t.elements,p=d[0],_=d[4],m=d[8],y=d[1],b=d[5],M=d[9],O=d[2],E=d[6],w=d[10];if(Math.abs(_-y)<.01&&Math.abs(m-O)<.01&&Math.abs(M-E)<.01){if(Math.abs(_+y)<.1&&Math.abs(m+O)<.1&&Math.abs(M+E)<.1&&Math.abs(p+b+w-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;let H=(p+1)/2,W=(b+1)/2,G=(w+1)/2,Y=(_+y)/4,q=(m+O)/4,re=(M+E)/4;return H>W&&H>G?H<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(H),r=Y/i,o=q/i):W>G?W<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(W),i=Y/r,o=re/r):G<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(G),i=q/o,r=re/o),this.set(i,r,o,e),this}let j=Math.sqrt((E-M)*(E-M)+(m-O)*(m-O)+(y-_)*(y-_));return Math.abs(j)<.001&&(j=1),this.x=(E-M)/j,this.y=(m-O)/j,this.z=(y-_)/j,this.w=Math.acos((p+b+w-1)/2),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Xt(this.x,t.x,e.x),this.y=Xt(this.y,t.y,e.y),this.z=Xt(this.z,t.z,e.z),this.w=Xt(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=Xt(this.x,t,e),this.y=Xt(this.y,t,e),this.z=Xt(this.z,t,e),this.w=Xt(this.w,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Xt(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Qg=class extends cs{constructor(t=1,e=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Li,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=i.depth,this.scissor=new ei(0,0,t,e),this.scissorTest=!1,this.viewport=new ei(0,0,t,e);let r={width:t,height:e,depth:i.depth},o=new jo(r);this.textures=[];let s=i.count;for(let u=0;u<s;u++)this.textures[u]=o.clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(t={}){let e={minFilter:Li,generateMipmaps:!1,flipY:!1,internalFormat:null};t.mapping!==void 0&&(e.mapping=t.mapping),t.wrapS!==void 0&&(e.wrapS=t.wrapS),t.wrapT!==void 0&&(e.wrapT=t.wrapT),t.wrapR!==void 0&&(e.wrapR=t.wrapR),t.magFilter!==void 0&&(e.magFilter=t.magFilter),t.minFilter!==void 0&&(e.minFilter=t.minFilter),t.format!==void 0&&(e.format=t.format),t.type!==void 0&&(e.type=t.type),t.anisotropy!==void 0&&(e.anisotropy=t.anisotropy),t.colorSpace!==void 0&&(e.colorSpace=t.colorSpace),t.flipY!==void 0&&(e.flipY=t.flipY),t.generateMipmaps!==void 0&&(e.generateMipmaps=t.generateMipmaps),t.internalFormat!==void 0&&(e.internalFormat=t.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(e)}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,i=t.textures.length;e<i;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;let r=Object.assign({},t.textures[e].image);this.textures[e].source=new qc(r)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Hr=class extends Qg{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}},_f=class extends jo{constructor(t=null,e=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=ki,this.minFilter=ki,this.wrapR=ls,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}};var e_=class extends jo{constructor(t=null,e=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=ki,this.minFilter=ki,this.wrapR=ls,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Ba=class{constructor(t=new se(1/0,1/0,1/0),e=new se(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(Fo.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(Fo.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=Fo.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let i=t.geometry;if(i!==void 0){let o=i.getAttribute("position");if(e===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let s=0,u=o.count;s<u;s++)t.isMesh===!0?t.getVertexPosition(s,Fo):Fo.fromBufferAttribute(o,s),Fo.applyMatrix4(t.matrixWorld),this.expandByPoint(Fo);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Eg.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Eg.copy(i.boundingBox)),Eg.applyMatrix4(t.matrixWorld),this.union(Eg)}let r=t.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Fo),Fo.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(af),Ag.subVectors(this.max,af),Pc.subVectors(t.a,af),Ic.subVectors(t.b,af),Oc.subVectors(t.c,af),Oa.subVectors(Ic,Pc),Ra.subVectors(Oc,Ic),ql.subVectors(Pc,Oc);let e=[0,-Oa.z,Oa.y,0,-Ra.z,Ra.y,0,-ql.z,ql.y,Oa.z,0,-Oa.x,Ra.z,0,-Ra.x,ql.z,0,-ql.x,-Oa.y,Oa.x,0,-Ra.y,Ra.x,0,-ql.y,ql.x,0];return!qb(e,Pc,Ic,Oc,Ag)||(e=[1,0,0,0,1,0,0,0,1],!qb(e,Pc,Ic,Oc,Ag))?!1:(Tg.crossVectors(Oa,Ra),e=[Tg.x,Tg.y,Tg.z],qb(e,Pc,Ic,Oc,Ag))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Fo).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Fo).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(js[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),js[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),js[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),js[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),js[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),js[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),js[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),js[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(js),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}},js=[new se,new se,new se,new se,new se,new se,new se,new se],Fo=new se,Eg=new Ba,Pc=new se,Ic=new se,Oc=new se,Oa=new se,Ra=new se,ql=new se,af=new se,Ag=new se,Tg=new se,Xl=new se;function qb(n,t,e,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){Xl.fromArray(n,o);let u=r.x*Math.abs(Xl.x)+r.y*Math.abs(Xl.y)+r.z*Math.abs(Xl.z),d=t.dot(Xl),p=e.dot(Xl),_=i.dot(Xl);if(Math.max(-Math.max(d,p,_),Math.min(d,p,_))>u)return!1}return!0}var wV=new Ba,lf=new se,Xb=new se,iu=class{constructor(t=new se,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let i=this.center;e!==void 0?i.copy(e):wV.setFromPoints(t).getCenter(i);let r=0;for(let o=0,s=t.length;o<s;o++)r=Math.max(r,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;lf.subVectors(t,this.center);let e=lf.lengthSq();if(e>this.radius*this.radius){let i=Math.sqrt(e),r=(i-this.radius)*.5;this.center.addScaledVector(lf,r/i),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Xb.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(lf.copy(t.center).add(Xb)),this.expandByPoint(lf.copy(t.center).sub(Xb))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}},Ws=new se,Zb=new se,Dg=new se,ka=new se,Jb=new se,Pg=new se,Kb=new se,ru=class{constructor(t=new se,e=new se(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Ws)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=Ws.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Ws.copy(this.origin).addScaledVector(this.direction,e),Ws.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){Zb.copy(t).add(e).multiplyScalar(.5),Dg.copy(e).sub(t).normalize(),ka.copy(this.origin).sub(Zb);let o=t.distanceTo(e)*.5,s=-this.direction.dot(Dg),u=ka.dot(this.direction),d=-ka.dot(Dg),p=ka.lengthSq(),_=Math.abs(1-s*s),m,y,b,M;if(_>0)if(m=s*d-u,y=s*u-d,M=o*_,m>=0)if(y>=-M)if(y<=M){let O=1/_;m*=O,y*=O,b=m*(m+s*y+2*u)+y*(s*m+y+2*d)+p}else y=o,m=Math.max(0,-(s*y+u)),b=-m*m+y*(y+2*d)+p;else y=-o,m=Math.max(0,-(s*y+u)),b=-m*m+y*(y+2*d)+p;else y<=-M?(m=Math.max(0,-(-s*o+u)),y=m>0?-o:Math.min(Math.max(-o,-d),o),b=-m*m+y*(y+2*d)+p):y<=M?(m=0,y=Math.min(Math.max(-o,-d),o),b=y*(y+2*d)+p):(m=Math.max(0,-(s*o+u)),y=m>0?o:Math.min(Math.max(-o,-d),o),b=-m*m+y*(y+2*d)+p);else y=s>0?-o:o,m=Math.max(0,-(s*y+u)),b=-m*m+y*(y+2*d)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,m),r&&r.copy(Zb).addScaledVector(Dg,y),b}intersectSphere(t,e){Ws.subVectors(t.center,this.origin);let i=Ws.dot(this.direction),r=Ws.dot(Ws)-i*i,o=t.radius*t.radius;if(r>o)return null;let s=Math.sqrt(o-r),u=i-s,d=i+s;return d<0?null:u<0?this.at(d,e):this.at(u,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){let i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,o,s,u,d,p=1/this.direction.x,_=1/this.direction.y,m=1/this.direction.z,y=this.origin;return p>=0?(i=(t.min.x-y.x)*p,r=(t.max.x-y.x)*p):(i=(t.max.x-y.x)*p,r=(t.min.x-y.x)*p),_>=0?(o=(t.min.y-y.y)*_,s=(t.max.y-y.y)*_):(o=(t.max.y-y.y)*_,s=(t.min.y-y.y)*_),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),m>=0?(u=(t.min.z-y.z)*m,d=(t.max.z-y.z)*m):(u=(t.max.z-y.z)*m,d=(t.min.z-y.z)*m),i>d||u>r)||((u>i||i!==i)&&(i=u),(d<r||r!==r)&&(r=d),r<0)?null:this.at(i>=0?i:r,e)}intersectsBox(t){return this.intersectBox(t,Ws)!==null}intersectTriangle(t,e,i,r,o){Jb.subVectors(e,t),Pg.subVectors(i,t),Kb.crossVectors(Jb,Pg);let s=this.direction.dot(Kb),u;if(s>0){if(r)return null;u=1}else if(s<0)u=-1,s=-s;else return null;ka.subVectors(this.origin,t);let d=u*this.direction.dot(Pg.crossVectors(ka,Pg));if(d<0)return null;let p=u*this.direction.dot(Jb.cross(ka));if(p<0||d+p>s)return null;let _=-u*ka.dot(Kb);return _<0?null:this.at(_/s,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Qn=class n{constructor(t,e,i,r,o,s,u,d,p,_,m,y,b,M,O,E){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,r,o,s,u,d,p,_,m,y,b,M,O,E)}set(t,e,i,r,o,s,u,d,p,_,m,y,b,M,O,E){let w=this.elements;return w[0]=t,w[4]=e,w[8]=i,w[12]=r,w[1]=o,w[5]=s,w[9]=u,w[13]=d,w[2]=p,w[6]=_,w[10]=m,w[14]=y,w[3]=b,w[7]=M,w[11]=O,w[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){let e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return this.determinant()===0?(t.set(1,0,0),e.set(0,1,0),i.set(0,0,1),this):(t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){if(t.determinant()===0)return this.identity();let e=this.elements,i=t.elements,r=1/Rc.setFromMatrixColumn(t,0).length(),o=1/Rc.setFromMatrixColumn(t,1).length(),s=1/Rc.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*o,e[5]=i[5]*o,e[6]=i[6]*o,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,i=t.x,r=t.y,o=t.z,s=Math.cos(i),u=Math.sin(i),d=Math.cos(r),p=Math.sin(r),_=Math.cos(o),m=Math.sin(o);if(t.order==="XYZ"){let y=s*_,b=s*m,M=u*_,O=u*m;e[0]=d*_,e[4]=-d*m,e[8]=p,e[1]=b+M*p,e[5]=y-O*p,e[9]=-u*d,e[2]=O-y*p,e[6]=M+b*p,e[10]=s*d}else if(t.order==="YXZ"){let y=d*_,b=d*m,M=p*_,O=p*m;e[0]=y+O*u,e[4]=M*u-b,e[8]=s*p,e[1]=s*m,e[5]=s*_,e[9]=-u,e[2]=b*u-M,e[6]=O+y*u,e[10]=s*d}else if(t.order==="ZXY"){let y=d*_,b=d*m,M=p*_,O=p*m;e[0]=y-O*u,e[4]=-s*m,e[8]=M+b*u,e[1]=b+M*u,e[5]=s*_,e[9]=O-y*u,e[2]=-s*p,e[6]=u,e[10]=s*d}else if(t.order==="ZYX"){let y=s*_,b=s*m,M=u*_,O=u*m;e[0]=d*_,e[4]=M*p-b,e[8]=y*p+O,e[1]=d*m,e[5]=O*p+y,e[9]=b*p-M,e[2]=-p,e[6]=u*d,e[10]=s*d}else if(t.order==="YZX"){let y=s*d,b=s*p,M=u*d,O=u*p;e[0]=d*_,e[4]=O-y*m,e[8]=M*m+b,e[1]=m,e[5]=s*_,e[9]=-u*_,e[2]=-p*_,e[6]=b*m+M,e[10]=y-O*m}else if(t.order==="XZY"){let y=s*d,b=s*p,M=u*d,O=u*p;e[0]=d*_,e[4]=-m,e[8]=p*_,e[1]=y*m+O,e[5]=s*_,e[9]=b*m-M,e[2]=M*m-b,e[6]=u*_,e[10]=O*m+y}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(MV,t,SV)}lookAt(t,e,i){let r=this.elements;return Vr.subVectors(t,e),Vr.lengthSq()===0&&(Vr.z=1),Vr.normalize(),Fa.crossVectors(i,Vr),Fa.lengthSq()===0&&(Math.abs(i.z)===1?Vr.x+=1e-4:Vr.z+=1e-4,Vr.normalize(),Fa.crossVectors(i,Vr)),Fa.normalize(),Ig.crossVectors(Vr,Fa),r[0]=Fa.x,r[4]=Ig.x,r[8]=Vr.x,r[1]=Fa.y,r[5]=Ig.y,r[9]=Vr.y,r[2]=Fa.z,r[6]=Ig.z,r[10]=Vr.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,o=this.elements,s=i[0],u=i[4],d=i[8],p=i[12],_=i[1],m=i[5],y=i[9],b=i[13],M=i[2],O=i[6],E=i[10],w=i[14],j=i[3],H=i[7],W=i[11],G=i[15],Y=r[0],q=r[4],re=r[8],V=r[12],B=r[1],X=r[5],ie=r[9],ue=r[13],ve=r[2],_e=r[6],me=r[10],he=r[14],we=r[3],$e=r[7],Ne=r[11],Ye=r[15];return o[0]=s*Y+u*B+d*ve+p*we,o[4]=s*q+u*X+d*_e+p*$e,o[8]=s*re+u*ie+d*me+p*Ne,o[12]=s*V+u*ue+d*he+p*Ye,o[1]=_*Y+m*B+y*ve+b*we,o[5]=_*q+m*X+y*_e+b*$e,o[9]=_*re+m*ie+y*me+b*Ne,o[13]=_*V+m*ue+y*he+b*Ye,o[2]=M*Y+O*B+E*ve+w*we,o[6]=M*q+O*X+E*_e+w*$e,o[10]=M*re+O*ie+E*me+w*Ne,o[14]=M*V+O*ue+E*he+w*Ye,o[3]=j*Y+H*B+W*ve+G*we,o[7]=j*q+H*X+W*_e+G*$e,o[11]=j*re+H*ie+W*me+G*Ne,o[15]=j*V+H*ue+W*he+G*Ye,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[4],r=t[8],o=t[12],s=t[1],u=t[5],d=t[9],p=t[13],_=t[2],m=t[6],y=t[10],b=t[14],M=t[3],O=t[7],E=t[11],w=t[15],j=d*b-p*y,H=u*b-p*m,W=u*y-d*m,G=s*b-p*_,Y=s*y-d*_,q=s*m-u*_;return e*(O*j-E*H+w*W)-i*(M*j-E*G+w*Y)+r*(M*H-O*G+w*q)-o*(M*W-O*Y+E*q)}transpose(){let t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){let r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],u=t[5],d=t[6],p=t[7],_=t[8],m=t[9],y=t[10],b=t[11],M=t[12],O=t[13],E=t[14],w=t[15],j=m*E*p-O*y*p+O*d*b-u*E*b-m*d*w+u*y*w,H=M*y*p-_*E*p-M*d*b+s*E*b+_*d*w-s*y*w,W=_*O*p-M*m*p+M*u*b-s*O*b-_*u*w+s*m*w,G=M*m*d-_*O*d-M*u*y+s*O*y+_*u*E-s*m*E,Y=e*j+i*H+r*W+o*G;if(Y===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let q=1/Y;return t[0]=j*q,t[1]=(O*y*o-m*E*o-O*r*b+i*E*b+m*r*w-i*y*w)*q,t[2]=(u*E*o-O*d*o+O*r*p-i*E*p-u*r*w+i*d*w)*q,t[3]=(m*d*o-u*y*o-m*r*p+i*y*p+u*r*b-i*d*b)*q,t[4]=H*q,t[5]=(_*E*o-M*y*o+M*r*b-e*E*b-_*r*w+e*y*w)*q,t[6]=(M*d*o-s*E*o-M*r*p+e*E*p+s*r*w-e*d*w)*q,t[7]=(s*y*o-_*d*o+_*r*p-e*y*p-s*r*b+e*d*b)*q,t[8]=W*q,t[9]=(M*m*o-_*O*o-M*i*b+e*O*b+_*i*w-e*m*w)*q,t[10]=(s*O*o-M*u*o+M*i*p-e*O*p-s*i*w+e*u*w)*q,t[11]=(_*u*o-s*m*o-_*i*p+e*m*p+s*i*b-e*u*b)*q,t[12]=G*q,t[13]=(_*O*r-M*m*r+M*i*y-e*O*y-_*i*E+e*m*E)*q,t[14]=(M*u*r-s*O*r-M*i*d+e*O*d+s*i*E-e*u*E)*q,t[15]=(s*m*r-_*u*r+_*i*d-e*m*d-s*i*y+e*u*y)*q,this}scale(t){let e=this.elements,i=t.x,r=t.y,o=t.z;return e[0]*=i,e[4]*=r,e[8]*=o,e[1]*=i,e[5]*=r,e[9]*=o,e[2]*=i,e[6]*=r,e[10]*=o,e[3]*=i,e[7]*=r,e[11]*=o,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let i=Math.cos(e),r=Math.sin(e),o=1-i,s=t.x,u=t.y,d=t.z,p=o*s,_=o*u;return this.set(p*s+i,p*u-r*d,p*d+r*u,0,p*u+r*d,_*u+i,_*d-r*s,0,p*d-r*u,_*d+r*s,o*d*d+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,o,s){return this.set(1,i,o,0,t,1,s,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){let r=this.elements,o=e._x,s=e._y,u=e._z,d=e._w,p=o+o,_=s+s,m=u+u,y=o*p,b=o*_,M=o*m,O=s*_,E=s*m,w=u*m,j=d*p,H=d*_,W=d*m,G=i.x,Y=i.y,q=i.z;return r[0]=(1-(O+w))*G,r[1]=(b+W)*G,r[2]=(M-H)*G,r[3]=0,r[4]=(b-W)*Y,r[5]=(1-(y+w))*Y,r[6]=(E+j)*Y,r[7]=0,r[8]=(M+H)*q,r[9]=(E-j)*q,r[10]=(1-(y+O))*q,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){let r=this.elements;if(t.x=r[12],t.y=r[13],t.z=r[14],this.determinant()===0)return i.set(1,1,1),e.identity(),this;let o=Rc.set(r[0],r[1],r[2]).length(),s=Rc.set(r[4],r[5],r[6]).length(),u=Rc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),No.copy(this);let p=1/o,_=1/s,m=1/u;return No.elements[0]*=p,No.elements[1]*=p,No.elements[2]*=p,No.elements[4]*=_,No.elements[5]*=_,No.elements[6]*=_,No.elements[8]*=m,No.elements[9]*=m,No.elements[10]*=m,e.setFromRotationMatrix(No),i.x=o,i.y=s,i.z=u,this}makePerspective(t,e,i,r,o,s,u=Vo,d=!1){let p=this.elements,_=2*o/(e-t),m=2*o/(i-r),y=(e+t)/(e-t),b=(i+r)/(i-r),M,O;if(d)M=o/(s-o),O=s*o/(s-o);else if(u===Vo)M=-(s+o)/(s-o),O=-2*s*o/(s-o);else if(u===gf)M=-s/(s-o),O=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return p[0]=_,p[4]=0,p[8]=y,p[12]=0,p[1]=0,p[5]=m,p[9]=b,p[13]=0,p[2]=0,p[6]=0,p[10]=M,p[14]=O,p[3]=0,p[7]=0,p[11]=-1,p[15]=0,this}makeOrthographic(t,e,i,r,o,s,u=Vo,d=!1){let p=this.elements,_=2/(e-t),m=2/(i-r),y=-(e+t)/(e-t),b=-(i+r)/(i-r),M,O;if(d)M=1/(s-o),O=s/(s-o);else if(u===Vo)M=-2/(s-o),O=-(s+o)/(s-o);else if(u===gf)M=-1/(s-o),O=-o/(s-o);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return p[0]=_,p[4]=0,p[8]=0,p[12]=y,p[1]=0,p[5]=m,p[9]=0,p[13]=b,p[2]=0,p[6]=0,p[10]=M,p[14]=O,p[3]=0,p[7]=0,p[11]=0,p[15]=1,this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},Rc=new se,No=new Qn,MV=new se(0,0,0),SV=new se(1,1,1),Fa=new se,Ig=new se,Vr=new se,rA=new Qn,oA=new uo,za=(()=>{class n{constructor(e=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,r,o=this._order){return this._x=e,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,r=!0){let o=e.elements,s=o[0],u=o[4],d=o[8],p=o[1],_=o[5],m=o[9],y=o[2],b=o[6],M=o[10];switch(i){case"XYZ":this._y=Math.asin(Xt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-m,M),this._z=Math.atan2(-u,s)):(this._x=Math.atan2(b,_),this._z=0);break;case"YXZ":this._x=Math.asin(-Xt(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(d,M),this._z=Math.atan2(p,_)):(this._y=Math.atan2(-y,s),this._z=0);break;case"ZXY":this._x=Math.asin(Xt(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-y,M),this._z=Math.atan2(-u,_)):(this._y=0,this._z=Math.atan2(p,s));break;case"ZYX":this._y=Math.asin(-Xt(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(b,M),this._z=Math.atan2(p,s)):(this._x=0,this._z=Math.atan2(-u,_));break;case"YZX":this._z=Math.asin(Xt(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-m,_),this._y=Math.atan2(-y,s)):(this._x=0,this._y=Math.atan2(d,M));break;case"XZY":this._z=Math.asin(-Xt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(b,_),this._y=Math.atan2(d,s)):(this._x=Math.atan2(-m,M),this._y=0);break;default:vt("Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,i,r){return rA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(rA,i,r)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return oA.setFromEuler(this),this.setFromQuaternion(oA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),vf=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},EV=0,sA=new se,kc=new uo,Gs=new Qn,Og=new se,uf=new se,AV=new se,TV=new uo,aA=new se(1,0,0),lA=new se(0,1,0),uA=new se(0,0,1),cA={type:"added"},DV={type:"removed"},Fc={type:"childadded",child:null},Qb={type:"childremoved",child:null},Uo=(()=>{class n extends cs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:EV++}),this.uuid=rd(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let e=new se,i=new za,r=new uo,o=new se(1,1,1);function s(){r.setFromEuler(i,!1)}function u(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Qn},normalMatrix:{value:new kt}}),this.matrix=new Qn,this.matrixWorld=new Qn,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new vf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return kc.setFromAxisAngle(e,i),this.quaternion.multiply(kc),this}rotateOnWorldAxis(e,i){return kc.setFromAxisAngle(e,i),this.quaternion.premultiply(kc),this}rotateX(e){return this.rotateOnAxis(aA,e)}rotateY(e){return this.rotateOnAxis(lA,e)}rotateZ(e){return this.rotateOnAxis(uA,e)}translateOnAxis(e,i){return sA.copy(e).applyQuaternion(this.quaternion),this.position.add(sA.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(aA,e)}translateY(e){return this.translateOnAxis(lA,e)}translateZ(e){return this.translateOnAxis(uA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Gs.copy(this.matrixWorld).invert())}lookAt(e,i,r){e.isVector3?Og.copy(e):Og.set(e,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),uf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Gs.lookAt(uf,Og,this.up):Gs.lookAt(Og,uf,this.up),this.quaternion.setFromRotationMatrix(Gs),o&&(Gs.extractRotation(o.matrixWorld),kc.setFromRotationMatrix(Gs),this.quaternion.premultiply(kc.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(bt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(cA),Fc.child=e,this.dispatchEvent(Fc),Fc.child=null):bt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(e);return i!==-1&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(DV),Qb.child=e,this.dispatchEvent(Qb),Qb.child=null),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Gs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Gs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Gs),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(cA),Fc.child=e,this.dispatchEvent(Fc),Fc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let u=this.children[r].getObjectByProperty(e,i);if(u!==void 0)return u}}getObjectsByProperty(e,i,r=[]){this[e]===i&&r.push(this);let o=this.children;for(let s=0,u=o.length;s<u;s++)o[s].getObjectsByProperty(e,i,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uf,e,AV),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uf,TV,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(e)}traverseAncestors(e){let i=this.parent;i!==null&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(e)}updateWorldMatrix(e,i){let r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let o=this.children;for(let s=0,u=o.length;s<u;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(e){let i=e===void 0||typeof e=="string",r={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.geometryInfo=this._geometryInfo.map(d=>yt(Ie({},d),{boundingBox:d.boundingBox?d.boundingBox.toJSON():void 0,boundingSphere:d.boundingSphere?d.boundingSphere.toJSON():void 0})),o.instanceInfo=this._instanceInfo.map(d=>Ie({},d)),o.availableInstanceIds=this._availableInstanceIds.slice(),o.availableGeometryIds=this._availableGeometryIds.slice(),o.nextIndexStart=this._nextIndexStart,o.nextVertexStart=this._nextVertexStart,o.geometryCount=this._geometryCount,o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.matricesTexture=this._matricesTexture.toJSON(e),o.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(o.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(o.boundingBox=this.boundingBox.toJSON()));function s(d,p){return d[p.uuid]===void 0&&(d[p.uuid]=p.toJSON(e)),p.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(e.geometries,this.geometry);let d=this.geometry.parameters;if(d!==void 0&&d.shapes!==void 0){let p=d.shapes;if(Array.isArray(p))for(let _=0,m=p.length;_<m;_++){let y=p[_];s(e.shapes,y)}else s(e.shapes,p)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let d=[];for(let p=0,_=this.material.length;p<_;p++)d.push(s(e.materials,this.material[p]));o.material=d}else o.material=s(e.materials,this.material);if(this.children.length>0){o.children=[];for(let d=0;d<this.children.length;d++)o.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let d=0;d<this.animations.length;d++){let p=this.animations[d];o.animations.push(s(e.animations,p))}}if(i){let d=u(e.geometries),p=u(e.materials),_=u(e.textures),m=u(e.images),y=u(e.shapes),b=u(e.skeletons),M=u(e.animations),O=u(e.nodes);d.length>0&&(r.geometries=d),p.length>0&&(r.materials=p),_.length>0&&(r.textures=_),m.length>0&&(r.images=m),y.length>0&&(r.shapes=y),b.length>0&&(r.skeletons=b),M.length>0&&(r.animations=M),O.length>0&&(r.nodes=O)}return r.object=o,r;function u(d){let p=[];for(let _ in d){let m=d[_];delete m.metadata,p.push(m)}return p}}clone(e){return new this.constructor().copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),i===!0)for(let r=0;r<e.children.length;r++){let o=e.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new se(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),Lo=new se,$s=new se,e2=new se,Ys=new se,Nc=new se,Lc=new se,dA=new se,t2=new se,n2=new se,i2=new se,r2=new ei,o2=new ei,s2=new ei,Va=class n{constructor(t=new se,e=new se,i=new se){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),Lo.subVectors(t,e),r.cross(Lo);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(t,e,i,r,o){Lo.subVectors(r,e),$s.subVectors(i,e),e2.subVectors(t,e);let s=Lo.dot(Lo),u=Lo.dot($s),d=Lo.dot(e2),p=$s.dot($s),_=$s.dot(e2),m=s*p-u*u;if(m===0)return o.set(0,0,0),null;let y=1/m,b=(p*d-u*_)*y,M=(s*_-u*d)*y;return o.set(1-b-M,M,b)}static containsPoint(t,e,i,r){return this.getBarycoord(t,e,i,r,Ys)===null?!1:Ys.x>=0&&Ys.y>=0&&Ys.x+Ys.y<=1}static getInterpolation(t,e,i,r,o,s,u,d){return this.getBarycoord(t,e,i,r,Ys)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(o,Ys.x),d.addScaledVector(s,Ys.y),d.addScaledVector(u,Ys.z),d)}static getInterpolatedAttribute(t,e,i,r,o,s){return r2.setScalar(0),o2.setScalar(0),s2.setScalar(0),r2.fromBufferAttribute(t,e),o2.fromBufferAttribute(t,i),s2.fromBufferAttribute(t,r),s.setScalar(0),s.addScaledVector(r2,o.x),s.addScaledVector(o2,o.y),s.addScaledVector(s2,o.z),s}static isFrontFacing(t,e,i,r){return Lo.subVectors(i,e),$s.subVectors(t,e),Lo.cross($s).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Lo.subVectors(this.c,this.b),$s.subVectors(this.a,this.b),Lo.cross($s).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return n.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return n.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,r,o){return n.getInterpolation(t,this.a,this.b,this.c,e,i,r,o)}containsPoint(t){return n.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return n.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let i=this.a,r=this.b,o=this.c,s,u;Nc.subVectors(r,i),Lc.subVectors(o,i),t2.subVectors(t,i);let d=Nc.dot(t2),p=Lc.dot(t2);if(d<=0&&p<=0)return e.copy(i);n2.subVectors(t,r);let _=Nc.dot(n2),m=Lc.dot(n2);if(_>=0&&m<=_)return e.copy(r);let y=d*m-_*p;if(y<=0&&d>=0&&_<=0)return s=d/(d-_),e.copy(i).addScaledVector(Nc,s);i2.subVectors(t,o);let b=Nc.dot(i2),M=Lc.dot(i2);if(M>=0&&b<=M)return e.copy(o);let O=b*p-d*M;if(O<=0&&p>=0&&M<=0)return u=p/(p-M),e.copy(i).addScaledVector(Lc,u);let E=_*M-b*m;if(E<=0&&m-_>=0&&b-M>=0)return dA.subVectors(o,r),u=(m-_)/(m-_+(b-M)),e.copy(r).addScaledVector(dA,u);let w=1/(E+O+y);return s=O*w,u=y*w,e.copy(i).addScaledVector(Nc,s).addScaledVector(Lc,u)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},iT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Na={h:0,s:0,l:0},Rg={h:0,s:0,l:0};function a2(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}var jt=class{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){let r=t;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Br){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,un.colorSpaceToWorking(this,e),this}setRGB(t,e,i,r=un.workingColorSpace){return this.r=t,this.g=e,this.b=i,un.colorSpaceToWorking(this,r),this}setHSL(t,e,i,r=un.workingColorSpace){if(t=W2(t,1),e=Xt(e,0,1),i=Xt(i,0,1),e===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+e):i+e-i*e,s=2*i-o;this.r=a2(s,o,t+1/3),this.g=a2(s,o,t),this.b=a2(s,o,t-1/3)}return un.colorSpaceToWorking(this,r),this}setStyle(t,e=Br){function i(o){o!==void 0&&parseFloat(o)<1&&vt("Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let o,s=r[1],u=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,e);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,e);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,e);break;default:vt("Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,e);if(s===6)return this.setHex(parseInt(o,16),e);vt("Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Br){let i=iT[t.toLowerCase()];return i!==void 0?this.setHex(i,e):vt("Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=qs(t.r),this.g=qs(t.g),this.b=qs(t.b),this}copyLinearToSRGB(t){return this.r=jc(t.r),this.g=jc(t.g),this.b=jc(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Br){return un.workingToColorSpace(Gi.copy(this),t),Math.round(Xt(Gi.r*255,0,255))*65536+Math.round(Xt(Gi.g*255,0,255))*256+Math.round(Xt(Gi.b*255,0,255))}getHexString(t=Br){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=un.workingColorSpace){un.workingToColorSpace(Gi.copy(this),e);let i=Gi.r,r=Gi.g,o=Gi.b,s=Math.max(i,r,o),u=Math.min(i,r,o),d,p,_=(u+s)/2;if(u===s)d=0,p=0;else{let m=s-u;switch(p=_<=.5?m/(s+u):m/(2-s-u),s){case i:d=(r-o)/m+(r<o?6:0);break;case r:d=(o-i)/m+2;break;case o:d=(i-r)/m+4;break}d/=6}return t.h=d,t.s=p,t.l=_,t}getRGB(t,e=un.workingColorSpace){return un.workingToColorSpace(Gi.copy(this),e),t.r=Gi.r,t.g=Gi.g,t.b=Gi.b,t}getStyle(t=Br){un.workingToColorSpace(Gi.copy(this),t);let e=Gi.r,i=Gi.g,r=Gi.b;return t!==Br?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(t,e,i){return this.getHSL(Na),this.setHSL(Na.h+t,Na.s+e,Na.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Na),t.getHSL(Rg);let i=hf(Na.h,Rg.h,e),r=hf(Na.s,Rg.s,e),o=hf(Na.l,Rg.l,e);return this.setHSL(i,r,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let e=this.r,i=this.g,r=this.b,o=t.elements;return this.r=o[0]*e+o[3]*i+o[6]*r,this.g=o[1]*e+o[4]*i+o[7]*r,this.b=o[2]*e+o[5]*i+o[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Gi=new jt;jt.NAMES=iT;var PV=0,Zs=class extends cs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:PV++}),this.uuid=rd(),this.name="",this.type="Material",this.blending=Ql,this.side=Xs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=qg,this.blendDst=Xg,this.blendEquation=Ua,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new jt(0,0,0),this.blendAlpha=0,this.depthFunc=eu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=_2,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Kl,this.stencilZFail=Kl,this.stencilZPass=Kl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let i=t[e];if(i===void 0){vt(`Material: parameter '${e}' has value of undefined.`);continue}let r=this[e];if(r===void 0){vt(`Material: '${e}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(t).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(t).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ql&&(i.blending=this.blending),this.side!==Xs&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==qg&&(i.blendSrc=this.blendSrc),this.blendDst!==Xg&&(i.blendDst=this.blendDst),this.blendEquation!==Ua&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==eu&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==_2&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Kl&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Kl&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Kl&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let u in o){let d=o[u];delete d.metadata,s.push(d)}return s}if(e){let o=r(t.textures),s=r(t.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,i=null;if(e!==null){let r=e.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=e[o].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.allowOverride=t.allowOverride,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}},Ha=class extends Zs{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new za,this.combine=D_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}};var yi=new se,kg=new Et,IV=0,zr=class{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:IV++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=v2,this.updateRanges=[],this.gpuType=Ho,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)kg.fromBufferAttribute(this,e),kg.applyMatrix3(t),this.setXY(e,kg.x,kg.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)yi.fromBufferAttribute(this,e),yi.applyMatrix3(t),this.setXYZ(e,yi.x,yi.y,yi.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)yi.fromBufferAttribute(this,e),yi.applyMatrix4(t),this.setXYZ(e,yi.x,yi.y,yi.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)yi.fromBufferAttribute(this,e),yi.applyNormalMatrix(t),this.setXYZ(e,yi.x,yi.y,yi.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)yi.fromBufferAttribute(this,e),yi.transformDirection(t),this.setXYZ(e,yi.x,yi.y,yi.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=Hc(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=tr(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Hc(e,this.array)),e}setX(t,e){return this.normalized&&(e=tr(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Hc(e,this.array)),e}setY(t,e){return this.normalized&&(e=tr(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Hc(e,this.array)),e}setZ(t,e){return this.normalized&&(e=tr(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Hc(e,this.array)),e}setW(t,e){return this.normalized&&(e=tr(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=tr(e,this.array),i=tr(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=tr(e,this.array),i=tr(i,this.array),r=tr(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,o){return t*=this.itemSize,this.normalized&&(e=tr(e,this.array),i=tr(i,this.array),r=tr(r,this.array),o=tr(o,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==v2&&(t.usage=this.usage),t}};var xf=class extends zr{constructor(t,e,i){super(new Uint16Array(t),e,i)}};var yf=class extends zr{constructor(t,e,i){super(new Uint32Array(t),e,i)}};var ai=class extends zr{constructor(t,e,i){super(new Float32Array(t),e,i)}},OV=0,so=new Qn,l2=new Uo,Vc=new se,Ur=new Ba,cf=new Ba,Ri=new se,Cr=class n extends cs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:OV++}),this.uuid=rd(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(H2(t)?yf:xf)(t,1):this.index=t,this}setIndirect(t,e=0){return this.indirect=t,this.indirectOffset=e,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new kt().getNormalMatrix(t);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return so.makeRotationFromQuaternion(t),this.applyMatrix4(so),this}rotateX(t){return so.makeRotationX(t),this.applyMatrix4(so),this}rotateY(t){return so.makeRotationY(t),this.applyMatrix4(so),this}rotateZ(t){return so.makeRotationZ(t),this.applyMatrix4(so),this}translate(t,e,i){return so.makeTranslation(t,e,i),this.applyMatrix4(so),this}scale(t,e,i){return so.makeScale(t,e,i),this.applyMatrix4(so),this}lookAt(t){return l2.lookAt(t),l2.updateMatrix(),this.applyMatrix4(l2.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vc).negate(),this.translate(Vc.x,Vc.y,Vc.z),this}setFromPoints(t){let e=this.getAttribute("position");if(e===void 0){let i=[];for(let r=0,o=t.length;r<o;r++){let s=t[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new ai(i,3))}else{let i=Math.min(t.length,e.count);for(let r=0;r<i;r++){let o=t[r];e.setXYZ(r,o.x,o.y,o.z||0)}t.length>e.count&&vt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ba);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){bt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new se(-1/0,-1/0,-1/0),new se(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,r=e.length;i<r;i++){let o=e[i];Ur.setFromBufferAttribute(o),this.morphTargetsRelative?(Ri.addVectors(this.boundingBox.min,Ur.min),this.boundingBox.expandByPoint(Ri),Ri.addVectors(this.boundingBox.max,Ur.max),this.boundingBox.expandByPoint(Ri)):(this.boundingBox.expandByPoint(Ur.min),this.boundingBox.expandByPoint(Ur.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&bt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new iu);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){bt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new se,1/0);return}if(t){let i=this.boundingSphere.center;if(Ur.setFromBufferAttribute(t),e)for(let o=0,s=e.length;o<s;o++){let u=e[o];cf.setFromBufferAttribute(u),this.morphTargetsRelative?(Ri.addVectors(Ur.min,cf.min),Ur.expandByPoint(Ri),Ri.addVectors(Ur.max,cf.max),Ur.expandByPoint(Ri)):(Ur.expandByPoint(cf.min),Ur.expandByPoint(cf.max))}Ur.getCenter(i);let r=0;for(let o=0,s=t.count;o<s;o++)Ri.fromBufferAttribute(t,o),r=Math.max(r,i.distanceToSquared(Ri));if(e)for(let o=0,s=e.length;o<s;o++){let u=e[o],d=this.morphTargetsRelative;for(let p=0,_=u.count;p<_;p++)Ri.fromBufferAttribute(u,p),d&&(Vc.fromBufferAttribute(t,p),Ri.add(Vc)),r=Math.max(r,i.distanceToSquared(Ri))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&bt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){bt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.position,r=e.normal,o=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new zr(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),u=[],d=[];for(let re=0;re<i.count;re++)u[re]=new se,d[re]=new se;let p=new se,_=new se,m=new se,y=new Et,b=new Et,M=new Et,O=new se,E=new se;function w(re,V,B){p.fromBufferAttribute(i,re),_.fromBufferAttribute(i,V),m.fromBufferAttribute(i,B),y.fromBufferAttribute(o,re),b.fromBufferAttribute(o,V),M.fromBufferAttribute(o,B),_.sub(p),m.sub(p),b.sub(y),M.sub(y);let X=1/(b.x*M.y-M.x*b.y);isFinite(X)&&(O.copy(_).multiplyScalar(M.y).addScaledVector(m,-b.y).multiplyScalar(X),E.copy(m).multiplyScalar(b.x).addScaledVector(_,-M.x).multiplyScalar(X),u[re].add(O),u[V].add(O),u[B].add(O),d[re].add(E),d[V].add(E),d[B].add(E))}let j=this.groups;j.length===0&&(j=[{start:0,count:t.count}]);for(let re=0,V=j.length;re<V;++re){let B=j[re],X=B.start,ie=B.count;for(let ue=X,ve=X+ie;ue<ve;ue+=3)w(t.getX(ue+0),t.getX(ue+1),t.getX(ue+2))}let H=new se,W=new se,G=new se,Y=new se;function q(re){G.fromBufferAttribute(r,re),Y.copy(G);let V=u[re];H.copy(V),H.sub(G.multiplyScalar(G.dot(V))).normalize(),W.crossVectors(Y,V);let X=W.dot(d[re])<0?-1:1;s.setXYZW(re,H.x,H.y,H.z,X)}for(let re=0,V=j.length;re<V;++re){let B=j[re],X=B.start,ie=B.count;for(let ue=X,ve=X+ie;ue<ve;ue+=3)q(t.getX(ue+0)),q(t.getX(ue+1)),q(t.getX(ue+2))}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new zr(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let y=0,b=i.count;y<b;y++)i.setXYZ(y,0,0,0);let r=new se,o=new se,s=new se,u=new se,d=new se,p=new se,_=new se,m=new se;if(t)for(let y=0,b=t.count;y<b;y+=3){let M=t.getX(y+0),O=t.getX(y+1),E=t.getX(y+2);r.fromBufferAttribute(e,M),o.fromBufferAttribute(e,O),s.fromBufferAttribute(e,E),_.subVectors(s,o),m.subVectors(r,o),_.cross(m),u.fromBufferAttribute(i,M),d.fromBufferAttribute(i,O),p.fromBufferAttribute(i,E),u.add(_),d.add(_),p.add(_),i.setXYZ(M,u.x,u.y,u.z),i.setXYZ(O,d.x,d.y,d.z),i.setXYZ(E,p.x,p.y,p.z)}else for(let y=0,b=e.count;y<b;y+=3)r.fromBufferAttribute(e,y+0),o.fromBufferAttribute(e,y+1),s.fromBufferAttribute(e,y+2),_.subVectors(s,o),m.subVectors(r,o),_.cross(m),i.setXYZ(y+0,_.x,_.y,_.z),i.setXYZ(y+1,_.x,_.y,_.z),i.setXYZ(y+2,_.x,_.y,_.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Ri.fromBufferAttribute(t,e),Ri.normalize(),t.setXYZ(e,Ri.x,Ri.y,Ri.z)}toNonIndexed(){function t(u,d){let p=u.array,_=u.itemSize,m=u.normalized,y=new p.constructor(d.length*_),b=0,M=0;for(let O=0,E=d.length;O<E;O++){u.isInterleavedBufferAttribute?b=d[O]*u.data.stride+u.offset:b=d[O]*_;for(let w=0;w<_;w++)y[M++]=p[b++]}return new zr(y,_,m)}if(this.index===null)return vt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let e=new n,i=this.index.array,r=this.attributes;for(let u in r){let d=r[u],p=t(d,i);e.setAttribute(u,p)}let o=this.morphAttributes;for(let u in o){let d=[],p=o[u];for(let _=0,m=p.length;_<m;_++){let y=p[_],b=t(y,i);d.push(b)}e.morphAttributes[u]=d}e.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let u=0,d=s.length;u<d;u++){let p=s[u];e.addGroup(p.start,p.count,p.materialIndex)}return e}toJSON(){let t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){let d=this.parameters;for(let p in d)d[p]!==void 0&&(t[p]=d[p]);return t}t.data={attributes:{}};let e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let i=this.attributes;for(let d in i){let p=i[d];t.data.attributes[d]=p.toJSON(t.data)}let r={},o=!1;for(let d in this.morphAttributes){let p=this.morphAttributes[d],_=[];for(let m=0,y=p.length;m<y;m++){let b=p[m];_.push(b.toJSON(t.data))}_.length>0&&(r[d]=_,o=!0)}o&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));let u=this.boundingSphere;return u!==null&&(t.data.boundingSphere=u.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let i=t.index;i!==null&&this.setIndex(i.clone());let r=t.attributes;for(let p in r){let _=r[p];this.setAttribute(p,_.clone(e))}let o=t.morphAttributes;for(let p in o){let _=[],m=o[p];for(let y=0,b=m.length;y<b;y++)_.push(m[y].clone(e));this.morphAttributes[p]=_}this.morphTargetsRelative=t.morphTargetsRelative;let s=t.groups;for(let p=0,_=s.length;p<_;p++){let m=s[p];this.addGroup(m.start,m.count,m.materialIndex)}let u=t.boundingBox;u!==null&&(this.boundingBox=u.clone());let d=t.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},fA=new Qn,Zl=new ru,Fg=new iu,hA=new se,Ng=new se,Lg=new se,Vg=new se,u2=new se,Ug=new se,pA=new se,Bg=new se,sn=class extends Uo{constructor(t=new Cr,e=new Ha){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let u=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}getVertexPosition(t,e){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;e.fromBufferAttribute(r,t);let u=this.morphTargetInfluences;if(o&&u){Ug.set(0,0,0);for(let d=0,p=o.length;d<p;d++){let _=u[d],m=o[d];_!==0&&(u2.fromBufferAttribute(m,t),s?Ug.addScaledVector(u2,_):Ug.addScaledVector(u2.sub(e),_))}e.add(Ug)}return e}raycast(t,e){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Fg.copy(i.boundingSphere),Fg.applyMatrix4(o),Zl.copy(t.ray).recast(t.near),!(Fg.containsPoint(Zl.origin)===!1&&(Zl.intersectSphere(Fg,hA)===null||Zl.origin.distanceToSquared(hA)>(t.far-t.near)**2))&&(fA.copy(o).invert(),Zl.copy(t.ray).applyMatrix4(fA),!(i.boundingBox!==null&&Zl.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,Zl)))}_computeIntersections(t,e,i){let r,o=this.geometry,s=this.material,u=o.index,d=o.attributes.position,p=o.attributes.uv,_=o.attributes.uv1,m=o.attributes.normal,y=o.groups,b=o.drawRange;if(u!==null)if(Array.isArray(s))for(let M=0,O=y.length;M<O;M++){let E=y[M],w=s[E.materialIndex],j=Math.max(E.start,b.start),H=Math.min(u.count,Math.min(E.start+E.count,b.start+b.count));for(let W=j,G=H;W<G;W+=3){let Y=u.getX(W),q=u.getX(W+1),re=u.getX(W+2);r=zg(this,w,t,i,p,_,m,Y,q,re),r&&(r.faceIndex=Math.floor(W/3),r.face.materialIndex=E.materialIndex,e.push(r))}}else{let M=Math.max(0,b.start),O=Math.min(u.count,b.start+b.count);for(let E=M,w=O;E<w;E+=3){let j=u.getX(E),H=u.getX(E+1),W=u.getX(E+2);r=zg(this,s,t,i,p,_,m,j,H,W),r&&(r.faceIndex=Math.floor(E/3),e.push(r))}}else if(d!==void 0)if(Array.isArray(s))for(let M=0,O=y.length;M<O;M++){let E=y[M],w=s[E.materialIndex],j=Math.max(E.start,b.start),H=Math.min(d.count,Math.min(E.start+E.count,b.start+b.count));for(let W=j,G=H;W<G;W+=3){let Y=W,q=W+1,re=W+2;r=zg(this,w,t,i,p,_,m,Y,q,re),r&&(r.faceIndex=Math.floor(W/3),r.face.materialIndex=E.materialIndex,e.push(r))}}else{let M=Math.max(0,b.start),O=Math.min(d.count,b.start+b.count);for(let E=M,w=O;E<w;E+=3){let j=E,H=E+1,W=E+2;r=zg(this,s,t,i,p,_,m,j,H,W),r&&(r.faceIndex=Math.floor(E/3),e.push(r))}}}};function RV(n,t,e,i,r,o,s,u){let d;if(t.side===nr?d=i.intersectTriangle(s,o,r,!0,u):d=i.intersectTriangle(r,o,s,t.side===Xs,u),d===null)return null;Bg.copy(u),Bg.applyMatrix4(n.matrixWorld);let p=e.ray.origin.distanceTo(Bg);return p<e.near||p>e.far?null:{distance:p,point:Bg.clone(),object:n}}function zg(n,t,e,i,r,o,s,u,d,p){n.getVertexPosition(u,Ng),n.getVertexPosition(d,Lg),n.getVertexPosition(p,Vg);let _=RV(n,t,e,i,Ng,Lg,Vg,pA);if(_){let m=new se;Va.getBarycoord(pA,Ng,Lg,Vg,m),r&&(_.uv=Va.getInterpolatedAttribute(r,u,d,p,m,new Et)),o&&(_.uv1=Va.getInterpolatedAttribute(o,u,d,p,m,new Et)),s&&(_.normal=Va.getInterpolatedAttribute(s,u,d,p,m,new se),_.normal.dot(i.direction)>0&&_.normal.multiplyScalar(-1));let y={a:u,b:d,c:p,normal:new se,materialIndex:0};Va.getNormal(Ng,Lg,Vg,y.normal),_.face=y,_.barycoord=m}return _}var li=class n extends Cr{constructor(t=1,e=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let u=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let d=[],p=[],_=[],m=[],y=0,b=0;M("z","y","x",-1,-1,i,e,t,s,o,0),M("z","y","x",1,-1,i,e,-t,s,o,1),M("x","z","y",1,1,t,i,e,r,s,2),M("x","z","y",1,-1,t,i,-e,r,s,3),M("x","y","z",1,-1,t,e,i,r,o,4),M("x","y","z",-1,-1,t,e,-i,r,o,5),this.setIndex(d),this.setAttribute("position",new ai(p,3)),this.setAttribute("normal",new ai(_,3)),this.setAttribute("uv",new ai(m,2));function M(O,E,w,j,H,W,G,Y,q,re,V){let B=W/q,X=G/re,ie=W/2,ue=G/2,ve=Y/2,_e=q+1,me=re+1,he=0,we=0,$e=new se;for(let Ne=0;Ne<me;Ne++){let Ye=Ne*X-ue;for(let _t=0;_t<_e;_t++){let Pe=_t*B-ie;$e[O]=Pe*j,$e[E]=Ye*H,$e[w]=ve,p.push($e.x,$e.y,$e.z),$e[O]=0,$e[E]=0,$e[w]=Y>0?1:-1,_.push($e.x,$e.y,$e.z),m.push(_t/q),m.push(1-Ne/re),he+=1}}for(let Ne=0;Ne<re;Ne++)for(let Ye=0;Ye<q;Ye++){let _t=y+Ye+_e*Ne,Pe=y+Ye+_e*(Ne+1),pn=y+(Ye+1)+_e*(Ne+1),cn=y+(Ye+1)+_e*Ne;d.push(_t,Pe,cn),d.push(Pe,pn,cn),we+=6}u.addGroup(b,we,V),b+=we,y+=he}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function lu(n){let t={};for(let e in n){t[e]={};for(let i in n[e]){let r=n[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(vt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=r.clone():Array.isArray(r)?t[e][i]=r.slice():t[e][i]=r}}return t}function Yi(n){let t={};for(let e=0;e<n.length;e++){let i=lu(n[e]);for(let r in i)t[r]=i[r]}return t}function kV(n){let t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function $2(n){let t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:un.workingColorSpace}var rT={clone:lu,merge:Yi},FV=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,NV=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,jr=class extends Zs{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=FV,this.fragmentShader=NV,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=lu(t.uniforms),this.uniformsGroups=kV(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this.defaultAttributeValues=Object.assign({},t.defaultAttributeValues),this.index0AttributeName=t.index0AttributeName,this.uniformsNeedUpdate=t.uniformsNeedUpdate,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?e.uniforms[r]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?e.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[r]={type:"m4",value:s.toArray()}:e.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}},bf=class extends Uo{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Qn,this.projectionMatrix=new Qn,this.projectionMatrixInverse=new Qn,this.coordinateSystem=Vo,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},La=new se,mA=new Et,gA=new Et,$i=class extends bf{constructor(t=50,e=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=Yc*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(ff*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Yc*2*Math.atan(Math.tan(ff*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){La.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(La.x,La.y).multiplyScalar(-t/La.z),La.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(La.x,La.y).multiplyScalar(-t/La.z)}getViewSize(t,e){return this.getViewBounds(t,mA,gA),e.subVectors(gA,mA)}setViewOffset(t,e,i,r,o,s){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(ff*.5*this.fov)/this.zoom,i=2*e,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let d=s.fullWidth,p=s.fullHeight;o+=s.offsetX*r/d,e-=s.offsetY*i/p,r*=s.width/d,i*=s.height/p}let u=this.filmOffset;u!==0&&(o+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,e,e-i,t,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},Uc=-90,Bc=1,t_=class extends Uo{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new $i(Uc,Bc,t,e);r.layers=this.layers,this.add(r);let o=new $i(Uc,Bc,t,e);o.layers=this.layers,this.add(o);let s=new $i(Uc,Bc,t,e);s.layers=this.layers,this.add(s);let u=new $i(Uc,Bc,t,e);u.layers=this.layers,this.add(u);let d=new $i(Uc,Bc,t,e);d.layers=this.layers,this.add(d);let p=new $i(Uc,Bc,t,e);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){let t=this.coordinateSystem,e=this.children.concat(),[i,r,o,s,u,d]=e;for(let p of e)this.remove(p);if(t===Vo)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(t===gf)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(let p of e)this.add(p),p.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());let[o,s,u,d,p,_]=this.children,m=t.getRenderTarget(),y=t.getActiveCubeFace(),b=t.getActiveMipmapLevel(),M=t.xr.enabled;t.xr.enabled=!1;let O=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,r),t.render(e,o),t.setRenderTarget(i,1,r),t.render(e,s),t.setRenderTarget(i,2,r),t.render(e,u),t.setRenderTarget(i,3,r),t.render(e,d),t.setRenderTarget(i,4,r),t.render(e,p),i.texture.generateMipmaps=O,t.setRenderTarget(i,5,r),t.render(e,_),t.setRenderTarget(m,y,b),t.xr.enabled=M,i.texture.needsPMREMUpdate=!0}},Cf=class extends jo{constructor(t=[],e=qa,i,r,o,s,u,d,p,_){super(t,e,i,r,o,s,u,d,p,_),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},wf=class extends Hr{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let i={width:t,height:t,depth:1},r=[i,i,i,i,i,i];this.texture=new Cf(r),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new li(5,5,5),o=new jr({name:"CubemapFromEquirect",uniforms:lu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:nr,blending:fs});o.uniforms.tEquirect.value=e;let s=new sn(r,o),u=e.minFilter;return e.minFilter===Xa&&(e.minFilter=Li),new t_(1,10,this).update(t,s),e.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}clear(t,e=!0,i=!0,r=!0){let o=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,i,r);t.setRenderTarget(o)}},lo=class extends Uo{constructor(){super(),this.isGroup=!0,this.type="Group"}},LV={type:"move"},Xc=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new lo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new lo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new se,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new se),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new lo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new se,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new se),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let r=null,o=null,s=null,u=this._targetRay,d=this._grip,p=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(p&&t.hand){s=!0;for(let O of t.hand.values()){let E=e.getJointPose(O,i),w=this._getHandJoint(p,O);E!==null&&(w.matrix.fromArray(E.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=E.radius),w.visible=E!==null}let _=p.joints["index-finger-tip"],m=p.joints["thumb-tip"],y=_.position.distanceTo(m.position),b=.02,M=.005;p.inputState.pinching&&y>b+M?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!p.inputState.pinching&&y<=b-M&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else d!==null&&t.gripSpace&&(o=e.getPose(t.gripSpace,i),o!==null&&(d.matrix.fromArray(o.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,o.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(o.linearVelocity)):d.hasLinearVelocity=!1,o.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(o.angularVelocity)):d.hasAngularVelocity=!1));u!==null&&(r=e.getPose(t.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(u.matrix.fromArray(r.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,r.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(r.linearVelocity)):u.hasLinearVelocity=!1,r.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(r.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(LV)))}return u!==null&&(u.visible=r!==null),d!==null&&(d.visible=o!==null),p!==null&&(p.visible=s!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let i=new lo;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}};var Mf=class extends Uo{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new za,this.environmentIntensity=1,this.environmentRotation=new za,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}};var n_=class extends jo{constructor(t=null,e=1,i=1,r,o,s,u,d,p=ki,_=ki,m,y){super(null,s,u,d,p,_,r,o,m,y),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var c2=new se,VV=new se,UV=new kt,ao=class{constructor(t=new se(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){let r=c2.subVectors(i,e).cross(VV.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){let i=t.delta(c2),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let o=-(t.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:e.copy(t.start).addScaledVector(i,o)}intersectsLine(t){let e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let i=e||UV.getNormalMatrix(t),r=this.coplanarPoint(c2).applyMatrix4(t),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},Jl=new iu,BV=new Et(.5,.5),Hg=new se,Zc=class{constructor(t=new ao,e=new ao,i=new ao,r=new ao,o=new ao,s=new ao){this.planes=[t,e,i,r,o,s]}set(t,e,i,r,o,s){let u=this.planes;return u[0].copy(t),u[1].copy(e),u[2].copy(i),u[3].copy(r),u[4].copy(o),u[5].copy(s),this}copy(t){let e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=Vo,i=!1){let r=this.planes,o=t.elements,s=o[0],u=o[1],d=o[2],p=o[3],_=o[4],m=o[5],y=o[6],b=o[7],M=o[8],O=o[9],E=o[10],w=o[11],j=o[12],H=o[13],W=o[14],G=o[15];if(r[0].setComponents(p-s,b-_,w-M,G-j).normalize(),r[1].setComponents(p+s,b+_,w+M,G+j).normalize(),r[2].setComponents(p+u,b+m,w+O,G+H).normalize(),r[3].setComponents(p-u,b-m,w-O,G-H).normalize(),i)r[4].setComponents(d,y,E,W).normalize(),r[5].setComponents(p-d,b-y,w-E,G-W).normalize();else if(r[4].setComponents(p-d,b-y,w-E,G-W).normalize(),e===Vo)r[5].setComponents(p+d,b+y,w+E,G+W).normalize();else if(e===gf)r[5].setComponents(d,y,E,W).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Jl.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Jl.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Jl)}intersectsSprite(t){Jl.center.set(0,0,0);let e=BV.distanceTo(t.center);return Jl.radius=.7071067811865476+e,Jl.applyMatrix4(t.matrixWorld),this.intersectsSphere(Jl)}intersectsSphere(t){let e=this.planes,i=t.center,r=-t.radius;for(let o=0;o<6;o++)if(e[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){let e=this.planes;for(let i=0;i<6;i++){let r=e[i];if(Hg.x=r.normal.x>0?t.max.x:t.min.x,Hg.y=r.normal.y>0?t.max.y:t.min.y,Hg.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Hg)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var Sf=class extends Zs{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new jt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}},i_=new se,r_=new se,_A=new Qn,df=new ru,jg=new iu,d2=new se,vA=new se,o_=class extends Uo{constructor(t=new Cr,e=new Sf){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[0];for(let r=1,o=e.count;r<o;r++)i_.fromBufferAttribute(e,r-1),r_.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=i_.distanceTo(r_);t.setAttribute("lineDistance",new ai(i,1))}else vt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,o=t.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),jg.copy(i.boundingSphere),jg.applyMatrix4(r),jg.radius+=o,t.ray.intersectsSphere(jg)===!1)return;_A.copy(r).invert(),df.copy(t.ray).applyMatrix4(_A);let u=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=this.isLineSegments?2:1,_=i.index,y=i.attributes.position;if(_!==null){let b=Math.max(0,s.start),M=Math.min(_.count,s.start+s.count);for(let O=b,E=M-1;O<E;O+=p){let w=_.getX(O),j=_.getX(O+1),H=Wg(this,t,df,d,w,j,O);H&&e.push(H)}if(this.isLineLoop){let O=_.getX(M-1),E=_.getX(b),w=Wg(this,t,df,d,O,E,M-1);w&&e.push(w)}}else{let b=Math.max(0,s.start),M=Math.min(y.count,s.start+s.count);for(let O=b,E=M-1;O<E;O+=p){let w=Wg(this,t,df,d,O,O+1,O);w&&e.push(w)}if(this.isLineLoop){let O=Wg(this,t,df,d,M-1,b,M-1);O&&e.push(O)}}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let u=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}};function Wg(n,t,e,i,r,o,s){let u=n.geometry.attributes.position;if(i_.fromBufferAttribute(u,r),r_.fromBufferAttribute(u,o),e.distanceSqToSegment(i_,r_,d2,vA)>i)return;d2.applyMatrix4(n.matrixWorld);let p=t.ray.origin.distanceTo(d2);if(!(p<t.near||p>t.far))return{distance:p,point:vA.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}var xA=new se,yA=new se,s_=class extends o_{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[];for(let r=0,o=e.count;r<o;r+=2)xA.fromBufferAttribute(e,r),yA.fromBufferAttribute(e,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+xA.distanceTo(yA);t.setAttribute("lineDistance",new ai(i,1))}else vt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}};var Jc=class extends jo{constructor(t,e,i,r,o,s,u,d,p){super(t,e,i,r,o,s,u,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}},ja=class extends jo{constructor(t,e,i=zo,r,o,s,u=ki,d=ki,p,_=us,m=1){if(_!==us&&_!==Za)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");let y={width:t,height:e,depth:m};super(y,r,o,s,u,d,_,i,p),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new qc(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){let e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}},a_=class extends ja{constructor(t,e=zo,i=qa,r,o,s=ki,u=ki,d,p=us){let _={width:t,height:t,depth:1},m=[_,_,_,_,_,_];super(t,t,e,i,r,o,s,u,d,p),this.image=m,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(t){this.image=t}},Ef=class extends jo{constructor(t=null){super(),this.sourceTexture=t,this.isExternalTexture=!0}copy(t){return super.copy(t),this.sourceTexture=t.sourceTexture,this}};var Kc=class n extends Cr{constructor(t=1,e=1,i=1,r=32,o=1,s=!1,u=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:u,thetaLength:d};let p=this;r=Math.floor(r),o=Math.floor(o);let _=[],m=[],y=[],b=[],M=0,O=[],E=i/2,w=0;j(),s===!1&&(t>0&&H(!0),e>0&&H(!1)),this.setIndex(_),this.setAttribute("position",new ai(m,3)),this.setAttribute("normal",new ai(y,3)),this.setAttribute("uv",new ai(b,2));function j(){let W=new se,G=new se,Y=0,q=(e-t)/i;for(let re=0;re<=o;re++){let V=[],B=re/o,X=B*(e-t)+t;for(let ie=0;ie<=r;ie++){let ue=ie/r,ve=ue*d+u,_e=Math.sin(ve),me=Math.cos(ve);G.x=X*_e,G.y=-B*i+E,G.z=X*me,m.push(G.x,G.y,G.z),W.set(_e,q,me).normalize(),y.push(W.x,W.y,W.z),b.push(ue,1-B),V.push(M++)}O.push(V)}for(let re=0;re<r;re++)for(let V=0;V<o;V++){let B=O[V][re],X=O[V+1][re],ie=O[V+1][re+1],ue=O[V][re+1];(t>0||V!==0)&&(_.push(B,X,ue),Y+=3),(e>0||V!==o-1)&&(_.push(X,ie,ue),Y+=3)}p.addGroup(w,Y,0),w+=Y}function H(W){let G=M,Y=new Et,q=new se,re=0,V=W===!0?t:e,B=W===!0?1:-1;for(let ie=1;ie<=r;ie++)m.push(0,E*B,0),y.push(0,B,0),b.push(.5,.5),M++;let X=M;for(let ie=0;ie<=r;ie++){let ve=ie/r*d+u,_e=Math.cos(ve),me=Math.sin(ve);q.x=V*me,q.y=E*B,q.z=V*_e,m.push(q.x,q.y,q.z),y.push(0,B,0),Y.x=_e*.5+.5,Y.y=me*.5*B+.5,b.push(Y.x,Y.y),M++}for(let ie=0;ie<r;ie++){let ue=G+ie,ve=X+ie;W===!0?_.push(ve,ve+1,ue):_.push(ve+1,ve,ue),re+=3}p.addGroup(w,re,W===!0?1:2),w+=re}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}};var ds=class n extends Cr{constructor(t=1,e=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};let o=t/2,s=e/2,u=Math.floor(i),d=Math.floor(r),p=u+1,_=d+1,m=t/u,y=e/d,b=[],M=[],O=[],E=[];for(let w=0;w<_;w++){let j=w*y-s;for(let H=0;H<p;H++){let W=H*m-o;M.push(W,-j,0),O.push(0,0,1),E.push(H/u),E.push(1-w/d)}}for(let w=0;w<d;w++)for(let j=0;j<u;j++){let H=j+p*w,W=j+p*(w+1),G=j+1+p*(w+1),Y=j+1+p*w;b.push(H,W,Y),b.push(W,G,Y)}this.setIndex(b),this.setAttribute("position",new ai(M,3)),this.setAttribute("normal",new ai(O,3)),this.setAttribute("uv",new ai(E,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}};var Af=class n extends Cr{constructor(t=1,e=32,i=16,r=0,o=Math.PI*2,s=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:r,phiLength:o,thetaStart:s,thetaLength:u},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));let d=Math.min(s+u,Math.PI),p=0,_=[],m=new se,y=new se,b=[],M=[],O=[],E=[];for(let w=0;w<=i;w++){let j=[],H=w/i,W=0;w===0&&s===0?W=.5/e:w===i&&d===Math.PI&&(W=-.5/e);for(let G=0;G<=e;G++){let Y=G/e;m.x=-t*Math.cos(r+Y*o)*Math.sin(s+H*u),m.y=t*Math.cos(s+H*u),m.z=t*Math.sin(r+Y*o)*Math.sin(s+H*u),M.push(m.x,m.y,m.z),y.copy(m).normalize(),O.push(y.x,y.y,y.z),E.push(Y+W,1-H),j.push(p++)}_.push(j)}for(let w=0;w<i;w++)for(let j=0;j<e;j++){let H=_[w][j+1],W=_[w][j],G=_[w+1][j],Y=_[w+1][j+1];(w!==0||s>0)&&b.push(H,W,Y),(w!==i-1||d<Math.PI)&&b.push(W,G,Y)}this.setIndex(b),this.setAttribute("position",new ai(M,3)),this.setAttribute("normal",new ai(O,3)),this.setAttribute("uv",new ai(E,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}};var l_=class extends jr{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}};var qn=class extends Zs{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new jt(16777215),this.specular=new jt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=B2,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new za,this.combine=D_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}};var u_=class extends Zs{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=YA,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},c_=class extends Zs{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}};function Gg(n,t){return!n||n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}var ou=class{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){let e=this.parameterPositions,i=this._cachedIndex,r=e[i],o=e[i-1];n:{e:{let s;t:{i:if(!(t<r)){for(let u=i+2;;){if(r===void 0){if(t<o)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(o=r,r=e[++i],t<r)break e}s=e.length;break t}if(!(t>=o)){let u=e[1];t<u&&(i=2,o=u);for(let d=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(r=o,o=e[--i-1],t>=o)break e}s=i,i=0;break t}break n}for(;i<s;){let u=i+s>>>1;t<e[u]?s=u:i=u+1}if(r=e[i],o=e[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=t*r;for(let s=0;s!==r;++s)e[s]=i[o+s];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},d_=class extends ou{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:p2,endingEnd:p2}}intervalChanged_(t,e,i){let r=this.parameterPositions,o=t-2,s=t+1,u=r[o],d=r[s];if(u===void 0)switch(this.getSettings_().endingStart){case m2:o=t,u=2*e-i;break;case g2:o=r.length-2,u=e+r[o]-r[o+1];break;default:o=t,u=i}if(d===void 0)switch(this.getSettings_().endingEnd){case m2:s=t,d=2*i-e;break;case g2:s=1,d=i+r[1]-r[0];break;default:s=t-1,d=e}let p=(i-e)*.5,_=this.valueSize;this._weightPrev=p/(e-u),this._weightNext=p/(d-i),this._offsetPrev=o*_,this._offsetNext=s*_}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,u=this.valueSize,d=t*u,p=d-u,_=this._offsetPrev,m=this._offsetNext,y=this._weightPrev,b=this._weightNext,M=(i-e)/(r-e),O=M*M,E=O*M,w=-y*E+2*y*O-y*M,j=(1+y)*E+(-1.5-2*y)*O+(-.5+y)*M+1,H=(-1-b)*E+(1.5+b)*O+.5*M,W=b*E-b*O;for(let G=0;G!==u;++G)o[G]=w*s[_+G]+j*s[p+G]+H*s[d+G]+W*s[m+G];return o}},f_=class extends ou{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,u=this.valueSize,d=t*u,p=d-u,_=(i-e)/(r-e),m=1-_;for(let y=0;y!==u;++y)o[y]=s[p+y]*m+s[d+y]*_;return o}},h_=class extends ou{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}},Wr=class{constructor(t,e,i,r){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Gg(e,this.TimeBufferType),this.values=Gg(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){let e=t.constructor,i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:Gg(t.times,Array),values:Gg(t.values,Array)};let r=t.getInterpolation();r!==t.DefaultInterpolation&&(i.interpolation=r)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new h_(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new f_(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new d_(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case pf:e=this.InterpolantFactoryMethodDiscrete;break;case Jg:e=this.InterpolantFactoryMethodLinear;break;case $g:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return vt("KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return pf;case this.InterpolantFactoryMethodLinear:return Jg;case this.InterpolantFactoryMethodSmooth:return $g}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(t!==1){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<t;)++o;for(;s!==-1&&i[s]>e;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let u=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*u,s*u)}return this}validate(){let t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(bt("KeyframeTrack: Invalid value size in track.",this),t=!1);let i=this.times,r=this.values,o=i.length;o===0&&(bt("KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let u=0;u!==o;u++){let d=i[u];if(typeof d=="number"&&isNaN(d)){bt("KeyframeTrack: Time is not a valid number.",this,u,d),t=!1;break}if(s!==null&&s>d){bt("KeyframeTrack: Out of order keys.",this,u,d,s),t=!1;break}s=d}if(r!==void 0&&iV(r))for(let u=0,d=r.length;u!==d;++u){let p=r[u];if(isNaN(p)){bt("KeyframeTrack: Value is not a valid number.",this,u,p),t=!1;break}}return t}optimize(){let t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===$g,o=t.length-1,s=1;for(let u=1;u<o;++u){let d=!1,p=t[u],_=t[u+1];if(p!==_&&(u!==1||p!==t[0]))if(r)d=!0;else{let m=u*i,y=m-i,b=m+i;for(let M=0;M!==i;++M){let O=e[m+M];if(O!==e[y+M]||O!==e[b+M]){d=!0;break}}}if(d){if(u!==s){t[s]=t[u];let m=u*i,y=s*i;for(let b=0;b!==i;++b)e[y+b]=e[m+b]}++s}}if(o>0){t[s]=t[o];for(let u=o*i,d=s*i,p=0;p!==i;++p)e[d+p]=e[u+p];++s}return s!==t.length?(this.times=t.slice(0,s),this.values=e.slice(0,s*i)):(this.times=t,this.values=e),this}clone(){let t=this.times.slice(),e=this.values.slice(),i=this.constructor,r=new i(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}};Wr.prototype.ValueTypeName="";Wr.prototype.TimeBufferType=Float32Array;Wr.prototype.ValueBufferType=Float32Array;Wr.prototype.DefaultInterpolation=Jg;var Wa=class extends Wr{constructor(t,e,i){super(t,e,i)}};Wa.prototype.ValueTypeName="bool";Wa.prototype.ValueBufferType=Array;Wa.prototype.DefaultInterpolation=pf;Wa.prototype.InterpolantFactoryMethodLinear=void 0;Wa.prototype.InterpolantFactoryMethodSmooth=void 0;var p_=class extends Wr{constructor(t,e,i,r){super(t,e,i,r)}};p_.prototype.ValueTypeName="color";var m_=class extends Wr{constructor(t,e,i,r){super(t,e,i,r)}};m_.prototype.ValueTypeName="number";var g_=class extends ou{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,u=this.valueSize,d=(i-e)/(r-e),p=t*u;for(let _=p+u;p!==_;p+=4)uo.slerpFlat(o,0,s,p-u,s,p,d);return o}},Tf=class extends Wr{constructor(t,e,i,r){super(t,e,i,r)}InterpolantFactoryMethodLinear(t){return new g_(this.times,this.values,this.getValueSize(),t)}};Tf.prototype.ValueTypeName="quaternion";Tf.prototype.InterpolantFactoryMethodSmooth=void 0;var Ga=class extends Wr{constructor(t,e,i){super(t,e,i)}};Ga.prototype.ValueTypeName="string";Ga.prototype.ValueBufferType=Array;Ga.prototype.DefaultInterpolation=pf;Ga.prototype.InterpolantFactoryMethodLinear=void 0;Ga.prototype.InterpolantFactoryMethodSmooth=void 0;var __=class extends Wr{constructor(t,e,i,r){super(t,e,i,r)}};__.prototype.ValueTypeName="vector";var Yg={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},v_=class{constructor(t,e,i){let r=this,o=!1,s=0,u=0,d,p=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this._abortController=null,this.itemStart=function(_){u++,o===!1&&r.onStart!==void 0&&r.onStart(_,s,u),o=!0},this.itemEnd=function(_){s++,r.onProgress!==void 0&&r.onProgress(_,s,u),s===u&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(_){r.onError!==void 0&&r.onError(_)},this.resolveURL=function(_){return d?d(_):_},this.setURLModifier=function(_){return d=_,this},this.addHandler=function(_,m){return p.push(_,m),this},this.removeHandler=function(_){let m=p.indexOf(_);return m!==-1&&p.splice(m,2),this},this.getHandler=function(_){for(let m=0,y=p.length;m<y;m+=2){let b=p[m],M=p[m+1];if(b.global&&(b.lastIndex=0),b.test(_))return M}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}},oT=new v_,Y2=(()=>{class n{constructor(e){this.manager=e!==void 0?e:oT,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,i){let r=this;return new Promise(function(o,s){r.load(e,o,i,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})();var zc=new WeakMap,x_=class extends Y2{constructor(t){super(t)}load(t,e,i,r){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=this,s=Yg.get(`image:${t}`);if(s!==void 0){if(s.complete===!0)o.manager.itemStart(t),setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0);else{let m=zc.get(s);m===void 0&&(m=[],zc.set(s,m)),m.push({onLoad:e,onError:r})}return s}let u=Wc("img");function d(){_(),e&&e(this);let m=zc.get(this)||[];for(let y=0;y<m.length;y++){let b=m[y];b.onLoad&&b.onLoad(this)}zc.delete(this),o.manager.itemEnd(t)}function p(m){_(),r&&r(m),Yg.remove(`image:${t}`);let y=zc.get(this)||[];for(let b=0;b<y.length;b++){let M=y[b];M.onError&&M.onError(m)}zc.delete(this),o.manager.itemError(t),o.manager.itemEnd(t)}function _(){u.removeEventListener("load",d,!1),u.removeEventListener("error",p,!1)}return u.addEventListener("load",d,!1),u.addEventListener("error",p,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),Yg.add(`image:${t}`,u),o.manager.itemStart(t),u.src=t,u}};var Df=class extends Y2{constructor(t){super(t)}load(t,e,i,r){let o=new jo,s=new x_(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(u){o.image=u,o.needsUpdate=!0,e!==void 0&&e(o)},i,r),o}},Pf=class extends Uo{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new jt(t),this.intensity=e}dispose(){this.dispatchEvent({type:"dispose"})}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,e}};var f2=new Qn,bA=new se,CA=new se,x2=class{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Et(512,512),this.mapType=wr,this.map=null,this.mapPass=null,this.matrix=new Qn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Zc,this._frameExtents=new Et(1,1),this._viewportCount=1,this._viewports=[new ei(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,i=this.matrix;bA.setFromMatrixPosition(t.matrixWorld),e.position.copy(bA),CA.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(CA),e.updateMatrixWorld(),f2.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(f2,e.coordinateSystem,e.reversedDepth),e.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(f2)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}};var Qc=class extends bf{constructor(t=-1,e=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-t,s=i+t,u=r+e,d=r-e;if(this.view!==null&&this.view.enabled){let p=(this.right-this.left)/this.view.fullWidth/this.zoom,_=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=p*this.view.offsetX,s=o+p*this.view.width,u-=_*this.view.offsetY,d=u-_*this.view.height}this.projectionMatrix.makeOrthographic(o,s,u,d,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}},y2=class extends x2{constructor(){super(new Qc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},If=class extends Pf{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Uo.DEFAULT_UP),this.updateMatrix(),this.target=new Uo,this.shadow=new y2}dispose(){super.dispose(),this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}toJSON(t){let e=super.toJSON(t);return e.object.shadow=this.shadow.toJSON(),e.object.target=this.target.uuid,e}},Of=class extends Pf{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}};var y_=class extends $i{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}};var q2="\\[\\]\\.:\\/",zV=new RegExp("["+q2+"]","g"),X2="[^"+q2+"]",HV="[^"+q2.replace("\\.","")+"]",jV=/((?:WC+[\/:])*)/.source.replace("WC",X2),WV=/(WCOD+)?/.source.replace("WCOD",HV),GV=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",X2),$V=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",X2),YV=new RegExp("^"+jV+WV+GV+$V+"$"),qV=["material","materials","bones","map"],b2=class{constructor(t,e,i){let r=i||si.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(t,e)}setValue(t,e){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(t,e)}bind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},si=(()=>{class n{constructor(e,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,r){return e&&e.isAnimationObjectGroup?new n.Composite(e,i,r):new n(e,i,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(zV,"")}static parseTrackName(e){let i=YV.exec(e);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);qV.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,i){if(i===void 0||i===""||i==="."||i===-1||i===e.name||i===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(i);if(r!==void 0)return r}if(e.children){let r=function(s){for(let u=0;u<s.length;u++){let d=s[u];if(d.name===i||d.uuid===i)return d;let p=r(d.children);if(p)return p}return null},o=r(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)e[i++]=r[o]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++]}_setValue_array_setNeedsUpdate(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(e||(e=n.findNode(this.rootNode,i.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){vt("PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let _=i.objectIndex;switch(r){case"materials":if(!e.material){bt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){bt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){bt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===_){_=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){bt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){bt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){bt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(_!==void 0){if(e[_]===void 0){bt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[_]}}let u=e[o];if(u===void 0){let _=i.nodeName;bt("PropertyBinding: Trying to update property for track: "+_+"."+o+" but it wasn't found.",e);return}let d=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?d=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(d=this.Versioning.MatrixWorldNeedsUpdate);let p=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){bt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){bt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}p=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=s}else u.fromArray!==void 0&&u.toArray!==void 0?(p=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(p=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=o;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][d]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=b2,n})();si.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};si.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};si.prototype.GetterByBindingType=[si.prototype._getValue_direct,si.prototype._getValue_array,si.prototype._getValue_arrayElement,si.prototype._getValue_toArray];si.prototype.SetterByBindingTypeAndVersioning=[[si.prototype._setValue_direct,si.prototype._setValue_direct_setNeedsUpdate,si.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[si.prototype._setValue_array,si.prototype._setValue_array_setNeedsUpdate,si.prototype._setValue_array_setMatrixWorldNeedsUpdate],[si.prototype._setValue_arrayElement,si.prototype._setValue_arrayElement_setNeedsUpdate,si.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[si.prototype._setValue_fromArray,si.prototype._setValue_fromArray_setNeedsUpdate,si.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var ire=new Float32Array(1);var ed=class{constructor(t=1,e=0,i=0){this.radius=t,this.phi=e,this.theta=i}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Xt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Xt(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};var Rf=class extends s_{constructor(t=10,e=10,i=4473924,r=8947848){i=new jt(i),r=new jt(r);let o=e/2,s=t/e,u=t/2,d=[],p=[];for(let y=0,b=0,M=-u;y<=e;y++,M+=s){d.push(-u,0,M,u,0,M),d.push(M,0,-u,M,0,u);let O=y===o?i:r;O.toArray(p,b),b+=3,O.toArray(p,b),b+=3,O.toArray(p,b),b+=3,O.toArray(p,b),b+=3}let _=new Cr;_.setAttribute("position",new ai(d,3)),_.setAttribute("color",new ai(p,3));let m=new Sf({vertexColors:!0,toneMapped:!1});super(_,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}};var kf=class extends cs{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){vt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}};function Z2(n,t,e,i){let r=XV(i);switch(e){case L2:return n*t;case U2:return n*t/r.components*r.byteLength;case N_:return n*t/r.components*r.byteLength;case au:return n*t*2/r.components*r.byteLength;case L_:return n*t*2/r.components*r.byteLength;case V2:return n*t*3/r.components*r.byteLength;case co:return n*t*4/r.components*r.byteLength;case V_:return n*t*4/r.components*r.byteLength;case Vf:case Uf:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case Bf:case zf:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case B_:case H_:return Math.max(n,16)*Math.max(t,8)/4;case U_:case z_:return Math.max(n,8)*Math.max(t,8)/2;case j_:case W_:case $_:case Y_:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case G_:case q_:case X_:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case Z_:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case J_:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case K_:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case Q_:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case ev:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case tv:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case nv:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case iv:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case rv:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case ov:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case sv:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case av:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case lv:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case uv:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case cv:case dv:case fv:return Math.ceil(n/4)*Math.ceil(t/4)*16;case hv:case pv:return Math.ceil(n/4)*Math.ceil(t/4)*8;case mv:case gv:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function XV(n){switch(n){case wr:case R2:return{byteLength:1,components:1};case nd:case k2:case hs:return{byteLength:2,components:1};case k_:case F_:return{byteLength:2,components:4};case zo:case R_:case Ho:return{byteLength:4,components:1};case F2:case N2:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:b_}}));typeof window<"u"&&(window.__THREE__?vt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=b_);function TT(){let n=null,t=!1,e=null,i=null;function r(o,s){e(o,s),i=n.requestAnimationFrame(r)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(r),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){n=o}}}function ZV(n){let t=new WeakMap;function e(u,d){let p=u.array,_=u.usage,m=p.byteLength,y=n.createBuffer();n.bindBuffer(d,y),n.bufferData(d,p,_),u.onUploadCallback();let b;if(p instanceof Float32Array)b=n.FLOAT;else if(typeof Float16Array<"u"&&p instanceof Float16Array)b=n.HALF_FLOAT;else if(p instanceof Uint16Array)u.isFloat16BufferAttribute?b=n.HALF_FLOAT:b=n.UNSIGNED_SHORT;else if(p instanceof Int16Array)b=n.SHORT;else if(p instanceof Uint32Array)b=n.UNSIGNED_INT;else if(p instanceof Int32Array)b=n.INT;else if(p instanceof Int8Array)b=n.BYTE;else if(p instanceof Uint8Array)b=n.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)b=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:y,type:b,bytesPerElement:p.BYTES_PER_ELEMENT,version:u.version,size:m}}function i(u,d,p){let _=d.array,m=d.updateRanges;if(n.bindBuffer(p,u),m.length===0)n.bufferSubData(p,0,_);else{m.sort((b,M)=>b.start-M.start);let y=0;for(let b=1;b<m.length;b++){let M=m[y],O=m[b];O.start<=M.start+M.count+1?M.count=Math.max(M.count,O.start+O.count-M.start):(++y,m[y]=O)}m.length=y+1;for(let b=0,M=m.length;b<M;b++){let O=m[b];n.bufferSubData(p,O.start*_.BYTES_PER_ELEMENT,_,O.start,O.count)}d.clearUpdateRanges()}d.onUploadCallback()}function r(u){return u.isInterleavedBufferAttribute&&(u=u.data),t.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);let d=t.get(u);d&&(n.deleteBuffer(d.buffer),t.delete(u))}function s(u,d){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){let _=t.get(u);(!_||_.version<u.version)&&t.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}let p=t.get(u);if(p===void 0)t.set(u,e(u,d));else if(p.version<u.version){if(p.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(p.buffer,u,d),p.version=u.version}}return{get:r,remove:o,update:s}}var JV=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,KV=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,QV=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,eU=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tU=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,nU=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,iU=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,rU=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,oU=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,sU=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,aU=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,lU=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,uU=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,cU=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,dU=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,fU=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,hU=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,pU=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,mU=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,gU=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,_U=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,vU=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,xU=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,yU=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,bU=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,CU=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,wU=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,MU=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,SU=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,EU=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,AU="gl_FragColor = linearToOutputTexel( gl_FragColor );",TU=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,DU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,PU=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,IU=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,OU=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,RU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,kU=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,FU=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,NU=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,LU=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,VU=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,UU=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,BU=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,zU=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,HU=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,jU=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,WU=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,GU=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,$U=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,YU=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,qU=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,XU=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,ZU=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,JU=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,KU=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,QU=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,e9=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,t9=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,n9=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,i9=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,r9=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,o9=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,s9=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,a9=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,l9=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,u9=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,c9=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,d9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,f9=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,h9=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,p9=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,m9=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,g9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,_9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,v9=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,x9=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,y9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,b9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,C9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,w9=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,M9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,S9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,E9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,A9=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,T9=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,D9=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,P9=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,I9=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,O9=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,R9=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,k9=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,F9=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,N9=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,L9=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,V9=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,U9=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,B9=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,z9=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,H9=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,j9=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,W9=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,G9=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,$9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Y9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,q9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,X9=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Z9=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,J9=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,K9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Q9=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,eB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tB=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,iB=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,rB=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,oB=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,sB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,aB=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lB=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uB=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,dB=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fB=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hB=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pB=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,mB=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gB=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,_B=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vB=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xB=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yB=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,bB=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CB=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wB=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MB=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,SB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,EB=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AB=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,TB=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,DB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Wt={alphahash_fragment:JV,alphahash_pars_fragment:KV,alphamap_fragment:QV,alphamap_pars_fragment:eU,alphatest_fragment:tU,alphatest_pars_fragment:nU,aomap_fragment:iU,aomap_pars_fragment:rU,batching_pars_vertex:oU,batching_vertex:sU,begin_vertex:aU,beginnormal_vertex:lU,bsdfs:uU,iridescence_fragment:cU,bumpmap_pars_fragment:dU,clipping_planes_fragment:fU,clipping_planes_pars_fragment:hU,clipping_planes_pars_vertex:pU,clipping_planes_vertex:mU,color_fragment:gU,color_pars_fragment:_U,color_pars_vertex:vU,color_vertex:xU,common:yU,cube_uv_reflection_fragment:bU,defaultnormal_vertex:CU,displacementmap_pars_vertex:wU,displacementmap_vertex:MU,emissivemap_fragment:SU,emissivemap_pars_fragment:EU,colorspace_fragment:AU,colorspace_pars_fragment:TU,envmap_fragment:DU,envmap_common_pars_fragment:PU,envmap_pars_fragment:IU,envmap_pars_vertex:OU,envmap_physical_pars_fragment:jU,envmap_vertex:RU,fog_vertex:kU,fog_pars_vertex:FU,fog_fragment:NU,fog_pars_fragment:LU,gradientmap_pars_fragment:VU,lightmap_pars_fragment:UU,lights_lambert_fragment:BU,lights_lambert_pars_fragment:zU,lights_pars_begin:HU,lights_toon_fragment:WU,lights_toon_pars_fragment:GU,lights_phong_fragment:$U,lights_phong_pars_fragment:YU,lights_physical_fragment:qU,lights_physical_pars_fragment:XU,lights_fragment_begin:ZU,lights_fragment_maps:JU,lights_fragment_end:KU,logdepthbuf_fragment:QU,logdepthbuf_pars_fragment:e9,logdepthbuf_pars_vertex:t9,logdepthbuf_vertex:n9,map_fragment:i9,map_pars_fragment:r9,map_particle_fragment:o9,map_particle_pars_fragment:s9,metalnessmap_fragment:a9,metalnessmap_pars_fragment:l9,morphinstance_vertex:u9,morphcolor_vertex:c9,morphnormal_vertex:d9,morphtarget_pars_vertex:f9,morphtarget_vertex:h9,normal_fragment_begin:p9,normal_fragment_maps:m9,normal_pars_fragment:g9,normal_pars_vertex:_9,normal_vertex:v9,normalmap_pars_fragment:x9,clearcoat_normal_fragment_begin:y9,clearcoat_normal_fragment_maps:b9,clearcoat_pars_fragment:C9,iridescence_pars_fragment:w9,opaque_fragment:M9,packing:S9,premultiplied_alpha_fragment:E9,project_vertex:A9,dithering_fragment:T9,dithering_pars_fragment:D9,roughnessmap_fragment:P9,roughnessmap_pars_fragment:I9,shadowmap_pars_fragment:O9,shadowmap_pars_vertex:R9,shadowmap_vertex:k9,shadowmask_pars_fragment:F9,skinbase_vertex:N9,skinning_pars_vertex:L9,skinning_vertex:V9,skinnormal_vertex:U9,specularmap_fragment:B9,specularmap_pars_fragment:z9,tonemapping_fragment:H9,tonemapping_pars_fragment:j9,transmission_fragment:W9,transmission_pars_fragment:G9,uv_pars_fragment:$9,uv_pars_vertex:Y9,uv_vertex:q9,worldpos_vertex:X9,background_vert:Z9,background_frag:J9,backgroundCube_vert:K9,backgroundCube_frag:Q9,cube_vert:eB,cube_frag:tB,depth_vert:nB,depth_frag:iB,distance_vert:rB,distance_frag:oB,equirect_vert:sB,equirect_frag:aB,linedashed_vert:lB,linedashed_frag:uB,meshbasic_vert:cB,meshbasic_frag:dB,meshlambert_vert:fB,meshlambert_frag:hB,meshmatcap_vert:pB,meshmatcap_frag:mB,meshnormal_vert:gB,meshnormal_frag:_B,meshphong_vert:vB,meshphong_frag:xB,meshphysical_vert:yB,meshphysical_frag:bB,meshtoon_vert:CB,meshtoon_frag:wB,points_vert:MB,points_frag:SB,shadow_vert:EB,shadow_frag:AB,sprite_vert:TB,sprite_frag:DB},Ze={common:{diffuse:{value:new jt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new kt},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new kt}},envmap:{envMap:{value:null},envMapRotation:{value:new kt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new kt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new kt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new kt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new kt},normalScale:{value:new Et(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new kt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new kt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new kt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new kt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new jt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new jt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0},uvTransform:{value:new kt}},sprite:{diffuse:{value:new jt(16777215)},opacity:{value:1},center:{value:new Et(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new kt},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0}}},ms={basic:{uniforms:Yi([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.fog]),vertexShader:Wt.meshbasic_vert,fragmentShader:Wt.meshbasic_frag},lambert:{uniforms:Yi([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,Ze.lights,{emissive:{value:new jt(0)}}]),vertexShader:Wt.meshlambert_vert,fragmentShader:Wt.meshlambert_frag},phong:{uniforms:Yi([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,Ze.lights,{emissive:{value:new jt(0)},specular:{value:new jt(1118481)},shininess:{value:30}}]),vertexShader:Wt.meshphong_vert,fragmentShader:Wt.meshphong_frag},standard:{uniforms:Yi([Ze.common,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.roughnessmap,Ze.metalnessmap,Ze.fog,Ze.lights,{emissive:{value:new jt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wt.meshphysical_vert,fragmentShader:Wt.meshphysical_frag},toon:{uniforms:Yi([Ze.common,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.gradientmap,Ze.fog,Ze.lights,{emissive:{value:new jt(0)}}]),vertexShader:Wt.meshtoon_vert,fragmentShader:Wt.meshtoon_frag},matcap:{uniforms:Yi([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,{matcap:{value:null}}]),vertexShader:Wt.meshmatcap_vert,fragmentShader:Wt.meshmatcap_frag},points:{uniforms:Yi([Ze.points,Ze.fog]),vertexShader:Wt.points_vert,fragmentShader:Wt.points_frag},dashed:{uniforms:Yi([Ze.common,Ze.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wt.linedashed_vert,fragmentShader:Wt.linedashed_frag},depth:{uniforms:Yi([Ze.common,Ze.displacementmap]),vertexShader:Wt.depth_vert,fragmentShader:Wt.depth_frag},normal:{uniforms:Yi([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,{opacity:{value:1}}]),vertexShader:Wt.meshnormal_vert,fragmentShader:Wt.meshnormal_frag},sprite:{uniforms:Yi([Ze.sprite,Ze.fog]),vertexShader:Wt.sprite_vert,fragmentShader:Wt.sprite_frag},background:{uniforms:{uvTransform:{value:new kt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Wt.background_vert,fragmentShader:Wt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new kt}},vertexShader:Wt.backgroundCube_vert,fragmentShader:Wt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Wt.cube_vert,fragmentShader:Wt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wt.equirect_vert,fragmentShader:Wt.equirect_frag},distance:{uniforms:Yi([Ze.common,Ze.displacementmap,{referencePosition:{value:new se},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wt.distance_vert,fragmentShader:Wt.distance_frag},shadow:{uniforms:Yi([Ze.lights,Ze.fog,{color:{value:new jt(0)},opacity:{value:1}}]),vertexShader:Wt.shadow_vert,fragmentShader:Wt.shadow_frag}};ms.physical={uniforms:Yi([ms.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new kt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new kt},clearcoatNormalScale:{value:new Et(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new kt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new kt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new kt},sheen:{value:0},sheenColor:{value:new jt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new kt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new kt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new kt},transmissionSamplerSize:{value:new Et},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new kt},attenuationDistance:{value:0},attenuationColor:{value:new jt(0)},specularColor:{value:new jt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new kt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new kt},anisotropyVector:{value:new Et},anisotropyMap:{value:null},anisotropyMapTransform:{value:new kt}}]),vertexShader:Wt.meshphysical_vert,fragmentShader:Wt.meshphysical_frag};var xv={r:0,b:0,g:0},uu=new za,PB=new Qn;function IB(n,t,e,i,r,o,s){let u=new jt(0),d=o===!0?0:1,p,_,m=null,y=0,b=null;function M(H){let W=H.isScene===!0?H.background:null;return W&&W.isTexture&&(W=(H.backgroundBlurriness>0?e:t).get(W)),W}function O(H){let W=!1,G=M(H);G===null?w(u,d):G&&G.isColor&&(w(G,1),W=!0);let Y=n.xr.getEnvironmentBlendMode();Y==="additive"?i.buffers.color.setClear(0,0,0,1,s):Y==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||W)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function E(H,W){let G=M(W);G&&(G.isCubeTexture||G.mapping===Nf)?(_===void 0&&(_=new sn(new li(1,1,1),new jr({name:"BackgroundCubeMaterial",uniforms:lu(ms.backgroundCube.uniforms),vertexShader:ms.backgroundCube.vertexShader,fragmentShader:ms.backgroundCube.fragmentShader,side:nr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),_.geometry.deleteAttribute("normal"),_.geometry.deleteAttribute("uv"),_.onBeforeRender=function(Y,q,re){this.matrixWorld.copyPosition(re.matrixWorld)},Object.defineProperty(_.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(_)),uu.copy(W.backgroundRotation),uu.x*=-1,uu.y*=-1,uu.z*=-1,G.isCubeTexture&&G.isRenderTargetTexture===!1&&(uu.y*=-1,uu.z*=-1),_.material.uniforms.envMap.value=G,_.material.uniforms.flipEnvMap.value=G.isCubeTexture&&G.isRenderTargetTexture===!1?-1:1,_.material.uniforms.backgroundBlurriness.value=W.backgroundBlurriness,_.material.uniforms.backgroundIntensity.value=W.backgroundIntensity,_.material.uniforms.backgroundRotation.value.setFromMatrix4(PB.makeRotationFromEuler(uu)),_.material.toneMapped=un.getTransfer(G.colorSpace)!==wn,(m!==G||y!==G.version||b!==n.toneMapping)&&(_.material.needsUpdate=!0,m=G,y=G.version,b=n.toneMapping),_.layers.enableAll(),H.unshift(_,_.geometry,_.material,0,0,null)):G&&G.isTexture&&(p===void 0&&(p=new sn(new ds(2,2),new jr({name:"BackgroundMaterial",uniforms:lu(ms.background.uniforms),vertexShader:ms.background.vertexShader,fragmentShader:ms.background.fragmentShader,side:Xs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(p)),p.material.uniforms.t2D.value=G,p.material.uniforms.backgroundIntensity.value=W.backgroundIntensity,p.material.toneMapped=un.getTransfer(G.colorSpace)!==wn,G.matrixAutoUpdate===!0&&G.updateMatrix(),p.material.uniforms.uvTransform.value.copy(G.matrix),(m!==G||y!==G.version||b!==n.toneMapping)&&(p.material.needsUpdate=!0,m=G,y=G.version,b=n.toneMapping),p.layers.enableAll(),H.unshift(p,p.geometry,p.material,0,0,null))}function w(H,W){H.getRGB(xv,$2(n)),i.buffers.color.setClear(xv.r,xv.g,xv.b,W,s)}function j(){_!==void 0&&(_.geometry.dispose(),_.material.dispose(),_=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return u},setClearColor:function(H,W=1){u.set(H),d=W,w(u,d)},getClearAlpha:function(){return d},setClearAlpha:function(H){d=H,w(u,d)},render:O,addToRenderList:E,dispose:j}}function OB(n,t){let e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=y(null),o=r,s=!1;function u(B,X,ie,ue,ve){let _e=!1,me=m(ue,ie,X);o!==me&&(o=me,p(o.object)),_e=b(B,ue,ie,ve),_e&&M(B,ue,ie,ve),ve!==null&&t.update(ve,n.ELEMENT_ARRAY_BUFFER),(_e||s)&&(s=!1,W(B,X,ie,ue),ve!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(ve).buffer))}function d(){return n.createVertexArray()}function p(B){return n.bindVertexArray(B)}function _(B){return n.deleteVertexArray(B)}function m(B,X,ie){let ue=ie.wireframe===!0,ve=i[B.id];ve===void 0&&(ve={},i[B.id]=ve);let _e=ve[X.id];_e===void 0&&(_e={},ve[X.id]=_e);let me=_e[ue];return me===void 0&&(me=y(d()),_e[ue]=me),me}function y(B){let X=[],ie=[],ue=[];for(let ve=0;ve<e;ve++)X[ve]=0,ie[ve]=0,ue[ve]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:ie,attributeDivisors:ue,object:B,attributes:{},index:null}}function b(B,X,ie,ue){let ve=o.attributes,_e=X.attributes,me=0,he=ie.getAttributes();for(let we in he)if(he[we].location>=0){let Ne=ve[we],Ye=_e[we];if(Ye===void 0&&(we==="instanceMatrix"&&B.instanceMatrix&&(Ye=B.instanceMatrix),we==="instanceColor"&&B.instanceColor&&(Ye=B.instanceColor)),Ne===void 0||Ne.attribute!==Ye||Ye&&Ne.data!==Ye.data)return!0;me++}return o.attributesNum!==me||o.index!==ue}function M(B,X,ie,ue){let ve={},_e=X.attributes,me=0,he=ie.getAttributes();for(let we in he)if(he[we].location>=0){let Ne=_e[we];Ne===void 0&&(we==="instanceMatrix"&&B.instanceMatrix&&(Ne=B.instanceMatrix),we==="instanceColor"&&B.instanceColor&&(Ne=B.instanceColor));let Ye={};Ye.attribute=Ne,Ne&&Ne.data&&(Ye.data=Ne.data),ve[we]=Ye,me++}o.attributes=ve,o.attributesNum=me,o.index=ue}function O(){let B=o.newAttributes;for(let X=0,ie=B.length;X<ie;X++)B[X]=0}function E(B){w(B,0)}function w(B,X){let ie=o.newAttributes,ue=o.enabledAttributes,ve=o.attributeDivisors;ie[B]=1,ue[B]===0&&(n.enableVertexAttribArray(B),ue[B]=1),ve[B]!==X&&(n.vertexAttribDivisor(B,X),ve[B]=X)}function j(){let B=o.newAttributes,X=o.enabledAttributes;for(let ie=0,ue=X.length;ie<ue;ie++)X[ie]!==B[ie]&&(n.disableVertexAttribArray(ie),X[ie]=0)}function H(B,X,ie,ue,ve,_e,me){me===!0?n.vertexAttribIPointer(B,X,ie,ve,_e):n.vertexAttribPointer(B,X,ie,ue,ve,_e)}function W(B,X,ie,ue){O();let ve=ue.attributes,_e=ie.getAttributes(),me=X.defaultAttributeValues;for(let he in _e){let we=_e[he];if(we.location>=0){let $e=ve[he];if($e===void 0&&(he==="instanceMatrix"&&B.instanceMatrix&&($e=B.instanceMatrix),he==="instanceColor"&&B.instanceColor&&($e=B.instanceColor)),$e!==void 0){let Ne=$e.normalized,Ye=$e.itemSize,_t=t.get($e);if(_t===void 0)continue;let Pe=_t.buffer,pn=_t.type,cn=_t.bytesPerElement,Ce=pn===n.INT||pn===n.UNSIGNED_INT||$e.gpuType===R_;if($e.isInterleavedBufferAttribute){let Ae=$e.data,et=Ae.stride,wt=$e.offset;if(Ae.isInstancedInterleavedBuffer){for(let lt=0;lt<we.locationSize;lt++)w(we.location+lt,Ae.meshPerAttribute);B.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=Ae.meshPerAttribute*Ae.count)}else for(let lt=0;lt<we.locationSize;lt++)E(we.location+lt);n.bindBuffer(n.ARRAY_BUFFER,Pe);for(let lt=0;lt<we.locationSize;lt++)H(we.location+lt,Ye/we.locationSize,pn,Ne,et*cn,(wt+Ye/we.locationSize*lt)*cn,Ce)}else{if($e.isInstancedBufferAttribute){for(let Ae=0;Ae<we.locationSize;Ae++)w(we.location+Ae,$e.meshPerAttribute);B.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=$e.meshPerAttribute*$e.count)}else for(let Ae=0;Ae<we.locationSize;Ae++)E(we.location+Ae);n.bindBuffer(n.ARRAY_BUFFER,Pe);for(let Ae=0;Ae<we.locationSize;Ae++)H(we.location+Ae,Ye/we.locationSize,pn,Ne,Ye*cn,Ye/we.locationSize*Ae*cn,Ce)}}else if(me!==void 0){let Ne=me[he];if(Ne!==void 0)switch(Ne.length){case 2:n.vertexAttrib2fv(we.location,Ne);break;case 3:n.vertexAttrib3fv(we.location,Ne);break;case 4:n.vertexAttrib4fv(we.location,Ne);break;default:n.vertexAttrib1fv(we.location,Ne)}}}}j()}function G(){re();for(let B in i){let X=i[B];for(let ie in X){let ue=X[ie];for(let ve in ue)_(ue[ve].object),delete ue[ve];delete X[ie]}delete i[B]}}function Y(B){if(i[B.id]===void 0)return;let X=i[B.id];for(let ie in X){let ue=X[ie];for(let ve in ue)_(ue[ve].object),delete ue[ve];delete X[ie]}delete i[B.id]}function q(B){for(let X in i){let ie=i[X];if(ie[B.id]===void 0)continue;let ue=ie[B.id];for(let ve in ue)_(ue[ve].object),delete ue[ve];delete ie[B.id]}}function re(){V(),s=!0,o!==r&&(o=r,p(o.object))}function V(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:u,reset:re,resetDefaultState:V,dispose:G,releaseStatesOfGeometry:Y,releaseStatesOfProgram:q,initAttributes:O,enableAttribute:E,disableUnusedAttributes:j}}function RB(n,t,e){let i;function r(p){i=p}function o(p,_){n.drawArrays(i,p,_),e.update(_,i,1)}function s(p,_,m){m!==0&&(n.drawArraysInstanced(i,p,_,m),e.update(_,i,m))}function u(p,_,m){if(m===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,p,0,_,0,m);let b=0;for(let M=0;M<m;M++)b+=_[M];e.update(b,i,1)}function d(p,_,m,y){if(m===0)return;let b=t.get("WEBGL_multi_draw");if(b===null)for(let M=0;M<p.length;M++)s(p[M],_[M],y[M]);else{b.multiDrawArraysInstancedWEBGL(i,p,0,_,0,y,0,m);let M=0;for(let O=0;O<m;O++)M+=_[O]*y[O];e.update(M,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function kB(n,t,e,i){let r;function o(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let q=t.get("EXT_texture_filter_anisotropic");r=n.getParameter(q.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(q){return!(q!==co&&i.convert(q)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(q){let re=q===hs&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(q!==wr&&i.convert(q)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&q!==Ho&&!re)}function d(q){if(q==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";q="mediump"}return q==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=e.precision!==void 0?e.precision:"highp",_=d(p);_!==p&&(vt("WebGLRenderer:",p,"not supported, using",_,"instead."),p=_);let m=e.logarithmicDepthBuffer===!0,y=e.reversedDepthBuffer===!0&&t.has("EXT_clip_control"),b=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),M=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),O=n.getParameter(n.MAX_TEXTURE_SIZE),E=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),j=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),H=n.getParameter(n.MAX_VARYING_VECTORS),W=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),G=n.getParameter(n.MAX_SAMPLES),Y=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:d,textureFormatReadable:s,textureTypeReadable:u,precision:p,logarithmicDepthBuffer:m,reversedDepthBuffer:y,maxTextures:b,maxVertexTextures:M,maxTextureSize:O,maxCubemapSize:E,maxAttributes:w,maxVertexUniforms:j,maxVaryings:H,maxFragmentUniforms:W,maxSamples:G,samples:Y}}function FB(n){let t=this,e=null,i=0,r=!1,o=!1,s=new ao,u=new kt,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(m,y){let b=m.length!==0||y||i!==0||r;return r=y,i=m.length,b},this.beginShadows=function(){o=!0,_(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(m,y){e=_(m,y,0)},this.setState=function(m,y,b){let M=m.clippingPlanes,O=m.clipIntersection,E=m.clipShadows,w=n.get(m);if(!r||M===null||M.length===0||o&&!E)o?_(null):p();else{let j=o?0:i,H=j*4,W=w.clippingState||null;d.value=W,W=_(M,y,H,b);for(let G=0;G!==H;++G)W[G]=e[G];w.clippingState=W,this.numIntersection=O?this.numPlanes:0,this.numPlanes+=j}};function p(){d.value!==e&&(d.value=e,d.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function _(m,y,b,M){let O=m!==null?m.length:0,E=null;if(O!==0){if(E=d.value,M!==!0||E===null){let w=b+O*4,j=y.matrixWorldInverse;u.getNormalMatrix(j),(E===null||E.length<w)&&(E=new Float32Array(w));for(let H=0,W=b;H!==O;++H,W+=4)s.copy(m[H]).applyMatrix4(j,u),s.normal.toArray(E,W),E[W+3]=s.constant}d.value=E,d.needsUpdate=!0}return t.numPlanes=O,t.numIntersection=0,E}}function NB(n){let t=new WeakMap;function e(s,u){return u===P_?s.mapping=qa:u===I_&&(s.mapping=su),s}function i(s){if(s&&s.isTexture){let u=s.mapping;if(u===P_||u===I_)if(t.has(s)){let d=t.get(s).texture;return e(d,s.mapping)}else{let d=s.image;if(d&&d.height>0){let p=new wf(d.height);return p.fromEquirectangularTexture(n,s),t.set(s,p),s.addEventListener("dispose",r),e(p.texture,s.mapping)}else return null}}return s}function r(s){let u=s.target;u.removeEventListener("dispose",r);let d=t.get(u);d!==void 0&&(t.delete(u),d.dispose())}function o(){t=new WeakMap}return{get:i,dispose:o}}var Ja=4,sT=[.125,.215,.35,.446,.526,.582],du=20,LB=256,Hf=new Qc,aT=new jt,J2=null,K2=0,Q2=0,eC=!1,VB=new se,bv=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(t,e=0,i=.1,r=100,o={}){let{size:s=256,position:u=VB}=o;J2=this._renderer.getRenderTarget(),K2=this._renderer.getActiveCubeFace(),Q2=this._renderer.getActiveMipmapLevel(),eC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);let d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(t,i,r,d,u),e>0&&this._blur(d,0,0,e),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=cT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=uT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodMeshes.length;t++)this._lodMeshes[t].geometry.dispose()}_cleanup(t){this._renderer.setRenderTarget(J2,K2,Q2),this._renderer.xr.enabled=eC,t.scissorTest=!1,od(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===qa||t.mapping===su?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),J2=this._renderer.getRenderTarget(),K2=this._renderer.getActiveCubeFace(),Q2=this._renderer.getActiveMipmapLevel(),eC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:Li,minFilter:Li,generateMipmaps:!1,type:hs,format:co,colorSpace:nu,depthBuffer:!1},r=lT(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=lT(t,e,i);let{_lodMax:o}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=UB(o)),this._blurMaterial=zB(o,t,e),this._ggxMaterial=BB(o,t,e)}return r}_compileMaterial(t){let e=new sn(new Cr,t);this._renderer.compile(e,Hf)}_sceneToCubeUV(t,e,i,r,o){let d=new $i(90,1,e,i),p=[1,-1,1,1,1,1],_=[1,1,1,-1,-1,-1],m=this._renderer,y=m.autoClear,b=m.toneMapping;m.getClearColor(aT),m.toneMapping=Bo,m.autoClear=!1,m.state.buffers.depth.getReversed()&&(m.setRenderTarget(r),m.clearDepth(),m.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new sn(new li,new Ha({name:"PMREM.Background",side:nr,depthWrite:!1,depthTest:!1})));let O=this._backgroundBox,E=O.material,w=!1,j=t.background;j?j.isColor&&(E.color.copy(j),t.background=null,w=!0):(E.color.copy(aT),w=!0);for(let H=0;H<6;H++){let W=H%3;W===0?(d.up.set(0,p[H],0),d.position.set(o.x,o.y,o.z),d.lookAt(o.x+_[H],o.y,o.z)):W===1?(d.up.set(0,0,p[H]),d.position.set(o.x,o.y,o.z),d.lookAt(o.x,o.y+_[H],o.z)):(d.up.set(0,p[H],0),d.position.set(o.x,o.y,o.z),d.lookAt(o.x,o.y,o.z+_[H]));let G=this._cubeSize;od(r,W*G,H>2?G:0,G,G),m.setRenderTarget(r),w&&m.render(O,d),m.render(t,d)}m.toneMapping=b,m.autoClear=y,t.background=j}_textureToCubeUV(t,e){let i=this._renderer,r=t.mapping===qa||t.mapping===su;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=cT()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=uT());let o=r?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=o;let u=o.uniforms;u.envMap.value=t;let d=this._cubeSize;od(e,0,0,3*d,2*d),i.setRenderTarget(e),i.render(s,Hf)}_applyPMREM(t){let e=this._renderer,i=e.autoClear;e.autoClear=!1;let r=this._lodMeshes.length;for(let o=1;o<r;o++)this._applyGGXFilter(t,o-1,o);e.autoClear=i}_applyGGXFilter(t,e,i){let r=this._renderer,o=this._pingPongRenderTarget,s=this._ggxMaterial,u=this._lodMeshes[i];u.material=s;let d=s.uniforms,p=i/(this._lodMeshes.length-1),_=e/(this._lodMeshes.length-1),m=Math.sqrt(p*p-_*_),y=0+p*1.25,b=m*y,{_lodMax:M}=this,O=this._sizeLods[i],E=3*O*(i>M-Ja?i-M+Ja:0),w=4*(this._cubeSize-O);d.envMap.value=t.texture,d.roughness.value=b,d.mipInt.value=M-e,od(o,E,w,3*O,2*O),r.setRenderTarget(o),r.render(u,Hf),d.envMap.value=o.texture,d.roughness.value=0,d.mipInt.value=M-i,od(t,E,w,3*O,2*O),r.setRenderTarget(t),r.render(u,Hf)}_blur(t,e,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(t,s,e,i,r,"latitudinal",o),this._halfBlur(s,t,i,i,r,"longitudinal",o)}_halfBlur(t,e,i,r,o,s,u){let d=this._renderer,p=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&bt("blur direction must be either latitudinal or longitudinal!");let _=3,m=this._lodMeshes[r];m.material=p;let y=p.uniforms,b=this._sizeLods[i]-1,M=isFinite(o)?Math.PI/(2*b):2*Math.PI/(2*du-1),O=o/M,E=isFinite(o)?1+Math.floor(_*O):du;E>du&&vt(`sigmaRadians, ${o}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${du}`);let w=[],j=0;for(let q=0;q<du;++q){let re=q/O,V=Math.exp(-re*re/2);w.push(V),q===0?j+=V:q<E&&(j+=2*V)}for(let q=0;q<w.length;q++)w[q]=w[q]/j;y.envMap.value=t.texture,y.samples.value=E,y.weights.value=w,y.latitudinal.value=s==="latitudinal",u&&(y.poleAxis.value=u);let{_lodMax:H}=this;y.dTheta.value=M,y.mipInt.value=H-i;let W=this._sizeLods[r],G=3*W*(r>H-Ja?r-H+Ja:0),Y=4*(this._cubeSize-W);od(e,G,Y,3*W,2*W),d.setRenderTarget(e),d.render(m,Hf)}};function UB(n){let t=[],e=[],i=[],r=n,o=n-Ja+1+sT.length;for(let s=0;s<o;s++){let u=Math.pow(2,r);t.push(u);let d=1/u;s>n-Ja?d=sT[s-n+Ja-1]:s===0&&(d=0),e.push(d);let p=1/(u-2),_=-p,m=1+p,y=[_,_,m,_,m,m,_,_,m,m,_,m],b=6,M=6,O=3,E=2,w=1,j=new Float32Array(O*M*b),H=new Float32Array(E*M*b),W=new Float32Array(w*M*b);for(let Y=0;Y<b;Y++){let q=Y%3*2/3-1,re=Y>2?0:-1,V=[q,re,0,q+2/3,re,0,q+2/3,re+1,0,q,re,0,q+2/3,re+1,0,q,re+1,0];j.set(V,O*M*Y),H.set(y,E*M*Y);let B=[Y,Y,Y,Y,Y,Y];W.set(B,w*M*Y)}let G=new Cr;G.setAttribute("position",new zr(j,O)),G.setAttribute("uv",new zr(H,E)),G.setAttribute("faceIndex",new zr(W,w)),i.push(new sn(G,null)),r>Ja&&r--}return{lodMeshes:i,sizeLods:t,sigmas:e}}function lT(n,t,e){let i=new Hr(n,t,e);return i.texture.mapping=Nf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function od(n,t,e,i,r){n.viewport.set(t,e,i,r),n.scissor.set(t,e,i,r)}function BB(n,t,e){return new jr({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:LB,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:wv(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:fs,depthTest:!1,depthWrite:!1})}function zB(n,t,e){let i=new Float32Array(du),r=new se(0,1,0);return new jr({name:"SphericalGaussianBlur",defines:{n:du,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:wv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:fs,depthTest:!1,depthWrite:!1})}function uT(){return new jr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:wv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:fs,depthTest:!1,depthWrite:!1})}function cT(){return new jr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:wv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:fs,depthTest:!1,depthWrite:!1})}function wv(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function HB(n){let t=new WeakMap,e=null;function i(u){if(u&&u.isTexture){let d=u.mapping,p=d===P_||d===I_,_=d===qa||d===su;if(p||_){let m=t.get(u),y=m!==void 0?m.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==y)return e===null&&(e=new bv(n)),m=p?e.fromEquirectangular(u,m):e.fromCubemap(u,m),m.texture.pmremVersion=u.pmremVersion,t.set(u,m),m.texture;if(m!==void 0)return m.texture;{let b=u.image;return p&&b&&b.height>0||_&&b&&r(b)?(e===null&&(e=new bv(n)),m=p?e.fromEquirectangular(u):e.fromCubemap(u),m.texture.pmremVersion=u.pmremVersion,t.set(u,m),u.addEventListener("dispose",o),m.texture):null}}}return u}function r(u){let d=0,p=6;for(let _=0;_<p;_++)u[_]!==void 0&&d++;return d===p}function o(u){let d=u.target;d.removeEventListener("dispose",o);let p=t.get(d);p!==void 0&&(t.delete(d),p.dispose())}function s(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:s}}function jB(n){let t={};function e(i){if(t[i]!==void 0)return t[i];let r=n.getExtension(i);return t[i]=r,r}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){let r=e(i);return r===null&&$c("WebGLRenderer: "+i+" extension not supported."),r}}}function WB(n,t,e,i){let r={},o=new WeakMap;function s(m){let y=m.target;y.index!==null&&t.remove(y.index);for(let M in y.attributes)t.remove(y.attributes[M]);y.removeEventListener("dispose",s),delete r[y.id];let b=o.get(y);b&&(t.remove(b),o.delete(y)),i.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,e.memory.geometries--}function u(m,y){return r[y.id]===!0||(y.addEventListener("dispose",s),r[y.id]=!0,e.memory.geometries++),y}function d(m){let y=m.attributes;for(let b in y)t.update(y[b],n.ARRAY_BUFFER)}function p(m){let y=[],b=m.index,M=m.attributes.position,O=0;if(b!==null){let j=b.array;O=b.version;for(let H=0,W=j.length;H<W;H+=3){let G=j[H+0],Y=j[H+1],q=j[H+2];y.push(G,Y,Y,q,q,G)}}else if(M!==void 0){let j=M.array;O=M.version;for(let H=0,W=j.length/3-1;H<W;H+=3){let G=H+0,Y=H+1,q=H+2;y.push(G,Y,Y,q,q,G)}}else return;let E=new(H2(y)?yf:xf)(y,1);E.version=O;let w=o.get(m);w&&t.remove(w),o.set(m,E)}function _(m){let y=o.get(m);if(y){let b=m.index;b!==null&&y.version<b.version&&p(m)}else p(m);return o.get(m)}return{get:u,update:d,getWireframeAttribute:_}}function GB(n,t,e){let i;function r(y){i=y}let o,s;function u(y){o=y.type,s=y.bytesPerElement}function d(y,b){n.drawElements(i,b,o,y*s),e.update(b,i,1)}function p(y,b,M){M!==0&&(n.drawElementsInstanced(i,b,o,y*s,M),e.update(b,i,M))}function _(y,b,M){if(M===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,b,0,o,y,0,M);let E=0;for(let w=0;w<M;w++)E+=b[w];e.update(E,i,1)}function m(y,b,M,O){if(M===0)return;let E=t.get("WEBGL_multi_draw");if(E===null)for(let w=0;w<y.length;w++)p(y[w]/s,b[w],O[w]);else{E.multiDrawElementsInstancedWEBGL(i,b,0,o,y,0,O,0,M);let w=0;for(let j=0;j<M;j++)w+=b[j]*O[j];e.update(w,i,1)}}this.setMode=r,this.setIndex=u,this.render=d,this.renderInstances=p,this.renderMultiDraw=_,this.renderMultiDrawInstances=m}function $B(n){let t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,u){switch(e.calls++,s){case n.TRIANGLES:e.triangles+=u*(o/3);break;case n.LINES:e.lines+=u*(o/2);break;case n.LINE_STRIP:e.lines+=u*(o-1);break;case n.LINE_LOOP:e.lines+=u*o;break;case n.POINTS:e.points+=u*o;break;default:bt("WebGLInfo: Unknown draw mode:",s);break}}function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:r,update:i}}function YB(n,t,e){let i=new WeakMap,r=new ei;function o(s,u,d){let p=s.morphTargetInfluences,_=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=_!==void 0?_.length:0,y=i.get(u);if(y===void 0||y.count!==m){let B=function(){re.dispose(),i.delete(u),u.removeEventListener("dispose",B)};var b=B;y!==void 0&&y.texture.dispose();let M=u.morphAttributes.position!==void 0,O=u.morphAttributes.normal!==void 0,E=u.morphAttributes.color!==void 0,w=u.morphAttributes.position||[],j=u.morphAttributes.normal||[],H=u.morphAttributes.color||[],W=0;M===!0&&(W=1),O===!0&&(W=2),E===!0&&(W=3);let G=u.attributes.position.count*W,Y=1;G>t.maxTextureSize&&(Y=Math.ceil(G/t.maxTextureSize),G=t.maxTextureSize);let q=new Float32Array(G*Y*4*m),re=new _f(q,G,Y,m);re.type=Ho,re.needsUpdate=!0;let V=W*4;for(let X=0;X<m;X++){let ie=w[X],ue=j[X],ve=H[X],_e=G*Y*4*X;for(let me=0;me<ie.count;me++){let he=me*V;M===!0&&(r.fromBufferAttribute(ie,me),q[_e+he+0]=r.x,q[_e+he+1]=r.y,q[_e+he+2]=r.z,q[_e+he+3]=0),O===!0&&(r.fromBufferAttribute(ue,me),q[_e+he+4]=r.x,q[_e+he+5]=r.y,q[_e+he+6]=r.z,q[_e+he+7]=0),E===!0&&(r.fromBufferAttribute(ve,me),q[_e+he+8]=r.x,q[_e+he+9]=r.y,q[_e+he+10]=r.z,q[_e+he+11]=ve.itemSize===4?r.w:1)}}y={count:m,texture:re,size:new Et(G,Y)},i.set(u,y),u.addEventListener("dispose",B)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)d.getUniforms().setValue(n,"morphTexture",s.morphTexture,e);else{let M=0;for(let E=0;E<p.length;E++)M+=p[E];let O=u.morphTargetsRelative?1:1-M;d.getUniforms().setValue(n,"morphTargetBaseInfluence",O),d.getUniforms().setValue(n,"morphTargetInfluences",p)}d.getUniforms().setValue(n,"morphTargetsTexture",y.texture,e),d.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}return{update:o}}function qB(n,t,e,i){let r=new WeakMap;function o(d){let p=i.render.frame,_=d.geometry,m=t.get(d,_);if(r.get(m)!==p&&(t.update(m),r.set(m,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",u)===!1&&d.addEventListener("dispose",u),r.get(d)!==p&&(e.update(d.instanceMatrix,n.ARRAY_BUFFER),d.instanceColor!==null&&e.update(d.instanceColor,n.ARRAY_BUFFER),r.set(d,p))),d.isSkinnedMesh){let y=d.skeleton;r.get(y)!==p&&(y.update(),r.set(y,p))}return m}function s(){r=new WeakMap}function u(d){let p=d.target;p.removeEventListener("dispose",u),e.remove(p.instanceMatrix),p.instanceColor!==null&&e.remove(p.instanceColor)}return{update:o,dispose:s}}var XB={[E2]:"LINEAR_TONE_MAPPING",[A2]:"REINHARD_TONE_MAPPING",[T2]:"CINEON_TONE_MAPPING",[D2]:"ACES_FILMIC_TONE_MAPPING",[I2]:"AGX_TONE_MAPPING",[O2]:"NEUTRAL_TONE_MAPPING",[P2]:"CUSTOM_TONE_MAPPING"};function ZB(n,t,e,i,r){let o=new Hr(t,e,{type:n,depthBuffer:i,stencilBuffer:r}),s=new Hr(t,e,{type:hs,depthBuffer:!1,stencilBuffer:!1}),u=new Cr;u.setAttribute("position",new ai([-1,3,0,-1,-1,0,3,-1,0],3)),u.setAttribute("uv",new ai([0,2,0,0,2,0],2));let d=new l_({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),p=new sn(u,d),_=new Qc(-1,1,1,-1,0,1),m=null,y=null,b=!1,M,O=null,E=[],w=!1;this.setSize=function(j,H){o.setSize(j,H),s.setSize(j,H);for(let W=0;W<E.length;W++){let G=E[W];G.setSize&&G.setSize(j,H)}},this.setEffects=function(j){E=j,w=E.length>0&&E[0].isRenderPass===!0;let H=o.width,W=o.height;for(let G=0;G<E.length;G++){let Y=E[G];Y.setSize&&Y.setSize(H,W)}},this.begin=function(j,H){if(b||j.toneMapping===Bo&&E.length===0)return!1;if(O=H,H!==null){let W=H.width,G=H.height;(o.width!==W||o.height!==G)&&this.setSize(W,G)}return w===!1&&j.setRenderTarget(o),M=j.toneMapping,j.toneMapping=Bo,!0},this.hasRenderPass=function(){return w},this.end=function(j,H){j.toneMapping=M,b=!0;let W=o,G=s;for(let Y=0;Y<E.length;Y++){let q=E[Y];if(q.enabled!==!1&&(q.render(j,G,W,H),q.needsSwap!==!1)){let re=W;W=G,G=re}}if(m!==j.outputColorSpace||y!==j.toneMapping){m=j.outputColorSpace,y=j.toneMapping,d.defines={},un.getTransfer(m)===wn&&(d.defines.SRGB_TRANSFER="");let Y=XB[y];Y&&(d.defines[Y]=""),d.needsUpdate=!0}d.uniforms.tDiffuse.value=W.texture,j.setRenderTarget(O),j.render(p,_),O=null,b=!1},this.isCompositing=function(){return b},this.dispose=function(){o.dispose(),s.dispose(),u.dispose(),d.dispose()}}var DT=new jo,iC=new ja(1,1),PT=new _f,IT=new e_,OT=new Cf,dT=[],fT=[],hT=new Float32Array(16),pT=new Float32Array(9),mT=new Float32Array(4);function ad(n,t,e){let i=n[0];if(i<=0||i>0)return n;let r=t*e,o=dT[r];if(o===void 0&&(o=new Float32Array(r),dT[r]=o),t!==0){i.toArray(o,0);for(let s=1,u=0;s!==t;++s)u+=e,n[s].toArray(o,u)}return o}function Ei(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function Ai(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function Mv(n,t){let e=fT[t];e===void 0&&(e=new Int32Array(t),fT[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function JB(n,t){let e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function KB(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ei(e,t))return;n.uniform2fv(this.addr,t),Ai(e,t)}}function QB(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Ei(e,t))return;n.uniform3fv(this.addr,t),Ai(e,t)}}function ez(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ei(e,t))return;n.uniform4fv(this.addr,t),Ai(e,t)}}function tz(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Ei(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),Ai(e,t)}else{if(Ei(e,i))return;mT.set(i),n.uniformMatrix2fv(this.addr,!1,mT),Ai(e,i)}}function nz(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Ei(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),Ai(e,t)}else{if(Ei(e,i))return;pT.set(i),n.uniformMatrix3fv(this.addr,!1,pT),Ai(e,i)}}function iz(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Ei(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),Ai(e,t)}else{if(Ei(e,i))return;hT.set(i),n.uniformMatrix4fv(this.addr,!1,hT),Ai(e,i)}}function rz(n,t){let e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function oz(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ei(e,t))return;n.uniform2iv(this.addr,t),Ai(e,t)}}function sz(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Ei(e,t))return;n.uniform3iv(this.addr,t),Ai(e,t)}}function az(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ei(e,t))return;n.uniform4iv(this.addr,t),Ai(e,t)}}function lz(n,t){let e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function uz(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ei(e,t))return;n.uniform2uiv(this.addr,t),Ai(e,t)}}function cz(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Ei(e,t))return;n.uniform3uiv(this.addr,t),Ai(e,t)}}function dz(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ei(e,t))return;n.uniform4uiv(this.addr,t),Ai(e,t)}}function fz(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let o;this.type===n.SAMPLER_2D_SHADOW?(iC.compareFunction=e.isReversedDepthBuffer()?vv:_v,o=iC):o=DT,e.setTexture2D(t||o,r)}function hz(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture3D(t||IT,r)}function pz(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTextureCube(t||OT,r)}function mz(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2DArray(t||PT,r)}function gz(n){switch(n){case 5126:return JB;case 35664:return KB;case 35665:return QB;case 35666:return ez;case 35674:return tz;case 35675:return nz;case 35676:return iz;case 5124:case 35670:return rz;case 35667:case 35671:return oz;case 35668:case 35672:return sz;case 35669:case 35673:return az;case 5125:return lz;case 36294:return uz;case 36295:return cz;case 36296:return dz;case 35678:case 36198:case 36298:case 36306:case 35682:return fz;case 35679:case 36299:case 36307:return hz;case 35680:case 36300:case 36308:case 36293:return pz;case 36289:case 36303:case 36311:case 36292:return mz}}function _z(n,t){n.uniform1fv(this.addr,t)}function vz(n,t){let e=ad(t,this.size,2);n.uniform2fv(this.addr,e)}function xz(n,t){let e=ad(t,this.size,3);n.uniform3fv(this.addr,e)}function yz(n,t){let e=ad(t,this.size,4);n.uniform4fv(this.addr,e)}function bz(n,t){let e=ad(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function Cz(n,t){let e=ad(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function wz(n,t){let e=ad(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function Mz(n,t){n.uniform1iv(this.addr,t)}function Sz(n,t){n.uniform2iv(this.addr,t)}function Ez(n,t){n.uniform3iv(this.addr,t)}function Az(n,t){n.uniform4iv(this.addr,t)}function Tz(n,t){n.uniform1uiv(this.addr,t)}function Dz(n,t){n.uniform2uiv(this.addr,t)}function Pz(n,t){n.uniform3uiv(this.addr,t)}function Iz(n,t){n.uniform4uiv(this.addr,t)}function Oz(n,t,e){let i=this.cache,r=t.length,o=Mv(e,r);Ei(i,o)||(n.uniform1iv(this.addr,o),Ai(i,o));let s;this.type===n.SAMPLER_2D_SHADOW?s=iC:s=DT;for(let u=0;u!==r;++u)e.setTexture2D(t[u]||s,o[u])}function Rz(n,t,e){let i=this.cache,r=t.length,o=Mv(e,r);Ei(i,o)||(n.uniform1iv(this.addr,o),Ai(i,o));for(let s=0;s!==r;++s)e.setTexture3D(t[s]||IT,o[s])}function kz(n,t,e){let i=this.cache,r=t.length,o=Mv(e,r);Ei(i,o)||(n.uniform1iv(this.addr,o),Ai(i,o));for(let s=0;s!==r;++s)e.setTextureCube(t[s]||OT,o[s])}function Fz(n,t,e){let i=this.cache,r=t.length,o=Mv(e,r);Ei(i,o)||(n.uniform1iv(this.addr,o),Ai(i,o));for(let s=0;s!==r;++s)e.setTexture2DArray(t[s]||PT,o[s])}function Nz(n){switch(n){case 5126:return _z;case 35664:return vz;case 35665:return xz;case 35666:return yz;case 35674:return bz;case 35675:return Cz;case 35676:return wz;case 5124:case 35670:return Mz;case 35667:case 35671:return Sz;case 35668:case 35672:return Ez;case 35669:case 35673:return Az;case 5125:return Tz;case 36294:return Dz;case 36295:return Pz;case 36296:return Iz;case 35678:case 36198:case 36298:case 36306:case 35682:return Oz;case 35679:case 36299:case 36307:return Rz;case 35680:case 36300:case 36308:case 36293:return kz;case 36289:case 36303:case 36311:case 36292:return Fz}}var rC=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=gz(e.type)}},oC=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=Nz(e.type)}},sC=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let u=r[o];u.setValue(t,e[u.id],i)}}},tC=/(\w+)(\])?(\[|\.)?/g;function gT(n,t){n.seq.push(t),n.map[t.id]=t}function Lz(n,t,e){let i=n.name,r=i.length;for(tC.lastIndex=0;;){let o=tC.exec(i),s=tC.lastIndex,u=o[1],d=o[2]==="]",p=o[3];if(d&&(u=u|0),p===void 0||p==="["&&s+2===r){gT(e,p===void 0?new rC(u,n,t):new oC(u,n,t));break}else{let m=e.map[u];m===void 0&&(m=new sC(u),gT(e,m)),e=m}}}var sd=class{constructor(t,e){this.seq=[],this.map={};let i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){let u=t.getActiveUniform(e,s),d=t.getUniformLocation(e,u.name);Lz(u,d,this)}let r=[],o=[];for(let s of this.seq)s.type===t.SAMPLER_2D_SHADOW||s.type===t.SAMPLER_CUBE_SHADOW||s.type===t.SAMPLER_2D_ARRAY_SHADOW?r.push(s):o.push(s);r.length>0&&(this.seq=r.concat(o))}setValue(t,e,i,r){let o=this.map[e];o!==void 0&&o.setValue(t,i,r)}setOptional(t,e,i){let r=e[i];r!==void 0&&this.setValue(t,i,r)}static upload(t,e,i,r){for(let o=0,s=e.length;o!==s;++o){let u=e[o],d=i[u.id];d.needsUpdate!==!1&&u.setValue(t,d.value,r)}}static seqWithValue(t,e){let i=[];for(let r=0,o=t.length;r!==o;++r){let s=t[r];s.id in e&&i.push(s)}return i}};function _T(n,t,e){let i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}var Vz=37297,Uz=0;function Bz(n,t){let e=n.split(`
`),i=[],r=Math.max(t-6,0),o=Math.min(t+6,e.length);for(let s=r;s<o;s++){let u=s+1;i.push(`${u===t?">":" "} ${u}: ${e[s]}`)}return i.join(`
`)}var vT=new kt;function zz(n){un._getMatrix(vT,un.workingColorSpace,n);let t=`mat3( ${vT.elements.map(e=>e.toFixed(4))} )`;switch(un.getTransfer(n)){case mf:return[t,"LinearTransferOETF"];case wn:return[t,"sRGBTransferOETF"];default:return vt("WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function xT(n,t,e){let i=n.getShaderParameter(t,n.COMPILE_STATUS),o=(n.getShaderInfoLog(t)||"").trim();if(i&&o==="")return"";let s=/ERROR: 0:(\d+)/.exec(o);if(s){let u=parseInt(s[1]);return e.toUpperCase()+`

`+o+`

`+Bz(n.getShaderSource(t),u)}else return o}function Hz(n,t){let e=zz(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}var jz={[E2]:"Linear",[A2]:"Reinhard",[T2]:"Cineon",[D2]:"ACESFilmic",[I2]:"AgX",[O2]:"Neutral",[P2]:"Custom"};function Wz(n,t){let e=jz[t];return e===void 0?(vt("WebGLProgram: Unsupported toneMapping:",t),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}var yv=new se;function Gz(){un.getLuminanceCoefficients(yv);let n=yv.x.toFixed(4),t=yv.y.toFixed(4),e=yv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function $z(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Wf).join(`
`)}function Yz(n){let t=[];for(let e in n){let i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function qz(n,t){let e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=n.getActiveAttrib(t,r),s=o.name,u=1;o.type===n.FLOAT_MAT2&&(u=2),o.type===n.FLOAT_MAT3&&(u=3),o.type===n.FLOAT_MAT4&&(u=4),e[s]={type:o.type,location:n.getAttribLocation(t,s),locationSize:u}}return e}function Wf(n){return n!==""}function yT(n,t){let e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function bT(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Xz=/^[ \t]*#include +<([\w\d./]+)>/gm;function aC(n){return n.replace(Xz,Jz)}var Zz=new Map;function Jz(n,t){let e=Wt[t];if(e===void 0){let i=Zz.get(t);if(i!==void 0)e=Wt[i],vt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return aC(e)}var Kz=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function CT(n){return n.replace(Kz,Qz)}function Qz(n,t,e,i){let r="";for(let o=parseInt(t);o<parseInt(e);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function wT(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}var eH={[Ff]:"SHADOWMAP_TYPE_PCF",[td]:"SHADOWMAP_TYPE_VSM"};function tH(n){return eH[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}var nH={[qa]:"ENVMAP_TYPE_CUBE",[su]:"ENVMAP_TYPE_CUBE",[Nf]:"ENVMAP_TYPE_CUBE_UV"};function iH(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":nH[n.envMapMode]||"ENVMAP_TYPE_CUBE"}var rH={[su]:"ENVMAP_MODE_REFRACTION"};function oH(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":rH[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}var sH={[D_]:"ENVMAP_BLENDING_MULTIPLY",[WA]:"ENVMAP_BLENDING_MIX",[GA]:"ENVMAP_BLENDING_ADD"};function aH(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":sH[n.combine]||"ENVMAP_BLENDING_NONE"}function lH(n){let t=n.envMapCubeUVHeight;if(t===null)return null;let e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function uH(n,t,e,i){let r=n.getContext(),o=e.defines,s=e.vertexShader,u=e.fragmentShader,d=tH(e),p=iH(e),_=oH(e),m=aH(e),y=lH(e),b=$z(e),M=Yz(o),O=r.createProgram(),E,w,j=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(E=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,M].filter(Wf).join(`
`),E.length>0&&(E+=`
`),w=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,M].filter(Wf).join(`
`),w.length>0&&(w+=`
`)):(E=[wT(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,M,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+_:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",e.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Wf).join(`
`),w=[wT(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,M,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.envMap?"#define "+_:"",e.envMap?"#define "+m:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",e.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Bo?"#define TONE_MAPPING":"",e.toneMapping!==Bo?Wt.tonemapping_pars_fragment:"",e.toneMapping!==Bo?Wz("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Wt.colorspace_pars_fragment,Hz("linearToOutputTexel",e.outputColorSpace),Gz(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(Wf).join(`
`)),s=aC(s),s=yT(s,e),s=bT(s,e),u=aC(u),u=yT(u,e),u=bT(u,e),s=CT(s),u=CT(u),e.isRawShaderMaterial!==!0&&(j=`#version 300 es
`,E=[b,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,w=["#define varying in",e.glslVersion===z2?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===z2?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);let H=j+E+s,W=j+w+u,G=_T(r,r.VERTEX_SHADER,H),Y=_T(r,r.FRAGMENT_SHADER,W);r.attachShader(O,G),r.attachShader(O,Y),e.index0AttributeName!==void 0?r.bindAttribLocation(O,0,e.index0AttributeName):e.morphTargets===!0&&r.bindAttribLocation(O,0,"position"),r.linkProgram(O);function q(X){if(n.debug.checkShaderErrors){let ie=r.getProgramInfoLog(O)||"",ue=r.getShaderInfoLog(G)||"",ve=r.getShaderInfoLog(Y)||"",_e=ie.trim(),me=ue.trim(),he=ve.trim(),we=!0,$e=!0;if(r.getProgramParameter(O,r.LINK_STATUS)===!1)if(we=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,O,G,Y);else{let Ne=xT(r,G,"vertex"),Ye=xT(r,Y,"fragment");bt("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(O,r.VALIDATE_STATUS)+`

Material Name: `+X.name+`
Material Type: `+X.type+`

Program Info Log: `+_e+`
`+Ne+`
`+Ye)}else _e!==""?vt("WebGLProgram: Program Info Log:",_e):(me===""||he==="")&&($e=!1);$e&&(X.diagnostics={runnable:we,programLog:_e,vertexShader:{log:me,prefix:E},fragmentShader:{log:he,prefix:w}})}r.deleteShader(G),r.deleteShader(Y),re=new sd(r,O),V=qz(r,O)}let re;this.getUniforms=function(){return re===void 0&&q(this),re};let V;this.getAttributes=function(){return V===void 0&&q(this),V};let B=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return B===!1&&(B=r.getProgramParameter(O,Vz)),B},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(O),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=Uz++,this.cacheKey=t,this.usedTimes=1,this.program=O,this.vertexShader=G,this.fragmentShader=Y,this}var cH=0,lC=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,i=t.fragmentShader,r=this._getShaderStage(e),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(t);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){let e=this.shaderCache,i=e.get(t);return i===void 0&&(i=new uC(t),e.set(t,i)),i}},uC=class{constructor(t){this.id=cH++,this.code=t,this.usedTimes=0}};function dH(n,t,e,i,r,o,s){let u=new vf,d=new lC,p=new Set,_=[],m=new Map,y=r.logarithmicDepthBuffer,b=r.precision,M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function O(V){return p.add(V),V===0?"uv":`uv${V}`}function E(V,B,X,ie,ue){let ve=ie.fog,_e=ue.geometry,me=V.isMeshStandardMaterial?ie.environment:null,he=(V.isMeshStandardMaterial?e:t).get(V.envMap||me),we=he&&he.mapping===Nf?he.image.height:null,$e=M[V.type];V.precision!==null&&(b=r.getMaxPrecision(V.precision),b!==V.precision&&vt("WebGLProgram.getParameters:",V.precision,"not supported, using",b,"instead."));let Ne=_e.morphAttributes.position||_e.morphAttributes.normal||_e.morphAttributes.color,Ye=Ne!==void 0?Ne.length:0,_t=0;_e.morphAttributes.position!==void 0&&(_t=1),_e.morphAttributes.normal!==void 0&&(_t=2),_e.morphAttributes.color!==void 0&&(_t=3);let Pe,pn,cn,Ce;if($e){let nt=ms[$e];Pe=nt.vertexShader,pn=nt.fragmentShader}else Pe=V.vertexShader,pn=V.fragmentShader,d.update(V),cn=d.getVertexShaderID(V),Ce=d.getFragmentShaderID(V);let Ae=n.getRenderTarget(),et=n.state.buffers.depth.getReversed(),wt=ue.isInstancedMesh===!0,lt=ue.isBatchedMesh===!0,qt=!!V.map,Bn=!!V.matcap,Zt=!!he,Mt=!!V.aoMap,Gt=!!V.lightMap,Dt=!!V.bumpMap,Qt=!!V.normalMap,J=!!V.displacementMap,en=!!V.emissiveMap,Jt=!!V.metalnessMap,dt=!!V.roughnessMap,Je=V.anisotropy>0,z=V.clearcoat>0,I=V.dispersion>0,Q=V.iridescence>0,pe=V.sheen>0,Me=V.transmission>0,ce=Je&&!!V.anisotropyMap,ot=z&&!!V.clearcoatMap,Oe=z&&!!V.clearcoatNormalMap,st=z&&!!V.clearcoatRoughnessMap,mt=Q&&!!V.iridescenceMap,De=Q&&!!V.iridescenceThicknessMap,Be=pe&&!!V.sheenColorMap,Ke=pe&&!!V.sheenRoughnessMap,ut=!!V.specularMap,He=!!V.specularColorMap,Pt=!!V.specularIntensityMap,ee=Me&&!!V.transmissionMap,ze=Me&&!!V.thicknessMap,ke=!!V.gradientMap,Xe=!!V.alphaMap,le=V.alphaTest>0,Ee=!!V.alphaHash,We=!!V.extensions,ht=Bo;V.toneMapped&&(Ae===null||Ae.isXRRenderTarget===!0)&&(ht=n.toneMapping);let Ft={shaderID:$e,shaderType:V.type,shaderName:V.name,vertexShader:Pe,fragmentShader:pn,defines:V.defines,customVertexShaderID:cn,customFragmentShaderID:Ce,isRawShaderMaterial:V.isRawShaderMaterial===!0,glslVersion:V.glslVersion,precision:b,batching:lt,batchingColor:lt&&ue._colorsTexture!==null,instancing:wt,instancingColor:wt&&ue.instanceColor!==null,instancingMorph:wt&&ue.morphTexture!==null,outputColorSpace:Ae===null?n.outputColorSpace:Ae.isXRRenderTarget===!0?Ae.texture.colorSpace:nu,alphaToCoverage:!!V.alphaToCoverage,map:qt,matcap:Bn,envMap:Zt,envMapMode:Zt&&he.mapping,envMapCubeUVHeight:we,aoMap:Mt,lightMap:Gt,bumpMap:Dt,normalMap:Qt,displacementMap:J,emissiveMap:en,normalMapObjectSpace:Qt&&V.normalMapType===qA,normalMapTangentSpace:Qt&&V.normalMapType===B2,metalnessMap:Jt,roughnessMap:dt,anisotropy:Je,anisotropyMap:ce,clearcoat:z,clearcoatMap:ot,clearcoatNormalMap:Oe,clearcoatRoughnessMap:st,dispersion:I,iridescence:Q,iridescenceMap:mt,iridescenceThicknessMap:De,sheen:pe,sheenColorMap:Be,sheenRoughnessMap:Ke,specularMap:ut,specularColorMap:He,specularIntensityMap:Pt,transmission:Me,transmissionMap:ee,thicknessMap:ze,gradientMap:ke,opaque:V.transparent===!1&&V.blending===Ql&&V.alphaToCoverage===!1,alphaMap:Xe,alphaTest:le,alphaHash:Ee,combine:V.combine,mapUv:qt&&O(V.map.channel),aoMapUv:Mt&&O(V.aoMap.channel),lightMapUv:Gt&&O(V.lightMap.channel),bumpMapUv:Dt&&O(V.bumpMap.channel),normalMapUv:Qt&&O(V.normalMap.channel),displacementMapUv:J&&O(V.displacementMap.channel),emissiveMapUv:en&&O(V.emissiveMap.channel),metalnessMapUv:Jt&&O(V.metalnessMap.channel),roughnessMapUv:dt&&O(V.roughnessMap.channel),anisotropyMapUv:ce&&O(V.anisotropyMap.channel),clearcoatMapUv:ot&&O(V.clearcoatMap.channel),clearcoatNormalMapUv:Oe&&O(V.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:st&&O(V.clearcoatRoughnessMap.channel),iridescenceMapUv:mt&&O(V.iridescenceMap.channel),iridescenceThicknessMapUv:De&&O(V.iridescenceThicknessMap.channel),sheenColorMapUv:Be&&O(V.sheenColorMap.channel),sheenRoughnessMapUv:Ke&&O(V.sheenRoughnessMap.channel),specularMapUv:ut&&O(V.specularMap.channel),specularColorMapUv:He&&O(V.specularColorMap.channel),specularIntensityMapUv:Pt&&O(V.specularIntensityMap.channel),transmissionMapUv:ee&&O(V.transmissionMap.channel),thicknessMapUv:ze&&O(V.thicknessMap.channel),alphaMapUv:Xe&&O(V.alphaMap.channel),vertexTangents:!!_e.attributes.tangent&&(Qt||Je),vertexColors:V.vertexColors,vertexAlphas:V.vertexColors===!0&&!!_e.attributes.color&&_e.attributes.color.itemSize===4,pointsUvs:ue.isPoints===!0&&!!_e.attributes.uv&&(qt||Xe),fog:!!ve,useFog:V.fog===!0,fogExp2:!!ve&&ve.isFogExp2,flatShading:V.flatShading===!0&&V.wireframe===!1,sizeAttenuation:V.sizeAttenuation===!0,logarithmicDepthBuffer:y,reversedDepthBuffer:et,skinning:ue.isSkinnedMesh===!0,morphTargets:_e.morphAttributes.position!==void 0,morphNormals:_e.morphAttributes.normal!==void 0,morphColors:_e.morphAttributes.color!==void 0,morphTargetsCount:Ye,morphTextureStride:_t,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numLightProbes:B.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:V.dithering,shadowMapEnabled:n.shadowMap.enabled&&X.length>0,shadowMapType:n.shadowMap.type,toneMapping:ht,decodeVideoTexture:qt&&V.map.isVideoTexture===!0&&un.getTransfer(V.map.colorSpace)===wn,decodeVideoTextureEmissive:en&&V.emissiveMap.isVideoTexture===!0&&un.getTransfer(V.emissiveMap.colorSpace)===wn,premultipliedAlpha:V.premultipliedAlpha,doubleSided:V.side===Gr,flipSided:V.side===nr,useDepthPacking:V.depthPacking>=0,depthPacking:V.depthPacking||0,index0AttributeName:V.index0AttributeName,extensionClipCullDistance:We&&V.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(We&&V.extensions.multiDraw===!0||lt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:V.customProgramCacheKey()};return Ft.vertexUv1s=p.has(1),Ft.vertexUv2s=p.has(2),Ft.vertexUv3s=p.has(3),p.clear(),Ft}function w(V){let B=[];if(V.shaderID?B.push(V.shaderID):(B.push(V.customVertexShaderID),B.push(V.customFragmentShaderID)),V.defines!==void 0)for(let X in V.defines)B.push(X),B.push(V.defines[X]);return V.isRawShaderMaterial===!1&&(j(B,V),H(B,V),B.push(n.outputColorSpace)),B.push(V.customProgramCacheKey),B.join()}function j(V,B){V.push(B.precision),V.push(B.outputColorSpace),V.push(B.envMapMode),V.push(B.envMapCubeUVHeight),V.push(B.mapUv),V.push(B.alphaMapUv),V.push(B.lightMapUv),V.push(B.aoMapUv),V.push(B.bumpMapUv),V.push(B.normalMapUv),V.push(B.displacementMapUv),V.push(B.emissiveMapUv),V.push(B.metalnessMapUv),V.push(B.roughnessMapUv),V.push(B.anisotropyMapUv),V.push(B.clearcoatMapUv),V.push(B.clearcoatNormalMapUv),V.push(B.clearcoatRoughnessMapUv),V.push(B.iridescenceMapUv),V.push(B.iridescenceThicknessMapUv),V.push(B.sheenColorMapUv),V.push(B.sheenRoughnessMapUv),V.push(B.specularMapUv),V.push(B.specularColorMapUv),V.push(B.specularIntensityMapUv),V.push(B.transmissionMapUv),V.push(B.thicknessMapUv),V.push(B.combine),V.push(B.fogExp2),V.push(B.sizeAttenuation),V.push(B.morphTargetsCount),V.push(B.morphAttributeCount),V.push(B.numDirLights),V.push(B.numPointLights),V.push(B.numSpotLights),V.push(B.numSpotLightMaps),V.push(B.numHemiLights),V.push(B.numRectAreaLights),V.push(B.numDirLightShadows),V.push(B.numPointLightShadows),V.push(B.numSpotLightShadows),V.push(B.numSpotLightShadowsWithMaps),V.push(B.numLightProbes),V.push(B.shadowMapType),V.push(B.toneMapping),V.push(B.numClippingPlanes),V.push(B.numClipIntersection),V.push(B.depthPacking)}function H(V,B){u.disableAll(),B.instancing&&u.enable(0),B.instancingColor&&u.enable(1),B.instancingMorph&&u.enable(2),B.matcap&&u.enable(3),B.envMap&&u.enable(4),B.normalMapObjectSpace&&u.enable(5),B.normalMapTangentSpace&&u.enable(6),B.clearcoat&&u.enable(7),B.iridescence&&u.enable(8),B.alphaTest&&u.enable(9),B.vertexColors&&u.enable(10),B.vertexAlphas&&u.enable(11),B.vertexUv1s&&u.enable(12),B.vertexUv2s&&u.enable(13),B.vertexUv3s&&u.enable(14),B.vertexTangents&&u.enable(15),B.anisotropy&&u.enable(16),B.alphaHash&&u.enable(17),B.batching&&u.enable(18),B.dispersion&&u.enable(19),B.batchingColor&&u.enable(20),B.gradientMap&&u.enable(21),V.push(u.mask),u.disableAll(),B.fog&&u.enable(0),B.useFog&&u.enable(1),B.flatShading&&u.enable(2),B.logarithmicDepthBuffer&&u.enable(3),B.reversedDepthBuffer&&u.enable(4),B.skinning&&u.enable(5),B.morphTargets&&u.enable(6),B.morphNormals&&u.enable(7),B.morphColors&&u.enable(8),B.premultipliedAlpha&&u.enable(9),B.shadowMapEnabled&&u.enable(10),B.doubleSided&&u.enable(11),B.flipSided&&u.enable(12),B.useDepthPacking&&u.enable(13),B.dithering&&u.enable(14),B.transmission&&u.enable(15),B.sheen&&u.enable(16),B.opaque&&u.enable(17),B.pointsUvs&&u.enable(18),B.decodeVideoTexture&&u.enable(19),B.decodeVideoTextureEmissive&&u.enable(20),B.alphaToCoverage&&u.enable(21),V.push(u.mask)}function W(V){let B=M[V.type],X;if(B){let ie=ms[B];X=rT.clone(ie.uniforms)}else X=V.uniforms;return X}function G(V,B){let X=m.get(B);return X!==void 0?++X.usedTimes:(X=new uH(n,B,V,o),_.push(X),m.set(B,X)),X}function Y(V){if(--V.usedTimes===0){let B=_.indexOf(V);_[B]=_[_.length-1],_.pop(),m.delete(V.cacheKey),V.destroy()}}function q(V){d.remove(V)}function re(){d.dispose()}return{getParameters:E,getProgramCacheKey:w,getUniforms:W,acquireProgram:G,releaseProgram:Y,releaseShaderCache:q,programs:_,dispose:re}}function fH(){let n=new WeakMap;function t(s){return n.has(s)}function e(s){let u=n.get(s);return u===void 0&&(u={},n.set(s,u)),u}function i(s){n.delete(s)}function r(s,u,d){n.get(s)[u]=d}function o(){n=new WeakMap}return{has:t,get:e,remove:i,update:r,dispose:o}}function hH(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function MT(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function ST(){let n=[],t=0,e=[],i=[],r=[];function o(){t=0,e.length=0,i.length=0,r.length=0}function s(m,y,b,M,O,E){let w=n[t];return w===void 0?(w={id:m.id,object:m,geometry:y,material:b,groupOrder:M,renderOrder:m.renderOrder,z:O,group:E},n[t]=w):(w.id=m.id,w.object=m,w.geometry=y,w.material=b,w.groupOrder=M,w.renderOrder=m.renderOrder,w.z=O,w.group=E),t++,w}function u(m,y,b,M,O,E){let w=s(m,y,b,M,O,E);b.transmission>0?i.push(w):b.transparent===!0?r.push(w):e.push(w)}function d(m,y,b,M,O,E){let w=s(m,y,b,M,O,E);b.transmission>0?i.unshift(w):b.transparent===!0?r.unshift(w):e.unshift(w)}function p(m,y){e.length>1&&e.sort(m||hH),i.length>1&&i.sort(y||MT),r.length>1&&r.sort(y||MT)}function _(){for(let m=t,y=n.length;m<y;m++){let b=n[m];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:e,transmissive:i,transparent:r,init:o,push:u,unshift:d,finish:_,sort:p}}function pH(){let n=new WeakMap;function t(i,r){let o=n.get(i),s;return o===void 0?(s=new ST,n.set(i,[s])):r>=o.length?(s=new ST,o.push(s)):s=o[r],s}function e(){n=new WeakMap}return{get:t,dispose:e}}function mH(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new se,color:new jt};break;case"SpotLight":e={position:new se,direction:new se,color:new jt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new se,color:new jt,distance:0,decay:0};break;case"HemisphereLight":e={direction:new se,skyColor:new jt,groundColor:new jt};break;case"RectAreaLight":e={color:new jt,position:new se,halfWidth:new se,halfHeight:new se};break}return n[t.id]=e,e}}}function gH(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Et};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Et};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Et,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}var _H=0;function vH(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function xH(n){let t=new mH,e=gH(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)i.probe.push(new se);let r=new se,o=new Qn,s=new Qn;function u(p){let _=0,m=0,y=0;for(let V=0;V<9;V++)i.probe[V].set(0,0,0);let b=0,M=0,O=0,E=0,w=0,j=0,H=0,W=0,G=0,Y=0,q=0;p.sort(vH);for(let V=0,B=p.length;V<B;V++){let X=p[V],ie=X.color,ue=X.intensity,ve=X.distance,_e=null;if(X.shadow&&X.shadow.map&&(X.shadow.map.texture.format===au?_e=X.shadow.map.texture:_e=X.shadow.map.depthTexture||X.shadow.map.texture),X.isAmbientLight)_+=ie.r*ue,m+=ie.g*ue,y+=ie.b*ue;else if(X.isLightProbe){for(let me=0;me<9;me++)i.probe[me].addScaledVector(X.sh.coefficients[me],ue);q++}else if(X.isDirectionalLight){let me=t.get(X);if(me.color.copy(X.color).multiplyScalar(X.intensity),X.castShadow){let he=X.shadow,we=e.get(X);we.shadowIntensity=he.intensity,we.shadowBias=he.bias,we.shadowNormalBias=he.normalBias,we.shadowRadius=he.radius,we.shadowMapSize=he.mapSize,i.directionalShadow[b]=we,i.directionalShadowMap[b]=_e,i.directionalShadowMatrix[b]=X.shadow.matrix,j++}i.directional[b]=me,b++}else if(X.isSpotLight){let me=t.get(X);me.position.setFromMatrixPosition(X.matrixWorld),me.color.copy(ie).multiplyScalar(ue),me.distance=ve,me.coneCos=Math.cos(X.angle),me.penumbraCos=Math.cos(X.angle*(1-X.penumbra)),me.decay=X.decay,i.spot[O]=me;let he=X.shadow;if(X.map&&(i.spotLightMap[G]=X.map,G++,he.updateMatrices(X),X.castShadow&&Y++),i.spotLightMatrix[O]=he.matrix,X.castShadow){let we=e.get(X);we.shadowIntensity=he.intensity,we.shadowBias=he.bias,we.shadowNormalBias=he.normalBias,we.shadowRadius=he.radius,we.shadowMapSize=he.mapSize,i.spotShadow[O]=we,i.spotShadowMap[O]=_e,W++}O++}else if(X.isRectAreaLight){let me=t.get(X);me.color.copy(ie).multiplyScalar(ue),me.halfWidth.set(X.width*.5,0,0),me.halfHeight.set(0,X.height*.5,0),i.rectArea[E]=me,E++}else if(X.isPointLight){let me=t.get(X);if(me.color.copy(X.color).multiplyScalar(X.intensity),me.distance=X.distance,me.decay=X.decay,X.castShadow){let he=X.shadow,we=e.get(X);we.shadowIntensity=he.intensity,we.shadowBias=he.bias,we.shadowNormalBias=he.normalBias,we.shadowRadius=he.radius,we.shadowMapSize=he.mapSize,we.shadowCameraNear=he.camera.near,we.shadowCameraFar=he.camera.far,i.pointShadow[M]=we,i.pointShadowMap[M]=_e,i.pointShadowMatrix[M]=X.shadow.matrix,H++}i.point[M]=me,M++}else if(X.isHemisphereLight){let me=t.get(X);me.skyColor.copy(X.color).multiplyScalar(ue),me.groundColor.copy(X.groundColor).multiplyScalar(ue),i.hemi[w]=me,w++}}E>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ze.LTC_FLOAT_1,i.rectAreaLTC2=Ze.LTC_FLOAT_2):(i.rectAreaLTC1=Ze.LTC_HALF_1,i.rectAreaLTC2=Ze.LTC_HALF_2)),i.ambient[0]=_,i.ambient[1]=m,i.ambient[2]=y;let re=i.hash;(re.directionalLength!==b||re.pointLength!==M||re.spotLength!==O||re.rectAreaLength!==E||re.hemiLength!==w||re.numDirectionalShadows!==j||re.numPointShadows!==H||re.numSpotShadows!==W||re.numSpotMaps!==G||re.numLightProbes!==q)&&(i.directional.length=b,i.spot.length=O,i.rectArea.length=E,i.point.length=M,i.hemi.length=w,i.directionalShadow.length=j,i.directionalShadowMap.length=j,i.pointShadow.length=H,i.pointShadowMap.length=H,i.spotShadow.length=W,i.spotShadowMap.length=W,i.directionalShadowMatrix.length=j,i.pointShadowMatrix.length=H,i.spotLightMatrix.length=W+G-Y,i.spotLightMap.length=G,i.numSpotLightShadowsWithMaps=Y,i.numLightProbes=q,re.directionalLength=b,re.pointLength=M,re.spotLength=O,re.rectAreaLength=E,re.hemiLength=w,re.numDirectionalShadows=j,re.numPointShadows=H,re.numSpotShadows=W,re.numSpotMaps=G,re.numLightProbes=q,i.version=_H++)}function d(p,_){let m=0,y=0,b=0,M=0,O=0,E=_.matrixWorldInverse;for(let w=0,j=p.length;w<j;w++){let H=p[w];if(H.isDirectionalLight){let W=i.directional[m];W.direction.setFromMatrixPosition(H.matrixWorld),r.setFromMatrixPosition(H.target.matrixWorld),W.direction.sub(r),W.direction.transformDirection(E),m++}else if(H.isSpotLight){let W=i.spot[b];W.position.setFromMatrixPosition(H.matrixWorld),W.position.applyMatrix4(E),W.direction.setFromMatrixPosition(H.matrixWorld),r.setFromMatrixPosition(H.target.matrixWorld),W.direction.sub(r),W.direction.transformDirection(E),b++}else if(H.isRectAreaLight){let W=i.rectArea[M];W.position.setFromMatrixPosition(H.matrixWorld),W.position.applyMatrix4(E),s.identity(),o.copy(H.matrixWorld),o.premultiply(E),s.extractRotation(o),W.halfWidth.set(H.width*.5,0,0),W.halfHeight.set(0,H.height*.5,0),W.halfWidth.applyMatrix4(s),W.halfHeight.applyMatrix4(s),M++}else if(H.isPointLight){let W=i.point[y];W.position.setFromMatrixPosition(H.matrixWorld),W.position.applyMatrix4(E),y++}else if(H.isHemisphereLight){let W=i.hemi[O];W.direction.setFromMatrixPosition(H.matrixWorld),W.direction.transformDirection(E),O++}}}return{setup:u,setupView:d,state:i}}function ET(n){let t=new xH(n),e=[],i=[];function r(_){p.camera=_,e.length=0,i.length=0}function o(_){e.push(_)}function s(_){i.push(_)}function u(){t.setup(e)}function d(_){t.setupView(e,_)}let p={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:r,state:p,setupLights:u,setupLightsView:d,pushLight:o,pushShadow:s}}function yH(n){let t=new WeakMap;function e(r,o=0){let s=t.get(r),u;return s===void 0?(u=new ET(n),t.set(r,[u])):o>=s.length?(u=new ET(n),s.push(u)):u=s[o],u}function i(){t=new WeakMap}return{get:e,dispose:i}}var bH=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,CH=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,wH=[new se(1,0,0),new se(-1,0,0),new se(0,1,0),new se(0,-1,0),new se(0,0,1),new se(0,0,-1)],MH=[new se(0,-1,0),new se(0,-1,0),new se(0,0,1),new se(0,0,-1),new se(0,-1,0),new se(0,-1,0)],AT=new Qn,jf=new se,nC=new se;function SH(n,t,e){let i=new Zc,r=new Et,o=new Et,s=new ei,u=new u_,d=new c_,p={},_=e.maxTextureSize,m={[Xs]:nr,[nr]:Xs,[Gr]:Gr},y=new jr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Et},radius:{value:4}},vertexShader:bH,fragmentShader:CH}),b=y.clone();b.defines.HORIZONTAL_PASS=1;let M=new Cr;M.setAttribute("position",new zr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let O=new sn(M,y),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ff;let w=this.type;this.render=function(Y,q,re){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||Y.length===0)return;Y.type===SA&&(vt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),Y.type=Ff);let V=n.getRenderTarget(),B=n.getActiveCubeFace(),X=n.getActiveMipmapLevel(),ie=n.state;ie.setBlending(fs),ie.buffers.depth.getReversed()===!0?ie.buffers.color.setClear(0,0,0,0):ie.buffers.color.setClear(1,1,1,1),ie.buffers.depth.setTest(!0),ie.setScissorTest(!1);let ue=w!==this.type;ue&&q.traverse(function(ve){ve.material&&(Array.isArray(ve.material)?ve.material.forEach(_e=>_e.needsUpdate=!0):ve.material.needsUpdate=!0)});for(let ve=0,_e=Y.length;ve<_e;ve++){let me=Y[ve],he=me.shadow;if(he===void 0){vt("WebGLShadowMap:",me,"has no shadow.");continue}if(he.autoUpdate===!1&&he.needsUpdate===!1)continue;r.copy(he.mapSize);let we=he.getFrameExtents();if(r.multiply(we),o.copy(he.mapSize),(r.x>_||r.y>_)&&(r.x>_&&(o.x=Math.floor(_/we.x),r.x=o.x*we.x,he.mapSize.x=o.x),r.y>_&&(o.y=Math.floor(_/we.y),r.y=o.y*we.y,he.mapSize.y=o.y)),he.map===null||ue===!0){if(he.map!==null&&(he.map.depthTexture!==null&&(he.map.depthTexture.dispose(),he.map.depthTexture=null),he.map.dispose()),this.type===td){if(me.isPointLight){vt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}he.map=new Hr(r.x,r.y,{format:au,type:hs,minFilter:Li,magFilter:Li,generateMipmaps:!1}),he.map.texture.name=me.name+".shadowMap",he.map.depthTexture=new ja(r.x,r.y,Ho),he.map.depthTexture.name=me.name+".shadowMapDepth",he.map.depthTexture.format=us,he.map.depthTexture.compareFunction=null,he.map.depthTexture.minFilter=ki,he.map.depthTexture.magFilter=ki}else{me.isPointLight?(he.map=new wf(r.x),he.map.depthTexture=new a_(r.x,zo)):(he.map=new Hr(r.x,r.y),he.map.depthTexture=new ja(r.x,r.y,zo)),he.map.depthTexture.name=me.name+".shadowMap",he.map.depthTexture.format=us;let Ne=n.state.buffers.depth.getReversed();this.type===Ff?(he.map.depthTexture.compareFunction=Ne?vv:_v,he.map.depthTexture.minFilter=Li,he.map.depthTexture.magFilter=Li):(he.map.depthTexture.compareFunction=null,he.map.depthTexture.minFilter=ki,he.map.depthTexture.magFilter=ki)}he.camera.updateProjectionMatrix()}let $e=he.map.isWebGLCubeRenderTarget?6:1;for(let Ne=0;Ne<$e;Ne++){if(he.map.isWebGLCubeRenderTarget)n.setRenderTarget(he.map,Ne),n.clear();else{Ne===0&&(n.setRenderTarget(he.map),n.clear());let Ye=he.getViewport(Ne);s.set(o.x*Ye.x,o.y*Ye.y,o.x*Ye.z,o.y*Ye.w),ie.viewport(s)}if(me.isPointLight){let Ye=he.camera,_t=he.matrix,Pe=me.distance||Ye.far;Pe!==Ye.far&&(Ye.far=Pe,Ye.updateProjectionMatrix()),jf.setFromMatrixPosition(me.matrixWorld),Ye.position.copy(jf),nC.copy(Ye.position),nC.add(wH[Ne]),Ye.up.copy(MH[Ne]),Ye.lookAt(nC),Ye.updateMatrixWorld(),_t.makeTranslation(-jf.x,-jf.y,-jf.z),AT.multiplyMatrices(Ye.projectionMatrix,Ye.matrixWorldInverse),he._frustum.setFromProjectionMatrix(AT,Ye.coordinateSystem,Ye.reversedDepth)}else he.updateMatrices(me);i=he.getFrustum(),W(q,re,he.camera,me,this.type)}he.isPointLightShadow!==!0&&this.type===td&&j(he,re),he.needsUpdate=!1}w=this.type,E.needsUpdate=!1,n.setRenderTarget(V,B,X)};function j(Y,q){let re=t.update(O);y.defines.VSM_SAMPLES!==Y.blurSamples&&(y.defines.VSM_SAMPLES=Y.blurSamples,b.defines.VSM_SAMPLES=Y.blurSamples,y.needsUpdate=!0,b.needsUpdate=!0),Y.mapPass===null&&(Y.mapPass=new Hr(r.x,r.y,{format:au,type:hs})),y.uniforms.shadow_pass.value=Y.map.depthTexture,y.uniforms.resolution.value=Y.mapSize,y.uniforms.radius.value=Y.radius,n.setRenderTarget(Y.mapPass),n.clear(),n.renderBufferDirect(q,null,re,y,O,null),b.uniforms.shadow_pass.value=Y.mapPass.texture,b.uniforms.resolution.value=Y.mapSize,b.uniforms.radius.value=Y.radius,n.setRenderTarget(Y.map),n.clear(),n.renderBufferDirect(q,null,re,b,O,null)}function H(Y,q,re,V){let B=null,X=re.isPointLight===!0?Y.customDistanceMaterial:Y.customDepthMaterial;if(X!==void 0)B=X;else if(B=re.isPointLight===!0?d:u,n.localClippingEnabled&&q.clipShadows===!0&&Array.isArray(q.clippingPlanes)&&q.clippingPlanes.length!==0||q.displacementMap&&q.displacementScale!==0||q.alphaMap&&q.alphaTest>0||q.map&&q.alphaTest>0||q.alphaToCoverage===!0){let ie=B.uuid,ue=q.uuid,ve=p[ie];ve===void 0&&(ve={},p[ie]=ve);let _e=ve[ue];_e===void 0&&(_e=B.clone(),ve[ue]=_e,q.addEventListener("dispose",G)),B=_e}if(B.visible=q.visible,B.wireframe=q.wireframe,V===td?B.side=q.shadowSide!==null?q.shadowSide:q.side:B.side=q.shadowSide!==null?q.shadowSide:m[q.side],B.alphaMap=q.alphaMap,B.alphaTest=q.alphaToCoverage===!0?.5:q.alphaTest,B.map=q.map,B.clipShadows=q.clipShadows,B.clippingPlanes=q.clippingPlanes,B.clipIntersection=q.clipIntersection,B.displacementMap=q.displacementMap,B.displacementScale=q.displacementScale,B.displacementBias=q.displacementBias,B.wireframeLinewidth=q.wireframeLinewidth,B.linewidth=q.linewidth,re.isPointLight===!0&&B.isMeshDistanceMaterial===!0){let ie=n.properties.get(B);ie.light=re}return B}function W(Y,q,re,V,B){if(Y.visible===!1)return;if(Y.layers.test(q.layers)&&(Y.isMesh||Y.isLine||Y.isPoints)&&(Y.castShadow||Y.receiveShadow&&B===td)&&(!Y.frustumCulled||i.intersectsObject(Y))){Y.modelViewMatrix.multiplyMatrices(re.matrixWorldInverse,Y.matrixWorld);let ue=t.update(Y),ve=Y.material;if(Array.isArray(ve)){let _e=ue.groups;for(let me=0,he=_e.length;me<he;me++){let we=_e[me],$e=ve[we.materialIndex];if($e&&$e.visible){let Ne=H(Y,$e,V,B);Y.onBeforeShadow(n,Y,q,re,ue,Ne,we),n.renderBufferDirect(re,null,ue,Ne,Y,we),Y.onAfterShadow(n,Y,q,re,ue,Ne,we)}}}else if(ve.visible){let _e=H(Y,ve,V,B);Y.onBeforeShadow(n,Y,q,re,ue,_e,null),n.renderBufferDirect(re,null,ue,_e,Y,null),Y.onAfterShadow(n,Y,q,re,ue,_e,null)}}let ie=Y.children;for(let ue=0,ve=ie.length;ue<ve;ue++)W(ie[ue],q,re,V,B)}function G(Y){Y.target.removeEventListener("dispose",G);for(let re in p){let V=p[re],B=Y.target.uuid;B in V&&(V[B].dispose(),delete V[B])}}}var EH={[C_]:w_,[M_]:A_,[S_]:T_,[eu]:E_,[w_]:C_,[A_]:M_,[T_]:S_,[E_]:eu};function AH(n,t){function e(){let ee=!1,ze=new ei,ke=null,Xe=new ei(0,0,0,0);return{setMask:function(le){ke!==le&&!ee&&(n.colorMask(le,le,le,le),ke=le)},setLocked:function(le){ee=le},setClear:function(le,Ee,We,ht,Ft){Ft===!0&&(le*=ht,Ee*=ht,We*=ht),ze.set(le,Ee,We,ht),Xe.equals(ze)===!1&&(n.clearColor(le,Ee,We,ht),Xe.copy(ze))},reset:function(){ee=!1,ke=null,Xe.set(-1,0,0,0)}}}function i(){let ee=!1,ze=!1,ke=null,Xe=null,le=null;return{setReversed:function(Ee){if(ze!==Ee){let We=t.get("EXT_clip_control");Ee?We.clipControlEXT(We.LOWER_LEFT_EXT,We.ZERO_TO_ONE_EXT):We.clipControlEXT(We.LOWER_LEFT_EXT,We.NEGATIVE_ONE_TO_ONE_EXT),ze=Ee;let ht=le;le=null,this.setClear(ht)}},getReversed:function(){return ze},setTest:function(Ee){Ee?Ae(n.DEPTH_TEST):et(n.DEPTH_TEST)},setMask:function(Ee){ke!==Ee&&!ee&&(n.depthMask(Ee),ke=Ee)},setFunc:function(Ee){if(ze&&(Ee=EH[Ee]),Xe!==Ee){switch(Ee){case C_:n.depthFunc(n.NEVER);break;case w_:n.depthFunc(n.ALWAYS);break;case M_:n.depthFunc(n.LESS);break;case eu:n.depthFunc(n.LEQUAL);break;case S_:n.depthFunc(n.EQUAL);break;case E_:n.depthFunc(n.GEQUAL);break;case A_:n.depthFunc(n.GREATER);break;case T_:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Xe=Ee}},setLocked:function(Ee){ee=Ee},setClear:function(Ee){le!==Ee&&(ze&&(Ee=1-Ee),n.clearDepth(Ee),le=Ee)},reset:function(){ee=!1,ke=null,Xe=null,le=null,ze=!1}}}function r(){let ee=!1,ze=null,ke=null,Xe=null,le=null,Ee=null,We=null,ht=null,Ft=null;return{setTest:function(nt){ee||(nt?Ae(n.STENCIL_TEST):et(n.STENCIL_TEST))},setMask:function(nt){ze!==nt&&!ee&&(n.stencilMask(nt),ze=nt)},setFunc:function(nt,Vi,Lt){(ke!==nt||Xe!==Vi||le!==Lt)&&(n.stencilFunc(nt,Vi,Lt),ke=nt,Xe=Vi,le=Lt)},setOp:function(nt,Vi,Lt){(Ee!==nt||We!==Vi||ht!==Lt)&&(n.stencilOp(nt,Vi,Lt),Ee=nt,We=Vi,ht=Lt)},setLocked:function(nt){ee=nt},setClear:function(nt){Ft!==nt&&(n.clearStencil(nt),Ft=nt)},reset:function(){ee=!1,ze=null,ke=null,Xe=null,le=null,Ee=null,We=null,ht=null,Ft=null}}}let o=new e,s=new i,u=new r,d=new WeakMap,p=new WeakMap,_={},m={},y=new WeakMap,b=[],M=null,O=!1,E=null,w=null,j=null,H=null,W=null,G=null,Y=null,q=new jt(0,0,0),re=0,V=!1,B=null,X=null,ie=null,ue=null,ve=null,_e=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),me=!1,he=0,we=n.getParameter(n.VERSION);we.indexOf("WebGL")!==-1?(he=parseFloat(/^WebGL (\d)/.exec(we)[1]),me=he>=1):we.indexOf("OpenGL ES")!==-1&&(he=parseFloat(/^OpenGL ES (\d)/.exec(we)[1]),me=he>=2);let $e=null,Ne={},Ye=n.getParameter(n.SCISSOR_BOX),_t=n.getParameter(n.VIEWPORT),Pe=new ei().fromArray(Ye),pn=new ei().fromArray(_t);function cn(ee,ze,ke,Xe){let le=new Uint8Array(4),Ee=n.createTexture();n.bindTexture(ee,Ee),n.texParameteri(ee,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ee,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let We=0;We<ke;We++)ee===n.TEXTURE_3D||ee===n.TEXTURE_2D_ARRAY?n.texImage3D(ze,0,n.RGBA,1,1,Xe,0,n.RGBA,n.UNSIGNED_BYTE,le):n.texImage2D(ze+We,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,le);return Ee}let Ce={};Ce[n.TEXTURE_2D]=cn(n.TEXTURE_2D,n.TEXTURE_2D,1),Ce[n.TEXTURE_CUBE_MAP]=cn(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ce[n.TEXTURE_2D_ARRAY]=cn(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ce[n.TEXTURE_3D]=cn(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),u.setClear(0),Ae(n.DEPTH_TEST),s.setFunc(eu),Dt(!1),Qt(C2),Ae(n.CULL_FACE),Mt(fs);function Ae(ee){_[ee]!==!0&&(n.enable(ee),_[ee]=!0)}function et(ee){_[ee]!==!1&&(n.disable(ee),_[ee]=!1)}function wt(ee,ze){return m[ee]!==ze?(n.bindFramebuffer(ee,ze),m[ee]=ze,ee===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=ze),ee===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=ze),!0):!1}function lt(ee,ze){let ke=b,Xe=!1;if(ee){ke=y.get(ze),ke===void 0&&(ke=[],y.set(ze,ke));let le=ee.textures;if(ke.length!==le.length||ke[0]!==n.COLOR_ATTACHMENT0){for(let Ee=0,We=le.length;Ee<We;Ee++)ke[Ee]=n.COLOR_ATTACHMENT0+Ee;ke.length=le.length,Xe=!0}}else ke[0]!==n.BACK&&(ke[0]=n.BACK,Xe=!0);Xe&&n.drawBuffers(ke)}function qt(ee){return M!==ee?(n.useProgram(ee),M=ee,!0):!1}let Bn={[Ua]:n.FUNC_ADD,[AA]:n.FUNC_SUBTRACT,[TA]:n.FUNC_REVERSE_SUBTRACT};Bn[DA]=n.MIN,Bn[PA]=n.MAX;let Zt={[IA]:n.ZERO,[OA]:n.ONE,[RA]:n.SRC_COLOR,[qg]:n.SRC_ALPHA,[UA]:n.SRC_ALPHA_SATURATE,[LA]:n.DST_COLOR,[FA]:n.DST_ALPHA,[kA]:n.ONE_MINUS_SRC_COLOR,[Xg]:n.ONE_MINUS_SRC_ALPHA,[VA]:n.ONE_MINUS_DST_COLOR,[NA]:n.ONE_MINUS_DST_ALPHA,[BA]:n.CONSTANT_COLOR,[zA]:n.ONE_MINUS_CONSTANT_COLOR,[HA]:n.CONSTANT_ALPHA,[jA]:n.ONE_MINUS_CONSTANT_ALPHA};function Mt(ee,ze,ke,Xe,le,Ee,We,ht,Ft,nt){if(ee===fs){O===!0&&(et(n.BLEND),O=!1);return}if(O===!1&&(Ae(n.BLEND),O=!0),ee!==EA){if(ee!==E||nt!==V){if((w!==Ua||W!==Ua)&&(n.blendEquation(n.FUNC_ADD),w=Ua,W=Ua),nt)switch(ee){case Ql:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case w2:n.blendFunc(n.ONE,n.ONE);break;case M2:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case S2:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:bt("WebGLState: Invalid blending: ",ee);break}else switch(ee){case Ql:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case w2:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case M2:bt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case S2:bt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:bt("WebGLState: Invalid blending: ",ee);break}j=null,H=null,G=null,Y=null,q.set(0,0,0),re=0,E=ee,V=nt}return}le=le||ze,Ee=Ee||ke,We=We||Xe,(ze!==w||le!==W)&&(n.blendEquationSeparate(Bn[ze],Bn[le]),w=ze,W=le),(ke!==j||Xe!==H||Ee!==G||We!==Y)&&(n.blendFuncSeparate(Zt[ke],Zt[Xe],Zt[Ee],Zt[We]),j=ke,H=Xe,G=Ee,Y=We),(ht.equals(q)===!1||Ft!==re)&&(n.blendColor(ht.r,ht.g,ht.b,Ft),q.copy(ht),re=Ft),E=ee,V=!1}function Gt(ee,ze){ee.side===Gr?et(n.CULL_FACE):Ae(n.CULL_FACE);let ke=ee.side===nr;ze&&(ke=!ke),Dt(ke),ee.blending===Ql&&ee.transparent===!1?Mt(fs):Mt(ee.blending,ee.blendEquation,ee.blendSrc,ee.blendDst,ee.blendEquationAlpha,ee.blendSrcAlpha,ee.blendDstAlpha,ee.blendColor,ee.blendAlpha,ee.premultipliedAlpha),s.setFunc(ee.depthFunc),s.setTest(ee.depthTest),s.setMask(ee.depthWrite),o.setMask(ee.colorWrite);let Xe=ee.stencilWrite;u.setTest(Xe),Xe&&(u.setMask(ee.stencilWriteMask),u.setFunc(ee.stencilFunc,ee.stencilRef,ee.stencilFuncMask),u.setOp(ee.stencilFail,ee.stencilZFail,ee.stencilZPass)),en(ee.polygonOffset,ee.polygonOffsetFactor,ee.polygonOffsetUnits),ee.alphaToCoverage===!0?Ae(n.SAMPLE_ALPHA_TO_COVERAGE):et(n.SAMPLE_ALPHA_TO_COVERAGE)}function Dt(ee){B!==ee&&(ee?n.frontFace(n.CW):n.frontFace(n.CCW),B=ee)}function Qt(ee){ee!==wA?(Ae(n.CULL_FACE),ee!==X&&(ee===C2?n.cullFace(n.BACK):ee===MA?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):et(n.CULL_FACE),X=ee}function J(ee){ee!==ie&&(me&&n.lineWidth(ee),ie=ee)}function en(ee,ze,ke){ee?(Ae(n.POLYGON_OFFSET_FILL),(ue!==ze||ve!==ke)&&(n.polygonOffset(ze,ke),ue=ze,ve=ke)):et(n.POLYGON_OFFSET_FILL)}function Jt(ee){ee?Ae(n.SCISSOR_TEST):et(n.SCISSOR_TEST)}function dt(ee){ee===void 0&&(ee=n.TEXTURE0+_e-1),$e!==ee&&(n.activeTexture(ee),$e=ee)}function Je(ee,ze,ke){ke===void 0&&($e===null?ke=n.TEXTURE0+_e-1:ke=$e);let Xe=Ne[ke];Xe===void 0&&(Xe={type:void 0,texture:void 0},Ne[ke]=Xe),(Xe.type!==ee||Xe.texture!==ze)&&($e!==ke&&(n.activeTexture(ke),$e=ke),n.bindTexture(ee,ze||Ce[ee]),Xe.type=ee,Xe.texture=ze)}function z(){let ee=Ne[$e];ee!==void 0&&ee.type!==void 0&&(n.bindTexture(ee.type,null),ee.type=void 0,ee.texture=void 0)}function I(){try{n.compressedTexImage2D(...arguments)}catch(ee){bt("WebGLState:",ee)}}function Q(){try{n.compressedTexImage3D(...arguments)}catch(ee){bt("WebGLState:",ee)}}function pe(){try{n.texSubImage2D(...arguments)}catch(ee){bt("WebGLState:",ee)}}function Me(){try{n.texSubImage3D(...arguments)}catch(ee){bt("WebGLState:",ee)}}function ce(){try{n.compressedTexSubImage2D(...arguments)}catch(ee){bt("WebGLState:",ee)}}function ot(){try{n.compressedTexSubImage3D(...arguments)}catch(ee){bt("WebGLState:",ee)}}function Oe(){try{n.texStorage2D(...arguments)}catch(ee){bt("WebGLState:",ee)}}function st(){try{n.texStorage3D(...arguments)}catch(ee){bt("WebGLState:",ee)}}function mt(){try{n.texImage2D(...arguments)}catch(ee){bt("WebGLState:",ee)}}function De(){try{n.texImage3D(...arguments)}catch(ee){bt("WebGLState:",ee)}}function Be(ee){Pe.equals(ee)===!1&&(n.scissor(ee.x,ee.y,ee.z,ee.w),Pe.copy(ee))}function Ke(ee){pn.equals(ee)===!1&&(n.viewport(ee.x,ee.y,ee.z,ee.w),pn.copy(ee))}function ut(ee,ze){let ke=p.get(ze);ke===void 0&&(ke=new WeakMap,p.set(ze,ke));let Xe=ke.get(ee);Xe===void 0&&(Xe=n.getUniformBlockIndex(ze,ee.name),ke.set(ee,Xe))}function He(ee,ze){let Xe=p.get(ze).get(ee);d.get(ze)!==Xe&&(n.uniformBlockBinding(ze,Xe,ee.__bindingPointIndex),d.set(ze,Xe))}function Pt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),_={},$e=null,Ne={},m={},y=new WeakMap,b=[],M=null,O=!1,E=null,w=null,j=null,H=null,W=null,G=null,Y=null,q=new jt(0,0,0),re=0,V=!1,B=null,X=null,ie=null,ue=null,ve=null,Pe.set(0,0,n.canvas.width,n.canvas.height),pn.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),u.reset()}return{buffers:{color:o,depth:s,stencil:u},enable:Ae,disable:et,bindFramebuffer:wt,drawBuffers:lt,useProgram:qt,setBlending:Mt,setMaterial:Gt,setFlipSided:Dt,setCullFace:Qt,setLineWidth:J,setPolygonOffset:en,setScissorTest:Jt,activeTexture:dt,bindTexture:Je,unbindTexture:z,compressedTexImage2D:I,compressedTexImage3D:Q,texImage2D:mt,texImage3D:De,updateUBOMapping:ut,uniformBlockBinding:He,texStorage2D:Oe,texStorage3D:st,texSubImage2D:pe,texSubImage3D:Me,compressedTexSubImage2D:ce,compressedTexSubImage3D:ot,scissor:Be,viewport:Ke,reset:Pt}}function TH(n,t,e,i,r,o,s){let u=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new Et,_=new WeakMap,m,y=new WeakMap,b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M(z,I){return b?new OffscreenCanvas(z,I):Wc("canvas")}function O(z,I,Q){let pe=1,Me=Je(z);if((Me.width>Q||Me.height>Q)&&(pe=Q/Math.max(Me.width,Me.height)),pe<1)if(typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&z instanceof ImageBitmap||typeof VideoFrame<"u"&&z instanceof VideoFrame){let ce=Math.floor(pe*Me.width),ot=Math.floor(pe*Me.height);m===void 0&&(m=M(ce,ot));let Oe=I?M(ce,ot):m;return Oe.width=ce,Oe.height=ot,Oe.getContext("2d").drawImage(z,0,0,ce,ot),vt("WebGLRenderer: Texture has been resized from ("+Me.width+"x"+Me.height+") to ("+ce+"x"+ot+")."),Oe}else return"data"in z&&vt("WebGLRenderer: Image in DataTexture is too big ("+Me.width+"x"+Me.height+")."),z;return z}function E(z){return z.generateMipmaps}function w(z){n.generateMipmap(z)}function j(z){return z.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:z.isWebGL3DRenderTarget?n.TEXTURE_3D:z.isWebGLArrayRenderTarget||z.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function H(z,I,Q,pe,Me=!1){if(z!==null){if(n[z]!==void 0)return n[z];vt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+z+"'")}let ce=I;if(I===n.RED&&(Q===n.FLOAT&&(ce=n.R32F),Q===n.HALF_FLOAT&&(ce=n.R16F),Q===n.UNSIGNED_BYTE&&(ce=n.R8)),I===n.RED_INTEGER&&(Q===n.UNSIGNED_BYTE&&(ce=n.R8UI),Q===n.UNSIGNED_SHORT&&(ce=n.R16UI),Q===n.UNSIGNED_INT&&(ce=n.R32UI),Q===n.BYTE&&(ce=n.R8I),Q===n.SHORT&&(ce=n.R16I),Q===n.INT&&(ce=n.R32I)),I===n.RG&&(Q===n.FLOAT&&(ce=n.RG32F),Q===n.HALF_FLOAT&&(ce=n.RG16F),Q===n.UNSIGNED_BYTE&&(ce=n.RG8)),I===n.RG_INTEGER&&(Q===n.UNSIGNED_BYTE&&(ce=n.RG8UI),Q===n.UNSIGNED_SHORT&&(ce=n.RG16UI),Q===n.UNSIGNED_INT&&(ce=n.RG32UI),Q===n.BYTE&&(ce=n.RG8I),Q===n.SHORT&&(ce=n.RG16I),Q===n.INT&&(ce=n.RG32I)),I===n.RGB_INTEGER&&(Q===n.UNSIGNED_BYTE&&(ce=n.RGB8UI),Q===n.UNSIGNED_SHORT&&(ce=n.RGB16UI),Q===n.UNSIGNED_INT&&(ce=n.RGB32UI),Q===n.BYTE&&(ce=n.RGB8I),Q===n.SHORT&&(ce=n.RGB16I),Q===n.INT&&(ce=n.RGB32I)),I===n.RGBA_INTEGER&&(Q===n.UNSIGNED_BYTE&&(ce=n.RGBA8UI),Q===n.UNSIGNED_SHORT&&(ce=n.RGBA16UI),Q===n.UNSIGNED_INT&&(ce=n.RGBA32UI),Q===n.BYTE&&(ce=n.RGBA8I),Q===n.SHORT&&(ce=n.RGBA16I),Q===n.INT&&(ce=n.RGBA32I)),I===n.RGB&&(Q===n.UNSIGNED_INT_5_9_9_9_REV&&(ce=n.RGB9_E5),Q===n.UNSIGNED_INT_10F_11F_11F_REV&&(ce=n.R11F_G11F_B10F)),I===n.RGBA){let ot=Me?mf:un.getTransfer(pe);Q===n.FLOAT&&(ce=n.RGBA32F),Q===n.HALF_FLOAT&&(ce=n.RGBA16F),Q===n.UNSIGNED_BYTE&&(ce=ot===wn?n.SRGB8_ALPHA8:n.RGBA8),Q===n.UNSIGNED_SHORT_4_4_4_4&&(ce=n.RGBA4),Q===n.UNSIGNED_SHORT_5_5_5_1&&(ce=n.RGB5_A1)}return(ce===n.R16F||ce===n.R32F||ce===n.RG16F||ce===n.RG32F||ce===n.RGBA16F||ce===n.RGBA32F)&&t.get("EXT_color_buffer_float"),ce}function W(z,I){let Q;return z?I===null||I===zo||I===id?Q=n.DEPTH24_STENCIL8:I===Ho?Q=n.DEPTH32F_STENCIL8:I===nd&&(Q=n.DEPTH24_STENCIL8,vt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):I===null||I===zo||I===id?Q=n.DEPTH_COMPONENT24:I===Ho?Q=n.DEPTH_COMPONENT32F:I===nd&&(Q=n.DEPTH_COMPONENT16),Q}function G(z,I){return E(z)===!0||z.isFramebufferTexture&&z.minFilter!==ki&&z.minFilter!==Li?Math.log2(Math.max(I.width,I.height))+1:z.mipmaps!==void 0&&z.mipmaps.length>0?z.mipmaps.length:z.isCompressedTexture&&Array.isArray(z.image)?I.mipmaps.length:1}function Y(z){let I=z.target;I.removeEventListener("dispose",Y),re(I),I.isVideoTexture&&_.delete(I)}function q(z){let I=z.target;I.removeEventListener("dispose",q),B(I)}function re(z){let I=i.get(z);if(I.__webglInit===void 0)return;let Q=z.source,pe=y.get(Q);if(pe){let Me=pe[I.__cacheKey];Me.usedTimes--,Me.usedTimes===0&&V(z),Object.keys(pe).length===0&&y.delete(Q)}i.remove(z)}function V(z){let I=i.get(z);n.deleteTexture(I.__webglTexture);let Q=z.source,pe=y.get(Q);delete pe[I.__cacheKey],s.memory.textures--}function B(z){let I=i.get(z);if(z.depthTexture&&(z.depthTexture.dispose(),i.remove(z.depthTexture)),z.isWebGLCubeRenderTarget)for(let pe=0;pe<6;pe++){if(Array.isArray(I.__webglFramebuffer[pe]))for(let Me=0;Me<I.__webglFramebuffer[pe].length;Me++)n.deleteFramebuffer(I.__webglFramebuffer[pe][Me]);else n.deleteFramebuffer(I.__webglFramebuffer[pe]);I.__webglDepthbuffer&&n.deleteRenderbuffer(I.__webglDepthbuffer[pe])}else{if(Array.isArray(I.__webglFramebuffer))for(let pe=0;pe<I.__webglFramebuffer.length;pe++)n.deleteFramebuffer(I.__webglFramebuffer[pe]);else n.deleteFramebuffer(I.__webglFramebuffer);if(I.__webglDepthbuffer&&n.deleteRenderbuffer(I.__webglDepthbuffer),I.__webglMultisampledFramebuffer&&n.deleteFramebuffer(I.__webglMultisampledFramebuffer),I.__webglColorRenderbuffer)for(let pe=0;pe<I.__webglColorRenderbuffer.length;pe++)I.__webglColorRenderbuffer[pe]&&n.deleteRenderbuffer(I.__webglColorRenderbuffer[pe]);I.__webglDepthRenderbuffer&&n.deleteRenderbuffer(I.__webglDepthRenderbuffer)}let Q=z.textures;for(let pe=0,Me=Q.length;pe<Me;pe++){let ce=i.get(Q[pe]);ce.__webglTexture&&(n.deleteTexture(ce.__webglTexture),s.memory.textures--),i.remove(Q[pe])}i.remove(z)}let X=0;function ie(){X=0}function ue(){let z=X;return z>=r.maxTextures&&vt("WebGLTextures: Trying to use "+z+" texture units while this GPU supports only "+r.maxTextures),X+=1,z}function ve(z){let I=[];return I.push(z.wrapS),I.push(z.wrapT),I.push(z.wrapR||0),I.push(z.magFilter),I.push(z.minFilter),I.push(z.anisotropy),I.push(z.internalFormat),I.push(z.format),I.push(z.type),I.push(z.generateMipmaps),I.push(z.premultiplyAlpha),I.push(z.flipY),I.push(z.unpackAlignment),I.push(z.colorSpace),I.join()}function _e(z,I){let Q=i.get(z);if(z.isVideoTexture&&Jt(z),z.isRenderTargetTexture===!1&&z.isExternalTexture!==!0&&z.version>0&&Q.__version!==z.version){let pe=z.image;if(pe===null)vt("WebGLRenderer: Texture marked for update but no image data found.");else if(pe.complete===!1)vt("WebGLRenderer: Texture marked for update but image is incomplete");else{Ce(Q,z,I);return}}else z.isExternalTexture&&(Q.__webglTexture=z.sourceTexture?z.sourceTexture:null);e.bindTexture(n.TEXTURE_2D,Q.__webglTexture,n.TEXTURE0+I)}function me(z,I){let Q=i.get(z);if(z.isRenderTargetTexture===!1&&z.version>0&&Q.__version!==z.version){Ce(Q,z,I);return}else z.isExternalTexture&&(Q.__webglTexture=z.sourceTexture?z.sourceTexture:null);e.bindTexture(n.TEXTURE_2D_ARRAY,Q.__webglTexture,n.TEXTURE0+I)}function he(z,I){let Q=i.get(z);if(z.isRenderTargetTexture===!1&&z.version>0&&Q.__version!==z.version){Ce(Q,z,I);return}e.bindTexture(n.TEXTURE_3D,Q.__webglTexture,n.TEXTURE0+I)}function we(z,I){let Q=i.get(z);if(z.isCubeDepthTexture!==!0&&z.version>0&&Q.__version!==z.version){Ae(Q,z,I);return}e.bindTexture(n.TEXTURE_CUBE_MAP,Q.__webglTexture,n.TEXTURE0+I)}let $e={[tu]:n.REPEAT,[ls]:n.CLAMP_TO_EDGE,[Zg]:n.MIRRORED_REPEAT},Ne={[ki]:n.NEAREST,[$A]:n.NEAREST_MIPMAP_NEAREST,[Lf]:n.NEAREST_MIPMAP_LINEAR,[Li]:n.LINEAR,[O_]:n.LINEAR_MIPMAP_NEAREST,[Xa]:n.LINEAR_MIPMAP_LINEAR},Ye={[XA]:n.NEVER,[eT]:n.ALWAYS,[ZA]:n.LESS,[_v]:n.LEQUAL,[JA]:n.EQUAL,[vv]:n.GEQUAL,[KA]:n.GREATER,[QA]:n.NOTEQUAL};function _t(z,I){if(I.type===Ho&&t.has("OES_texture_float_linear")===!1&&(I.magFilter===Li||I.magFilter===O_||I.magFilter===Lf||I.magFilter===Xa||I.minFilter===Li||I.minFilter===O_||I.minFilter===Lf||I.minFilter===Xa)&&vt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(z,n.TEXTURE_WRAP_S,$e[I.wrapS]),n.texParameteri(z,n.TEXTURE_WRAP_T,$e[I.wrapT]),(z===n.TEXTURE_3D||z===n.TEXTURE_2D_ARRAY)&&n.texParameteri(z,n.TEXTURE_WRAP_R,$e[I.wrapR]),n.texParameteri(z,n.TEXTURE_MAG_FILTER,Ne[I.magFilter]),n.texParameteri(z,n.TEXTURE_MIN_FILTER,Ne[I.minFilter]),I.compareFunction&&(n.texParameteri(z,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(z,n.TEXTURE_COMPARE_FUNC,Ye[I.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(I.magFilter===ki||I.minFilter!==Lf&&I.minFilter!==Xa||I.type===Ho&&t.has("OES_texture_float_linear")===!1)return;if(I.anisotropy>1||i.get(I).__currentAnisotropy){let Q=t.get("EXT_texture_filter_anisotropic");n.texParameterf(z,Q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,r.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy}}}function Pe(z,I){let Q=!1;z.__webglInit===void 0&&(z.__webglInit=!0,I.addEventListener("dispose",Y));let pe=I.source,Me=y.get(pe);Me===void 0&&(Me={},y.set(pe,Me));let ce=ve(I);if(ce!==z.__cacheKey){Me[ce]===void 0&&(Me[ce]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,Q=!0),Me[ce].usedTimes++;let ot=Me[z.__cacheKey];ot!==void 0&&(Me[z.__cacheKey].usedTimes--,ot.usedTimes===0&&V(I)),z.__cacheKey=ce,z.__webglTexture=Me[ce].texture}return Q}function pn(z,I,Q){return Math.floor(Math.floor(z/Q)/I)}function cn(z,I,Q,pe){let ce=z.updateRanges;if(ce.length===0)e.texSubImage2D(n.TEXTURE_2D,0,0,0,I.width,I.height,Q,pe,I.data);else{ce.sort((De,Be)=>De.start-Be.start);let ot=0;for(let De=1;De<ce.length;De++){let Be=ce[ot],Ke=ce[De],ut=Be.start+Be.count,He=pn(Ke.start,I.width,4),Pt=pn(Be.start,I.width,4);Ke.start<=ut+1&&He===Pt&&pn(Ke.start+Ke.count-1,I.width,4)===He?Be.count=Math.max(Be.count,Ke.start+Ke.count-Be.start):(++ot,ce[ot]=Ke)}ce.length=ot+1;let Oe=n.getParameter(n.UNPACK_ROW_LENGTH),st=n.getParameter(n.UNPACK_SKIP_PIXELS),mt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,I.width);for(let De=0,Be=ce.length;De<Be;De++){let Ke=ce[De],ut=Math.floor(Ke.start/4),He=Math.ceil(Ke.count/4),Pt=ut%I.width,ee=Math.floor(ut/I.width),ze=He,ke=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Pt),n.pixelStorei(n.UNPACK_SKIP_ROWS,ee),e.texSubImage2D(n.TEXTURE_2D,0,Pt,ee,ze,ke,Q,pe,I.data)}z.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Oe),n.pixelStorei(n.UNPACK_SKIP_PIXELS,st),n.pixelStorei(n.UNPACK_SKIP_ROWS,mt)}}function Ce(z,I,Q){let pe=n.TEXTURE_2D;(I.isDataArrayTexture||I.isCompressedArrayTexture)&&(pe=n.TEXTURE_2D_ARRAY),I.isData3DTexture&&(pe=n.TEXTURE_3D);let Me=Pe(z,I),ce=I.source;e.bindTexture(pe,z.__webglTexture,n.TEXTURE0+Q);let ot=i.get(ce);if(ce.version!==ot.__version||Me===!0){e.activeTexture(n.TEXTURE0+Q);let Oe=un.getPrimaries(un.workingColorSpace),st=I.colorSpace===Js?null:un.getPrimaries(I.colorSpace),mt=I.colorSpace===Js||Oe===st?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,mt);let De=O(I.image,!1,r.maxTextureSize);De=dt(I,De);let Be=o.convert(I.format,I.colorSpace),Ke=o.convert(I.type),ut=H(I.internalFormat,Be,Ke,I.colorSpace,I.isVideoTexture);_t(pe,I);let He,Pt=I.mipmaps,ee=I.isVideoTexture!==!0,ze=ot.__version===void 0||Me===!0,ke=ce.dataReady,Xe=G(I,De);if(I.isDepthTexture)ut=W(I.format===Za,I.type),ze&&(ee?e.texStorage2D(n.TEXTURE_2D,1,ut,De.width,De.height):e.texImage2D(n.TEXTURE_2D,0,ut,De.width,De.height,0,Be,Ke,null));else if(I.isDataTexture)if(Pt.length>0){ee&&ze&&e.texStorage2D(n.TEXTURE_2D,Xe,ut,Pt[0].width,Pt[0].height);for(let le=0,Ee=Pt.length;le<Ee;le++)He=Pt[le],ee?ke&&e.texSubImage2D(n.TEXTURE_2D,le,0,0,He.width,He.height,Be,Ke,He.data):e.texImage2D(n.TEXTURE_2D,le,ut,He.width,He.height,0,Be,Ke,He.data);I.generateMipmaps=!1}else ee?(ze&&e.texStorage2D(n.TEXTURE_2D,Xe,ut,De.width,De.height),ke&&cn(I,De,Be,Ke)):e.texImage2D(n.TEXTURE_2D,0,ut,De.width,De.height,0,Be,Ke,De.data);else if(I.isCompressedTexture)if(I.isCompressedArrayTexture){ee&&ze&&e.texStorage3D(n.TEXTURE_2D_ARRAY,Xe,ut,Pt[0].width,Pt[0].height,De.depth);for(let le=0,Ee=Pt.length;le<Ee;le++)if(He=Pt[le],I.format!==co)if(Be!==null)if(ee){if(ke)if(I.layerUpdates.size>0){let We=Z2(He.width,He.height,I.format,I.type);for(let ht of I.layerUpdates){let Ft=He.data.subarray(ht*We/He.data.BYTES_PER_ELEMENT,(ht+1)*We/He.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,le,0,0,ht,He.width,He.height,1,Be,Ft)}I.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,le,0,0,0,He.width,He.height,De.depth,Be,He.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,le,ut,He.width,He.height,De.depth,0,He.data,0,0);else vt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ee?ke&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,le,0,0,0,He.width,He.height,De.depth,Be,Ke,He.data):e.texImage3D(n.TEXTURE_2D_ARRAY,le,ut,He.width,He.height,De.depth,0,Be,Ke,He.data)}else{ee&&ze&&e.texStorage2D(n.TEXTURE_2D,Xe,ut,Pt[0].width,Pt[0].height);for(let le=0,Ee=Pt.length;le<Ee;le++)He=Pt[le],I.format!==co?Be!==null?ee?ke&&e.compressedTexSubImage2D(n.TEXTURE_2D,le,0,0,He.width,He.height,Be,He.data):e.compressedTexImage2D(n.TEXTURE_2D,le,ut,He.width,He.height,0,He.data):vt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ee?ke&&e.texSubImage2D(n.TEXTURE_2D,le,0,0,He.width,He.height,Be,Ke,He.data):e.texImage2D(n.TEXTURE_2D,le,ut,He.width,He.height,0,Be,Ke,He.data)}else if(I.isDataArrayTexture)if(ee){if(ze&&e.texStorage3D(n.TEXTURE_2D_ARRAY,Xe,ut,De.width,De.height,De.depth),ke)if(I.layerUpdates.size>0){let le=Z2(De.width,De.height,I.format,I.type);for(let Ee of I.layerUpdates){let We=De.data.subarray(Ee*le/De.data.BYTES_PER_ELEMENT,(Ee+1)*le/De.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ee,De.width,De.height,1,Be,Ke,We)}I.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,De.width,De.height,De.depth,Be,Ke,De.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,ut,De.width,De.height,De.depth,0,Be,Ke,De.data);else if(I.isData3DTexture)ee?(ze&&e.texStorage3D(n.TEXTURE_3D,Xe,ut,De.width,De.height,De.depth),ke&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,De.width,De.height,De.depth,Be,Ke,De.data)):e.texImage3D(n.TEXTURE_3D,0,ut,De.width,De.height,De.depth,0,Be,Ke,De.data);else if(I.isFramebufferTexture){if(ze)if(ee)e.texStorage2D(n.TEXTURE_2D,Xe,ut,De.width,De.height);else{let le=De.width,Ee=De.height;for(let We=0;We<Xe;We++)e.texImage2D(n.TEXTURE_2D,We,ut,le,Ee,0,Be,Ke,null),le>>=1,Ee>>=1}}else if(Pt.length>0){if(ee&&ze){let le=Je(Pt[0]);e.texStorage2D(n.TEXTURE_2D,Xe,ut,le.width,le.height)}for(let le=0,Ee=Pt.length;le<Ee;le++)He=Pt[le],ee?ke&&e.texSubImage2D(n.TEXTURE_2D,le,0,0,Be,Ke,He):e.texImage2D(n.TEXTURE_2D,le,ut,Be,Ke,He);I.generateMipmaps=!1}else if(ee){if(ze){let le=Je(De);e.texStorage2D(n.TEXTURE_2D,Xe,ut,le.width,le.height)}ke&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Be,Ke,De)}else e.texImage2D(n.TEXTURE_2D,0,ut,Be,Ke,De);E(I)&&w(pe),ot.__version=ce.version,I.onUpdate&&I.onUpdate(I)}z.__version=I.version}function Ae(z,I,Q){if(I.image.length!==6)return;let pe=Pe(z,I),Me=I.source;e.bindTexture(n.TEXTURE_CUBE_MAP,z.__webglTexture,n.TEXTURE0+Q);let ce=i.get(Me);if(Me.version!==ce.__version||pe===!0){e.activeTexture(n.TEXTURE0+Q);let ot=un.getPrimaries(un.workingColorSpace),Oe=I.colorSpace===Js?null:un.getPrimaries(I.colorSpace),st=I.colorSpace===Js||ot===Oe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,st);let mt=I.isCompressedTexture||I.image[0].isCompressedTexture,De=I.image[0]&&I.image[0].isDataTexture,Be=[];for(let Ee=0;Ee<6;Ee++)!mt&&!De?Be[Ee]=O(I.image[Ee],!0,r.maxCubemapSize):Be[Ee]=De?I.image[Ee].image:I.image[Ee],Be[Ee]=dt(I,Be[Ee]);let Ke=Be[0],ut=o.convert(I.format,I.colorSpace),He=o.convert(I.type),Pt=H(I.internalFormat,ut,He,I.colorSpace),ee=I.isVideoTexture!==!0,ze=ce.__version===void 0||pe===!0,ke=Me.dataReady,Xe=G(I,Ke);_t(n.TEXTURE_CUBE_MAP,I);let le;if(mt){ee&&ze&&e.texStorage2D(n.TEXTURE_CUBE_MAP,Xe,Pt,Ke.width,Ke.height);for(let Ee=0;Ee<6;Ee++){le=Be[Ee].mipmaps;for(let We=0;We<le.length;We++){let ht=le[We];I.format!==co?ut!==null?ee?ke&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We,0,0,ht.width,ht.height,ut,ht.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We,Pt,ht.width,ht.height,0,ht.data):vt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ee?ke&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We,0,0,ht.width,ht.height,ut,He,ht.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We,Pt,ht.width,ht.height,0,ut,He,ht.data)}}}else{if(le=I.mipmaps,ee&&ze){le.length>0&&Xe++;let Ee=Je(Be[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,Xe,Pt,Ee.width,Ee.height)}for(let Ee=0;Ee<6;Ee++)if(De){ee?ke&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,0,0,Be[Ee].width,Be[Ee].height,ut,He,Be[Ee].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,Pt,Be[Ee].width,Be[Ee].height,0,ut,He,Be[Ee].data);for(let We=0;We<le.length;We++){let Ft=le[We].image[Ee].image;ee?ke&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We+1,0,0,Ft.width,Ft.height,ut,He,Ft.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We+1,Pt,Ft.width,Ft.height,0,ut,He,Ft.data)}}else{ee?ke&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,0,0,ut,He,Be[Ee]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,Pt,ut,He,Be[Ee]);for(let We=0;We<le.length;We++){let ht=le[We];ee?ke&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We+1,0,0,ut,He,ht.image[Ee]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We+1,Pt,ut,He,ht.image[Ee])}}}E(I)&&w(n.TEXTURE_CUBE_MAP),ce.__version=Me.version,I.onUpdate&&I.onUpdate(I)}z.__version=I.version}function et(z,I,Q,pe,Me,ce){let ot=o.convert(Q.format,Q.colorSpace),Oe=o.convert(Q.type),st=H(Q.internalFormat,ot,Oe,Q.colorSpace),mt=i.get(I),De=i.get(Q);if(De.__renderTarget=I,!mt.__hasExternalTextures){let Be=Math.max(1,I.width>>ce),Ke=Math.max(1,I.height>>ce);Me===n.TEXTURE_3D||Me===n.TEXTURE_2D_ARRAY?e.texImage3D(Me,ce,st,Be,Ke,I.depth,0,ot,Oe,null):e.texImage2D(Me,ce,st,Be,Ke,0,ot,Oe,null)}e.bindFramebuffer(n.FRAMEBUFFER,z),en(I)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,pe,Me,De.__webglTexture,0,J(I)):(Me===n.TEXTURE_2D||Me>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Me<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,pe,Me,De.__webglTexture,ce),e.bindFramebuffer(n.FRAMEBUFFER,null)}function wt(z,I,Q){if(n.bindRenderbuffer(n.RENDERBUFFER,z),I.depthBuffer){let pe=I.depthTexture,Me=pe&&pe.isDepthTexture?pe.type:null,ce=W(I.stencilBuffer,Me),ot=I.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;en(I)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,J(I),ce,I.width,I.height):Q?n.renderbufferStorageMultisample(n.RENDERBUFFER,J(I),ce,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,ce,I.width,I.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,ot,n.RENDERBUFFER,z)}else{let pe=I.textures;for(let Me=0;Me<pe.length;Me++){let ce=pe[Me],ot=o.convert(ce.format,ce.colorSpace),Oe=o.convert(ce.type),st=H(ce.internalFormat,ot,Oe,ce.colorSpace);en(I)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,J(I),st,I.width,I.height):Q?n.renderbufferStorageMultisample(n.RENDERBUFFER,J(I),st,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,st,I.width,I.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function lt(z,I,Q){let pe=I.isWebGLCubeRenderTarget===!0;if(e.bindFramebuffer(n.FRAMEBUFFER,z),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let Me=i.get(I.depthTexture);if(Me.__renderTarget=I,(!Me.__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),pe){if(Me.__webglInit===void 0&&(Me.__webglInit=!0,I.depthTexture.addEventListener("dispose",Y)),Me.__webglTexture===void 0){Me.__webglTexture=n.createTexture(),e.bindTexture(n.TEXTURE_CUBE_MAP,Me.__webglTexture),_t(n.TEXTURE_CUBE_MAP,I.depthTexture);let mt=o.convert(I.depthTexture.format),De=o.convert(I.depthTexture.type),Be;I.depthTexture.format===us?Be=n.DEPTH_COMPONENT24:I.depthTexture.format===Za&&(Be=n.DEPTH24_STENCIL8);for(let Ke=0;Ke<6;Ke++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,Be,I.width,I.height,0,mt,De,null)}}else _e(I.depthTexture,0);let ce=Me.__webglTexture,ot=J(I),Oe=pe?n.TEXTURE_CUBE_MAP_POSITIVE_X+Q:n.TEXTURE_2D,st=I.depthTexture.format===Za?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(I.depthTexture.format===us)en(I)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,st,Oe,ce,0,ot):n.framebufferTexture2D(n.FRAMEBUFFER,st,Oe,ce,0);else if(I.depthTexture.format===Za)en(I)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,st,Oe,ce,0,ot):n.framebufferTexture2D(n.FRAMEBUFFER,st,Oe,ce,0);else throw new Error("Unknown depthTexture format")}function qt(z){let I=i.get(z),Q=z.isWebGLCubeRenderTarget===!0;if(I.__boundDepthTexture!==z.depthTexture){let pe=z.depthTexture;if(I.__depthDisposeCallback&&I.__depthDisposeCallback(),pe){let Me=()=>{delete I.__boundDepthTexture,delete I.__depthDisposeCallback,pe.removeEventListener("dispose",Me)};pe.addEventListener("dispose",Me),I.__depthDisposeCallback=Me}I.__boundDepthTexture=pe}if(z.depthTexture&&!I.__autoAllocateDepthBuffer)if(Q)for(let pe=0;pe<6;pe++)lt(I.__webglFramebuffer[pe],z,pe);else{let pe=z.texture.mipmaps;pe&&pe.length>0?lt(I.__webglFramebuffer[0],z,0):lt(I.__webglFramebuffer,z,0)}else if(Q){I.__webglDepthbuffer=[];for(let pe=0;pe<6;pe++)if(e.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer[pe]),I.__webglDepthbuffer[pe]===void 0)I.__webglDepthbuffer[pe]=n.createRenderbuffer(),wt(I.__webglDepthbuffer[pe],z,!1);else{let Me=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ce=I.__webglDepthbuffer[pe];n.bindRenderbuffer(n.RENDERBUFFER,ce),n.framebufferRenderbuffer(n.FRAMEBUFFER,Me,n.RENDERBUFFER,ce)}}else{let pe=z.texture.mipmaps;if(pe&&pe.length>0?e.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer[0]):e.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer),I.__webglDepthbuffer===void 0)I.__webglDepthbuffer=n.createRenderbuffer(),wt(I.__webglDepthbuffer,z,!1);else{let Me=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ce=I.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ce),n.framebufferRenderbuffer(n.FRAMEBUFFER,Me,n.RENDERBUFFER,ce)}}e.bindFramebuffer(n.FRAMEBUFFER,null)}function Bn(z,I,Q){let pe=i.get(z);I!==void 0&&et(pe.__webglFramebuffer,z,z.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Q!==void 0&&qt(z)}function Zt(z){let I=z.texture,Q=i.get(z),pe=i.get(I);z.addEventListener("dispose",q);let Me=z.textures,ce=z.isWebGLCubeRenderTarget===!0,ot=Me.length>1;if(ot||(pe.__webglTexture===void 0&&(pe.__webglTexture=n.createTexture()),pe.__version=I.version,s.memory.textures++),ce){Q.__webglFramebuffer=[];for(let Oe=0;Oe<6;Oe++)if(I.mipmaps&&I.mipmaps.length>0){Q.__webglFramebuffer[Oe]=[];for(let st=0;st<I.mipmaps.length;st++)Q.__webglFramebuffer[Oe][st]=n.createFramebuffer()}else Q.__webglFramebuffer[Oe]=n.createFramebuffer()}else{if(I.mipmaps&&I.mipmaps.length>0){Q.__webglFramebuffer=[];for(let Oe=0;Oe<I.mipmaps.length;Oe++)Q.__webglFramebuffer[Oe]=n.createFramebuffer()}else Q.__webglFramebuffer=n.createFramebuffer();if(ot)for(let Oe=0,st=Me.length;Oe<st;Oe++){let mt=i.get(Me[Oe]);mt.__webglTexture===void 0&&(mt.__webglTexture=n.createTexture(),s.memory.textures++)}if(z.samples>0&&en(z)===!1){Q.__webglMultisampledFramebuffer=n.createFramebuffer(),Q.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,Q.__webglMultisampledFramebuffer);for(let Oe=0;Oe<Me.length;Oe++){let st=Me[Oe];Q.__webglColorRenderbuffer[Oe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Q.__webglColorRenderbuffer[Oe]);let mt=o.convert(st.format,st.colorSpace),De=o.convert(st.type),Be=H(st.internalFormat,mt,De,st.colorSpace,z.isXRRenderTarget===!0),Ke=J(z);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ke,Be,z.width,z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Oe,n.RENDERBUFFER,Q.__webglColorRenderbuffer[Oe])}n.bindRenderbuffer(n.RENDERBUFFER,null),z.depthBuffer&&(Q.__webglDepthRenderbuffer=n.createRenderbuffer(),wt(Q.__webglDepthRenderbuffer,z,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ce){e.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture),_t(n.TEXTURE_CUBE_MAP,I);for(let Oe=0;Oe<6;Oe++)if(I.mipmaps&&I.mipmaps.length>0)for(let st=0;st<I.mipmaps.length;st++)et(Q.__webglFramebuffer[Oe][st],z,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,st);else et(Q.__webglFramebuffer[Oe],z,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0);E(I)&&w(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(ot){for(let Oe=0,st=Me.length;Oe<st;Oe++){let mt=Me[Oe],De=i.get(mt),Be=n.TEXTURE_2D;(z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(Be=z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(Be,De.__webglTexture),_t(Be,mt),et(Q.__webglFramebuffer,z,mt,n.COLOR_ATTACHMENT0+Oe,Be,0),E(mt)&&w(Be)}e.unbindTexture()}else{let Oe=n.TEXTURE_2D;if((z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(Oe=z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(Oe,pe.__webglTexture),_t(Oe,I),I.mipmaps&&I.mipmaps.length>0)for(let st=0;st<I.mipmaps.length;st++)et(Q.__webglFramebuffer[st],z,I,n.COLOR_ATTACHMENT0,Oe,st);else et(Q.__webglFramebuffer,z,I,n.COLOR_ATTACHMENT0,Oe,0);E(I)&&w(Oe),e.unbindTexture()}z.depthBuffer&&qt(z)}function Mt(z){let I=z.textures;for(let Q=0,pe=I.length;Q<pe;Q++){let Me=I[Q];if(E(Me)){let ce=j(z),ot=i.get(Me).__webglTexture;e.bindTexture(ce,ot),w(ce),e.unbindTexture()}}}let Gt=[],Dt=[];function Qt(z){if(z.samples>0){if(en(z)===!1){let I=z.textures,Q=z.width,pe=z.height,Me=n.COLOR_BUFFER_BIT,ce=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ot=i.get(z),Oe=I.length>1;if(Oe)for(let mt=0;mt<I.length;mt++)e.bindFramebuffer(n.FRAMEBUFFER,ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+mt,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,ot.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+mt,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,ot.__webglMultisampledFramebuffer);let st=z.texture.mipmaps;st&&st.length>0?e.bindFramebuffer(n.DRAW_FRAMEBUFFER,ot.__webglFramebuffer[0]):e.bindFramebuffer(n.DRAW_FRAMEBUFFER,ot.__webglFramebuffer);for(let mt=0;mt<I.length;mt++){if(z.resolveDepthBuffer&&(z.depthBuffer&&(Me|=n.DEPTH_BUFFER_BIT),z.stencilBuffer&&z.resolveStencilBuffer&&(Me|=n.STENCIL_BUFFER_BIT)),Oe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ot.__webglColorRenderbuffer[mt]);let De=i.get(I[mt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,De,0)}n.blitFramebuffer(0,0,Q,pe,0,0,Q,pe,Me,n.NEAREST),d===!0&&(Gt.length=0,Dt.length=0,Gt.push(n.COLOR_ATTACHMENT0+mt),z.depthBuffer&&z.resolveDepthBuffer===!1&&(Gt.push(ce),Dt.push(ce),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Dt)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Gt))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Oe)for(let mt=0;mt<I.length;mt++){e.bindFramebuffer(n.FRAMEBUFFER,ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+mt,n.RENDERBUFFER,ot.__webglColorRenderbuffer[mt]);let De=i.get(I[mt]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,ot.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+mt,n.TEXTURE_2D,De,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,ot.__webglMultisampledFramebuffer)}else if(z.depthBuffer&&z.resolveDepthBuffer===!1&&d){let I=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[I])}}}function J(z){return Math.min(r.maxSamples,z.samples)}function en(z){let I=i.get(z);return z.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&I.__useRenderToTexture!==!1}function Jt(z){let I=s.render.frame;_.get(z)!==I&&(_.set(z,I),z.update())}function dt(z,I){let Q=z.colorSpace,pe=z.format,Me=z.type;return z.isCompressedTexture===!0||z.isVideoTexture===!0||Q!==nu&&Q!==Js&&(un.getTransfer(Q)===wn?(pe!==co||Me!==wr)&&vt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):bt("WebGLTextures: Unsupported texture color space:",Q)),I}function Je(z){return typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement?(p.width=z.naturalWidth||z.width,p.height=z.naturalHeight||z.height):typeof VideoFrame<"u"&&z instanceof VideoFrame?(p.width=z.displayWidth,p.height=z.displayHeight):(p.width=z.width,p.height=z.height),p}this.allocateTextureUnit=ue,this.resetTextureUnits=ie,this.setTexture2D=_e,this.setTexture2DArray=me,this.setTexture3D=he,this.setTextureCube=we,this.rebindTextures=Bn,this.setupRenderTarget=Zt,this.updateRenderTargetMipmap=Mt,this.updateMultisampleRenderTarget=Qt,this.setupDepthRenderbuffer=qt,this.setupFrameBufferTexture=et,this.useMultisampledRTT=en,this.isReversedDepthBuffer=function(){return e.buffers.depth.getReversed()}}function DH(n,t){function e(i,r=Js){let o,s=un.getTransfer(r);if(i===wr)return n.UNSIGNED_BYTE;if(i===k_)return n.UNSIGNED_SHORT_4_4_4_4;if(i===F_)return n.UNSIGNED_SHORT_5_5_5_1;if(i===F2)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===N2)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===R2)return n.BYTE;if(i===k2)return n.SHORT;if(i===nd)return n.UNSIGNED_SHORT;if(i===R_)return n.INT;if(i===zo)return n.UNSIGNED_INT;if(i===Ho)return n.FLOAT;if(i===hs)return n.HALF_FLOAT;if(i===L2)return n.ALPHA;if(i===V2)return n.RGB;if(i===co)return n.RGBA;if(i===us)return n.DEPTH_COMPONENT;if(i===Za)return n.DEPTH_STENCIL;if(i===U2)return n.RED;if(i===N_)return n.RED_INTEGER;if(i===au)return n.RG;if(i===L_)return n.RG_INTEGER;if(i===V_)return n.RGBA_INTEGER;if(i===Vf||i===Uf||i===Bf||i===zf)if(s===wn)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===Vf)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Uf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Bf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===zf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===Vf)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Uf)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Bf)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===zf)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===U_||i===B_||i===z_||i===H_)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===U_)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===B_)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===z_)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===H_)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===j_||i===W_||i===G_||i===$_||i===Y_||i===q_||i===X_)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(i===j_||i===W_)return s===wn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===G_)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC;if(i===$_)return o.COMPRESSED_R11_EAC;if(i===Y_)return o.COMPRESSED_SIGNED_R11_EAC;if(i===q_)return o.COMPRESSED_RG11_EAC;if(i===X_)return o.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===Z_||i===J_||i===K_||i===Q_||i===ev||i===tv||i===nv||i===iv||i===rv||i===ov||i===sv||i===av||i===lv||i===uv)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(i===Z_)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===J_)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===K_)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Q_)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===ev)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===tv)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===nv)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===iv)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===rv)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===ov)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===sv)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===av)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===lv)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===uv)return s===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===cv||i===dv||i===fv)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(i===cv)return s===wn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===dv)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===fv)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===hv||i===pv||i===mv||i===gv)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(i===hv)return o.COMPRESSED_RED_RGTC1_EXT;if(i===pv)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===mv)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===gv)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===id?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}var PH=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,IH=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,cC=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e){if(this.texture===null){let i=new Ef(t.texture);(t.depthNear!==e.depthNear||t.depthFar!==e.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(t){if(this.texture!==null&&this.mesh===null){let e=t.cameras[0].viewport,i=new jr({vertexShader:PH,fragmentShader:IH,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new sn(new ds(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},dC=class extends cs{constructor(t,e){super();let i=this,r=null,o=1,s=null,u="local-floor",d=1,p=null,_=null,m=null,y=null,b=null,M=null,O=typeof XRWebGLBinding<"u",E=new cC,w={},j=e.getContextAttributes(),H=null,W=null,G=[],Y=[],q=new Et,re=null,V=new $i;V.viewport=new ei;let B=new $i;B.viewport=new ei;let X=[V,B],ie=new y_,ue=null,ve=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ce){let Ae=G[Ce];return Ae===void 0&&(Ae=new Xc,G[Ce]=Ae),Ae.getTargetRaySpace()},this.getControllerGrip=function(Ce){let Ae=G[Ce];return Ae===void 0&&(Ae=new Xc,G[Ce]=Ae),Ae.getGripSpace()},this.getHand=function(Ce){let Ae=G[Ce];return Ae===void 0&&(Ae=new Xc,G[Ce]=Ae),Ae.getHandSpace()};function _e(Ce){let Ae=Y.indexOf(Ce.inputSource);if(Ae===-1)return;let et=G[Ae];et!==void 0&&(et.update(Ce.inputSource,Ce.frame,p||s),et.dispatchEvent({type:Ce.type,data:Ce.inputSource}))}function me(){r.removeEventListener("select",_e),r.removeEventListener("selectstart",_e),r.removeEventListener("selectend",_e),r.removeEventListener("squeeze",_e),r.removeEventListener("squeezestart",_e),r.removeEventListener("squeezeend",_e),r.removeEventListener("end",me),r.removeEventListener("inputsourceschange",he);for(let Ce=0;Ce<G.length;Ce++){let Ae=Y[Ce];Ae!==null&&(Y[Ce]=null,G[Ce].disconnect(Ae))}ue=null,ve=null,E.reset();for(let Ce in w)delete w[Ce];t.setRenderTarget(H),b=null,y=null,m=null,r=null,W=null,cn.stop(),i.isPresenting=!1,t.setPixelRatio(re),t.setSize(q.width,q.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ce){o=Ce,i.isPresenting===!0&&vt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ce){u=Ce,i.isPresenting===!0&&vt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||s},this.setReferenceSpace=function(Ce){p=Ce},this.getBaseLayer=function(){return y!==null?y:b},this.getBinding=function(){return m===null&&O&&(m=new XRWebGLBinding(r,e)),m},this.getFrame=function(){return M},this.getSession=function(){return r},this.setSession=function(Ce){return _n(this,null,function*(){if(r=Ce,r!==null){if(H=t.getRenderTarget(),r.addEventListener("select",_e),r.addEventListener("selectstart",_e),r.addEventListener("selectend",_e),r.addEventListener("squeeze",_e),r.addEventListener("squeezestart",_e),r.addEventListener("squeezeend",_e),r.addEventListener("end",me),r.addEventListener("inputsourceschange",he),j.xrCompatible!==!0&&(yield e.makeXRCompatible()),re=t.getPixelRatio(),t.getSize(q),O&&"createProjectionLayer"in XRWebGLBinding.prototype){let et=null,wt=null,lt=null;j.depth&&(lt=j.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,et=j.stencil?Za:us,wt=j.stencil?id:zo);let qt={colorFormat:e.RGBA8,depthFormat:lt,scaleFactor:o};m=this.getBinding(),y=m.createProjectionLayer(qt),r.updateRenderState({layers:[y]}),t.setPixelRatio(1),t.setSize(y.textureWidth,y.textureHeight,!1),W=new Hr(y.textureWidth,y.textureHeight,{format:co,type:wr,depthTexture:new ja(y.textureWidth,y.textureHeight,wt,void 0,void 0,void 0,void 0,void 0,void 0,et),stencilBuffer:j.stencil,colorSpace:t.outputColorSpace,samples:j.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{let et={antialias:j.antialias,alpha:!0,depth:j.depth,stencil:j.stencil,framebufferScaleFactor:o};b=new XRWebGLLayer(r,e,et),r.updateRenderState({baseLayer:b}),t.setPixelRatio(1),t.setSize(b.framebufferWidth,b.framebufferHeight,!1),W=new Hr(b.framebufferWidth,b.framebufferHeight,{format:co,type:wr,colorSpace:t.outputColorSpace,stencilBuffer:j.stencil,resolveDepthBuffer:b.ignoreDepthValues===!1,resolveStencilBuffer:b.ignoreDepthValues===!1})}W.isXRRenderTarget=!0,this.setFoveation(d),p=null,s=yield r.requestReferenceSpace(u),cn.setContext(r),cn.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return E.getDepthTexture()};function he(Ce){for(let Ae=0;Ae<Ce.removed.length;Ae++){let et=Ce.removed[Ae],wt=Y.indexOf(et);wt>=0&&(Y[wt]=null,G[wt].disconnect(et))}for(let Ae=0;Ae<Ce.added.length;Ae++){let et=Ce.added[Ae],wt=Y.indexOf(et);if(wt===-1){for(let qt=0;qt<G.length;qt++)if(qt>=Y.length){Y.push(et),wt=qt;break}else if(Y[qt]===null){Y[qt]=et,wt=qt;break}if(wt===-1)break}let lt=G[wt];lt&&lt.connect(et)}}let we=new se,$e=new se;function Ne(Ce,Ae,et){we.setFromMatrixPosition(Ae.matrixWorld),$e.setFromMatrixPosition(et.matrixWorld);let wt=we.distanceTo($e),lt=Ae.projectionMatrix.elements,qt=et.projectionMatrix.elements,Bn=lt[14]/(lt[10]-1),Zt=lt[14]/(lt[10]+1),Mt=(lt[9]+1)/lt[5],Gt=(lt[9]-1)/lt[5],Dt=(lt[8]-1)/lt[0],Qt=(qt[8]+1)/qt[0],J=Bn*Dt,en=Bn*Qt,Jt=wt/(-Dt+Qt),dt=Jt*-Dt;if(Ae.matrixWorld.decompose(Ce.position,Ce.quaternion,Ce.scale),Ce.translateX(dt),Ce.translateZ(Jt),Ce.matrixWorld.compose(Ce.position,Ce.quaternion,Ce.scale),Ce.matrixWorldInverse.copy(Ce.matrixWorld).invert(),lt[10]===-1)Ce.projectionMatrix.copy(Ae.projectionMatrix),Ce.projectionMatrixInverse.copy(Ae.projectionMatrixInverse);else{let Je=Bn+Jt,z=Zt+Jt,I=J-dt,Q=en+(wt-dt),pe=Mt*Zt/z*Je,Me=Gt*Zt/z*Je;Ce.projectionMatrix.makePerspective(I,Q,pe,Me,Je,z),Ce.projectionMatrixInverse.copy(Ce.projectionMatrix).invert()}}function Ye(Ce,Ae){Ae===null?Ce.matrixWorld.copy(Ce.matrix):Ce.matrixWorld.multiplyMatrices(Ae.matrixWorld,Ce.matrix),Ce.matrixWorldInverse.copy(Ce.matrixWorld).invert()}this.updateCamera=function(Ce){if(r===null)return;let Ae=Ce.near,et=Ce.far;E.texture!==null&&(E.depthNear>0&&(Ae=E.depthNear),E.depthFar>0&&(et=E.depthFar)),ie.near=B.near=V.near=Ae,ie.far=B.far=V.far=et,(ue!==ie.near||ve!==ie.far)&&(r.updateRenderState({depthNear:ie.near,depthFar:ie.far}),ue=ie.near,ve=ie.far),ie.layers.mask=Ce.layers.mask|6,V.layers.mask=ie.layers.mask&3,B.layers.mask=ie.layers.mask&5;let wt=Ce.parent,lt=ie.cameras;Ye(ie,wt);for(let qt=0;qt<lt.length;qt++)Ye(lt[qt],wt);lt.length===2?Ne(ie,V,B):ie.projectionMatrix.copy(V.projectionMatrix),_t(Ce,ie,wt)};function _t(Ce,Ae,et){et===null?Ce.matrix.copy(Ae.matrixWorld):(Ce.matrix.copy(et.matrixWorld),Ce.matrix.invert(),Ce.matrix.multiply(Ae.matrixWorld)),Ce.matrix.decompose(Ce.position,Ce.quaternion,Ce.scale),Ce.updateMatrixWorld(!0),Ce.projectionMatrix.copy(Ae.projectionMatrix),Ce.projectionMatrixInverse.copy(Ae.projectionMatrixInverse),Ce.isPerspectiveCamera&&(Ce.fov=Yc*2*Math.atan(1/Ce.projectionMatrix.elements[5]),Ce.zoom=1)}this.getCamera=function(){return ie},this.getFoveation=function(){if(!(y===null&&b===null))return d},this.setFoveation=function(Ce){d=Ce,y!==null&&(y.fixedFoveation=Ce),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=Ce)},this.hasDepthSensing=function(){return E.texture!==null},this.getDepthSensingMesh=function(){return E.getMesh(ie)},this.getCameraTexture=function(Ce){return w[Ce]};let Pe=null;function pn(Ce,Ae){if(_=Ae.getViewerPose(p||s),M=Ae,_!==null){let et=_.views;b!==null&&(t.setRenderTargetFramebuffer(W,b.framebuffer),t.setRenderTarget(W));let wt=!1;et.length!==ie.cameras.length&&(ie.cameras.length=0,wt=!0);for(let Zt=0;Zt<et.length;Zt++){let Mt=et[Zt],Gt=null;if(b!==null)Gt=b.getViewport(Mt);else{let Qt=m.getViewSubImage(y,Mt);Gt=Qt.viewport,Zt===0&&(t.setRenderTargetTextures(W,Qt.colorTexture,Qt.depthStencilTexture),t.setRenderTarget(W))}let Dt=X[Zt];Dt===void 0&&(Dt=new $i,Dt.layers.enable(Zt),Dt.viewport=new ei,X[Zt]=Dt),Dt.matrix.fromArray(Mt.transform.matrix),Dt.matrix.decompose(Dt.position,Dt.quaternion,Dt.scale),Dt.projectionMatrix.fromArray(Mt.projectionMatrix),Dt.projectionMatrixInverse.copy(Dt.projectionMatrix).invert(),Dt.viewport.set(Gt.x,Gt.y,Gt.width,Gt.height),Zt===0&&(ie.matrix.copy(Dt.matrix),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale)),wt===!0&&ie.cameras.push(Dt)}let lt=r.enabledFeatures;if(lt&&lt.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&O){m=i.getBinding();let Zt=m.getDepthInformation(et[0]);Zt&&Zt.isValid&&Zt.texture&&E.init(Zt,r.renderState)}if(lt&&lt.includes("camera-access")&&O){t.state.unbindTexture(),m=i.getBinding();for(let Zt=0;Zt<et.length;Zt++){let Mt=et[Zt].camera;if(Mt){let Gt=w[Mt];Gt||(Gt=new Ef,w[Mt]=Gt);let Dt=m.getCameraImage(Mt);Gt.sourceTexture=Dt}}}}for(let et=0;et<G.length;et++){let wt=Y[et],lt=G[et];wt!==null&&lt!==void 0&&lt.update(wt,Ae,p||s)}Pe&&Pe(Ce,Ae),Ae.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ae}),M=null}let cn=new TT;cn.setAnimationLoop(pn),this.setAnimationLoop=function(Ce){Pe=Ce},this.dispose=function(){}}},cu=new za,OH=new Qn;function RH(n,t){function e(E,w){E.matrixAutoUpdate===!0&&E.updateMatrix(),w.value.copy(E.matrix)}function i(E,w){w.color.getRGB(E.fogColor.value,$2(n)),w.isFog?(E.fogNear.value=w.near,E.fogFar.value=w.far):w.isFogExp2&&(E.fogDensity.value=w.density)}function r(E,w,j,H,W){w.isMeshBasicMaterial||w.isMeshLambertMaterial?o(E,w):w.isMeshToonMaterial?(o(E,w),m(E,w)):w.isMeshPhongMaterial?(o(E,w),_(E,w)):w.isMeshStandardMaterial?(o(E,w),y(E,w),w.isMeshPhysicalMaterial&&b(E,w,W)):w.isMeshMatcapMaterial?(o(E,w),M(E,w)):w.isMeshDepthMaterial?o(E,w):w.isMeshDistanceMaterial?(o(E,w),O(E,w)):w.isMeshNormalMaterial?o(E,w):w.isLineBasicMaterial?(s(E,w),w.isLineDashedMaterial&&u(E,w)):w.isPointsMaterial?d(E,w,j,H):w.isSpriteMaterial?p(E,w):w.isShadowMaterial?(E.color.value.copy(w.color),E.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function o(E,w){E.opacity.value=w.opacity,w.color&&E.diffuse.value.copy(w.color),w.emissive&&E.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(E.map.value=w.map,e(w.map,E.mapTransform)),w.alphaMap&&(E.alphaMap.value=w.alphaMap,e(w.alphaMap,E.alphaMapTransform)),w.bumpMap&&(E.bumpMap.value=w.bumpMap,e(w.bumpMap,E.bumpMapTransform),E.bumpScale.value=w.bumpScale,w.side===nr&&(E.bumpScale.value*=-1)),w.normalMap&&(E.normalMap.value=w.normalMap,e(w.normalMap,E.normalMapTransform),E.normalScale.value.copy(w.normalScale),w.side===nr&&E.normalScale.value.negate()),w.displacementMap&&(E.displacementMap.value=w.displacementMap,e(w.displacementMap,E.displacementMapTransform),E.displacementScale.value=w.displacementScale,E.displacementBias.value=w.displacementBias),w.emissiveMap&&(E.emissiveMap.value=w.emissiveMap,e(w.emissiveMap,E.emissiveMapTransform)),w.specularMap&&(E.specularMap.value=w.specularMap,e(w.specularMap,E.specularMapTransform)),w.alphaTest>0&&(E.alphaTest.value=w.alphaTest);let j=t.get(w),H=j.envMap,W=j.envMapRotation;H&&(E.envMap.value=H,cu.copy(W),cu.x*=-1,cu.y*=-1,cu.z*=-1,H.isCubeTexture&&H.isRenderTargetTexture===!1&&(cu.y*=-1,cu.z*=-1),E.envMapRotation.value.setFromMatrix4(OH.makeRotationFromEuler(cu)),E.flipEnvMap.value=H.isCubeTexture&&H.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=w.reflectivity,E.ior.value=w.ior,E.refractionRatio.value=w.refractionRatio),w.lightMap&&(E.lightMap.value=w.lightMap,E.lightMapIntensity.value=w.lightMapIntensity,e(w.lightMap,E.lightMapTransform)),w.aoMap&&(E.aoMap.value=w.aoMap,E.aoMapIntensity.value=w.aoMapIntensity,e(w.aoMap,E.aoMapTransform))}function s(E,w){E.diffuse.value.copy(w.color),E.opacity.value=w.opacity,w.map&&(E.map.value=w.map,e(w.map,E.mapTransform))}function u(E,w){E.dashSize.value=w.dashSize,E.totalSize.value=w.dashSize+w.gapSize,E.scale.value=w.scale}function d(E,w,j,H){E.diffuse.value.copy(w.color),E.opacity.value=w.opacity,E.size.value=w.size*j,E.scale.value=H*.5,w.map&&(E.map.value=w.map,e(w.map,E.uvTransform)),w.alphaMap&&(E.alphaMap.value=w.alphaMap,e(w.alphaMap,E.alphaMapTransform)),w.alphaTest>0&&(E.alphaTest.value=w.alphaTest)}function p(E,w){E.diffuse.value.copy(w.color),E.opacity.value=w.opacity,E.rotation.value=w.rotation,w.map&&(E.map.value=w.map,e(w.map,E.mapTransform)),w.alphaMap&&(E.alphaMap.value=w.alphaMap,e(w.alphaMap,E.alphaMapTransform)),w.alphaTest>0&&(E.alphaTest.value=w.alphaTest)}function _(E,w){E.specular.value.copy(w.specular),E.shininess.value=Math.max(w.shininess,1e-4)}function m(E,w){w.gradientMap&&(E.gradientMap.value=w.gradientMap)}function y(E,w){E.metalness.value=w.metalness,w.metalnessMap&&(E.metalnessMap.value=w.metalnessMap,e(w.metalnessMap,E.metalnessMapTransform)),E.roughness.value=w.roughness,w.roughnessMap&&(E.roughnessMap.value=w.roughnessMap,e(w.roughnessMap,E.roughnessMapTransform)),w.envMap&&(E.envMapIntensity.value=w.envMapIntensity)}function b(E,w,j){E.ior.value=w.ior,w.sheen>0&&(E.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),E.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(E.sheenColorMap.value=w.sheenColorMap,e(w.sheenColorMap,E.sheenColorMapTransform)),w.sheenRoughnessMap&&(E.sheenRoughnessMap.value=w.sheenRoughnessMap,e(w.sheenRoughnessMap,E.sheenRoughnessMapTransform))),w.clearcoat>0&&(E.clearcoat.value=w.clearcoat,E.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(E.clearcoatMap.value=w.clearcoatMap,e(w.clearcoatMap,E.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,e(w.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(E.clearcoatNormalMap.value=w.clearcoatNormalMap,e(w.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===nr&&E.clearcoatNormalScale.value.negate())),w.dispersion>0&&(E.dispersion.value=w.dispersion),w.iridescence>0&&(E.iridescence.value=w.iridescence,E.iridescenceIOR.value=w.iridescenceIOR,E.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(E.iridescenceMap.value=w.iridescenceMap,e(w.iridescenceMap,E.iridescenceMapTransform)),w.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=w.iridescenceThicknessMap,e(w.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),w.transmission>0&&(E.transmission.value=w.transmission,E.transmissionSamplerMap.value=j.texture,E.transmissionSamplerSize.value.set(j.width,j.height),w.transmissionMap&&(E.transmissionMap.value=w.transmissionMap,e(w.transmissionMap,E.transmissionMapTransform)),E.thickness.value=w.thickness,w.thicknessMap&&(E.thicknessMap.value=w.thicknessMap,e(w.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.value=w.attenuationDistance,E.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(E.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(E.anisotropyMap.value=w.anisotropyMap,e(w.anisotropyMap,E.anisotropyMapTransform))),E.specularIntensity.value=w.specularIntensity,E.specularColor.value.copy(w.specularColor),w.specularColorMap&&(E.specularColorMap.value=w.specularColorMap,e(w.specularColorMap,E.specularColorMapTransform)),w.specularIntensityMap&&(E.specularIntensityMap.value=w.specularIntensityMap,e(w.specularIntensityMap,E.specularIntensityMapTransform))}function M(E,w){w.matcap&&(E.matcap.value=w.matcap)}function O(E,w){let j=t.get(w).light;E.referencePosition.value.setFromMatrixPosition(j.matrixWorld),E.nearDistance.value=j.shadow.camera.near,E.farDistance.value=j.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function kH(n,t,e,i){let r={},o={},s=[],u=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function d(j,H){let W=H.program;i.uniformBlockBinding(j,W)}function p(j,H){let W=r[j.id];W===void 0&&(M(j),W=_(j),r[j.id]=W,j.addEventListener("dispose",E));let G=H.program;i.updateUBOMapping(j,G);let Y=t.render.frame;o[j.id]!==Y&&(y(j),o[j.id]=Y)}function _(j){let H=m();j.__bindingPointIndex=H;let W=n.createBuffer(),G=j.__size,Y=j.usage;return n.bindBuffer(n.UNIFORM_BUFFER,W),n.bufferData(n.UNIFORM_BUFFER,G,Y),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,H,W),W}function m(){for(let j=0;j<u;j++)if(s.indexOf(j)===-1)return s.push(j),j;return bt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(j){let H=r[j.id],W=j.uniforms,G=j.__cache;n.bindBuffer(n.UNIFORM_BUFFER,H);for(let Y=0,q=W.length;Y<q;Y++){let re=Array.isArray(W[Y])?W[Y]:[W[Y]];for(let V=0,B=re.length;V<B;V++){let X=re[V];if(b(X,Y,V,G)===!0){let ie=X.__offset,ue=Array.isArray(X.value)?X.value:[X.value],ve=0;for(let _e=0;_e<ue.length;_e++){let me=ue[_e],he=O(me);typeof me=="number"||typeof me=="boolean"?(X.__data[0]=me,n.bufferSubData(n.UNIFORM_BUFFER,ie+ve,X.__data)):me.isMatrix3?(X.__data[0]=me.elements[0],X.__data[1]=me.elements[1],X.__data[2]=me.elements[2],X.__data[3]=0,X.__data[4]=me.elements[3],X.__data[5]=me.elements[4],X.__data[6]=me.elements[5],X.__data[7]=0,X.__data[8]=me.elements[6],X.__data[9]=me.elements[7],X.__data[10]=me.elements[8],X.__data[11]=0):(me.toArray(X.__data,ve),ve+=he.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,ie,X.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function b(j,H,W,G){let Y=j.value,q=H+"_"+W;if(G[q]===void 0)return typeof Y=="number"||typeof Y=="boolean"?G[q]=Y:G[q]=Y.clone(),!0;{let re=G[q];if(typeof Y=="number"||typeof Y=="boolean"){if(re!==Y)return G[q]=Y,!0}else if(re.equals(Y)===!1)return re.copy(Y),!0}return!1}function M(j){let H=j.uniforms,W=0,G=16;for(let q=0,re=H.length;q<re;q++){let V=Array.isArray(H[q])?H[q]:[H[q]];for(let B=0,X=V.length;B<X;B++){let ie=V[B],ue=Array.isArray(ie.value)?ie.value:[ie.value];for(let ve=0,_e=ue.length;ve<_e;ve++){let me=ue[ve],he=O(me),we=W%G,$e=we%he.boundary,Ne=we+$e;W+=$e,Ne!==0&&G-Ne<he.storage&&(W+=G-Ne),ie.__data=new Float32Array(he.storage/Float32Array.BYTES_PER_ELEMENT),ie.__offset=W,W+=he.storage}}}let Y=W%G;return Y>0&&(W+=G-Y),j.__size=W,j.__cache={},this}function O(j){let H={boundary:0,storage:0};return typeof j=="number"||typeof j=="boolean"?(H.boundary=4,H.storage=4):j.isVector2?(H.boundary=8,H.storage=8):j.isVector3||j.isColor?(H.boundary=16,H.storage=12):j.isVector4?(H.boundary=16,H.storage=16):j.isMatrix3?(H.boundary=48,H.storage=48):j.isMatrix4?(H.boundary=64,H.storage=64):j.isTexture?vt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):vt("WebGLRenderer: Unsupported uniform value type.",j),H}function E(j){let H=j.target;H.removeEventListener("dispose",E);let W=s.indexOf(H.__bindingPointIndex);s.splice(W,1),n.deleteBuffer(r[H.id]),delete r[H.id],delete o[H.id]}function w(){for(let j in r)n.deleteBuffer(r[j]);s=[],r={},o={}}return{bind:d,update:p,dispose:w}}var FH=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]),ps=null;function NH(){return ps===null&&(ps=new n_(FH,16,16,au,hs),ps.name="DFG_LUT",ps.minFilter=Li,ps.magFilter=Li,ps.wrapS=ls,ps.wrapT=ls,ps.generateMipmaps=!1,ps.needsUpdate=!0),ps}var Cv=class{constructor(t={}){let{canvas:e=tT(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:u=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:p=!1,powerPreference:_="default",failIfMajorPerformanceCaveat:m=!1,reversedDepthBuffer:y=!1,outputBufferType:b=wr}=t;this.isWebGLRenderer=!0;let M;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");M=i.getContextAttributes().alpha}else M=s;let O=b,E=new Set([V_,L_,N_]),w=new Set([wr,zo,nd,id,k_,F_]),j=new Uint32Array(4),H=new Int32Array(4),W=null,G=null,Y=[],q=[],re=null;this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Bo,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let V=this,B=!1;this._outputColorSpace=Br;let X=0,ie=0,ue=null,ve=-1,_e=null,me=new ei,he=new ei,we=null,$e=new jt(0),Ne=0,Ye=e.width,_t=e.height,Pe=1,pn=null,cn=null,Ce=new ei(0,0,Ye,_t),Ae=new ei(0,0,Ye,_t),et=!1,wt=new Zc,lt=!1,qt=!1,Bn=new Qn,Zt=new se,Mt=new ei,Gt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Dt=!1;function Qt(){return ue===null?Pe:1}let J=i;function en(N,ne){return e.getContext(N,ne)}try{let N={alpha:!0,depth:r,stencil:o,antialias:u,premultipliedAlpha:d,preserveDrawingBuffer:p,powerPreference:_,failIfMajorPerformanceCaveat:m};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${b_}`),e.addEventListener("webglcontextlost",ht,!1),e.addEventListener("webglcontextrestored",Ft,!1),e.addEventListener("webglcontextcreationerror",nt,!1),J===null){let ne="webgl2";if(J=en(ne,N),J===null)throw en(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(N){throw bt("WebGLRenderer: "+N.message),N}let Jt,dt,Je,z,I,Q,pe,Me,ce,ot,Oe,st,mt,De,Be,Ke,ut,He,Pt,ee,ze,ke,Xe,le;function Ee(){Jt=new jB(J),Jt.init(),ke=new DH(J,Jt),dt=new kB(J,Jt,t,ke),Je=new AH(J,Jt),dt.reversedDepthBuffer&&y&&Je.buffers.depth.setReversed(!0),z=new $B(J),I=new fH,Q=new TH(J,Jt,Je,I,dt,ke,z),pe=new NB(V),Me=new HB(V),ce=new ZV(J),Xe=new OB(J,ce),ot=new WB(J,ce,z,Xe),Oe=new qB(J,ot,ce,z),Pt=new YB(J,dt,Q),Ke=new FB(I),st=new dH(V,pe,Me,Jt,dt,Xe,Ke),mt=new RH(V,I),De=new pH,Be=new yH(Jt),He=new IB(V,pe,Me,Je,Oe,M,d),ut=new SH(V,Oe,dt),le=new kH(J,z,dt,Je),ee=new RB(J,Jt,z),ze=new GB(J,Jt,z),z.programs=st.programs,V.capabilities=dt,V.extensions=Jt,V.properties=I,V.renderLists=De,V.shadowMap=ut,V.state=Je,V.info=z}Ee(),O!==wr&&(re=new ZB(O,e.width,e.height,r,o));let We=new dC(V,J);this.xr=We,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){let N=Jt.get("WEBGL_lose_context");N&&N.loseContext()},this.forceContextRestore=function(){let N=Jt.get("WEBGL_lose_context");N&&N.restoreContext()},this.getPixelRatio=function(){return Pe},this.setPixelRatio=function(N){N!==void 0&&(Pe=N,this.setSize(Ye,_t,!1))},this.getSize=function(N){return N.set(Ye,_t)},this.setSize=function(N,ne,fe=!0){if(We.isPresenting){vt("WebGLRenderer: Can't change size while VR device is presenting.");return}Ye=N,_t=ne,e.width=Math.floor(N*Pe),e.height=Math.floor(ne*Pe),fe===!0&&(e.style.width=N+"px",e.style.height=ne+"px"),re!==null&&re.setSize(e.width,e.height),this.setViewport(0,0,N,ne)},this.getDrawingBufferSize=function(N){return N.set(Ye*Pe,_t*Pe).floor()},this.setDrawingBufferSize=function(N,ne,fe){Ye=N,_t=ne,Pe=fe,e.width=Math.floor(N*fe),e.height=Math.floor(ne*fe),this.setViewport(0,0,N,ne)},this.setEffects=function(N){if(O===wr){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(N){for(let ne=0;ne<N.length;ne++)if(N[ne].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}re.setEffects(N||[])},this.getCurrentViewport=function(N){return N.copy(me)},this.getViewport=function(N){return N.copy(Ce)},this.setViewport=function(N,ne,fe,de){N.isVector4?Ce.set(N.x,N.y,N.z,N.w):Ce.set(N,ne,fe,de),Je.viewport(me.copy(Ce).multiplyScalar(Pe).round())},this.getScissor=function(N){return N.copy(Ae)},this.setScissor=function(N,ne,fe,de){N.isVector4?Ae.set(N.x,N.y,N.z,N.w):Ae.set(N,ne,fe,de),Je.scissor(he.copy(Ae).multiplyScalar(Pe).round())},this.getScissorTest=function(){return et},this.setScissorTest=function(N){Je.setScissorTest(et=N)},this.setOpaqueSort=function(N){pn=N},this.setTransparentSort=function(N){cn=N},this.getClearColor=function(N){return N.copy(He.getClearColor())},this.setClearColor=function(){He.setClearColor(...arguments)},this.getClearAlpha=function(){return He.getClearAlpha()},this.setClearAlpha=function(){He.setClearAlpha(...arguments)},this.clear=function(N=!0,ne=!0,fe=!0){let de=0;if(N){let ae=!1;if(ue!==null){let Ge=ue.texture.format;ae=E.has(Ge)}if(ae){let Ge=ue.texture.type,Qe=w.has(Ge),qe=He.getClearColor(),it=He.getClearAlpha(),ct=qe.r,gt=qe.g,pt=qe.b;Qe?(j[0]=ct,j[1]=gt,j[2]=pt,j[3]=it,J.clearBufferuiv(J.COLOR,0,j)):(H[0]=ct,H[1]=gt,H[2]=pt,H[3]=it,J.clearBufferiv(J.COLOR,0,H))}else de|=J.COLOR_BUFFER_BIT}ne&&(de|=J.DEPTH_BUFFER_BIT),fe&&(de|=J.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),J.clear(de)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ht,!1),e.removeEventListener("webglcontextrestored",Ft,!1),e.removeEventListener("webglcontextcreationerror",nt,!1),He.dispose(),De.dispose(),Be.dispose(),I.dispose(),pe.dispose(),Me.dispose(),Oe.dispose(),Xe.dispose(),le.dispose(),st.dispose(),We.dispose(),We.removeEventListener("sessionstart",ir),We.removeEventListener("sessionend",qi),Mn.stop()};function ht(N){N.preventDefault(),j2("WebGLRenderer: Context Lost."),B=!0}function Ft(){j2("WebGLRenderer: Context Restored."),B=!1;let N=z.autoReset,ne=ut.enabled,fe=ut.autoUpdate,de=ut.needsUpdate,ae=ut.type;Ee(),z.autoReset=N,ut.enabled=ne,ut.autoUpdate=fe,ut.needsUpdate=de,ut.type=ae}function nt(N){bt("WebGLRenderer: A WebGL context could not be created. Reason: ",N.statusMessage)}function Vi(N){let ne=N.target;ne.removeEventListener("dispose",Vi),Lt(ne)}function Lt(N){_s(N),I.remove(N)}function _s(N){let ne=I.get(N).programs;ne!==void 0&&(ne.forEach(function(fe){st.releaseProgram(fe)}),N.isShaderMaterial&&st.releaseShaderCache(N))}this.renderBufferDirect=function(N,ne,fe,de,ae,Ge){ne===null&&(ne=Gt);let Qe=ae.isMesh&&ae.matrixWorld.determinant()<0,qe=Xr(N,ne,fe,de,ae);Je.setMaterial(de,Qe);let it=fe.index,ct=1;if(de.wireframe===!0){if(it=ot.getWireframeAttribute(fe),it===void 0)return;ct=2}let gt=fe.drawRange,pt=fe.attributes.position,At=gt.start*ct,dn=(gt.start+gt.count)*ct;Ge!==null&&(At=Math.max(At,Ge.start*ct),dn=Math.min(dn,(Ge.start+Ge.count)*ct)),it!==null?(At=Math.max(At,0),dn=Math.min(dn,it.count)):pt!=null&&(At=Math.max(At,0),dn=Math.min(dn,pt.count));let In=dn-At;if(In<0||In===1/0)return;Xe.setup(ae,de,qe,fe,it);let kn,mn=ee;if(it!==null&&(kn=ce.get(it),mn=ze,mn.setIndex(kn)),ae.isMesh)de.wireframe===!0?(Je.setLineWidth(de.wireframeLinewidth*Qt()),mn.setMode(J.LINES)):mn.setMode(J.TRIANGLES);else if(ae.isLine){let ft=de.linewidth;ft===void 0&&(ft=1),Je.setLineWidth(ft*Qt()),ae.isLineSegments?mn.setMode(J.LINES):ae.isLineLoop?mn.setMode(J.LINE_LOOP):mn.setMode(J.LINE_STRIP)}else ae.isPoints?mn.setMode(J.POINTS):ae.isSprite&&mn.setMode(J.TRIANGLES);if(ae.isBatchedMesh)if(ae._multiDrawInstances!==null)$c("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),mn.renderMultiDrawInstances(ae._multiDrawStarts,ae._multiDrawCounts,ae._multiDrawCount,ae._multiDrawInstances);else if(Jt.get("WEBGL_multi_draw"))mn.renderMultiDraw(ae._multiDrawStarts,ae._multiDrawCounts,ae._multiDrawCount);else{let ft=ae._multiDrawStarts,Vt=ae._multiDrawCounts,Ot=ae._multiDrawCount,bi=it?ce.get(it).bytesPerElement:1,rr=I.get(de).currentProgram.getUniforms();for(let Hn=0;Hn<Ot;Hn++)rr.setValue(J,"_gl_DrawID",Hn),mn.render(ft[Hn]/bi,Vt[Hn])}else if(ae.isInstancedMesh)mn.renderInstances(At,In,ae.count);else if(fe.isInstancedBufferGeometry){let ft=fe._maxInstanceCount!==void 0?fe._maxInstanceCount:1/0,Vt=Math.min(fe.instanceCount,ft);mn.renderInstances(At,In,Vt)}else mn.render(At,In)};function Ks(N,ne,fe){N.transparent===!0&&N.side===Gr&&N.forceSinglePass===!1?(N.side=nr,N.needsUpdate=!0,qr(N,ne,fe),N.side=Xs,N.needsUpdate=!0,qr(N,ne,fe),N.side=Gr):qr(N,ne,fe)}this.compile=function(N,ne,fe=null){fe===null&&(fe=N),G=Be.get(fe),G.init(ne),q.push(G),fe.traverseVisible(function(ae){ae.isLight&&ae.layers.test(ne.layers)&&(G.pushLight(ae),ae.castShadow&&G.pushShadow(ae))}),N!==fe&&N.traverseVisible(function(ae){ae.isLight&&ae.layers.test(ne.layers)&&(G.pushLight(ae),ae.castShadow&&G.pushShadow(ae))}),G.setupLights();let de=new Set;return N.traverse(function(ae){if(!(ae.isMesh||ae.isPoints||ae.isLine||ae.isSprite))return;let Ge=ae.material;if(Ge)if(Array.isArray(Ge))for(let Qe=0;Qe<Ge.length;Qe++){let qe=Ge[Qe];Ks(qe,fe,ae),de.add(qe)}else Ks(Ge,fe,ae),de.add(Ge)}),G=q.pop(),de},this.compileAsync=function(N,ne,fe=null){let de=this.compile(N,ne,fe);return new Promise(ae=>{function Ge(){if(de.forEach(function(Qe){I.get(Qe).currentProgram.isReady()&&de.delete(Qe)}),de.size===0){ae(N);return}setTimeout(Ge,10)}Jt.get("KHR_parallel_shader_compile")!==null?Ge():setTimeout(Ge,10)})};let $r=null;function ci(N){$r&&$r(N)}function ir(){Mn.stop()}function qi(){Mn.start()}let Mn=new TT;Mn.setAnimationLoop(ci),typeof self<"u"&&Mn.setContext(self),this.setAnimationLoop=function(N){$r=N,We.setAnimationLoop(N),N===null?Mn.stop():Mn.start()},We.addEventListener("sessionstart",ir),We.addEventListener("sessionend",qi),this.render=function(N,ne){if(ne!==void 0&&ne.isCamera!==!0){bt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(B===!0)return;let fe=We.enabled===!0&&We.isPresenting===!0,de=re!==null&&(ue===null||fe)&&re.begin(V,ue);if(N.matrixWorldAutoUpdate===!0&&N.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),We.enabled===!0&&We.isPresenting===!0&&(re===null||re.isCompositing()===!1)&&(We.cameraAutoUpdate===!0&&We.updateCamera(ne),ne=We.getCamera()),N.isScene===!0&&N.onBeforeRender(V,N,ne,ue),G=Be.get(N,q.length),G.init(ne),q.push(G),Bn.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),wt.setFromProjectionMatrix(Bn,Vo,ne.reversedDepth),qt=this.localClippingEnabled,lt=Ke.init(this.clippingPlanes,qt),W=De.get(N,Y.length),W.init(),Y.push(W),We.enabled===!0&&We.isPresenting===!0){let Qe=V.xr.getDepthSensingMesh();Qe!==null&&Fi(Qe,ne,-1/0,V.sortObjects)}Fi(N,ne,0,V.sortObjects),W.finish(),V.sortObjects===!0&&W.sort(pn,cn),Dt=We.enabled===!1||We.isPresenting===!1||We.hasDepthSensing()===!1,Dt&&He.addToRenderList(W,N),this.info.render.frame++,lt===!0&&Ke.beginShadows();let ae=G.state.shadowsArray;if(ut.render(ae,N,ne),lt===!0&&Ke.endShadows(),this.info.autoReset===!0&&this.info.reset(),(de&&re.hasRenderPass())===!1){let Qe=W.opaque,qe=W.transmissive;if(G.setupLights(),ne.isArrayCamera){let it=ne.cameras;if(qe.length>0)for(let ct=0,gt=it.length;ct<gt;ct++){let pt=it[ct];Yr(Qe,qe,N,pt)}Dt&&He.render(N);for(let ct=0,gt=it.length;ct<gt;ct++){let pt=it[ct];$t(W,N,pt,pt.viewport)}}else qe.length>0&&Yr(Qe,qe,N,ne),Dt&&He.render(N),$t(W,N,ne)}ue!==null&&ie===0&&(Q.updateMultisampleRenderTarget(ue),Q.updateRenderTargetMipmap(ue)),de&&re.end(V),N.isScene===!0&&N.onAfterRender(V,N,ne),Xe.resetDefaultState(),ve=-1,_e=null,q.pop(),q.length>0?(G=q[q.length-1],lt===!0&&Ke.setGlobalState(V.clippingPlanes,G.state.camera)):G=null,Y.pop(),Y.length>0?W=Y[Y.length-1]:W=null};function Fi(N,ne,fe,de){if(N.visible===!1)return;if(N.layers.test(ne.layers)){if(N.isGroup)fe=N.renderOrder;else if(N.isLOD)N.autoUpdate===!0&&N.update(ne);else if(N.isLight)G.pushLight(N),N.castShadow&&G.pushShadow(N);else if(N.isSprite){if(!N.frustumCulled||wt.intersectsSprite(N)){de&&Mt.setFromMatrixPosition(N.matrixWorld).applyMatrix4(Bn);let Qe=Oe.update(N),qe=N.material;qe.visible&&W.push(N,Qe,qe,fe,Mt.z,null)}}else if((N.isMesh||N.isLine||N.isPoints)&&(!N.frustumCulled||wt.intersectsObject(N))){let Qe=Oe.update(N),qe=N.material;if(de&&(N.boundingSphere!==void 0?(N.boundingSphere===null&&N.computeBoundingSphere(),Mt.copy(N.boundingSphere.center)):(Qe.boundingSphere===null&&Qe.computeBoundingSphere(),Mt.copy(Qe.boundingSphere.center)),Mt.applyMatrix4(N.matrixWorld).applyMatrix4(Bn)),Array.isArray(qe)){let it=Qe.groups;for(let ct=0,gt=it.length;ct<gt;ct++){let pt=it[ct],At=qe[pt.materialIndex];At&&At.visible&&W.push(N,Qe,At,fe,Mt.z,pt)}}else qe.visible&&W.push(N,Qe,qe,fe,Mt.z,null)}}let Ge=N.children;for(let Qe=0,qe=Ge.length;Qe<qe;Qe++)Fi(Ge[Qe],ne,fe,de)}function $t(N,ne,fe,de){let{opaque:ae,transmissive:Ge,transparent:Qe}=N;G.setupLightsView(fe),lt===!0&&Ke.setGlobalState(V.clippingPlanes,fe),de&&Je.viewport(me.copy(de)),ae.length>0&&Qs(ae,ne,fe),Ge.length>0&&Qs(Ge,ne,fe),Qe.length>0&&Qs(Qe,ne,fe),Je.buffers.depth.setTest(!0),Je.buffers.depth.setMask(!0),Je.buffers.color.setMask(!0),Je.setPolygonOffset(!1)}function Yr(N,ne,fe,de){if((fe.isScene===!0?fe.overrideMaterial:null)!==null)return;if(G.state.transmissionRenderTarget[de.id]===void 0){let At=Jt.has("EXT_color_buffer_half_float")||Jt.has("EXT_color_buffer_float");G.state.transmissionRenderTarget[de.id]=new Hr(1,1,{generateMipmaps:!0,type:At?hs:wr,minFilter:Xa,samples:dt.samples,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:un.workingColorSpace})}let Ge=G.state.transmissionRenderTarget[de.id],Qe=de.viewport||me;Ge.setSize(Qe.z*V.transmissionResolutionScale,Qe.w*V.transmissionResolutionScale);let qe=V.getRenderTarget(),it=V.getActiveCubeFace(),ct=V.getActiveMipmapLevel();V.setRenderTarget(Ge),V.getClearColor($e),Ne=V.getClearAlpha(),Ne<1&&V.setClearColor(16777215,.5),V.clear(),Dt&&He.render(fe);let gt=V.toneMapping;V.toneMapping=Bo;let pt=de.viewport;if(de.viewport!==void 0&&(de.viewport=void 0),G.setupLightsView(de),lt===!0&&Ke.setGlobalState(V.clippingPlanes,de),Qs(N,fe,de),Q.updateMultisampleRenderTarget(Ge),Q.updateRenderTargetMipmap(Ge),Jt.has("WEBGL_multisampled_render_to_texture")===!1){let At=!1;for(let dn=0,In=ne.length;dn<In;dn++){let kn=ne[dn],{object:mn,geometry:ft,material:Vt,group:Ot}=kn;if(Vt.side===Gr&&mn.layers.test(de.layers)){let bi=Vt.side;Vt.side=nr,Vt.needsUpdate=!0,fu(mn,fe,de,ft,Vt,Ot),Vt.side=bi,Vt.needsUpdate=!0,At=!0}}At===!0&&(Q.updateMultisampleRenderTarget(Ge),Q.updateRenderTargetMipmap(Ge))}V.setRenderTarget(qe,it,ct),V.setClearColor($e,Ne),pt!==void 0&&(de.viewport=pt),V.toneMapping=gt}function Qs(N,ne,fe){let de=ne.isScene===!0?ne.overrideMaterial:null;for(let ae=0,Ge=N.length;ae<Ge;ae++){let Qe=N[ae],{object:qe,geometry:it,group:ct}=Qe,gt=Qe.material;gt.allowOverride===!0&&de!==null&&(gt=de),qe.layers.test(fe.layers)&&fu(qe,ne,fe,it,gt,ct)}}function fu(N,ne,fe,de,ae,Ge){N.onBeforeRender(V,ne,fe,de,ae,Ge),N.modelViewMatrix.multiplyMatrices(fe.matrixWorldInverse,N.matrixWorld),N.normalMatrix.getNormalMatrix(N.modelViewMatrix),ae.onBeforeRender(V,ne,fe,de,N,Ge),ae.transparent===!0&&ae.side===Gr&&ae.forceSinglePass===!1?(ae.side=nr,ae.needsUpdate=!0,V.renderBufferDirect(fe,ne,de,ae,N,Ge),ae.side=Xs,ae.needsUpdate=!0,V.renderBufferDirect(fe,ne,de,ae,N,Ge),ae.side=Gr):V.renderBufferDirect(fe,ne,de,ae,N,Ge),N.onAfterRender(V,ne,fe,de,ae,Ge)}function qr(N,ne,fe){ne.isScene!==!0&&(ne=Gt);let de=I.get(N),ae=G.state.lights,Ge=G.state.shadowsArray,Qe=ae.state.version,qe=st.getParameters(N,ae.state,Ge,ne,fe),it=st.getProgramCacheKey(qe),ct=de.programs;de.environment=N.isMeshStandardMaterial?ne.environment:null,de.fog=ne.fog,de.envMap=(N.isMeshStandardMaterial?Me:pe).get(N.envMap||de.environment),de.envMapRotation=de.environment!==null&&N.envMap===null?ne.environmentRotation:N.envMapRotation,ct===void 0&&(N.addEventListener("dispose",Vi),ct=new Map,de.programs=ct);let gt=ct.get(it);if(gt!==void 0){if(de.currentProgram===gt&&de.lightsStateVersion===Qe)return hu(N,qe),gt}else qe.uniforms=st.getUniforms(N),N.onBeforeCompile(qe,V),gt=st.acquireProgram(qe,it),ct.set(it,gt),de.uniforms=qe.uniforms;let pt=de.uniforms;return(!N.isShaderMaterial&&!N.isRawShaderMaterial||N.clipping===!0)&&(pt.clippingPlanes=Ke.uniform),hu(N,qe),de.needsLights=nl(N),de.lightsStateVersion=Qe,de.needsLights&&(pt.ambientLightColor.value=ae.state.ambient,pt.lightProbe.value=ae.state.probe,pt.directionalLights.value=ae.state.directional,pt.directionalLightShadows.value=ae.state.directionalShadow,pt.spotLights.value=ae.state.spot,pt.spotLightShadows.value=ae.state.spotShadow,pt.rectAreaLights.value=ae.state.rectArea,pt.ltc_1.value=ae.state.rectAreaLTC1,pt.ltc_2.value=ae.state.rectAreaLTC2,pt.pointLights.value=ae.state.point,pt.pointLightShadows.value=ae.state.pointShadow,pt.hemisphereLights.value=ae.state.hemi,pt.directionalShadowMap.value=ae.state.directionalShadowMap,pt.directionalShadowMatrix.value=ae.state.directionalShadowMatrix,pt.spotShadowMap.value=ae.state.spotShadowMap,pt.spotLightMatrix.value=ae.state.spotLightMatrix,pt.spotLightMap.value=ae.state.spotLightMap,pt.pointShadowMap.value=ae.state.pointShadowMap,pt.pointShadowMatrix.value=ae.state.pointShadowMatrix),de.currentProgram=gt,de.uniformsList=null,gt}function tl(N){if(N.uniformsList===null){let ne=N.currentProgram.getUniforms();N.uniformsList=sd.seqWithValue(ne.seq,N.uniforms)}return N.uniformsList}function hu(N,ne){let fe=I.get(N);fe.outputColorSpace=ne.outputColorSpace,fe.batching=ne.batching,fe.batchingColor=ne.batchingColor,fe.instancing=ne.instancing,fe.instancingColor=ne.instancingColor,fe.instancingMorph=ne.instancingMorph,fe.skinning=ne.skinning,fe.morphTargets=ne.morphTargets,fe.morphNormals=ne.morphNormals,fe.morphColors=ne.morphColors,fe.morphTargetsCount=ne.morphTargetsCount,fe.numClippingPlanes=ne.numClippingPlanes,fe.numIntersection=ne.numClipIntersection,fe.vertexAlphas=ne.vertexAlphas,fe.vertexTangents=ne.vertexTangents,fe.toneMapping=ne.toneMapping}function Xr(N,ne,fe,de,ae){ne.isScene!==!0&&(ne=Gt),Q.resetTextureUnits();let Ge=ne.fog,Qe=de.isMeshStandardMaterial?ne.environment:null,qe=ue===null?V.outputColorSpace:ue.isXRRenderTarget===!0?ue.texture.colorSpace:nu,it=(de.isMeshStandardMaterial?Me:pe).get(de.envMap||Qe),ct=de.vertexColors===!0&&!!fe.attributes.color&&fe.attributes.color.itemSize===4,gt=!!fe.attributes.tangent&&(!!de.normalMap||de.anisotropy>0),pt=!!fe.morphAttributes.position,At=!!fe.morphAttributes.normal,dn=!!fe.morphAttributes.color,In=Bo;de.toneMapped&&(ue===null||ue.isXRRenderTarget===!0)&&(In=V.toneMapping);let kn=fe.morphAttributes.position||fe.morphAttributes.normal||fe.morphAttributes.color,mn=kn!==void 0?kn.length:0,ft=I.get(de),Vt=G.state.lights;if(lt===!0&&(qt===!0||N!==_e)){let di=N===_e&&de.id===ve;Ke.setState(de,N,di)}let Ot=!1;de.version===ft.__version?(ft.needsLights&&ft.lightsStateVersion!==Vt.state.version||ft.outputColorSpace!==qe||ae.isBatchedMesh&&ft.batching===!1||!ae.isBatchedMesh&&ft.batching===!0||ae.isBatchedMesh&&ft.batchingColor===!0&&ae.colorTexture===null||ae.isBatchedMesh&&ft.batchingColor===!1&&ae.colorTexture!==null||ae.isInstancedMesh&&ft.instancing===!1||!ae.isInstancedMesh&&ft.instancing===!0||ae.isSkinnedMesh&&ft.skinning===!1||!ae.isSkinnedMesh&&ft.skinning===!0||ae.isInstancedMesh&&ft.instancingColor===!0&&ae.instanceColor===null||ae.isInstancedMesh&&ft.instancingColor===!1&&ae.instanceColor!==null||ae.isInstancedMesh&&ft.instancingMorph===!0&&ae.morphTexture===null||ae.isInstancedMesh&&ft.instancingMorph===!1&&ae.morphTexture!==null||ft.envMap!==it||de.fog===!0&&ft.fog!==Ge||ft.numClippingPlanes!==void 0&&(ft.numClippingPlanes!==Ke.numPlanes||ft.numIntersection!==Ke.numIntersection)||ft.vertexAlphas!==ct||ft.vertexTangents!==gt||ft.morphTargets!==pt||ft.morphNormals!==At||ft.morphColors!==dn||ft.toneMapping!==In||ft.morphTargetsCount!==mn)&&(Ot=!0):(Ot=!0,ft.__version=de.version);let bi=ft.currentProgram;Ot===!0&&(bi=qr(de,ne,ae));let rr=!1,Hn=!1,vs=!1,yn=bi.getUniforms(),Di=ft.uniforms;if(Je.useProgram(bi.program)&&(rr=!0,Hn=!0,vs=!0),de.id!==ve&&(ve=de.id,Hn=!0),rr||_e!==N){Je.buffers.depth.getReversed()&&N.reversedDepth!==!0&&(N._reversedDepth=!0,N.updateProjectionMatrix()),yn.setValue(J,"projectionMatrix",N.projectionMatrix),yn.setValue(J,"viewMatrix",N.matrixWorldInverse);let Pi=yn.map.cameraPosition;Pi!==void 0&&Pi.setValue(J,Zt.setFromMatrixPosition(N.matrixWorld)),dt.logarithmicDepthBuffer&&yn.setValue(J,"logDepthBufFC",2/(Math.log(N.far+1)/Math.LN2)),(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial)&&yn.setValue(J,"isOrthographic",N.isOrthographicCamera===!0),_e!==N&&(_e=N,Hn=!0,vs=!0)}if(ft.needsLights&&(Vt.state.directionalShadowMap.length>0&&yn.setValue(J,"directionalShadowMap",Vt.state.directionalShadowMap,Q),Vt.state.spotShadowMap.length>0&&yn.setValue(J,"spotShadowMap",Vt.state.spotShadowMap,Q),Vt.state.pointShadowMap.length>0&&yn.setValue(J,"pointShadowMap",Vt.state.pointShadowMap,Q)),ae.isSkinnedMesh){yn.setOptional(J,ae,"bindMatrix"),yn.setOptional(J,ae,"bindMatrixInverse");let di=ae.skeleton;di&&(di.boneTexture===null&&di.computeBoneTexture(),yn.setValue(J,"boneTexture",di.boneTexture,Q))}ae.isBatchedMesh&&(yn.setOptional(J,ae,"batchingTexture"),yn.setValue(J,"batchingTexture",ae._matricesTexture,Q),yn.setOptional(J,ae,"batchingIdTexture"),yn.setValue(J,"batchingIdTexture",ae._indirectTexture,Q),yn.setOptional(J,ae,"batchingColorTexture"),ae._colorsTexture!==null&&yn.setValue(J,"batchingColorTexture",ae._colorsTexture,Q));let Ui=fe.morphAttributes;if((Ui.position!==void 0||Ui.normal!==void 0||Ui.color!==void 0)&&Pt.update(ae,fe,bi),(Hn||ft.receiveShadow!==ae.receiveShadow)&&(ft.receiveShadow=ae.receiveShadow,yn.setValue(J,"receiveShadow",ae.receiveShadow)),de.isMeshGouraudMaterial&&de.envMap!==null&&(Di.envMap.value=it,Di.flipEnvMap.value=it.isCubeTexture&&it.isRenderTargetTexture===!1?-1:1),de.isMeshStandardMaterial&&de.envMap===null&&ne.environment!==null&&(Di.envMapIntensity.value=ne.environmentIntensity),Di.dfgLUT!==void 0&&(Di.dfgLUT.value=NH()),Hn&&(yn.setValue(J,"toneMappingExposure",V.toneMappingExposure),ft.needsLights&&Er(Di,vs),Ge&&de.fog===!0&&mt.refreshFogUniforms(Di,Ge),mt.refreshMaterialUniforms(Di,de,Pe,_t,G.state.transmissionRenderTarget[N.id]),sd.upload(J,tl(ft),Di,Q)),de.isShaderMaterial&&de.uniformsNeedUpdate===!0&&(sd.upload(J,tl(ft),Di,Q),de.uniformsNeedUpdate=!1),de.isSpriteMaterial&&yn.setValue(J,"center",ae.center),yn.setValue(J,"modelViewMatrix",ae.modelViewMatrix),yn.setValue(J,"normalMatrix",ae.normalMatrix),yn.setValue(J,"modelMatrix",ae.matrixWorld),de.isShaderMaterial||de.isRawShaderMaterial){let di=de.uniformsGroups;for(let Pi=0,ta=di.length;Pi<ta;Pi++){let fo=di[Pi];le.update(fo,bi),le.bind(fo,bi)}}return bi}function Er(N,ne){N.ambientLightColor.needsUpdate=ne,N.lightProbe.needsUpdate=ne,N.directionalLights.needsUpdate=ne,N.directionalLightShadows.needsUpdate=ne,N.pointLights.needsUpdate=ne,N.pointLightShadows.needsUpdate=ne,N.spotLights.needsUpdate=ne,N.spotLightShadows.needsUpdate=ne,N.rectAreaLights.needsUpdate=ne,N.hemisphereLights.needsUpdate=ne}function nl(N){return N.isMeshLambertMaterial||N.isMeshToonMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isShadowMaterial||N.isShaderMaterial&&N.lights===!0}this.getActiveCubeFace=function(){return X},this.getActiveMipmapLevel=function(){return ie},this.getRenderTarget=function(){return ue},this.setRenderTargetTextures=function(N,ne,fe){let de=I.get(N);de.__autoAllocateDepthBuffer=N.resolveDepthBuffer===!1,de.__autoAllocateDepthBuffer===!1&&(de.__useRenderToTexture=!1),I.get(N.texture).__webglTexture=ne,I.get(N.depthTexture).__webglTexture=de.__autoAllocateDepthBuffer?void 0:fe,de.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(N,ne){let fe=I.get(N);fe.__webglFramebuffer=ne,fe.__useDefaultFramebuffer=ne===void 0};let ea=J.createFramebuffer();this.setRenderTarget=function(N,ne=0,fe=0){ue=N,X=ne,ie=fe;let de=null,ae=!1,Ge=!1;if(N){let qe=I.get(N);if(qe.__useDefaultFramebuffer!==void 0){Je.bindFramebuffer(J.FRAMEBUFFER,qe.__webglFramebuffer),me.copy(N.viewport),he.copy(N.scissor),we=N.scissorTest,Je.viewport(me),Je.scissor(he),Je.setScissorTest(we),ve=-1;return}else if(qe.__webglFramebuffer===void 0)Q.setupRenderTarget(N);else if(qe.__hasExternalTextures)Q.rebindTextures(N,I.get(N.texture).__webglTexture,I.get(N.depthTexture).__webglTexture);else if(N.depthBuffer){let gt=N.depthTexture;if(qe.__boundDepthTexture!==gt){if(gt!==null&&I.has(gt)&&(N.width!==gt.image.width||N.height!==gt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Q.setupDepthRenderbuffer(N)}}let it=N.texture;(it.isData3DTexture||it.isDataArrayTexture||it.isCompressedArrayTexture)&&(Ge=!0);let ct=I.get(N).__webglFramebuffer;N.isWebGLCubeRenderTarget?(Array.isArray(ct[ne])?de=ct[ne][fe]:de=ct[ne],ae=!0):N.samples>0&&Q.useMultisampledRTT(N)===!1?de=I.get(N).__webglMultisampledFramebuffer:Array.isArray(ct)?de=ct[fe]:de=ct,me.copy(N.viewport),he.copy(N.scissor),we=N.scissorTest}else me.copy(Ce).multiplyScalar(Pe).floor(),he.copy(Ae).multiplyScalar(Pe).floor(),we=et;if(fe!==0&&(de=ea),Je.bindFramebuffer(J.FRAMEBUFFER,de)&&Je.drawBuffers(N,de),Je.viewport(me),Je.scissor(he),Je.setScissorTest(we),ae){let qe=I.get(N.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_CUBE_MAP_POSITIVE_X+ne,qe.__webglTexture,fe)}else if(Ge){let qe=ne;for(let it=0;it<N.textures.length;it++){let ct=I.get(N.textures[it]);J.framebufferTextureLayer(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0+it,ct.__webglTexture,fe,qe)}}else if(N!==null&&fe!==0){let qe=I.get(N.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,qe.__webglTexture,fe)}ve=-1},this.readRenderTargetPixels=function(N,ne,fe,de,ae,Ge,Qe,qe=0){if(!(N&&N.isWebGLRenderTarget)){bt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let it=I.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&Qe!==void 0&&(it=it[Qe]),it){Je.bindFramebuffer(J.FRAMEBUFFER,it);try{let ct=N.textures[qe],gt=ct.format,pt=ct.type;if(!dt.textureFormatReadable(gt)){bt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!dt.textureTypeReadable(pt)){bt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=N.width-de&&fe>=0&&fe<=N.height-ae&&(N.textures.length>1&&J.readBuffer(J.COLOR_ATTACHMENT0+qe),J.readPixels(ne,fe,de,ae,ke.convert(gt),ke.convert(pt),Ge))}finally{let ct=ue!==null?I.get(ue).__webglFramebuffer:null;Je.bindFramebuffer(J.FRAMEBUFFER,ct)}}},this.readRenderTargetPixelsAsync=function(N,ne,fe,de,ae,Ge,Qe,qe=0){return _n(this,null,function*(){if(!(N&&N.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let it=I.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&Qe!==void 0&&(it=it[Qe]),it)if(ne>=0&&ne<=N.width-de&&fe>=0&&fe<=N.height-ae){Je.bindFramebuffer(J.FRAMEBUFFER,it);let ct=N.textures[qe],gt=ct.format,pt=ct.type;if(!dt.textureFormatReadable(gt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!dt.textureTypeReadable(pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let At=J.createBuffer();J.bindBuffer(J.PIXEL_PACK_BUFFER,At),J.bufferData(J.PIXEL_PACK_BUFFER,Ge.byteLength,J.STREAM_READ),N.textures.length>1&&J.readBuffer(J.COLOR_ATTACHMENT0+qe),J.readPixels(ne,fe,de,ae,ke.convert(gt),ke.convert(pt),0);let dn=ue!==null?I.get(ue).__webglFramebuffer:null;Je.bindFramebuffer(J.FRAMEBUFFER,dn);let In=J.fenceSync(J.SYNC_GPU_COMMANDS_COMPLETE,0);return J.flush(),yield nT(J,In,4),J.bindBuffer(J.PIXEL_PACK_BUFFER,At),J.getBufferSubData(J.PIXEL_PACK_BUFFER,0,Ge),J.deleteBuffer(At),J.deleteSync(In),Ge}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(N,ne=null,fe=0){let de=Math.pow(2,-fe),ae=Math.floor(N.image.width*de),Ge=Math.floor(N.image.height*de),Qe=ne!==null?ne.x:0,qe=ne!==null?ne.y:0;Q.setTexture2D(N,0),J.copyTexSubImage2D(J.TEXTURE_2D,fe,0,0,Qe,qe,ae,Ge),Je.unbindTexture()};let zn=J.createFramebuffer(),fd=J.createFramebuffer();this.copyTextureToTexture=function(N,ne,fe=null,de=null,ae=0,Ge=null){Ge===null&&(ae!==0?($c("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ge=ae,ae=0):Ge=0);let Qe,qe,it,ct,gt,pt,At,dn,In,kn=N.isCompressedTexture?N.mipmaps[Ge]:N.image;if(fe!==null)Qe=fe.max.x-fe.min.x,qe=fe.max.y-fe.min.y,it=fe.isBox3?fe.max.z-fe.min.z:1,ct=fe.min.x,gt=fe.min.y,pt=fe.isBox3?fe.min.z:0;else{let Ui=Math.pow(2,-ae);Qe=Math.floor(kn.width*Ui),qe=Math.floor(kn.height*Ui),N.isDataArrayTexture?it=kn.depth:N.isData3DTexture?it=Math.floor(kn.depth*Ui):it=1,ct=0,gt=0,pt=0}de!==null?(At=de.x,dn=de.y,In=de.z):(At=0,dn=0,In=0);let mn=ke.convert(ne.format),ft=ke.convert(ne.type),Vt;ne.isData3DTexture?(Q.setTexture3D(ne,0),Vt=J.TEXTURE_3D):ne.isDataArrayTexture||ne.isCompressedArrayTexture?(Q.setTexture2DArray(ne,0),Vt=J.TEXTURE_2D_ARRAY):(Q.setTexture2D(ne,0),Vt=J.TEXTURE_2D),J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,ne.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ne.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,ne.unpackAlignment);let Ot=J.getParameter(J.UNPACK_ROW_LENGTH),bi=J.getParameter(J.UNPACK_IMAGE_HEIGHT),rr=J.getParameter(J.UNPACK_SKIP_PIXELS),Hn=J.getParameter(J.UNPACK_SKIP_ROWS),vs=J.getParameter(J.UNPACK_SKIP_IMAGES);J.pixelStorei(J.UNPACK_ROW_LENGTH,kn.width),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,kn.height),J.pixelStorei(J.UNPACK_SKIP_PIXELS,ct),J.pixelStorei(J.UNPACK_SKIP_ROWS,gt),J.pixelStorei(J.UNPACK_SKIP_IMAGES,pt);let yn=N.isDataArrayTexture||N.isData3DTexture,Di=ne.isDataArrayTexture||ne.isData3DTexture;if(N.isDepthTexture){let Ui=I.get(N),di=I.get(ne),Pi=I.get(Ui.__renderTarget),ta=I.get(di.__renderTarget);Je.bindFramebuffer(J.READ_FRAMEBUFFER,Pi.__webglFramebuffer),Je.bindFramebuffer(J.DRAW_FRAMEBUFFER,ta.__webglFramebuffer);for(let fo=0;fo<it;fo++)yn&&(J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,I.get(N).__webglTexture,ae,pt+fo),J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,I.get(ne).__webglTexture,Ge,In+fo)),J.blitFramebuffer(ct,gt,Qe,qe,At,dn,Qe,qe,J.DEPTH_BUFFER_BIT,J.NEAREST);Je.bindFramebuffer(J.READ_FRAMEBUFFER,null),Je.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else if(ae!==0||N.isRenderTargetTexture||I.has(N)){let Ui=I.get(N),di=I.get(ne);Je.bindFramebuffer(J.READ_FRAMEBUFFER,zn),Je.bindFramebuffer(J.DRAW_FRAMEBUFFER,fd);for(let Pi=0;Pi<it;Pi++)yn?J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Ui.__webglTexture,ae,pt+Pi):J.framebufferTexture2D(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Ui.__webglTexture,ae),Di?J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,di.__webglTexture,Ge,In+Pi):J.framebufferTexture2D(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,di.__webglTexture,Ge),ae!==0?J.blitFramebuffer(ct,gt,Qe,qe,At,dn,Qe,qe,J.COLOR_BUFFER_BIT,J.NEAREST):Di?J.copyTexSubImage3D(Vt,Ge,At,dn,In+Pi,ct,gt,Qe,qe):J.copyTexSubImage2D(Vt,Ge,At,dn,ct,gt,Qe,qe);Je.bindFramebuffer(J.READ_FRAMEBUFFER,null),Je.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else Di?N.isDataTexture||N.isData3DTexture?J.texSubImage3D(Vt,Ge,At,dn,In,Qe,qe,it,mn,ft,kn.data):ne.isCompressedArrayTexture?J.compressedTexSubImage3D(Vt,Ge,At,dn,In,Qe,qe,it,mn,kn.data):J.texSubImage3D(Vt,Ge,At,dn,In,Qe,qe,it,mn,ft,kn):N.isDataTexture?J.texSubImage2D(J.TEXTURE_2D,Ge,At,dn,Qe,qe,mn,ft,kn.data):N.isCompressedTexture?J.compressedTexSubImage2D(J.TEXTURE_2D,Ge,At,dn,kn.width,kn.height,mn,kn.data):J.texSubImage2D(J.TEXTURE_2D,Ge,At,dn,Qe,qe,mn,ft,kn);J.pixelStorei(J.UNPACK_ROW_LENGTH,Ot),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,bi),J.pixelStorei(J.UNPACK_SKIP_PIXELS,rr),J.pixelStorei(J.UNPACK_SKIP_ROWS,Hn),J.pixelStorei(J.UNPACK_SKIP_IMAGES,vs),Ge===0&&ne.generateMipmaps&&J.generateMipmap(Vt),Je.unbindTexture()},this.initRenderTarget=function(N){I.get(N).__webglFramebuffer===void 0&&Q.setupRenderTarget(N)},this.initTexture=function(N){N.isCubeTexture?Q.setTextureCube(N,0):N.isData3DTexture?Q.setTexture3D(N,0):N.isDataArrayTexture||N.isCompressedArrayTexture?Q.setTexture2DArray(N,0):Q.setTexture2D(N,0),Je.unbindTexture()},this.resetState=function(){X=0,ie=0,ue=null,Je.reset(),Xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Vo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;let e=this.getContext();e.drawingBufferColorSpace=un._getDrawingBufferColorSpace(t),e.unpackColorSpace=un._getUnpackColorSpace()}};var RT={type:"change"},hC={type:"start"},FT={type:"end"},Sv=new ru,kT=new ao,VH=Math.cos(70*G2.DEG2RAD),Ti=new se,Mr=2*Math.PI,Pn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},fC=1e-6,Ev=class extends kf{constructor(t,e=null){super(t,e),this.state=Pn.NONE,this.target=new se,this.cursor=new se,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:$a.ROTATE,MIDDLE:$a.DOLLY,RIGHT:$a.PAN},this.touches={ONE:Ya.ROTATE,TWO:Ya.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new se,this._lastQuaternion=new uo,this._lastTargetPosition=new se,this._quat=new uo().setFromUnitVectors(t.up,new se(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new ed,this._sphericalDelta=new ed,this._scale=1,this._panOffset=new se,this._rotateStart=new Et,this._rotateEnd=new Et,this._rotateDelta=new Et,this._panStart=new Et,this._panEnd=new Et,this._panDelta=new Et,this._dollyStart=new Et,this._dollyEnd=new Et,this._dollyDelta=new Et,this._dollyDirection=new se,this._mouse=new Et,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=BH.bind(this),this._onPointerDown=UH.bind(this),this._onPointerUp=zH.bind(this),this._onContextMenu=qH.bind(this),this._onMouseWheel=WH.bind(this),this._onKeyDown=GH.bind(this),this._onTouchStart=$H.bind(this),this._onTouchMove=YH.bind(this),this._onMouseDown=HH.bind(this),this._onMouseMove=jH.bind(this),this._interceptControlDown=XH.bind(this),this._interceptControlUp=ZH.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(t){super.connect(t),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(RT),this.update(),this.state=Pn.NONE}update(t=null){let e=this.object.position;Ti.copy(e).sub(this.target),Ti.applyQuaternion(this._quat),this._spherical.setFromVector3(Ti),this.autoRotate&&this.state===Pn.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&&isFinite(r)&&(i<-Math.PI?i+=Mr:i>Math.PI&&(i-=Mr),r<-Math.PI?r+=Mr:r>Math.PI&&(r-=Mr),i<=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=s!=this._spherical.radius}if(Ti.setFromSpherical(this._spherical),Ti.applyQuaternion(this._quatInverse),e.copy(this.target).add(Ti),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){let u=Ti.length();s=this._clampDistance(u*this._scale);let d=u-s;this.object.position.addScaledVector(this._dollyDirection,d),this.object.updateMatrixWorld(),o=!!d}else if(this.object.isOrthographicCamera){let u=new se(this._mouse.x,this._mouse.y,0);u.unproject(this.object);let d=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=d!==this.object.zoom;let p=new se(this._mouse.x,this._mouse.y,0);p.unproject(this.object),this.object.position.sub(p).add(u),this.object.updateMatrixWorld(),s=Ti.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(Sv.origin.copy(this.object.position),Sv.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Sv.direction))<VH?this.object.lookAt(this.target):(kT.setFromNormalAndCoplanarPoint(this.object.up,this.target),Sv.intersectPlane(kT,this.target))))}else if(this.object.isOrthographicCamera){let s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,o||this._lastPosition.distanceToSquared(this.object.position)>fC||8*(1-this._lastQuaternion.dot(this.object.quaternion))>fC||this._lastTargetPosition.distanceToSquared(this.target)>fC?(this.dispatchEvent(RT),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(t){return t!==null?Mr/60*this.autoRotateSpeed*t:Mr/60/60*this.autoRotateSpeed}_getZoomScale(t){let e=Math.abs(t*.01);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){Ti.setFromMatrixColumn(e,0),Ti.multiplyScalar(-t),this._panOffset.add(Ti)}_panUp(t,e){this.screenSpacePanning===!0?Ti.setFromMatrixColumn(e,1):(Ti.setFromMatrixColumn(e,0),Ti.crossVectors(this.object.up,Ti)),Ti.multiplyScalar(t),this._panOffset.add(Ti)}_pan(t,e){let i=this.domElement;if(this.object.isPerspectiveCamera){let r=this.object.position;Ti.copy(r).sub(this.target);let o=Ti.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*o/i.clientHeight,this.object.matrix),this._panUp(2*e*o/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),r=t-i.left,o=e-i.top,s=i.width,u=i.height;this._mouse.x=r/s*2-1,this._mouse.y=-(o/u)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(Mr*this._rotateDelta.x/e.clientHeight),this._rotateUp(Mr*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(Mr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-Mr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(Mr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-Mr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(this._pointers.length===1)this._rotateStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._rotateStart.set(i,r)}}_handleTouchStartPan(t){if(this._pointers.length===1)this._panStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._panStart.set(i,r)}}_handleTouchStartDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,r=t.pageY-e.y,o=Math.sqrt(i*i+r*r);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(this._pointers.length==1)this._rotateEnd.set(t.pageX,t.pageY);else{let i=this._getSecondPointerPosition(t),r=.5*(t.pageX+i.x),o=.5*(t.pageY+i.y);this._rotateEnd.set(r,o)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(Mr*this._rotateDelta.x/e.clientHeight),this._rotateUp(Mr*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(this._pointers.length===1)this._panEnd.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._panEnd.set(i,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,r=t.pageY-e.y,o=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let s=(t.pageX+e.x)*.5,u=(t.pageY+e.y)*.5;this._updateZoomParameters(s,u)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];e===void 0&&(e=new Et,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){let e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){let e=t.deltaMode,i={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return t.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}};function UH(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.ownerDocument.addEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function BH(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function zH(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(FT),this.state=Pn.NONE;break;case 1:let t=this._pointers[0],e=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:e.x,pageY:e.y});break}}function HH(n){let t;switch(n.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case $a.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Pn.DOLLY;break;case $a.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Pn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Pn.ROTATE}break;case $a.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Pn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Pn.PAN}break;default:this.state=Pn.NONE}this.state!==Pn.NONE&&this.dispatchEvent(hC)}function jH(n){switch(this.state){case Pn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Pn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Pn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function WH(n){this.enabled===!1||this.enableZoom===!1||this.state!==Pn.NONE||(n.preventDefault(),this.dispatchEvent(hC),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(FT))}function GH(n){this.enabled!==!1&&this._handleKeyDown(n)}function $H(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Ya.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Pn.TOUCH_ROTATE;break;case Ya.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Pn.TOUCH_PAN;break;default:this.state=Pn.NONE}break;case 2:switch(this.touches.TWO){case Ya.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Pn.TOUCH_DOLLY_PAN;break;case Ya.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Pn.TOUCH_DOLLY_ROTATE;break;default:this.state=Pn.NONE}break;default:this.state=Pn.NONE}this.state!==Pn.NONE&&this.dispatchEvent(hC)}function YH(n){switch(this._trackPointer(n),this.state){case Pn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Pn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Pn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Pn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Pn.NONE}}function qH(n){this.enabled!==!1&&n.preventDefault()}function XH(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function ZH(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var Av=class n{constructor(t,e){this.http=t;this.authService=e}apiUrl="/api";getRooms(t){return this.http.get(`${this.apiUrl}/classrooms`,{params:t,headers:this.authService.getAuthHeaders()})}getRoomById(t){return this.http.get(`${this.apiUrl}/classrooms/${t}`,{headers:this.authService.getAuthHeaders()})}createRoom(t){return this.http.post(`${this.apiUrl}/classrooms`,t,{headers:this.authService.getAuthHeaders()})}updateRoom(t,e){return this.http.put(`${this.apiUrl}/classrooms/${t}`,e,{headers:this.authService.getAuthHeaders()})}deleteRoom(t){return this.http.delete(`${this.apiUrl}/classrooms/${t}`,{headers:this.authService.getAuthHeaders()})}getRoomSchedule(t){return this.http.get(`${this.apiUrl}/classrooms/${t}/schedule`,{headers:this.authService.getAuthHeaders()})}getCurrentClasses(t){return this.http.get(`${this.apiUrl}/classrooms/${t}/current-classes`,{headers:this.authService.getAuthHeaders()})}getSchoolMap(){return this.http.get(`${this.apiUrl}/school/map`,{headers:this.authService.getAuthHeaders()})}changeRoomStatus(t,e){return this.http.patch(`${this.apiUrl}/classrooms/${t}/status`,{status:e},{headers:this.authService.getAuthHeaders()})}getAvailableRooms(t){return this.http.get(`${this.apiUrl}/classrooms/available`,{params:t,headers:this.authService.getAuthHeaders()})}getRoomStatistics(){return this.http.get(`${this.apiUrl}/classrooms/statistics`,{headers:this.authService.getAuthHeaders()})}loadRoomFurniture(t){return this.http.get(`${this.apiUrl}/classrooms/${t}/furniture`,{headers:this.authService.getAuthHeaders()})}saveRoomLayout(t,e){return this.http.post(`${this.apiUrl}/classrooms/${t}/layout`,e,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(e){return new(e||n)(Ve(Un),Ve(Cn))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})};var KH=["gameCanvas"],NT=()=>[1,2,3];function QH(n,t){n&1&&(a(0,"div",61)(1,"div",62)(2,"div",63),D(3,"div",64),a(4,"div",65),D(5,"div",66)(6,"div",66)(7,"div",66)(8,"div",66)(9,"div",66)(10,"div",66)(11,"div",67),l()(),a(12,"p"),c(13,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641..."),l()()())}function ej(n,t){if(n&1&&(a(0,"option",68),c(1),l()),n&2){let e=t.$implicit;P("value",e),h(),Z(" \u0627\u0644\u0637\u0627\u0628\u0642 ",e," ")}}function tj(n,t){if(n&1){let e=Se();a(0,"div",69)(1,"div",70)(2,"button",71),R("click",function(){k(e);let r=T();return F(r.changeFloor(-1))}),D(3,"i",72),c(4," \u0627\u0644\u0637\u0627\u0628\u0642 \u0627\u0644\u0633\u0627\u0628\u0642 "),l(),a(5,"div",73)(6,"div",74),D(7,"i",34),c(8),l(),a(9,"p",75),D(10,"i",38),c(11),l()(),a(12,"button",71),R("click",function(){k(e);let r=T();return F(r.changeFloor(1))}),c(13," \u0627\u0644\u0637\u0627\u0628\u0642 \u0627\u0644\u062A\u0627\u0644\u064A "),D(14,"i",76),l()(),a(15,"div",77)(16,"button",78),R("click",function(){k(e);let r=T();return F(r.zoomOut())}),D(17,"i",79),l(),a(18,"div",80),c(19),l(),a(20,"button",78),R("click",function(){k(e);let r=T();return F(r.zoomIn())}),D(21,"i",81),l(),a(22,"button",82),R("click",function(){k(e);let r=T();return F(r.resetView())}),D(23,"i",83),l()()()}if(n&2){let e=T();h(8),Z(" \u0627\u0644\u0637\u0627\u0628\u0642 ",e.currentFloor," "),h(3),Z(" ",e.currentBuilding," "),h(8),Z(" ",(e.zoomLevel*100).toFixed(0),"% ")}}function nj(n,t){n&1&&(a(0,"div",84)(1,"div",85),D(2,"canvas",86,0),a(4,"div",87)(5,"h4"),D(6,"i",88),c(7," \u062A\u0639\u0644\u064A\u0645\u0627\u062A \u0627\u0644\u062A\u062D\u0643\u0645"),l(),a(8,"ul")(9,"li")(10,"span",89),c(11,"\u2191 \u2193"),l(),c(12," \u0627\u0644\u062A\u0646\u0642\u0644 \u0628\u064A\u0646 \u0627\u0644\u0637\u0648\u0627\u0628\u0642"),l(),a(13,"li")(14,"span",89),c(15,"+ -"),l(),c(16," \u0627\u0644\u062A\u0643\u0628\u064A\u0631 \u0648\u0627\u0644\u062A\u0635\u063A\u064A\u0631"),l(),a(17,"li")(18,"span",89),c(19,"R"),l(),c(20," \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u062A\u0639\u064A\u064A\u0646"),l(),a(21,"li"),c(22,"\u0627\u0633\u062D\u0628 \u0627\u0644\u0641\u0623\u0631\u0629 \u0644\u0644\u062A\u062F\u0648\u064A\u0631"),l(),a(23,"li"),c(24,"\u0639\u062C\u0644\u0629 \u0627\u0644\u0641\u0623\u0631\u0629 \u0644\u0644\u062A\u0645\u0631\u064A\u0631"),l()()()()())}function ij(n,t){if(n&1){let e=Se();a(0,"div",92),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.selectRoom(r))}),a(1,"div",93)(2,"div",94),D(3,"i",95),c(4),l(),a(5,"div",96),D(6,"i"),c(7),l()(),a(8,"div",97)(9,"div",98),D(10,"i",99),l(),a(11,"div",100)(12,"p"),D(13,"i",34),c(14),l(),a(15,"p"),D(16,"i",38),c(17),l(),a(18,"p"),D(19,"i",25),c(20),l()()(),a(21,"div",101)(22,"button",102),R("click",function(r){let o=k(e).$implicit;return T(2).editRoom(o),F(r.stopPropagation())}),D(23,"i",103),l(),a(24,"button",102),R("click",function(r){let o=k(e).$implicit,s=T(2);return s.changeStatus(o._id,s.getNextStatus(o.status)),F(r.stopPropagation())}),D(25,"i"),l(),a(26,"button",104),R("click",function(r){let o=k(e).$implicit;return T(2).deleteRoom(o._id),F(r.stopPropagation())}),D(27,"i",105),l()()()}if(n&2){let e=t.$implicit,i=T(2);Ue("selected",(i.selectedRoom==null?null:i.selectedRoom._id)===e._id)("available",e.status==="available")("occupied",e.status==="occupied")("maintenance",e.status==="maintenance"),h(4),Z(" ",e.name," "),h(),jn(e.status),h(),jn(i.getStatusIcon(e.status)),h(),Z(" ",i.getStatusText(e.status)," "),h(7),Z(" \u0627\u0644\u0637\u0627\u0628\u0642: ",e.floor," "),h(3),Z(" \u0627\u0644\u0645\u0628\u0646\u0649: ",e.building," "),h(3),Z(" \u0627\u0644\u0633\u0639\u0629: ",e.capacity," \u0637\u0627\u0644\u0628 "),h(5),jn(i.getStatusIcon(i.getNextStatus(e.status)))}}function rj(n,t){if(n&1&&(a(0,"div",90),te(1,ij,28,19,"div",91),l()),n&2){let e=T();h(),P("ngForOf",e.filteredRooms)}}function oj(n,t){if(n&1){let e=Se();a(0,"tr",109),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.selectRoom(r))}),a(1,"td")(2,"div",110),D(3,"div",111),c(4),l()(),a(5,"td"),D(6,"i",34),c(7),l(),a(8,"td"),D(9,"i",38),c(10),l(),a(11,"td")(12,"span",112),D(13,"i",25),c(14),l()(),a(15,"td")(16,"span",113),D(17,"i"),c(18),l()(),a(19,"td")(20,"div",114)(21,"button",115),R("click",function(r){let o=k(e).$implicit;return T(2).editRoom(o),F(r.stopPropagation())}),D(22,"i",103),l(),a(23,"button",115),R("click",function(r){let o=k(e).$implicit,s=T(2);return s.changeStatus(o._id,s.getNextStatus(o.status)),F(r.stopPropagation())}),D(24,"i"),l(),a(25,"button",116),R("click",function(r){let o=k(e).$implicit;return T(2).deleteRoom(o._id),F(r.stopPropagation())}),D(26,"i",105),l()()()()}if(n&2){let e=t.$implicit,i=T(2);Ue("selected",(i.selectedRoom==null?null:i.selectedRoom._id)===e._id),h(3),wo("background-color",e.color||"#3498db"),h(),Z(" ",e.name," "),h(3),Z(" ",e.floor," "),h(3),Z(" ",e.building," "),h(4),Z(" ",e.capacity," "),h(2),jn(e.status),h(),jn(i.getStatusIcon(e.status)),h(),Z(" ",i.getStatusText(e.status)," "),h(6),jn(i.getStatusIcon(i.getNextStatus(e.status)))}}function sj(n,t){if(n&1&&(a(0,"div",106)(1,"table",107)(2,"thead")(3,"tr")(4,"th"),c(5,"\u0627\u0644\u063A\u0631\u0641\u0629"),l(),a(6,"th"),c(7,"\u0627\u0644\u0637\u0627\u0628\u0642"),l(),a(8,"th"),c(9,"\u0627\u0644\u0645\u0628\u0646\u0649"),l(),a(10,"th"),c(11,"\u0627\u0644\u0633\u0639\u0629"),l(),a(12,"th"),c(13,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(14,"th"),c(15,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(16,"tbody"),te(17,oj,27,15,"tr",108),l()()()),n&2){let e=T();h(17),P("ngForOf",e.filteredRooms)}}function aj(n,t){if(n&1&&(a(0,"span",132),D(1,"i",133),c(2),l()),n&2){let e=t.$implicit;h(2),Z(" ",e," ")}}function lj(n,t){n&1&&(a(0,"span",134),c(1," \u0644\u0627 \u062A\u0648\u062C\u062F \u062A\u062C\u0647\u064A\u0632\u0627\u062A "),l())}function uj(n,t){if(n&1&&(a(0,"div",140)(1,"div"),c(2),l(),a(3,"div"),c(4),l(),a(5,"div"),c(6),l(),a(7,"div"),c(8),l()()),n&2){let e=t.$implicit;h(2),$(e.day),h(2),$(e.period),h(2),$(e.subject),h(2),$(e.teacher)}}function cj(n,t){if(n&1&&(a(0,"div",135)(1,"h4"),D(2,"i",136),c(3," \u062C\u062F\u0648\u0644 \u0627\u0644\u062D\u0635\u0635 "),l(),a(4,"div",137)(5,"div",138)(6,"div"),c(7,"\u0627\u0644\u064A\u0648\u0645"),l(),a(8,"div"),c(9,"\u0627\u0644\u062D\u0635\u0629"),l(),a(10,"div"),c(11,"\u0627\u0644\u0645\u0627\u062F\u0629"),l(),a(12,"div"),c(13,"\u0627\u0644\u0645\u0639\u0644\u0645"),l()(),te(14,uj,9,4,"div",139),l()()),n&2){let e=T(2);h(14),P("ngForOf",e.scheduleData)}}function dj(n,t){if(n&1){let e=Se();a(0,"div",117)(1,"div",118)(2,"h3"),D(3,"i",42),c(4),l(),a(5,"button",119),R("click",function(){k(e);let r=T();return F(r.selectedRoom=null)}),D(6,"i",120),l()(),a(7,"div",100)(8,"div",121)(9,"div",122),c(10,"\u0627\u0633\u0645 \u0627\u0644\u063A\u0631\u0641\u0629:"),l(),a(11,"div",123),D(12,"i",95),c(13),l()(),a(14,"div",121)(15,"div",122),c(16,"\u0627\u0644\u0645\u0648\u0642\u0639:"),l(),a(17,"div",123),D(18,"i",7),c(19),l()(),a(20,"div",121)(21,"div",122),c(22,"\u0627\u0644\u0637\u0627\u0628\u0642:"),l(),a(23,"div",123),D(24,"i",34),c(25),l()(),a(26,"div",121)(27,"div",122),c(28,"\u0627\u0644\u0645\u0628\u0646\u0649:"),l(),a(29,"div",123),D(30,"i",38),c(31),l()(),a(32,"div",121)(33,"div",122),c(34,"\u0627\u0644\u062D\u0627\u0644\u0629:"),l(),a(35,"div",123)(36,"div",124)(37,"button",125),R("click",function(){k(e);let r=T();return F(r.changeStatus(r.selectedRoom._id,"available"))}),D(38,"i",23),c(39," \u0645\u062A\u0627\u062D\u0629 "),l(),a(40,"button",125),R("click",function(){k(e);let r=T();return F(r.changeStatus(r.selectedRoom._id,"occupied"))}),D(41,"i",25),c(42," \u0645\u0634\u063A\u0648\u0644\u0629 "),l(),a(43,"button",125),R("click",function(){k(e);let r=T();return F(r.changeStatus(r.selectedRoom._id,"maintenance"))}),D(44,"i",27),c(45," \u0635\u064A\u0627\u0646\u0629 "),l()()()(),a(46,"div",121)(47,"div",122),c(48,"\u0627\u0644\u0633\u0639\u0629:"),l(),a(49,"div",123)(50,"div",126),D(51,"i",25),c(52),l()()(),a(53,"div",121)(54,"div",122),c(55,"\u0627\u0644\u062A\u062C\u0647\u064A\u0632\u0627\u062A:"),l(),a(56,"div",123)(57,"div",127),te(58,aj,3,1,"span",128)(59,lj,2,0,"span",129),l()()(),a(60,"div",121)(61,"div",122),c(62,"\u0644\u0648\u0646 \u0627\u0644\u063A\u0631\u0641\u0629:"),l(),a(63,"div",123),D(64,"div",130),l()()(),te(65,cj,15,1,"div",131),l()}if(n&2){let e=T();h(4),Z(" \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u063A\u0631\u0641\u0629: ",e.selectedRoom.name," "),h(9),Z(" ",e.selectedRoom.name," "),h(6),Z(" ",e.selectedRoom.location||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"," "),h(6),Z(" ",e.selectedRoom.floor," "),h(6),Z(" ",e.selectedRoom.building," "),h(6),Ue("active",e.selectedRoom.status==="available"),h(3),Ue("active",e.selectedRoom.status==="occupied"),h(3),Ue("active",e.selectedRoom.status==="maintenance"),h(9),Z(" ",e.selectedRoom.capacity," \u0637\u0627\u0644\u0628 "),h(6),P("ngForOf",e.selectedRoom.equipment),h(),P("ngIf",!e.selectedRoom.equipment||e.selectedRoom.equipment.length===0),h(5),wo("background-color",e.selectedRoom.color||"#3498db"),h(),P("ngIf",e.scheduleData.length>0)}}function fj(n,t){if(n&1&&(a(0,"option",68),c(1),l()),n&2){let e=t.$implicit;P("value",e),h(),Z(" \u0627\u0644\u0637\u0627\u0628\u0642 ",e," ")}}function hj(n,t){if(n&1){let e=Se();a(0,"div",141),R("click",function(){k(e);let r=T();return r.isAddingRoom=!1,F(r.isEditingRoom=!1)}),a(1,"div",142),R("click",function(r){return k(e),F(r.stopPropagation())}),a(2,"div",143)(3,"h3"),D(4,"i",144),c(5),l(),a(6,"button",119),R("click",function(){k(e);let r=T();return r.isAddingRoom=!1,F(r.isEditingRoom=!1)}),D(7,"i",120),l()(),a(8,"div",145)(9,"form",146),R("ngSubmit",function(){k(e);let r=T();return F(r.isAddingRoom?r.saveNewRoom():r.saveRoomEdit())}),a(10,"div",147)(11,"div",148)(12,"label",149),D(13,"i",95),c(14," \u0627\u0633\u0645 \u0627\u0644\u063A\u0631\u0641\u0629 * "),l(),a(15,"input",150),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newRoom.name,r)||(o.newRoom.name=r),F(r)}),l()(),a(16,"div",148)(17,"label",151),D(18,"i",25),c(19," \u0627\u0644\u0633\u0639\u0629 "),l(),a(20,"input",152),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newRoom.capacity,r)||(o.newRoom.capacity=r),F(r)}),l()()(),a(21,"div",147)(22,"div",148)(23,"label",153),D(24,"i",34),c(25," \u0627\u0644\u0637\u0627\u0628\u0642 "),l(),a(26,"select",154),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newRoom.floor,r)||(o.newRoom.floor=r),F(r)}),te(27,fj,2,2,"option",37),l()(),a(28,"div",148)(29,"label",155),D(30,"i",38),c(31," \u0627\u0644\u0645\u0628\u0646\u0649 "),l(),a(32,"select",156),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newRoom.building,r)||(o.newRoom.building=r),F(r)}),a(33,"option",39),c(34,"\u0627\u0644\u0645\u0628\u0646\u0649 \u0627\u0644\u0631\u0626\u064A\u0633\u064A"),l(),a(35,"option",40),c(36,"\u0645\u0628\u0646\u0649 \u0627\u0644\u0639\u0644\u0648\u0645"),l(),a(37,"option",41),c(38,"\u0645\u0628\u0646\u0649 \u0627\u0644\u0641\u0646\u0648\u0646"),l()()()(),a(39,"div",148)(40,"label",157),D(41,"i",7),c(42," \u0627\u0644\u0645\u0648\u0642\u0639 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A) "),l(),a(43,"input",158),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newRoom.location,r)||(o.newRoom.location=r),F(r)}),l()(),a(44,"div",148)(45,"label",159),D(46,"i",42),c(47," \u0627\u0644\u062D\u0627\u0644\u0629 "),l(),a(48,"select",160),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newRoom.status,r)||(o.newRoom.status=r),F(r)}),a(49,"option",43),c(50,"\u0645\u062A\u0627\u062D\u0629"),l(),a(51,"option",44),c(52,"\u0645\u0634\u063A\u0648\u0644\u0629"),l(),a(53,"option",45),c(54,"\u0642\u064A\u062F \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),l()()(),a(55,"div",148)(56,"label"),D(57,"i",161),c(58," \u0644\u0648\u0646 \u0627\u0644\u063A\u0631\u0641\u0629 "),l(),a(59,"div",162)(60,"input",163),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newRoom.color,r)||(o.newRoom.color=r),F(r)}),l(),D(61,"div",130),l()(),a(62,"div",148)(63,"label"),D(64,"i",27),c(65," \u0627\u0644\u062A\u062C\u0647\u064A\u0632\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629 "),l(),a(66,"div",164)(67,"label")(68,"input",165),R("change",function(){k(e);let r=T();return F(r.toggleEquipment("\u0628\u0631\u0648\u062C\u0643\u062A\u0631"))}),l(),D(69,"i",166),c(70," \u0628\u0631\u0648\u062C\u0643\u062A\u0631 "),l(),a(71,"label")(72,"input",167),R("change",function(){k(e);let r=T();return F(r.toggleEquipment("\u062D\u0627\u0633\u0628 \u0622\u0644\u064A"))}),l(),D(73,"i",168),c(74," \u062D\u0627\u0633\u0628 \u0622\u0644\u064A "),l(),a(75,"label")(76,"input",169),R("change",function(){k(e);let r=T();return F(r.toggleEquipment("\u0645\u0643\u064A\u0641"))}),l(),D(77,"i",170),c(78," \u0645\u0643\u064A\u0641 "),l(),a(79,"label")(80,"input",171),R("change",function(){k(e);let r=T();return F(r.toggleEquipment("\u0633\u0628\u0648\u0631\u0629 \u0630\u0643\u064A\u0629"))}),l(),D(81,"i",172),c(82," \u0633\u0628\u0648\u0631\u0629 \u0630\u0643\u064A\u0629 "),l(),a(83,"label")(84,"input",173),R("change",function(){k(e);let r=T();return F(r.toggleEquipment("\u0645\u0643\u0628\u0631\u0627\u062A \u0635\u0648\u062A"))}),l(),D(85,"i",174),c(86," \u0645\u0643\u0628\u0631\u0627\u062A \u0635\u0648\u062A "),l(),a(87,"label")(88,"input",175),R("change",function(){k(e);let r=T();return F(r.toggleEquipment("\u0648\u0627\u064A \u0641\u0627\u064A"))}),l(),D(89,"i",176),c(90," \u0648\u0627\u064A \u0641\u0627\u064A "),l()()(),a(91,"div",177)(92,"button",178),R("click",function(){k(e);let r=T();return r.isAddingRoom=!1,F(r.isEditingRoom=!1)}),c(93," \u0625\u0644\u063A\u0627\u0621 "),l(),a(94,"button",179),c(95),l()()()()()()}if(n&2){let e=T();h(4),Ue("fa-plus",e.isAddingRoom)("fa-edit",e.isEditingRoom),h(),Z(" ",e.isAddingRoom?"\u0625\u0636\u0627\u0641\u0629 \u063A\u0631\u0641\u0629 \u062C\u062F\u064A\u062F\u0629":"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u063A\u0631\u0641\u0629"," "),h(10),xe("ngModel",e.newRoom.name),h(5),xe("ngModel",e.newRoom.capacity),h(6),xe("ngModel",e.newRoom.floor),h(),P("ngForOf",(e.schoolMap==null?null:e.schoolMap.floors)||ya(22,NT)),h(5),xe("ngModel",e.newRoom.building),h(11),xe("ngModel",e.newRoom.location),h(5),xe("ngModel",e.newRoom.status),h(12),xe("ngModel",e.newRoom.color),h(),wo("background-color",e.newRoom.color),h(7),P("checked",e.newRoom.equipment.includes("\u0628\u0631\u0648\u062C\u0643\u062A\u0631")),h(4),P("checked",e.newRoom.equipment.includes("\u062D\u0627\u0633\u0628 \u0622\u0644\u064A")),h(4),P("checked",e.newRoom.equipment.includes("\u0645\u0643\u064A\u0641")),h(4),P("checked",e.newRoom.equipment.includes("\u0633\u0628\u0648\u0631\u0629 \u0630\u0643\u064A\u0629")),h(4),P("checked",e.newRoom.equipment.includes("\u0645\u0643\u0628\u0631\u0627\u062A \u0635\u0648\u062A")),h(4),P("checked",e.newRoom.equipment.includes("\u0648\u0627\u064A \u0641\u0627\u064A")),h(7),Z(" ",e.isAddingRoom?"\u0625\u0636\u0627\u0641\u0629":"\u062D\u0641\u0638 \u0627\u0644\u062A\u0639\u062F\u064A\u0644\u0627\u062A"," ")}}var Tv=class n{constructor(t){this.roomsService=t}gameCanvasRef;rooms=[];selectedRoom=null;schoolMap=null;filteredRooms=[];isAddingRoom=!1;isEditingRoom=!1;isLoading=!0;viewMode="3d";currentFloor=1;currentBuilding="Main";zoomLevel=1;newRoom={name:"",capacity:30,floor:1,building:"Main",location:"",color:"#3498db",equipment:[],status:"available"};statistics={totalRooms:0,availableRooms:0,occupiedRooms:0,maintenanceRooms:0,totalCapacity:0};scene;camera;renderer;controls;roomObjects=[];filter={floor:"",building:"",status:"",capacity:""};scheduleData=[];ngOnInit(){this.loadData(),this.setupKeyboardControls()}ngAfterViewInit(){this.viewMode==="3d"&&this.init3DView()}loadData(){this.isLoading=!0,As({rooms:this.roomsService.getRooms(),map:this.roomsService.getSchoolMap(),stats:this.roomsService.getRoomStatistics()}).subscribe({next:t=>{this.rooms=t.rooms,this.filteredRooms=[...this.rooms],this.schoolMap=t.map,this.statistics=t.stats,this.isLoading=!1,this.viewMode==="3d"&&this.create3DScene()},error:t=>{console.error("Error loading data:",t),this.isLoading=!1}})}init3DView(){let t=this.gameCanvasRef.nativeElement;this.scene=new Mf,this.scene.background=new jt(8900331),this.camera=new $i(75,t.clientWidth/t.clientHeight,.1,1e3),this.camera.position.set(50,50,50),this.renderer=new Cv({canvas:t,antialias:!0}),this.renderer.setSize(t.clientWidth,t.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.controls=new Ev(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05;let e=new Of(16777215,.6);this.scene.add(e);let i=new If(16777215,.8);i.position.set(50,100,50),this.scene.add(i),this.createFloor(),this.create3DScene(),this.animate()}create3DScene(){if(!this.scene||!this.rooms.length)return;this.roomObjects.forEach(d=>this.scene.remove(d)),this.roomObjects=[];let t=100,e=60,i=15,r=new li(t,5,e),o=new qn({color:9807270,transparent:!0,opacity:.8}),s=new sn(r,o);s.position.y=2.5,this.scene.add(s);let u=this.schoolMap?.floors||[1,2,3];u.forEach(d=>{let p=new ds(t-10,e-10),_=new qn({color:15528177,side:Gr}),m=new sn(p,_);m.rotation.x=Math.PI/2,m.position.y=d*i,this.scene.add(m),this.addFloorLabel(d,t);let y=this.rooms.filter(b=>b.floor===d);this.createFloorRooms(y,d,i)}),this.addStairs(t,e,u.length,i),this.addExteriorDecorations(t,e)}createFloorRooms(t,e,i){t.forEach((d,p)=>{let _=Math.floor(p/4),y=(p%4-3/2)*23,b=_*20,M=this.create3DRoom(d,y,e*i,b);this.roomObjects.push(M),this.scene.add(M),this.addRoomInteraction(M,d)})}create3DRoom(t,e,i,r){let o=new lo;o.position.set(e,i+2,r),o.userData={roomId:t._id,roomData:t};let s=18,u=10,d=12,p=.5,_;switch(t.status){case"available":_=3066993;break;case"occupied":_=15158332;break;case"maintenance":_=15965202;break;default:_=3447003}let m=new sn(new li(s,u,p),new qn({color:_}));m.position.z=-d/2,o.add(m);let y=m.clone();y.position.z=d/2,o.add(y);let b=new sn(new li(p,u,d),new qn({color:_}));b.position.x=s/2,o.add(b);let M=b.clone();M.position.x=-s/2,o.add(M);let O=new sn(new li(s,p,d),new qn({color:8359053}));O.position.y=u/2,o.add(O);let E=new sn(new li(s-1,p,d-1),new qn({color:3426654}));E.position.y=-u/2,o.add(E);let w=new sn(new li(4,6,.2),new qn({color:9127187}));w.position.set(0,-2,-d/2),o.add(w);for(let j=0;j<2;j++){let H=new sn(new li(3,3,.1),new qn({color:8900331,transparent:!0,opacity:.6}));H.position.set(j*6-3,2,-d/2),o.add(H)}return this.addRoomLabel(o,t.name,s),this.addFurniture(o,t),o}addFurniture(t,e){let i=Math.min(e.capacity,30),r=5,o=Math.ceil(i/r);for(let d=0;d<r;d++)for(let p=0;p<o&&!(d*o+p>=i);p++){let _=new sn(new li(1.5,1,1.5),new qn({color:2899536}));_.position.set(p*2-(o-1),-4.5,d*2-(r-1)),t.add(_);let m=new sn(new li(1.5,2,.2),new qn({color:3426654}));m.position.set(p*2-(o-1),-3,d*2-(r-1)-.8),t.add(m)}let s=new sn(new li(10,4,.1),new qn({color:0}));s.position.set(0,0,5),t.add(s);let u=new sn(new li(10.2,4.2,.2),new qn({color:12597547}));u.position.set(0,0,5.1),t.add(u)}addRoomLabel(t,e,i){let r=document.createElement("canvas"),o=r.getContext("2d");if(!o)return;r.width=512,r.height=256,o.fillStyle="#ffffff",o.fillRect(0,0,r.width,r.height),o.fillStyle="#000000",o.font="bold 60px Arial",o.textAlign="center",o.fillText(e,r.width/2,r.height/2+20);let s=new Jc(r),u=new sn(new ds(i-2,2),new Ha({map:s,transparent:!0}));u.position.set(0,5,-7),u.rotation.y=Math.PI,t.add(u)}addFloorLabel(t,e){let i=document.createElement("canvas"),r=i.getContext("2d");if(!r)return;i.width=256,i.height=128,r.fillStyle="#ffffff",r.fillRect(0,0,i.width,i.height),r.fillStyle="#2c3e50",r.font="bold 40px Arial",r.textAlign="center",r.fillText(`\u0627\u0644\u0637\u0627\u0628\u0642 ${t}`,i.width/2,i.height/2+20);let o=new Jc(i),s=new sn(new ds(10,5),new Ha({map:o,transparent:!0}));s.position.set(-e/2+5,t*15,0),this.scene.add(s)}addStairs(t,e,i,r){for(let u=0;u<i-1;u++){let d=new lo;for(let p=0;p<10;p++){let _=new sn(new li(5,r/10,10),new qn({color:8207512}));_.position.set(t/2+2,u*r+p*r/10,p-5),d.add(_)}this.scene.add(d)}}addExteriorDecorations(t,e){for(let r=0;r<5;r++){let o=this.createTree();o.position.set((Math.random()-.5)*(t+50),0,(Math.random()-.5)*(e+50)),this.scene.add(o)}let i=10;for(let r=0;r<i;r++){let o=new sn(new li(4,.1,8),new qn({color:2899536}));if(o.position.set(-t/2-10+r%5*5,.05,e/2+10+Math.floor(r/5)*10),this.scene.add(o),Math.random()>.5){let s=this.createCar();s.position.copy(o.position),s.position.y=1,this.scene.add(s)}}}createTree(){let t=new lo,e=new sn(new Kc(.5,.7,5),new qn({color:9127187}));t.add(e);let i=new sn(new Af(3,8,8),new qn({color:2600544}));return i.position.y=4,t.add(i),t}createCar(){let t=new lo,e=new sn(new li(3,1,6),new qn({color:12597547}));t.add(e);let i=new sn(new li(2.8,.8,1),new qn({color:3447003,transparent:!0,opacity:.5}));i.position.y=.6,i.position.z=-1.5,t.add(i);let r=new Kc(.5,.5,.3,16),o=new qn({color:2899536});for(let s=0;s<4;s++){let u=new sn(r,o);u.rotation.z=Math.PI/2,u.position.set(s<2?-1.2:1.2,-.6,s%2?-2:2),t.add(u)}return t}addRoomInteraction(t,e){t.userData=yt(Ie({},t.userData),{onClick:()=>this.selectRoom(e)})}createFloor(){let t=new ds(200,200),e=new Df().load("assets/textures/floor.jpg");e.wrapS=tu,e.wrapT=tu,e.repeat.set(8,8);let i=new qn({map:e,side:Gr}),r=new sn(t,i);r.rotation.x=Math.PI/2,r.receiveShadow=!0,this.scene.add(r);let o=new Rf(200,50,0,0);this.scene.add(o)}animate(){requestAnimationFrame(()=>this.animate()),this.controls&&this.controls.update(),this.renderer&&this.scene&&this.camera&&this.renderer.render(this.scene,this.camera),this.roomObjects.forEach(t=>{t.rotation.y+=.001})}changeViewMode(t){this.viewMode=t,t==="3d"&&!this.renderer&&setTimeout(()=>this.init3DView(),100)}changeFloor(t){let e=this.schoolMap?.floors||[1,2,3],r=(e.indexOf(this.currentFloor)+t+e.length)%e.length;this.currentFloor=e[r],this.viewMode==="3d"&&(this.camera.position.y=this.currentFloor*15+20,this.controls.target.y=this.currentFloor*15),this.filterRooms()}filterRooms(){this.filteredRooms=this.rooms.filter(t=>!(this.filter.floor&&t.floor!==parseInt(this.filter.floor)||this.filter.building&&t.building!==this.filter.building||this.filter.status&&t.status!==this.filter.status||this.filter.capacity&&t.capacity<parseInt(this.filter.capacity)||this.currentFloor&&t.floor!==this.currentFloor))}addRoom(){this.isAddingRoom=!0,this.newRoom={name:"",capacity:30,floor:this.currentFloor,building:this.currentBuilding,location:"",color:"#3498db",equipment:[],status:"available"}}saveNewRoom(){if(!this.newRoom.name){alert("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u063A\u0631\u0641\u0629");return}this.roomsService.createRoom(this.newRoom).subscribe({next:t=>{this.rooms.push(t),this.filterRooms(),this.isAddingRoom=!1,this.viewMode==="3d"&&this.create3DScene()},error:t=>{console.error("Error adding room:",t),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u063A\u0631\u0641\u0629")}})}editRoom(t){this.selectedRoom=t,this.isEditingRoom=!0,this.newRoom=Ie({},t)}saveRoomEdit(){this.selectedRoom&&this.roomsService.updateRoom(this.selectedRoom._id,this.newRoom).subscribe({next:t=>{let e=this.rooms.findIndex(i=>i._id===t._id);e!==-1&&(this.rooms[e]=t),this.selectedRoom=t,this.isEditingRoom=!1,this.viewMode==="3d"&&this.create3DScene()},error:t=>{console.error("Error updating room:",t),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u063A\u0631\u0641\u0629")}})}deleteRoom(t){confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u063A\u0631\u0641\u0629\u061F")&&this.roomsService.deleteRoom(t).subscribe({next:()=>{this.rooms=this.rooms.filter(e=>e._id!==t),this.filterRooms(),this.selectedRoom=null,this.viewMode==="3d"&&this.create3DScene()},error:e=>{console.error("Error deleting room:",e),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062D\u0630\u0641 \u0627\u0644\u063A\u0631\u0641\u0629")}})}selectRoom(t){if(this.selectedRoom=t,this.roomsService.getRoomSchedule(t._id).subscribe({next:e=>{this.scheduleData=e},error:e=>{console.error("Error loading schedule:",e)}}),this.viewMode==="3d"){let e=this.roomObjects.find(i=>i.userData.roomId===t._id);e&&(this.controls.target.copy(e.position),this.camera.position.copy(e.position).add(new se(20,20,20)))}}changeStatus(t,e){this.roomsService.changeRoomStatus(t,e).subscribe({next:i=>{let r=this.rooms.findIndex(o=>o._id===i._id);r!==-1&&(this.rooms[r]=i),this.selectedRoom?._id===i._id&&(this.selectedRoom=i),this.viewMode==="3d"&&this.create3DScene()},error:i=>{console.error("Error changing room status:",i)}})}setupKeyboardControls(){}handleKeyboardEvent(t){if(this.viewMode==="3d")switch(t.key){case"ArrowUp":this.changeFloor(1);break;case"ArrowDown":this.changeFloor(-1);break;case"+":this.zoomLevel=Math.min(this.zoomLevel+.1,2),this.camera.zoom=this.zoomLevel,this.camera.updateProjectionMatrix();break;case"-":this.zoomLevel=Math.max(this.zoomLevel-.1,.5),this.camera.zoom=this.zoomLevel,this.camera.updateProjectionMatrix();break;case"r":case"R":this.camera.position.set(50,50,50),this.controls.target.set(0,0,0);break}}onWindowResize(){if(this.camera&&this.renderer){let t=this.gameCanvasRef.nativeElement;this.camera.aspect=t.clientWidth/t.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(t.clientWidth,t.clientHeight)}}zoomIn(){this.zoomLevel=Math.min(this.zoomLevel+.1,2),this.camera&&(this.camera.zoom=this.zoomLevel,this.camera.updateProjectionMatrix())}zoomOut(){this.zoomLevel=Math.max(this.zoomLevel-.1,.5),this.camera&&(this.camera.zoom=this.zoomLevel,this.camera.updateProjectionMatrix())}resetView(){this.camera&&this.controls&&(this.camera.position.set(50,50,50),this.controls.target.set(0,0,0),this.zoomLevel=1,this.camera.zoom=this.zoomLevel,this.camera.updateProjectionMatrix())}getStatusIcon(t){switch(t){case"available":return"fas fa-check-circle";case"occupied":return"fas fa-users";case"maintenance":return"fas fa-tools";default:return"fas fa-question-circle"}}getStatusText(t){switch(t){case"available":return"\u0645\u062A\u0627\u062D\u0629";case"occupied":return"\u0645\u0634\u063A\u0648\u0644\u0629";case"maintenance":return"\u0642\u064A\u062F \u0627\u0644\u0635\u064A\u0627\u0646\u0629";default:return"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}}getNextStatus(t){switch(t){case"available":return"occupied";case"occupied":return"maintenance";case"maintenance":return"available";default:return"available"}}toggleEquipment(t){let e=this.newRoom.equipment.indexOf(t);e>-1?this.newRoom.equipment.splice(e,1):this.newRoom.equipment.push(t)}static \u0275fac=function(e){return new(e||n)(Te(Av))};static \u0275cmp=vn({type:n,selectors:[["app-rooms-management-component"]],viewQuery:function(e,i){if(e&1&&im(KH,5),e&2){let r;l0(r=u0())&&(i.gameCanvasRef=r.first)}},hostBindings:function(e,i){e&1&&R("keydown",function(o){return i.handleKeyboardEvent(o)},!1,es)("resize",function(){return i.onWindowResize()},!1,es)},decls:135,vars:25,consts:[["gameCanvas",""],[1,"rooms-management"],["class","loading-screen",4,"ngIf"],[1,"control-bar"],[1,"title-section"],[1,"fas","fa-school"],[1,"school-name"],[1,"fas","fa-map-marker-alt"],[1,"controls"],[1,"view-controls"],[1,"btn",3,"click"],[1,"fas","fa-list"],[1,"fas","fa-th-large"],[1,"fas","fa-cube"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-panel"],[1,"stat-card"],[1,"stat-icon"],[1,"fas","fa-door-open"],[1,"stat-content"],[1,"stat-number"],[1,"stat-card","available"],[1,"fas","fa-check-circle"],[1,"stat-card","occupied"],[1,"fas","fa-users"],[1,"stat-card","maintenance"],[1,"fas","fa-tools"],[1,"fas","fa-user-friends"],[1,"filter-panel"],[1,"filter-title"],[1,"fas","fa-filter"],[1,"filter-controls"],[1,"filter-group"],[1,"fas","fa-layer-group"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fas","fa-building"],["value","Main"],["value","Science"],["value","Arts"],[1,"fas","fa-info-circle"],["value","available"],["value","occupied"],["value","maintenance"],["type","number","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0633\u0639\u0629","min","1","max","100",3,"ngModelChange","input","ngModel"],["class","navigation-panel",4,"ngIf"],["class","game-view",4,"ngIf"],["class","rooms-grid",4,"ngIf"],["class","rooms-table-container",4,"ngIf"],["class","details-panel",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"footer"],[1,"footer-info"],[1,"fas","fa-clock"],[1,"legend"],[1,"legend-item"],[1,"legend-color","available"],[1,"legend-color","occupied"],[1,"legend-color","maintenance"],[1,"loading-screen"],[1,"loader"],[1,"school-building"],[1,"building-roof"],[1,"building-body"],[1,"window"],[1,"building-door"],[3,"value"],[1,"navigation-panel"],[1,"floor-navigation"],[1,"btn-nav",3,"click"],[1,"fas","fa-chevron-down"],[1,"current-floor"],[1,"floor-number"],[1,"building-name"],[1,"fas","fa-chevron-up"],[1,"zoom-controls"],[1,"btn-zoom",3,"click"],[1,"fas","fa-search-minus"],[1,"zoom-level"],[1,"fas","fa-search-plus"],["title","\u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u062A\u0639\u064A\u064A\u0646",1,"btn-reset",3,"click"],[1,"fas","fa-sync-alt"],[1,"game-view"],[1,"canvas-container"],[1,"game-canvas"],[1,"game-instructions"],[1,"fas","fa-gamepad"],[1,"key"],[1,"rooms-grid"],["class","room-card",3,"selected","available","occupied","maintenance","click",4,"ngFor","ngForOf"],[1,"room-card",3,"click"],[1,"room-header"],[1,"room-name"],[1,"fas","fa-door-closed"],[1,"room-status"],[1,"room-body"],[1,"room-icon"],[1,"fas","fa-chalkboard-teacher"],[1,"room-details"],[1,"room-actions"],[1,"btn-action",3,"click"],[1,"fas","fa-edit"],[1,"btn-action","danger",3,"click"],[1,"fas","fa-trash"],[1,"rooms-table-container"],[1,"rooms-table"],[3,"selected","click",4,"ngFor","ngForOf"],[3,"click"],[1,"room-name-cell"],[1,"room-color-indicator"],[1,"capacity-badge"],[1,"status-badge"],[1,"actions-cell"],[1,"btn-action","small",3,"click"],[1,"btn-action","small","danger",3,"click"],[1,"details-panel"],[1,"panel-header"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"status-controls"],[1,"btn-status",3,"click"],[1,"capacity-display"],[1,"equipment-tags"],["class","equipment-tag",4,"ngFor","ngForOf"],["class","text-muted",4,"ngIf"],[1,"color-preview"],["class","schedule-section",4,"ngIf"],[1,"equipment-tag"],[1,"fas","fa-check"],[1,"text-muted"],[1,"schedule-section"],[1,"fas","fa-calendar-alt"],[1,"schedule-table"],[1,"schedule-header"],["class","schedule-row",4,"ngFor","ngForOf"],[1,"schedule-row"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"fas"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["for","roomName"],["type","text","id","roomName","name","roomName","required","","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u063A\u0631\u0641\u0629",3,"ngModelChange","ngModel"],["for","roomCapacity"],["type","number","id","roomCapacity","name","capacity","min","1","max","100","placeholder","\u0639\u062F\u062F \u0627\u0644\u0637\u0644\u0627\u0628",3,"ngModelChange","ngModel"],["for","roomFloor"],["id","roomFloor","name","floor",3,"ngModelChange","ngModel"],["for","roomBuilding"],["id","roomBuilding","name","building",3,"ngModelChange","ngModel"],["for","roomLocation"],["type","text","id","roomLocation","name","location","placeholder","\u0645\u062B\u0627\u0644: \u0634\u0645\u0627\u0644 \u0627\u0644\u0645\u0628\u0646\u0649 \u0627\u0644\u0631\u0626\u064A\u0633\u064A",3,"ngModelChange","ngModel"],["for","roomStatus"],["id","roomStatus","name","status",3,"ngModelChange","ngModel"],[1,"fas","fa-palette"],[1,"color-picker"],["type","color","name","color",3,"ngModelChange","ngModel"],[1,"equipment-selector"],["type","checkbox","name","projector",3,"change","checked"],[1,"fas","fa-video"],["type","checkbox","name","computer",3,"change","checked"],[1,"fas","fa-desktop"],["type","checkbox","name","airConditioner",3,"change","checked"],[1,"fas","fa-wind"],["type","checkbox","name","smartBoard",3,"change","checked"],[1,"fas","fa-chalkboard"],["type","checkbox","name","speakers",3,"change","checked"],[1,"fas","fa-volume-up"],["type","checkbox","name","wifi",3,"change","checked"],[1,"fas","fa-wifi"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"]],template:function(e,i){e&1&&(a(0,"div",1),te(1,QH,14,0,"div",2),a(2,"div",3)(3,"div",4)(4,"h1"),D(5,"i",5),c(6," \u0646\u0638\u0627\u0645 \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0641\u0635\u0648\u0644 \u0627\u0644\u062F\u0631\u0627\u0633\u064A\u0629 "),l(),a(7,"p",6),D(8,"i",7),c(9," Al-rouad Akadime "),l()(),a(10,"div",8)(11,"div",9)(12,"button",10),R("click",function(){return i.changeViewMode("list")}),D(13,"i",11),c(14," \u0642\u0627\u0626\u0645\u0629 "),l(),a(15,"button",10),R("click",function(){return i.changeViewMode("grid")}),D(16,"i",12),c(17," \u0634\u0628\u0643\u0629 "),l(),a(18,"button",10),R("click",function(){return i.changeViewMode("3d")}),D(19,"i",13),c(20," \u062B\u0644\u0627\u062B\u064A \u0627\u0644\u0623\u0628\u0639\u0627\u062F "),l()(),a(21,"button",14),R("click",function(){return i.addRoom()}),D(22,"i",15),c(23," \u0625\u0636\u0627\u0641\u0629 \u063A\u0631\u0641\u0629 \u062C\u062F\u064A\u062F\u0629 "),l()()(),a(24,"div",16)(25,"div",17)(26,"div",18),D(27,"i",19),l(),a(28,"div",20)(29,"h3"),c(30,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u063A\u0631\u0641"),l(),a(31,"p",21),c(32),l()()(),a(33,"div",22)(34,"div",18),D(35,"i",23),l(),a(36,"div",20)(37,"h3"),c(38,"\u0627\u0644\u063A\u0631\u0641 \u0627\u0644\u0645\u062A\u0627\u062D\u0629"),l(),a(39,"p",21),c(40),l()()(),a(41,"div",24)(42,"div",18),D(43,"i",25),l(),a(44,"div",20)(45,"h3"),c(46,"\u0627\u0644\u063A\u0631\u0641 \u0627\u0644\u0645\u0634\u063A\u0648\u0644\u0629"),l(),a(47,"p",21),c(48),l()()(),a(49,"div",26)(50,"div",18),D(51,"i",27),l(),a(52,"div",20)(53,"h3"),c(54,"\u0642\u064A\u062F \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),l(),a(55,"p",21),c(56),l()()(),a(57,"div",17)(58,"div",18),D(59,"i",28),l(),a(60,"div",20)(61,"h3"),c(62,"\u0627\u0644\u0633\u0639\u0629 \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A\u0629"),l(),a(63,"p",21),c(64),l()()()(),a(65,"div",29)(66,"div",30),D(67,"i",31),c(68," \u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u063A\u0631\u0641 "),l(),a(69,"div",32)(70,"div",33)(71,"label"),D(72,"i",34),c(73," \u0627\u0644\u0637\u0627\u0628\u0642"),l(),a(74,"select",35),ye("ngModelChange",function(o){return be(i.filter.floor,o)||(i.filter.floor=o),o}),R("change",function(){return i.filterRooms()}),a(75,"option",36),c(76,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0637\u0648\u0627\u0628\u0642"),l(),te(77,ej,2,2,"option",37),l()(),a(78,"div",33)(79,"label"),D(80,"i",38),c(81," \u0627\u0644\u0645\u0628\u0646\u0649"),l(),a(82,"select",35),ye("ngModelChange",function(o){return be(i.filter.building,o)||(i.filter.building=o),o}),R("change",function(){return i.filterRooms()}),a(83,"option",36),c(84,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0628\u0627\u0646\u064A"),l(),a(85,"option",39),c(86,"\u0627\u0644\u0645\u0628\u0646\u0649 \u0627\u0644\u0631\u0626\u064A\u0633\u064A"),l(),a(87,"option",40),c(88,"\u0645\u0628\u0646\u0649 \u0627\u0644\u0639\u0644\u0648\u0645"),l(),a(89,"option",41),c(90,"\u0645\u0628\u0646\u0649 \u0627\u0644\u0641\u0646\u0648\u0646"),l()()(),a(91,"div",33)(92,"label"),D(93,"i",42),c(94," \u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(95,"select",35),ye("ngModelChange",function(o){return be(i.filter.status,o)||(i.filter.status=o),o}),R("change",function(){return i.filterRooms()}),a(96,"option",36),c(97,"\u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0627\u0644\u0627\u062A"),l(),a(98,"option",43),c(99,"\u0645\u062A\u0627\u062D\u0629"),l(),a(100,"option",44),c(101,"\u0645\u0634\u063A\u0648\u0644\u0629"),l(),a(102,"option",45),c(103,"\u0635\u064A\u0627\u0646\u0629"),l()()(),a(104,"div",33)(105,"label"),D(106,"i",25),c(107," \u0627\u0644\u0633\u0639\u0629 (\u062D\u062F \u0623\u062F\u0646\u0649)"),l(),a(108,"input",46),ye("ngModelChange",function(o){return be(i.filter.capacity,o)||(i.filter.capacity=o),o}),R("input",function(){return i.filterRooms()}),l()()()(),te(109,tj,24,3,"div",47)(110,nj,25,0,"div",48)(111,rj,2,1,"div",49)(112,sj,18,1,"div",50)(113,dj,66,17,"div",51)(114,hj,96,23,"div",52),a(115,"div",53)(116,"div",54)(117,"p"),D(118,"i",55),l(),a(119,"p"),D(120,"i",5),c(121),l()(),a(122,"div",56)(123,"div",57),D(124,"div",58),a(125,"span"),c(126,"\u0645\u062A\u0627\u062D\u0629"),l()(),a(127,"div",57),D(128,"div",59),a(129,"span"),c(130,"\u0645\u0634\u063A\u0648\u0644\u0629"),l()(),a(131,"div",57),D(132,"div",60),a(133,"span"),c(134,"\u0635\u064A\u0627\u0646\u0629"),l()()()()()),e&2&&(h(),P("ngIf",i.isLoading),h(11),Ue("active",i.viewMode==="list"),h(3),Ue("active",i.viewMode==="grid"),h(3),Ue("active",i.viewMode==="3d"),h(14),$(i.statistics.totalRooms),h(8),$(i.statistics.availableRooms),h(8),$(i.statistics.occupiedRooms),h(8),$(i.statistics.maintenanceRooms),h(8),$(i.statistics.totalCapacity),h(10),xe("ngModel",i.filter.floor),h(3),P("ngForOf",(i.schoolMap==null?null:i.schoolMap.floors)||ya(24,NT)),h(5),xe("ngModel",i.filter.building),h(13),xe("ngModel",i.filter.status),h(13),xe("ngModel",i.filter.capacity),h(),P("ngIf",i.viewMode==="3d"),h(),P("ngIf",i.viewMode==="3d"),h(),P("ngIf",i.viewMode==="grid"),h(),P("ngIf",i.viewMode==="list"),h(),P("ngIf",i.selectedRoom),h(),P("ngIf",i.isAddingRoom||i.isEditingRoom),h(7),Z(" \u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u063A\u0631\u0641: ",i.statistics.totalRooms," \u063A\u0631\u0641\u0629 "))},dependencies:[oi,xr,Ii,Oi,Yn,Nr,xi,ri,vr,Lr,Ro,of,Kn,Oo,bn,ii,Wn],styles:[".rooms-management[_ngcontent-%COMP%]{font-family:Cairo,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;padding:20px;color:#333}.control-bar[_ngcontent-%COMP%]{background:#fffffff2;backdrop-filter:blur(10px);border-radius:20px;padding:20px 30px;margin-bottom:20px;box-shadow:0 10px 40px #0000001a;display:flex;justify-content:space-between;align-items:center;border:2px solid #fff}.title-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:28px;display:flex;align-items:center;gap:15px}.school-name[_ngcontent-%COMP%]{color:#7f8c8d;font-size:16px;margin-top:5px}.controls[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center}.view-controls[_ngcontent-%COMP%]{display:flex;background:#f8f9fa;border-radius:12px;padding:5px}.view-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:none;background:transparent;padding:10px 20px;border-radius:8px;transition:all .3s}.view-controls[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{background:#3498db;color:#fff;box-shadow:0 4px 15px #3498db4d}.stats-panel[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fffffff2;border-radius:15px;padding:25px;display:flex;align-items:center;gap:20px;transition:transform .3s,box-shadow .3s;box-shadow:0 8px 30px #00000014;border:2px solid transparent}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 40px #00000026}.stat-card.available[_ngcontent-%COMP%]{border-color:#2ecc71}.stat-card.occupied[_ngcontent-%COMP%]{border-color:#e74c3c}.stat-card.maintenance[_ngcontent-%COMP%]{border-color:#f39c12}.stat-icon[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:30px;color:#fff}.stat-card.available[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2ecc71,#27ae60)}.stat-card.occupied[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b)}.stat-card.maintenance[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f39c12,#e67e22)}.stat-card[_ngcontent-%COMP%]:not(.available):not(.occupied):not(.maintenance)   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9)}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#2c3e50;font-size:16px}.stat-number[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#2c3e50;margin:0}.filter-panel[_ngcontent-%COMP%]{background:#fffffff2;border-radius:15px;padding:20px;margin-bottom:30px;box-shadow:0 8px 30px #00000014}.filter-title[_ngcontent-%COMP%]{font-size:18px;color:#2c3e50;margin-bottom:20px;display:flex;align-items:center;gap:10px}.filter-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;align-items:end}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#7f8c8d;font-size:14px;display:flex;align-items:center;gap:5px}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 15px;border:2px solid #e0e0e0;border-radius:10px;background:#fff;font-size:16px;transition:border-color .3s}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.navigation-panel[_ngcontent-%COMP%]{background:#ffffffe6;border-radius:15px;padding:15px;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 5px 20px #0000001a}.floor-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.btn-nav[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;border:none;padding:12px 25px;border-radius:10px;font-size:16px;cursor:pointer;display:flex;align-items:center;gap:10px;transition:all .3s}.btn-nav[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #3498db4d}.current-floor[_ngcontent-%COMP%]{text-align:center}.floor-number[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#2c3e50;display:flex;align-items:center;justify-content:center;gap:10px}.building-name[_ngcontent-%COMP%]{color:#7f8c8d;font-size:14px;margin-top:5px}.zoom-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.btn-zoom[_ngcontent-%COMP%], .btn-reset[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;border:none;background:#f8f9fa;color:#2c3e50;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s}.btn-zoom[_ngcontent-%COMP%]:hover, .btn-reset[_ngcontent-%COMP%]:hover{background:#3498db;color:#fff;transform:scale(1.1)}.zoom-level[_ngcontent-%COMP%]{font-weight:700;color:#2c3e50;min-width:60px;text-align:center}.game-view[_ngcontent-%COMP%]{background:#0000001a;border-radius:15px;overflow:hidden;margin-bottom:30px;box-shadow:0 15px 50px #0003}.canvas-container[_ngcontent-%COMP%]{position:relative;height:600px}.game-canvas[_ngcontent-%COMP%]{width:100%;height:100%;display:block;border-radius:15px}.game-instructions[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:20px;background:#fffffff2;padding:20px;border-radius:10px;max-width:300px;backdrop-filter:blur(10px);border:2px solid white}.game-instructions[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 15px;color:#2c3e50;display:flex;align-items:center;gap:10px}.game-instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.game-instructions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;color:#7f8c8d;font-size:14px}.key[_ngcontent-%COMP%]{display:inline-block;background:#2c3e50;color:#fff;padding:2px 8px;border-radius:4px;font-family:monospace;margin:0 3px}.rooms-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:25px;padding:20px}.room-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;overflow:hidden;box-shadow:0 10px 40px #0000001a;transition:all .3s;cursor:pointer;border:3px solid transparent}.room-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 20px 50px #0003}.room-card.available[_ngcontent-%COMP%]{border-color:#2ecc71}.room-card.occupied[_ngcontent-%COMP%]{border-color:#e74c3c}.room-card.maintenance[_ngcontent-%COMP%]{border-color:#f39c12}.room-header[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);display:flex;justify-content:space-between;align-items:center}.room-name[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#2c3e50}.room-status[_ngcontent-%COMP%]{padding:6px 15px;border-radius:20px;font-size:14px;display:flex;align-items:center;gap:8px}.room-status.available[_ngcontent-%COMP%]{background:#2ecc711a;color:#27ae60}.room-status.occupied[_ngcontent-%COMP%]{background:#e74c3c1a;color:#c0392b}.room-status.maintenance[_ngcontent-%COMP%]{background:#f39c121a;color:#d35400}.room-body[_ngcontent-%COMP%]{padding:20px;display:flex;gap:20px;align-items:center}.room-icon[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#3498db,#2980b9);display:flex;align-items:center;justify-content:center;font-size:30px;color:#fff}.room-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#7f8c8d;display:flex;align-items:center;gap:10px}.room-actions[_ngcontent-%COMP%]{padding:15px 20px;background:#f8f9fa;display:flex;gap:10px;justify-content:flex-end}.btn-action[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;border:none;background:#fff;color:#7f8c8d;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s;box-shadow:0 4px 15px #0000001a}.btn-action[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 25px #00000026;color:#3498db}.btn-action.danger[_ngcontent-%COMP%]:hover{color:#e74c3c}.rooms-table[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:15px;overflow:hidden;box-shadow:0 10px 40px #0000001a}.rooms-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9)}.rooms-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:20px;color:#fff;text-align:right;font-weight:600}.rooms-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f0f0f0;transition:all .3s}.rooms-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.rooms-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#3498db1a}.rooms-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 20px;text-align:right}.room-name-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.room-color-indicator[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;border:2px solid white;box-shadow:0 0 0 2px #f0f0f0}.capacity-badge[_ngcontent-%COMP%]{background:#3498db;color:#fff;padding:5px 15px;border-radius:20px;font-weight:700}.status-badge[_ngcontent-%COMP%]{padding:8px 20px;border-radius:20px;font-size:14px;display:inline-flex;align-items:center;gap:8px}.status-badge.available[_ngcontent-%COMP%]{background:#2ecc711a;color:#27ae60}.status-badge.occupied[_ngcontent-%COMP%]{background:#e74c3c1a;color:#c0392b}.status-badge.maintenance[_ngcontent-%COMP%]{background:#f39c121a;color:#d35400}.actions-cell[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end}.btn-action.small[_ngcontent-%COMP%]{width:35px;height:35px;font-size:14px}.details-panel[_ngcontent-%COMP%]{background:#fff;border-radius:15px;overflow:hidden;box-shadow:0 10px 40px #0000001a;margin-top:30px}.panel-header[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(135deg,#2c3e50,#34495e);color:#fff;display:flex;justify-content:space-between;align-items:center}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:15px}.btn-close[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:none;background:#ffffff1a;color:#fff;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s}.btn-close[_ngcontent-%COMP%]:hover{background:#fff3;transform:rotate(90deg)}.room-details[_ngcontent-%COMP%]{padding:30px}.detail-row[_ngcontent-%COMP%]{display:flex;margin-bottom:25px;align-items:center}.detail-label[_ngcontent-%COMP%]{width:150px;color:#7f8c8d;font-weight:600}.detail-value[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:20px}.status-controls[_ngcontent-%COMP%]{display:flex;gap:10px}.btn-status[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;border:2px solid #e0e0e0;background:#fff;color:#7f8c8d;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:8px}.btn-status.active[_ngcontent-%COMP%]{border-color:#3498db;background:#3498db;color:#fff}.btn-status[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #0000001a}.capacity-display[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px 25px;border-radius:10px;font-size:18px;font-weight:700;display:flex;align-items:center;gap:15px}.equipment-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.equipment-tag[_ngcontent-%COMP%]{background:#f8f9fa;padding:8px 15px;border-radius:20px;font-size:14px;display:flex;align-items:center;gap:8px}.schedule-section[_ngcontent-%COMP%]{padding:0 30px 30px}.schedule-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:20px;display:flex;align-items:center;gap:10px}.schedule-table[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px;overflow:hidden}.schedule-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);background:#2c3e50;color:#fff;padding:15px 20px;font-weight:600}.schedule-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);padding:15px 20px;border-bottom:1px solid #e0e0e0}.schedule-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.schedule-row[_ngcontent-%COMP%]:hover{background:#fff}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;backdrop-filter:blur(5px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:20px;width:100%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 25px 80px #0000004d;animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{padding:25px 30px;background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:10}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:15px}.modal-body[_ngcontent-%COMP%]{padding:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:25px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;color:#2c3e50;font-weight:600}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:15px;border:2px solid #e0e0e0;border-radius:10px;font-size:16px;transition:all .3s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.color-picker[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.color-picker[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{width:50px;height:50px;border:none;border-radius:50%;overflow:hidden;cursor:pointer}.color-preview[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:10px;border:2px solid #e0e0e0}.equipment-selector[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;padding:20px;background:#f8f9fa;border-radius:10px}.equipment-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px;background:#fff;border-radius:8px;cursor:pointer;transition:all .3s}.equipment-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background:#f0f0f0;transform:translateY(-2px)}.equipment-selector[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;margin-top:30px;padding-top:20px;border-top:2px solid #f0f0f0}.loading-screen[_ngcontent-%COMP%]{position:fixed;inset:0;background:#fffffff2;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:2000;backdrop-filter:blur(10px)}.loader[_ngcontent-%COMP%]{text-align:center}.school-building[_ngcontent-%COMP%]{width:150px;height:150px;position:relative;margin:0 auto 40px;animation:_ngcontent-%COMP%_bounce 2s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}.building-roof[_ngcontent-%COMP%]{width:0;height:0;border-left:75px solid transparent;border-right:75px solid transparent;border-bottom:40px solid #e74c3c;margin:0 auto}.building-body[_ngcontent-%COMP%]{width:140px;height:90px;background:#3498db;margin:0 auto;position:relative;border-radius:5px}.window[_ngcontent-%COMP%]{width:20px;height:30px;background:#f1c40f;position:absolute;border-radius:3px}.window[_ngcontent-%COMP%]:nth-child(1){top:20px;left:20px}.window[_ngcontent-%COMP%]:nth-child(2){top:20px;right:20px}.window[_ngcontent-%COMP%]:nth-child(3){top:50px;left:20px}.window[_ngcontent-%COMP%]:nth-child(4){top:50px;right:20px}.window[_ngcontent-%COMP%]:nth-child(5){top:20px;left:60px}.window[_ngcontent-%COMP%]:nth-child(6){top:50px;left:60px}.building-door[_ngcontent-%COMP%]{width:40px;height:60px;background:#8b4513;position:absolute;bottom:0;left:50%;transform:translate(-50%);border-radius:5px 5px 0 0}.loader[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#2c3e50;font-size:18px;margin-top:20px}.footer[_ngcontent-%COMP%]{margin-top:40px;padding:30px;background:#ffffffe6;border-radius:15px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 5px 20px #0000001a}.footer-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:#7f8c8d;display:flex;align-items:center;gap:10px}.legend[_ngcontent-%COMP%]{display:flex;gap:25px}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.legend-color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;border:2px solid white;box-shadow:0 0 0 2px #f0f0f0}.legend-color.available[_ngcontent-%COMP%]{background:#2ecc71}.legend-color.occupied[_ngcontent-%COMP%]{background:#e74c3c}.legend-color.maintenance[_ngcontent-%COMP%]{background:#f39c12}.btn[_ngcontent-%COMP%]{padding:12px 30px;border-radius:10px;border:none;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s;display:inline-flex;align-items:center;justify-content:center;gap:10px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;box-shadow:0 8px 25px #3498db4d}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 15px 40px #3498db66}.btn-secondary[_ngcontent-%COMP%]{background:#f8f9fa;color:#2c3e50;border:2px solid #e0e0e0}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e9ecef;transform:translateY(-2px);box-shadow:0 8px 25px #0000001a}@media (max-width: 768px){.control-bar[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.stats-panel[_ngcontent-%COMP%], .rooms-grid[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.navigation-panel[_ngcontent-%COMP%], .floor-navigation[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.canvas-container[_ngcontent-%COMP%]{height:400px}.game-instructions[_ngcontent-%COMP%]{position:static;max-width:100%;margin:20px}.filter-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}.schedule-header[_ngcontent-%COMP%], .schedule-row[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.footer[_ngcontent-%COMP%]{flex-direction:column;gap:20px;text-align:center}.legend[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}}"]})};var Sr=da(Ta());var gs=class n{constructor(t,e){this.http=t;this.authService=e}apiUrl="/api";removeStudentFromClass(t,e){return this.http.delete(`${this.apiUrl}/classes/${t}/unenroll/${e}`,{headers:this.authService.getAuthHeaders()})}getClasses(){return this.http.get(`${this.apiUrl}/classes`,{headers:this.authService.getAuthHeaders()})}getClassById(t){return this.http.get(`${this.apiUrl}/classes/${t}`,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(e){return new(e||n)(Ve(Un),Ve(Cn))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ka=class n{constructor(t,e){this.http=t;this.authService=e}apiUrl="/api";getTeachers(){return this.http.get(`${this.apiUrl}/teachers`,{headers:this.authService.getAuthHeaders()})}getTeacherById(t){return this.http.get(`${this.apiUrl}/teachers/${t}`,{headers:this.authService.getAuthHeaders()})}createTeacher(t){return this.http.post(`${this.apiUrl}/teachers`,t,{headers:this.authService.getAuthHeaders()})}updateTeacher(t,e){return this.http.put(`${this.apiUrl}/teachers/${t}`,e,{headers:this.authService.getAuthHeaders()})}deleteTeacher(t){return this.http.delete(`${this.apiUrl}/teachers/${t}`,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(e){return new(e||n)(Ve(Un),Ve(Cn))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qa=da(Ta());var ld=class n{constructor(t){this.ngZone=t;window.addEventListener("beforeunload",()=>{this.disconnect()})}port=null;writer=null;reader=null;isConnected=!1;PRINT_WIDTH=576;PRINT_HEIGHT=900;CANVAS_WIDTH=576;CANVAS_HEIGHT=900;MAX_CHUNK_SIZE=1024;COMPANY_NAME="\u0623\u0643\u0627\u062F\u064A\u0645\u064A\u0629 \u0627\u0644\u0631\u0648\u0627\u062F \u0644\u0644\u062A\u0639\u0644\u064A\u0645 \u0648\u0627\u0644\u0645\u0639\u0627\u0631\u0641";DEVELOPER_NAME="\u0631\u064A\u062F\u0632\u0643\u0633";FOOTER_TEXT="\u062A\u062A\u0645\u0646\u0649 \u0644\u0643\u0645 \u062A\u062C\u0631\u0628\u0629 \u062A\u0639\u0644\u064A\u0645\u064A\u0629 \u0645\u0645\u062A\u0639\u0629 \u0648\u0645\u0641\u064A\u062F\u0629";COMPANY_ADDRESS="\u0627\u0644\u062C\u0632\u0627\u0626\u0631\u060C \u0648\u0644\u0627\u064A\u0629 \u0627\u0644\u062C\u0632\u0627\u0626\u0631";QR_CODE_TEXT=`\u0623\u0643\u0627\u062F\u064A\u0645\u064A\u0629 \u0627\u0644\u0631\u0648\u0627\u062F \u0644\u0644\u062A\u0639\u0644\u064A\u0645 \u0648\u0627\u0644\u0645\u0639\u0627\u0631\u0641
\u0627\u0644\u0645\u0648\u0642\u0639: academy-arrowad.edu.dz
\u0647\u0627\u062A\u0641: 1234567890`;REDOX_LOGO_URL="https://redox-sm.onrender.com/favicon.ico";ACADEMY_LOGO_URL="https://redox-sm.onrender.com/favicon.ico";connectToThermalPrinter(t=115200){return _n(this,null,function*(){try{if(!("serial"in navigator))throw new Error("\u0648\u0627\u062C\u0647\u0629 \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u063A\u064A\u0631 \u0645\u062F\u0639\u0648\u0645\u0629 \u0641\u064A \u0647\u0630\u0627 \u0627\u0644\u0645\u062A\u0635\u0641\u062D. \u0627\u0644\u0631\u062C\u0627\u0621 \u0627\u0633\u062A\u062E\u062F\u0627\u0645 Chrome \u0623\u0648 Edge.");return this.port=yield navigator.serial.requestPort(),yield this.port.open({baudRate:t,dataBits:8,stopBits:1,parity:"none",flowControl:"none"}),this.writer=this.port.writable.getWriter(),yield this.writer.write(new Uint8Array([27,64])),yield this.writer.write(new Uint8Array([27,51,24])),this.isConnected=!0,this.ngZone.run(()=>{Qa.default.fire({icon:"success",title:"\u2705 \u062A\u0645 \u0627\u0644\u0627\u062A\u0635\u0627\u0644",text:"\u062A\u0645 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0627\u0644\u062D\u0631\u0627\u0631\u064A\u0629 \u0628\u0646\u062C\u0627\u062D",timer:1500,showConfirmButton:!1})}),console.log("\u2705 \u062A\u0645 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0628\u0646\u062C\u0627\u062D"),!0}catch(e){return console.error("\u274C \u062E\u0637\u0623 \u0627\u0644\u0627\u062A\u0635\u0627\u0644:",e),this.showConnectionError(e),this.isConnected=!1,!1}})}generateQRCode(t){let e=document.createElement("canvas");e.width=120,e.height=120;let i=e.getContext("2d");i.fillStyle="#FFFFFF",i.fillRect(0,0,e.width,e.height),i.fillStyle="#000000";let r=100,o=(e.width-r)/2,s=(e.height-r)/2;return i.fillRect(o,s,r,r),i.fillStyle="#FFFFFF",i.fillRect(o+10,s+10,r-20,r-20),i.fillStyle="#000000",i.font="bold 10px Arial",i.textAlign="center",i.fillText("QR Code",e.width/2,e.height-5),e}loadImage(t){return _n(this,null,function*(){return new Promise((e,i)=>{let r=new Image;r.crossOrigin="anonymous",r.onload=()=>e(r),r.onerror=i,r.src=t})})}createReceiptCanvas(t){return _n(this,null,function*(){let e=document.createElement("canvas");e.width=this.CANVAS_WIDTH,e.height=this.CANVAS_HEIGHT;let i=e.getContext("2d");i.fillStyle="#FFFFFF",i.fillRect(0,0,e.width,e.height),i.fillStyle="#000000",i.textAlign="center",i.lineWidth=2;try{let p=yield this.loadImage(this.REDOX_LOGO_URL);i.drawImage(p,20,20,80,80),i.font="bold 20px Arial",i.fillStyle="#2C3E50",i.textAlign="left",i.fillText("AR",470,40),i.textAlign="center"}catch{console.warn("\u0644\u0645 \u064A\u062A\u0645 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0634\u0639\u0627\u0631\u0627\u062A\u060C \u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0627\u0644\u0646\u0635 \u0627\u0644\u0628\u062F\u064A\u0644")}i.font='bold 38px "Arial", sans-serif',i.fillStyle="#000000",this.wrapText(i,this.COMPANY_NAME,e.width/2,60,e.width-40),i.font='bold 32px "Arial", sans-serif',i.fillText("\u0625\u064A\u0635\u0640\u0640\u0640\u0627\u0644 \u062F\u0641\u0640\u0640\u0640\u0639 \u0631\u0645\u0633\u0640\u0640\u0640\u064A",e.width/2,110),this.drawDoubleDivider(i,20,140,e.width-40);let r=this.generateQRCode(this.QR_CODE_TEXT);i.drawImage(r,e.width-140,160,100,100),i.textAlign="right",i.font='bold 24px "Arial", sans-serif';let o=180;i.strokeStyle="#000000",i.lineWidth=1,i.strokeRect(20,160,e.width-180,110),i.fillText(`\u0631\u0642\u0645 \u0627\u0644\u0625\u064A\u0635\u0627\u0644: ${t.receiptNumber}`,e.width-180,o),o+=30,i.fillText(`\u0627\u0644\u062A\u0627\u0631\u064A\u062E: ${t.date}`,e.width-180,o),o+=30,i.fillText(`\u0627\u0644\u0648\u0642\u062A: ${t.time}`,e.width-180,o),o+=30,i.fillText(`\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639: ${this.translatePaymentMethod(t.paymentMethod)}`,e.width-180,o),o+=50,this.drawDivider(i,20,o,e.width-40,"#000000",2),o+=30,i.font='bold 28px "Arial", sans-serif',i.fillStyle="#2C3E50",i.fillText("\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628",e.width-20,o),o+=35,i.font='bold 26px "Arial", sans-serif',i.fillStyle="#000000",i.fillText(`\u0627\u0644\u0627\u0633\u0640\u0640\u0640\u0645: ${t.studentName}`,e.width-20,o),o+=35,i.strokeStyle="#2C3E50",i.lineWidth=1.5;let s=o-70;i.strokeRect(20,s,e.width-40,140);let u=e.width-40;i.fillText(`\u0631\u0642\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644: ${t.studentId}`,u,o),o+=35,t.academicYear&&(i.fillText(`\u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062F\u0631\u0627\u0633\u064A: ${t.academicYear}`,u,o),o+=35),t.parentPhone&&(i.fillText(`\u0647\u0627\u062A\u0641 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631: ${t.parentPhone}`,u,o),o+=35),o+=30,this.drawDoubleDivider(i,20,o,e.width-40),o+=40,i.font='bold 28px "Arial", sans-serif',i.fillStyle="#2C3E50",i.fillText("\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062F\u0641\u0639",e.width-20,o),o+=40,i.font='bold 26px "Arial", sans-serif',i.fillStyle="#000000";let d=o;return i.strokeStyle="#000000",i.lineWidth=1,i.fillStyle="#2C3E50",i.fillRect(20,d,e.width-40,40),i.fillStyle="#FFFFFF",i.font='bold 22px "Arial", sans-serif',i.textAlign="center",i.fillText("\u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644",e.width/2,d+28),i.fillText("\u0627\u0644\u0645\u0628\u0644\u063A (\u062F\u062C)",100,d+28),o+=40,i.fillStyle="#FFFFFF",i.strokeRect(20,o,e.width-40,40),i.fillStyle="#000000",i.textAlign="right",i.font='22px "Arial", sans-serif',i.fillText(t.className,e.width-100,o+28),i.textAlign="center",i.font='bold 22px "Arial", sans-serif',i.fillText(t.amount.toLocaleString("ar-EG"),100,o+28),o+=40,i.strokeRect(20,o,e.width-40,40),i.textAlign="right",i.font='22px "Arial", sans-serif',i.fillText(`\u0644\u0641\u062A\u0631\u0629: ${t.month}`,e.width-100,o+28),o+=50,i.textAlign="center",i.font='bold 32px "Arial", sans-serif',i.fillStyle="#000000",i.fillText("\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A:",e.width/2-50,o),i.font='bold 36px "Arial", sans-serif',i.fillStyle="#2C3E50",i.fillText(`${t.amount.toLocaleString("ar-EG")} \u062F.\u062C`,e.width/2+60,o),o+=60,this.drawFancyDivider(i,20,o,e.width-40),o+=40,t.notes&&(i.textAlign="right",i.font='bold 22px "Arial", sans-serif',i.fillStyle="#2C3E50",i.fillText("\u0645\u0644\u0627\u062D\u0638\u0627\u062A:",e.width-20,o),o+=30,i.font='20px "Arial", sans-serif',i.fillStyle="#000000",this.wrapTextRight(i,t.notes,e.width-20,o,e.width-40),o+=60),this.drawDoubleDivider(i,20,o,e.width-40),o+=40,i.textAlign="center",i.font='bold 26px "Arial", sans-serif',i.fillStyle="#2C3E50",i.fillText("\u062A\u0645\u062A \u0627\u0644\u0637\u0628\u0627\u0639\u0629 \u0628\u0648\u0627\u0633\u0637\u0629 \u0646\u0638\u0627\u0645",e.width/2,o),o+=35,i.font='bold 32px "Arial", sans-serif',i.fillStyle="#E74C3C",i.fillText(this.DEVELOPER_NAME,e.width/2,o),o+=40,i.font='bold 24px "Arial", sans-serif',i.fillStyle="#000000",i.fillText(this.FOOTER_TEXT,e.width/2,o),o+=40,i.font='bold 22px "Arial", sans-serif',i.fillStyle="#2C3E50",i.fillText("\u0646\u0633\u062E\u0629 \u0627\u0644\u0637\u0627\u0644\u0628",e.width/2,o),o+=50,i.font='bold 26px "Arial", sans-serif',i.fillStyle="#27AE60",i.fillText("\u0634\u0643\u0631\u0627\u064B \u0644\u062B\u0642\u062A\u0643\u0645 \u0627\u0644\u063A\u0627\u0644\u064A\u0629",e.width/2,o),o+=35,i.font='20px "Arial", sans-serif',i.fillStyle="#000000",i.fillText("\u0647\u0630\u0627 \u0625\u064A\u0635\u0627\u0644 \u0631\u0633\u0645\u064A \u0648\u064A\u064F\u0631\u062C\u0649 \u0627\u0644\u0627\u062D\u062A\u0641\u0627\u0638 \u0628\u0647 \u0644\u0644\u0645\u0631\u0627\u062C\u0639\u0629",e.width/2,o),o+=30,this.drawDivider(i,20,o,e.width-40,"#000000",1),o+=40,i.font='bold 24px "Arial", sans-serif',i.fillStyle="#2C3E50",i.fillText("\uFDFA \u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u0649 \u0633\u064A\u062F\u0646\u0627 \u0645\u062D\u0645\u062F",e.width/2,o),o+=35,i.font='20px "Arial", sans-serif',i.fillStyle="#000000",i.fillText("\u0644\u0627 \u062A\u0646\u0633\u0648\u0627 \u0627\u0644\u0635\u0644\u0627\u0629 \u0639\u0644\u0649 \u0631\u0633\u0648\u0644 \u0627\u0644\u0644\u0647",e.width/2,o),e})}canvasToRaster(t){let r=t.getContext("2d").getImageData(0,0,t.width,t.height).data,o=Math.ceil(t.width/8),s=new Uint8Array(o*t.height);for(let u=0;u<t.height;u++)for(let d=0;d<t.width;d++){let p=(u*t.width+d)*4;if(.299*r[p]+.587*r[p+1]+.114*r[p+2]<128){let m=u*o+Math.floor(d/8),y=7-d%8;s[m]|=1<<y}}return s}printRasterImage(t,e){return _n(this,null,function*(){try{if(!this.writer)throw new Error("\u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u063A\u064A\u0631 \u0645\u062A\u0635\u0644\u0629");let i=Math.ceil(e.width/8),r=e.height,o=new Uint8Array([29,118,48,0,i&255,i>>8&255,r&255,r>>8&255]);yield this.writer.write(new Uint8Array([27,64,27,51,24])),yield this.writer.write(o);let s=this.MAX_CHUNK_SIZE;for(let u=0;u<t.length;u+=s){let d=t.slice(u,u+s);yield this.writer.write(d),yield new Promise(p=>setTimeout(p,5))}return yield this.writer.write(new Uint8Array([27,100,6])),yield this.writer.write(new Uint8Array([29,86,65,3])),!0}catch(i){throw console.error("\u274C \u062E\u0637\u0623 \u0641\u064A \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0646\u0642\u0637\u064A\u0629:",i),i}})}printProfessionalReceipt(t){return _n(this,null,function*(){if(!this.isConnected&&!(yield this.connectToThermalPrinter()))return this.showError("\u0641\u0634\u0644 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629"),!1;try{this.showLoading("\u062C\u0627\u0631\u064A \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0625\u064A\u0635\u0627\u0644...");let e=yield this.createReceiptCanvas(t),i=this.canvasToRaster(e);if(this.showLoading("\u062C\u0627\u0631\u064A \u0627\u0644\u0637\u0628\u0627\u0639\u0629..."),yield this.printRasterImage(i,e))return this.showSuccessToast("\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0625\u064A\u0635\u0627\u0644 \u0628\u0646\u062C\u0627\u062D"),!0;throw new Error("\u0641\u0634\u0644 \u0627\u0644\u0637\u0628\u0627\u0639\u0629")}catch(e){return this.handleError(e),!1}})}wrapTextRight(t,e,i,r,o){let s=e.split(" "),u="",d=30;for(let p=0;p<s.length;p++){let _=u+s[p]+" ";t.measureText(_).width>o&&p>0?(t.fillText(u,i,r),u=s[p]+" ",r+=d):u=_}t.fillText(u,i,r)}wrapText(t,e,i,r,o){let s=e.split(" "),u="",d=40;for(let p=0;p<s.length;p++){let _=u+s[p]+" ";t.measureText(_).width>o&&p>0?(t.fillText(u,i,r),u=s[p]+" ",r+=d):u=_}t.fillText(u,i,r)}drawDoubleDivider(t,e,i,r){t.beginPath(),t.strokeStyle="#000000",t.lineWidth=1,t.moveTo(e,i),t.lineTo(e+r,i),t.moveTo(e,i+3),t.lineTo(e+r,i+3),t.stroke()}drawFancyDivider(t,e,i,r){let o=r/20;t.beginPath(),t.strokeStyle="#2C3E50",t.lineWidth=2;for(let s=0;s<20;s++)s%2===0&&(t.moveTo(e+s*o,i),t.lineTo(e+(s+1)*o,i));t.stroke()}drawDivider(t,e,i,r,o="#000000",s=1){t.beginPath(),t.strokeStyle=o,t.lineWidth=s,t.moveTo(e,i),t.lineTo(e+r,i),t.stroke()}translatePaymentMethod(t){return{cash:"\u0646\u0642\u062F\u0627\u064B",bank:"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A",card:"\u0628\u0637\u0627\u0642\u0629 \u0625\u0626\u062A\u0645\u0627\u0646",check:"\u0634\u064A\u0643",online:"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",mobile:"\u062F\u0641\u0639 \u0645\u062D\u0645\u0648\u0644"}[t]||t}showConnectionError(t){let e="\u274C \u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629: ";t.message.includes("permission")||t.name==="SecurityError"?e+="\u064A\u062C\u0628 \u0645\u0646\u062D \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0629 \u0644\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649 \u0627\u0644\u0637\u0627\u0628\u0639\u0629":t.message.includes("supported")?e+="\u0647\u0630\u0647 \u0627\u0644\u0645\u064A\u0632\u0629 \u063A\u064A\u0631 \u0645\u062F\u0639\u0648\u0645\u0629 \u0641\u064A \u0645\u062A\u0635\u0641\u062D\u0643. \u0627\u0644\u0631\u062C\u0627\u0621 \u0627\u0633\u062A\u062E\u062F\u0627\u0645 Chrome \u0623\u0648 Edge":t.message.includes("No device selected")?e+="\u0644\u0645 \u064A\u062A\u0645 \u0627\u062E\u062A\u064A\u0627\u0631 \u0637\u0627\u0628\u0639\u0629":t.message.includes("baudRate")?e+="\u0645\u0639\u062F\u0644 \u0627\u0644\u0628\u0627\u0648\u062F \u063A\u064A\u0631 \u0635\u062D\u064A\u062D. \u062A\u0623\u0643\u062F \u0645\u0646 \u0636\u0628\u0637 \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0639\u0644\u0649 115200 \u0628\u0627\u0648\u062F":e+=t.message,this.ngZone.run(()=>{Qa.default.fire({icon:"error",title:"\u062E\u0637\u0623",text:e,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B",footer:"<small>\u062A\u0623\u0643\u062F \u0645\u0646 \u0623\u0646 \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0645\u062A\u0635\u0644\u0629 \u0648\u062A\u0639\u0645\u0644 \u0628\u0634\u0643\u0644 \u0635\u062D\u064A\u062D</small>"})})}showSuccessToast(t){this.ngZone.run(()=>{Qa.default.fire({icon:"success",title:"\u2705 \u0646\u062C\u0627\u062D",text:t,timer:2e3,showConfirmButton:!1,position:"top-end",toast:!0})})}showLoading(t){this.ngZone.run(()=>{Qa.default.fire({title:t,allowOutsideClick:!1,showConfirmButton:!1,willOpen:()=>{Qa.default.showLoading()}})})}handleError(t){console.error("\u274C \u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u0637\u0627\u0628\u0639\u0629:",t),this.ngZone.run(()=>{Qa.default.fire({icon:"error",title:"\u274C \u062E\u0637\u0623",text:"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u0637\u0628\u0627\u0639\u0629: "+t.message,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B"})}),this.isConnected=!1}showError(t){this.ngZone.run(()=>{Qa.default.fire({icon:"error",title:"\u062E\u0637\u0623",text:t,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B"})})}disconnect(){return _n(this,null,function*(){try{this.writer&&(yield this.writer.releaseLock(),this.writer=null),this.reader&&(yield this.reader.releaseLock(),this.reader=null),this.port&&(yield this.port.close(),this.port=null),this.isConnected=!1,console.log("\u062A\u0645 \u0642\u0637\u0639 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629")}catch(t){console.error("\u062E\u0637\u0623 \u0641\u064A \u0642\u0637\u0639 \u0627\u0644\u0627\u062A\u0635\u0627\u0644:",t)}})}checkConnectionStatus(){return this.isConnected}getPrinterStatus(){return{isConnected:this.isConnected,port:this.port?"\u0645\u062A\u0635\u0644":"\u063A\u064A\u0631 \u0645\u062A\u0635\u0644",timestamp:new Date().toLocaleString("ar-EG"),width:this.PRINT_WIDTH,height:this.PRINT_HEIGHT,academy:this.COMPANY_NAME,developer:this.DEVELOPER_NAME}}printMonthlyPaymentReceipt(t){return _n(this,null,function*(){let e={receiptNumber:`PAY-${Date.now().toString().slice(-8)}`,date:new Date().toLocaleDateString("ar-EG"),time:new Date().toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}),studentName:t.studentName||"\u0637\u0627\u0644\u0628",studentId:t.studentId||"\u0628\u062F\u0648\u0646 \u0631\u0642\u0645",className:t.className||"\u0645\u0627\u062F\u0629 \u062F\u0631\u0627\u0633\u064A\u0629",month:t.month||"\u0634\u0647\u0631",amount:t.amount||0,paymentMethod:t.paymentMethod||"cash",academicYear:t.academicYear||"",parentPhone:t.parentPhone||"",notes:"\u062A\u0645 \u0633\u062F\u0627\u062F \u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u0634\u0647\u0631\u064A \u0628\u0646\u062C\u0627\u062D. \u0646\u062A\u0645\u0646\u0649 \u0644\u0644\u0637\u0627\u0644\u0628 \u0627\u0644\u062A\u0648\u0641\u064A\u0642 \u0648\u0627\u0644\u0646\u062C\u0627\u062D."};return yield this.printProfessionalReceipt(e)})}printStudentMonthlyReport(t,e,i){return _n(this,null,function*(){try{let r=new Date,o={receiptNumber:`RPT-${r.getTime().toString().slice(-8)}`,date:r.toLocaleDateString("ar-EG"),time:r.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}),studentName:t.name||"\u0637\u0627\u0644\u0628",studentId:t.studentId||"\u0628\u062F\u0648\u0646 \u0631\u0642\u0645",className:"\u062A\u0642\u0631\u064A\u0631 \u0634\u0647\u0631\u064A \u0634\u0627\u0645\u0644",month:r.toLocaleDateString("ar-EG",{month:"long",year:"numeric"}),amount:i.totalPaid||0,paymentMethod:"\u062A\u0642\u0631\u064A\u0631",academicYear:t.academicYear||"",parentPhone:t.parentPhone||"",notes:`\u0646\u0633\u0628\u0629 \u0627\u0644\u062D\u0636\u0648\u0631: ${e.attendanceRate||0}%
\u062D\u0636\u0648\u0631: ${e.present||0} | \u063A\u064A\u0627\u0628: ${e.absent||0} | \u062A\u0623\u062E\u0631: ${e.late||0}
\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u062F\u0641\u0648\u0639: ${i.totalPaid||0} \u062F.\u062C | \u0627\u0644\u0645\u062A\u0628\u0642\u064A: ${i.pending||0} \u062F.\u062C`};return yield this.printProfessionalReceipt(o)}catch(r){return console.error("\u062E\u0637\u0623 \u0641\u064A \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u062A\u0642\u0631\u064A\u0631:",r),!1}})}printAdvancedTestPage(){return _n(this,null,function*(){if(!this.isConnected&&!(yield this.connectToThermalPrinter()))return!1;try{let t=document.createElement("canvas");t.width=this.CANVAS_WIDTH,t.height=this.CANVAS_HEIGHT;let e=t.getContext("2d");e.fillStyle="#FFFFFF",e.fillRect(0,0,t.width,t.height),e.fillStyle="#000000",e.textAlign="center",e.font='bold 40px "Arial", sans-serif',e.fillText("\u2728 \u0635\u0641\u062D\u0629 \u0627\u062E\u062A\u0628\u0627\u0631 \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u2728",t.width/2,60);let i=this.generateQRCode("\u0623\u0643\u0627\u062F\u064A\u0645\u064A\u0629 \u0627\u0644\u0631\u0648\u0627\u062F \u0644\u0644\u062A\u0639\u0644\u064A\u0645 \u0648\u0627\u0644\u0645\u0639\u0627\u0631\u0641 - \u0635\u0641\u062D\u0629 \u0627\u062E\u062A\u0628\u0627\u0631");e.drawImage(i,t.width/2-60,90,120,120),e.textAlign="right",e.font='bold 24px "Arial", sans-serif',e.fillText(`\u0627\u0644\u062A\u0627\u0631\u064A\u062E: ${new Date().toLocaleDateString("ar-EG")}`,t.width-20,250),e.fillText(`\u0627\u0644\u0648\u0642\u062A: ${new Date().toLocaleTimeString("ar-EG")}`,t.width-20,280),e.fillText(`\u0627\u0644\u0646\u0638\u0627\u0645: ${this.DEVELOPER_NAME}`,t.width-20,310),e.fillText(`\u0627\u0644\u0645\u0624\u0633\u0633\u0629: ${this.COMPANY_NAME}`,t.width-20,340),e.textAlign="center",e.font='bold 32px "Arial", sans-serif',e.fillText("\u0627\u062E\u062A\u0628\u0627\u0631 \u0627\u0644\u062E\u0637\u0648\u0637 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0648\u0627\u0644\u0644\u063A\u0629",t.width/2,400),e.font='26px "Arial", sans-serif',e.fillText("\u0645\u0631\u062D\u0628\u0627\u064B \u0628\u0643\u0645 \u0641\u064A \u0646\u0638\u0627\u0645 \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062A\u0639\u0644\u064A\u0645",t.width/2,440),e.fillText("\u0646\u0638\u0627\u0645 \u0645\u062A\u0643\u0627\u0645\u0644 \u0644\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0624\u0633\u0633\u0627\u062A \u0627\u0644\u062A\u0639\u0644\u064A\u0645\u064A\u0629",t.width/2,480),this.drawFancyDivider(e,20,520,t.width-40),e.fillStyle="#000000",e.fillRect(50,550,150,30),e.fillStyle="#666666",e.fillRect(50,585,150,30),e.fillStyle="#999999",e.fillRect(50,620,150,30),e.fillStyle="#000000",e.font='bold 20px "Arial", sans-serif',e.textAlign="left",e.fillText("\u062A\u062F\u0631\u062C \u0627\u0644\u0631\u0645\u0627\u062F\u064A",220,610),e.textAlign="center",e.font='bold 38px "Arial", sans-serif',e.fillStyle="#27AE60",e.fillText("\u2705 \u0627\u062E\u062A\u0628\u0627\u0631 \u0646\u0627\u062C\u062D \u2705",t.width/2,700),e.font='28px "Arial", sans-serif',e.fillStyle="#000000",e.fillText("\u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u062A\u0639\u0645\u0644 \u0628\u0634\u0643\u0644 \u0645\u0645\u062A\u0627\u0632",t.width/2,750),e.font='bold 26px "Arial", sans-serif',e.fillStyle="#2C3E50",e.fillText(this.COMPANY_NAME,t.width/2,800),e.fillText(this.DEVELOPER_NAME,t.width/2,840),e.font='22px "Arial", sans-serif',e.fillText("\uFDFA \u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u0649 \u0633\u064A\u062F\u0646\u0627 \u0645\u062D\u0645\u062F",t.width/2,880);let r=this.canvasToRaster(t);return(yield this.printRasterImage(r,t))?(this.showSuccessToast("\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 \u0635\u0641\u062D\u0629 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631 \u0628\u0646\u062C\u0627\u062D"),!0):!1}catch(t){return this.handleError(t),!1}})}quickTest(){return _n(this,null,function*(){try{let t={receiptNumber:"TEST-001",date:new Date().toLocaleDateString("ar-EG"),time:new Date().toLocaleTimeString("ar-EG"),studentName:"\u0627\u062E\u062A\u0628\u0627\u0631 \u0627\u0644\u0646\u0638\u0627\u0645",studentId:"TEST-001",className:"\u0627\u062E\u062A\u0628\u0627\u0631 \u0627\u0644\u0637\u0628\u0627\u0639\u0629",month:"\u0634\u0647\u0631 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631",amount:123456,paymentMethod:"cash",notes:"\u0647\u0630\u0627 \u0625\u064A\u0635\u0627\u0644 \u0627\u062E\u062A\u0628\u0627\u0631\u064A \u0644\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0639\u0645\u0644 \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0648\u0627\u0644\u0623\u0631\u0642\u0627\u0645 \u0627\u0644\u0639\u0631\u0628\u064A\u0629"};return yield this.printProfessionalReceipt(t)}catch(t){return console.error("\u0641\u0634\u0644 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631 \u0627\u0644\u0633\u0631\u064A\u0639:",t),!1}})}printWelcomeMessage(){return _n(this,null,function*(){if(!this.isConnected&&!(yield this.connectToThermalPrinter()))return!1;try{let t=document.createElement("canvas");t.width=this.CANVAS_WIDTH,t.height=600;let e=t.getContext("2d");e.fillStyle="#FFFFFF",e.fillRect(0,0,t.width,t.height),e.fillStyle="#000000",e.textAlign="center",e.font='bold 40px "Arial", sans-serif',e.fillText("\u0645\u0631\u062D\u0628\u0627\u064B \u0628\u0643\u0645 \u0641\u064A",t.width/2,60),e.fillText("\u0646\u0638\u0627\u0645 \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062A\u0639\u0644\u064A\u0645",t.width/2,110),e.font='28px "Arial", sans-serif',e.fillText("\u062A\u0647\u0627\u0646\u064A\u0646\u0627!",t.width/2,180),e.fillText("\u062A\u0645 \u0625\u0639\u062F\u0627\u062F \u0627\u0644\u0646\u0638\u0627\u0645 \u0628\u0646\u062C\u0627\u062D",t.width/2,220);let i=this.generateQRCode(this.QR_CODE_TEXT);e.drawImage(i,t.width/2-60,260,120,120),e.textAlign="right",e.font='24px "Arial", sans-serif';let r=400;e.fillText("\u2713 \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0637\u0644\u0627\u0628 \u0648\u0627\u0644\u0634\u0639\u0628",t.width-20,r),r+=30,e.fillText("\u2713 \u0646\u0638\u0627\u0645 \u0627\u0644\u062D\u0636\u0648\u0631 \u0648\u0627\u0644\u063A\u064A\u0627\u0628",t.width-20,r),r+=30,e.fillText("\u2713 \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0627\u0644\u0645\u0627\u0644\u064A\u0629",t.width-20,r),r+=30,e.fillText("\u2713 \u062A\u0642\u0627\u0631\u064A\u0631 \u062A\u0641\u0635\u064A\u0644\u064A\u0629",t.width-20,r),r+=30,e.fillText("\u2713 \u0637\u0628\u0627\u0639\u0629 \u0625\u064A\u0635\u0627\u0644\u0627\u062A \u0627\u062D\u062A\u0631\u0627\u0641\u064A\u0629",t.width-20,r),e.textAlign="center",e.font='bold 30px "Arial", sans-serif',e.fillText("\u062A\u062A\u0645\u0646\u0649 \u0644\u0643\u0645",t.width/2,520),e.fillText("\u062A\u062C\u0631\u0628\u0629 \u062A\u0639\u0644\u064A\u0645\u064A\u0629 \u0645\u0645\u062A\u0639\u0629 \u0648\u0645\u0641\u064A\u062F\u0629",t.width/2,560),e.font='24px "Arial", sans-serif',e.fillText("\u0646\u062D\u0648 \u0645\u0633\u062A\u0642\u0628\u0644 \u0632\u0627\u0647\u0631 \u0628\u0627\u0644\u0639\u0644\u0645 \u0648\u0627\u0644\u0645\u0639\u0631\u0641\u0629",t.width/2,600);let o=this.canvasToRaster(t);return(yield this.printRasterImage(o,t))?(this.showSuccessToast("\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062A\u0631\u062D\u064A\u0628 \u0628\u0646\u062C\u0627\u062D"),!0):!1}catch(t){return console.error("\u062E\u0637\u0623 \u0641\u064A \u0637\u0628\u0627\u0639\u0629 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062A\u0631\u062D\u064A\u0628:",t),!1}})}static \u0275fac=function(e){return new(e||n)(Ve(Zn))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})};function pj(n,t){n&1&&(a(0,"div",102)(1,"div",103),D(2,"div",104),a(3,"p"),c(4,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A..."),l()()())}function mj(n,t){n&1&&D(0,"i",105)}function gj(n,t){n&1&&D(0,"i",106)}function _j(n,t){if(n&1){let e=Se();a(0,"button",83),R("click",function(){k(e);let r=T();return F(r.connectToPrinter())}),D(1,"i",107),c(2," \u0627\u0644\u0627\u062A\u0635\u0627\u0644 "),l()}}function vj(n,t){if(n&1){let e=Se();a(0,"button",83),R("click",function(){k(e);let r=T();return F(r.disconnectPrinter())}),D(1,"i",107),c(2," \u0642\u0637\u0639 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 "),l()}}function xj(n,t){if(n&1&&(a(0,"option",108),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Jn(" ",e.name," - ",e.studentId," ")}}function yj(n,t){if(n&1&&(a(0,"option",108),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Z(" ",e.name," ")}}function bj(n,t){if(n&1&&(a(0,"option",108),c(1),l()),n&2){let e=t.$implicit;P("value",e),h(),Z(" ",e," ")}}function Cj(n,t){n&1&&D(0,"i",115)}function wj(n,t){n&1&&D(0,"i",106)}function Mj(n,t){if(n&1){let e=Se();a(0,"div",109)(1,"div",110),D(2,"i",27),c(3),l(),a(4,"div",111)(5,"button",112),R("click",function(){k(e);let r=T();return F(r.markSelectedAsPaid())}),te(6,Cj,1,0,"i",113)(7,wj,1,0,"i",10),c(8),l(),a(9,"button",114),R("click",function(){k(e);let r=T();return F(r.printSelectedReceipts())}),D(10,"i",17),c(11," \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0625\u064A\u0635\u0627\u0644\u0627\u062A "),l(),a(12,"button",36),R("click",function(){k(e);let r=T();return F(r.selectedPayments.clear())}),D(13,"i",37),c(14," \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062A\u062D\u062F\u064A\u062F "),l()()()}if(n&2){let e=T();h(3),Z(" ",e.selectedPayments.size," \u062F\u0641\u0639\u0629 \u0645\u062D\u062F\u062F\u0629 "),h(2),P("disabled",e.isBulkActionLoading),h(),P("ngIf",!e.isBulkActionLoading),h(),P("ngIf",e.isBulkActionLoading),h(),Z(" ",e.isBulkActionLoading?"\u062C\u0627\u0631\u064A \u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629...":"\u062A\u0633\u062F\u064A\u062F \u0627\u0644\u0645\u062D\u062F\u062F"," ")}}function Sj(n,t){if(n&1){let e=Se();a(0,"button",142),R("click",function(){k(e);let r=T().$implicit,o=T(2);return F(o.markPaymentAsPaid(r))}),D(1,"i",115),l()}}function Ej(n,t){if(n&1){let e=Se();a(0,"button",143),R("click",function(){k(e);let r=T().$implicit,o=T(2);return F(o.cancelPayment(r))}),D(1,"i",144),l()}}function Aj(n,t){if(n&1){let e=Se();a(0,"tr")(1,"td",118)(2,"input",119),R("change",function(){let r=k(e).$implicit,o=T(2);return F(o.togglePaymentSelection(r._id))}),l()(),a(3,"td"),c(4),Ln(5,"date"),l(),a(6,"td",122)(7,"div",123),c(8),l(),a(9,"div",124),c(10),l()(),a(11,"td"),c(12),a(13,"div",125),c(14),l()(),a(15,"td",126)(16,"span",127),c(17),Ln(18,"number"),l()(),a(19,"td"),c(20),l(),a(21,"td")(22,"span",128),c(23),l()(),a(24,"td")(25,"span",129),c(26),l()(),a(27,"td",130)(28,"span",131),c(29),l(),a(30,"button",132),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.printSinglePaymentReceipt(r))}),D(31,"i",17),l()(),a(32,"td",133),c(33),l(),a(34,"td",134)(35,"div",135),te(36,Sj,2,0,"button",136),a(37,"button",137),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.openEditPaymentModal(r))}),D(38,"i",138),l(),te(39,Ej,2,0,"button",139),a(40,"button",140),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.deletePayment(r))}),D(41,"i",141),l()()()()}if(n&2){let e=t.$implicit,i=T(2);Ue("selected",i.selectedPayments.has(e._id)),h(2),P("checked",i.selectedPayments.has(e._id)),h(2),Z(" ",e.paymentDate?Hi(5,21,e.paymentDate,"yyyy/MM/dd"):"\u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639"," "),h(4),$((e.student==null?null:e.student.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),h(2),$((e.student==null?null:e.student.studentId)||"\u0628\u062F\u0648\u0646 \u0631\u0642\u0645"),h(2),Z(" ",(e.class==null?null:e.class.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"," "),h(2),$(e.class==null||e.class.teacher==null?null:e.class.teacher.name),h(3),Z("",eo(18,24,e.amount)," \u062F.\u062C"),h(3),$(e.month),h(2),jn(e.paymentMethod),h(),Z(" ",i.getPaymentMethodText(e.paymentMethod)," "),h(2),jn(i.getStatusClass(e.status)),h(),Z(" ",i.getStatusText(e.status)," "),h(3),$(e.invoiceNumber||"\u0628\u062F\u0648\u0646 \u0631\u0642\u0645"),h(),P("disabled",!i.isPrinterConnected),h(3),Z(" ",e.notes||"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0644\u0627\u062D\u0638\u0627\u062A"," "),h(3),P("ngIf",e.status!=="paid"),h(3),P("ngIf",e.status==="paid")}}function Tj(n,t){if(n&1){let e=Se();a(0,"div",116)(1,"table",117)(2,"thead")(3,"tr")(4,"th",118)(5,"input",119),R("change",function(){k(e);let r=T();return F(r.selectAllPayments())}),l()(),a(6,"th",120),R("click",function(){k(e);let r=T();return F(r.sort("paymentDate"))}),c(7," \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639 "),D(8,"i",84),l(),a(9,"th",120),R("click",function(){k(e);let r=T();return F(r.sort("student.name"))}),c(10," \u0627\u0644\u0637\u0627\u0644\u0628 "),D(11,"i",84),l(),a(12,"th",120),R("click",function(){k(e);let r=T();return F(r.sort("class.name"))}),c(13," \u0627\u0644\u062D\u0635\u0629 "),D(14,"i",84),l(),a(15,"th",120),R("click",function(){k(e);let r=T();return F(r.sort("amount"))}),c(16," \u0627\u0644\u0645\u0628\u0644\u063A "),D(17,"i",84),l(),a(18,"th"),c(19,"\u0627\u0644\u0634\u0647\u0631"),l(),a(20,"th"),c(21,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639"),l(),a(22,"th"),c(23,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(24,"th"),c(25,"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629"),l(),a(26,"th"),c(27,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),a(28,"th"),c(29,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(30,"tbody"),te(31,Aj,42,26,"tr",121),l()()()}if(n&2){let e=T();h(5),P("checked",e.selectedPayments.size===e.filteredPayments.length&&e.filteredPayments.length>0),h(3),Ue("fa-sort-up",e.sortField==="paymentDate"&&e.sortDirection==="asc")("fa-sort-down",e.sortField==="paymentDate"&&e.sortDirection==="desc"),h(3),Ue("fa-sort-up",e.sortField==="student.name"&&e.sortDirection==="asc")("fa-sort-down",e.sortField==="student.name"&&e.sortDirection==="desc"),h(3),Ue("fa-sort-up",e.sortField==="class.name"&&e.sortDirection==="asc")("fa-sort-down",e.sortField==="class.name"&&e.sortDirection==="desc"),h(3),Ue("fa-sort-up",e.sortField==="amount"&&e.sortDirection==="asc")("fa-sort-down",e.sortField==="amount"&&e.sortDirection==="desc"),h(14),P("ngForOf",e.paginatedPayments)}}function Dj(n,t){if(n&1&&(a(0,"div",152)(1,"span",153),c(2,"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629:"),l(),a(3,"span",154),c(4),l()()),n&2){let e=T().$implicit;h(4),$(e.invoiceNumber)}}function Pj(n,t){if(n&1&&(a(0,"div",152)(1,"span",153),c(2,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A:"),l(),a(3,"span",164),c(4),l()()),n&2){let e=T().$implicit;h(4),$(e.notes)}}function Ij(n,t){if(n&1){let e=Se();a(0,"button",165),R("click",function(){k(e);let r=T().$implicit,o=T(2);return F(o.markPaymentAsPaid(r))}),D(1,"i",115),c(2," \u062A\u0633\u062F\u064A\u062F "),l()}}function Oj(n,t){if(n&1){let e=Se();a(0,"button",166),R("click",function(){k(e);let r=T().$implicit,o=T(2);return F(o.cancelPayment(r))}),D(1,"i",144),c(2," \u0625\u0644\u063A\u0627\u0621 "),l()}}function Rj(n,t){if(n&1){let e=Se();a(0,"div",147)(1,"div",148)(2,"div",149)(3,"input",119),R("change",function(){let r=k(e).$implicit,o=T(2);return F(o.togglePaymentSelection(r._id))}),l()(),a(4,"div",150)(5,"h4"),c(6),l(),a(7,"span",124),c(8),l()(),a(9,"span",129),c(10),l()(),a(11,"div",151)(12,"div",152)(13,"span",153),c(14,"\u0627\u0644\u062D\u0635\u0629:"),l(),a(15,"span",154),c(16),l()(),a(17,"div",152)(18,"span",153),c(19,"\u0627\u0644\u0634\u0647\u0631:"),l(),a(20,"span",154),c(21),l()(),a(22,"div",152)(23,"span",153),c(24,"\u0627\u0644\u0645\u0628\u0644\u063A:"),l(),a(25,"span",155),c(26),Ln(27,"number"),l()(),a(28,"div",152)(29,"span",153),c(30,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639:"),l(),a(31,"span",154),c(32),Ln(33,"date"),l()(),a(34,"div",152)(35,"span",153),c(36,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639:"),l(),a(37,"span",128),c(38),l()(),te(39,Dj,5,1,"div",156)(40,Pj,5,1,"div",156),l(),a(41,"div",157)(42,"div",158),te(43,Ij,3,0,"button",159),a(44,"button",160),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.openEditPaymentModal(r))}),D(45,"i",138),c(46," \u062A\u0639\u062F\u064A\u0644 "),l(),te(47,Oj,3,0,"button",161),a(48,"button",162),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.deletePayment(r))}),D(49,"i",141),c(50," \u062D\u0630\u0641 "),l(),a(51,"button",163),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.printSinglePaymentReceipt(r))}),D(52,"i",17),c(53," \u0637\u0628\u0627\u0639\u0629 "),l()()()()}if(n&2){let e=t.$implicit,i=T(2);Ue("selected",i.selectedPayments.has(e._id)),h(3),P("checked",i.selectedPayments.has(e._id)),h(3),$((e.student==null?null:e.student.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),h(2),$((e.student==null?null:e.student.studentId)||"\u0628\u062F\u0648\u0646 \u0631\u0642\u0645"),h(),jn(i.getStatusClass(e.status)),h(),Z(" ",i.getStatusText(e.status)," "),h(6),$((e.class==null?null:e.class.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),h(5),$(e.month),h(5),Z("",eo(27,20,e.amount)," \u062F.\u062C"),h(6),$(e.paymentDate?Hi(33,22,e.paymentDate,"yyyy/MM/dd"):"\u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639"),h(5),jn(e.paymentMethod),h(),Z(" ",i.getPaymentMethodText(e.paymentMethod)," "),h(),P("ngIf",e.invoiceNumber),h(),P("ngIf",e.notes),h(3),P("ngIf",e.status!=="paid"),h(4),P("ngIf",e.status==="paid"),h(4),P("disabled",!i.isPrinterConnected)}}function kj(n,t){if(n&1&&(a(0,"div",145),te(1,Rj,54,25,"div",146),l()),n&2){let e=T();h(),P("ngForOf",e.paginatedPayments)}}function Fj(n,t){if(n&1){let e=Se();a(0,"div",167)(1,"div",168),D(2,"i",169),a(3,"h3"),c(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u062F\u0641\u0648\u0639\u0627\u062A"),l(),a(5,"p"),c(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0645\u062F\u0641\u0648\u0639\u0627\u062A \u062A\u0637\u0627\u0628\u0642 \u0645\u0639\u0627\u064A\u064A\u0631 \u0627\u0644\u0628\u062D\u062B \u0627\u0644\u062E\u0627\u0635\u0629 \u0628\u0643"),l(),a(7,"button",6),R("click",function(){k(e);let r=T();return F(r.clearFilters())}),D(8,"i",37),c(9," \u0645\u0633\u062D \u0627\u0644\u0641\u0644\u0627\u062A\u0631 "),l()()()}}function Nj(n,t){if(n&1){let e=Se();a(0,"span",172),R("click",function(){k(e);let r=T().$implicit,o=T();return F(o.currentPage=r)}),c(1),l()}if(n&2){let e=T().$implicit,i=T();Ue("active",e===i.currentPage),h(),Z(" ",e," ")}}function Lj(n,t){if(n&1&&(a(0,"span",173),c(1),l()),n&2){let e=T().$implicit;h(),Z(" ",e," ")}}function Vj(n,t){if(n&1&&(va(0),te(1,Nj,2,3,"span",170)(2,Lj,2,1,"span",171),xa()),n&2){let e=t.$implicit;h(),P("ngIf",typeof e=="number"),h(),P("ngIf",typeof e=="string")}}function Uj(n,t){if(n&1&&(a(0,"option",108),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Mo(" ",e.name," - ",e.studentId," - ",e.grade||""," ")}}function Bj(n,t){n&1&&(a(0,"div",202),c(1," \u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0637\u0627\u0644\u0628 "),l())}function zj(n,t){if(n&1&&(a(0,"option",108),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Jn(" ",e.name," - ",e.teacher==null?null:e.teacher.name," ")}}function Hj(n,t){n&1&&(a(0,"div",202),c(1," \u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u062D\u0635\u0629 "),l())}function jj(n,t){n&1&&(a(0,"div",202),c(1," \u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0645\u0628\u0644\u063A \u0635\u062D\u064A\u062D "),l())}function Wj(n,t){if(n&1&&(a(0,"option",108),c(1),l()),n&2){let e=t.$implicit;P("value",e),h(),Z(" ",e," ")}}function Gj(n,t){n&1&&(a(0,"div",202),c(1," \u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0634\u0647\u0631 "),l())}function $j(n,t){n&1&&D(0,"i",203)}function Yj(n,t){n&1&&D(0,"i",106)}function qj(n,t){if(n&1){let e=Se();a(0,"div",174)(1,"div",175)(2,"div",176)(3,"h3"),D(4,"i",4),c(5," \u062A\u0633\u062C\u064A\u0644 \u062F\u0641\u0639\u0629 \u062C\u062F\u064A\u062F\u0629 "),l(),a(6,"button",177),R("click",function(){k(e);let r=T();return F(r.closeNewPaymentModal())}),D(7,"i",37),l()(),a(8,"form",178),R("ngSubmit",function(){k(e);let r=T();return F(r.onSubmitNewPayment())}),a(9,"div",179)(10,"div",180)(11,"label",181),D(12,"i",41),c(13," \u0627\u0644\u0637\u0627\u0644\u0628 * "),l(),a(14,"select",182)(15,"option",43),c(16,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0637\u0627\u0644\u0628"),l(),te(17,Uj,2,4,"option",44),l(),te(18,Bj,2,0,"div",183),l(),a(19,"div",180)(20,"label",184),D(21,"i",46),c(22," \u0627\u0644\u062D\u0635\u0629 * "),l(),a(23,"select",185)(24,"option",43),c(25,"\u0627\u062E\u062A\u0631 \u0627\u0644\u062D\u0635\u0629"),l(),te(26,zj,2,3,"option",44),l(),te(27,Hj,2,0,"div",183),l(),a(28,"div",186)(29,"div",180)(30,"label",187),D(31,"i",25),c(32," \u0627\u0644\u0645\u0628\u0644\u063A (\u062F.\u062C) * "),l(),D(33,"input",188),te(34,jj,2,0,"div",183),l(),a(35,"div",180)(36,"label",189),D(37,"i",49),c(38," \u0627\u0644\u0634\u0647\u0631 * "),l(),a(39,"select",190)(40,"option",43),c(41,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0634\u0647\u0631"),l(),te(42,Wj,2,2,"option",44),l(),te(43,Gj,2,0,"div",183),l()(),a(44,"div",186)(45,"div",180)(46,"label",191),D(47,"i",58),c(48," \u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639 "),l(),a(49,"select",192)(50,"option",60),c(51,"\u0646\u0642\u062F\u064A"),l(),a(52,"option",61),c(53,"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A"),l(),a(54,"option",62),c(55,"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),l(),a(56,"option",63),c(57,"\u062F\u0641\u0639 \u0645\u062D\u0645\u0648\u0644"),l(),a(58,"option",64),c(59,"\u0634\u064A\u0643"),l()()(),a(60,"div",180)(61,"label",193),D(62,"i",66),c(63," \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639 "),l(),D(64,"input",194),l()(),a(65,"div",180)(66,"label",195),D(67,"i",196),c(68," \u0645\u0644\u0627\u062D\u0638\u0627\u062A "),l(),D(69,"textarea",197),l()(),a(70,"div",198)(71,"button",199),R("click",function(){k(e);let r=T();return F(r.closeNewPaymentModal())}),c(72," \u0625\u0644\u063A\u0627\u0621 "),l(),a(73,"button",200),te(74,$j,1,0,"i",201)(75,Yj,1,0,"i",10),c(76),l()()()()()}if(n&2){let e,i,r,o,s,u,d,p,_,m,y=T();h(8),P("formGroup",y.newPaymentForm),h(2),Ue("error",((e=y.newPaymentForm.get("studentId"))==null?null:e.invalid)&&((e=y.newPaymentForm.get("studentId"))==null?null:e.touched)),h(7),P("ngForOf",y.students),h(),P("ngIf",((i=y.newPaymentForm.get("studentId"))==null?null:i.invalid)&&((i=y.newPaymentForm.get("studentId"))==null?null:i.touched)),h(),Ue("error",((r=y.newPaymentForm.get("classId"))==null?null:r.invalid)&&((r=y.newPaymentForm.get("classId"))==null?null:r.touched)),h(7),P("ngForOf",y.getStudentClasses(((o=y.newPaymentForm.get("studentId"))==null?null:o.value)||"")),h(),P("ngIf",((s=y.newPaymentForm.get("classId"))==null?null:s.invalid)&&((s=y.newPaymentForm.get("classId"))==null?null:s.touched)),h(2),Ue("error",((u=y.newPaymentForm.get("amount"))==null?null:u.invalid)&&((u=y.newPaymentForm.get("amount"))==null?null:u.touched)),h(5),P("ngIf",((d=y.newPaymentForm.get("amount"))==null?null:d.invalid)&&((d=y.newPaymentForm.get("amount"))==null?null:d.touched)),h(),Ue("error",((p=y.newPaymentForm.get("month"))==null?null:p.invalid)&&((p=y.newPaymentForm.get("month"))==null?null:p.touched)),h(7),P("ngForOf",y.availableMonths),h(),P("ngIf",((_=y.newPaymentForm.get("month"))==null?null:_.invalid)&&((_=y.newPaymentForm.get("month"))==null?null:_.touched)),h(17),Ue("error",((m=y.newPaymentForm.get("paymentDate"))==null?null:m.invalid)&&((m=y.newPaymentForm.get("paymentDate"))==null?null:m.touched)),h(13),P("disabled",y.newPaymentForm.invalid||y.isRecordingPayment),h(),P("ngIf",!y.isRecordingPayment),h(),P("ngIf",y.isRecordingPayment),h(),Z(" ",y.isRecordingPayment?"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u0633\u062C\u064A\u0644...":"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629"," ")}}function Xj(n,t){if(n&1){let e=Se();a(0,"div",174)(1,"div",175)(2,"div",176)(3,"h3"),D(4,"i",138),c(5," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629 "),l(),a(6,"button",177),R("click",function(){k(e);let r=T();return F(r.isEditPaymentModalOpen=!1)}),D(7,"i",37),l()(),a(8,"div",179)(9,"div",204)(10,"div",205)(11,"span",153),c(12,"\u0627\u0644\u0637\u0627\u0644\u0628:"),l(),a(13,"span",154),c(14),l()(),a(15,"div",205)(16,"span",153),c(17,"\u0627\u0644\u062D\u0635\u0629:"),l(),a(18,"span",154),c(19),l()(),a(20,"div",205)(21,"span",153),c(22,"\u0627\u0644\u0634\u0647\u0631:"),l(),a(23,"span",154),c(24),l()(),a(25,"div",205)(26,"span",153),c(27,"\u0627\u0644\u062D\u0627\u0644\u0629:"),l(),a(28,"span",129),c(29),l()()(),a(30,"div",206)(31,"button",6),R("click",function(){k(e);let r=T();return F(r.updatePaymentAmount())}),D(32,"i",4),c(33," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0628\u0644\u063A "),l()()(),a(34,"div",198)(35,"button",199),R("click",function(){k(e);let r=T();return F(r.isEditPaymentModalOpen=!1)}),c(36," \u0625\u063A\u0644\u0627\u0642 "),l()()()()}if(n&2){let e=T();h(14),$(e.editingPayment==null||e.editingPayment.student==null?null:e.editingPayment.student.name),h(5),$(e.editingPayment==null||e.editingPayment.class==null?null:e.editingPayment.class.name),h(5),$(e.editingPayment==null?null:e.editingPayment.month),h(4),jn(e.getStatusClass((e.editingPayment==null?null:e.editingPayment.status)||"")),h(),Z(" ",e.getStatusText((e.editingPayment==null?null:e.editingPayment.status)||"")," ")}}var Pv=class n{constructor(t,e,i,r,o,s,u){this.paymentsService=t;this.studentsService=e;this.lessonsService=i;this.teachersService=r;this.authService=o;this.printerService=s;this.fb=u;this.newPaymentForm=this.fb.group({studentId:["",Ht.required],classId:["",Ht.required],amount:["",[Ht.required,Ht.min(1)]],month:["",Ht.required],paymentMethod:["cash",Ht.required],paymentDate:[new Date().toISOString().split("T")[0],Ht.required],notes:[""]}),this.generateAvailableMonths()}payments=[];filteredPayments=[];students=[];classes=[];teachers=[];isLoading=!0;isRecordingPayment=!1;isExporting=!1;filters={student:"",class:"",month:"",status:"",paymentMethod:"",startDate:"",endDate:""};newPaymentForm;isNewPaymentModalOpen=!1;selectedStudentForPayment=null;availableMonths=[];isEditPaymentModalOpen=!1;editingPayment=null;selectedPayments=new Set;isBulkActionLoading=!1;stats={totalPayments:0,totalAmount:0,pendingPayments:0,latePayments:0,paidAmount:0,pendingAmount:0};currentPage=1;itemsPerPage=20;totalPages=1;viewMode="table";sortField="paymentDate";sortDirection="desc";isPrinterConnected=!1;printerStatus="\u063A\u064A\u0631 \u0645\u062A\u0635\u0644";ngOnInit(){this.loadInitialData(),this.checkPrinterConnection(),this.updatePrinterStatus()}loadInitialData(){this.isLoading=!0,As({payments:this.paymentsService.getPayments(),students:this.studentsService.getStudents(),classes:this.lessonsService.getClasses(),teachers:this.teachersService.getTeachers()}).subscribe({next:t=>{this.payments=t.payments,this.students=t.students,this.classes=t.classes,this.teachers=t.teachers,this.applyFilters(),this.calculateStatistics(),this.isLoading=!1},error:t=>{console.error("Error loading data:",t),this.showError("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"),this.isLoading=!1}})}generateAvailableMonths(){let t=new Date,e=[];for(let i=-12;i<=6;i++){let r=new Date(t.getFullYear(),t.getMonth()+i,1),o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;e.push(o)}this.availableMonths=e}applyFilters(){let t=[...this.payments];if(this.filters.student&&(t=t.filter(e=>e.student?._id===this.filters.student||e.student?.name?.toLowerCase().includes(this.filters.student.toLowerCase()))),this.filters.class&&(t=t.filter(e=>e.class?._id===this.filters.class||e.class?.name?.toLowerCase().includes(this.filters.class.toLowerCase()))),this.filters.month&&(t=t.filter(e=>e.month===this.filters.month)),this.filters.status&&(t=t.filter(e=>e.status===this.filters.status)),this.filters.paymentMethod&&(t=t.filter(e=>e.paymentMethod===this.filters.paymentMethod)),this.filters.startDate){let e=new Date(this.filters.startDate);t=t.filter(i=>i.paymentDate?new Date(i.paymentDate)>=e:!1)}if(this.filters.endDate){let e=new Date(this.filters.endDate);e.setHours(23,59,59,999),t=t.filter(i=>i.paymentDate?new Date(i.paymentDate)<=e:!1)}t.sort((e,i)=>{let r=e[this.sortField],o=i[this.sortField];return this.sortField==="paymentDate"&&(r=e.paymentDate?new Date(e.paymentDate):new Date(0),o=i.paymentDate?new Date(i.paymentDate):new Date(0)),this.sortField==="student.name"&&(r=e.student?.name||"",o=i.student?.name||""),this.sortField==="class.name"&&(r=e.class?.name||"",o=i.class?.name||""),r<o?this.sortDirection==="asc"?-1:1:r>o?this.sortDirection==="asc"?1:-1:0}),this.filteredPayments=t,this.calculatePagination()}calculateStatistics(){this.stats.totalPayments=this.payments.length,this.stats.pendingPayments=this.payments.filter(t=>t.status==="pending").length,this.stats.latePayments=this.payments.filter(t=>t.status==="late").length,this.stats.totalAmount=this.payments.reduce((t,e)=>t+e.amount,0),this.stats.paidAmount=this.payments.filter(t=>t.status==="paid").reduce((t,e)=>t+e.amount,0),this.stats.pendingAmount=this.stats.totalAmount-this.stats.paidAmount}calculatePagination(){this.totalPages=Math.ceil(this.filteredPayments.length/this.itemsPerPage),this.currentPage=Math.max(1,Math.min(this.currentPage,this.totalPages))}get paginatedPayments(){let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredPayments.slice(t,e)}getPaginatedInfo(){let t=(this.currentPage-1)*this.itemsPerPage+1,e=Math.min(this.currentPage*this.itemsPerPage,this.filteredPayments.length);return{start:t,end:e}}getPageNumbers(){let t=[];if(this.totalPages<=7)for(let i=1;i<=this.totalPages;i++)t.push(i);else{let i=Math.max(1,this.currentPage-3),r=Math.min(this.totalPages,this.currentPage+3);this.currentPage<=4?r=7:this.currentPage>=this.totalPages-3&&(i=this.totalPages-7+1);for(let o=i;o<=r;o++)t.push(o)}return t}clearFilters(){this.filters={student:"",class:"",month:"",status:"",paymentMethod:"",startDate:"",endDate:""},this.applyFilters()}sort(t){this.sortField===t?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortField=t,this.sortDirection="asc"),this.applyFilters()}openNewPaymentModal(t){t&&(this.selectedStudentForPayment=t,this.newPaymentForm.patchValue({studentId:t._id})),this.newPaymentForm.reset({paymentMethod:"cash",paymentDate:new Date().toISOString().split("T")[0],amount:"",month:"",classId:"",notes:""}),this.isNewPaymentModalOpen=!0}closeNewPaymentModal(){this.isNewPaymentModalOpen=!1,this.selectedStudentForPayment=null}onSubmitNewPayment(){if(this.newPaymentForm.invalid){this.markFormGroupTouched(this.newPaymentForm);return}this.isRecordingPayment=!0;let t=this.newPaymentForm.value;this.paymentsService.createPayment(t).subscribe({next:e=>{this.showSuccess("\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadInitialData(),this.closeNewPaymentModal(),this.isRecordingPayment=!1},error:e=>{console.error("Error recording payment:",e),this.showError("\u0641\u0634\u0644 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629"),this.isRecordingPayment=!1}})}markPaymentAsPaid(t){Sr.default.fire({title:"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062F\u0641\u0639",text:`\u0647\u0644 \u062A\u0631\u064A\u062F \u062A\u0623\u0643\u064A\u062F \u062F\u0641\u0639 \u0645\u0628\u0644\u063A ${t.amount} \u062F.\u062C \u0644\u0644\u0637\u0627\u0644\u0628 ${t.student?.name}\u061F`,icon:"question",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645\u060C \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062F\u0641\u0639",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",reverseButtons:!0}).then(e=>{if(e.isConfirmed){let i={paymentDate:new Date().toISOString(),paymentMethod:"cash"};this.paymentsService.payPayment(t._id,i).subscribe({next:r=>{this.showSuccess("\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639 \u0628\u0646\u062C\u0627\u062D");let o=this.payments.findIndex(s=>s._id===t._id);o!==-1&&(this.payments[o]=r,this.applyFilters(),this.calculateStatistics())},error:r=>{console.error("Error marking payment as paid:",r),this.showError("\u0641\u0634\u0644 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639")}})}})}openEditPaymentModal(t){this.editingPayment=Ie({},t),this.isEditPaymentModalOpen=!0}updatePaymentAmount(){this.editingPayment&&Sr.default.fire({title:"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0628\u0644\u063A",input:"number",inputLabel:"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u062C\u062F\u064A\u062F",inputValue:this.editingPayment.amount,inputAttributes:{min:"1",step:"100"},showCancelButton:!0,confirmButtonText:"\u062D\u0641\u0638",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",reverseButtons:!0,inputValidator:t=>!t||Number(t)<=0?"\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0645\u0628\u0644\u063A \u0635\u062D\u064A\u062D":null}).then(t=>{if(t.isConfirmed){let e=Number(t.value);this.paymentsService.updatePaymentAmount(this.editingPayment._id,e).subscribe({next:i=>{this.showSuccess("\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0628\u0644\u063A \u0628\u0646\u062C\u0627\u062D");let r=this.payments.findIndex(o=>o._id===this.editingPayment._id);r!==-1&&(this.payments[r]=i,this.applyFilters(),this.calculateStatistics()),this.isEditPaymentModalOpen=!1},error:i=>{console.error("Error updating payment amount:",i),this.showError("\u0641\u0634\u0644 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0628\u0644\u063A")}})}})}cancelPayment(t){Sr.default.fire({title:"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0625\u0644\u063A\u0627\u0621",text:`\u0647\u0644 \u062A\u0631\u064A\u062F \u0625\u0644\u063A\u0627\u0621 \u062F\u0641\u0639\u0629 \u0645\u0628\u0644\u063A ${t.amount} \u062F.\u062C \u0644\u0644\u0637\u0627\u0644\u0628 ${t.student?.name}\u061F`,icon:"warning",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645\u060C \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062F\u0641\u0639\u0629",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u0623\u0645\u0631",confirmButtonColor:"#d33",reverseButtons:!0}).then(e=>{e.isConfirmed&&this.paymentsService.cancelPayment(t._id).subscribe({next:()=>{this.showSuccess("\u062A\u0645 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D");let i=this.payments.findIndex(r=>r._id===t._id);i!==-1&&(this.payments[i].status="pending",this.payments[i].paymentDate=null,this.applyFilters(),this.calculateStatistics())},error:i=>{console.error("Error canceling payment:",i),this.showError("\u0641\u0634\u0644 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062F\u0641\u0639\u0629")}})})}deletePayment(t){Sr.default.fire({title:"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u0630\u0641",text:`\u0647\u0644 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u062F\u0641\u0639\u0629 \u0645\u0628\u0644\u063A ${t.amount} \u062F.\u062C \u0644\u0644\u0637\u0627\u0644\u0628 ${t.student?.name}\u061F`,icon:"error",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645\u060C \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u0623\u0645\u0631",confirmButtonColor:"#d33",reverseButtons:!0}).then(e=>{e.isConfirmed&&this.paymentsService.deletePayment(t._id).subscribe({next:()=>{this.showSuccess("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D"),this.payments=this.payments.filter(i=>i._id!==t._id),this.applyFilters(),this.calculateStatistics()},error:i=>{console.error("Error deleting payment:",i),this.showError("\u0641\u0634\u0644 \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629")}})})}togglePaymentSelection(t){this.selectedPayments.has(t)?this.selectedPayments.delete(t):this.selectedPayments.add(t)}selectAllPayments(){this.selectedPayments.size===this.filteredPayments.length?this.selectedPayments.clear():this.filteredPayments.forEach(t=>this.selectedPayments.add(t._id))}markSelectedAsPaid(){if(this.selectedPayments.size===0){this.showWarning("\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u062F\u0641\u0639\u0627\u062A \u0623\u0648\u0644\u0627\u064B");return}Sr.default.fire({title:"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062F\u0641\u0639 \u0627\u0644\u062C\u0645\u0627\u0639\u064A",text:`\u0647\u0644 \u062A\u0631\u064A\u062F \u062A\u0623\u0643\u064A\u062F \u062F\u0641\u0639 ${this.selectedPayments.size} \u062F\u0641\u0639\u0629\u061F`,icon:"question",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645\u060C \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062F\u0641\u0639",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",reverseButtons:!0}).then(t=>{if(t.isConfirmed){this.isBulkActionLoading=!0;let e=Array.from(this.selectedPayments).map(i=>this.paymentsService.payPayment(i,{paymentDate:new Date().toISOString(),paymentMethod:"cash"}));Promise.all(e.map(i=>i.toPromise())).then(()=>{this.applyFilters(),this.calculateStatistics(),this.selectedPayments.clear(),this.isBulkActionLoading=!1,this.showSuccess(`\u062A\u0645 \u062A\u0633\u062F\u064A\u062F ${e.length} \u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D`)}).catch(i=>{console.error("Error in bulk payment:",i),this.showError("\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u064A \u062A\u0633\u062F\u064A\u062F \u0628\u0639\u0636 \u0627\u0644\u062F\u0641\u0639\u0627\u062A"),this.isBulkActionLoading=!1})}})}printSelectedReceipts(){return _n(this,null,function*(){if(this.selectedPayments.size===0){this.showWarning("\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u062F\u0641\u0639\u0627\u062A \u0623\u0648\u0644\u0627\u064B");return}let t=Array.from(this.selectedPayments),e=this.payments.filter(r=>t.includes(r._id));if(e.length===0){this.showError("\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062F\u0641\u0639\u0627\u062A \u0627\u0644\u0645\u062D\u062F\u062F\u0629");return}if(!this.isPrinterConnected&&!(yield this.connectToPrinter()))return;let i=0;for(let r of e)(yield this.printSinglePaymentReceipt(r))&&i++,yield new Promise(s=>setTimeout(s,1e3));i>0&&(this.showSuccess(`\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 ${i} \u0645\u0646 ${e.length} \u0625\u064A\u0635\u0627\u0644 \u0628\u0646\u062C\u0627\u062D`),i===e.length&&this.selectedPayments.clear())})}printSinglePaymentReceipt(t){return _n(this,null,function*(){if(!this.isPrinterConnected&&!(yield this.connectToPrinter()))return!1;let e={receiptNumber:t.invoiceNumber||`PAY-${Date.now().toString().slice(-8)}`,date:t.paymentDate?new Date(t.paymentDate).toLocaleDateString("ar-EG"):new Date().toLocaleDateString("ar-EG"),time:t.paymentDate?new Date(t.paymentDate).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}):new Date().toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}),studentName:t.student?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641",studentId:t.student?.studentId||"\u0628\u062F\u0648\u0646 \u0631\u0642\u0645",className:t.class?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641",month:t.month,amount:t.amount,paymentMethod:t.paymentMethod,academicYear:t.student?.academicYear||"",parentPhone:t.student?.parentPhone||"",notes:t.notes||`\u062D\u0627\u0644\u0629 \u0627\u0644\u062F\u0641\u0639: ${this.getStatusText(t.status)}`};try{let i=yield this.printerService.printProfessionalReceipt(e);return i&&this.showToast("\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 \u0625\u064A\u0635\u0627\u0644 \u0627\u0644\u062F\u0641\u0639"),i}catch(i){return console.error("Error printing receipt:",i),this.showError("\u0641\u0634\u0644 \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0625\u064A\u0635\u0627\u0644"),!1}})}connectToPrinter(){return _n(this,null,function*(){try{this.showLoading("\u062C\u0627\u0631\u064A \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629...");let t=yield this.printerService.connectToThermalPrinter();return this.isPrinterConnected=t,this.updatePrinterStatus(),t&&this.showSuccess("\u062A\u0645 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0628\u0646\u062C\u0627\u062D"),t}catch(t){return console.error("Error connecting to printer:",t),this.isPrinterConnected=!1,this.updatePrinterStatus(),!1}})}disconnectPrinter(){return _n(this,null,function*(){try{yield this.printerService.disconnect(),this.isPrinterConnected=!1,this.updatePrinterStatus(),this.showSuccess("\u062A\u0645 \u0642\u0637\u0639 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629")}catch(t){console.error("Error disconnecting printer:",t)}})}checkPrinterConnection(){this.isPrinterConnected=this.printerService.checkConnectionStatus(),this.updatePrinterStatus()}updatePrinterStatus(){if(this.isPrinterConnected){let t=this.printerService.getPrinterStatus();this.printerStatus=`\u0645\u062A\u0635\u0644 - ${t.timestamp}`}else this.printerStatus="\u063A\u064A\u0631 \u0645\u062A\u0635\u0644"}printTestPage(){return _n(this,null,function*(){if(!(!this.isPrinterConnected&&!(yield this.connectToPrinter())))try{this.showLoading("\u062C\u0627\u0631\u064A \u0637\u0628\u0627\u0639\u0629 \u0635\u0641\u062D\u0629 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631..."),(yield this.printerService.printAdvancedTestPage())&&(this.isPrinterConnected=!0,this.updatePrinterStatus(),this.showSuccess("\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 \u0635\u0641\u062D\u0629 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631 \u0628\u0646\u062C\u0627\u062D"))}catch(t){console.error("Error printing test page:",t),this.showError("\u0641\u0634\u0644 \u0637\u0628\u0627\u0639\u0629 \u0635\u0641\u062D\u0629 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631")}})}printWelcomeMessage(){return _n(this,null,function*(){if(!(!this.isPrinterConnected&&!(yield this.connectToPrinter())))try{this.showLoading("\u062C\u0627\u0631\u064A \u0637\u0628\u0627\u0639\u0629 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062A\u0631\u062D\u064A\u0628..."),(yield this.printerService.printWelcomeMessage())&&this.showSuccess("\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062A\u0631\u062D\u064A\u0628 \u0628\u0646\u062C\u0627\u062D")}catch(t){console.error("Error printing welcome message:",t),this.showError("\u0641\u0634\u0644 \u0637\u0628\u0627\u0639\u0629 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062A\u0631\u062D\u064A\u0628")}})}printMonthlyReport(){return _n(this,null,function*(){if(!this.isPrinterConnected&&!(yield this.connectToPrinter()))return;let t=this.paginatedPayments[0];if(!t){this.showWarning("\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0644\u0639\u0631\u0636 \u0627\u0644\u062A\u0642\u0631\u064A\u0631");return}let e=t.student;if(!e){this.showError("\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u0643\u0627\u0641\u064A\u0629 \u0644\u0644\u0637\u0627\u0644\u0628");return}let i={attendanceRate:85,present:17,absent:3,late:2},r={totalPaid:this.stats.paidAmount,pending:this.stats.pendingAmount};try{this.showLoading("\u062C\u0627\u0631\u064A \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0634\u0647\u0631\u064A..."),(yield this.printerService.printStudentMonthlyReport(e,i,r))&&this.showSuccess("\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0634\u0647\u0631\u064A \u0628\u0646\u062C\u0627\u062D")}catch(o){console.error("Error printing monthly report:",o),this.showError("\u0641\u0634\u0644 \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0634\u0647\u0631\u064A")}})}exportToExcel(){this.isExporting=!0;let t=["\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629","\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628","\u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628","\u0627\u0644\u062D\u0635\u0629","\u0627\u0644\u0645\u0628\u0644\u063A","\u0627\u0644\u0634\u0647\u0631","\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639","\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639","\u0627\u0644\u062D\u0627\u0644\u0629","\u0645\u0644\u0627\u062D\u0638\u0627\u062A"],e=this.filteredPayments.map(u=>[u.invoiceNumber||"N/A",u.student?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641",u.student?.studentId||"N/A",u.class?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641",u.amount,u.month,u.paymentDate?new Date(u.paymentDate).toLocaleDateString("ar-EG"):"\u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639",this.getPaymentMethodText(u.paymentMethod),this.getStatusText(u.status),u.notes||""]),i=[t.join(","),...e.map(u=>u.map(d=>`"${d}"`).join(","))].join(`
`),r=new Blob(["\uFEFF"+i],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),s=URL.createObjectURL(r);o.setAttribute("href",s),o.setAttribute("download",`\u0645\u062F\u0641\u0648\u0639\u0627\u062A_${new Date().toISOString().split("T")[0]}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),this.isExporting=!1,this.showSuccess("\u062A\u0645 \u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0628\u0646\u062C\u0627\u062D")}getStatusText(t){return{paid:"\u0645\u062F\u0641\u0648\u0639",pending:"\u0645\u0639\u0644\u0642",late:"\u0645\u062A\u0623\u062E\u0631"}[t]||t}getPaymentMethodText(t){return{cash:"\u0646\u0642\u062F\u064A",bank:"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A",online:"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",mobile:"\u062F\u0641\u0639 \u0645\u062D\u0645\u0648\u0644",check:"\u0634\u064A\u0643"}[t]||t}getStatusClass(t){switch(t){case"paid":return"status-paid";case"pending":return"status-pending";case"late":return"status-late";default:return""}}getStudentClasses(t){return this.classes.filter(e=>e.students?.some(i=>i._id===t))}markFormGroupTouched(t){Object.values(t.controls).forEach(e=>{e.markAsTouched(),e instanceof Aa&&this.markFormGroupTouched(e)})}showSuccess(t){Sr.default.fire({icon:"success",title:"\u0646\u062C\u0627\u062D",text:t,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B",timer:3e3})}showError(t){Sr.default.fire({icon:"error",title:"\u062E\u0637\u0623",text:t,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B"})}showWarning(t){Sr.default.fire({icon:"warning",title:"\u062A\u062D\u0630\u064A\u0631",text:t,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B"})}showToast(t){Sr.default.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:i=>{i.onmouseenter=Sr.default.stopTimer,i.onmouseleave=Sr.default.resumeTimer}}).fire({icon:"success",title:t})}showLoading(t){Sr.default.fire({title:t,allowOutsideClick:!1,didOpen:()=>{Sr.default.showLoading()}})}get printerStatusText(){return this.isPrinterConnected?"\u0645\u062A\u0635\u0644":"\u063A\u064A\u0631 \u0645\u062A\u0635\u0644"}static \u0275fac=function(e){return new(e||n)(Te(Ia),Te(oo),Te(gs),Te(Ka),Te(Cn),Te(ld),Te(_g))};static \u0275cmp=vn({type:n,selectors:[["app-payments-management"]],decls:208,vars:61,consts:[[1,"payments-management"],["class","loading-overlay",4,"ngIf"],[1,"header-section"],[1,"header-content"],[1,"fas","fa-money-bill-wave"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"btn","btn-success",3,"click","disabled"],["class","fas fa-file-excel",4,"ngIf"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"printer-status"],[1,"status-indicator"],[1,"status-dot"],[1,"printer-actions"],["class","btn btn-sm btn-outline",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline",3,"click","disabled"],[1,"fas","fa-print"],[1,"statistics-section"],[1,"stat-card","total-payments"],[1,"stat-icon"],[1,"fas","fa-receipt"],[1,"stat-content"],[1,"stat-number"],[1,"stat-card","total-amount"],[1,"fas","fa-money-bill"],[1,"stat-card","paid-amount"],[1,"fas","fa-check-circle"],[1,"stat-card","pending-payments"],[1,"fas","fa-clock"],[1,"stat-subtext"],[1,"stat-card","late-payments"],[1,"fas","fa-exclamation-circle"],[1,"filters-section","card"],[1,"filters-header"],[1,"fas","fa-filter"],[1,"btn","btn-outline","btn-sm",3,"click"],[1,"fas","fa-times"],[1,"filters-grid"],[1,"filter-group"],["for","filterStudent"],[1,"fas","fa-user-graduate"],["id","filterStudent",1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","filterClass"],[1,"fas","fa-chalkboard-teacher"],["id","filterClass",1,"form-control",3,"ngModelChange","change","ngModel"],["for","filterMonth"],[1,"fas","fa-calendar-alt"],["id","filterMonth",1,"form-control",3,"ngModelChange","change","ngModel"],["for","filterStatus"],[1,"fas","fa-info-circle"],["id","filterStatus",1,"form-control",3,"ngModelChange","change","ngModel"],["value","paid"],["value","pending"],["value","late"],["for","filterPaymentMethod"],[1,"fas","fa-credit-card"],["id","filterPaymentMethod",1,"form-control",3,"ngModelChange","change","ngModel"],["value","cash"],["value","bank"],["value","online"],["value","mobile"],["value","check"],["for","filterStartDate"],[1,"fas","fa-calendar"],["type","date","id","filterStartDate",1,"form-control",3,"ngModelChange","change","ngModel"],["for","filterEndDate"],["type","date","id","filterEndDate",1,"form-control",3,"ngModelChange","change","ngModel"],["class","bulk-actions",4,"ngIf"],[1,"view-options","card"],[1,"view-mode"],[1,"btn","btn-sm",3,"click"],[1,"fas","fa-table"],[1,"fas","fa-th-large"],[1,"sort-options"],[1,"form-control-sm",3,"ngModelChange","change","ngModel"],["value","paymentDate"],["value","student.name"],["value","class.name"],["value","amount"],["value","month"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"fas"],[1,"pagination-controls"],["value","10"],["value","20"],["value","50"],["value","100"],["class","table-responsive card",4,"ngIf"],["class","cards-grid",4,"ngIf"],["class","no-results card",4,"ngIf"],[1,"pagination-section"],[1,"pagination-info"],[1,"fas","fa-angle-double-right"],[1,"fas","fa-angle-right"],[1,"page-numbers"],[4,"ngFor","ngForOf"],[1,"fas","fa-angle-left"],[1,"fas","fa-angle-double-left"],["class","modal-overlay",4,"ngIf"],[1,"loading-overlay"],[1,"loading-content"],[1,"spinner"],[1,"fas","fa-file-excel"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-plug"],[3,"value"],[1,"bulk-actions"],[1,"bulk-info"],[1,"bulk-buttons"],[1,"btn","btn-success","btn-sm",3,"click","disabled"],["class","fas fa-check",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-check"],[1,"table-responsive","card"],[1,"payments-table"],[1,"select-column"],["type","checkbox",3,"change","checked"],[1,"sortable",3,"click"],[3,"selected",4,"ngFor","ngForOf"],[1,"student-info"],[1,"student-name"],[1,"student-id"],[1,"class-teacher"],[1,"amount-cell"],[1,"amount"],[1,"payment-method"],[1,"status-badge"],[1,"invoice-cell"],[1,"invoice-number"],["title","\u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0625\u064A\u0635\u0627\u0644",1,"btn-icon","btn-sm",3,"click","disabled"],[1,"notes-cell"],[1,"actions-cell"],[1,"action-buttons"],["class","btn-icon btn-success","title","\u062A\u0633\u062F\u064A\u062F \u0627\u0644\u062F\u0641\u0639\u0629",3,"click",4,"ngIf"],["title","\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0628\u0644\u063A",1,"btn-icon","btn-info",3,"click"],[1,"fas","fa-edit"],["class","btn-icon btn-warning","title","\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062F\u0641\u0639",3,"click",4,"ngIf"],["title","\u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629",1,"btn-icon","btn-danger",3,"click"],[1,"fas","fa-trash"],["title","\u062A\u0633\u062F\u064A\u062F \u0627\u0644\u062F\u0641\u0639\u0629",1,"btn-icon","btn-success",3,"click"],["title","\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062F\u0641\u0639",1,"btn-icon","btn-warning",3,"click"],[1,"fas","fa-undo"],[1,"cards-grid"],["class","payment-card",3,"selected",4,"ngFor","ngForOf"],[1,"payment-card"],[1,"card-header"],[1,"card-checkbox"],[1,"card-title"],[1,"card-body"],[1,"card-row"],[1,"label"],[1,"value"],[1,"amount-value"],["class","card-row",4,"ngIf"],[1,"card-footer"],[1,"card-actions"],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-info",3,"click"],["class","btn btn-sm btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"btn","btn-sm","btn-primary",3,"click","disabled"],[1,"value","notes"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"no-results","card"],[1,"no-results-content"],[1,"fas","fa-search"],["class","page-number",3,"active","click",4,"ngIf"],["class","page-ellipsis",4,"ngIf"],[1,"page-number",3,"click"],[1,"page-ellipsis"],[1,"modal-overlay"],[1,"modal-container"],[1,"modal-header"],[1,"btn-icon",3,"click"],[3,"ngSubmit","formGroup"],[1,"modal-body"],[1,"form-group"],["for","studentId"],["id","studentId","formControlName","studentId",1,"form-control"],["class","error-message",4,"ngIf"],["for","classId"],["id","classId","formControlName","classId",1,"form-control"],[1,"form-row"],["for","amount"],["type","number","id","amount","formControlName","amount","min","1","step","100",1,"form-control"],["for","month"],["id","month","formControlName","month",1,"form-control"],["for","paymentMethod"],["id","paymentMethod","formControlName","paymentMethod",1,"form-control"],["for","paymentDate"],["type","date","id","paymentDate","formControlName","paymentDate",1,"form-control"],["for","notes"],[1,"fas","fa-sticky-note"],["id","notes","formControlName","notes","rows","3","placeholder","\u0623\u064A \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629 \u062D\u0648\u0644 \u0627\u0644\u062F\u0641\u0639\u0629...",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","fas fa-save",4,"ngIf"],[1,"error-message"],[1,"fas","fa-save"],[1,"payment-info"],[1,"info-row"],[1,"edit-actions"]],template:function(e,i){e&1&&(a(0,"div",0),te(1,pj,5,0,"div",1),a(2,"div",2)(3,"div",3)(4,"h1"),D(5,"i",4),c(6," \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A "),l(),a(7,"div",5)(8,"button",6),R("click",function(){return i.openNewPaymentModal()}),D(9,"i",7),c(10," \u062A\u0633\u062C\u064A\u0644 \u062F\u0641\u0639\u0629 \u062C\u062F\u064A\u062F\u0629 "),l(),a(11,"button",8),R("click",function(){return i.exportToExcel()}),te(12,mj,1,0,"i",9)(13,gj,1,0,"i",10),c(14),l()()(),a(15,"div",11)(16,"div",12),D(17,"div",13),a(18,"span"),c(19),l()(),a(20,"div",14),te(21,_j,3,0,"button",15)(22,vj,3,0,"button",15),a(23,"button",16),R("click",function(){return i.printTestPage()}),D(24,"i",17),c(25," \u0627\u062E\u062A\u0628\u0627\u0631 \u0627\u0644\u0637\u0628\u0627\u0639\u0629 "),l()()()(),a(26,"div",18)(27,"div",19)(28,"div",20),D(29,"i",21),l(),a(30,"div",22)(31,"h3"),c(32,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A"),l(),a(33,"p",23),c(34),l()()(),a(35,"div",24)(36,"div",20),D(37,"i",25),l(),a(38,"div",22)(39,"h3"),c(40,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0628\u0627\u0644\u063A"),l(),a(41,"p",23),c(42),Ln(43,"number"),l()()(),a(44,"div",26)(45,"div",20),D(46,"i",27),l(),a(47,"div",22)(48,"h3"),c(49,"\u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0627\u0644\u0645\u0624\u0643\u062F\u0629"),l(),a(50,"p",23),c(51),Ln(52,"number"),l()()(),a(53,"div",28)(54,"div",20),D(55,"i",29),l(),a(56,"div",22)(57,"h3"),c(58,"\u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0627\u0644\u0645\u0639\u0644\u0642\u0629"),l(),a(59,"p",23),c(60),l(),a(61,"p",30),c(62),Ln(63,"number"),l()()(),a(64,"div",31)(65,"div",20),D(66,"i",32),l(),a(67,"div",22)(68,"h3"),c(69,"\u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0627\u0644\u0645\u062A\u0623\u062E\u0631\u0629"),l(),a(70,"p",23),c(71),l()()()(),a(72,"div",33)(73,"div",34)(74,"h3"),D(75,"i",35),c(76," \u0641\u0644\u062A\u0631\u0629 \u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A"),l(),a(77,"button",36),R("click",function(){return i.clearFilters()}),D(78,"i",37),c(79," \u0645\u0633\u062D \u0627\u0644\u0641\u0644\u0627\u062A\u0631 "),l()(),a(80,"div",38)(81,"div",39)(82,"label",40),D(83,"i",41),c(84," \u0627\u0644\u0637\u0627\u0644\u0628 "),l(),a(85,"select",42),ye("ngModelChange",function(o){return be(i.filters.student,o)||(i.filters.student=o),o}),R("change",function(){return i.applyFilters()}),a(86,"option",43),c(87,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0637\u0644\u0627\u0628"),l(),te(88,xj,2,3,"option",44),l()(),a(89,"div",39)(90,"label",45),D(91,"i",46),c(92," \u0627\u0644\u062D\u0635\u0629 "),l(),a(93,"select",47),ye("ngModelChange",function(o){return be(i.filters.class,o)||(i.filters.class=o),o}),R("change",function(){return i.applyFilters()}),a(94,"option",43),c(95,"\u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0635\u0635"),l(),te(96,yj,2,2,"option",44),l()(),a(97,"div",39)(98,"label",48),D(99,"i",49),c(100," \u0627\u0644\u0634\u0647\u0631 "),l(),a(101,"select",50),ye("ngModelChange",function(o){return be(i.filters.month,o)||(i.filters.month=o),o}),R("change",function(){return i.applyFilters()}),a(102,"option",43),c(103,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0623\u0634\u0647\u0631"),l(),te(104,bj,2,2,"option",44),l()(),a(105,"div",39)(106,"label",51),D(107,"i",52),c(108," \u0627\u0644\u062D\u0627\u0644\u0629 "),l(),a(109,"select",53),ye("ngModelChange",function(o){return be(i.filters.status,o)||(i.filters.status=o),o}),R("change",function(){return i.applyFilters()}),a(110,"option",43),c(111,"\u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0627\u0644\u0627\u062A"),l(),a(112,"option",54),c(113,"\u0645\u062F\u0641\u0648\u0639"),l(),a(114,"option",55),c(115,"\u0645\u0639\u0644\u0642"),l(),a(116,"option",56),c(117,"\u0645\u062A\u0623\u062E\u0631"),l()()(),a(118,"div",39)(119,"label",57),D(120,"i",58),c(121," \u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639 "),l(),a(122,"select",59),ye("ngModelChange",function(o){return be(i.filters.paymentMethod,o)||(i.filters.paymentMethod=o),o}),R("change",function(){return i.applyFilters()}),a(123,"option",43),c(124,"\u062C\u0645\u064A\u0639 \u0637\u0631\u0642 \u0627\u0644\u062F\u0641\u0639"),l(),a(125,"option",60),c(126,"\u0646\u0642\u062F\u064A"),l(),a(127,"option",61),c(128,"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A"),l(),a(129,"option",62),c(130,"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),l(),a(131,"option",63),c(132,"\u062F\u0641\u0639 \u0645\u062D\u0645\u0648\u0644"),l(),a(133,"option",64),c(134,"\u0634\u064A\u0643"),l()()(),a(135,"div",39)(136,"label",65),D(137,"i",66),c(138," \u0645\u0646 \u062A\u0627\u0631\u064A\u062E "),l(),a(139,"input",67),ye("ngModelChange",function(o){return be(i.filters.startDate,o)||(i.filters.startDate=o),o}),R("change",function(){return i.applyFilters()}),l()(),a(140,"div",39)(141,"label",68),D(142,"i",66),c(143," \u0625\u0644\u0649 \u062A\u0627\u0631\u064A\u062E "),l(),a(144,"input",69),ye("ngModelChange",function(o){return be(i.filters.endDate,o)||(i.filters.endDate=o),o}),R("change",function(){return i.applyFilters()}),l()()(),te(145,Mj,15,5,"div",70),l(),a(146,"div",71)(147,"div",72)(148,"button",73),R("click",function(){return i.viewMode="table"}),D(149,"i",74),c(150," \u062C\u062F\u0648\u0644 "),l(),a(151,"button",73),R("click",function(){return i.viewMode="cards"}),D(152,"i",75),c(153," \u0628\u0637\u0627\u0642\u0627\u062A "),l()(),a(154,"div",76)(155,"span"),c(156,"\u062A\u0631\u062A\u064A\u0628 \u062D\u0633\u0628:"),l(),a(157,"select",77),ye("ngModelChange",function(o){return be(i.sortField,o)||(i.sortField=o),o}),R("change",function(){return i.applyFilters()}),a(158,"option",78),c(159,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639"),l(),a(160,"option",79),c(161,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628"),l(),a(162,"option",80),c(163,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629"),l(),a(164,"option",81),c(165,"\u0627\u0644\u0645\u0628\u0644\u063A"),l(),a(166,"option",82),c(167,"\u0627\u0644\u0634\u0647\u0631"),l()(),a(168,"button",83),R("click",function(){return i.sortDirection=i.sortDirection==="asc"?"desc":"asc",i.applyFilters()}),D(169,"i",84),c(170),l()(),a(171,"div",85)(172,"span"),c(173,"\u0639\u0631\u0636"),l(),a(174,"select",77),ye("ngModelChange",function(o){return be(i.itemsPerPage,o)||(i.itemsPerPage=o),o}),R("change",function(){return i.applyFilters()}),a(175,"option",86),c(176,"10"),l(),a(177,"option",87),c(178,"20"),l(),a(179,"option",88),c(180,"50"),l(),a(181,"option",89),c(182,"100"),l()(),a(183,"span"),c(184),l()()(),te(185,Tj,32,18,"div",90)(186,kj,2,1,"div",91)(187,Fj,10,0,"div",92),a(188,"div",93)(189,"div",94),c(190),l(),a(191,"div",85)(192,"button",16),R("click",function(){return i.currentPage=1}),D(193,"i",95),c(194," \u0627\u0644\u0623\u0648\u0644 "),l(),a(195,"button",16),R("click",function(){return i.currentPage=i.currentPage-1}),D(196,"i",96),c(197," \u0627\u0644\u0633\u0627\u0628\u0642 "),l(),a(198,"div",97),te(199,Vj,3,2,"ng-container",98),l(),a(200,"button",16),R("click",function(){return i.currentPage=i.currentPage+1}),c(201," \u0627\u0644\u062A\u0627\u0644\u064A "),D(202,"i",99),l(),a(203,"button",16),R("click",function(){return i.currentPage=i.totalPages}),c(204," \u0627\u0644\u0623\u062E\u064A\u0631 "),D(205,"i",100),l()()(),te(206,qj,77,22,"div",101)(207,Xj,37,6,"div",101),l()),e&2&&(h(),P("ngIf",i.isLoading),h(10),P("disabled",i.isExporting||i.filteredPayments.length===0),h(),P("ngIf",!i.isExporting),h(),P("ngIf",i.isExporting),h(),Z(" ",i.isExporting?"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u0635\u062F\u064A\u0631...":"\u062A\u0635\u062F\u064A\u0631 Excel"," "),h(),Ue("connected",i.isPrinterConnected)("disconnected",!i.isPrinterConnected),h(4),$(i.printerStatusText),h(2),P("ngIf",!i.isPrinterConnected),h(),P("ngIf",i.isPrinterConnected),h(),P("disabled",!i.isPrinterConnected),h(11),$(i.stats.totalPayments),h(8),Z("",eo(43,55,i.stats.totalAmount)," \u062F.\u062C"),h(9),Z("",eo(52,57,i.stats.paidAmount)," \u062F.\u062C"),h(9),$(i.stats.pendingPayments),h(2),Z("",eo(63,59,i.stats.pendingAmount)," \u062F.\u062C"),h(9),$(i.stats.latePayments),h(14),xe("ngModel",i.filters.student),h(3),P("ngForOf",i.students),h(5),xe("ngModel",i.filters.class),h(3),P("ngForOf",i.classes),h(5),xe("ngModel",i.filters.month),h(3),P("ngForOf",i.availableMonths),h(5),xe("ngModel",i.filters.status),h(13),xe("ngModel",i.filters.paymentMethod),h(17),xe("ngModel",i.filters.startDate),h(5),xe("ngModel",i.filters.endDate),h(),P("ngIf",i.selectedPayments.size>0),h(3),Ue("active",i.viewMode==="table"),h(3),Ue("active",i.viewMode==="cards"),h(6),xe("ngModel",i.sortField),h(12),Ue("fa-sort-up",i.sortDirection==="asc")("fa-sort-down",i.sortDirection==="desc"),h(),Z(" ",i.sortDirection==="asc"?"\u062A\u0635\u0627\u0639\u062F\u064A":"\u062A\u0646\u0627\u0632\u0644\u064A"," "),h(4),xe("ngModel",i.itemsPerPage),h(10),Z("\u0645\u0646 ",i.filteredPayments.length," \u062F\u0641\u0639\u0629"),h(),P("ngIf",i.viewMode==="table"&&i.filteredPayments.length>0),h(),P("ngIf",i.viewMode==="cards"&&i.filteredPayments.length>0),h(),P("ngIf",i.filteredPayments.length===0&&!i.isLoading),h(3),Mo(" \u0639\u0631\u0636 ",i.getPaginatedInfo().start," \u0625\u0644\u0649 ",i.getPaginatedInfo().end," \u0645\u0646 ",i.filteredPayments.length," "),h(2),P("disabled",i.currentPage===1),h(3),P("disabled",i.currentPage===1),h(4),P("ngForOf",i.getPageNumbers()),h(),P("disabled",i.currentPage===i.totalPages),h(3),P("disabled",i.currentPage===i.totalPages),h(3),P("ngIf",i.isNewPaymentModalOpen),h(),P("ngIf",i.isEditPaymentModalOpen))},dependencies:[bn,ii,Wn,x0,Ao,oi,xr,Ii,Oi,Yn,Nr,xi,ri,vr,Ro,Kn,vg,nf,rf],styles:['.payments-management[_ngcontent-%COMP%]{direction:rtl;font-family:Cairo,Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:#f8f9fa;min-height:100vh;padding:20px}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#fffffff2;display:flex;justify-content:center;align-items:center;z-index:9999}.loading-content[_ngcontent-%COMP%]{text-align:center;background:#fff;padding:3rem;border-radius:15px;box-shadow:0 10px 40px #0000001a;border:1px solid #eaeaea}.spinner[_ngcontent-%COMP%]{width:60px;height:60px;border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1.5rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.header-section[_ngcontent-%COMP%]{background:#fff;color:#2c3e50;padding:2rem;border-radius:12px;margin-bottom:2rem;box-shadow:0 4px 12px #00000014;border:1px solid #eaeaea}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;display:flex;align-items:center;gap:1rem;color:#2c3e50}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3498db}.header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.printer-status[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px;padding:1rem;margin-top:1rem;display:flex;justify-content:space-between;align-items:center;border:1px solid #eaeaea}.printer-status.connected[_ngcontent-%COMP%]{background:#2ecc711a;border-color:#2ecc714d}.printer-status.disconnected[_ngcontent-%COMP%]{background:#e74c3c1a;border-color:#e74c3c4d}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-weight:500}.status-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;background:#2ecc71;animation:_ngcontent-%COMP%_pulse 2s infinite}.printer-status.disconnected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#e74c3c;animation:none}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.printer-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.statistics-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem;margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;display:flex;align-items:center;gap:1.5rem;box-shadow:0 4px 12px #0000000d;transition:all .3s ease;border:1px solid #eaeaea;position:relative;overflow:hidden}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #0000001a}.stat-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;right:0;width:4px;height:100%}.stat-card.total-payments[_ngcontent-%COMP%]:before{background:#3498db}.stat-card.total-amount[_ngcontent-%COMP%]:before{background:#2ecc71}.stat-card.paid-amount[_ngcontent-%COMP%]:before{background:#9b59b6}.stat-card.pending-payments[_ngcontent-%COMP%]:before{background:#f39c12}.stat-card.late-payments[_ngcontent-%COMP%]:before{background:#e74c3c}.stat-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:#f8f9fa;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.8rem;color:#fff}.stat-card.total-payments[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#3498db}.stat-card.total-amount[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#2ecc71}.stat-card.paid-amount[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#9b59b6}.stat-card.pending-payments[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#f39c12}.stat-card.late-payments[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#e74c3c}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.9rem;color:#7f8c8d;font-weight:500}.stat-number[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:700;color:#2c3e50}.stat-subtext[_ngcontent-%COMP%]{margin:.25rem 0 0;font-size:.85rem;color:#95a5a6}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 4px 12px #0000000d;margin-bottom:1.5rem;border:1px solid #eaeaea}.filters-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid #eee}.filters-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;color:#2c3e50;display:flex;align-items:center;gap:.5rem}.filters-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3498db}.filters-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#555;display:flex;align-items:center;gap:.5rem;font-size:.9rem}.form-control[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #ddd;border-radius:8px;font-size:1rem;transition:all .3s ease;background:#fff;color:#333}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.form-control-sm[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.9rem}.bulk-actions[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px;padding:1rem;margin-top:1rem;display:flex;justify-content:space-between;align-items:center;border:1px solid #eaeaea}.bulk-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:500;color:#2c3e50}.bulk-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.view-options[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem 1.5rem;box-shadow:0 4px 12px #0000000d;margin-bottom:1.5rem;border:1px solid #eaeaea;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.view-mode[_ngcontent-%COMP%]{display:flex;gap:.5rem;background:#f8f9fa;padding:.25rem;border-radius:8px}.view-mode[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1rem;background:transparent;border:none;color:#7f8c8d;border-radius:6px}.view-mode[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{background:#fff;color:#3498db;box-shadow:0 2px 4px #0000001a}.sort-options[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;color:#666}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#666}.table-responsive[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px #0000000d;margin-bottom:1.5rem;border:1px solid #eaeaea}.payments-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff}.payments-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;padding:1rem;text-align:right;font-weight:600;color:#495057;border-bottom:2px solid #eaeaea;cursor:pointer;-webkit-user-select:none;user-select:none;font-size:.9rem}.payments-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#f1f3f4}.payments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #f1f3f4;vertical-align:middle;font-size:.95rem}.payments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease;background:#fff}.payments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.payments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#e8f4fd;border-left:3px solid #3498db}.select-column[_ngcontent-%COMP%]{width:40px;text-align:center}.select-column[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:#3498db}.student-info[_ngcontent-%COMP%]{min-width:150px}.student-name[_ngcontent-%COMP%]{font-weight:500;color:#2c3e50}.student-id[_ngcontent-%COMP%], .class-teacher[_ngcontent-%COMP%]{font-size:.85rem;color:#7f8c8d;margin-top:.25rem}.amount-cell[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50}.amount[_ngcontent-%COMP%]{color:#2c3e50;font-weight:600}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.35rem .75rem;border-radius:20px;font-size:.85rem;font-weight:500;min-width:70px;text-align:center}.status-paid[_ngcontent-%COMP%]{background:#2ecc711a;color:#27ae60;border:1px solid rgba(46,204,113,.2)}.status-pending[_ngcontent-%COMP%]{background:#f39c121a;color:#d35400;border:1px solid rgba(243,156,18,.2)}.status-late[_ngcontent-%COMP%]{background:#e74c3c1a;color:#c0392b;border:1px solid rgba(231,76,60,.2)}.payment-method[_ngcontent-%COMP%]{display:inline-block;padding:.35rem .75rem;border-radius:20px;font-size:.85rem;font-weight:500;background:#f8f9fa;color:#495057;border:1px solid #eaeaea}.payment-method.cash[_ngcontent-%COMP%]{background:#2ecc711a;color:#27ae60;border-color:#2ecc7133}.payment-method.bank[_ngcontent-%COMP%]{background:#3498db1a;color:#2980b9;border-color:#3498db33}.payment-method.online[_ngcontent-%COMP%]{background:#9b59b61a;color:#8e44ad;border-color:#9b59b633}.payment-method.mobile[_ngcontent-%COMP%]{background:#f1c40f1a;color:#f39c12;border-color:#f1c40f33}.payment-method.check[_ngcontent-%COMP%]{background:#e67e221a;color:#d35400;border-color:#e67e2233}.invoice-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.invoice-number[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:.9rem;color:#666;background:#f8f9fa;padding:.25rem .5rem;border-radius:4px;border:1px solid #eee}.notes-cell[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#666}.actions-cell[_ngcontent-%COMP%]{min-width:180px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;border:none;cursor:pointer;transition:all .3s ease;font-size:1rem;background:#f8f9fa;color:#666}.btn-icon[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.btn-icon.btn-success[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.btn-icon.btn-info[_ngcontent-%COMP%]{background:#3498db;color:#fff}.btn-icon.btn-warning[_ngcontent-%COMP%]{background:#f39c12;color:#fff}.btn-icon.btn-danger[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.btn-icon.btn-sm[_ngcontent-%COMP%]{width:32px;height:32px;font-size:.9rem}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem;margin-bottom:2rem}.payment-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px #0000000d;transition:all .3s ease;border:1px solid #eaeaea}.payment-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #0000001a}.payment-card.selected[_ngcontent-%COMP%]{border-color:#3498db;background:#f8fbff;box-shadow:0 4px 12px #3498db33}.card-header[_ngcontent-%COMP%]{background:#f8f9fa;padding:1.25rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eaeaea}.card-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center}.card-title[_ngcontent-%COMP%]{flex:1;margin:0 1rem}.card-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;color:#2c3e50;font-size:1.1rem}.card-title[_ngcontent-%COMP%]   .student-id[_ngcontent-%COMP%]{font-size:.85rem;color:#7f8c8d}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.card-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem;padding-bottom:.75rem;border-bottom:1px solid #f8f9fa}.card-row[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}.card-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#7f8c8d;font-size:.9rem}.card-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#2c3e50}.card-row[_ngcontent-%COMP%]   .amount-value[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;font-size:1.1rem}.card-row[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]{font-size:.9rem;color:#666;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.card-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;background:#f8f9fa;border-top:1px solid #eaeaea}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.no-results[_ngcontent-%COMP%]{background:#fff;text-align:center;padding:4rem 2rem;border-radius:12px;box-shadow:0 4px 12px #0000000d;border:1px solid #eaeaea}.no-results-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#bdc3c7;margin-bottom:1.5rem}.no-results-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:#7f8c8d;font-weight:500}.no-results-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#95a5a6;margin-bottom:2rem;line-height:1.6}.pagination-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;background:#fff;border-radius:12px;box-shadow:0 4px 12px #0000000d;margin-bottom:2rem;border:1px solid #eaeaea}.pagination-info[_ngcontent-%COMP%]{color:#666;font-size:.95rem}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.page-numbers[_ngcontent-%COMP%]{display:flex;gap:.25rem}.page-number[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:8px;cursor:pointer;transition:all .3s ease;font-weight:500;background:#f8f9fa;color:#666;border:1px solid #eaeaea}.page-number[_ngcontent-%COMP%]:hover{background:#e9ecef;border-color:#dee2e6}.page-number.active[_ngcontent-%COMP%]{background:#3498db;color:#fff;border-color:#3498db}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;backdrop-filter:blur(3px)}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px #00000026;animation:_ngcontent-%COMP%_modalSlideIn .3s ease;border:1px solid #eaeaea}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #eaeaea;display:flex;justify-content:space-between;align-items:center;background:#f8f9fa;border-radius:16px 16px 0 0}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:.5rem;color:#2c3e50}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#555;display:flex;align-items:center;gap:.5rem;font-size:.95rem}.form-group.error[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:#e74c3c}.form-group.error[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #e74c3c1a}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:.85rem;margin-top:.25rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.modal-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid #eaeaea;display:flex;justify-content:flex-end;gap:1rem;background:#f8f9fa;border-radius:0 0 16px 16px}.payment-info[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px;padding:1.5rem;margin-bottom:1.5rem;border:1px solid #eaeaea}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid #eee}.info-row[_ngcontent-%COMP%]:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}.info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-weight:500;font-size:.95rem}.info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2c3e50;font-weight:600}.edit-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1.5rem 0}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:8px;border:none;font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;justify-content:center;gap:.5rem;font-family:inherit}.btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #0000001a}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important;box-shadow:none!important}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2ecc71,#27ae60);color:#fff}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b);color:#fff}.btn-outline[_ngcontent-%COMP%]{background:transparent;border:2px solid #ddd;color:#666}.btn-outline[_ngcontent-%COMP%]:hover{border-color:#3498db;color:#3498db;background:#3498db0d}.btn-sm[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.9rem}.text-right[_ngcontent-%COMP%]{text-align:right}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.mt-1[_ngcontent-%COMP%]{margin-top:.5rem}.mt-2[_ngcontent-%COMP%]{margin-top:1rem}.mt-3[_ngcontent-%COMP%]{margin-top:1.5rem}.mb-1[_ngcontent-%COMP%]{margin-bottom:.5rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:1rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:1.5rem}.ml-auto[_ngcontent-%COMP%]{margin-left:auto}.w-100[_ngcontent-%COMP%]{width:100%}@media (max-width: 768px){.payments-management[_ngcontent-%COMP%]{padding:15px}.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem;text-align:center}.header-actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.statistics-section[_ngcontent-%COMP%], .filters-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.view-options[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.view-mode[_ngcontent-%COMP%], .sort-options[_ngcontent-%COMP%], .pagination-controls[_ngcontent-%COMP%]{justify-content:center}.cards-grid[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.pagination-section[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.payments-table[_ngcontent-%COMP%]{font-size:.9rem}.payments-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .payments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}.action-buttons[_ngcontent-%COMP%]{justify-content:center}.modal-container[_ngcontent-%COMP%]{width:95%;margin:1rem}}@media (prefers-color-scheme: dark){.payments-management[_ngcontent-%COMP%], .card[_ngcontent-%COMP%], .stat-card[_ngcontent-%COMP%], .payment-card[_ngcontent-%COMP%], .modal-container[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%], .view-options[_ngcontent-%COMP%], .pagination-section[_ngcontent-%COMP%], .no-results[_ngcontent-%COMP%]{background:#fff!important;color:#333!important}.form-control[_ngcontent-%COMP%]{background:#fff!important;color:#333!important;border-color:#ddd!important}.payments-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa!important;color:#495057!important}.payments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#fff!important;color:#333!important}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}button[_ngcontent-%COMP%]{font-family:inherit}.fas[_ngcontent-%COMP%]{font-size:1em}@media print{.payments-management[_ngcontent-%COMP%]{background:#fff!important;padding:0!important}.header-actions[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%], .view-options[_ngcontent-%COMP%], .bulk-actions[_ngcontent-%COMP%], .printer-actions[_ngcontent-%COMP%], .actions-cell[_ngcontent-%COMP%], .card-actions[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%], .pagination-section[_ngcontent-%COMP%]{display:none!important}.stat-card[_ngcontent-%COMP%], .payment-card[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]{box-shadow:none!important;border:1px solid #ddd!important}}']})};var ud=class n{constructor(t,e){this.http=t;this.authService=e}apiUrl="/api";getCards(){return this.http.get(`${this.apiUrl}/cards`,{headers:this.authService.getAuthHeaders()})}getCardByUid(t){return this.http.get(`${this.apiUrl}/cards/uid/${t}`,{headers:this.authService.getAuthHeaders()})}createCard(t){return this.http.post(`${this.apiUrl}/cards`,t,{headers:this.authService.getAuthHeaders()})}updateCard(t,e){return this.http.put(`${this.apiUrl}/cards/${t}`,e,{headers:this.authService.getAuthHeaders()})}deleteCard(t){return this.http.delete(`${this.apiUrl}/cards/${t}`,{headers:this.authService.getAuthHeaders()})}assignCardToStudent(t,e){return this.http.put(`${this.apiUrl}/cards/${t}`,{student:e},{headers:this.authService.getAuthHeaders()})}getAuthorizedCards(t,e){let i=`${this.apiUrl}/authorized-cards`,r=[];return t!==void 0&&r.push(`active=${t}`),e!==void 0&&r.push(`expired=${e}`),r.length>0&&(i+=`?${r.join("&")}`),this.http.get(i,{headers:this.authService.getAuthHeaders()})}createAuthorizedCard(t){return this.http.post(`${this.apiUrl}/authorized-cards`,t,{headers:this.authService.getAuthHeaders()})}updateAuthorizedCard(t,e){return this.http.put(`${this.apiUrl}/authorized-cards/${t}`,e,{headers:this.authService.getAuthHeaders()})}deleteAuthorizedCard(t){return this.http.delete(`${this.apiUrl}/authorized-cards/${t}`,{headers:this.authService.getAuthHeaders()})}checkCardAuthorization(t){return this.http.get(`${this.apiUrl}/authorized-cards/check/${t}`,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(e){return new(e||n)(Ve(Un),Ve(Cn))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})};function Zj(n,t){if(n&1){let e=Se();a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l(),a(7,"td",3)(8,"button",30),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.viewCardDetails(r))}),D(9,"i",31),c(10," \u0639\u0631\u0636 "),l(),a(11,"button",32),R("click",function(){let r=k(e).$implicit,o=T(2);return o.selectedCard=r,F(o.showAssignCardModal=!0)}),D(12,"i",33),c(13," \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),l(),a(14,"button",34),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.deleteCard(r._id,"regular"))}),D(15,"i",35),c(16," \u062D\u0630\u0641 "),l()()()}if(n&2){let e=t.$implicit,i=T(2);h(2),$(e.uid),h(2),$(i.getStudentName((e.student==null?null:e.student._id)||e.student)),h(2),$(i.formatDate(e.issueDate))}}function Jj(n,t){n&1&&(a(0,"tr")(1,"td",36),c(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u0637\u0627\u0642\u0627\u062A \u0645\u0633\u062C\u0644\u0629"),l()())}function Kj(n,t){if(n&1&&(a(0,"div",25)(1,"table",26)(2,"thead")(3,"tr")(4,"th"),c(5,"\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629"),l(),a(6,"th"),c(7,"\u0627\u0644\u0637\u0627\u0644\u0628"),l(),a(8,"th"),c(9,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0625\u0635\u062F\u0627\u0631"),l(),a(10,"th"),c(11,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(12,"tbody"),te(13,Zj,17,3,"tr",27)(14,Jj,3,0,"tr",28),l()()()),n&2){let e=T();h(13),P("ngForOf",e.cards),h(),P("ngIf",e.cards.length===0)}}function Qj(n,t){n&1&&(a(0,"div",37),D(1,"div",38),a(2,"p"),c(3,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A..."),l()())}function eW(n,t){if(n&1){let e=Se();a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l(),a(7,"td"),c(8),l(),a(9,"td")(10,"span",39),c(11),l()(),a(12,"td",3)(13,"button",34),R("click",function(){let r=k(e).$implicit,o=T();return F(o.deleteCard(r._id,"authorized"))}),D(14,"i",35),c(15," \u062D\u0630\u0641 "),l()()()}if(n&2){let e=t.$implicit,i=T();h(2),$(e.uid),h(2),$(e.cardName),h(2),$(e.description||"-"),h(2),$(i.formatDate(e.expirationDate)),h(2),Ue("badge-success",e.active&&!i.isCardExpired(e.expirationDate))("badge-danger",!e.active||i.isCardExpired(e.expirationDate)),h(),Z(" ",e.active&&!i.isCardExpired(e.expirationDate)?"\u0646\u0634\u0637\u0629":"\u063A\u064A\u0631 \u0646\u0634\u0637\u0629"," ")}}function tW(n,t){n&1&&(a(0,"tr")(1,"td",40),c(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u0637\u0627\u0642\u0627\u062A \u0645\u0635\u0631\u062D\u0629"),l()())}function nW(n,t){if(n&1&&(a(0,"option",52),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Mo(" ",e.name," (",e.studentId,") - ",e.parentPhone," ")}}function iW(n,t){if(n&1){let e=Se();a(0,"div",41)(1,"div",42)(2,"div",43)(3,"h3"),c(4,"\u062A\u0639\u064A\u064A\u0646 \u0628\u0637\u0627\u0642\u0629 \u0644\u0637\u0627\u0644\u0628"),l(),a(5,"button",44),R("click",function(){k(e);let r=T();return F(r.showAssignCardModal=!1)}),c(6,"\xD7"),l()(),a(7,"div",45)(8,"div",46)(9,"label"),c(10,"\u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0645\u062D\u062F\u062F\u0629:"),l(),D(11,"input",47),l(),a(12,"div",46)(13,"label"),c(14,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0637\u0627\u0644\u0628:"),l(),a(15,"select",48),ye("ngModelChange",function(r){k(e);let o=T();return be(o.selectedStudentId,r)||(o.selectedStudentId=r),F(r)}),a(16,"option",49),c(17,"-- \u0627\u062E\u062A\u0631 \u0637\u0627\u0644\u0628 --"),l(),te(18,nW,2,4,"option",50),l()()(),a(19,"div",51)(20,"button",6),R("click",function(){k(e);let r=T();return F(r.showAssignCardModal=!1)}),c(21,"\u0625\u0644\u063A\u0627\u0621"),l(),a(22,"button",4),R("click",function(){k(e);let r=T();return F(r.assignCardToStudent())}),c(23,"\u062A\u0639\u064A\u064A\u0646"),l()()()()}if(n&2){let e=T();h(11),P("value",e.selectedCard==null?null:e.selectedCard.uid),h(4),xe("ngModel",e.selectedStudentId),h(3),P("ngForOf",e.filteredStudents)}}function rW(n,t){if(n&1){let e=Se();a(0,"div",41)(1,"div",42)(2,"div",43)(3,"h3"),c(4,"\u0625\u0636\u0627\u0641\u0629 \u0628\u0637\u0627\u0642\u0629 \u0645\u0635\u0631\u062D\u0629 \u062C\u062F\u064A\u062F\u0629"),l(),a(5,"button",44),R("click",function(){k(e);let r=T();return F(r.showAddAuthorizedCardModal=!1)}),c(6,"\xD7"),l()(),a(7,"div",45)(8,"div",46)(9,"label"),c(10,"\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 (UID) *"),l(),a(11,"input",53),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newAuthorizedCard.uid,r)||(o.newAuthorizedCard.uid=r),F(r)}),l()(),a(12,"div",46)(13,"label"),c(14,"\u0627\u0633\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 *"),l(),a(15,"input",53),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newAuthorizedCard.cardName,r)||(o.newAuthorizedCard.cardName=r),F(r)}),l()(),a(16,"div",46)(17,"label"),c(18,"\u0627\u0644\u0648\u0635\u0641"),l(),a(19,"textarea",54),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newAuthorizedCard.description,r)||(o.newAuthorizedCard.description=r),F(r)}),l()(),a(20,"div",46)(21,"label"),c(22,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0627\u0646\u062A\u0647\u0627\u0621 *"),l(),a(23,"input",55),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newAuthorizedCard.expirationDate,r)||(o.newAuthorizedCard.expirationDate=r),F(r)}),l()(),a(24,"div",46)(25,"label"),c(26,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),a(27,"textarea",56),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newAuthorizedCard.notes,r)||(o.newAuthorizedCard.notes=r),F(r)}),l()()(),a(28,"div",51)(29,"button",6),R("click",function(){k(e);let r=T();return F(r.showAddAuthorizedCardModal=!1)}),c(30,"\u0625\u0644\u063A\u0627\u0621"),l(),a(31,"button",4),R("click",function(){k(e);let r=T();return F(r.addAuthorizedCard())}),c(32,"\u0625\u0636\u0627\u0641\u0629"),l()()()()}if(n&2){let e=T();h(11),xe("ngModel",e.newAuthorizedCard.uid),h(4),xe("ngModel",e.newAuthorizedCard.cardName),h(4),xe("ngModel",e.newAuthorizedCard.description),h(4),xe("ngModel",e.newAuthorizedCard.expirationDate),h(4),xe("ngModel",e.newAuthorizedCard.notes)}}function oW(n,t){if(n&1&&(a(0,"div")(1,"div",57)(2,"strong"),c(3,"\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629:"),l(),a(4,"span"),c(5),l()(),a(6,"div",57)(7,"strong"),c(8,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628:"),l(),a(9,"span"),c(10),l()(),a(11,"div",57)(12,"strong"),c(13,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0625\u0635\u062F\u0627\u0631:"),l(),a(14,"span"),c(15),l()(),a(16,"div",57)(17,"strong"),c(18,"\u062D\u0627\u0644\u0629 \u0627\u0644\u0628\u0637\u0627\u0642\u0629:"),l(),a(19,"span",58),c(20,"\u0645\u0641\u0639\u0644\u0629"),l()()()),n&2){let e=T(2);h(5),$(e.selectedCard.uid),h(5),$(e.getStudentName((e.selectedCard.student==null?null:e.selectedCard.student._id)||e.selectedCard.student)),h(5),$(e.formatDate(e.selectedCard.issueDate))}}function sW(n,t){if(n&1){let e=Se();a(0,"div",41)(1,"div",42)(2,"div",43)(3,"h3"),c(4,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0628\u0637\u0627\u0642\u0629"),l(),a(5,"button",44),R("click",function(){k(e);let r=T();return F(r.showCardDetailsModal=!1)}),c(6,"\xD7"),l()(),a(7,"div",45),te(8,oW,21,3,"div",28),l(),a(9,"div",51)(10,"button",4),R("click",function(){k(e);let r=T();return F(r.showCardDetailsModal=!1)}),c(11,"\u0625\u063A\u0644\u0627\u0642"),l()()()()}if(n&2){let e=T();h(8),P("ngIf",e.selectedCard)}}var Iv=class n{constructor(t,e,i){this.cardsService=t;this.studentsService=e;this.authService=i}cards=[];authorizedCards=[];loading=!1;showAssignCardModal=!1;showAddAuthorizedCardModal=!1;showCardDetailsModal=!1;selectedCard=null;selectedStudentId="";newCardUid="";searchUid="";newAuthorizedCard={uid:"",cardName:"",description:"",expirationDate:"",notes:""};students=[];filteredStudents=[];searchStudentTerm="";filterActive=!0;filterExpired=!1;ngOnInit(){this.loadCards(),this.loadAuthorizedCards(),this.loadStudents()}ngOnDestroy(){}loadCards(){this.loading=!0,this.cardsService.getCards().subscribe({next:t=>{this.cards=t,this.loading=!1},error:t=>{console.error("Error loading cards:",t),this.loading=!1}})}loadAuthorizedCards(){this.cardsService.getAuthorizedCards(this.filterActive,this.filterExpired).subscribe({next:t=>{this.authorizedCards=t},error:t=>{console.error("Error loading authorized cards:",t)}})}loadStudents(){this.studentsService.getStudents().subscribe({next:t=>{this.students=t,this.filteredStudents=t},error:t=>{console.error("Error loading students:",t)}})}filterStudents(){if(!this.searchStudentTerm.trim()){this.filteredStudents=this.students;return}let t=this.searchStudentTerm.toLowerCase();this.filteredStudents=this.students.filter(e=>e.name.toLowerCase().includes(t)||e.studentId.toLowerCase().includes(t)||e.parentPhone?.toLowerCase().includes(t))}assignCardToStudent(){if(!this.selectedCard||!this.selectedStudentId){alert("\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0628\u0637\u0627\u0642\u0629 \u0648\u0637\u0627\u0644\u0628");return}this.cardsService.assignCardToStudent(this.selectedCard._id,this.selectedStudentId).subscribe({next:t=>{alert("\u062A\u0645 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0644\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D"),this.showAssignCardModal=!1,this.selectedCard=null,this.selectedStudentId="",this.loadCards()},error:t=>{console.error("Error assigning card:",t),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0628\u0637\u0627\u0642\u0629")}})}addAuthorizedCard(){if(!this.newAuthorizedCard.uid||!this.newAuthorizedCard.cardName){alert("\u064A\u0631\u062C\u0649 \u0645\u0644\u0621 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");return}this.cardsService.createAuthorizedCard(this.newAuthorizedCard).subscribe({next:t=>{alert("\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0645\u0635\u0631\u062D\u0629 \u0628\u0646\u062C\u0627\u062D"),this.showAddAuthorizedCardModal=!1,this.resetAuthorizedCardForm(),this.loadAuthorizedCards()},error:t=>{console.error("Error adding authorized card:",t),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0628\u0637\u0627\u0642\u0629")}})}checkCardAuthorization(){if(!this.searchUid.trim()){alert("\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629");return}this.cardsService.checkCardAuthorization(this.searchUid).subscribe({next:t=>{t.authorized?alert("\u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0645\u0635\u0631\u062D\u0629 \u0648\u0635\u0627\u0644\u062D\u0629"):alert("\u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u063A\u064A\u0631 \u0645\u0635\u0631\u062D\u0629 \u0623\u0648 \u0645\u0646\u062A\u0647\u064A\u0629 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0629")},error:t=>{alert("\u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u063A\u064A\u0631 \u0645\u0635\u0631\u062D\u0629")}})}deleteCard(t,e){confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u0628\u0637\u0627\u0642\u0629\u061F")&&(e==="regular"?this.cardsService.deleteCard(t).subscribe({next:()=>{alert("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadCards()},error:i=>{console.error("Error deleting card:",i),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062D\u0630\u0641 \u0627\u0644\u0628\u0637\u0627\u0642\u0629")}}):this.cardsService.deleteAuthorizedCard(t).subscribe({next:()=>{alert("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0645\u0635\u0631\u062D\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadAuthorizedCards()},error:i=>{console.error("Error deleting authorized card:",i),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062D\u0630\u0641 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0645\u0635\u0631\u062D\u0629")}}))}viewCardDetails(t){this.selectedCard=t,this.showCardDetailsModal=!0}resetAuthorizedCardForm(){this.newAuthorizedCard={uid:"",cardName:"",description:"",expirationDate:"",notes:""}}applyFilters(){this.loadAuthorizedCards()}formatDate(t){return new Date(t).toLocaleDateString("ar-EG")}isCardExpired(t){return new Date(t)<new Date}getStudentName(t){let e=this.students.find(i=>i._id===t);return e?e.name:"\u063A\u064A\u0631 \u0645\u0639\u064A\u0646"}static \u0275fac=function(e){return new(e||n)(Te(ud),Te(oo),Te(Cn))};static \u0275cmp=vn({type:n,selectors:[["app-cards-management"]],decls:66,vars:11,consts:[["loadingTemplate",""],[1,"cards-management-container"],[1,"header"],[1,"actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-sync-alt"],[1,"search-section","card"],[1,"search-input"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0628\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0644\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0627\u0644\u062A\u0635\u0631\u064A\u062D",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-info",3,"click"],[1,"fas","fa-search"],[1,"tabs"],[1,"tab","active"],[1,"tab",3,"click"],[1,"table-container","card"],[1,"table-header"],[1,"table-actions"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0637\u0627\u0644\u0628...",1,"form-control","search-input",3,"ngModelChange","input","ngModel"],["class","table-responsive",4,"ngIf","ngIfElse"],[1,"table-container","card","mt-4"],[1,"filters"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","give-cards-to-student modal",4,"ngIf"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"fas","fa-eye"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"fas","fa-exchange-alt"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],["colspan","4",1,"text-center"],[1,"loading"],[1,"spinner"],[1,"badge"],["colspan","6",1,"text-center"],[1,"give-cards-to-student","modal"],[1,"modal-content"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["type","text","disabled","",1,"form-control",3,"value"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],[3,"value"],["type","text","required","",1,"form-control",3,"ngModelChange","ngModel"],["rows","2",1,"form-control",3,"ngModelChange","ngModel"],["type","date","required","",1,"form-control",3,"ngModelChange","ngModel"],["rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"detail-item"],[1,"badge","badge-success"]],template:function(e,i){if(e&1){let r=Se();a(0,"div",1)(1,"div",2)(2,"h2"),c(3,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062A"),l(),a(4,"div",3)(5,"button",4),R("click",function(){return k(r),F(i.showAddAuthorizedCardModal=!0)}),D(6,"i",5),c(7," \u0625\u0636\u0627\u0641\u0629 \u0628\u0637\u0627\u0642\u0629 \u0645\u0635\u0631\u062D\u0629 "),l(),a(8,"button",6),R("click",function(){return k(r),F(i.loadCards())}),D(9,"i",7),c(10," \u062A\u062D\u062F\u064A\u062B "),l()()(),a(11,"div",8)(12,"div",9)(13,"input",10),ye("ngModelChange",function(s){return k(r),be(i.searchUid,s)||(i.searchUid=s),F(s)}),l(),a(14,"button",11),R("click",function(){return k(r),F(i.checkCardAuthorization())}),D(15,"i",12),c(16," \u062A\u062D\u0642\u0642 "),l()()(),a(17,"div",13)(18,"div",14),c(19,"\u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062A \u0627\u0644\u0645\u0633\u062C\u0644\u0629"),l(),a(20,"div",15),R("click",function(){return k(r),F(i.loadAuthorizedCards())}),c(21,"\u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062A \u0627\u0644\u0645\u0635\u0631\u062D\u0629"),l()(),a(22,"div",16)(23,"div",17)(24,"h3"),c(25,"\u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062A \u0627\u0644\u0645\u0633\u062C\u0644\u0629 \u0644\u0644\u0637\u0644\u0627\u0628"),l(),a(26,"div",18)(27,"input",19),ye("ngModelChange",function(s){return k(r),be(i.searchStudentTerm,s)||(i.searchStudentTerm=s),F(s)}),R("input",function(){return k(r),F(i.filterStudents())}),l()()(),te(28,Kj,15,2,"div",20)(29,Qj,4,0,"ng-template",null,0,om),l(),a(31,"div",21)(32,"div",17)(33,"h3"),c(34,"\u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062A \u0627\u0644\u0645\u0635\u0631\u062D\u0629"),l(),a(35,"div",22)(36,"label",23)(37,"input",24),ye("ngModelChange",function(s){return k(r),be(i.filterActive,s)||(i.filterActive=s),F(s)}),R("change",function(){return k(r),F(i.applyFilters())}),l(),a(38,"span"),c(39,"\u0627\u0644\u0646\u0634\u0637\u0629 \u0641\u0642\u0637"),l()(),a(40,"label",23)(41,"input",24),ye("ngModelChange",function(s){return k(r),be(i.filterExpired,s)||(i.filterExpired=s),F(s)}),R("change",function(){return k(r),F(i.applyFilters())}),l(),a(42,"span"),c(43,"\u0627\u0644\u0645\u064F\u0646\u062A\u0647\u064A\u0629 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0629"),l()()()(),a(44,"div",25)(45,"table",26)(46,"thead")(47,"tr")(48,"th"),c(49,"\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629"),l(),a(50,"th"),c(51,"\u0627\u0633\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629"),l(),a(52,"th"),c(53,"\u0627\u0644\u0648\u0635\u0641"),l(),a(54,"th"),c(55,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0627\u0646\u062A\u0647\u0627\u0621"),l(),a(56,"th"),c(57,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(58,"th"),c(59,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(60,"tbody"),te(61,eW,16,9,"tr",27)(62,tW,3,0,"tr",28),l()()()(),te(63,iW,24,3,"div",29)(64,rW,33,5,"div",29)(65,sW,12,1,"div",29),l()}if(e&2){let r=c0(30);h(13),xe("ngModel",i.searchUid),h(14),xe("ngModel",i.searchStudentTerm),h(),P("ngIf",!i.loading)("ngIfElse",r),h(9),xe("ngModel",i.filterActive),h(4),xe("ngModel",i.filterExpired),h(20),P("ngForOf",i.authorizedCards),h(),P("ngIf",i.authorizedCards.length===0),h(),P("ngIf",i.showAssignCardModal),h(),P("ngIf",i.showAddAuthorizedCardModal),h(),P("ngIf",i.showCardDetailsModal)}},dependencies:[bn,ii,Wn,oi,Ii,Oi,Yn,$l,xi,ri,Lr,Kn],styles:[".cards-management-container[_ngcontent-%COMP%]{padding:20px;background:#f5f5f5;min-height:100vh}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin:0}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}.search-section[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;margin-bottom:20px;box-shadow:0 2px 4px #0000001a}.search-input[_ngcontent-%COMP%]{display:flex;gap:10px}.tabs[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:8px 8px 0 0;overflow:hidden;margin-bottom:-1px}.tab[_ngcontent-%COMP%]{padding:12px 24px;cursor:pointer;border-bottom:3px solid transparent}.tab.active[_ngcontent-%COMP%]{border-bottom-color:#007bff;color:#007bff;font-weight:700}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.table-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.table-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.search-input[_ngcontent-%COMP%]{width:250px}.filters[_ngcontent-%COMP%]{display:flex;gap:20px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;cursor:pointer}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;padding:12px;text-align:right;border-bottom:2px solid #dee2e6;color:#495057;font-weight:600}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #dee2e6;vertical-align:middle}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.actions[_ngcontent-%COMP%]{display:flex;gap:5px;white-space:nowrap}.btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.btn-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#545b62}.btn-info[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background:#117a8b}.btn-warning[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.btn-warning[_ngcontent-%COMP%]:hover{background:#e0a800}.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.badge-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.badge-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.give-cards-to-student.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #dee2e6;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #dee2e6;display:flex;justify-content:flex-end;gap:10px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ced4da;border-radius:4px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;box-shadow:0 0 0 .2rem #007bff40}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #eee}.detail-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-4[_ngcontent-%COMP%]{margin-top:20px}@media (max-width: 768px){.header[_ngcontent-%COMP%], .table-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:flex-start}.search-input[_ngcontent-%COMP%]{width:100%}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.actions[_ngcontent-%COMP%]{flex-wrap:wrap}.modal-content[_ngcontent-%COMP%]{width:95%}}"]})};var aW=()=>[];function lW(n,t){n&1&&(a(0,"div",22),D(1,"i",23),a(2,"p"),c(3,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062D\u0635\u0635..."),l()())}function uW(n,t){n&1&&(a(0,"div",24),D(1,"i",25),a(2,"p"),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u062D\u0635\u0635 \u0644\u0639\u0631\u0636\u0647\u0627"),l()())}function cW(n,t){if(n&1&&(a(0,"div",36)(1,"span",37),c(2,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A:"),l(),a(3,"span",38),c(4),l()()),n&2){let e=T().$implicit;h(4),$(e.notes)}}function dW(n,t){if(n&1&&(a(0,"span"),c(1),l()),n&2){let e=T().$implicit;h(),Z(" (",e.attendance.length,") ")}}function fW(n,t){if(n&1){let e=Se();va(0),a(1,"button",45),R("click",function(){k(e);let r=T().$implicit,o=T(2);return F(o.openStartClassModal(r))}),D(2,"i",46),c(3," \u0628\u062F\u0621 "),l(),a(4,"button",47),R("click",function(){k(e);let r=T().$implicit,o=T(2);return F(o.openCancelClassModal(r))}),D(5,"i",48),c(6," \u0625\u0644\u063A\u0627\u0621 "),l(),xa()}}function hW(n,t){if(n&1){let e=Se();va(0),a(1,"button",49),R("click",function(){k(e);let r=T().$implicit,o=T(2);return F(o.openAttendanceModal(r))}),D(2,"i",50),c(3," \u062A\u0633\u062C\u064A\u0644 \u062D\u0636\u0648\u0631 "),l(),a(4,"button",51),R("click",function(){k(e);let r=T().$implicit,o=T(2);return F(o.openEndClassModal(r))}),D(5,"i",52),c(6," \u0625\u0646\u0647\u0627\u0621 "),l(),xa()}}function pW(n,t){n&1&&(va(0),a(1,"div",53),D(2,"i",54),c(3," \u0645\u0643\u062A\u0645\u0644\u0629 "),l(),xa())}function mW(n,t){n&1&&(va(0),a(1,"div",55),D(2,"i",56),c(3," \u0645\u0644\u063A\u064A\u0629 "),l(),xa())}function gW(n,t){if(n&1){let e=Se();a(0,"div",28)(1,"div",29)(2,"div",30)(3,"h3"),c(4),l(),a(5,"span",31),c(6),l()(),a(7,"div",32)(8,"span"),D(9,"i",33),c(10),l(),a(11,"span"),D(12,"i",34),c(13),l()()(),a(14,"div",35)(15,"div",36)(16,"span",37),c(17,"\u0627\u0644\u0645\u0627\u062F\u0629:"),l(),a(18,"span",38),c(19),l()(),a(20,"div",36)(21,"span",37),c(22,"\u0627\u0644\u0623\u0633\u062A\u0627\u0630:"),l(),a(23,"span",38),c(24),l()(),a(25,"div",36)(26,"span",37),c(27,"\u0627\u0644\u0642\u0627\u0639\u0629:"),l(),a(28,"span",38),c(29),l()(),te(30,cW,5,1,"div",39),l(),a(31,"div",40)(32,"button",41),R("click",function(){let r=k(e).$implicit,o=T(2);return F(o.openAttendanceModal(r))}),D(33,"i",42),c(34," \u0627\u0644\u062D\u0636\u0648\u0631 "),te(35,dW,2,1,"span",43),l(),a(36,"div",44),te(37,fW,7,0,"ng-container",43)(38,hW,7,0,"ng-container",43)(39,pW,4,0,"ng-container",43)(40,mW,4,0,"ng-container",43),l()()()}if(n&2){let e=t.$implicit,i=T(2);h(4),$((e.class==null?null:e.class.name)||"\u0628\u062F\u0648\u0646 \u0627\u0633\u0645"),h(),P("ngClass",i.getStatusClass(e.status)),h(),Z(" ",e.status==="scheduled"?"\u0645\u062C\u062F\u0648\u0644\u0629":e.status==="ongoing"?"\u062C\u0627\u0631\u064A\u0629":e.status==="completed"?"\u0645\u0643\u062A\u0645\u0644\u0629":"\u0645\u0644\u063A\u064A\u0629"," "),h(4),Z(" ",i.formatDate(e.date),""),h(3),Z(" ",i.formatTime(e.startTime),""),h(6),$((e.class==null?null:e.class.subject)||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),h(5),$((e.teacher==null?null:e.teacher.name)||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),h(5),$((e.classroom==null?null:e.classroom.name)||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),h(),P("ngIf",e.notes),h(2),P("disabled",e.status==="cancelled"),h(3),P("ngIf",(e.attendance||ya(15,aW)).length>0),h(2),P("ngIf",e.status==="scheduled"),h(),P("ngIf",e.status==="ongoing"),h(),P("ngIf",e.status==="completed"),h(),P("ngIf",e.status==="cancelled")}}function _W(n,t){if(n&1&&(a(0,"div",26),te(1,gW,41,16,"div",27),l()),n&2){let e=T();h(),P("ngForOf",e.filteredLiveClasses)}}function vW(n,t){if(n&1&&(a(0,"div",30)(1,"p")(2,"strong"),c(3),l()(),a(4,"p"),c(5),l(),a(6,"p"),c(7),l()()),n&2){let e=T(2);h(3),$(e.selectedLiveClass.class==null?null:e.selectedLiveClass.class.name),h(2),Jn("",e.selectedLiveClass.class==null?null:e.selectedLiveClass.class.subject," | ",e.selectedLiveClass.teacher==null?null:e.selectedLiveClass.teacher.name,""),h(2),Jn("",e.formatDate(e.selectedLiveClass.date)," - ",e.formatTime(e.selectedLiveClass.startTime),"")}}function xW(n,t){if(n&1&&(a(0,"div",86),D(1,"i",54),c(2),l()),n&2){let e=T(2);h(2),Z(" \u062A\u0645 \u0645\u0633\u062D \u0627\u0644\u0628\u0637\u0627\u0642\u0629: ",e.scannedRFID," ")}}function yW(n,t){if(n&1&&(a(0,"option",90),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Jn(" ",e.name," (",e.studentId,") ")}}function bW(n,t){if(n&1){let e=Se();a(0,"div",71)(1,"label"),c(2,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0637\u0627\u0644\u0628:"),l(),a(3,"select",87),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.newAttendance.studentId,r)||(o.newAttendance.studentId=r),F(r)}),a(4,"option",88),c(5,"-- \u0627\u062E\u062A\u0631 \u0637\u0627\u0644\u0628 --"),l(),te(6,yW,2,3,"option",89),l()()}if(n&2){let e=T(2);h(3),xe("ngModel",e.newAttendance.studentId),P("disabled",e.isScanningRFID),h(3),P("ngForOf",e.getClassStudents())}}function CW(n,t){if(n&1){let e=Se();a(0,"button",91),R("click",function(){k(e);let r=T(2);return F(r.autoMarkAbsent())}),D(1,"i",92),c(2," \u0648\u0636\u0639 \u063A\u0627\u0626\u0628 \u062A\u0644\u0642\u0627\u0626\u064A "),l()}}function wW(n,t){n&1&&(a(0,"div",93),D(1,"i",23),c(2," \u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0633\u062C\u0644 \u0627\u0644\u062D\u0636\u0648\u0631... "),l())}function MW(n,t){n&1&&(a(0,"div",94)(1,"p"),c(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0633\u062C\u0644\u0627\u062A \u062D\u0636\u0648\u0631"),l()())}function SW(n,t){if(n&1&&(a(0,"div",98)(1,"span",99),c(2),l(),a(3,"span",100),c(4),l(),a(5,"span",101),c(6),l(),a(7,"span",102),c(8),Ln(9,"date"),l()()),n&2){let e=t.$implicit,i=T(3);h(2),$((e.student==null?null:e.student.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),h(),P("ngClass",i.getAttendanceStatusClass(e.status)),h(),Z(" ",e.status==="present"?"\u062D\u0627\u0636\u0631":e.status==="late"?"\u0645\u062A\u0623\u062E\u0631":"\u063A\u0627\u0626\u0628"," "),h(2),$(e.method==="manual"?"\u064A\u062F\u0648\u064A":"RFID"),h(2),$(Hi(9,5,e.timestamp,"HH:mm"))}}function EW(n,t){if(n&1&&(a(0,"div",95)(1,"div",96)(2,"span"),c(3,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628"),l(),a(4,"span"),c(5,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(6,"span"),c(7,"\u0627\u0644\u0637\u0631\u064A\u0642\u0629"),l(),a(8,"span"),c(9,"\u0627\u0644\u0648\u0642\u062A"),l()(),te(10,SW,10,8,"div",97),l()),n&2){let e=T(2);h(10),P("ngForOf",e.attendanceRecords)}}function AW(n,t){if(n&1){let e=Se();a(0,"div",57)(1,"div",58)(2,"div",59)(3,"h2"),c(4,"\u0633\u062C\u0644 \u0627\u0644\u062D\u0636\u0648\u0631"),l(),a(5,"button",60),R("click",function(){k(e);let r=T();return F(r.closeAllModals())}),c(6,"\xD7"),l()(),a(7,"div",61),te(8,vW,8,5,"div",62),a(9,"div",63)(10,"h3"),c(11,"\u062A\u0633\u062C\u064A\u0644 \u062D\u0636\u0648\u0631 \u062C\u062F\u064A\u062F"),l(),a(12,"div",64)(13,"button",65),R("click",function(){k(e);let r=T();return F(r.newAttendance.method="manual")}),D(14,"i",66),c(15," \u064A\u062F\u0648\u064A "),l(),a(16,"button",67),R("click",function(){k(e);let r=T();return F(r.startRFIDScan())}),D(17,"i",68),c(18),l()(),te(19,xW,3,1,"div",69)(20,bW,7,3,"div",70),a(21,"div",71)(22,"label"),c(23,"\u062D\u0627\u0644\u0629 \u0627\u0644\u062D\u0636\u0648\u0631:"),l(),a(24,"select",72),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newAttendance.status,r)||(o.newAttendance.status=r),F(r)}),a(25,"option",73),c(26,"\u062D\u0627\u0636\u0631"),l(),a(27,"option",74),c(28,"\u0645\u062A\u0623\u062E\u0631"),l(),a(29,"option",75),c(30,"\u063A\u0627\u0626\u0628"),l()()(),a(31,"div",71)(32,"label"),c(33,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A:"),l(),a(34,"textarea",76),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newAttendance.notes,r)||(o.newAttendance.notes=r),F(r)}),l()(),a(35,"div",77)(36,"button",78),R("click",function(){k(e);let r=T();return F(r.recordAttendance())}),D(37,"i",79),c(38," \u062D\u0641\u0638 "),l(),a(39,"button",4),R("click",function(){k(e);let r=T();return F(r.resetAttendanceForm())}),D(40,"i",80),c(41," \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),l(),te(42,CW,3,0,"button",81),l()(),a(43,"div",82)(44,"h3"),c(45),l(),te(46,wW,3,0,"div",83)(47,MW,3,0,"div",84)(48,EW,11,1,"div",85),l()()()()}if(n&2){let e=T();h(8),P("ngIf",e.selectedLiveClass),h(5),Ue("active",e.newAttendance.method==="manual"),h(3),Ue("active",e.newAttendance.method==="rfid")("scanning",e.isScanningRFID),P("disabled",e.isScanningRFID),h(2),Z(" ",e.isScanningRFID?"\u062C\u0627\u0631\u064A \u0627\u0644\u0645\u0633\u062D...":"\u0628\u0637\u0627\u0642\u0629 RFID"," "),h(),P("ngIf",e.scannedRFID),h(),P("ngIf",e.newAttendance.method==="manual"),h(4),xe("ngModel",e.newAttendance.status),h(10),xe("ngModel",e.newAttendance.notes),h(2),P("disabled",!e.newAttendance.studentId),h(6),P("ngIf",(e.selectedLiveClass==null?null:e.selectedLiveClass.status)==="ongoing"),h(3),Z("\u0633\u062C\u0644 \u0627\u0644\u062D\u0636\u0648\u0631 (",e.attendanceRecords.length,")"),h(),P("ngIf",e.isLoadingAttendance),h(),P("ngIf",!e.isLoadingAttendance&&e.attendanceRecords.length===0),h(),P("ngIf",!e.isLoadingAttendance&&e.attendanceRecords.length>0)}}function TW(n,t){if(n&1&&(a(0,"div",30)(1,"p"),c(2,"\u0647\u0644 \u062A\u0631\u064A\u062F \u0628\u062F\u0621 \u062D\u0635\u0629 "),a(3,"strong"),c(4),l(),c(5,"\u061F"),l(),a(6,"p"),c(7),l(),a(8,"p"),c(9),l()()),n&2){let e=T(2);h(4),$(e.selectedLiveClass.class==null?null:e.selectedLiveClass.class.name),h(3),Jn("",e.formatDate(e.selectedLiveClass.date)," - ",e.formatTime(e.selectedLiveClass.startTime),""),h(2),Z("\u0627\u0644\u0623\u0633\u062A\u0627\u0630: ",e.selectedLiveClass.teacher==null?null:e.selectedLiveClass.teacher.name,"")}}function DW(n,t){if(n&1){let e=Se();a(0,"div",57)(1,"div",58)(2,"div",59)(3,"h2"),c(4,"\u0628\u062F\u0621 \u0627\u0644\u062D\u0635\u0629"),l(),a(5,"button",60),R("click",function(){k(e);let r=T();return F(r.closeAllModals())}),c(6,"\xD7"),l()(),a(7,"div",61),te(8,TW,10,4,"div",62),a(9,"div",77)(10,"button",2),R("click",function(){k(e);let r=T();return F(r.startLiveClass())}),D(11,"i",103),c(12," \u0646\u0639\u0645\u060C \u0628\u062F\u0621 \u0627\u0644\u062D\u0635\u0629 "),l(),a(13,"button",4),R("click",function(){k(e);let r=T();return F(r.closeAllModals())}),D(14,"i",48),c(15," \u0625\u0644\u063A\u0627\u0621 "),l()()()()()}if(n&2){let e=T();h(8),P("ngIf",e.selectedLiveClass)}}function PW(n,t){if(n&1&&(a(0,"div",30)(1,"p"),c(2,"\u0647\u0644 \u062A\u0631\u064A\u062F \u0625\u0646\u0647\u0627\u0621 \u062D\u0635\u0629 "),a(3,"strong"),c(4),l(),c(5,"\u061F"),l(),a(6,"p"),c(7),l(),a(8,"p"),c(9),l()()),n&2){let e=T(2);h(4),$(e.selectedLiveClass.class==null?null:e.selectedLiveClass.class.name),h(3),Z("\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0621: ",e.formatTime(e.selectedLiveClass.startTime),""),h(2),Z("\u0639\u062F\u062F \u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u062D\u0627\u0636\u0631\u064A\u0646: ",e.selectedLiveClass.attendance.length||0,"")}}function IW(n,t){if(n&1){let e=Se();a(0,"div",57)(1,"div",58)(2,"div",59)(3,"h2"),c(4,"\u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062D\u0635\u0629"),l(),a(5,"button",60),R("click",function(){k(e);let r=T();return F(r.closeAllModals())}),c(6,"\xD7"),l()(),a(7,"div",61),te(8,PW,10,3,"div",62),a(9,"div",77)(10,"button",2),R("click",function(){k(e);let r=T();return F(r.endLiveClass())}),D(11,"i",103),c(12," \u0646\u0639\u0645\u060C \u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 "),l(),a(13,"button",4),R("click",function(){k(e);let r=T();return F(r.closeAllModals())}),D(14,"i",48),c(15," \u0625\u0644\u063A\u0627\u0621 "),l()()()()()}if(n&2){let e=T();h(8),P("ngIf",e.selectedLiveClass)}}function OW(n,t){if(n&1&&(a(0,"div",30)(1,"p"),c(2,"\u0647\u0644 \u062A\u0631\u064A\u062F \u0625\u0644\u063A\u0627\u0621 \u062D\u0635\u0629 "),a(3,"strong"),c(4),l(),c(5,"\u061F"),l(),a(6,"p"),c(7),l(),a(8,"p",105),c(9,"\u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621 \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646\u0647"),l()()),n&2){let e=T(2);h(4),$(e.selectedLiveClass.class==null?null:e.selectedLiveClass.class.name),h(3),Jn("",e.formatDate(e.selectedLiveClass.date)," - ",e.formatTime(e.selectedLiveClass.startTime),"")}}function RW(n,t){if(n&1){let e=Se();a(0,"div",57)(1,"div",58)(2,"div",59)(3,"h2"),c(4,"\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u0635\u0629"),l(),a(5,"button",60),R("click",function(){k(e);let r=T();return F(r.closeAllModals())}),c(6,"\xD7"),l()(),a(7,"div",61),te(8,OW,10,3,"div",62),a(9,"div",77)(10,"button",91),R("click",function(){k(e);let r=T();return F(r.cancelLiveClass())}),D(11,"i",48),c(12," \u0646\u0639\u0645\u060C \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 "),l(),a(13,"button",4),R("click",function(){k(e);let r=T();return F(r.closeAllModals())}),D(14,"i",104),c(15," \u0625\u0628\u0642\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 "),l()()()()()}if(n&2){let e=T();h(8),P("ngIf",e.selectedLiveClass)}}function kW(n,t){if(n&1&&(a(0,"option",90),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Jn(" ",e.name," (",e.subject,") ")}}function FW(n,t){if(n&1&&(a(0,"option",90),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Z(" ",e.name," ")}}function NW(n,t){if(n&1&&(a(0,"option",90),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Z(" ",e.name," ")}}function LW(n,t){if(n&1){let e=Se();a(0,"div",57)(1,"div",58)(2,"div",59)(3,"h2"),c(4,"\u0625\u0646\u0634\u0627\u0621 \u062D\u0635\u0629 \u062C\u062F\u064A\u062F\u0629"),l(),a(5,"button",60),R("click",function(){k(e);let r=T();return F(r.closeAllModals())}),c(6,"\xD7"),l()(),a(7,"div",61)(8,"div",71)(9,"label"),c(10,"\u0627\u062E\u062A\u0631 \u0627\u0644\u062D\u0635\u0629:"),l(),a(11,"select",72),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newClass.classId,r)||(o.newClass.classId=r),F(r)}),a(12,"option",88),c(13,"-- \u0627\u062E\u062A\u0631 \u062D\u0635\u0629 --"),l(),te(14,kW,2,3,"option",89),l()(),a(15,"div",106)(16,"div",71)(17,"label"),c(18,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E:"),l(),a(19,"input",107),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newClass.date,r)||(o.newClass.date=r),F(r)}),l()(),a(20,"div",71)(21,"label"),c(22,"\u0648\u0642\u062A \u0627\u0644\u0628\u062F\u0621:"),l(),a(23,"input",108),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newClass.startTime,r)||(o.newClass.startTime=r),F(r)}),l()()(),a(24,"div",106)(25,"div",71)(26,"label"),c(27,"\u0648\u0642\u062A \u0627\u0644\u0627\u0646\u062A\u0647\u0627\u0621:"),l(),a(28,"input",108),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newClass.endTime,r)||(o.newClass.endTime=r),F(r)}),l()(),a(29,"div",71)(30,"label"),c(31,"\u0627\u0644\u0642\u0627\u0639\u0629:"),l(),a(32,"select",72),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newClass.classroomId,r)||(o.newClass.classroomId=r),F(r)}),a(33,"option",88),c(34,"-- \u0627\u062E\u062A\u0631 \u0642\u0627\u0639\u0629 --"),l(),te(35,FW,2,2,"option",89),l()()(),a(36,"div",71)(37,"label"),c(38,"\u0627\u0644\u0623\u0633\u062A\u0627\u0630:"),l(),a(39,"select",72),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newClass.teacherId,r)||(o.newClass.teacherId=r),F(r)}),a(40,"option",88),c(41,"-- \u0627\u062E\u062A\u0631 \u0623\u0633\u062A\u0627\u0630\u0627 --"),l(),te(42,NW,2,2,"option",89),l()(),a(43,"div",71)(44,"label"),c(45,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A:"),l(),a(46,"textarea",109),ye("ngModelChange",function(r){k(e);let o=T();return be(o.newClass.notes,r)||(o.newClass.notes=r),F(r)}),l()(),a(47,"div",77)(48,"button",78),R("click",function(){k(e);let r=T();return F(r.createLiveClass())}),D(49,"i",3),c(50," \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 "),l(),a(51,"button",4),R("click",function(){k(e);let r=T();return F(r.closeAllModals())}),D(52,"i",48),c(53," \u0625\u0644\u063A\u0627\u0621 "),l()()()()()}if(n&2){let e=T();h(11),xe("ngModel",e.newClass.classId),h(3),P("ngForOf",e.classes),h(5),xe("ngModel",e.newClass.date),h(4),xe("ngModel",e.newClass.startTime),h(5),xe("ngModel",e.newClass.endTime),h(4),xe("ngModel",e.newClass.classroomId),h(3),P("ngForOf",e.classrooms),h(4),xe("ngModel",e.newClass.teacherId),h(3),P("ngForOf",e.teachers),h(4),xe("ngModel",e.newClass.notes),h(2),P("disabled",!e.newClass.classId||!e.newClass.date||!e.newClass.startTime)}}var Ov=class n{constructor(t,e,i){this.liveClassesService=t;this.cardsService=e;this.lessonsService=i}liveClasses=[];filteredLiveClasses=[];selectedLiveClass=null;statusFilter="all";dateFilter="";searchTerm="";isLoading=!1;isLoadingAttendance=!1;showAttendanceModal=!1;showStartClassModal=!1;showEndClassModal=!1;showCancelClassModal=!1;showCreateClassModal=!1;attendanceRecords=[];newAttendance={studentId:"",status:"present",method:"manual",notes:""};isScanningRFID=!1;scannedRFID="";newClass={classId:"",date:"",startTime:"",endTime:"",teacherId:"",classroomId:"",notes:""};classes=[];teachers=[];classrooms=[];subscriptions=[];ngOnInit(){this.loadLiveClasses(),this.loadClasses(),this.loadTeachers(),this.loadClassrooms()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}loadLiveClasses(){this.isLoading=!0;let t={};this.statusFilter!=="all"&&(t.status=this.statusFilter),this.dateFilter&&(t.date=this.dateFilter);let e=this.liveClassesService.getLiveClasses(t).subscribe({next:i=>{this.liveClasses=i,this.filterLiveClasses(),this.isLoading=!1},error:i=>{console.error("Error loading live classes:",i),this.isLoading=!1}});this.subscriptions.push(e)}filterLiveClasses(){let t=[...this.liveClasses];if(this.searchTerm.trim()){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.class?.name?.toLowerCase().includes(e)||i.teacher?.name?.toLowerCase().includes(e)||i.classroom?.name?.toLowerCase().includes(e))}this.filteredLiveClasses=t}loadClasses(){let t=this.lessonsService.getClasses().subscribe({next:e=>{this.classes=e},error:e=>{console.error("Error loading classes:",e)}});this.subscriptions.push(t)}loadTeachers(){this.teachers=[{_id:"1",name:"Teacher 1"},{_id:"2",name:"Teacher 2"},{_id:"3",name:"Teacher 3"}]}loadClassrooms(){this.classrooms=[{_id:"1",name:"Room 101"},{_id:"2",name:"Room 102"},{_id:"3",name:"Room 103"}]}openAttendanceModal(t){this.selectedLiveClass=t,this.loadAttendance(t._id),this.showAttendanceModal=!0}openStartClassModal(t){this.selectedLiveClass=t,this.showStartClassModal=!0}openEndClassModal(t){this.selectedLiveClass=t,this.showEndClassModal=!0}openCancelClassModal(t){this.selectedLiveClass=t,this.showCancelClassModal=!0}openCreateClassModal(){let t=new Date().toISOString().split("T")[0];this.newClass={classId:"",date:t,startTime:"",endTime:"",teacherId:"",classroomId:"",notes:""},this.showCreateClassModal=!0}closeAllModals(){this.showAttendanceModal=!1,this.showStartClassModal=!1,this.showEndClassModal=!1,this.showCancelClassModal=!1,this.showCreateClassModal=!1,this.selectedLiveClass=null,this.isScanningRFID=!1,this.scannedRFID=""}startLiveClass(){if(!this.selectedLiveClass)return;let t=this.liveClassesService.startLiveClass(this.selectedLiveClass._id).subscribe({next:e=>{this.updateLiveClassInList(e),this.closeAllModals()},error:e=>{console.error("Error starting live class:",e)}});this.subscriptions.push(t)}endLiveClass(){if(!this.selectedLiveClass)return;let t=this.liveClassesService.endLiveClass(this.selectedLiveClass._id).subscribe({next:e=>{this.updateLiveClassInList(e),this.closeAllModals()},error:e=>{console.error("Error ending live class:",e)}});this.subscriptions.push(t)}cancelLiveClass(){if(!this.selectedLiveClass)return;let t=this.liveClassesService.cancelLiveClass(this.selectedLiveClass._id).subscribe({next:e=>{this.updateLiveClassInList(e),this.closeAllModals()},error:e=>{console.error("Error cancelling live class:",e)}});this.subscriptions.push(t)}createLiveClass(){let t={class:this.newClass.classId,date:this.newClass.date,startTime:this.newClass.startTime,endTime:this.newClass.endTime||void 0,teacher:this.newClass.teacherId,classroom:this.newClass.classroomId,notes:this.newClass.notes||void 0,status:"scheduled"},e=this.liveClassesService.createLiveClass(t).subscribe({next:i=>{this.liveClasses.unshift(i),this.filterLiveClasses(),this.closeAllModals()},error:i=>{console.error("Error creating live class:",i)}});this.subscriptions.push(e)}loadAttendance(t){this.isLoadingAttendance=!0;let e=this.liveClassesService.getLiveClassById(t).subscribe({next:i=>{this.attendanceRecords=i.attendance||[],this.isLoadingAttendance=!1},error:i=>{console.error("Error loading attendance:",i),this.isLoadingAttendance=!1}});this.subscriptions.push(e)}recordAttendance(){if(!this.selectedLiveClass||!this.newAttendance.studentId)return;let t={studentId:this.newAttendance.studentId,status:this.newAttendance.status,method:this.newAttendance.method,notes:this.newAttendance.notes||void 0},e=this.liveClassesService.recordAttendance(this.selectedLiveClass._id,t).subscribe({next:i=>{this.loadAttendance(this.selectedLiveClass._id),this.resetAttendanceForm()},error:i=>{console.error("Error recording attendance:",i)}});this.subscriptions.push(e)}resetAttendanceForm(){this.newAttendance={studentId:"",status:"present",method:"manual",notes:""},this.isScanningRFID=!1,this.scannedRFID=""}startRFIDScan(){this.isScanningRFID=!0,this.scannedRFID="",setTimeout(()=>{this.scannedRFID="UID"+Math.random().toString(36).substr(2,8).toUpperCase(),this.checkRFIDCard(this.scannedRFID)},1e3)}checkRFIDCard(t){let e=this.cardsService.checkCardAuthorization(t).subscribe({next:i=>{i.authorized&&i.student&&(this.newAttendance.studentId=i.student._id,this.newAttendance.method="rfid"),this.isScanningRFID=!1},error:i=>{console.error("Error checking RFID card:",i),this.isScanningRFID=!1}});this.subscriptions.push(e)}autoMarkAbsent(){if(!this.selectedLiveClass)return;let t=this.liveClassesService.autoMarkAbsent(this.selectedLiveClass._id).subscribe({next:()=>{this.loadAttendance(this.selectedLiveClass._id)},error:e=>{console.error("Error auto-marking absent:",e)}});this.subscriptions.push(t)}updateLiveClassInList(t){let e=this.liveClasses.findIndex(i=>i._id===t._id);e!==-1&&(this.liveClasses[e]=t),this.filterLiveClasses()}formatTime(t){return new Date(`2000-01-01T${t}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}formatDate(t){return new Date(t).toLocaleDateString()}getStatusClass(t){switch(t){case"scheduled":return"status-scheduled";case"ongoing":return"status-ongoing";case"completed":return"status-completed";case"cancelled":return"status-cancelled";default:return""}}getAttendanceStatusClass(t){switch(t){case"present":return"attendance-present";case"absent":return"attendance-absent";case"late":return"attendance-late";default:return""}}getClassStudents(){return this.selectedLiveClass?.class?.students?this.selectedLiveClass.class.students:[]}static \u0275fac=function(e){return new(e||n)(Te(Pa),Te(ud),Te(gs))};static \u0275cmp=vn({type:n,selectors:[["app-live-class"]],decls:36,vars:11,consts:[[1,"live-class"],[1,"header"],[1,"btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"btn-secondary",3,"click"],[1,"fas","fa-sync-alt"],[1,"filters"],[1,"filter-group"],[1,"search-box"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u062D\u0635\u0629...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"fas","fa-search","search-icon"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","scheduled"],["value","ongoing"],["value","completed"],["value","cancelled"],["type","date",1,"date-filter",3,"ngModelChange","change","ngModel"],["class","loading",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","classes-grid",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"loading"],[1,"fas","fa-spinner","fa-spin"],[1,"empty-state"],[1,"fas","fa-calendar-times"],[1,"classes-grid"],["class","class-card",4,"ngFor","ngForOf"],[1,"class-card"],[1,"class-header"],[1,"class-info"],[1,"status-badge",3,"ngClass"],[1,"class-time"],[1,"far","fa-calendar"],[1,"far","fa-clock"],[1,"class-details"],[1,"detail"],[1,"label"],[1,"value"],["class","detail",4,"ngIf"],[1,"class-actions"],[1,"btn-attendance",3,"click","disabled"],[1,"fas","fa-users"],[4,"ngIf"],[1,"action-group"],[1,"btn-start",3,"click"],[1,"fas","fa-play"],[1,"btn-cancel",3,"click"],[1,"fas","fa-times"],[1,"btn-attendance",3,"click"],[1,"fas","fa-user-plus"],[1,"btn-end",3,"click"],[1,"fas","fa-stop"],[1,"completed-text"],[1,"fas","fa-check-circle"],[1,"cancelled-text"],[1,"fas","fa-ban"],[1,"modal-overlay"],[1,"give-cards-to-student-modal"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","class-info",4,"ngIf"],[1,"attendance-form"],[1,"method-selector"],[1,"method-btn",3,"click"],[1,"fas","fa-user-edit"],[1,"method-btn",3,"click","disabled"],[1,"fas","fa-id-card"],["class","scanned-rfid",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"form-select",3,"ngModelChange","ngModel"],["value","present"],["value","late"],["value","absent"],["rows","3","placeholder","\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629...",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-primary",3,"click","disabled"],[1,"fas","fa-save"],[1,"fas","fa-redo"],["class","btn-danger",3,"click",4,"ngIf"],[1,"attendance-records"],["class","loading-small",4,"ngIf"],["class","empty-state-small",4,"ngIf"],["class","records-table",4,"ngIf"],[1,"scanned-rfid"],[1,"form-select",3,"ngModelChange","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"btn-danger",3,"click"],[1,"fas","fa-user-times"],[1,"loading-small"],[1,"empty-state-small"],[1,"records-table"],[1,"record-header"],["class","record-row",4,"ngFor","ngForOf"],[1,"record-row"],[1,"student-name"],[1,"attendance-status",3,"ngClass"],[1,"method"],[1,"timestamp"],[1,"fas","fa-check"],[1,"fas","fa-undo"],[1,"text-danger"],[1,"form-row"],["type","date",1,"form-input",3,"ngModelChange","ngModel"],["type","time",1,"form-input",3,"ngModelChange","ngModel"],["rows","3","placeholder","\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629 \u0644\u0644\u062D\u0635\u0629...",1,"form-textarea",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"h1"),c(3,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u0628\u0627\u0634\u0631\u0629"),l(),a(4,"div")(5,"button",2),R("click",function(){return i.openCreateClassModal()}),D(6,"i",3),c(7," \u0625\u0646\u0634\u0627\u0621 \u062D\u0635\u0629 \u062C\u062F\u064A\u062F\u0629 "),l(),a(8,"button",4),R("click",function(){return i.loadLiveClasses()}),D(9,"i",5),c(10," \u062A\u062D\u062F\u064A\u062B "),l()()(),a(11,"div",6)(12,"div",7)(13,"div",8)(14,"input",9),ye("ngModelChange",function(o){return be(i.searchTerm,o)||(i.searchTerm=o),o}),R("input",function(){return i.filterLiveClasses()}),l(),D(15,"i",10),l(),a(16,"select",11),ye("ngModelChange",function(o){return be(i.statusFilter,o)||(i.statusFilter=o),o}),R("change",function(){return i.loadLiveClasses()}),a(17,"option",12),c(18,"\u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0627\u0644\u0627\u062A"),l(),a(19,"option",13),c(20,"\u0645\u062C\u062F\u0648\u0644\u0629"),l(),a(21,"option",14),c(22,"\u062C\u0627\u0631\u064A\u0629"),l(),a(23,"option",15),c(24,"\u0645\u0643\u062A\u0645\u0644\u0629"),l(),a(25,"option",16),c(26,"\u0645\u0644\u063A\u064A\u0629"),l()(),a(27,"input",17),ye("ngModelChange",function(o){return be(i.dateFilter,o)||(i.dateFilter=o),o}),R("change",function(){return i.loadLiveClasses()}),l()()(),te(28,lW,4,0,"div",18)(29,uW,4,0,"div",19)(30,_W,2,1,"div",20)(31,AW,49,19,"div",21)(32,DW,16,1,"div",21)(33,IW,16,1,"div",21)(34,RW,16,1,"div",21)(35,LW,54,11,"div",21),l()),e&2&&(h(14),xe("ngModel",i.searchTerm),h(2),xe("ngModel",i.statusFilter),h(11),xe("ngModel",i.dateFilter),h(),P("ngIf",i.isLoading),h(),P("ngIf",!i.isLoading&&i.filteredLiveClasses.length===0),h(),P("ngIf",!i.isLoading&&i.filteredLiveClasses.length>0),h(),P("ngIf",i.showAttendanceModal),h(),P("ngIf",i.showStartClassModal),h(),P("ngIf",i.showEndClassModal),h(),P("ngIf",i.showCancelClassModal),h(),P("ngIf",i.showCreateClassModal))},dependencies:[bn,Ol,ii,Wn,Ao,oi,Ii,Oi,Yn,xi,ri,Kn],styles:[".live-class[_ngcontent-%COMP%]{padding:20px;background-color:#f5f5f5;min-height:100vh}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;margin:0}.filters[_ngcontent-%COMP%]{margin-bottom:30px}.filter-group[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]{position:relative;flex:1;min-width:250px}.search-input[_ngcontent-%COMP%]{width:100%;padding:10px 40px 10px 15px;border:1px solid #ddd;border-radius:6px;font-size:14px}.search-icon[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translateY(-50%);color:#666}.filter-select[_ngcontent-%COMP%], .date-filter[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #ddd;border-radius:6px;font-size:14px;background-color:#fff}.date-filter[_ngcontent-%COMP%]{min-width:150px}.classes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.class-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 2px 10px #0000001a;transition:transform .3s ease}.class-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.class-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee}.class-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.class-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:capitalize}.status-scheduled[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.status-ongoing[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460}.status-completed[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-cancelled[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.class-time[_ngcontent-%COMP%]{display:flex;gap:10px;color:#666;font-size:14px}.class-details[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee}.detail[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.detail[_ngcontent-%COMP%]:last-child{margin-bottom:0}.label[_ngcontent-%COMP%]{font-weight:600;color:#666}.value[_ngcontent-%COMP%]{color:#333}.class-actions[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;gap:10px}.btn-attendance[_ngcontent-%COMP%], .btn-start[_ngcontent-%COMP%], .btn-end[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;font-size:14px;cursor:pointer;transition:all .3s ease}.btn-attendance[_ngcontent-%COMP%]{width:100%;background-color:#4a6cf7;color:#fff}.btn-attendance[_ngcontent-%COMP%]:hover{background-color:#3a5ce5}.action-group[_ngcontent-%COMP%]{display:flex;gap:10px}.btn-start[_ngcontent-%COMP%]{flex:1;background-color:#28a745;color:#fff}.btn-start[_ngcontent-%COMP%]:hover{background-color:#218838}.btn-end[_ngcontent-%COMP%]{flex:1;background-color:#17a2b8;color:#fff}.btn-end[_ngcontent-%COMP%]:hover{background-color:#138496}.btn-cancel[_ngcontent-%COMP%]{flex:1;background-color:#dc3545;color:#fff}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#c82333}.completed-text[_ngcontent-%COMP%], .cancelled-text[_ngcontent-%COMP%]{flex:1;text-align:center;padding:8px;font-size:14px;font-weight:600}.completed-text[_ngcontent-%COMP%]{color:#28a745}.cancelled-text[_ngcontent-%COMP%]{color:#dc3545}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.give-cards-to-student-modal[_ngcontent-%COMP%]{background:#fff;border-radius:10px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_modalSlideIn .3s ease}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%}.close-btn[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:10px}.class-info[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:15px;border-radius:6px;margin-bottom:20px}.class-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.attendance-form[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:20px;border-radius:6px;margin-bottom:30px}.attendance-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px;color:#333}.method-selector[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.method-btn[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ddd;background-color:#fff;border-radius:6px;cursor:pointer;transition:all .3s ease}.method-btn.active[_ngcontent-%COMP%]{background-color:#4a6cf7;color:#fff;border-color:#4a6cf7}.method-btn.scanning[_ngcontent-%COMP%]{background-color:#ffc107;color:#333;border-color:#ffc107}.scanned-rfid[_ngcontent-%COMP%]{font-size:12px;color:#28a745;font-family:monospace;margin-top:5px}.attendance-records[_ngcontent-%COMP%]{margin-top:20px}.attendance-records[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:15px;color:#333}.records-table[_ngcontent-%COMP%]{border:1px solid #eee;border-radius:6px;overflow:hidden}.record-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;background-color:#f8f9fa;padding:12px 15px;font-weight:600;color:#495057;border-bottom:1px solid #dee2e6}.record-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;padding:12px 15px;border-bottom:1px solid #eee}.record-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.student-name[_ngcontent-%COMP%]{font-weight:500}.attendance-status[_ngcontent-%COMP%]{padding:3px 8px;border-radius:12px;font-size:12px;font-weight:600;text-align:center}.attendance-present[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.attendance-absent[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.attendance-late[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.method[_ngcontent-%COMP%]{text-transform:capitalize}.timestamp[_ngcontent-%COMP%]{font-family:monospace;font-size:12px;color:#666}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#333}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .3s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#4a6cf7}.form-textarea[_ngcontent-%COMP%]{resize:vertical}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-size:14px;cursor:pointer;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]{background-color:#4a6cf7;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#3a5ce5}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666;font-size:16px;background:#fff;border-radius:10px;margin-top:20px}.loading-small[_ngcontent-%COMP%], .empty-state-small[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666;font-size:14px}"]})};var VW=["fileInput"];function UW(n,t){if(n&1&&(a(0,"option",93),c(1),l()),n&2){let e=t.$implicit;P("value",e),h(),$(e)}}function BW(n,t){n&1&&(a(0,"tr")(1,"td",94)(2,"div",95),D(3,"i",96),c(4," \u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644... "),l()()())}function zW(n,t){n&1&&(a(0,"tr")(1,"td",97),D(2,"i",98),c(3," \u0644\u0627 \u062A\u0648\u062C\u062F \u0646\u062A\u0627\u0626\u062C "),l()())}function HW(n,t){if(n&1&&(a(0,"span",109),c(1),l()),n&2){let e=t.$implicit;h(),Z(" ",e," ")}}function jW(n,t){if(n&1){let e=Se();a(0,"tr",99),R("click",function(){let r=k(e).$implicit,o=T();return F(o.selectTeacher(r))}),a(1,"td"),c(2),l(),a(3,"td",100)(4,"strong"),c(5),l()(),a(6,"td"),te(7,HW,2,1,"span",101),l(),a(8,"td"),c(9),l(),a(10,"td"),c(11),l(),a(12,"td"),c(13),l(),a(14,"td")(15,"span",102),c(16),l()(),a(17,"td",103)(18,"button",104),R("click",function(r){let o=k(e).$implicit;return T().openEditModal(o),F(r.stopPropagation())}),D(19,"i",81),l(),a(20,"button",105),R("click",function(r){let o=k(e).$implicit;return T().toggleTeacherStatus(o),F(r.stopPropagation())}),D(21,"i",106),l(),a(22,"button",107),R("click",function(r){let o=k(e).$implicit;return T().openDeleteModal(o),F(r.stopPropagation())}),D(23,"i",108),l()()()}if(n&2){let e=t.$implicit,i=t.index,r=T();Ue("selected",(r.selectedTeacher==null?null:r.selectedTeacher._id)===e._id),h(2),$((r.currentPage-1)*r.itemsPerPage+i+1),h(3),$(e.name),h(2),P("ngForOf",e.subjects),h(2),$(e.phone||"\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631"),h(2),$(e.email||"\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631"),h(2),$(r.formatDate(e.hireDate)),h(2),Ue("active",r.isTeacherActive(e))("inactive",!r.isTeacherActive(e)),h(),Z(" ",r.getTeacherStatus(e)," "),h(4),T1("title",r.isTeacherActive(e)?"\u062A\u0639\u0637\u064A\u0644":"\u062A\u0641\u0639\u064A\u0644"),h(),Ue("fa-user-slash",r.isTeacherActive(e))("fa-user-check",!r.isTeacherActive(e))}}function WW(n,t){if(n&1){let e=Se();a(0,"div",110)(1,"button",111),R("click",function(){k(e);let r=T();return F(r.prevPage())}),D(2,"i",112),c(3," \u0627\u0644\u0633\u0627\u0628\u0642 "),l(),a(4,"span",113),c(5),l(),a(6,"button",111),R("click",function(){k(e);let r=T();return F(r.nextPage())}),c(7," \u0627\u0644\u062A\u0627\u0644\u064A "),D(8,"i",114),l()()}if(n&2){let e=T();h(),P("disabled",e.currentPage===1),h(4),Jn(" \u0627\u0644\u0635\u0641\u062D\u0629 ",e.currentPage," \u0645\u0646 ",e.totalPages," "),h(),P("disabled",e.currentPage===e.totalPages)}}function GW(n,t){if(n&1&&(a(0,"div",143)(1,"div",144)(2,"strong"),c(3),l(),a(4,"small",120),c(5),l()(),a(6,"span",145),c(7),l()()),n&2){let e=t.$implicit,i=T(3);h(3),$(e.name),h(2),$(e.subject),h(2),Z("",i.calculateClassesstudentlenght(e.students)||0," \u0637\u0627\u0644\u0628")}}function $W(n,t){if(n&1){let e=Se();a(0,"button",146),R("click",function(){k(e);let r=T(3);return F(r.showClassesModal=!0)}),c(1," \u0639\u0631\u0636 \u0627\u0644\u0645\u0632\u064A\u062F "),D(2,"i",114),l()}}function YW(n,t){if(n&1&&(a(0,"div",140),te(1,GW,8,3,"div",141)(2,$W,3,0,"button",142),l()),n&2){let e=T(2);h(),P("ngForOf",e.teacherClasses.slice(0,5)),h(),P("ngIf",e.teacherClasses.length>5)}}function qW(n,t){n&1&&(a(0,"div",147),D(1,"i",40),a(2,"p"),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u062D\u0635\u0635 \u0645\u0633\u0646\u062F\u0629"),l()())}function XW(n,t){if(n&1){let e=Se();a(0,"div",115)(1,"div",116)(2,"div",117)(3,"div",118),D(4,"i",119),l(),a(5,"div",100)(6,"h4"),c(7),l(),a(8,"p",120),c(9,"\u0623\u0633\u062A\u0627\u0630"),l()()(),a(10,"div",121)(11,"div",122),D(12,"i",123),a(13,"span")(14,"strong"),c(15,"\u0627\u0644\u0645\u0648\u0627\u062F:"),l(),c(16),l()(),a(17,"div",122),D(18,"i",124),a(19,"span")(20,"strong"),c(21,"\u0627\u0644\u0647\u0627\u062A\u0641:"),l(),c(22),l()(),a(23,"div",122),D(24,"i",125),a(25,"span")(26,"strong"),c(27,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A:"),l(),c(28),l()(),a(29,"div",122),D(30,"i",42),a(31,"span")(32,"strong"),c(33,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0639\u064A\u064A\u0646:"),l(),c(34),l()(),a(35,"div",122),D(36,"i",38),a(37,"span")(38,"strong"),c(39,"\u0627\u0644\u062D\u0627\u0644\u0629:"),l(),a(40,"span",102),c(41),l()()()()(),a(42,"div",126)(43,"h5"),c(44,"\u0627\u0644\u0625\u062D\u0635\u0627\u0626\u064A\u0627\u062A"),l(),a(45,"div",127)(46,"div",128)(47,"div",129),c(48),l(),a(49,"div",130),c(50,"\u0639\u062F\u062F \u0627\u0644\u062D\u0635\u0635"),l()(),a(51,"div",128)(52,"div",129),c(53),l(),a(54,"div",130),c(55,"\u0639\u062F\u062F \u0627\u0644\u0637\u0644\u0627\u0628"),l()(),a(56,"div",128)(57,"div",129),c(58),l(),a(59,"div",130),c(60,"\u062D\u0635\u0635 \u062D\u064A\u0629"),l()(),a(61,"div",128)(62,"div",129),c(63),l(),a(64,"div",130),c(65,"\u062D\u0635\u0635 \u0647\u0630\u0627 \u0627\u0644\u0634\u0647\u0631"),l()()()(),a(66,"div",131)(67,"div",132)(68,"h5"),c(69,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u0633\u0646\u062F\u0629"),l(),a(70,"span",133),c(71),l()(),te(72,YW,3,2,"div",134)(73,qW,4,0,"ng-template",null,2,om),l(),a(75,"div",135)(76,"h5"),c(77,"\u0625\u062C\u0631\u0627\u0621\u0627\u062A \u0633\u0631\u064A\u0639\u0629"),l(),a(78,"div",136)(79,"button",137),R("click",function(){k(e);let r=T();return F(r.openEditModal(r.selectedTeacher))}),D(80,"i",81),c(81," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A "),l(),a(82,"button",138),R("click",function(){k(e);let r=T();return F(r.toggleTeacherStatus(r.selectedTeacher))}),D(83,"i",106),c(84),l(),a(85,"button",139),R("click",function(){k(e);let r=T();return F(r.openDeleteModal(r.selectedTeacher))}),D(86,"i",108),c(87," \u062D\u0630\u0641 "),l()()()()}if(n&2){let e=c0(74),i=T();h(7),$(i.selectedTeacher.name),h(9),Z(" ",i.getSubjectsText(i.selectedTeacher.subjects),""),h(6),Z(" ",i.selectedTeacher.phone||"\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631",""),h(6),Z(" ",i.selectedTeacher.email||"\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631",""),h(6),Z(" ",i.formatDate(i.selectedTeacher.hireDate),""),h(6),Ue("active",i.isTeacherActive(i.selectedTeacher)),h(),Z(" ",i.getTeacherStatus(i.selectedTeacher)," "),h(7),$(i.teacherStats.totalClasses),h(5),$(i.teacherStats.totalStudents),h(5),$(i.teacherStats.totalLiveClasses),h(5),$(i.teacherStats.thisMonthClasses),h(8),$(i.teacherClasses.length),h(),P("ngIf",i.teacherClasses.length>0)("ngIfElse",e),h(11),Ue("fa-user-slash",i.isTeacherActive(i.selectedTeacher))("fa-user-check",!i.isTeacherActive(i.selectedTeacher)),h(),Z(" ",i.isTeacherActive(i.selectedTeacher)?"\u062A\u0639\u0637\u064A\u0644":"\u062A\u0641\u0639\u064A\u0644"," ")}}function ZW(n,t){if(n&1){let e=Se();a(0,"div",148)(1,"input",149),R("change",function(){let r=k(e).$implicit,o=T();return F(o.toggleSubject(r,"new"))}),l(),a(2,"label",150),c(3),l()()}if(n&2){let e=t.$implicit,i=T();h(),P("id","new-subject-"+e)("checked",i.isSubjectSelected(e,"new")),h(),P("for","new-subject-"+e),h(),Z(" ",e," ")}}function JW(n,t){n&1&&(a(0,"span"),D(1,"i",96),c(2," \u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638..."),l())}function KW(n,t){n&1&&(a(0,"span"),c(1,"\u062D\u0641\u0638"),l())}function QW(n,t){if(n&1){let e=Se();a(0,"div",148)(1,"input",149),R("change",function(){let r=k(e).$implicit,o=T(2);return F(o.toggleSubject(r,"edit"))}),l(),a(2,"label",150),c(3),l()()}if(n&2){let e=t.$implicit,i=T(2);h(),P("id","edit-subject-"+e)("checked",i.isSubjectSelected(e,"edit")),h(),P("for","edit-subject-"+e),h(),Z(" ",e," ")}}function eG(n,t){if(n&1){let e=Se();a(0,"form",64,3),R("ngSubmit",function(){k(e);let r=T();return F(r.editTeacher())}),a(2,"div",65)(3,"label",151),c(4,"\u0627\u0633\u0645 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 *"),l(),a(5,"input",152),ye("ngModelChange",function(r){k(e);let o=T();return be(o.editTeacherData.name,r)||(o.editTeacherData.name=r),F(r)}),l()(),a(6,"div",65)(7,"label"),c(8,"\u0627\u0644\u0645\u0648\u0627\u062F *"),l(),a(9,"div",68),te(10,QW,4,4,"div",69),l()(),a(11,"div",17)(12,"div",70)(13,"div",65)(14,"label",153),c(15,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),l(),a(16,"input",154),ye("ngModelChange",function(r){k(e);let o=T();return be(o.editTeacherData.phone,r)||(o.editTeacherData.phone=r),F(r)}),l()()(),a(17,"div",70)(18,"div",65)(19,"label",155),c(20,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),l(),a(21,"input",156),ye("ngModelChange",function(r){k(e);let o=T();return be(o.editTeacherData.email,r)||(o.editTeacherData.email=r),F(r)}),l()()()(),a(22,"div",65)(23,"label",157),c(24,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0639\u064A\u064A\u0646"),l(),a(25,"input",158),ye("ngModelChange",function(r){k(e);let o=T();return be(o.editTeacherData.hireDate,r)||(o.editTeacherData.hireDate=r),F(r)}),l()(),a(26,"div",65)(27,"div",159)(28,"input",160),ye("ngModelChange",function(r){k(e);let o=T();return be(o.editTeacherData.active,r)||(o.editTeacherData.active=r),F(r)}),l(),a(29,"label",161),c(30," \u0623\u0633\u062A\u0627\u0630 \u0646\u0634\u0637 "),l()()()()}if(n&2){let e=T();h(5),xe("ngModel",e.editTeacherData.name),h(5),P("ngForOf",e.subjectsList),h(6),xe("ngModel",e.editTeacherData.phone),h(5),xe("ngModel",e.editTeacherData.email),h(4),xe("ngModel",e.editTeacherData.hireDate),h(3),xe("ngModel",e.editTeacherData.active)}}function tG(n,t){n&1&&(a(0,"span"),D(1,"i",96),c(2," \u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u062F\u064A\u062B..."),l())}function nG(n,t){n&1&&(a(0,"span"),c(1,"\u062A\u062D\u062F\u064A\u062B"),l())}function iG(n,t){if(n&1&&(a(0,"p"),c(1," \u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 "),a(2,"strong"),c(3),l(),c(4,"\u061F "),l()),n&2){let e=T();h(3),$(e.selectedTeacher.name)}}function rG(n,t){n&1&&(a(0,"span"),D(1,"i",96),c(2," \u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0630\u0641..."),l())}function oG(n,t){n&1&&(a(0,"span"),c(1,"\u062D\u0630\u0641"),l())}function sG(n,t){if(n&1&&(a(0,"small",163),c(1),l()),n&2){let e=t.$implicit;h(),Jn(" ",e.day," ",e.time," ")}}function aG(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l(),a(7,"td"),c(8),l(),a(9,"td"),te(10,sG,2,2,"small",162),l()()),n&2){let e=t.$implicit;h(2),$(e.name),h(2),$(e.subject),h(2),$(e.students.length||0),h(2),$(e.academicYear||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),h(2),P("ngForOf",e.schedule)}}function lG(n,t){n&1&&(a(0,"div",164)(1,"div",165)(2,"span",166),c(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()()())}var Rv=class n{constructor(t,e,i,r,o){this.teachersService=t;this.classesService=e;this.liveClassesService=i;this.lessonsService=r;this.authService=o}teachers=[];classes=[];liveClasses=[];teacherClasses=[];teacherLiveClasses=[];selectedTeacher=null;selectedTeacherId="";newTeacher={name:"",subjects:[],phone:"",email:"",hireDate:new Date().toISOString().split("T")[0],active:!0};editTeacherData={};searchTerm="";subjectFilter="";statusFilter="all";subjectsList=["\u0631\u064A\u0627\u0636\u064A\u0627\u062A","\u0641\u064A\u0632\u064A\u0627\u0621","\u0639\u0644\u0648\u0645","\u0644\u063A\u0629 \u0639\u0631\u0628\u064A\u0629","\u0644\u063A\u0629 \u0641\u0631\u0646\u0633\u064A\u0629","\u0644\u063A\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629","\u062A\u0627\u0631\u064A\u062E","\u062C\u063A\u0631\u0627\u0641\u064A\u0627","\u0641\u0644\u0633\u0641\u0629","\u0625\u0639\u0644\u0627\u0645 \u0622\u0644\u064A"];isLoading=!1;showAddModal=!1;showEditModal=!1;showDetailsModal=!1;showConfirmDeleteModal=!1;showClassesModal=!1;teacherStats={totalClasses:0,totalStudents:0,totalLiveClasses:0,thisMonthClasses:0};currentPage=1;itemsPerPage=10;totalItems=0;fileInput;ngOnInit(){this.loadTeachers(),this.loadClasses(),this.loadLiveClasses()}get activeTeachersCount(){return this.teachers.filter(t=>this.isTeacherActive(t)).length}loadTeachers(){this.isLoading=!0,this.teachersService.getTeachers().subscribe({next:t=>{this.teachers=t,this.totalItems=t.length,this.isLoading=!1},error:t=>{console.error("Error loading teachers:",t),this.isLoading=!1,alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629")}})}loadClasses(){this.classesService.getClasses().subscribe({next:t=>{this.classes=t},error:t=>{console.error("Error loading classes:",t)}})}loadLiveClasses(){this.liveClassesService.getLiveClasses().subscribe({next:t=>{this.liveClasses=t},error:t=>{console.error("Error loading live classes:",t)}})}get filteredTeachers(){let t=this.teachers;if(this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.name.toLowerCase().includes(e)||i.email?.toLowerCase().includes(e)||i.phone?.includes(e))}return this.subjectFilter&&(t=t.filter(e=>e.subjects.includes(this.subjectFilter))),this.statusFilter==="active"?t=t.filter(e=>e.active===void 0||e.active===!0):this.statusFilter==="inactive"&&(t=t.filter(e=>e.active===!1)),this.totalItems=t.length,t}get paginatedTeachers(){let t=(this.currentPage-1)*this.itemsPerPage;return this.filteredTeachers.slice(t,t+this.itemsPerPage)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}prevPage(){this.currentPage>1&&this.currentPage--}get totalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}selectTeacher(t){this.selectedTeacher=t,this.selectedTeacherId=t._id,this.loadTeacherDetails()}loadTeacherDetails(){this.selectedTeacher&&(this.teacherClasses=this.classes.filter(t=>t.teacher&&t.teacher._id===this.selectedTeacherId),this.teacherLiveClasses=this.liveClasses.filter(t=>t.teacher&&t.teacher._id===this.selectedTeacherId),this.calculateTeacherStats())}calculateTeacherStats(){if(!this.selectedTeacher)return;let t=new Date,e=t.getMonth()+1,i=t.getFullYear();this.teacherStats={totalClasses:this.teacherClasses.length,totalStudents:this.teacherClasses.reduce((r,o)=>r+(o.students?o.students.length:0),0),totalLiveClasses:this.teacherLiveClasses.length,thisMonthClasses:this.teacherLiveClasses.filter(r=>{let o=new Date(r.date);return o.getMonth()+1===e&&o.getFullYear()===i}).length}}addTeacher(){this.validateTeacherForm(this.newTeacher)&&(this.isLoading=!0,this.teachersService.createTeacher(this.newTeacher).subscribe({next:t=>{t.existed?(alert("\u0647\u0630\u0627 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 \u0645\u0648\u062C\u0648\u062F \u0628\u0627\u0644\u0641\u0639\u0644 \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),this.loadTeachers()):(alert("\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 \u0628\u0646\u062C\u0627\u062D"),this.loadTeachers(),this.showAddModal=!1,this.resetNewTeacherForm()),this.isLoading=!1},error:t=>{console.error("Error adding teacher:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),this.isLoading=!1}}))}editTeacher(){!this.selectedTeacher||!this.validateTeacherForm(this.editTeacherData)||(this.isLoading=!0,this.teachersService.updateTeacher(this.selectedTeacher._id,this.editTeacherData).subscribe({next:()=>{alert("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0623\u0633\u062A\u0627\u0630 \u0628\u0646\u062C\u0627\u062D"),this.loadTeachers(),this.showEditModal=!1,this.isLoading=!1},error:t=>{console.error("Error updating teacher:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),this.isLoading=!1}}))}deleteTeacher(){this.selectedTeacher&&(this.isLoading=!0,this.teachersService.deleteTeacher(this.selectedTeacher._id).subscribe({next:()=>{alert("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 \u0628\u0646\u062C\u0627\u062D"),this.loadTeachers(),this.selectedTeacher=null,this.showConfirmDeleteModal=!1,this.isLoading=!1},error:t=>{console.error("Error deleting teacher:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u062D\u0630\u0641 \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),this.isLoading=!1}}))}toggleTeacherStatus(t){let e=t.active===void 0?!0:t.active,i=yt(Ie({},t),{active:!e});this.teachersService.updateTeacher(t._id,i).subscribe({next:()=>{alert(`\u062A\u0645 ${e?"\u062A\u0639\u0637\u064A\u0644":"\u062A\u0641\u0639\u064A\u0644"} \u0627\u0644\u0623\u0633\u062A\u0627\u0630 \u0628\u0646\u062C\u0627\u062D`),this.loadTeachers(),this.selectedTeacher&&this.selectedTeacher._id===t._id&&(this.selectedTeacher.active=!e)},error:r=>{console.error("Error updating teacher status:",r),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630")}})}validateTeacherForm(t){return t.name.trim()?!t.subjects||t.subjects.length===0?(alert("\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0645\u0627\u062F\u0629 \u0648\u0627\u062D\u062F\u0629 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"),!1):t.email&&!this.isValidEmail(t.email)?(alert("\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0635\u062D\u064A\u062D"),!1):!0:(alert("\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),!1)}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}resetNewTeacherForm(){this.newTeacher={name:"",subjects:[],phone:"",email:"",hireDate:new Date().toISOString().split("T")[0],active:!0}}openEditModal(t){this.selectedTeacher=t,this.editTeacherData={name:t.name,subjects:[...t.subjects],phone:t.phone||"",email:t.email||"",hireDate:t.hireDate.split("T")[0],active:t.active===void 0?!0:t.active},this.showEditModal=!0}openDeleteModal(t){this.selectedTeacher=t,this.showConfirmDeleteModal=!0}toggleSubject(t,e){let i=e==="new"?this.newTeacher:this.editTeacherData,r=i.subjects.indexOf(t);r>-1?i.subjects.splice(r,1):i.subjects.push(t)}isSubjectSelected(t,e){return(e==="new"?this.newTeacher:this.editTeacherData).subjects.includes(t)}getSubjectsText(t){return t.join("\u060C ")}formatDate(t){return new Date(t).toLocaleDateString("ar-EG")}isTeacherActive(t){return t.active===void 0||t.active===!0}getTeacherStatus(t){return this.isTeacherActive(t)?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"}exportToCSV(){let t=["\u0627\u0644\u0627\u0633\u0645","\u0627\u0644\u0645\u0648\u0627\u062F","\u0627\u0644\u0647\u0627\u062A\u0641","\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A","\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0639\u064A\u064A\u0646","\u0627\u0644\u062D\u0627\u0644\u0629"],e=this.filteredTeachers.map(u=>[u.name,u.subjects.join(" - "),u.phone||"\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631",u.email||"\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631",this.formatDate(u.hireDate),this.getTeacherStatus(u)]),i=[t.join(","),...e.map(u=>u.join(","))].join(`
`),r=new Blob(["\uFEFF"+i],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),s=URL.createObjectURL(r);o.setAttribute("href",s),o.setAttribute("download",`\u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629_${new Date().toISOString().split("T")[0]}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}onFileSelected(t){let e=t.target.files[0];if(!e)return;let i=new FileReader;i.onload=r=>{let o=r.target.result;this.processCSV(o)},i.readAsText(e,"UTF-8")}processCSV(t){let i=t.split(`
`)[0].split(",");console.log("Processing CSV file..."),alert("\u0648\u0638\u064A\u0641\u0629 \u0627\u0644\u0627\u0633\u062A\u064A\u0631\u0627\u062F \u0642\u064A\u062F \u0627\u0644\u062A\u0637\u0648\u064A\u0631"),this.fileInput&&(this.fileInput.nativeElement.value="")}clearFilters(){this.searchTerm="",this.subjectFilter="",this.statusFilter="all",this.currentPage=1}calculateClassesstudentlenght(t){return t.students.lenght}static \u0275fac=function(e){return new(e||n)(Te(Ka),Te(Da),Te(Pa),Te(gs),Te(Cn))};static \u0275cmp=vn({type:n,selectors:[["app-teachers-management"]],viewQuery:function(e,i){if(e&1&&im(VW,5),e&2){let r;l0(r=u0())&&(i.fileInput=r.first)}},decls:230,vars:52,consts:[["fileInput",""],["addForm","ngForm"],["noClasses",""],["editForm","ngForm"],[1,"teachers-management"],[1,"header"],[1,"fas","fa-chalkboard-teacher"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-file-export"],[1,"import-btn"],["type","file","accept",".csv",2,"display","none",3,"change"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-file-import"],[1,"filters-section"],[1,"row"],[1,"col-md-4"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","\u0628\u062D\u062B \u0628\u0627\u0633\u0645 \u0627\u0644\u0623\u0633\u062A\u0627\u0630\u060C \u0627\u0644\u0647\u0627\u062A\u0641\u060C \u0623\u0648 \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A...",3,"ngModelChange","input","ngModel"],[1,"col-md-3"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","all"],["value","active"],["value","inactive"],[1,"col-md-2"],[1,"btn","btn-clear",3,"click"],[1,"fas","fa-times"],[1,"stats-cards"],[1,"stat-card"],[1,"stat-icon","bg-primary"],[1,"fas","fa-users"],[1,"stat-info"],[1,"stat-icon","bg-success"],[1,"fas","fa-user-check"],[1,"stat-icon","bg-warning"],[1,"fas","fa-chalkboard"],[1,"stat-icon","bg-info"],[1,"fas","fa-calendar-alt"],[1,"table-container"],[1,"table-header"],[1,"total-count"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngIf"],[3,"selected","click",4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],[1,"details-sidebar"],[1,"sidebar-header"],[1,"close-btn",3,"click"],["class","sidebar-content",4,"ngIf"],[1,"overlay",3,"click"],[1,"teacher-modal"],[1,"teacher-modal-dialog"],[1,"teacher-modal-content"],[1,"teacher-modal-header"],[1,"teacher-modal-title"],[1,"fas","fa-user-plus"],["type","button",1,"close",3,"click"],[1,"teacher-modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"subjects-checkboxes"],["class","form-check form-check-inline",4,"ngFor","ngForOf"],[1,"col-md-6"],["for","phone"],["type","tel","id","phone","name","phone",1,"form-control",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email",1,"form-control",3,"ngModelChange","ngModel"],["for","hireDate"],["type","date","id","hireDate","name","hireDate",1,"form-control",3,"ngModelChange","ngModel"],[1,"teacher-modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"teacher-modal-backdrop",3,"click"],[1,"fas","fa-edit"],[3,"ngSubmit",4,"ngIf"],[1,"teacher-modal-dialog","teacher-modal-sm"],[1,"teacher-modal-title","text-danger"],[1,"fas","fa-exclamation-triangle"],[1,"text-danger"],[1,"fas","fa-exclamation-circle"],["type","button",1,"btn","btn-danger",3,"click","disabled"],[1,"teacher-modal-dialog","teacher-modal-lg"],[1,"table"],[4,"ngFor","ngForOf"],["class","loading-overlay",4,"ngIf"],[3,"value"],["colspan","8",1,"text-center"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["colspan","8",1,"text-center","text-muted"],[1,"fas","fa-info-circle"],[3,"click"],[1,"teacher-name"],["class","subjects-badge",4,"ngFor","ngForOf"],[1,"status-badge"],[1,"actions"],["title","\u062A\u0639\u062F\u064A\u0644",1,"btn","btn-sm","btn-info",3,"click"],[1,"btn","btn-sm","btn-warning",3,"click","title"],[1,"fas"],["title","\u062D\u0630\u0641",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"subjects-badge"],[1,"pagination"],[1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fas","fa-chevron-right"],[1,"page-info"],[1,"fas","fa-chevron-left"],[1,"sidebar-content"],[1,"teacher-info-card"],[1,"teacher-header"],[1,"teacher-avatar"],[1,"fas","fa-user-graduate"],[1,"text-muted"],[1,"teacher-details"],[1,"detail-item"],[1,"fas","fa-book"],[1,"fas","fa-phone"],[1,"fas","fa-envelope"],[1,"stats-section"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],[1,"classes-section"],[1,"section-header"],[1,"badge"],["class","classes-list",4,"ngIf","ngIfElse"],[1,"quick-actions"],[1,"action-buttons"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"btn","btn-sm","btn-outline-warning",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"classes-list"],["class","class-item",4,"ngFor","ngForOf"],["class","btn btn-link show-more",3,"click",4,"ngIf"],[1,"class-item"],[1,"class-info"],[1,"students-count"],[1,"btn","btn-link","show-more",3,"click"],[1,"empty-state"],[1,"form-check","form-check-inline"],["type","checkbox",1,"form-check-input",3,"change","id","checked"],[1,"form-check-label",3,"for"],["for","editName"],["type","text","id","editName","name","editName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editPhone"],["type","tel","id","editPhone","name","editPhone",1,"form-control",3,"ngModelChange","ngModel"],["for","editEmail"],["type","email","id","editEmail","name","editEmail",1,"form-control",3,"ngModelChange","ngModel"],["for","editHireDate"],["type","date","id","editHireDate","name","editHireDate",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check"],["type","checkbox","id","editActive","name","editActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","editActive",1,"form-check-label"],["class","schedule-item",4,"ngFor","ngForOf"],[1,"schedule-item"],[1,"loading-overlay"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(e,i){if(e&1){let r=Se();a(0,"div",4)(1,"div",5)(2,"h1"),D(3,"i",6),c(4," \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629"),l(),a(5,"div",7)(6,"button",8),R("click",function(){return k(r),F(i.showAddModal=!0)}),D(7,"i",9),c(8," \u0625\u0636\u0627\u0641\u0629 \u0623\u0633\u062A\u0627\u0630 \u062C\u062F\u064A\u062F "),l(),a(9,"button",10),R("click",function(){return k(r),F(i.exportToCSV())}),D(10,"i",11),c(11," \u062A\u0635\u062F\u064A\u0631 \u0625\u0644\u0649 CSV "),l(),a(12,"div",12)(13,"input",13,0),R("change",function(s){return k(r),F(i.onFileSelected(s))}),l(),a(15,"button",14),R("click",function(){k(r);let s=c0(14);return F(s.click())}),D(16,"i",15),c(17," \u0627\u0633\u062A\u064A\u0631\u0627\u062F \u0645\u0646 CSV "),l()()()(),a(18,"div",16)(19,"div",17)(20,"div",18)(21,"div",19),D(22,"i",20),a(23,"input",21),ye("ngModelChange",function(s){return k(r),be(i.searchTerm,s)||(i.searchTerm=s),F(s)}),R("input",function(){return k(r),F(i.currentPage=1)}),l()()(),a(24,"div",22)(25,"select",23),ye("ngModelChange",function(s){return k(r),be(i.subjectFilter,s)||(i.subjectFilter=s),F(s)}),R("change",function(){return k(r),F(i.currentPage=1)}),a(26,"option",24),c(27,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0648\u0627\u062F"),l(),te(28,UW,2,2,"option",25),l()(),a(29,"div",22)(30,"select",23),ye("ngModelChange",function(s){return k(r),be(i.statusFilter,s)||(i.statusFilter=s),F(s)}),R("change",function(){return k(r),F(i.currentPage=1)}),a(31,"option",26),c(32,"\u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0627\u0644\u0627\u062A"),l(),a(33,"option",27),c(34,"\u0646\u0634\u0637"),l(),a(35,"option",28),c(36,"\u063A\u064A\u0631 \u0646\u0634\u0637"),l()()(),a(37,"div",29)(38,"button",30),R("click",function(){return k(r),F(i.clearFilters())}),D(39,"i",31),c(40," \u0645\u0633\u062D \u0627\u0644\u0641\u0644\u062A\u0631 "),l()()()(),a(41,"div",32)(42,"div",33)(43,"div",34),D(44,"i",35),l(),a(45,"div",36)(46,"h3"),c(47),l(),a(48,"p"),c(49,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629"),l()()(),a(50,"div",33)(51,"div",37),D(52,"i",38),l(),a(53,"div",36)(54,"h3"),c(55),l(),a(56,"p"),c(57,"\u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629 \u0627\u0644\u0646\u0634\u0637\u064A\u0646"),l()()(),a(58,"div",33)(59,"div",39),D(60,"i",40),l(),a(61,"div",36)(62,"h3"),c(63),l(),a(64,"p"),c(65,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062D\u0635\u0635"),l()()(),a(66,"div",33)(67,"div",41),D(68,"i",42),l(),a(69,"div",36)(70,"h3"),c(71),l(),a(72,"p"),c(73,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u062D\u064A\u0629"),l()()()(),a(74,"div",43)(75,"div",44)(76,"h3"),c(77,"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629"),l(),a(78,"span",45),c(79),l()(),a(80,"div",46)(81,"table",47)(82,"thead")(83,"tr")(84,"th"),c(85,"#"),l(),a(86,"th"),c(87,"\u0627\u0644\u0627\u0633\u0645"),l(),a(88,"th"),c(89,"\u0627\u0644\u0645\u0648\u0627\u062F"),l(),a(90,"th"),c(91,"\u0627\u0644\u0647\u0627\u062A\u0641"),l(),a(92,"th"),c(93,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),l(),a(94,"th"),c(95,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0639\u064A\u064A\u0646"),l(),a(96,"th"),c(97,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(98,"th"),c(99,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(100,"tbody"),te(101,BW,5,0,"tr",48)(102,zW,4,0,"tr",48)(103,jW,24,18,"tr",49),l()()(),te(104,WW,9,4,"div",50),l(),a(105,"div",51)(106,"div",52)(107,"h4"),c(108,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),l(),a(109,"button",53),R("click",function(){return k(r),F(i.selectedTeacher=null)}),D(110,"i",31),l()(),te(111,XW,88,20,"div",54),l(),a(112,"div",55),R("click",function(){return k(r),F(i.selectedTeacher=null)}),l(),a(113,"div",56)(114,"div",57)(115,"div",58)(116,"div",59)(117,"h5",60),D(118,"i",61),c(119," \u0625\u0636\u0627\u0641\u0629 \u0623\u0633\u062A\u0627\u0630 \u062C\u062F\u064A\u062F"),l(),a(120,"button",62),R("click",function(){return k(r),F(i.showAddModal=!1)}),a(121,"span"),c(122,"\xD7"),l()()(),a(123,"div",63)(124,"form",64,1),R("ngSubmit",function(){return k(r),F(i.addTeacher())}),a(126,"div",65)(127,"label",66),c(128,"\u0627\u0633\u0645 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 *"),l(),a(129,"input",67),ye("ngModelChange",function(s){return k(r),be(i.newTeacher.name,s)||(i.newTeacher.name=s),F(s)}),l()(),a(130,"div",65)(131,"label"),c(132,"\u0627\u0644\u0645\u0648\u0627\u062F *"),l(),a(133,"div",68),te(134,ZW,4,4,"div",69),l()(),a(135,"div",17)(136,"div",70)(137,"div",65)(138,"label",71),c(139,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),l(),a(140,"input",72),ye("ngModelChange",function(s){return k(r),be(i.newTeacher.phone,s)||(i.newTeacher.phone=s),F(s)}),l()()(),a(141,"div",70)(142,"div",65)(143,"label",73),c(144,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),l(),a(145,"input",74),ye("ngModelChange",function(s){return k(r),be(i.newTeacher.email,s)||(i.newTeacher.email=s),F(s)}),l()()()(),a(146,"div",65)(147,"label",75),c(148,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0639\u064A\u064A\u0646"),l(),a(149,"input",76),ye("ngModelChange",function(s){return k(r),be(i.newTeacher.hireDate,s)||(i.newTeacher.hireDate=s),F(s)}),l()()()(),a(150,"div",77)(151,"button",78),R("click",function(){return k(r),F(i.showAddModal=!1)}),c(152," \u0625\u0644\u063A\u0627\u0621 "),l(),a(153,"button",79),R("click",function(){return k(r),F(i.addTeacher())}),te(154,JW,3,0,"span",48)(155,KW,2,0,"span",48),l()()()()(),a(156,"div",80),R("click",function(){return k(r),F(i.showAddModal=!1)}),l(),a(157,"div",56)(158,"div",57)(159,"div",58)(160,"div",59)(161,"h5",60),D(162,"i",81),c(163," \u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),l(),a(164,"button",62),R("click",function(){return k(r),F(i.showEditModal=!1)}),a(165,"span"),c(166,"\xD7"),l()()(),a(167,"div",63),te(168,eG,31,6,"form",82),l(),a(169,"div",77)(170,"button",78),R("click",function(){return k(r),F(i.showEditModal=!1)}),c(171," \u0625\u0644\u063A\u0627\u0621 "),l(),a(172,"button",79),R("click",function(){return k(r),F(i.editTeacher())}),te(173,tG,3,0,"span",48)(174,nG,2,0,"span",48),l()()()()(),a(175,"div",80),R("click",function(){return k(r),F(i.showEditModal=!1)}),l(),a(176,"div",56)(177,"div",83)(178,"div",58)(179,"div",59)(180,"h5",84),D(181,"i",85),c(182," \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u0630\u0641"),l(),a(183,"button",62),R("click",function(){return k(r),F(i.showConfirmDeleteModal=!1)}),a(184,"span"),c(185,"\xD7"),l()()(),a(186,"div",63),te(187,iG,5,1,"p",48),a(188,"p",86),D(189,"i",87),c(190," \u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621 \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646\u0647! "),l()(),a(191,"div",77)(192,"button",78),R("click",function(){return k(r),F(i.showConfirmDeleteModal=!1)}),c(193," \u0625\u0644\u063A\u0627\u0621 "),l(),a(194,"button",88),R("click",function(){return k(r),F(i.deleteTeacher())}),te(195,rG,3,0,"span",48)(196,oG,2,0,"span",48),l()()()()(),a(197,"div",80),R("click",function(){return k(r),F(i.showConfirmDeleteModal=!1)}),l(),a(198,"div",56)(199,"div",89)(200,"div",58)(201,"div",59)(202,"h5",60),D(203,"i",40),c(204," \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u0633\u0646\u062F\u0629 "),l(),a(205,"button",62),R("click",function(){return k(r),F(i.showClassesModal=!1)}),a(206,"span"),c(207,"\xD7"),l()()(),a(208,"div",63)(209,"div",46)(210,"table",90)(211,"thead")(212,"tr")(213,"th"),c(214,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629"),l(),a(215,"th"),c(216,"\u0627\u0644\u0645\u0627\u062F\u0629"),l(),a(217,"th"),c(218,"\u0639\u062F\u062F \u0627\u0644\u0637\u0644\u0627\u0628"),l(),a(219,"th"),c(220,"\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062F\u0631\u0627\u0633\u064A\u0629"),l(),a(221,"th"),c(222,"\u0627\u0644\u062C\u062F\u0648\u0644"),l()()(),a(223,"tbody"),te(224,aG,11,5,"tr",91),l()()()(),a(225,"div",77)(226,"button",78),R("click",function(){return k(r),F(i.showClassesModal=!1)}),c(227," \u0625\u063A\u0644\u0627\u0642 "),l()()()()(),a(228,"div",80),R("click",function(){return k(r),F(i.showClassesModal=!1)}),l(),te(229,lG,4,0,"div",92),l()}e&2&&(h(23),xe("ngModel",i.searchTerm),h(2),xe("ngModel",i.subjectFilter),h(3),P("ngForOf",i.subjectsList),h(2),xe("ngModel",i.statusFilter),h(17),$(i.teachers.length),h(8),$(i.activeTeachersCount),h(8),$(i.classes.length),h(8),$(i.liveClasses.length),h(8),Z("\u0639\u062F\u062F \u0627\u0644\u0646\u062A\u0627\u0626\u062C: ",i.totalItems,""),h(22),P("ngIf",i.isLoading),h(),P("ngIf",!i.isLoading&&i.paginatedTeachers.length===0),h(),P("ngForOf",i.paginatedTeachers),h(),P("ngIf",i.totalPages>1),h(),Ue("show",i.selectedTeacher),h(6),P("ngIf",i.selectedTeacher),h(),Ue("show",i.selectedTeacher),h(),Ue("show",i.showAddModal),h(16),xe("ngModel",i.newTeacher.name),h(5),P("ngForOf",i.subjectsList),h(6),xe("ngModel",i.newTeacher.phone),h(5),xe("ngModel",i.newTeacher.email),h(4),xe("ngModel",i.newTeacher.hireDate),h(4),P("disabled",i.isLoading),h(),P("ngIf",i.isLoading),h(),P("ngIf",!i.isLoading),h(),Ue("show",i.showAddModal),h(),Ue("show",i.showEditModal),h(11),P("ngIf",i.selectedTeacher),h(4),P("disabled",i.isLoading),h(),P("ngIf",i.isLoading),h(),P("ngIf",!i.isLoading),h(),Ue("show",i.showEditModal),h(),Ue("show",i.showConfirmDeleteModal),h(11),P("ngIf",i.selectedTeacher),h(7),P("disabled",i.isLoading),h(),P("ngIf",i.isLoading),h(),P("ngIf",!i.isLoading),h(),Ue("show",i.showConfirmDeleteModal),h(),Ue("show",i.showClassesModal),h(26),P("ngForOf",i.teacherClasses),h(4),Ue("show",i.showClassesModal),h(),P("ngIf",i.isLoading))},dependencies:[bn,ii,Wn,oi,xr,Ii,Oi,Yn,$l,xi,ri,vr,Lr,Kn,Oo],styles:[".teachers-management[_ngcontent-%COMP%]{position:relative;min-height:100vh;background-color:#f8f9fa;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:25px 30px;border-radius:12px;margin-bottom:25px;box-shadow:0 6px 20px #0000001a;display:flex;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:600;display:flex;align-items:center;gap:12px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;border:none;font-weight:500;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background-color:#4361ee;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#3a56d4;transform:translateY(-2px);box-shadow:0 4px 12px #4361ee4d}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-outline-secondary[_ngcontent-%COMP%]{background-color:transparent;border:2px solid #6c757d;color:#6c757d}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#6c757d;color:#fff}.btn-success[_ngcontent-%COMP%]{background-color:#2ecc71;color:#fff}.btn-danger[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.btn-warning[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.btn-info[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.btn-clear[_ngcontent-%COMP%]{background-color:#e9ecef;color:#495057;border:1px solid #dee2e6}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:14px}.btn-link[_ngcontent-%COMP%]{color:#4361ee;text-decoration:none;background:none;border:none;cursor:pointer}.filters-section[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:10px;margin-bottom:25px;box-shadow:0 4px 12px #0000000d}.search-box[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translateY(-50%);color:#6c757d}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 15px;border:2px solid #e9ecef;border-radius:8px;font-size:15px;transition:border-color .3s ease}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4361ee;box-shadow:0 0 0 3px #4361ee1a}.form-control[_ngcontent-%COMP%]{padding:12px 15px;border:2px solid #e9ecef;border-radius:8px;font-size:15px;height:auto}.form-control[_ngcontent-%COMP%]:focus{border-color:#4361ee;box-shadow:0 0 0 3px #4361ee1a}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;display:flex;align-items:center;gap:20px;box-shadow:0 4px 12px #0000000d;transition:transform .3s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.stat-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;color:#fff}.bg-primary[_ngcontent-%COMP%]{background-color:#4361ee}.bg-success[_ngcontent-%COMP%]{background-color:#2ecc71}.bg-warning[_ngcontent-%COMP%]{background-color:#f39c12}.bg-info[_ngcontent-%COMP%]{background-color:#3498db}.stat-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:32px;font-weight:700;color:#2c3e50}.stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#7f8c8d;font-size:14px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 20px #00000014;margin-bottom:30px}.table-header[_ngcontent-%COMP%]{padding:20px 25px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center}.table-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.total-count[_ngcontent-%COMP%]{color:#6c757d;font-size:14px}.table[_ngcontent-%COMP%]{margin:0;border-collapse:separate;border-spacing:0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;border:none;padding:15px 20px;font-weight:600;color:#495057;text-align:right;border-bottom:2px solid #dee2e6}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 20px;vertical-align:middle;border-bottom:1px solid #e9ecef;transition:background-color .2s ease}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background-color:#4361ee1a;border-left:3px solid #4361ee}.teacher-name[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50}.subjects-badge[_ngcontent-%COMP%]{display:inline-block;background-color:#e3f2fd;color:#1976d2;padding:4px 10px;border-radius:20px;font-size:12px;margin:2px;font-weight:500}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:5px 12px;border-radius:20px;font-size:12px;font-weight:600}.status-badge.active[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;opacity:.7;transition:opacity .3s ease}tr[_ngcontent-%COMP%]:hover   .actions[_ngcontent-%COMP%]{opacity:1}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;padding:20px;border-top:1px solid #e9ecef}.page-info[_ngcontent-%COMP%]{color:#6c757d;font-size:14px}.details-sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-500px;width:500px;height:100vh;background:#fff;box-shadow:-5px 0 25px #0000001a;z-index:1050;transition:right .3s ease;overflow-y:auto}.details-sidebar.show[_ngcontent-%COMP%]{right:0}.sidebar-header[_ngcontent-%COMP%]{padding:20px 25px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.sidebar-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:18px}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:20px;cursor:pointer;padding:0}.sidebar-content[_ngcontent-%COMP%]{padding:25px}.teacher-info-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f7fa,#c3cfe2);border-radius:12px;padding:25px;margin-bottom:25px}.teacher-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:20px}.teacher-avatar[_ngcontent-%COMP%]{width:80px;height:80px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:36px;color:#4361ee;box-shadow:0 4px 12px #0000001a}.teacher-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.teacher-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:#495057}.detail-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4361ee;width:20px}.stats-section[_ngcontent-%COMP%]{margin-bottom:25px}.stats-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:15px;padding-bottom:10px;border-bottom:2px solid #f0f2f5}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}.stat-item[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:10px;text-align:center;box-shadow:0 2px 8px #0000000d;border:1px solid #e9ecef}.stat-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#4361ee;margin-bottom:5px}.stat-label[_ngcontent-%COMP%]{color:#6c757d;font-size:14px}.classes-section[_ngcontent-%COMP%]{margin-bottom:25px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.section-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.section-header[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background-color:#4361ee;color:#fff;padding:5px 12px;border-radius:20px;font-size:14px}.classes-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.class-item[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:8px;border:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.class-item[_ngcontent-%COMP%]:hover{transform:translate(-5px);border-color:#4361ee;box-shadow:0 2px 8px #4361ee1a}.class-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.students-count[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600}.show-more[_ngcontent-%COMP%]{text-align:center;margin-top:10px;font-size:14px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6c757d}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:15px;opacity:.5}.quick-actions[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:10px;border:1px solid #e9ecef}.quick-actions[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:15px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:1040;opacity:0;visibility:hidden;transition:all .3s ease}.overlay.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.teacher-modal[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1060;display:none;overflow:hidden;outline:0}.teacher-modal.show[_ngcontent-%COMP%]{display:block}.teacher-modal-dialog[_ngcontent-%COMP%]{position:relative;width:auto;margin:30px auto;max-width:500px;pointer-events:none}.teacher-modal-lg[_ngcontent-%COMP%]{max-width:800px}.teacher-modal-sm[_ngcontent-%COMP%]{max-width:400px}.teacher-modal-content[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;width:100%;pointer-events:auto;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:12px;outline:0;box-shadow:0 10px 30px #0003}.teacher-modal-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;padding:20px 25px;border-bottom:1px solid #e9ecef;border-top-left-radius:12px;border-top-right-radius:12px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.teacher-modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.teacher-modal-body[_ngcontent-%COMP%]{position:relative;flex:1 1 auto;padding:25px}.teacher-modal-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;padding:20px 25px;border-top:1px solid #e9ecef}.teacher-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;z-index:1050;opacity:0;visibility:hidden;transition:all .3s ease}.teacher-modal-backdrop.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#495057}.subjects-checkboxes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;padding:15px;background-color:#f8f9fa;border-radius:8px;max-height:200px;overflow-y:auto}.form-check[_ngcontent-%COMP%]{margin:5px 0}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#4361ee;border-color:#4361ee}.loading-spinner[_ngcontent-%COMP%]{padding:30px;text-align:center;color:#6c757d}.loading-spinner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#fffc;display:flex;align-items:center;justify-content:center;z-index:2000}@media (max-width: 1200px){.details-sidebar[_ngcontent-%COMP%]{width:450px}}@media (max-width: 992px){.stats-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.header-actions[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}}@media (max-width: 768px){.details-sidebar[_ngcontent-%COMP%]{width:100%;right:-100%}.stats-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters-section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{gap:15px}.teacher-modal-dialog[_ngcontent-%COMP%]{margin:10px;max-width:calc(100% - 20px)}.actions[_ngcontent-%COMP%]{flex-direction:column;gap:5px}.btn-sm[_ngcontent-%COMP%]{padding:8px;font-size:12px}}@media (max-width: 576px){.teachers-management[_ngcontent-%COMP%]{padding:10px}.table-header[_ngcontent-%COMP%]{flex-direction:column;gap:10px;text-align:center}.pagination[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease forwards}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}@media print{.header-actions[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%], .details-sidebar[_ngcontent-%COMP%], .overlay[_ngcontent-%COMP%], .teacher-modal[_ngcontent-%COMP%], .teacher-modal-backdrop[_ngcontent-%COMP%]{display:none!important}.teachers-management[_ngcontent-%COMP%]{padding:0;background:#fff}.table[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #dee2e6}}[dir=rtl][_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:15px;right:auto}[dir=rtl][_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 15px 12px 40px}[dir=rtl][_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .show-more[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scaleX(-1)}"]})};var En=da(Ta());function uG(n,t){n&1&&(a(0,"div",8)(1,"div",9)(2,"span",10),c(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()(),a(4,"p",11),c(5,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628..."),l()())}function cG(n,t){if(n&1&&(a(0,"div",20),D(1,"i",35),a(2,"span"),c(3),l()()),n&2){let e=T(2);h(3),Z("\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631: ",e.student.parentName,"")}}function dG(n,t){if(n&1&&(a(0,"div",20),D(1,"i",36),a(2,"span"),c(3),l()()),n&2){let e=T(2);h(3),Z("\u0647\u0627\u062A\u0641 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631: ",e.student.parentPhone,"")}}function fG(n,t){if(n&1&&(a(0,"div",20),D(1,"i",37),a(2,"span"),c(3),l()()),n&2){let e=T(2);h(3),Z("\u0627\u0644\u0639\u0645\u0631: ",e.calculateAge(e.student.birthDate)," \u0633\u0646\u0629")}}function hG(n,t){if(n&1&&(a(0,"tr")(1,"td")(2,"strong"),c(3,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u064A\u0644\u0627\u062F:"),l()(),a(4,"td"),c(5),Ln(6,"date"),l()()),n&2){let e=T(3);h(5),$(Hi(6,1,e.student.birthDate,"yyyy/MM/dd"))}}function pG(n,t){if(n&1&&(a(0,"tr")(1,"td")(2,"strong"),c(3,"\u0627\u0633\u0645 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631:"),l()(),a(4,"td"),c(5),l()()),n&2){let e=T(3);h(5),$(e.student.parentName)}}function mG(n,t){if(n&1&&(a(0,"tr")(1,"td")(2,"strong"),c(3,"\u0647\u0627\u062A\u0641 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631:"),l()(),a(4,"td"),c(5),l()()),n&2){let e=T(3);h(5),$(e.student.parentPhone)}}function gG(n,t){if(n&1&&(a(0,"div",38)(1,"div",12)(2,"div",39)(3,"h6"),c(4,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0634\u062E\u0635\u064A\u0629"),l(),a(5,"table",40)(6,"tr")(7,"td")(8,"strong"),c(9,"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644:"),l()(),a(10,"td"),c(11),l()(),te(12,hG,7,4,"tr",41),a(13,"tr")(14,"td")(15,"strong"),c(16,"\u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062F\u0631\u0627\u0633\u064A:"),l()(),a(17,"td"),c(18),l()()()(),a(19,"div",39)(20,"h6"),c(21,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631"),l(),a(22,"table",40),te(23,pG,6,1,"tr",41)(24,mG,6,1,"tr",41),l()()()()),n&2){let e=T(2);h(11),$(e.student.name),h(),P("ngIf",e.student.birthDate),h(6),$(e.student.academicYear),h(5),P("ngIf",e.student.parentName),h(),P("ngIf",e.student.parentPhone)}}function _G(n,t){n&1&&(a(0,"div",47),D(1,"i",48),a(2,"p",49),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u062D\u0635\u0635 \u0645\u0633\u062C\u0644\u0629 \u0644\u0647\u0630\u0627 \u0627\u0644\u0637\u0627\u0644\u0628"),l()())}function vG(n,t){if(n&1&&(a(0,"span",55),c(1),l()),n&2){let e=t.$implicit;h(),Jn(" ",e.day," ",e.time," ")}}function xG(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l(),a(7,"td"),te(8,vG,2,2,"span",53),l(),a(9,"td")(10,"span",54),c(11,"\u0646\u0634\u0637"),l()()()),n&2){let e=t.$implicit;h(2),$(e.name),h(2),$(e.subject),h(2),$((e.teacher==null?null:e.teacher.name)||"-"),h(2),P("ngForOf",e.schedule)}}function yG(n,t){if(n&1&&(a(0,"div",50)(1,"table",51)(2,"thead")(3,"tr")(4,"th"),c(5,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629"),l(),a(6,"th"),c(7,"\u0627\u0644\u0645\u0627\u062F\u0629"),l(),a(8,"th"),c(9,"\u0627\u0644\u0645\u0639\u0644\u0645"),l(),a(10,"th"),c(11,"\u0627\u0644\u062C\u062F\u0648\u0644"),l(),a(12,"th"),c(13,"\u0627\u0644\u062D\u0627\u0644\u0629"),l()()(),a(14,"tbody"),te(15,xG,12,4,"tr",52),l()()()),n&2){let e=T(3);h(15),P("ngForOf",e.studentClasses)}}function bG(n,t){if(n&1){let e=Se();a(0,"div",38)(1,"div",42)(2,"button",43),R("click",function(){k(e);let r=T(2);return F(r.openAddToLessonsModal())}),D(3,"i",44),c(4," \u0625\u0636\u0627\u0641\u0629 \u0625\u0644\u0649 \u062D\u0635\u0635 "),l(),D(5,"br")(6,"br"),a(7,"h6"),c(8,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u0633\u062C\u0644\u0629"),l()(),te(9,_G,4,0,"div",45)(10,yG,16,1,"div",46),l()}if(n&2){let e=T(2);h(9),P("ngIf",e.studentClasses.length===0),h(),P("ngIf",e.studentClasses.length>0)}}function CG(n,t){n&1&&(a(0,"div",47),D(1,"i",63),a(2,"p",49),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0645\u0633\u062C\u0644\u0629"),l()())}function wG(n,t){if(n&1){let e=Se();a(0,"tr")(1,"td"),c(2),Ln(3,"date"),l(),a(4,"td"),c(5),l(),a(6,"td"),c(7),l(),a(8,"td"),c(9),l(),a(10,"td")(11,"span"),c(12),l()(),a(13,"td")(14,"div",64)(15,"button",65),R("click",function(){let r=k(e).$implicit,o=T(4);return F(o.printPaymentReceipt(r))}),D(16,"i",66),l(),a(17,"button",67),R("click",function(){let r=k(e).$implicit,o=T(4);return F(o.openEditPaymentModal(r))}),D(18,"i",68),l(),a(19,"button",69),R("click",function(){let r=k(e).$implicit,o=T(4);return F(o.openDeleteConfirmModal(r))}),D(20,"i",70),l()()()()}if(n&2){let e=t.$implicit,i=T(4);h(2),$(Hi(3,7,e.paymentDate,"yyyy/MM/dd")),h(3),Z("",e.amount," \u062F.\u062C"),h(2),$(e.month),h(2),$(i.getPaymentMethodLabel(e.paymentMethod)),h(2),jn(e.status==="paid"?"badge bg-success":"badge bg-warning"),h(),Z(" ",e.status==="paid"?"\u0645\u062F\u0641\u0648\u0639":"\u0645\u0639\u0644\u0642"," ")}}function MG(n,t){if(n&1&&(a(0,"div",50)(1,"table",51)(2,"thead")(3,"tr")(4,"th"),c(5,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),a(6,"th"),c(7,"\u0627\u0644\u0645\u0628\u0644\u063A"),l(),a(8,"th"),c(9,"\u0627\u0644\u0634\u0647\u0631"),l(),a(10,"th"),c(11,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639"),l(),a(12,"th"),c(13,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(14,"th"),c(15,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(16,"tbody"),te(17,wG,21,10,"tr",52),l()()()),n&2){let e=T(3);h(17),P("ngForOf",e.paymentHistory)}}function SG(n,t){if(n&1){let e=Se();a(0,"div",38)(1,"div",56)(2,"button",43),R("click",function(){k(e);let r=T(2);return F(r.openAddPaymentModal())}),D(3,"i",44),c(4," \u0625\u0636\u0627\u0641\u0629 \u062F\u0641\u0639\u0629 \u062C\u062F\u064A\u062F\u0629 "),l(),a(5,"button",57),R("click",function(){k(e);let r=T(2);return F(r.printStudentReport())}),D(6,"i",58),c(7," \u0637\u0628\u0627\u0639\u0629 \u062A\u0642\u0631\u064A\u0631 "),l()(),a(8,"div",2)(9,"div",59)(10,"div",60)(11,"div",15)(12,"h6",18),c(13,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u062F\u0641\u0648\u0639"),l(),a(14,"h3",61),c(15),Ln(16,"number"),l()()()(),a(17,"div",59)(18,"div",60)(19,"div",15)(20,"h6",18),c(21,"\u0639\u062F\u062F \u0627\u0644\u062F\u0641\u0639\u0627\u062A"),l(),a(22,"h3"),c(23),l()()()(),a(24,"div",59)(25,"div",60)(26,"div",15)(27,"h6",18),c(28,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0639\u0644\u0642"),l(),a(29,"h3",62),c(30),Ln(31,"number"),l()()()()(),a(32,"h6"),c(33,"\u0633\u062C\u0644 \u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A"),l(),te(34,CG,4,0,"div",45)(35,MG,18,1,"div",46),l()}if(n&2){let e=T(2);h(15),Z("",eo(16,5,e.getTotalPaid())," \u062F.\u062C"),h(8),$(e.paymentHistory.length),h(7),Z("",eo(31,7,e.getTotalPending())," \u062F.\u062C"),h(4),P("ngIf",e.paymentHistory.length===0),h(),P("ngIf",e.paymentHistory.length>0)}}function EG(n,t){n&1&&(a(0,"div",38)(1,"h6"),c(2,"\u0633\u062C\u0644 \u0627\u0644\u062D\u0636\u0648\u0631"),l(),a(3,"div",47),D(4,"i",71),a(5,"p",49),c(6,"\u0633\u064A\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644 \u0627\u0644\u062D\u0636\u0648\u0631 \u0642\u0631\u064A\u0628\u0627\u064B"),l()()())}function AG(n,t){if(n&1&&(a(0,"option",91),c(1),l()),n&2){let e=t.$implicit;P("value",e),h(),$(e)}}function TG(n,t){if(n&1&&(a(0,"option",91),c(1),l()),n&2){let e=t.$implicit;P("value",e.value),h(),Z(" ",e.label," ")}}function DG(n,t){if(n&1){let e=Se();a(0,"div",72)(1,"div",73)(2,"div",74)(3,"h5",75),c(4,"\u0625\u0636\u0627\u0641\u0629 \u062F\u0641\u0639\u0629 \u062C\u062F\u064A\u062F\u0629"),l(),a(5,"button",76),R("click",function(){k(e);let r=T(2);return F(r.closePaymentModal())}),l()(),a(6,"div",77)(7,"form",78),R("ngSubmit",function(){k(e);let r=T(2);return F(r.addPayment())}),a(8,"div",79)(9,"label",80),c(10,"\u0627\u0644\u0645\u0628\u0644\u063A (\u062F.\u062C)"),l(),a(11,"input",81),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.newPayment.amount,r)||(o.newPayment.amount=r),F(r)}),l()(),a(12,"div",79)(13,"label",80),c(14,"\u0627\u0644\u0634\u0647\u0631"),l(),a(15,"select",82),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.newPayment.month,r)||(o.newPayment.month=r),F(r)}),a(16,"option",83),c(17,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0634\u0647\u0631"),l(),te(18,AG,2,2,"option",84),l()(),a(19,"div",79)(20,"label",80),c(21,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639"),l(),a(22,"select",85),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.newPayment.paymentMethod,r)||(o.newPayment.paymentMethod=r),F(r)}),te(23,TG,2,2,"option",84),l()(),a(24,"div",79)(25,"label",80),c(26,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),a(27,"textarea",86),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.newPayment.notes,r)||(o.newPayment.notes=r),F(r)}),l()(),a(28,"div",87)(29,"button",88),R("click",function(){k(e);let r=T(2);return F(r.closePaymentModal())}),c(30," \u0625\u0644\u063A\u0627\u0621 "),l(),a(31,"button",89),D(32,"i",90),c(33," \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629 "),l()()()()()()}if(n&2){let e=T(2);h(11),xe("ngModel",e.newPayment.amount),h(4),xe("ngModel",e.newPayment.month),h(3),P("ngForOf",e.months),h(4),xe("ngModel",e.newPayment.paymentMethod),h(),P("ngForOf",e.paymentMethods),h(4),xe("ngModel",e.newPayment.notes)}}function PG(n,t){if(n&1&&(a(0,"option",91),c(1),l()),n&2){let e=t.$implicit;P("value",e.value),h(),Z(" ",e.label," ")}}function IG(n,t){if(n&1){let e=Se();a(0,"div",72)(1,"div",73)(2,"div",74)(3,"h5",75),c(4,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629"),l(),a(5,"button",76),R("click",function(){k(e);let r=T(2);return F(r.closeEditPaymentModal())}),l()(),a(6,"div",77)(7,"form",78),R("ngSubmit",function(){k(e);let r=T(2);return F(r.updatePayment())}),a(8,"div",79)(9,"label",80),c(10,"\u0627\u0644\u0645\u0628\u0644\u063A (\u062F.\u062C)"),l(),a(11,"input",81),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.editingPayment.amount,r)||(o.editingPayment.amount=r),F(r)}),l()(),a(12,"div",79)(13,"label",80),c(14,"\u0627\u0644\u0634\u0647\u0631"),l(),a(15,"input",92),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.editingPayment.month,r)||(o.editingPayment.month=r),F(r)}),l()(),a(16,"div",79)(17,"label",80),c(18,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639"),l(),a(19,"select",85),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.editingPayment.paymentMethod,r)||(o.editingPayment.paymentMethod=r),F(r)}),te(20,PG,2,2,"option",84),l()(),a(21,"div",79)(22,"label",80),c(23,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),a(24,"textarea",86),ye("ngModelChange",function(r){k(e);let o=T(2);return be(o.editingPayment.notes,r)||(o.editingPayment.notes=r),F(r)}),l()(),a(25,"div",87)(26,"button",88),R("click",function(){k(e);let r=T(2);return F(r.closeEditPaymentModal())}),c(27," \u0625\u0644\u063A\u0627\u0621 "),l(),a(28,"button",89),D(29,"i",90),c(30," \u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A "),l()()()()()()}if(n&2){let e=T(2);h(11),xe("ngModel",e.editingPayment.amount),h(4),xe("ngModel",e.editingPayment.month),h(4),xe("ngModel",e.editingPayment.paymentMethod),h(),P("ngForOf",e.paymentMethods),h(4),xe("ngModel",e.editingPayment.notes)}}function OG(n,t){if(n&1){let e=Se();a(0,"div",72)(1,"div",73)(2,"div",74)(3,"h5",93),c(4,"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u0630\u0641"),l(),a(5,"button",76),R("click",function(){k(e);let r=T(2);return F(r.closeDeleteConfirmModal())}),l()(),a(6,"div",77)(7,"p"),c(8,"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u062F\u0641\u0639\u0629\u061F"),l(),a(9,"p",18),c(10,"\u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621 \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646\u0647."),l()(),a(11,"div",87)(12,"button",88),R("click",function(){k(e);let r=T(2);return F(r.closeDeleteConfirmModal())}),c(13," \u0625\u0644\u063A\u0627\u0621 "),l(),a(14,"button",94),R("click",function(){k(e);let r=T(2);return F(r.deletePayment())}),D(15,"i",95),c(16," \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629 "),l()()()()}}function RG(n,t){n&1&&(a(0,"div",99)(1,"div",100)(2,"span",10),c(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()(),a(4,"p",101),c(5,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u062A\u0627\u062D\u0629..."),l()())}function kG(n,t){if(n&1&&(a(0,"option",91),c(1),l()),n&2){let e=t.$implicit;P("value",e),h(),$(e)}}function FG(n,t){if(n&1&&(a(0,"option",91),c(1),l()),n&2){let e=t.$implicit;P("value",e.value),h(),$(e.label)}}function NG(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l(),a(7,"td"),c(8),l()()),n&2){let e=t.$implicit,i=T(5);h(2),$(e.name),h(2),$(e.subject),h(2),$(i.getAcademicYearName(e.academicYear)),h(2),$((e.teacher==null?null:e.teacher.name)||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F")}}function LG(n,t){if(n&1&&(a(0,"div",106)(1,"h6",107),c(2,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u0633\u062C\u0644\u0629 \u0628\u0627\u0644\u0641\u0639\u0644"),l(),a(3,"div",108),D(4,"i",109),c(5),l(),a(6,"div",50)(7,"table",110)(8,"thead")(9,"tr")(10,"th"),c(11,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629"),l(),a(12,"th"),c(13,"\u0627\u0644\u0645\u0627\u062F\u0629"),l(),a(14,"th"),c(15,"\u0627\u0644\u0645\u0633\u062A\u0648\u0649"),l(),a(16,"th"),c(17,"\u0627\u0644\u0645\u0639\u0644\u0645"),l()()(),a(18,"tbody"),te(19,NG,9,4,"tr",52),l()()()()),n&2){let e=T(4);h(5),Z(" \u0627\u0644\u0637\u0627\u0644\u0628 \u0645\u0633\u062C\u0644 \u0628\u0627\u0644\u0641\u0639\u0644 \u0641\u064A ",e.alreadyEnrolledClasses.length," \u062D\u0635\u0629 "),h(14),P("ngForOf",e.alreadyEnrolledClasses)}}function VG(n,t){n&1&&(a(0,"div",47),D(1,"i",111),a(2,"p",49),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u062D\u0635\u0635 \u0645\u062A\u0627\u062D\u0629 \u0644\u0644\u062A\u0633\u062C\u064A\u0644"),l()())}function UG(n,t){if(n&1&&(a(0,"span"),c(1),l()),n&2){let e=T().$implicit;h(),Z("(",e.classroom.name,")")}}function BG(n,t){if(n&1&&(a(0,"span",131),c(1),te(2,UG,2,1,"span",41),l()),n&2){let e=t.$implicit;h(),Jn(" ",e.day," ",e.time," "),h(),P("ngIf",e.classroom==null?null:e.classroom.name)}}function zG(n,t){if(n&1&&(a(0,"div"),te(1,BG,3,3,"span",130),l()),n&2){let e=T().$implicit;h(),P("ngForOf",e.schedule)}}function HG(n,t){n&1&&(a(0,"div")(1,"span",132),c(2,"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),l()())}function jG(n,t){n&1&&(a(0,"span",54),D(1,"i",133),c(2," \u0645\u062A\u0648\u0627\u0641\u0642 \u0645\u0639 \u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u0637\u0627\u0644\u0628 "),l())}function WG(n,t){n&1&&(a(0,"span",134),D(1,"i",135),c(2," \u0645\u0633\u062A\u0648\u0649 \u0645\u062E\u062A\u0644\u0641 "),l())}function GG(n,t){if(n&1){let e=Se();a(0,"div",114)(1,"div",115)(2,"div",32)(3,"div",116)(4,"div")(5,"h6",117),c(6),l(),a(7,"p",118),D(8,"i",119),c(9),l(),a(10,"p",118),D(11,"i",120),c(12),l(),a(13,"p",118),D(14,"i",121),c(15),l(),a(16,"p",118),D(17,"i",122),c(18),l(),a(19,"p",118),D(20,"i",123),c(21),Ln(22,"number"),l()(),a(23,"div",124)(24,"input",125),R("change",function(){let r=k(e).$implicit,o=T(5);return F(o.toggleClassSelection(r))}),l()()(),a(25,"div",126)(26,"h6",127),c(27,"\u0627\u0644\u062C\u062F\u0648\u0644:"),l(),te(28,zG,2,1,"div",41)(29,HG,3,0,"div",41),l(),a(30,"div",101),te(31,jG,3,0,"span",128)(32,WG,3,0,"span",129),l()()()()}if(n&2){let e=t.$implicit,i=T(5);h(),Ue("selected",i.isClassSelected(e._id)),h(5),$(e.name),h(3),Z(" ",e.subject," "),h(3),Z(" ",(e.teacher==null?null:e.teacher.name)||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"," "),h(3),Z(" ",(e.students==null?null:e.students.length)||0," \u0637\u0627\u0644\u0628 "),h(3),Z(" ",i.getAcademicYearName(e.academicYear)," "),h(3),Z(" ",eo(22,13,e.price)," \u062F.\u062C/\u0634\u0647\u0631 "),h(3),P("checked",i.isClassSelected(e._id)),h(4),P("ngIf",e.schedule&&e.schedule.length>0),h(),P("ngIf",!e.schedule||e.schedule.length===0),h(2),P("ngIf",i.isLevelCompatible(e)),h(),P("ngIf",!i.isLevelCompatible(e))}}function $G(n,t){if(n&1&&(a(0,"div",112)(1,"div",12),te(2,GG,33,15,"div",113),l()()),n&2){let e=T(4);h(2),P("ngForOf",e.filteredAvailableClasses)}}function YG(n,t){if(n&1&&(a(0,"div",138)(1,"div",139),D(2,"i",140),a(3,"div")(4,"small",141),c(5),l(),D(6,"br"),a(7,"small",18),c(8),Ln(9,"number"),l()()()()),n&2){let e=t.$implicit;h(5),$(e.name),h(3),Z("",eo(9,2,e.price)," \u062F.\u062C/\u0634\u0647\u0631")}}function qG(n,t){if(n&1&&(a(0,"div",136)(1,"h6",79),c(2),l(),a(3,"div",12),te(4,YG,10,4,"div",137),l(),a(5,"div",126)(6,"strong"),c(7,"\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0634\u0647\u0631\u064A:"),l(),c(8),Ln(9,"number"),l()()),n&2){let e=T(4);h(2),Z("\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u062D\u062F\u062F\u0629 (",e.selectedClasses.length,")"),h(2),P("ngForOf",e.selectedClasses),h(4),Z(" ",eo(9,3,e.calculateMonthlyTotal())," \u062F.\u062C ")}}function XG(n,t){if(n&1){let e=Se();a(0,"div")(1,"div",2)(2,"div",39)(3,"label",80),c(4,"\u0641\u0644\u062A\u0631\u0629 \u062D\u0633\u0628 \u0627\u0644\u0645\u0627\u062F\u0629"),l(),a(5,"select",102),ye("ngModelChange",function(r){k(e);let o=T(3);return be(o.filterSubject,r)||(o.filterSubject=r),F(r)}),R("change",function(){k(e);let r=T(3);return F(r.filterAvailableClasses())}),a(6,"option",83),c(7,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0648\u0627\u062F"),l(),te(8,kG,2,2,"option",84),l()(),a(9,"div",39)(10,"label",80),c(11,"\u0641\u0644\u062A\u0631\u0629 \u062D\u0633\u0628 \u0627\u0644\u0645\u0633\u062A\u0648\u0649"),l(),a(12,"select",102),ye("ngModelChange",function(r){k(e);let o=T(3);return be(o.filterLevel,r)||(o.filterLevel=r),F(r)}),R("change",function(){k(e);let r=T(3);return F(r.filterAvailableClasses())}),a(13,"option",83),c(14,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0633\u062A\u0648\u064A\u0627\u062A"),l(),te(15,FG,2,2,"option",84),l()()(),te(16,LG,20,2,"div",103),a(17,"h6",79),c(18,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u062A\u0627\u062D\u0629 \u0644\u0644\u062A\u0633\u062C\u064A\u0644"),l(),te(19,VG,4,0,"div",45)(20,$G,3,1,"div",104)(21,qG,10,5,"div",105),l()}if(n&2){let e=T(3);h(5),xe("ngModel",e.filterSubject),h(3),P("ngForOf",e.subjects),h(4),xe("ngModel",e.filterLevel),h(3),P("ngForOf",e.academicYears),h(),P("ngIf",e.alreadyEnrolledClasses.length>0),h(3),P("ngIf",e.filteredAvailableClasses.length===0),h(),P("ngIf",e.filteredAvailableClasses.length>0),h(),P("ngIf",e.selectedClasses.length>0)}}function ZG(n,t){n&1&&D(0,"span",142)}function JG(n,t){if(n&1){let e=Se();a(0,"div",72)(1,"div",73)(2,"div",74)(3,"h5",75),c(4,"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0637\u0627\u0644\u0628 \u0625\u0644\u0649 \u062D\u0635\u0635"),l(),a(5,"button",76),R("click",function(){k(e);let r=T(2);return F(r.closeAddToLessonsModal())}),l()(),a(6,"div",77),te(7,RG,6,0,"div",96)(8,XG,22,8,"div",41),l(),a(9,"div",87)(10,"button",88),R("click",function(){k(e);let r=T(2);return F(r.closeAddToLessonsModal())}),c(11," \u0625\u0644\u063A\u0627\u0621 "),l(),a(12,"button",97),R("click",function(){k(e);let r=T(2);return F(r.enrollStudentToSelectedClasses())}),te(13,ZG,1,0,"span",98),D(14,"i",90),c(15),l()()()()}if(n&2){let e=T(2);h(7),P("ngIf",e.loadingAvailableClasses),h(),P("ngIf",!e.loadingAvailableClasses),h(4),P("disabled",e.selectedClasses.length===0||e.isEnrolling),h(),P("ngIf",e.isEnrolling),h(2),Z(" \u062A\u0633\u062C\u064A\u0644 \u0641\u064A \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u062D\u062F\u062F\u0629 (",e.selectedClasses.length,") ")}}function KG(n,t){if(n&1){let e=Se();a(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16),c(5),l(),a(6,"h4",17),c(7),l(),a(8,"p",18),c(9),l(),a(10,"div",19)(11,"div",20),D(12,"i",21),a(13,"span"),c(14),l()(),te(15,cG,4,1,"div",22)(16,dG,4,1,"div",22)(17,fG,4,1,"div",22),a(18,"div",20),D(19,"i",23),a(20,"span"),c(21),Ln(22,"date"),l()()(),a(23,"div",24)(24,"span"),c(25),l(),a(26,"span",25),c(27),l()()()()(),a(28,"div",26)(29,"div",27)(30,"div",28)(31,"ul",29)(32,"li",30)(33,"a",31),R("click",function(){k(e);let r=T();return F(r.setActiveTab("info"))}),c(34,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629"),l()(),a(35,"li",30)(36,"a",31),R("click",function(){k(e);let r=T();return F(r.setActiveTab("classes"))}),c(37,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u0633\u062C\u0644\u0629"),l()(),a(38,"li",30)(39,"a",31),R("click",function(){k(e);let r=T();return F(r.setActiveTab("payments"))}),c(40,"\u0633\u062C\u0644 \u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A"),l()(),a(41,"li",30)(42,"a",31),R("click",function(){k(e);let r=T();return F(r.setActiveTab("attendance"))}),c(43,"\u0633\u062C\u0644 \u0627\u0644\u062D\u0636\u0648\u0631"),l()()()(),a(44,"div",32),te(45,gG,25,5,"div",33)(46,bG,11,2,"div",33)(47,SG,36,9,"div",33)(48,EG,7,0,"div",33),l(),te(49,DG,34,6,"div",34)(50,IG,31,5,"div",34)(51,OG,17,0,"div",34)(52,JG,16,5,"div",34),l()()()}if(n&2){let e=T();h(5),Z(" ",e.student.name.charAt(0)," "),h(2),$(e.student.name),h(2),Z("\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062C\u0627\u0645\u0639\u064A: ",e.student.studentId,""),h(5),Z("\u0627\u0644\u0645\u0633\u062A\u0648\u0649: ",e.student.academicYear,""),h(),P("ngIf",e.student.parentName),h(),P("ngIf",e.student.parentPhone),h(),P("ngIf",e.student.birthDate),h(4),Z("\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0633\u062C\u064A\u0644: ",Hi(22,30,e.student.registrationDate,"yyyy/MM/dd"),""),h(3),jn(e.student.hasPaidRegistration?"badge bg-success":"badge bg-danger"),h(),Z(" ",e.student.hasPaidRegistration?"\u0631\u0633\u0648\u0645 \u0645\u062F\u0641\u0648\u0639\u0629":"\u0631\u0633\u0648\u0645 \u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639\u0629"," "),h(),jn(e.student.status==="active"?"badge bg-success":"badge bg-secondary"),h(),Z(" ",e.student.status==="active"?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," "),h(6),Ue("active",e.activeTab==="info"),h(3),Ue("active",e.activeTab==="classes"),h(3),Ue("active",e.activeTab==="payments"),h(3),Ue("active",e.activeTab==="attendance"),h(3),P("ngIf",e.activeTab==="info"),h(),P("ngIf",e.activeTab==="classes"),h(),P("ngIf",e.activeTab==="payments"),h(),P("ngIf",e.activeTab==="attendance"),h(),P("ngIf",e.showPaymentModal),h(),P("ngIf",e.showEditPaymentModal),h(),P("ngIf",e.showDeleteConfirmModal),h(),P("ngIf",e.showAddToLessonsModal)}}var kv=class n{constructor(t,e,i,r,o,s){this.route=t;this.router=e;this.studentsService=i;this.paymentsService=r;this.classesService=o;this.printerService=s}student=null;loading=!1;activeTab="info";studentClasses=[];paymentHistory=[];getStudentId(){return this.student?this.student.id?this.student.id:this.student._id?this.student._id:this.student.studentId||"":""}showPaymentModal=!1;showEditPaymentModal=!1;showDeleteConfirmModal=!1;newPayment={studentId:"",amount:0,month:"",paymentMethod:"cash",notes:""};editingPayment=null;paymentToDelete=null;months=["\u064A\u0646\u0627\u064A\u0631","\u0641\u0628\u0631\u0627\u064A\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064A\u0644","\u0645\u0627\u064A\u0648","\u064A\u0648\u0646\u064A\u0648","\u064A\u0648\u0644\u064A\u0648","\u0623\u063A\u0633\u0637\u0633","\u0633\u0628\u062A\u0645\u0628\u0631","\u0623\u0643\u062A\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062F\u064A\u0633\u0645\u0628\u0631"];paymentMethods=[{value:"cash",label:"\u0646\u0642\u062F\u0627\u064B"},{value:"bank",label:"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A"},{value:"card",label:"\u0628\u0637\u0627\u0642\u0629 \u0625\u0626\u062A\u0645\u0627\u0646"},{value:"check",label:"\u0634\u064A\u0643"},{value:"online",label:"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"},{value:"mobile",label:"\u062F\u0641\u0639 \u0645\u062D\u0645\u0648\u0644"}];academicYears=[{value:"1AS",label:"\u0627\u0644\u0623\u0648\u0644\u0649 \u062B\u0627\u0646\u0648\u064A"},{value:"2AS",label:"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u062B\u0627\u0646\u0648\u064A"},{value:"3AS",label:"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u062B\u0627\u0646\u0648\u064A"},{value:"1MS",label:"\u0627\u0644\u0623\u0648\u0644\u0649 \u0645\u062A\u0648\u0633\u0637"},{value:"2MS",label:"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0645\u062A\u0648\u0633\u0637"},{value:"3MS",label:"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u0645\u062A\u0648\u0633\u0637"},{value:"4MS",label:"\u0627\u0644\u0631\u0627\u0628\u0639\u0629 \u0645\u062A\u0648\u0633\u0637"},{value:"1AP",label:"\u0627\u0644\u0623\u0648\u0644\u0649 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"2AP",label:"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"3AP",label:"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"4AP",label:"\u0627\u0644\u0631\u0627\u0628\u0639\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"5AP",label:"\u0627\u0644\u062E\u0627\u0645\u0633\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"}];showAddToLessonsModal=!1;availableClasses=[];filteredAvailableClasses=[];alreadyEnrolledClasses=[];selectedClasses=[];loadingAvailableClasses=!1;isEnrolling=!1;filterSubject="";filterLevel="";subjects=["\u0631\u064A\u0627\u0636\u064A\u0627\u062A","\u0641\u064A\u0632\u064A\u0627\u0621","\u0639\u0644\u0648\u0645","\u0644\u063A\u0629 \u0639\u0631\u0628\u064A\u0629","\u0644\u063A\u0629 \u0641\u0631\u0646\u0633\u064A\u0629","\u0644\u063A\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629","\u062A\u0627\u0631\u064A\u062E","\u062C\u063A\u0631\u0627\u0641\u064A\u0627","\u0641\u0644\u0633\u0641\u0629","\u0625\u0639\u0644\u0627\u0645 \u0622\u0644\u064A"];ngOnInit(){this.loadStudentDetails()}loadStudentDetails(){let t=this.route.snapshot.paramMap.get("id");if(!t){this.router.navigate(["/home/students-management"]);return}this.loading=!0,this.studentsService.getStudentById(t).subscribe({next:e=>{this.student=e,this.newPayment.studentId=this.getStudentId(),this.loadStudentClasses(t),this.loadPaymentHistory(t),this.loading=!1},error:e=>{console.error("Error loading student details:",e),En.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628","error"),this.router.navigate(["/home/students-management"])}})}loadStudentClasses(t){this.studentsService.getStudentClasses(t).subscribe({next:e=>{this.studentClasses=e},error:e=>{console.error("Error loading student classes:",e),this.studentClasses=[]}})}loadPaymentHistory(t){this.paymentsService.getStudentPayments(t).subscribe({next:e=>{this.paymentHistory=e},error:e=>{console.error("Error loading payment history:",e),this.paymentHistory=[]}})}setActiveTab(t){this.activeTab=t}goBack(){this.router.navigate(["/home/students-management"])}openAddPaymentModal(){this.student&&(this.newPayment={studentId:this.getStudentId(),amount:0,month:this.getCurrentMonth(),paymentMethod:"cash",notes:""},this.showPaymentModal=!0)}closePaymentModal(){this.showPaymentModal=!1,this.newPayment={studentId:"",amount:0,month:"",paymentMethod:"cash",notes:""}}openEditPaymentModal(t){this.editingPayment=Ie({},t),this.showEditPaymentModal=!0}closeEditPaymentModal(){this.showEditPaymentModal=!1,this.editingPayment=null}openDeleteConfirmModal(t){this.paymentToDelete=t,this.showDeleteConfirmModal=!0}closeDeleteConfirmModal(){this.showDeleteConfirmModal=!1,this.paymentToDelete=null}addPayment(){if(!this.student)return;if(!this.newPayment.amount||this.newPayment.amount<=0){En.default.fire("\u062E\u0637\u0623","\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0645\u0628\u0644\u063A \u0635\u062D\u064A\u062D","error");return}if(!this.newPayment.month){En.default.fire("\u062E\u0637\u0623","\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0634\u0647\u0631","error");return}let t=yt(Ie({},this.newPayment),{studentName:this.student.name,studentId:this.getStudentId(),status:"paid",paymentDate:new Date().toISOString()});En.default.fire({title:"\u062C\u0627\u0631\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629...",allowOutsideClick:!1,didOpen:()=>{En.default.showLoading()}}),this.paymentsService.recordPayment(t).subscribe({next:e=>{En.default.fire({icon:"success",title:"\u0646\u062C\u0627\u062D",text:"\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D",timer:1500,showConfirmButton:!1}),this.closePaymentModal();let i=this.route.snapshot.paramMap.get("id");i&&this.loadPaymentHistory(i),this.student&&(this.student.hasPaidRegistration=!0)},error:e=>{console.error("Error recording payment:",e),En.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629","error")}})}updatePayment(){if(!(!this.editingPayment||!this.student)){if(!this.editingPayment.amount||this.editingPayment.amount<=0){En.default.fire("\u062E\u0637\u0623","\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0645\u0628\u0644\u063A \u0635\u062D\u064A\u062D","error");return}En.default.fire({title:"\u062C\u0627\u0631\u064A \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062F\u0641\u0639\u0629...",allowOutsideClick:!1,didOpen:()=>{En.default.showLoading()}}),this.paymentsService.updatePayment(this.editingPayment.id,this.editingPayment).subscribe({next:t=>{En.default.fire({icon:"success",title:"\u0646\u062C\u0627\u062D",text:"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D",timer:1500,showConfirmButton:!1}),this.closeEditPaymentModal();let e=this.route.snapshot.paramMap.get("id");e&&this.loadPaymentHistory(e)},error:t=>{console.error("Error updating payment:",t),En.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062F\u0641\u0639\u0629","error")}})}}deletePayment(){!this.paymentToDelete||!this.student||(En.default.fire({title:"\u062C\u0627\u0631\u064A \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629...",allowOutsideClick:!1,didOpen:()=>{En.default.showLoading()}}),this.paymentsService.deletePayment(this.paymentToDelete.id).subscribe({next:()=>{En.default.fire({icon:"success",title:"\u0646\u062C\u0627\u062D",text:"\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D",timer:1500,showConfirmButton:!1}),this.closeDeleteConfirmModal();let t=this.route.snapshot.paramMap.get("id");t&&this.loadPaymentHistory(t)},error:t=>{console.error("Error deleting payment:",t),En.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629","error")}}))}printPaymentReceipt(t){return _n(this,null,function*(){if(this.student)try{En.default.fire({title:"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0636\u064A\u0631 \u0644\u0644\u0637\u0628\u0627\u0639\u0629...",allowOutsideClick:!1,didOpen:()=>{En.default.showLoading()}});let e={receiptNumber:`PAY-${t.id||Date.now().toString().slice(-8)}`,date:new Date(t.paymentDate).toLocaleDateString("ar-EG"),time:new Date(t.paymentDate).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}),studentName:this.student.name,studentId:this.student.studentId,className:this.getStudentClassesNames(),month:t.month,amount:t.amount,paymentMethod:t.paymentMethod,academicYear:this.getAcademicYearName(this.student.academicYear),parentPhone:this.student.parentPhone||"",notes:t.notes||"\u062A\u0645 \u0633\u062F\u0627\u062F \u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u0634\u0647\u0631\u064A \u0628\u0646\u062C\u0627\u062D. \u0646\u062A\u0645\u0646\u0649 \u0644\u0644\u0637\u0627\u0644\u0628 \u0627\u0644\u062A\u0648\u0641\u064A\u0642 \u0648\u0627\u0644\u0646\u062C\u0627\u062D."};(yield this.printerService.printMonthlyPaymentReceipt(e))||En.default.fire("\u062A\u062D\u0630\u064A\u0631","\u0641\u0634\u0644 \u0641\u064A \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629","warning")}catch(e){console.error("Error printing receipt:",e),En.default.fire("\u062E\u0637\u0623","\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u0637\u0628\u0627\u0639\u0629","error")}})}printStudentReport(){return _n(this,null,function*(){if(this.student)try{En.default.fire({title:"\u062C\u0627\u0631\u064A \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062A\u0642\u0631\u064A\u0631...",allowOutsideClick:!1,didOpen:()=>{En.default.showLoading()}});let t=this.paymentHistory.filter(s=>s.status==="paid").reduce((s,u)=>s+u.amount,0),e={attendanceRate:85,present:17,absent:3,late:2},i={totalPaid:t,pending:this.calculatePendingAmount(t)},r={name:this.student.name,studentId:this.student.studentId,academicYear:this.student.academicYear,parentPhone:this.student.parentPhone};(yield this.printerService.printStudentMonthlyReport(r,e,i))||En.default.fire("\u062A\u062D\u0630\u064A\u0631","\u0641\u0634\u0644 \u0641\u064A \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629","warning")}catch(t){console.error("Error printing report:",t),En.default.fire("\u062E\u0637\u0623","\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062A\u0642\u0631\u064A\u0631","error")}})}getCurrentMonth(){let e=new Date().getMonth();return this.months[e]}getPaymentMethodLabel(t){let e=this.paymentMethods.find(i=>i.value===t);return e?e.label:t}getAcademicYearName(t){let e=this.academicYears.find(i=>i.value===t);return e?e.label:t}getPaymentStatus(t){return t.hasPaidRegistration?"\u0645\u062F\u0641\u0648\u0639":"\u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639"}getPaymentStatusClass(t){return t.hasPaidRegistration?"status-paid":"status-unpaid"}calculateAge(t){if(!t)return 0;let e=new Date(t),i=new Date,r=i.getFullYear()-e.getFullYear(),o=i.getMonth()-e.getMonth();return(o<0||o===0&&i.getDate()<e.getDate())&&r--,r}getStudentClassesNames(){return this.studentClasses.length===0?"\u0644\u0627 \u062A\u0648\u062C\u062F \u062D\u0635\u0635 \u0645\u0633\u062C\u0644\u0629":this.studentClasses.map(e=>e.name).join("\u060C ")}calculatePendingAmount(t){let r=this.paymentHistory.length*5e3;return Math.max(0,r-t)}editStudent(){if(this.student){let t=this.getStudentId();if(t)this.router.navigate([`/home/students-management/edit/${t}`]);else{let e=this.route.snapshot.paramMap.get("id");e&&this.router.navigate([`/home/students-management/edit/${e}`])}}}getTotalPaid(){return this.paymentHistory.filter(t=>t.status==="paid").reduce((t,e)=>t+e.amount,0)}getTotalPending(){return this.paymentHistory.filter(t=>t.status!=="paid").reduce((t,e)=>t+e.amount,0)}openAddToLessonsModal(){this.student&&(this.showAddToLessonsModal=!0,this.selectedClasses=[],this.filterSubject="",this.filterLevel="",this.loadAvailableClasses())}closeAddToLessonsModal(){this.showAddToLessonsModal=!1,this.availableClasses=[],this.filteredAvailableClasses=[],this.alreadyEnrolledClasses=[],this.selectedClasses=[]}loadAvailableClasses(){this.student&&(this.loadingAvailableClasses=!0,this.classesService.getAvailableClasses().subscribe({next:t=>{this.availableClasses=t,this.alreadyEnrolledClasses=this.studentClasses;let e=this.alreadyEnrolledClasses.map(i=>i._id);this.availableClasses=t.filter(i=>!e.includes(i._id)),this.filterAvailableClasses(),this.loadingAvailableClasses=!1},error:t=>{console.error("Error loading available classes:",t),En.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u062A\u0627\u062D\u0629","error"),this.loadingAvailableClasses=!1}}))}filterAvailableClasses(){this.filteredAvailableClasses=this.availableClasses.filter(t=>!(this.filterSubject&&t.subject!==this.filterSubject||this.filterLevel&&t.academicYear!==this.filterLevel))}isLevelCompatible(t){return!this.student||!t.academicYear||!t.academicYear||t.academicYear==="NS"||t.academicYear==="\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"?!0:t.academicYear===this.student.academicYear}toggleClassSelection(t){let e=this.selectedClasses.findIndex(i=>i._id===t._id);e>-1?this.selectedClasses.splice(e,1):this.selectedClasses.push(t)}isClassSelected(t){return this.selectedClasses.some(e=>e._id===t)}calculateMonthlyTotal(){return this.selectedClasses.reduce((t,e)=>t+(e.price||0),0)}enrollStudentToSelectedClasses(){if(!this.student||this.selectedClasses.length===0)return;let t=this.selectedClasses.map(i=>i._id),e=this.getStudentId();En.default.fire({title:"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062A\u0633\u062C\u064A\u0644",html:`
        <p>\u0647\u0644 \u062A\u0631\u064A\u062F \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628 \u0641\u064A ${this.selectedClasses.length} \u062D\u0635\u0629\u061F</p>
        <p><strong>\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0634\u0647\u0631\u064A:</strong> ${this.calculateMonthlyTotal().toLocaleString()} \u062F.\u062C</p>
        <div class="text-start">
          ${this.selectedClasses.map(i=>`<div class="mb-1">\u2022 ${i.name} - ${i.price.toLocaleString()} \u062F.\u062C/\u0634\u0647\u0631</div>`).join("")}
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645\u060C \u0633\u062C\u0644 \u0627\u0644\u0622\u0646",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then(i=>{i.isConfirmed&&this.enrollStudent(e,t)})}enrollStudent(t,e){this.isEnrolling=!0,this.studentsService.enrollStudentMultiple(t,{classIds:e}).subscribe({next:i=>{En.default.fire({icon:"success",title:"\u062A\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",html:`
            <p>\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628 \u0641\u064A ${i.results.successful.length} \u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D</p>
            ${i.results.failed.length>0?`<p class="text-warning">\u0641\u0634\u0644 \u0627\u0644\u062A\u0633\u062C\u064A\u0644 \u0641\u064A ${i.results.failed.length} \u062D\u0635\u0629</p>`:""}
          `,timer:3e3,showConfirmButton:!1}),this.loadStudentClasses(this.route.snapshot.paramMap.get("id")||""),this.closeAddToLessonsModal(),this.isEnrolling=!1},error:i=>{console.error("Error enrolling student:",i),En.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628 \u0641\u064A \u0627\u0644\u062D\u0635\u0635","error"),this.isEnrolling=!1}})}static \u0275fac=function(e){return new(e||n)(Te(Io),Te(Si),Te(oo),Te(Ia),Te(Da),Te(ld))};static \u0275cmp=vn({type:n,selectors:[["app-student-details"]],decls:9,vars:2,consts:[[1,"student-details"],[1,"container-fluid"],[1,"row","mb-4"],[1,"col"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-arrow-right","me-1"],["class","text-center py-5",4,"ngIf"],["class","row",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"mt-3","text-muted"],[1,"row"],[1,"col-lg-4","mb-4"],[1,"card","student-profile-card"],[1,"card-body","text-center"],[1,"avatar-lg","bg-primary","text-white","rounded-circle","mx-auto","mb-3","d-flex","align-items-center","justify-content-center"],[1,"card-title"],[1,"text-muted"],[1,"student-info"],[1,"info-item"],[1,"bi","bi-book","me-2"],["class","info-item",4,"ngIf"],[1,"bi","bi-calendar-check","me-2"],[1,"status-badges","mt-4"],[1,"ms-2"],[1,"col-lg-8"],[1,"card"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"card-body"],["class","tab-content",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"bi","bi-person","me-2"],[1,"bi","bi-phone","me-2"],[1,"bi","bi-calendar","me-2"],[1,"tab-content"],[1,"col-md-6"],[1,"table","table-borderless"],[4,"ngIf"],[1,"add-to-lesson"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-lg","me-1"],["class","text-center py-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"text-center","py-4"],[1,"bi","bi-book","display-1","text-muted"],[1,"text-muted","mt-3"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["class","badge bg-light text-dark me-1",4,"ngFor","ngForOf"],[1,"badge","bg-success"],[1,"badge","bg-light","text-dark","me-1"],[1,"payment-actions-header","mb-4"],[1,"btn","btn-outline-success","ms-2",3,"click"],[1,"bi","bi-printer","me-1"],[1,"col-md-4"],[1,"card","bg-light"],[1,"text-success"],[1,"text-danger"],[1,"bi","bi-credit-card","display-1","text-muted"],["role","group",1,"btn-group","btn-group-sm"],["title","\u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0625\u064A\u0635\u0627\u0644",1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-printer"],["title","\u062A\u0639\u062F\u064A\u0644",1,"btn","btn-outline-warning",3,"click"],[1,"bi","bi-pencil"],["title","\u062D\u0630\u0641",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"bi","bi-calendar-check","display-1","text-muted"],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label"],["type","number","name","amount","required","","min","0","step","100",1,"form-control",3,"ngModelChange","ngModel"],["name","month","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","paymentMethod","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","notes","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"bi","bi-check-circle","me-2"],[3,"value"],["type","text","name","month","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-title","text-danger"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash","me-2"],["class","text-center py-3",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2","role","status",4,"ngIf"],[1,"text-center","py-3"],["role","status",1,"spinner-border","text-primary"],[1,"mt-2"],[1,"form-control",3,"ngModelChange","change","ngModel"],["class","mb-4",4,"ngIf"],["class","available-classes-list",4,"ngIf"],["class","selected-classes-summary mt-4 p-3 bg-light rounded",4,"ngIf"],[1,"mb-4"],[1,"text-primary"],[1,"alert","alert-info"],[1,"bi","bi-info-circle","me-2"],[1,"table","table-sm","table-bordered"],[1,"bi","bi-book","display-4","text-muted"],[1,"available-classes-list"],["class","col-md-6 mb-3",4,"ngFor","ngForOf"],[1,"col-md-6","mb-3"],[1,"card","class-card"],[1,"d-flex","justify-content-between","align-items-start"],[1,"card-title","mb-1"],[1,"text-muted","small","mb-1"],[1,"bi","bi-book","me-1"],[1,"bi","bi-person","me-1"],[1,"bi","bi-people","me-1"],[1,"bi","bi-calendar","me-1"],[1,"bi","bi-cash-coin","me-1"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","checked"],[1,"mt-3"],[1,"small","fw-bold"],["class","badge bg-success",4,"ngIf"],["class","badge bg-warning",4,"ngIf"],["class","badge bg-light text-dark me-1 mb-1",4,"ngFor","ngForOf"],[1,"badge","bg-light","text-dark","me-1","mb-1"],[1,"badge","bg-secondary"],[1,"bi","bi-check-circle","me-1"],[1,"badge","bg-warning"],[1,"bi","bi-exclamation-triangle","me-1"],[1,"selected-classes-summary","mt-4","p-3","bg-light","rounded"],["class","col-md-4 mb-2",4,"ngFor","ngForOf"],[1,"col-md-4","mb-2"],[1,"d-flex","align-items-center","bg-white","p-2","rounded"],[1,"bi","bi-check-circle","text-success","me-2"],[1,"fw-bold"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),R("click",function(){return i.goBack()}),D(5,"i",5),c(6," \u0627\u0644\u0639\u0648\u062F\u0629 \u0644\u0644\u0642\u0627\u0626\u0645\u0629 "),l()()(),te(7,uG,6,0,"div",6)(8,KG,53,33,"div",7),l()()),e&2&&(h(7),P("ngIf",i.loading),h(),P("ngIf",!i.loading&&i.student))},dependencies:[bn,ii,Wn,x0,Ao,oi,xr,Ii,Oi,Yn,Nr,xi,ri,vr,Lr,Ro,Kn,Oo],styles:['.student-details[_ngcontent-%COMP%]{direction:rtl;font-family:Segoe UI,Tajawal,sans-serif;color:#2d3748;padding:20px;background:linear-gradient(135deg,#f8fafc,#f1f5f9);min-height:100vh}.container-fluid[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:12px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);display:inline-flex;align-items:center;gap:8px;border:2px solid transparent;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff1a;transform:translate(-50%,-50%);transition:width .6s,height .6s}.btn[_ngcontent-%COMP%]:hover:before{width:300px;height:300px}.btn-outline-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8fafc);color:#4b5563;border:2px solid #e5e7eb;box-shadow:0 2px 4px #0000000d}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f9fafb,#f3f4f6);color:#374151;border-color:#d1d5db;box-shadow:0 4px 12px #00000014;transform:translateY(-1px)}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:100px 20px}.spinner-border[_ngcontent-%COMP%]{width:4rem;height:4rem;border-width:.3em;color:#3b82f6;animation:_ngcontent-%COMP%_spin 1s linear infinite;border-style:solid;border-right-color:transparent;border-radius:50%}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.spinner-border.text-primary[_ngcontent-%COMP%]{border-color:#3b82f6;border-right-color:transparent}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.student-profile-card[_ngcontent-%COMP%]{border-radius:20px;overflow:hidden;box-shadow:0 10px 30px #00000014;border:none;height:100%;background:linear-gradient(135deg,#fff,#fafcff);transition:transform .3s ease,box-shadow .3s ease}.student-profile-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 20px 40px #0000001f}.card-body[_ngcontent-%COMP%]{padding:30px}.avatar-lg[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;display:flex;align-items:center;justify-content:center;font-size:3rem;font-weight:700;margin:0 auto 25px;box-shadow:0 8px 20px #667eea4d;position:relative;overflow:hidden}.avatar-lg[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,.1) 50%,transparent 70%);animation:_ngcontent-%COMP%_shine 3s infinite linear}@keyframes _ngcontent-%COMP%_shine{0%{transform:translate(-100%) translateY(-100%) rotate(45deg)}to{transform:translate(100%) translateY(100%) rotate(45deg)}}.card-title[_ngcontent-%COMP%]{text-align:center;color:#1e293b;margin-bottom:10px;font-size:1.8rem;font-weight:700}.student-id[_ngcontent-%COMP%]{text-align:center;color:#64748b;margin-bottom:25px;font-size:1rem;padding:8px 16px;background:#f1f5f9;border-radius:20px;display:inline-block}.student-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px;margin-bottom:25px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:#475569;padding:12px;background:#f8fafc;border-radius:12px;transition:all .3s ease;border:1px solid transparent}.info-item[_ngcontent-%COMP%]:hover{background:#fff;border-color:#e2e8f0;transform:translate(-5px);box-shadow:0 4px 8px #0000000d}.info-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;width:20px;font-size:1.2rem}.status-badges[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-top:30px;padding-top:20px;border-top:2px solid #f1f5f9}.badge[_ngcontent-%COMP%]{padding:10px 20px;border-radius:25px;font-size:.9rem;font-weight:600;letter-spacing:.3px;text-transform:uppercase;box-shadow:0 4px 6px #0000000d;transition:all .3s ease}.badge[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 12px #0000001a}.bg-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.bg-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff}.bg-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#94a3b8,#64748b);color:#fff}.bg-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.bg-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}.main-content-card[_ngcontent-%COMP%]{border-radius:20px;overflow:hidden;box-shadow:0 10px 30px #00000014;border:none;height:100%;background:linear-gradient(135deg,#fff,#fafcff)}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8faff,#f0f4ff);border-bottom:2px solid #e0e7ff;padding:0;border-radius:20px 20px 0 0!important}.nav-tabs[_ngcontent-%COMP%]{border:none;display:flex;gap:2px;padding:0 10px}.nav-item[_ngcontent-%COMP%]{flex:1;text-align:center;border-bottom:3px solid transparent;transition:all .3s cubic-bezier(.4,0,.2,1)}.nav-link[_ngcontent-%COMP%]{padding:20px;border:none;border-radius:0;color:#64748b;font-weight:600;display:flex;align-items:center;justify-content:center;gap:10px;transition:all .3s ease;cursor:pointer;position:relative;overflow:hidden;background:transparent}.nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:0;left:0;width:0;height:3px;background:linear-gradient(135deg,#667eea,#764ba2);transition:width .3s ease}.nav-link[_ngcontent-%COMP%]:hover{color:#4f46e5;background:#6366f10d}.nav-link[_ngcontent-%COMP%]:hover:before{width:100%}.nav-link.active[_ngcontent-%COMP%]{background:#fff;color:#4f46e5;border-bottom:3px solid #4f46e5;box-shadow:0 -4px 20px #4f46e51a}.nav-link.active[_ngcontent-%COMP%]:before{width:100%}.tab-content[_ngcontent-%COMP%]{padding:30px;animation:_ngcontent-%COMP%_fadeIn .5s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.table-borderless[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 20px;border:none;color:#475569;border-bottom:1px solid #f1f5f9}.table-borderless[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.table-borderless[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:700;color:#1e293b;width:180px;background:#f8fafc;border-radius:10px 0 0 10px}.table-borderless[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-radius:0 10px 10px 0}.add-to-lesson[_ngcontent-%COMP%]{text-align:right;margin-bottom:25px}.add-to-lesson[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:14px 28px;border-radius:15px;font-weight:700;font-size:1.1rem;cursor:pointer;transition:all .4s cubic-bezier(.4,0,.2,1);display:inline-flex;align-items:center;gap:12px;border:none;background:linear-gradient(135deg,#008980,#00a896);color:#fff;box-shadow:0 6px 20px #0089804d;position:relative;overflow:hidden}.add-to-lesson[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .6s}.add-to-lesson[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#00a896,#008980);transform:translateY(-3px);box-shadow:0 12px 30px #00898066}.add-to-lesson[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:before{left:100%}.add-to-lesson[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 4px 15px #0089804d}.classes-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;color:#1e293b;font-weight:700}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease;border-radius:10px;overflow:hidden}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f8faff,#f0f4ff);transform:translate(5px);box-shadow:0 8px 20px #00000014}.teacher-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.schedule-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 12px;background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border-radius:8px;font-size:.85rem;margin:4px;color:#0369a1;border:1px solid #bae6fd;font-weight:500}.payment-actions-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:15px;margin-bottom:30px;box-shadow:0 4px 12px #0000000d}.payment-stats[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center}.d-flex[_ngcontent-%COMP%]{display:flex}.align-items-center[_ngcontent-%COMP%]{align-items:center}.gap-2[_ngcontent-%COMP%]{gap:.5rem}.form-control[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e2e8f0;border-radius:12px;font-size:1rem;transition:all .3s ease;background:#fff;box-shadow:0 2px 4px #00000005}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:#fff;box-shadow:0 0 0 4px #667eea26;transform:translateY(-1px)}.form-control-sm[_ngcontent-%COMP%]{padding:10px 14px;font-size:.95rem}.card.bg-light[_ngcontent-%COMP%]{border:none;border-radius:15px;overflow:hidden;box-shadow:0 8px 20px #0000000f;transition:all .3s ease;background:linear-gradient(135deg,#fff,#fafcff);border:1px solid #f1f5f9}.card.bg-light[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 30px #0000001a}.card.bg-light[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:25px}.card.bg-light[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#64748b;font-size:.95rem;font-weight:600;margin-bottom:10px;text-transform:uppercase;letter-spacing:.5px}.card.bg-light[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1e293b;font-weight:800;margin:0;font-size:2.2rem}.card.bg-light.text-success[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.card.bg-light.text-danger[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 -15px}.col-lg-4[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%]{padding:0 15px}.col-lg-4[_ngcontent-%COMP%]{flex:0 0 33.333333%;max-width:33.333333%}.col-lg-8[_ngcontent-%COMP%]{flex:0 0 66.666667%;max-width:66.666667%}.mb-4[_ngcontent-%COMP%]{margin-bottom:2rem}.mt-3[_ngcontent-%COMP%]{margin-top:1rem}.mt-2[_ngcontent-%COMP%]{margin-top:.5rem}.text-muted[_ngcontent-%COMP%]{color:#94a3b8}.small[_ngcontent-%COMP%]{font-size:.9rem}.text-success[_ngcontent-%COMP%]{color:#10b981}.text-danger[_ngcontent-%COMP%]{color:#ef4444}.text-warning[_ngcontent-%COMP%]{color:#f59e0b}.progress[_ngcontent-%COMP%]{height:24px;background:linear-gradient(135deg,#f1f5f9,#e2e8f0);border-radius:12px;overflow:hidden;box-shadow:inset 0 2px 4px #0000000d}.progress-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(135deg,#667eea,#764ba2);transition:width .6s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;justify-content:center;color:#fff;font-size:.85rem;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.1);position:relative;overflow:hidden}.progress-bar[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);animation:_ngcontent-%COMP%_progressShine 2s infinite linear}@keyframes _ngcontent-%COMP%_progressShine{0%{left:-100%}to{left:100%}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1060;direction:rtl;backdrop-filter:blur(5px);animation:_ngcontent-%COMP%_overlayFade .3s ease}@keyframes _ngcontent-%COMP%_overlayFade{0%{opacity:0}to{opacity:1}}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafcff);border-radius:24px;max-width:900px;width:95%;max-height:90vh;overflow:hidden;box-shadow:0 30px 60px #00000040;animation:_ngcontent-%COMP%_modalSlideUp .4s cubic-bezier(.4,0,.2,1);border:1px solid rgba(255,255,255,.1)}@keyframes _ngcontent-%COMP%_modalSlideUp{0%{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[_ngcontent-%COMP%]{padding:25px 30px;border-bottom:2px solid #f1f5f9;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(135deg,#f8faff,#f0f4ff)}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:800;color:#1e293b;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.8rem;cursor:pointer;color:#94a3b8;padding:8px;border-radius:50%;transition:all .3s ease;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.btn-close[_ngcontent-%COMP%]:hover{color:#ef4444;background:#ef44441a;transform:rotate(90deg)}.modal-body[_ngcontent-%COMP%]{padding:30px;max-height:60vh;overflow-y:auto}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:4px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:4px}.modal-footer[_ngcontent-%COMP%]{padding:25px 30px;border-top:2px solid #f1f5f9;display:flex;justify-content:flex-end;gap:15px;background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.form-label[_ngcontent-%COMP%]{font-weight:700;color:#374151;margin-bottom:10px;display:block;font-size:.95rem}.available-classes-list[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto;padding:15px;border-radius:15px;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border:2px solid #e2e8f0}.class-card[_ngcontent-%COMP%]{border:2px solid transparent;transition:all .4s cubic-bezier(.4,0,.2,1);cursor:pointer;height:100%;border-radius:20px;overflow:hidden;background:linear-gradient(135deg,#fff,#fafcff);box-shadow:0 6px 15px #0000000d;position:relative;z-index:1}.class-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(135deg,#667eea,#764ba2);opacity:0;transition:opacity .3s ease;z-index:2}.class-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 20px 40px #0000001f}.class-card[_ngcontent-%COMP%]:hover:before{opacity:1}.class-card.selected[_ngcontent-%COMP%]{border-color:#3b82f6;background:linear-gradient(135deg,#f0f9ff,#e0f2fe);box-shadow:0 15px 30px #3b82f633}.class-card.selected[_ngcontent-%COMP%]:before{opacity:1;background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.class-card[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:24px;height:24px;cursor:pointer;border-radius:8px;border:2px solid #cbd5e1;transition:all .3s ease;position:relative}.class-card[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background:linear-gradient(135deg,#3b82f6,#1d4ed8);border-color:transparent;box-shadow:0 4px 12px #3b82f666}.class-card[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked:after{content:"\\2713";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-weight:700;font-size:14px}.selected-classes-summary[_ngcontent-%COMP%]{border:2px solid #3b82f6;background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border-radius:20px;padding:25px;margin-top:30px;box-shadow:0 10px 25px #3b82f626;animation:_ngcontent-%COMP%_slideUp .5s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.selected-classes-summary[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#1e40af;font-weight:700;font-size:1.1rem;margin-bottom:20px;display:flex;align-items:center;gap:10px}.selected-classes-summary[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]:before{content:"\\2713";background:#3b82f6;color:#fff;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700}.filter-controls[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);padding:20px;border-radius:15px;margin-bottom:25px;border:2px solid #e2e8f0}.filter-controls[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background:#fff;border-color:#d1d5db}.filter-controls[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 4px #3b82f626}.already-enrolled-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border-radius:15px;padding:25px;margin-bottom:30px;border:2px solid #bae6fd}.already-enrolled-section[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#0369a1;font-weight:700;margin-bottom:15px;display:flex;align-items:center;gap:10px}.already-enrolled-section[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#0ea5e9}.alert-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border:2px solid #7dd3fc;border-radius:12px;color:#0369a1;font-weight:500}.alert-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#0ea5e9;font-size:1.2rem}.class-info-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:10px;font-size:.85rem;color:#475569;margin:4px;border:1px solid #e2e8f0;transition:all .3s ease}.class-info-badge[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f1f5f9,#e2e8f0);transform:translateY(-2px)}.compatibility-badge[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;font-size:.85rem;font-weight:600;margin-top:10px;display:inline-flex;align-items:center;gap:6px;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #10b98166}70%{box-shadow:0 0 0 10px #10b98100}to{box-shadow:0 0 #10b98100}}.bg-success.compatibility-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 4px 12px #10b9814d}.bg-warning.compatibility-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;box-shadow:0 4px 12px #f59e0b4d}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#94a3b8}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#cbd5e1;margin-bottom:20px;opacity:.7}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#64748b}.text-center.py-3[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-width:.25em}.text-center.py-3[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin-top:15px;font-size:1rem}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:14px 28px;font-weight:700;border-radius:15px;transition:all .4s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#fff3;transform:translate(-50%,-50%);transition:width .6s,height .6s}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:before{width:400px;height:400px}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f1f5f9,#e2e8f0);color:#475569;border:2px solid #cbd5e1}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e2e8f0,#cbd5e1);color:#1e293b;transform:translateY(-3px);box-shadow:0 8px 25px #0000001a}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;box-shadow:0 8px 25px #3b82f64d}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#1d4ed8,#1e40af);transform:translateY(-3px);box-shadow:0 12px 35px #3b82f666}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 1200px){.col-lg-4[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}.modal-content[_ngcontent-%COMP%]{max-width:95%}}@media (max-width: 768px){.student-details[_ngcontent-%COMP%]{padding:15px}.modal-content[_ngcontent-%COMP%]{width:98%;margin:10px;max-height:95vh}.modal-header[_ngcontent-%COMP%]{padding:20px}.modal-body[_ngcontent-%COMP%]{padding:20px;max-height:70vh}.modal-footer[_ngcontent-%COMP%]{padding:20px;flex-direction:column}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.nav-tabs[_ngcontent-%COMP%]{flex-direction:column;gap:5px}.nav-item[_ngcontent-%COMP%]{flex:0 0 auto}.nav-link[_ngcontent-%COMP%]{padding:15px;justify-content:flex-start}.payment-actions-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.payment-actions-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.filter-controls[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.class-card[_ngcontent-%COMP%]{margin-bottom:15px}.available-classes-list[_ngcontent-%COMP%]{max-height:400px}.avatar-lg[_ngcontent-%COMP%]{width:100px;height:100px;font-size:2.5rem}.card-title[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 576px){.student-details[_ngcontent-%COMP%]{padding:10px}.modal-content[_ngcontent-%COMP%]{border-radius:20px;width:100%;height:100vh;max-height:100vh;margin:0}.modal-body[_ngcontent-%COMP%]{max-height:calc(100vh - 200px)}.btn[_ngcontent-%COMP%]{padding:12px 20px;font-size:.95rem}.badge[_ngcontent-%COMP%]{padding:8px 16px;font-size:.85rem}.card-body[_ngcontent-%COMP%]{padding:20px}.table-responsive[_ngcontent-%COMP%]{font-size:.9rem}.add-to-lesson[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 20px;font-size:1rem}}@media print{.student-details[_ngcontent-%COMP%]{background:#fff;padding:0}.btn[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%], .add-to-lesson[_ngcontent-%COMP%]{display:none}.card[_ngcontent-%COMP%]{border:1px solid #ddd;box-shadow:none;break-inside:avoid}}@media (prefers-color-scheme: dark){.student-details[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0f172a,#1e293b);color:#e2e8f0}.student-profile-card[_ngcontent-%COMP%], .main-content-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#334155)}.card-title[_ngcontent-%COMP%]{color:#f1f5f9}.info-item[_ngcontent-%COMP%]{background:#334155;color:#cbd5e1}.table-borderless[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{background:#334155;color:#e2e8f0}.form-control[_ngcontent-%COMP%]{background:#334155;border-color:#475569;color:#e2e8f0}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#334155);border-color:#475569}.modal-title[_ngcontent-%COMP%]{color:#f1f5f9}}.btn[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus, .form-check-input[_ngcontent-%COMP%]:focus{outline:3px solid #3b82f6;outline-offset:2px}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-1000px 0}to{background-position:1000px 0}}.loading-shimmer[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:1000px 100%;animation:_ngcontent-%COMP%_shimmer 2s infinite linear}a[_ngcontent-%COMP%], button[_ngcontent-%COMP%], .nav-link[_ngcontent-%COMP%], .class-card[_ngcontent-%COMP%], .info-item[_ngcontent-%COMP%], .badge[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px;height:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:linear-gradient(135deg,#f1f5f9,#e2e8f0);border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:10px;border:2px solid #f1f5f9}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#764ba2,#667eea)}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:relative}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(135deg,transparent 0%,rgba(59,130,246,.05) 100%);opacity:0;transition:opacity .3s ease;pointer-events:none;z-index:-1}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover:after{opacity:1}.btn[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]   .ripple[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:#ffffffb3;transform:scale(0);animation:_ngcontent-%COMP%_ripple .6s linear;pointer-events:none}@keyframes _ngcontent-%COMP%_ripple{to{transform:scale(4);opacity:0}}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.class-card.selected[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.gradient-border[_ngcontent-%COMP%]{border:2px solid transparent;background:linear-gradient(#fff,#fff) padding-box,linear-gradient(135deg,#667eea,#764ba2) border-box;border-radius:20px}@media (max-width: 768px){[_ngcontent-%COMP%]:root{font-size:14px}}@media (max-width: 480px){[_ngcontent-%COMP%]:root{font-size:13px}}@media print{*[_ngcontent-%COMP%]{background:transparent!important;color:#000!important;box-shadow:none!important;text-shadow:none!important}.student-details[_ngcontent-%COMP%]{padding:0!important;background:#fff!important}.card[_ngcontent-%COMP%]{break-inside:avoid;page-break-inside:avoid}.btn[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]{display:none!important}}@keyframes _ngcontent-%COMP%_skeleton-loading{0%{background-position:-200px 0}to{background-position:calc(200px + 100%) 0}}.skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200px 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite}.glass-effect[_ngcontent-%COMP%]{background:#ffffff1a;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}.tooltip-inner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#334155);border-radius:10px;padding:10px 15px;font-size:.9rem;box-shadow:0 5px 15px #0003}.tooltip-arrow[_ngcontent-%COMP%]{border-color:#1e293b transparent transparent transparent}[_ngcontent-%COMP%]:focus-visible{outline:3px solid #3b82f6;outline-offset:3px;border-radius:8px}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}']})};var Fv=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=vn({type:n,selectors:[["app-add-student-to-classes-modal"]],decls:2,vars:0,template:function(e,i){e&1&&(a(0,"p"),c(1,"add-student-to-classes-modal works!"),l())},styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1050;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 40px #0003;max-width:900px;width:100%;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:12px 12px 0 0}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600}.btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:1.25rem;cursor:pointer;padding:.5rem}.student-info-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:1.25rem;border:1px solid #e9ecef}.student-avatar[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:700}.search-filter-section[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:8px;border:1px solid #dee2e6}.search-box[_ngcontent-%COMP%]{position:relative}.search-icon[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translateY(-50%);color:#6c757d}.search-input[_ngcontent-%COMP%]{padding-right:45px;border-radius:8px;border:2px solid #e9ecef;transition:all .3s}.search-input[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.btn-clear[_ngcontent-%COMP%]{position:absolute;left:10px;top:50%;transform:translateY(-50%);background:none;border:none;color:#6c757d;cursor:pointer}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#6c757d}.classes-list[_ngcontent-%COMP%]{padding:1rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#6c757d}.class-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e9ecef;border-radius:10px;padding:1.25rem;margin-bottom:1rem;transition:all .3s;box-shadow:0 2px 4px #0000000d}.class-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.class-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;border-bottom:1px solid #eee;padding-bottom:.75rem}.class-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.class-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;color:#333}.class-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#28a745}.class-details[_ngcontent-%COMP%]{margin-bottom:1rem}.detail-item[_ngcontent-%COMP%]{margin-bottom:.5rem;color:#555}.detail-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;width:20px}.class-description[_ngcontent-%COMP%]{background:#f8f9fa;padding:.75rem;border-radius:6px;margin-top:1rem;color:#666;font-size:.9rem;border-right:3px solid #667eea}.class-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding-top:1rem;border-top:1px solid #eee}.status-enrolled[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-not-enrolled[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #eee;background:#f8f9fa;border-radius:0 0 12px 12px}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{margin:10px;max-height:95vh}.class-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.class-actions[_ngcontent-%COMP%]{flex-wrap:wrap}}"]})};var el=da(Ta()),dd=da(UT());var Nv=class n{constructor(t,e){this.http=t;this.authService=e}apiUrl="/api/accounting";getDailyIncome(t){let e=new Gn;return t&&(e=e.set("date",t)),this.http.get(`${this.apiUrl}/daily-income`,{params:e,headers:this.authService.getAuthHeaders()})}getTodayStats(){return this.http.get(`${this.apiUrl}/today-stats`,{headers:this.authService.getAuthHeaders()})}getCurrentBalance(){return this.http.get(`${this.apiUrl}/balance`,{headers:this.authService.getAuthHeaders()})}getQuickFinancialStats(){return this.http.get(`${this.apiUrl}/quick-financial-stats`,{headers:this.authService.getAuthHeaders()})}getTransactions(t){let e=new Gn;return t&&Object.keys(t).forEach(i=>{t[i]&&(e=e.set(i,t[i]))}),this.http.get(`${this.apiUrl}/transactions`,{params:e,headers:this.authService.getAuthHeaders()})}addTransaction(t){return this.http.post(`${this.apiUrl}/transactions`,t,{headers:this.authService.getAuthHeaders()})}getWeeklyIncome(){return this.http.get(`${this.apiUrl}/weekly-income`,{headers:this.authService.getAuthHeaders()})}getMonthlyIncome(){return this.http.get(`${this.apiUrl}/monthly-income`,{headers:this.authService.getAuthHeaders()})}getBudgets(t){let e=new Gn;return t&&Object.keys(t).forEach(i=>{t[i]&&(e=e.set(i,t[i]))}),this.http.get(`${this.apiUrl}/budgets`,{params:e,headers:this.authService.getAuthHeaders()})}createBudget(t){return this.http.post(`${this.apiUrl}/budgets`,t,{headers:this.authService.getAuthHeaders()})}updateBudget(t,e){return this.http.put(`${this.apiUrl}/budgets/${t}`,e,{headers:this.authService.getAuthHeaders()})}getExpenses(t){let e=new Gn;return t&&Object.keys(t).forEach(i=>{t[i]&&(e=e.set(i,t[i]))}),this.http.get(`${this.apiUrl}/expenses`,{params:e,headers:this.authService.getAuthHeaders()})}addExpense(t){return this.http.post(`${this.apiUrl}/expenses`,t,{headers:this.authService.getAuthHeaders()})}getSchoolFees(t){let e=new Gn;return t&&Object.keys(t).forEach(i=>{t[i]&&(e=e.set(i,t[i]))}),this.http.get(`${this.apiUrl}/school-fees`,{params:e,headers:this.authService.getAuthHeaders()})}paySchoolFee(t,e){return this.http.put(`${this.apiUrl}/school-fees/${t}/pay`,e,{headers:this.authService.getAuthHeaders()})}getTeacherCommissions(t){let e=new Gn;return t&&Object.keys(t).forEach(i=>{t[i]&&(e=e.set(i,t[i]))}),this.http.get(`${this.apiUrl}/teacher-commissions`,{params:e,headers:this.authService.getAuthHeaders()})}payTeacherCommission(t,e){return this.http.post(`${this.apiUrl}/teacher-commissions/${t}/pay`,e,{headers:this.authService.getAuthHeaders()})}calculateTeacherClassCommission(t){let e=new Gn;return Object.keys(t).forEach(i=>{t[i]&&(e=e.set(i,t[i]))}),this.http.get(`${this.apiUrl}/teacher-class-commission`,{params:e,headers:this.authService.getAuthHeaders()})}payClassCommission(t){return this.http.post(`${this.apiUrl}/pay-class-commission`,t,{headers:this.authService.getAuthHeaders()})}getFinancialReport(t){let e=new Gn;return t&&Object.keys(t).forEach(i=>{t[i]&&(e=e.set(i,t[i]))}),this.http.get(`${this.apiUrl}/reports/financial`,{params:e,headers:this.authService.getAuthHeaders()})}getMonthlyFinancialReport(t){let e=new Gn;return t&&Object.keys(t).forEach(i=>{t[i]&&(e=e.set(i,t[i]))}),this.http.get(`${this.apiUrl}/monthly-financial-report`,{params:e,headers:this.authService.getAuthHeaders()})}getInvoices(t){let e=new Gn;return t&&Object.keys(t).forEach(i=>{t[i]&&(e=e.set(i,t[i]))}),this.http.get(`${this.apiUrl}/invoices`,{params:e,headers:this.authService.getAuthHeaders()})}getInvoice(t){return this.http.get(`${this.apiUrl}/invoices/${t}`,{headers:this.authService.getAuthHeaders()})}generateInvoice(t,e){return this.http.get(`${this.apiUrl}/invoices/generate/${t}/${e}`,{headers:this.authService.getAuthHeaders()})}getTeacherPayments(t){let e=new Gn;return t&&Object.keys(t).forEach(i=>{t[i]&&(e=e.set(i,t[i]))}),this.http.get(`${this.apiUrl}/teacher-payments`,{params:e,headers:this.authService.getAuthHeaders()})}getStaffSalaries(t){let e=new Gn;return t&&Object.keys(t).forEach(i=>{t[i]&&(e=e.set(i,t[i]))}),this.http.get(`${this.apiUrl}/staff-salaries`,{params:e,headers:this.authService.getAuthHeaders()})}getRegistrationFeeDetails(t){let e=new Gn;return t&&Object.keys(t).forEach(i=>{t[i]&&(e=e.set(i,t[i]))}),this.http.get(`${this.apiUrl}/registration-fee-details`,{params:e,headers:this.authService.getAuthHeaders()})}exportReport(t,e){let i=new Gn;return e&&Object.keys(e).forEach(r=>{e[r]&&(i=i.set(r,e[r]))}),i=i.set("format",t),this.http.get(`${this.apiUrl}/export-financial-report`,{params:i,headers:this.authService.getAuthHeaders(),responseType:"blob"})}exportFinancialReport(t,e){let i=new Gn;return e&&Object.keys(e).forEach(r=>{e[r]&&(i=i.set(r,e[r]))}),i=i.set("format",t),this.http.get(`${this.apiUrl}/export-financial-report`,{params:i,headers:this.authService.getAuthHeaders(),responseType:"blob"})}getClassPaymentsForMonth(t){return this.http.get(`${this.apiUrl}/class-payments/month/${t}`,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(e){return new(e||n)(Ve(Un),Ve(Cn))};static \u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"})};var e$=(n,t,e)=>({"badge-success":n,"badge-warning":t,"badge-danger":e}),t$=(n,t,e,i)=>({"badge-primary":n,"badge-success":t,"badge-info":e,"badge-secondary":i});function n$(n,t){n&1&&(a(0,"div",135),D(1,"i",136),c(2," \u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644... "),l())}function i$(n,t){if(n&1&&(a(0,"div",137)(1,"div",138)(2,"h2"),c(3),l(),a(4,"p"),c(5,"\u0625\u062C\u0645\u0627\u0644\u064A \u0625\u064A\u0631\u0627\u062F\u0627\u062A \u0627\u0644\u064A\u0648\u0645"),l()(),a(6,"div",139)(7,"div",140)(8,"span",141),c(9,"\u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0627\u0644\u062D\u0635\u0635:"),l(),a(10,"span",142),c(11),a(12,"small"),c(13),l()()(),a(14,"div",140)(15,"span",141),c(16,"\u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644:"),l(),a(17,"span",142),c(18),a(19,"small"),c(20),l()()(),a(21,"div",140)(22,"span",141),c(23,"\u0625\u064A\u0631\u0627\u062F\u0627\u062A \u0623\u062E\u0631\u0649:"),l(),a(24,"span",142),c(25),a(26,"small"),c(27),l()()()()()),n&2){let e=T(2);h(3),$(e.formatCurrency(e.dailyIncome.dailyIncome||0)),h(8),Z(" ",e.formatCurrency((e.dailyIncome.breakdown==null||e.dailyIncome.breakdown.payments==null?null:e.dailyIncome.breakdown.payments.amount)||0)," "),h(2),Z("(",(e.dailyIncome.breakdown==null||e.dailyIncome.breakdown.payments==null?null:e.dailyIncome.breakdown.payments.count)||0,")"),h(5),Z(" ",e.formatCurrency((e.dailyIncome.breakdown==null||e.dailyIncome.breakdown.registrationFees==null?null:e.dailyIncome.breakdown.registrationFees.amount)||0)," "),h(2),Z("(",(e.dailyIncome.breakdown==null||e.dailyIncome.breakdown.registrationFees==null?null:e.dailyIncome.breakdown.registrationFees.count)||0,")"),h(5),Z(" ",e.formatCurrency((e.dailyIncome.breakdown==null||e.dailyIncome.breakdown.otherIncome==null?null:e.dailyIncome.breakdown.otherIncome.amount)||0)," "),h(2),Z("(",(e.dailyIncome.breakdown==null||e.dailyIncome.breakdown.otherIncome==null?null:e.dailyIncome.breakdown.otherIncome.count)||0,")")}}function r$(n,t){n&1&&(a(0,"div",135),D(1,"i",136),c(2," \u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A... "),l())}function o$(n,t){n&1&&(a(0,"div",143),D(1,"i",144),a(2,"p"),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0639\u0627\u0645\u0644\u0627\u062A \u062D\u0627\u0644\u064A\u0627\u064B"),l()())}function s$(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td")(4,"span",148),c(5),l()(),a(6,"td"),c(7),l(),a(8,"td",149),c(9),l(),a(10,"td"),c(11),l(),a(12,"td"),c(13),l()()),n&2){let e=t.$implicit,i=T(3);h(2),$(i.formatDate(e.date)),h(2),P("ngClass","badge-"+i.getTransactionTypeBadge(e.type)),h(),Z(" ",i.getTransactionTypeText(e.type)," "),h(2),$(e.description),h(),P("ngClass",e.type==="income"?"text-success":"text-danger"),h(),Z(" ",i.formatCurrency(e.amount)," "),h(2),$(i.getCategoryText(e.category)),h(2),$((e.recordedBy==null?null:e.recordedBy.username)||"\u0646\u0638\u0627\u0645")}}function a$(n,t){if(n&1&&(a(0,"div",145)(1,"table",146)(2,"thead")(3,"tr")(4,"th"),c(5,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),a(6,"th"),c(7,"\u0627\u0644\u0646\u0648\u0639"),l(),a(8,"th"),c(9,"\u0627\u0644\u0648\u0635\u0641"),l(),a(10,"th"),c(11,"\u0627\u0644\u0645\u0628\u0644\u063A"),l(),a(12,"th"),c(13,"\u0627\u0644\u062A\u0635\u0646\u064A\u0641"),l(),a(14,"th"),c(15,"\u0627\u0644\u0645\u0633\u062C\u0644"),l()()(),a(16,"tbody"),te(17,s$,14,8,"tr",147),l()()()),n&2){let e=T(2);h(17),P("ngForOf",e.transactions.slice(0,10))}}function l$(n,t){if(n&1){let e=Se();a(0,"div",96)(1,"div",97)(2,"div",98)(3,"div",99),D(4,"i",100),l(),a(5,"div",101)(6,"h3"),c(7),l(),a(8,"p"),c(9,"\u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u062D\u0627\u0644\u064A"),l()()(),a(10,"div",102)(11,"div",99),D(12,"i",17),l(),a(13,"div",101)(14,"h3"),c(15),l(),a(16,"p"),c(17,"\u0625\u064A\u0631\u0627\u062F\u0627\u062A \u0627\u0644\u064A\u0648\u0645"),l(),a(18,"small"),c(19),l()()(),a(20,"div",103)(21,"div",99),D(22,"i",18),l(),a(23,"div",101)(24,"h3"),c(25),l(),a(26,"p"),c(27,"\u0645\u0635\u0631\u0648\u0641\u0627\u062A \u0627\u0644\u064A\u0648\u0645"),l(),a(28,"small"),c(29),l()()(),a(30,"div",104)(31,"div",99),D(32,"i",21),l(),a(33,"div",101)(34,"h3"),c(35),l(),a(36,"p"),c(37,"\u0639\u0645\u0648\u0644\u0627\u062A \u0627\u0644\u064A\u0648\u0645"),l(),a(38,"small"),c(39),l()()()(),a(40,"div",105)(41,"div",106)(42,"h3"),D(43,"i",107),c(44," \u0625\u064A\u0631\u0627\u062F\u0627\u062A \u0627\u0644\u064A\u0648\u0645"),l(),a(45,"span",108),c(46),l()(),a(47,"div",109),te(48,n$,3,0,"div",110)(49,i$,28,7,"div",111),l()(),a(50,"div",82)(51,"div",83)(52,"div",112)(53,"div",106)(54,"h4"),D(55,"i",113),c(56," \u0627\u0644\u0625\u062D\u0635\u0627\u0626\u064A\u0627\u062A \u0627\u0644\u0645\u0627\u0644\u064A\u0629 \u0627\u0644\u0633\u0631\u064A\u0639\u0629"),l()(),a(57,"div",109)(58,"div",114)(59,"div",115)(60,"span",116),c(61,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A:"),l(),a(62,"span",117),c(63),l()(),a(64,"div",115)(65,"span",116),c(66,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062A:"),l(),a(67,"span",118),c(68),l()(),a(69,"div",115)(70,"span",116),c(71,"\u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0627\u0644\u0645\u0639\u0644\u0642\u0629:"),l(),a(72,"span",119),c(73),l()(),a(74,"div",115)(75,"span",116),c(76,"\u0622\u062E\u0631 \u062A\u062D\u062F\u064A\u062B:"),l(),a(77,"span",120),c(78),l()()()()()(),a(79,"div",83)(80,"div",112)(81,"div",106)(82,"h4"),D(83,"i",121),c(84," \u0625\u062C\u0631\u0627\u0621\u0627\u062A \u0633\u0631\u064A\u0639\u0629"),l()(),a(85,"div",109)(86,"div",122)(87,"button",123),R("click",function(){k(e);let r=T();return F(r.openTransactionModal())}),D(88,"i",124),c(89," \u0625\u0636\u0627\u0641\u0629 \u0645\u0639\u0627\u0645\u0644\u0629 "),l(),a(90,"button",125),R("click",function(){k(e);let r=T();return F(r.openExpenseModal())}),D(91,"i",126),c(92," \u0625\u0636\u0627\u0641\u0629 \u0645\u0635\u0631\u0648\u0641 "),l(),a(93,"button",127),R("click",function(){k(e);let r=T();return F(r.openBudgetModal())}),D(94,"i",19),c(95," \u0625\u0646\u0634\u0627\u0621 \u0645\u064A\u0632\u0627\u0646\u064A\u0629 "),l(),a(96,"button",128),R("click",function(){k(e);let r=T();return F(r.openSchoolFeeModal())}),D(97,"i",129),c(98," \u062A\u0633\u062C\u064A\u0644 \u0631\u0633\u0648\u0645 \u062A\u0633\u062C\u064A\u0644 "),l()()()()()(),a(99,"div",112)(100,"div",106)(101,"h4"),D(102,"i",130),c(103," \u0622\u062E\u0631 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A"),l(),a(104,"button",131),R("click",function(){k(e);let r=T();return F(r.switchTab("transactions"))}),c(105," \u0639\u0631\u0636 \u0627\u0644\u0643\u0644 "),D(106,"i",132),l()(),a(107,"div",109),te(108,r$,3,0,"div",110)(109,o$,4,0,"div",133)(110,a$,18,1,"div",134),l()()()}if(n&2){let e=T();h(7),$(e.formatCurrency(e.currentBalance)),h(8),$(e.formatCurrency((e.todayStats.payments==null?null:e.todayStats.payments.total)||0)),h(4),Z("",(e.todayStats.payments==null?null:e.todayStats.payments.count)||0," \u0645\u0639\u0627\u0645\u0644\u0629"),h(6),$(e.formatCurrency((e.todayStats.expenses==null?null:e.todayStats.expenses.total)||0)),h(4),Z("",(e.todayStats.expenses==null?null:e.todayStats.expenses.count)||0," \u0645\u0635\u0631\u0648\u0641"),h(6),$(e.formatCurrency((e.todayStats.commissions==null?null:e.todayStats.commissions.total)||0)),h(4),Z("",(e.todayStats.commissions==null?null:e.todayStats.commissions.count)||0," \u0639\u0645\u0648\u0644\u0629"),h(7),$(e.dailyIncome.formattedDate||e.getCurrentDateFormatted()),h(2),P("ngIf",e.loading.income),h(),P("ngIf",!e.loading.income),h(14),Z(" ",e.formatCurrency(e.quickFinancialStats.totalIncome||0)," "),h(5),Z(" ",e.formatCurrency(e.quickFinancialStats.totalExpenses||0)," "),h(5),Z(" ",e.quickFinancialStats.pendingPayments||0," "),h(5),Z(" ",e.formatDateTime(e.quickFinancialStats.lastUpdated)," "),h(30),P("ngIf",e.loading.transactions),h(),P("ngIf",!e.loading.transactions&&e.transactions.length===0),h(),P("ngIf",!e.loading.transactions&&e.transactions.length>0)}}function u$(n,t){n&1&&(a(0,"div",135),D(1,"i",136),c(2," \u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A... "),l())}function c$(n,t){if(n&1){let e=Se();a(0,"div",143),D(1,"i",169),a(2,"h4"),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0639\u0627\u0645\u0644\u0627\u062A"),l(),a(4,"p"),c(5,"\u0642\u0645 \u0628\u0625\u0636\u0627\u0641\u0629 \u0645\u0639\u0627\u0645\u0644\u0629 \u0645\u0627\u0644\u064A\u0629 \u062C\u062F\u064A\u062F\u0629"),l(),a(6,"button",4),R("click",function(){k(e);let r=T(2);return F(r.openTransactionModal())}),D(7,"i",5),c(8," \u0625\u0636\u0627\u0641\u0629 \u0645\u0639\u0627\u0645\u0644\u0629 "),l()()}}function d$(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td")(4,"span",148),c(5),l()(),a(6,"td"),c(7),l(),a(8,"td",149)(9,"strong"),c(10),l()(),a(11,"td")(12,"span",170),c(13),l()(),a(14,"td"),c(15),l(),a(16,"td")(17,"button",171),D(18,"i",172),l()()()),n&2){let e=t.$implicit,i=T(3);h(2),$(i.formatDate(e.date)),h(2),P("ngClass","badge-"+i.getTransactionTypeBadge(e.type)),h(),Z(" ",i.getTransactionTypeText(e.type)," "),h(2),$(e.description),h(),P("ngClass",e.type==="income"?"text-success":"text-danger"),h(2),$(i.formatCurrency(e.amount)),h(3),Z(" ",i.getCategoryText(e.category)," "),h(2),$((e.recordedBy==null?null:e.recordedBy.username)||"\u0646\u0638\u0627\u0645")}}function f$(n,t){if(n&1&&(a(0,"table",146)(1,"thead")(2,"tr")(3,"th"),c(4,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),a(5,"th"),c(6,"\u0627\u0644\u0646\u0648\u0639"),l(),a(7,"th"),c(8,"\u0627\u0644\u0648\u0635\u0641"),l(),a(9,"th"),c(10,"\u0627\u0644\u0645\u0628\u0644\u063A"),l(),a(11,"th"),c(12,"\u0627\u0644\u062A\u0635\u0646\u064A\u0641"),l(),a(13,"th"),c(14,"\u0627\u0644\u0645\u0633\u062C\u0644"),l(),a(15,"th"),c(16,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(17,"tbody"),te(18,d$,19,8,"tr",147),l()()),n&2){let e=T(2);h(18),P("ngForOf",e.transactions)}}function h$(n,t){if(n&1&&(a(0,"div",173)(1,"div",82)(2,"div",155)(3,"div",174)(4,"h4"),c(5),l(),a(6,"p"),c(7,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A"),l(),a(8,"small"),c(9),l()()(),a(10,"div",155)(11,"div",175)(12,"h4"),c(13),l(),a(14,"p"),c(15,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062A"),l(),a(16,"small"),c(17),l()()(),a(18,"div",155)(19,"div",176)(20,"h4"),c(21),l(),a(22,"p"),c(23,"\u0635\u0627\u0641\u064A \u0627\u0644\u0631\u0628\u062D"),l(),a(24,"small"),c(25),l()()()()()),n&2){let e=T(2);h(5),$(e.formatCurrency(e.calculateTotalIncome())),h(4),Z("",e.getTransactionCounts().income," \u0645\u0639\u0627\u0645\u0644\u0629"),h(4),$(e.formatCurrency(e.calculateTotalExpenses())),h(4),Z("",e.getTransactionCounts().expense," \u0645\u0639\u0627\u0645\u0644\u0629"),h(2),P("ngClass",e.calculateNetProfit()>=0?"bg-info":"bg-warning"),h(2),$(e.formatCurrency(e.calculateNetProfit())),h(4),Z("",e.transactions.length," \u0645\u0639\u0627\u0645\u0644\u0629 \u0625\u062C\u0645\u0627\u0644\u0627\u064B")}}function p$(n,t){if(n&1){let e=Se();a(0,"div",150)(1,"div",112)(2,"div",106)(3,"h3"),D(4,"i",16),c(5," \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A \u0627\u0644\u0645\u0627\u0644\u064A\u0629"),l(),a(6,"div",151)(7,"button",4),R("click",function(){k(e);let r=T();return F(r.openTransactionModal())}),D(8,"i",5),c(9," \u0625\u0636\u0627\u0641\u0629 \u0645\u0639\u0627\u0645\u0644\u0629 "),l()()(),a(10,"div",109)(11,"div",152)(12,"div",82)(13,"div",153)(14,"label"),c(15,"\u0645\u0646 \u062A\u0627\u0631\u064A\u062E"),l(),a(16,"input",154),ye("ngModelChange",function(r){k(e);let o=T();return be(o.dateFilter.startDate,r)||(o.dateFilter.startDate=r),F(r)}),l()(),a(17,"div",153)(18,"label"),c(19,"\u0625\u0644\u0649 \u062A\u0627\u0631\u064A\u062E"),l(),a(20,"input",154),ye("ngModelChange",function(r){k(e);let o=T();return be(o.dateFilter.endDate,r)||(o.dateFilter.endDate=r),F(r)}),l()(),a(21,"div",155)(22,"label"),c(23,"\u0628\u062D\u062B"),l(),a(24,"div",156)(25,"input",157),ye("ngModelChange",function(r){k(e);let o=T();return be(o.searchTerm,r)||(o.searchTerm=r),F(r)}),l(),a(26,"div",158)(27,"button",159),R("click",function(){k(e);let r=T();return F(r.searchTransactions())}),D(28,"i",160),l(),a(29,"button",161),R("click",function(){k(e);let r=T();return F(r.clearSearch())}),D(30,"i",66),l()()()(),a(31,"div",162)(32,"label"),c(33,"\xA0"),l(),a(34,"div",163)(35,"button",6),R("click",function(){k(e);let r=T();return F(r.applyDateFilter())}),D(36,"i",164),c(37," \u062A\u0637\u0628\u064A\u0642 "),l(),a(38,"button",165),R("click",function(){k(e);let r=T();return F(r.clearDateFilter())}),D(39,"i",66),c(40," \u0645\u0633\u062D "),l()()()()(),a(41,"div",166),te(42,u$,3,0,"div",110)(43,c$,9,0,"div",133)(44,f$,19,1,"table",167),l(),te(45,h$,26,7,"div",168),l()()()}if(n&2){let e=T();h(16),xe("ngModel",e.dateFilter.startDate),h(4),xe("ngModel",e.dateFilter.endDate),h(5),xe("ngModel",e.searchTerm),h(17),P("ngIf",e.loading.transactions),h(),P("ngIf",!e.loading.transactions&&e.transactions.length===0),h(),P("ngIf",!e.loading.transactions&&e.transactions.length>0),h(),P("ngIf",!e.loading.transactions&&e.transactions.length>0)}}function m$(n,t){n&1&&(a(0,"div",135),D(1,"i",136),c(2," \u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644... "),l())}function g$(n,t){if(n&1&&(a(0,"div")(1,"div",185)(2,"h2"),c(3),l(),a(4,"p"),c(5,"\u0625\u062C\u0645\u0627\u0644\u064A \u0625\u064A\u0631\u0627\u062F\u0627\u062A \u0627\u0644\u064A\u0648\u0645"),l()()()),n&2){let e=T(2);h(3),$(e.formatCurrency(e.dailyIncome.dailyIncome||0))}}function _$(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td")(6,"div",188),D(7,"div",189),l(),c(8),l(),a(9,"td"),c(10),l()()),n&2){let e=t.$implicit,i=T(2);h(2),$(i.getCategoryText(e.name)),h(2),$(i.formatCurrency(e.amount)),h(3),wo("width",e.percentage,"%"),h(),Z(" ",e.percentage.toFixed(1),"% "),h(2),$(e.count)}}function v$(n,t){if(n&1){let e=Se();a(0,"div",177)(1,"div",112)(2,"div",106)(3,"h3"),D(4,"i",17),c(5," \u062A\u0642\u0627\u0631\u064A\u0631 \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A"),l()(),a(6,"div",109)(7,"div",178)(8,"div",179)(9,"div",180)(10,"h4"),D(11,"i",107),c(12," \u0625\u064A\u0631\u0627\u062F\u0627\u062A \u0627\u0644\u064A\u0648\u0645"),l(),a(13,"button",181),R("click",function(){k(e);let r=T();return F(r.loadDailyIncome())}),D(14,"i",9),c(15," \u062A\u062D\u062F\u064A\u062B "),l()(),a(16,"div",182),te(17,m$,3,0,"div",110)(18,g$,6,1,"div",183),l()(),a(19,"div",179)(20,"div",180)(21,"h4"),D(22,"i",184),c(23," \u0625\u064A\u0631\u0627\u062F\u0627\u062A \u0627\u0644\u0634\u0647\u0631 \u0627\u0644\u062D\u0627\u0644\u064A"),l()(),a(24,"div",182)(25,"div",185)(26,"h2"),c(27),l(),a(28,"p"),c(29,"\u0625\u064A\u0631\u0627\u062F\u0627\u062A \u0627\u0644\u0634\u0647\u0631 \u0627\u0644\u062D\u0627\u0644\u064A"),l()()()()(),a(30,"div",186)(31,"div",106)(32,"h4"),D(33,"i",19),c(34," \u062A\u0648\u0632\u064A\u0639 \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A \u062D\u0633\u0628 \u0627\u0644\u062A\u0635\u0646\u064A\u0641"),l()(),a(35,"div",109)(36,"div",145)(37,"table",187)(38,"thead")(39,"tr")(40,"th"),c(41,"\u0627\u0644\u062A\u0635\u0646\u064A\u0641"),l(),a(42,"th"),c(43,"\u0627\u0644\u0645\u0628\u0644\u063A"),l(),a(44,"th"),c(45,"\u0627\u0644\u0646\u0633\u0628\u0629"),l(),a(46,"th"),c(47,"\u0639\u062F\u062F \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A"),l()()(),a(48,"tbody"),te(49,_$,11,6,"tr",147),l()()()()()()()()}if(n&2){let e=T();h(17),P("ngIf",e.loading.income),h(),P("ngIf",!e.loading.income),h(9),$(e.formatCurrency(e.getCurrentMonthData().income)),h(22),P("ngForOf",e.getTopCategories())}}function x$(n,t){n&1&&(a(0,"div",135),D(1,"i",136),c(2," \u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062A... "),l())}function y$(n,t){if(n&1){let e=Se();a(0,"div",143),D(1,"i",191),a(2,"h4"),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0635\u0631\u0648\u0641\u0627\u062A"),l(),a(4,"p"),c(5,"\u0642\u0645 \u0628\u0625\u0636\u0627\u0641\u0629 \u0645\u0635\u0631\u0648\u0641 \u062C\u062F\u064A\u062F"),l(),a(6,"button",4),R("click",function(){k(e);let r=T(2);return F(r.openExpenseModal())}),D(7,"i",5),c(8," \u0625\u0636\u0627\u0641\u0629 \u0645\u0635\u0631\u0648\u0641 "),l()()}}function b$(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td",192)(6,"strong"),c(7),l()(),a(8,"td")(9,"span",193),c(10),l()(),a(11,"td"),c(12),l(),a(13,"td")(14,"span",148),c(15),l()(),a(16,"td")(17,"button",171),D(18,"i",172),l()()()),n&2){let e=t.$implicit,i=T(3);h(2),$(i.formatDate(e.date)),h(2),$(e.description),h(3),$(i.formatCurrency(e.amount)),h(3),Z(" ",i.getCategoryText(e.category)," "),h(2),$(i.getPaymentMethodText(e.paymentMethod)),h(2),P("ngClass","badge-"+i.getStatusBadge(e.status)),h(),Z(" ",i.getStatusText(e.status)," ")}}function C$(n,t){if(n&1&&(a(0,"table",146)(1,"thead")(2,"tr")(3,"th"),c(4,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),a(5,"th"),c(6,"\u0627\u0644\u0648\u0635\u0641"),l(),a(7,"th"),c(8,"\u0627\u0644\u0645\u0628\u0644\u063A"),l(),a(9,"th"),c(10,"\u0627\u0644\u062A\u0635\u0646\u064A\u0641"),l(),a(11,"th"),c(12,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639"),l(),a(13,"th"),c(14,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(15,"th"),c(16,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(17,"tbody"),te(18,b$,19,7,"tr",147),l()()),n&2){let e=T(2);h(18),P("ngForOf",e.expenses)}}function w$(n,t){if(n&1&&(a(0,"div",173)(1,"div",82)(2,"div",83)(3,"div",175)(4,"h4"),c(5),l(),a(6,"p"),c(7,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062A"),l(),a(8,"small"),c(9),l()()(),a(10,"div",83)(11,"div",194)(12,"h4"),c(13),l(),a(14,"p"),c(15,"\u0645\u0635\u0631\u0648\u0641\u0627\u062A \u0627\u0644\u0634\u0647\u0631 \u0627\u0644\u062D\u0627\u0644\u064A"),l(),a(16,"small"),c(17),l()()()()()),n&2){let e=T(2);h(5),$(e.formatCurrency(e.calculateTotalExpenses())),h(4),Z("",e.expenses.length," \u0645\u0635\u0631\u0648\u0641"),h(4),$(e.formatCurrency(e.getCurrentMonthData().expense)),h(4),Z("\u0645\u0646 ",e.getCurrentDateFormatted(),"")}}function M$(n,t){if(n&1){let e=Se();a(0,"div",190)(1,"div",112)(2,"div",106)(3,"h3"),D(4,"i",18),c(5," \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062A"),l(),a(6,"div",151)(7,"button",4),R("click",function(){k(e);let r=T();return F(r.openExpenseModal())}),D(8,"i",5),c(9," \u0625\u0636\u0627\u0641\u0629 \u0645\u0635\u0631\u0648\u0641 "),l()()(),a(10,"div",109)(11,"div",145),te(12,x$,3,0,"div",110)(13,y$,9,0,"div",133)(14,C$,19,1,"table",167),l(),te(15,w$,18,4,"div",168),l()()()}if(n&2){let e=T();h(12),P("ngIf",e.loading.transactions),h(),P("ngIf",!e.loading.transactions&&e.expenses.length===0),h(),P("ngIf",!e.loading.transactions&&e.expenses.length>0),h(),P("ngIf",!e.loading.transactions&&e.expenses.length>0)}}function S$(n,t){n&1&&(a(0,"div",135),D(1,"i",136),c(2," \u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u064A\u0632\u0627\u0646\u064A\u0627\u062A... "),l())}function E$(n,t){if(n&1){let e=Se();a(0,"div",143),D(1,"i",196),a(2,"h4"),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u064A\u0632\u0627\u0646\u064A\u0627\u062A"),l(),a(4,"p"),c(5,"\u0642\u0645 \u0628\u0625\u0646\u0634\u0627\u0621 \u0645\u064A\u0632\u0627\u0646\u064A\u0629 \u062C\u062F\u064A\u062F\u0629"),l(),a(6,"button",4),R("click",function(){k(e);let r=T(2);return F(r.openBudgetModal())}),D(7,"i",5),c(8," \u0625\u0646\u0634\u0627\u0621 \u0645\u064A\u0632\u0627\u0646\u064A\u0629 "),l()()}}function A$(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l(),a(7,"td"),c(8),l(),a(9,"td"),c(10),l(),a(11,"td",149),c(12),l(),a(13,"td")(14,"div",188),D(15,"div",197),l(),c(16),l(),a(17,"td")(18,"span",148),c(19),l()(),a(20,"td")(21,"button",171),D(22,"i",172),l(),a(23,"button",198),D(24,"i",199),l()()()),n&2){let e=t.$implicit,i=T(3);h(2),$(e.title),h(2),$(i.formatCurrency(e.amount)),h(2),$(i.getCategoryText(e.category)),h(2),Jn(" ",i.formatDate(e.startDate)," - ",i.formatDate(e.endDate)," "),h(2),$(i.formatCurrency(e.actualSpending||0)),h(),P("ngClass",i.isOverBudget(e)?"text-danger":"text-success"),h(),Z(" ",i.formatCurrency(e.remainingBudget||e.amount)," "),h(3),wo("width",i.getBudgetUtilization(e),"%"),P("ngClass","bg-"+i.getPercentageColor(i.getBudgetUtilization(e))),h(),Z(" ",i.formatPercentage(i.getBudgetUtilization(e))," "),h(2),P("ngClass","badge-"+i.getStatusBadge(e.status)),h(),Z(" ",i.getStatusText(e.status)," ")}}function T$(n,t){if(n&1&&(a(0,"table",146)(1,"thead")(2,"tr")(3,"th"),c(4,"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"),l(),a(5,"th"),c(6,"\u0627\u0644\u0645\u0628\u0644\u063A"),l(),a(7,"th"),c(8,"\u0627\u0644\u062A\u0635\u0646\u064A\u0641"),l(),a(9,"th"),c(10,"\u0627\u0644\u0641\u062A\u0631\u0629"),l(),a(11,"th"),c(12,"\u0627\u0644\u0635\u0631\u0641 \u0627\u0644\u0641\u0639\u0644\u064A"),l(),a(13,"th"),c(14,"\u0627\u0644\u0645\u062A\u0628\u0642\u064A"),l(),a(15,"th"),c(16,"\u0646\u0633\u0628\u0629 \u0627\u0644\u0627\u0633\u062A\u062E\u062F\u0627\u0645"),l(),a(17,"th"),c(18,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(19,"th"),c(20,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(21,"tbody"),te(22,A$,25,14,"tr",147),l()()),n&2){let e=T(2);h(22),P("ngForOf",e.budgets)}}function D$(n,t){if(n&1){let e=Se();a(0,"div",195)(1,"div",112)(2,"div",106)(3,"h3"),D(4,"i",19),c(5," \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u064A\u0632\u0627\u0646\u064A\u0627\u062A"),l(),a(6,"div",151)(7,"button",4),R("click",function(){k(e);let r=T();return F(r.openBudgetModal())}),D(8,"i",5),c(9," \u0625\u0646\u0634\u0627\u0621 \u0645\u064A\u0632\u0627\u0646\u064A\u0629 "),l()()(),a(10,"div",109)(11,"div",145),te(12,S$,3,0,"div",110)(13,E$,9,0,"div",133)(14,T$,23,1,"table",167),l()()()()}if(n&2){let e=T();h(12),P("ngIf",e.loading.transactions),h(),P("ngIf",!e.loading.transactions&&e.budgets.length===0),h(),P("ngIf",!e.loading.transactions&&e.budgets.length>0)}}function P$(n,t){n&1&&(a(0,"div",135),D(1,"i",136),c(2," \u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644... "),l())}function I$(n,t){if(n&1){let e=Se();a(0,"div",143),D(1,"i",201),a(2,"h4"),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0631\u0633\u0648\u0645 \u062A\u0633\u062C\u064A\u0644"),l(),a(4,"button",4),R("click",function(){k(e);let r=T(2);return F(r.openSchoolFeeModal())}),D(5,"i",5),c(6," \u062A\u0633\u062C\u064A\u0644 \u0631\u0633\u0648\u0645 \u062C\u062F\u064A\u062F\u0629 "),l()()}}function O$(n,t){if(n&1){let e=Se();a(0,"button",203),R("click",function(){k(e);let r=T().$implicit,o=T(3);return F(o.paySchoolFee(r))}),D(1,"i",17),l()}}function R$(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l(),a(7,"td"),c(8),l(),a(9,"td")(10,"span",148),c(11),l()(),a(12,"td"),c(13),l(),a(14,"td"),te(15,O$,2,0,"button",202),a(16,"button",171),D(17,"i",172),l()()()),n&2){let e=t.$implicit,i=T(3);h(2),$((e.student==null?null:e.student.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),h(2),$(i.formatCurrency(e.amount)),h(2),$(i.formatDate(e.paymentDate)),h(2),$(i.getPaymentMethodText(e.paymentMethod)),h(2),P("ngClass","badge-"+i.getStatusBadge(e.status)),h(),Z(" ",i.getStatusText(e.status)," "),h(2),$(e.invoiceNumber||"\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631"),h(2),P("ngIf",e.status==="pending")}}function k$(n,t){if(n&1&&(a(0,"table",146)(1,"thead")(2,"tr")(3,"th"),c(4,"\u0627\u0644\u0637\u0627\u0644\u0628"),l(),a(5,"th"),c(6,"\u0627\u0644\u0645\u0628\u0644\u063A"),l(),a(7,"th"),c(8,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639"),l(),a(9,"th"),c(10,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639"),l(),a(11,"th"),c(12,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(13,"th"),c(14,"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629"),l(),a(15,"th"),c(16,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(17,"tbody"),te(18,R$,18,8,"tr",147),l()()),n&2){let e=T(2);h(18),P("ngForOf",e.schoolFees)}}function F$(n,t){if(n&1){let e=Se();a(0,"div",200)(1,"div",112)(2,"div",106)(3,"h3"),D(4,"i",20),c(5," \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644"),l(),a(6,"div",151)(7,"button",4),R("click",function(){k(e);let r=T();return F(r.openSchoolFeeModal())}),D(8,"i",5),c(9," \u062A\u0633\u062C\u064A\u0644 \u0631\u0633\u0648\u0645 "),l()()(),a(10,"div",109)(11,"div",145),te(12,P$,3,0,"div",110)(13,I$,7,0,"div",133)(14,k$,19,1,"table",167),l()()()()}if(n&2){let e=T();h(12),P("ngIf",e.loading.transactions),h(),P("ngIf",!e.loading.transactions&&e.schoolFees.length===0),h(),P("ngIf",!e.loading.transactions&&e.schoolFees.length>0)}}function N$(n,t){n&1&&(a(0,"div",135),D(1,"i",136),c(2," \u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0639\u0645\u0648\u0644\u0627\u062A... "),l())}function L$(n,t){n&1&&(a(0,"div",143),D(1,"i",205),a(2,"h4"),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0639\u0645\u0648\u0644\u0627\u062A"),l(),a(4,"p"),c(5,"\u0633\u064A\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0639\u0645\u0648\u0644\u0627\u062A \u062A\u0644\u0642\u0627\u0626\u064A\u0627\u064B \u0639\u0646\u062F \u062F\u0641\u0639 \u0631\u0633\u0648\u0645 \u0627\u0644\u062D\u0635\u0635"),l()())}function V$(n,t){if(n&1){let e=Se();a(0,"button",203),R("click",function(){k(e);let r=T().$implicit,o=T(3);return F(o.payTeacherCommission(r))}),D(1,"i",17),l()}}function U$(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l(),a(7,"td"),c(8),l(),a(9,"td"),c(10),l(),a(11,"td"),c(12),l(),a(13,"td"),c(14),l(),a(15,"td")(16,"span",148),c(17),l()(),a(18,"td"),te(19,V$,2,0,"button",202),a(20,"button",171),D(21,"i",172),l()()()),n&2){let e=t.$implicit,i=T(3);h(2),$((e.teacher==null?null:e.teacher.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),h(2),$((e.student==null?null:e.student.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),h(2),$((e.class==null?null:e.class.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),h(2),$(e.month),h(2),$(i.formatCurrency(e.amount)),h(2),Z("",e.percentage,"%"),h(2),$(i.formatDate(e.paymentDate)),h(2),P("ngClass","badge-"+i.getStatusBadge(e.status)),h(),Z(" ",i.getStatusText(e.status)," "),h(2),P("ngIf",e.status==="pending")}}function B$(n,t){if(n&1&&(a(0,"table",146)(1,"thead")(2,"tr")(3,"th"),c(4,"\u0627\u0644\u0623\u0633\u062A\u0627\u0630"),l(),a(5,"th"),c(6,"\u0627\u0644\u0637\u0627\u0644\u0628"),l(),a(7,"th"),c(8,"\u0627\u0644\u062D\u0635\u0629"),l(),a(9,"th"),c(10,"\u0627\u0644\u0634\u0647\u0631"),l(),a(11,"th"),c(12,"\u0627\u0644\u0645\u0628\u0644\u063A"),l(),a(13,"th"),c(14,"\u0627\u0644\u0646\u0633\u0628\u0629"),l(),a(15,"th"),c(16,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639"),l(),a(17,"th"),c(18,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(19,"th"),c(20,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(21,"tbody"),te(22,U$,22,10,"tr",147),l()()),n&2){let e=T(2);h(22),P("ngForOf",e.teacherCommissions)}}function z$(n,t){if(n&1&&(a(0,"div",204)(1,"div",112)(2,"div",106)(3,"h3"),D(4,"i",21),c(5," \u0639\u0645\u0648\u0644\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629"),l()(),a(6,"div",109)(7,"div",145),te(8,N$,3,0,"div",110)(9,L$,6,0,"div",133)(10,B$,23,1,"table",167),l()()()()),n&2){let e=T();h(8),P("ngIf",e.loading.transactions),h(),P("ngIf",!e.loading.transactions&&e.teacherCommissions.length===0),h(),P("ngIf",!e.loading.transactions&&e.teacherCommissions.length>0)}}function H$(n,t){if(n&1&&(a(0,"option",213),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Z(" ",e.name," ")}}function j$(n,t){if(n&1&&(a(0,"option",213),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Mo(" ",e.name," - ",e.subject," (",(e.teacher==null?null:e.teacher.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641",") ")}}function W$(n,t){n&1&&(a(0,"div",214),D(1,"i",136),c(2," \u062C\u0627\u0631\u064A \u062D\u0633\u0627\u0628 \u0627\u0644\u0639\u0645\u0648\u0644\u0629... "),l())}function G$(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l(),a(7,"td"),c(8),l(),a(9,"td")(10,"span",148),c(11),l()(),a(12,"td"),c(13),l(),a(14,"td",222),c(15),l()()),n&2){let e=t.$implicit,i=T(3);h(2),$(e.student.name),h(2),$(e.student.studentId),h(2),$(e.attendancesCount),h(2),$(e.scheduledSessions),h(2),P("ngClass",e.attendancePercentage>=70?"badge-success":"badge-warning"),h(),Z(" ",e.attendancePercentage,"% "),h(2),$(i.formatCurrency(e.monthlyFee)),h(2),$(i.formatCurrency(e.teacherShare))}}function $$(n,t){if(n&1){let e=Se();a(0,"div",215)(1,"div",216)(2,"h4"),c(3,"\u0646\u062A\u0627\u0626\u062C \u062D\u0633\u0627\u0628 \u0627\u0644\u0639\u0645\u0648\u0644\u0629"),l(),a(4,"button",217),R("click",function(){k(e);let r=T(2);return F(r.payClassCommission())}),D(5,"i",17),c(6," \u062F\u0641\u0639 \u0627\u0644\u0639\u0645\u0648\u0644\u0629 "),l()(),a(7,"div",218)(8,"div",194)(9,"h4"),c(10),l(),a(11,"p"),c(12,"\u0625\u062C\u0645\u0627\u0644\u064A \u0625\u064A\u0631\u0627\u062F\u0627\u062A \u0627\u0644\u062D\u0635\u0629"),l()(),a(13,"div",219)(14,"h4"),c(15),l(),a(16,"p"),c(17,"\u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 (70%)"),l()(),a(18,"div",220)(19,"h4"),c(20),l(),a(21,"p"),c(22,"\u0639\u062F\u062F \u0627\u0644\u0637\u0644\u0627\u0628"),l()()(),a(23,"div",186)(24,"div",106)(25,"h5"),c(26,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0637\u0644\u0627\u0628"),l()(),a(27,"div",109)(28,"div",145)(29,"table",221)(30,"thead")(31,"tr")(32,"th"),c(33,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628"),l(),a(34,"th"),c(35,"\u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628"),l(),a(36,"th"),c(37,"\u0639\u062F\u062F \u0627\u0644\u062D\u0636\u0648\u0631"),l(),a(38,"th"),c(39,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u062C\u062F\u0648\u0644\u0629"),l(),a(40,"th"),c(41,"\u0646\u0633\u0628\u0629 \u0627\u0644\u062D\u0636\u0648\u0631"),l(),a(42,"th"),c(43,"\u0627\u0644\u0631\u0633\u0648\u0645 \u0627\u0644\u0634\u0647\u0631\u064A\u0629"),l(),a(44,"th"),c(45,"\u062D\u0635\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),l()()(),a(46,"tbody"),te(47,G$,16,8,"tr",147),l()()()()()()}if(n&2){let e=T(2);h(4),P("disabled",e.classCommissionData.summary.commissionStatus==="paid"),h(6),$(e.formatCurrency(e.classCommissionData.summary.totalClassRevenue)),h(5),$(e.formatCurrency(e.classCommissionData.summary.totalTeacherCommission)),h(5),$(e.classCommissionData.summary.totalStudents),h(27),P("ngForOf",e.classCommissionData.students)}}function Y$(n,t){if(n&1){let e=Se();a(0,"div",206)(1,"div",112)(2,"div",106)(3,"h3"),D(4,"i",2),c(5," \u062D\u0633\u0627\u0628 \u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u062D\u0635\u0629"),l(),a(6,"div",151)(7,"button",4),R("click",function(){k(e);let r=T();return F(r.openClassCommissionModal())}),D(8,"i",2),c(9," \u062D\u0633\u0627\u0628 \u0639\u0645\u0648\u0644\u0629 \u062C\u062F\u064A\u062F\u0629 "),l()()(),a(10,"div",109)(11,"div",207)(12,"form",46),R("ngSubmit",function(){k(e);let r=T();return F(r.calculateClassCommission())}),a(13,"div",82)(14,"div",155)(15,"div",47)(16,"label"),c(17,"\u0627\u0644\u0623\u0633\u062A\u0627\u0630 *"),l(),a(18,"select",90)(19,"option",91),c(20,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),l(),te(21,H$,2,2,"option",92),l()()(),a(22,"div",155)(23,"div",47)(24,"label"),c(25,"\u0627\u0644\u062D\u0635\u0629 *"),l(),a(26,"select",93)(27,"option",91),c(28,"\u0627\u062E\u062A\u0631 \u0627\u0644\u062D\u0635\u0629"),l(),te(29,j$,2,4,"option",92),l()()(),a(30,"div",155)(31,"div",47)(32,"label"),c(33,"\u0627\u0644\u0634\u0647\u0631 *"),l(),D(34,"input",94),l()()(),a(35,"div",82)(36,"div",83)(37,"div",47)(38,"label"),c(39,"\u0627\u0644\u062C\u0648\u0644\u0629 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),l(),D(40,"input",208),l()(),a(41,"div",83)(42,"div",47)(43,"label"),c(44,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639"),l(),a(45,"select",95)(46,"option",72),c(47,"\u0646\u0642\u062F\u0627\u064B"),l(),a(48,"option",73),c(49,"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A"),l(),a(50,"option",74),c(51,"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),l()()()()(),a(52,"div",47)(53,"label"),c(54,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),D(55,"textarea",209),l(),a(56,"div",210)(57,"button",63),D(58,"i",2),c(59," \u062D\u0633\u0627\u0628 \u0627\u0644\u0639\u0645\u0648\u0644\u0629 "),l(),a(60,"button",65),R("click",function(){k(e);let r=T();return F(r.classCommissionForm.reset())}),D(61,"i",66),c(62," \u0625\u0644\u063A\u0627\u0621 "),l()()()(),te(63,W$,3,0,"div",211)(64,$$,48,5,"div",212),l()()()}if(n&2){let e=T();h(12),P("formGroup",e.classCommissionForm),h(9),P("ngForOf",e.teachersList),h(8),P("ngForOf",e.lessonsList),h(28),P("disabled",e.loading.classCommission),h(6),P("ngIf",e.loading.classCommission),h(),P("ngIf",e.classCommissionData&&!e.loading.classCommission)}}function q$(n,t){n&1&&(a(0,"div",230),D(1,"i",231),a(2,"p",232),c(3,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062D\u0635\u0635..."),l()())}function X$(n,t){n&1&&(a(0,"div",234),D(1,"i",235),a(2,"h4",232),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u062D\u0635\u0635 \u0644\u0644\u0634\u0647\u0631 \u0627\u0644\u0645\u062D\u062F\u062F"),l(),a(4,"p"),c(5,"\u0642\u0645 \u0628\u062A\u063A\u064A\u064A\u0631 \u0627\u0644\u0634\u0647\u0631 \u0623\u0648 \u062A\u0623\u0643\u062F \u0645\u0646 \u0648\u062C\u0648\u062F \u062D\u0635\u0635 \u0645\u0633\u062C\u0644\u0629"),l()())}function Z$(n,t){if(n&1&&(a(0,"small",243),c(1),l()),n&2){let e=T().$implicit,i=T(4);h(),Z(" ",i.formatDate(e.paymentDate)," ")}}function J$(n,t){if(n&1){let e=Se();a(0,"button",244),R("click",function(){k(e);let r=T().$implicit,o=T(4);return F(o.payClassPayment(r))}),D(1,"i",17),c(2," \u062F\u0641\u0639 "),l()}}function K$(n,t){n&1&&(a(0,"button",245),D(1,"i",18),l())}function Q$(n,t){if(n&1){let e=Se();a(0,"tr")(1,"td")(2,"strong"),c(3),l(),D(4,"br"),a(5,"small",236),c(6),l()(),a(7,"td"),c(8),l(),a(9,"td"),c(10),D(11,"br"),a(12,"small",236),c(13),l()(),a(14,"td"),c(15),l(),a(16,"td")(17,"span",237),c(18),l()(),a(19,"td")(20,"span",148),c(21),l()(),a(22,"td",222)(23,"strong"),c(24),l()(),a(25,"td",238)(26,"strong"),c(27),l()(),a(28,"td")(29,"span",148),c(30),l(),te(31,Z$,2,1,"small",239),l(),a(32,"td")(33,"button",240),R("click",function(){let r=k(e).$implicit,o=T(4);return F(o.viewClassPaymentDetails(r))}),D(34,"i",172),l(),te(35,J$,3,0,"button",241)(36,K$,2,0,"button",242),l()()}if(n&2){let e=t.$implicit,i=T(4);h(3),$(e.class==null?null:e.class.name),h(3),Z("",(e.class==null||e.class.schedule==null?null:e.class.schedule.length)||0," \u062C\u0644\u0633\u0629 \u0623\u0633\u0628\u0648\u0639\u064A\u0627\u064B"),h(2),$(e.class==null?null:e.class.subject),h(2),Z(" ",e.teacher==null?null:e.teacher.name,""),h(3),$(e.teacher==null?null:e.teacher.phone),h(2),$(e.month),h(3),$((e.students==null?null:e.students.total)||0),h(2),P("ngClass",(e.students==null?null:e.students.paid)>0?"badge-success":"badge-warning"),h(),Z(" ",(e.students==null?null:e.students.paid)||0," "),h(3),$(i.formatCurrency(e.class==null?null:e.class.price)),h(3),$(i.formatCurrency(e.commissionAmount)),h(2),P("ngClass",g4(16,e$,e.status==="paid",e.status==="pending",e.status==="late")),h(),Z(" ",i.getStatusText(e.status)," "),h(),P("ngIf",e.paymentDate),h(4),P("ngIf",e.canPay&&(e.students==null?null:e.students.paid)>0),h(),P("ngIf",e.status==="paid")}}function eY(n,t){if(n&1&&(a(0,"table",146)(1,"thead")(2,"tr")(3,"th"),c(4,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629"),l(),a(5,"th"),c(6,"\u0627\u0644\u0645\u0627\u062F\u0629"),l(),a(7,"th"),c(8,"\u0627\u0644\u0623\u0633\u062A\u0627\u0630"),l(),a(9,"th"),c(10,"\u0627\u0644\u0634\u0647\u0631"),l(),a(11,"th"),c(12,"\u0639\u062F\u062F \u0627\u0644\u0637\u0644\u0627\u0628"),l(),a(13,"th"),c(14,"\u0637\u0644\u0627\u0628 \u0645\u062F\u0641\u0648\u0639\u064A\u0646"),l(),a(15,"th"),c(16,"\u0633\u0639\u0631 \u0627\u0644\u062D\u0635\u0629"),l(),a(17,"th"),c(18,"\u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 (70%)"),l(),a(19,"th"),c(20,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(21,"th"),c(22,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(23,"tbody"),te(24,Q$,37,20,"tr",147),l()()),n&2){let e=T(3);h(24),P("ngForOf",e.filteredClassPayments)}}function tY(n,t){if(n&1&&(a(0,"div",145),te(1,X$,6,0,"div",233)(2,eY,25,1,"table",167),l()),n&2){let e=T(2);h(),P("ngIf",e.filteredClassPayments.length===0),h(),P("ngIf",e.filteredClassPayments.length>0)}}function nY(n,t){if(n&1&&(a(0,"div",173)(1,"div",82)(2,"div",153)(3,"div",194)(4,"h4"),c(5),l(),a(6,"p"),c(7,"\u0639\u062F\u062F \u0627\u0644\u062D\u0635\u0635"),l()()(),a(8,"div",153)(9,"div",174)(10,"h4"),c(11),l(),a(12,"p"),c(13,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0637\u0644\u0627\u0628"),l()()(),a(14,"div",153)(15,"div",219)(16,"h4"),c(17),l(),a(18,"p"),c(19,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0639\u0645\u0648\u0644\u0627\u062A"),l()()(),a(20,"div",153)(21,"div",176)(22,"h4"),c(23),l(),a(24,"p"),c(25,"\u062D\u0635\u0635 \u062A\u062D\u062A\u0627\u062C \u062F\u0641\u0639"),l()()()()()),n&2){let e=T(2);h(5),$(e.filteredClassPayments.length),h(6),$(e.getTotalStudents()),h(6),$(e.formatCurrency(e.getTotalCommission())),h(4),P("ngClass",e.getPendingPaymentsCount()>0?"bg-danger":"bg-secondary"),h(2),$(e.getPendingPaymentsCount())}}function iY(n,t){if(n&1){let e=Se();a(0,"div",223)(1,"div",112)(2,"div",106)(3,"h3"),D(4,"i",22),c(5," \u0625\u062F\u0627\u0631\u0629 \u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0627\u0644\u062D\u0635\u0635"),l(),a(6,"div",3)(7,"button",224),R("click",function(){k(e);let r=T();return F(r.loadClassPayments())}),D(8,"i",9),l()()(),a(9,"div",109)(10,"div",225)(11,"div",155)(12,"div",47)(13,"label"),c(14,"\u0641\u0644\u062A\u0631\u0629 \u062D\u0633\u0628 \u0627\u0644\u0634\u0647\u0631"),l(),a(15,"input",226),ye("ngModelChange",function(r){k(e);let o=T();return be(o.selectedPaymentMonth,r)||(o.selectedPaymentMonth=r),F(r)}),R("change",function(){k(e);let r=T();return F(r.onMonthChange())}),l()()(),a(16,"div",227)(17,"div",47)(18,"label"),c(19,"\u0628\u062D\u062B (\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629 \u0623\u0648 \u0627\u0644\u0623\u0633\u062A\u0627\u0630)"),l(),a(20,"div",156)(21,"input",228),ye("ngModelChange",function(r){k(e);let o=T();return be(o.searchTerm,r)||(o.searchTerm=r),F(r)}),R("keyup",function(){k(e);let r=T();return F(r.filterClassPayments())}),l(),a(22,"div",158)(23,"button",159),R("click",function(){k(e);let r=T();return F(r.filterClassPayments())}),D(24,"i",160),l(),a(25,"button",161),R("click",function(){k(e);let r=T();return r.searchTerm="",F(r.filterClassPayments())}),D(26,"i",66),l()()()()()(),te(27,q$,4,0,"div",229)(28,tY,3,2,"div",134)(29,nY,26,5,"div",168),l()()()}if(n&2){let e=T();h(15),xe("ngModel",e.selectedPaymentMonth),h(6),xe("ngModel",e.searchTerm),h(6),P("ngIf",e.loading.classPayments),h(),P("ngIf",!e.loading.classPayments),h(),P("ngIf",!e.loading.classPayments&&e.filteredClassPayments.length>0)}}function rY(n,t){n&1&&(a(0,"div",153)(1,"div",47)(2,"label"),c(3,"\u0627\u0644\u0634\u0647\u0631 *"),l(),D(4,"input",94),l()())}function oY(n,t){n&1&&(a(0,"div",153)(1,"div",47)(2,"label"),c(3,"\u0627\u0644\u0633\u0646\u0629 *"),l(),D(4,"input",259),l()())}function sY(n,t){n&1&&(a(0,"div",153)(1,"div",47)(2,"label"),c(3,"\u0645\u0646 \u062A\u0627\u0631\u064A\u062E *"),l(),D(4,"input",84),l()())}function aY(n,t){n&1&&(a(0,"div",153)(1,"div",47)(2,"label"),c(3,"\u0625\u0644\u0649 \u062A\u0627\u0631\u064A\u062E *"),l(),D(4,"input",85),l()())}function lY(n,t){n&1&&(a(0,"div",214),D(1,"i",136),c(2," \u062C\u0627\u0631\u064A \u062A\u0648\u0644\u064A\u062F \u0627\u0644\u062A\u0642\u0631\u064A\u0631... "),l())}function uY(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td",222),c(6),l(),a(7,"td"),c(8),l(),a(9,"td"),c(10),l()()),n&2){let e=t.$implicit,i=T(3);h(2),$(i.formatDate(e.date)),h(2),$(e.description),h(2),$(i.formatCurrency(e.amount)),h(2),$(i.getCategoryText(e.category)),h(2),$((e.recordedBy==null?null:e.recordedBy.username)||"\u0646\u0638\u0627\u0645")}}function cY(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td",192),c(6),l(),a(7,"td"),c(8),l(),a(9,"td"),c(10),l()()),n&2){let e=t.$implicit,i=T(3);h(2),$(i.formatDate(e.date)),h(2),$(e.description),h(2),$(i.formatCurrency(e.amount)),h(2),$(i.getCategoryText(e.category)),h(2),$((e.recordedBy==null?null:e.recordedBy.username)||"\u0646\u0638\u0627\u0645")}}function dY(n,t){if(n&1&&(a(0,"div",260)(1,"div",261)(2,"div",174)(3,"h4"),c(4),l(),a(5,"p"),c(6,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A"),l(),a(7,"small"),c(8),l()(),a(9,"div",175)(10,"h4"),c(11),l(),a(12,"p"),c(13,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062A"),l(),a(14,"small"),c(15),l()(),a(16,"div",176)(17,"h4"),c(18),l(),a(19,"p"),c(20,"\u0635\u0627\u0641\u064A \u0627\u0644\u0631\u0628\u062D"),l(),a(21,"small"),c(22),l()(),a(23,"div",220)(24,"h4"),c(25),l(),a(26,"p"),c(27,"\u0645\u062A\u0648\u0633\u0637 \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A \u0627\u0644\u064A\u0648\u0645\u064A\u0629"),l(),a(28,"small"),c(29),l()()(),a(30,"div",186)(31,"div",106)(32,"h5"),c(33,"\u062A\u0641\u0635\u064A\u0644 \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A"),l()(),a(34,"div",109)(35,"div",145)(36,"table",221)(37,"thead")(38,"tr")(39,"th"),c(40,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),a(41,"th"),c(42,"\u0627\u0644\u0648\u0635\u0641"),l(),a(43,"th"),c(44,"\u0627\u0644\u0645\u0628\u0644\u063A"),l(),a(45,"th"),c(46,"\u0627\u0644\u062A\u0635\u0646\u064A\u0641"),l(),a(47,"th"),c(48,"\u0627\u0644\u0645\u0633\u062C\u0644"),l()()(),a(49,"tbody"),te(50,uY,11,5,"tr",147),l()()()()(),a(51,"div",186)(52,"div",106)(53,"h5"),c(54,"\u062A\u0641\u0635\u064A\u0644 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062A"),l()(),a(55,"div",109)(56,"div",145)(57,"table",221)(58,"thead")(59,"tr")(60,"th"),c(61,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),a(62,"th"),c(63,"\u0627\u0644\u0648\u0635\u0641"),l(),a(64,"th"),c(65,"\u0627\u0644\u0645\u0628\u0644\u063A"),l(),a(66,"th"),c(67,"\u0627\u0644\u062A\u0635\u0646\u064A\u0641"),l(),a(68,"th"),c(69,"\u0627\u0644\u0645\u0633\u062C\u0644"),l()()(),a(70,"tbody"),te(71,cY,11,5,"tr",147),l()()()()()()),n&2){let e=T(2);h(4),$(e.formatCurrency(e.monthlyFinancialReport.income.total)),h(4),Z("",e.monthlyFinancialReport.summary.incomeTransactions," \u0645\u0639\u0627\u0645\u0644\u0629"),h(3),$(e.formatCurrency(e.monthlyFinancialReport.expenses.total)),h(4),Z("",e.monthlyFinancialReport.summary.expenseTransactions," \u0645\u0639\u0627\u0645\u0644\u0629"),h(),P("ngClass",e.monthlyFinancialReport.profit.netProfit>=0?"bg-info":"bg-warning"),h(2),$(e.formatCurrency(e.monthlyFinancialReport.profit.netProfit)),h(4),Z("\u0647\u0627\u0645\u0634 \u0627\u0644\u0631\u0628\u062D: ",e.monthlyFinancialReport.profit.profitMargin,"%"),h(3),$(e.formatCurrency(e.monthlyFinancialReport.summary.averageDailyIncome)),h(4),Z("\u0645\u062A\u0648\u0633\u0637 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062A: ",e.formatCurrency(e.monthlyFinancialReport.summary.averageDailyExpense),""),h(21),P("ngForOf",e.monthlyFinancialReport.income.details),h(21),P("ngForOf",e.monthlyFinancialReport.expenses.details)}}function fY(n,t){if(n&1){let e=Se();a(0,"div",246)(1,"div",112)(2,"div",106)(3,"h3"),D(4,"i",23),c(5," \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0645\u0627\u0644\u064A \u0627\u0644\u0634\u0647\u0631\u064A"),l(),a(6,"div",151)(7,"button",217),R("click",function(){k(e);let r=T();return F(r.exportFinancialReport("excel"))}),D(8,"i",247),c(9," \u062A\u0635\u062F\u064A\u0631 Excel "),l(),a(10,"button",248),R("click",function(){k(e);let r=T();return F(r.exportFinancialReport("pdf"))}),D(11,"i",249),c(12," \u062A\u0635\u062F\u064A\u0631 PDF "),l()()(),a(13,"div",109)(14,"div",250)(15,"form",46),R("ngSubmit",function(){k(e);let r=T();return F(r.loadFinancialReportData())}),a(16,"div",82)(17,"div",153)(18,"div",47)(19,"label"),c(20,"\u0646\u0648\u0639 \u0627\u0644\u0641\u062A\u0631\u0629 *"),l(),a(21,"select",251),R("change",function(){k(e);let r=T();return F(r.onPeriodTypeChange())}),a(22,"option",252),c(23,"\u0634\u0647\u0631\u064A"),l(),a(24,"option",253),c(25,"\u0645\u062E\u0635\u0635"),l(),a(26,"option",254),c(27,"\u0633\u0646\u0648\u064A"),l()()()(),te(28,rY,5,0,"div",255)(29,oY,5,0,"div",255)(30,sY,5,0,"div",255)(31,aY,5,0,"div",255),a(32,"div",153)(33,"label"),c(34,"\xA0"),l(),a(35,"button",256),D(36,"i",257),c(37," \u062A\u0648\u0644\u064A\u062F \u0627\u0644\u062A\u0642\u0631\u064A\u0631 "),l()()()()(),te(38,lY,3,0,"div",211)(39,dY,72,11,"div",258),l()()()}if(n&2){let e,i,r,o,s=T();h(7),P("disabled",s.loading.export),h(3),P("disabled",s.loading.export),h(5),P("formGroup",s.financialReportForm),h(13),P("ngIf",((e=s.financialReportForm.get("periodType"))==null?null:e.value)==="monthly"),h(),P("ngIf",((i=s.financialReportForm.get("periodType"))==null?null:i.value)==="yearly"),h(),P("ngIf",((r=s.financialReportForm.get("periodType"))==null?null:r.value)==="custom"),h(),P("ngIf",((o=s.financialReportForm.get("periodType"))==null?null:o.value)==="custom"),h(4),P("disabled",s.loading.financialReport),h(3),P("ngIf",s.loading.financialReport),h(),P("ngIf",s.monthlyFinancialReport&&!s.loading.financialReport)}}function hY(n,t){n&1&&(a(0,"div",135),D(1,"i",136),c(2," \u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A... "),l())}function pY(n,t){n&1&&(a(0,"div",143),D(1,"i",263),a(2,"h4"),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0631\u0633\u0648\u0645 \u062A\u0633\u062C\u064A\u0644"),l(),a(4,"p"),c(5,"\u0633\u064A\u062A\u0645 \u0639\u0631\u0636 \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644 \u0647\u0646\u0627 \u0639\u0646\u062F \u062A\u0633\u062C\u064A\u0644\u0647\u0627"),l()())}function mY(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td"),c(4),l(),a(5,"td"),c(6),l(),a(7,"td"),c(8),l(),a(9,"td")(10,"span",148),c(11),l()(),a(12,"td"),c(13),l(),a(14,"td")(15,"button",264),D(16,"i",25),l()()()),n&2){let e=t.$implicit,i=T(3);h(2),$(i.formatDate(e.paymentDate)),h(2),$((e.student==null?null:e.student.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),h(2),$(i.formatCurrency(e.amount)),h(2),$(i.getPaymentMethodText(e.paymentMethod)),h(2),P("ngClass","badge-"+i.getStatusBadge(e.status)),h(),Z(" ",i.getStatusText(e.status)," "),h(2),$(e.invoiceNumber||"\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631")}}function gY(n,t){if(n&1&&(a(0,"table",146)(1,"thead")(2,"tr")(3,"th"),c(4,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639"),l(),a(5,"th"),c(6,"\u0627\u0644\u0637\u0627\u0644\u0628"),l(),a(7,"th"),c(8,"\u0627\u0644\u0645\u0628\u0644\u063A"),l(),a(9,"th"),c(10,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639"),l(),a(11,"th"),c(12,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(13,"th"),c(14,"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629"),l(),a(15,"th"),c(16,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(17,"tbody"),te(18,mY,17,7,"tr",147),l()()),n&2){let e=T(2);h(18),P("ngForOf",e.registrationFeeDetails)}}function _Y(n,t){if(n&1&&(a(0,"div",262)(1,"div",112)(2,"div",106)(3,"h3"),D(4,"i",24),c(5," \u062A\u0641\u0627\u0635\u064A\u0644 \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644"),l()(),a(6,"div",109)(7,"div",145),te(8,hY,3,0,"div",110)(9,pY,6,0,"div",133)(10,gY,19,1,"table",167),l()()()()),n&2){let e=T();h(8),P("ngIf",e.loading.registrationFees),h(),P("ngIf",!e.loading.registrationFees&&e.registrationFeeDetails.length===0),h(),P("ngIf",!e.loading.registrationFees&&e.registrationFeeDetails.length>0)}}function vY(n,t){n&1&&(a(0,"div",135),D(1,"i",136),c(2," \u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0641\u0648\u0627\u062A\u064A\u0631... "),l())}function xY(n,t){n&1&&(a(0,"div",143),D(1,"i",266),a(2,"h4"),c(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0641\u0648\u0627\u062A\u064A\u0631"),l(),a(4,"p"),c(5,"\u0633\u064A\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0641\u0648\u0627\u062A\u064A\u0631 \u062A\u0644\u0642\u0627\u0626\u064A\u0627\u064B \u0639\u0646\u062F \u0625\u062A\u0645\u0627\u0645 \u0627\u0644\u062F\u0641\u0639\u0627\u062A"),l()())}function yY(n,t){if(n&1&&(a(0,"tr")(1,"td"),c(2),l(),a(3,"td")(4,"span",148),c(5),l()(),a(6,"td"),c(7),l(),a(8,"td"),c(9),l(),a(10,"td"),c(11),l(),a(12,"td")(13,"span",148),c(14),l()(),a(15,"td"),c(16),l(),a(17,"td")(18,"button",264),D(19,"i",172),l(),a(20,"button",267),D(21,"i",11),l()()()),n&2){let e=t.$implicit,i=T(3);h(2),$(e.invoiceNumber),h(2),P("ngClass",_4(9,t$,e.type==="school-fee",e.type==="teacher",e.type==="staff",e.type==="other")),h(),Z(" ",e.type==="school-fee"?"\u0631\u0633\u0648\u0645 \u062A\u0633\u062C\u064A\u0644":e.type==="teacher"?"\u0645\u0639\u0644\u0645":e.type==="staff"?"\u0645\u0648\u0638\u0641":"\u0623\u062E\u0631\u0649"," "),h(2),$((e.recipient==null?null:e.recipient.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),h(2),$(i.formatCurrency(e.totalAmount)),h(2),$(i.formatDate(e.date)),h(2),P("ngClass","badge-"+i.getStatusBadge(e.status)),h(),Z(" ",i.getStatusText(e.status)," "),h(2),$(i.getPaymentMethodText(e.paymentMethod))}}function bY(n,t){if(n&1&&(a(0,"table",146)(1,"thead")(2,"tr")(3,"th"),c(4,"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629"),l(),a(5,"th"),c(6,"\u0627\u0644\u0646\u0648\u0639"),l(),a(7,"th"),c(8,"\u0627\u0644\u0645\u0633\u062A\u0644\u0645"),l(),a(9,"th"),c(10,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A"),l(),a(11,"th"),c(12,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),a(13,"th"),c(14,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),a(15,"th"),c(16,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639"),l(),a(17,"th"),c(18,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),a(19,"tbody"),te(20,yY,22,14,"tr",147),l()()),n&2){let e=T(2);h(20),P("ngForOf",e.invoices)}}function CY(n,t){if(n&1&&(a(0,"div",265)(1,"div",112)(2,"div",106)(3,"h3"),D(4,"i",25),c(5," \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0641\u0648\u0627\u062A\u064A\u0631"),l()(),a(6,"div",109)(7,"div",145),te(8,vY,3,0,"div",110)(9,xY,6,0,"div",133)(10,bY,21,1,"table",167),l()()()()),n&2){let e=T();h(8),P("ngIf",e.loading.transactions),h(),P("ngIf",!e.loading.transactions&&e.invoices.length===0),h(),P("ngIf",!e.loading.transactions&&e.invoices.length>0)}}function wY(n,t){if(n&1&&(a(0,"option",213),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Z(" ",e.name," ")}}function MY(n,t){if(n&1&&(a(0,"option",213),c(1),l()),n&2){let e=t.$implicit;P("value",e._id),h(),Mo(" ",e.name," - ",e.subject," (",(e.teacher==null?null:e.teacher.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641",") ")}}var Lv=class n{constructor(t,e,i,r,o){this.accountingService=t;this.authService=e;this.fb=i;this.teacherService=r;this.lessonsService=o;this.today=new Date().toISOString().split("T")[0],this.transactionForm=this.fb.group({type:["income",Ht.required],amount:["",[Ht.required,Ht.min(1)]],description:["",Ht.required],category:["tuition",Ht.required],date:[this.today,Ht.required]}),this.budgetForm=this.fb.group({title:["",Ht.required],amount:["",[Ht.required,Ht.min(1)]],category:["operational",Ht.required],description:[""],startDate:[this.today,Ht.required],endDate:["",Ht.required]}),this.expenseForm=this.fb.group({description:["",Ht.required],amount:["",[Ht.required,Ht.min(1)]],category:["salary",Ht.required],paymentMethod:["cash",Ht.required],receiptNumber:[""]}),this.schoolFeeForm=this.fb.group({studentId:["",Ht.required],amount:[60,[Ht.required,Ht.min(1)]],paymentMethod:["cash",Ht.required]}),this.classCommissionForm=this.fb.group({teacherId:["",Ht.required],classId:["",Ht.required],month:[new Date().toISOString().slice(0,7),Ht.required],round:[""],paymentMethod:["cash",Ht.required],notes:[""]}),this.financialReportForm=this.fb.group({periodType:["monthly"],month:[new Date().toISOString().slice(0,7)],startDate:[""],endDate:[""],year:[new Date().getFullYear()]})}activeTab="dashboard";transactions=[];dailyIncome={};weeklyIncome=[];monthlyIncome={};todayStats={};currentBalance=0;schoolFees=[];teacherCommissions=[];teachersList=[];lessonsList=[];budgets=[];expenses=[];invoices=[];teacherPayments=[];staffSalaries=[];financialReport={};classCommissionData=null;monthlyFinancialReport=null;registrationFeeDetails=[];quickFinancialStats={};classPaymentsData=[];filteredClassPayments=[];selectedPaymentMonth=new Date().toISOString().slice(0,7);transactionForm;budgetForm;expenseForm;schoolFeeForm;classCommissionForm;financialReportForm;dateFilter={startDate:"",endDate:""};searchTerm="";loading={transactions:!1,income:!1,stats:!1,export:!1,classCommission:!1,financialReport:!1,registrationFees:!1,classPayments:!1};today;ngOnInit(){this.loadDashboardData(),this.setupModalListeners(),this.loadQuickFinancialStats(),this.loadTeachers(),this.loadLessons()}setupModalListeners(){setTimeout(()=>{document.addEventListener("click",t=>{document.querySelectorAll("[data-modal]").forEach(i=>{let r=i;t.target===r&&this.closeModal(r)})}),document.addEventListener("keydown",t=>{if(t.key==="Escape"){let e=document.querySelector("[data-modal].show");e&&this.closeModal(e)}})},100)}switchTab(t){this.activeTab=t,this.loadTabData(t)}loadDashboardData(){this.loadDailyIncome(),this.loadTodayStats(),this.loadCurrentBalance(),this.loadTransactions()}loadTabData(t){switch(t){case"dashboard":this.loadDashboardData();break;case"transactions":this.loadTransactions();break;case"income":this.loadDailyIncome();break;case"expenses":this.loadExpenses();break;case"budgets":this.loadBudgets();break;case"school-fees":this.loadSchoolFees();break;case"commissions":this.loadTeacherCommissions();break;case"class-commission":this.loadClassCommissionData();break;case"financial-report":this.loadFinancialReportData();break;case"registration-fees":this.loadRegistrationFeesDetails();break;case"invoices":this.loadInvoices();break;case"class-payments":this.loadClassPayments();break}}loadClassPayments(){this.loading.classPayments=!0;let t=this.selectedPaymentMonth;this.accountingService.getClassPaymentsForMonth(t).subscribe({next:e=>{this.classPaymentsData=e,this.filteredClassPayments=[...e],this.loading.classPayments=!1},error:e=>{console.error("Error loading class payments:",e),this.loading.classPayments=!1,this.showError("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0627\u0644\u062D\u0635\u0635")}})}filterClassPayments(){let t=this.searchTerm.toLowerCase();if(!t){this.filteredClassPayments=[...this.classPaymentsData];return}this.filteredClassPayments=this.classPaymentsData.filter(e=>e.class?.name?.toLowerCase().includes(t)||e.teacher?.name?.toLowerCase().includes(t)||e.month?.includes(t))}onMonthChange(){this.loadClassPayments()}payClassPayment(t){this.showConfirmDialog("\u062F\u0641\u0639 \u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u062D\u0635\u0629",`\u0647\u0644 \u062A\u0631\u064A\u062F \u062F\u0641\u0639 \u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 ${t.teacher?.name} \u0644\u0644\u062D\u0635\u0629 ${t.class?.name} \u0644\u0634\u0647\u0631 ${t.month}\u061F`,"\u0646\u0639\u0645\u060C \u062F\u0641\u0639","\u0625\u0644\u063A\u0627\u0621").then(e=>{if(e.isConfirmed){this.loading.classPayments=!0;let i={teacherId:t.teacher?._id,classId:t.class?._id,month:t.month,paymentMethod:"cash"};this.accountingService.payClassCommission(i).subscribe({next:r=>{this.showSuccess("\u062A\u0645 \u062F\u0641\u0639 \u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadClassPayments(),this.loading.classPayments=!1},error:r=>{console.error("Error paying class commission:",r),this.showError("\u0641\u0634\u0644 \u0641\u064A \u062F\u0641\u0639 \u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u062D\u0635\u0629"),this.loading.classPayments=!1}})}})}loadDailyIncome(t){this.loading.income=!0,this.accountingService.getDailyIncome(t).subscribe({next:e=>{this.dailyIncome=e,this.loading.income=!1},error:e=>{console.error("Error loading daily income:",e),this.loading.income=!1,this.showError("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062F\u062E\u0644 \u0627\u0644\u064A\u0648\u0645\u064A")}})}loadTodayStats(){this.loading.stats=!0,this.accountingService.getTodayStats().subscribe({next:t=>{this.todayStats=t,this.loading.stats=!1},error:t=>{console.error("Error loading today stats:",t),this.loading.stats=!1}})}loadCurrentBalance(){this.accountingService.getCurrentBalance().subscribe({next:t=>{this.currentBalance=t.balance||0},error:t=>{console.error("Error loading balance:",t)}})}loadTransactions(){this.loading.transactions=!0;let t={};this.dateFilter.startDate&&(t.startDate=this.dateFilter.startDate),this.dateFilter.endDate&&(t.endDate=this.dateFilter.endDate),this.accountingService.getTransactions(t).subscribe({next:e=>{this.transactions=e,this.loading.transactions=!1},error:e=>{console.error("Error loading transactions:",e),this.loading.transactions=!1,this.showError("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A")}})}loadWeeklyIncome(){this.accountingService.getWeeklyIncome().subscribe({next:t=>{this.weeklyIncome=t.weeklyIncome||[]},error:t=>{console.error("Error loading weekly income:",t)}})}loadMonthlyIncome(){this.accountingService.getMonthlyIncome().subscribe({next:t=>{this.monthlyIncome=t},error:t=>{console.error("Error loading monthly income:",t)}})}loadSchoolFees(){this.accountingService.getSchoolFees().subscribe({next:t=>{this.schoolFees=t},error:t=>{console.error("Error loading school fees:",t),this.showError("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644")}})}loadTeacherCommissions(){this.accountingService.getTeacherCommissions().subscribe({next:t=>{this.teacherCommissions=t},error:t=>{console.error("Error loading teacher commissions:",t),this.showError("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0639\u0645\u0648\u0644\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629")}})}loadBudgets(){this.accountingService.getBudgets().subscribe({next:t=>{this.budgets=t},error:t=>{console.error("Error loading budgets:",t),this.showError("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u064A\u0632\u0627\u0646\u064A\u0627\u062A")}})}loadExpenses(){this.accountingService.getExpenses().subscribe({next:t=>{this.expenses=t},error:t=>{console.error("Error loading expenses:",t),this.showError("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062A")}})}loadInvoices(){this.accountingService.getInvoices().subscribe({next:t=>{this.invoices=t},error:t=>{console.error("Error loading invoices:",t),this.showError("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0641\u0648\u0627\u062A\u064A\u0631")}})}loadTeacherPayments(){this.accountingService.getTeacherPayments().subscribe({next:t=>{this.teacherPayments=t},error:t=>{console.error("Error loading teacher payments:",t)}})}loadStaffSalaries(){this.accountingService.getStaffSalaries().subscribe({next:t=>{this.staffSalaries=t},error:t=>{console.error("Error loading staff salaries:",t)}})}loadFinancialReport(){let t={};this.dateFilter.startDate&&(t.startDate=this.dateFilter.startDate),this.dateFilter.endDate&&(t.endDate=this.dateFilter.endDate),this.accountingService.getFinancialReport(t).subscribe({next:e=>{this.financialReport=e},error:e=>{console.error("Error loading financial report:",e),this.showError("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0645\u0627\u0644\u064A")}})}loadClassCommissionData(){this.classCommissionForm.reset({month:new Date().toISOString().slice(0,7),paymentMethod:"cash"}),this.classCommissionData=null}calculateClassCommission(){let t=this.classCommissionForm.value;if(!t.teacherId||!t.classId||!t.month){this.showWarning("\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 \u0648\u0627\u0644\u062D\u0635\u0629 \u0648\u0627\u0644\u0634\u0647\u0631");return}this.loading.classCommission=!0;let e={teacherId:t.teacherId,classId:t.classId,month:t.month,round:t.round||void 0};this.accountingService.calculateTeacherClassCommission(e).subscribe({next:i=>{this.classCommissionData=i,this.loading.classCommission=!1},error:i=>{console.error("Error calculating commission:",i),this.showError("\u0641\u0634\u0644 \u0641\u064A \u062D\u0633\u0627\u0628 \u0627\u0644\u0639\u0645\u0648\u0644\u0629"),this.loading.classCommission=!1}})}payClassCommission(){if(!this.classCommissionData)return;let t=this.classCommissionForm.value,e={teacherId:t.teacherId,classId:t.classId,month:t.month,round:t.round||null,paymentMethod:t.paymentMethod,notes:t.notes};this.showConfirmDialog("\u062F\u0641\u0639 \u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u062D\u0635\u0629",`\u0647\u0644 \u062A\u0631\u064A\u062F \u062F\u0641\u0639 \u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 ${this.classCommissionData.teacher.name} \u0644\u0644\u062D\u0635\u0629 ${this.classCommissionData.class.name}\u061F`,"\u0646\u0639\u0645\u060C \u062F\u0641\u0639","\u0625\u0644\u063A\u0627\u0621").then(i=>{i.isConfirmed&&(this.loading.classCommission=!0,this.accountingService.payClassCommission(e).subscribe({next:r=>{this.showSuccess(r.message),this.classCommissionData=null,this.classCommissionForm.reset({month:new Date().toISOString().slice(0,7),paymentMethod:"cash"}),this.loading.classCommission=!1},error:r=>{console.error("Error paying commission:",r),this.showError("\u0641\u0634\u0644 \u0641\u064A \u062F\u0641\u0639 \u0627\u0644\u0639\u0645\u0648\u0644\u0629"),this.loading.classCommission=!1}}))})}loadFinancialReportData(){this.loading.financialReport=!0;let t=this.financialReportForm.value,e={};t.periodType==="monthly"?(e.month=t.month.split("-")[1],e.year=t.month.split("-")[0]):t.periodType==="custom"?(e.startDate=t.startDate,e.endDate=t.endDate):t.periodType==="yearly"&&(e.year=t.year),this.accountingService.getMonthlyFinancialReport(e).subscribe({next:i=>{this.monthlyFinancialReport=i,this.loading.financialReport=!1},error:i=>{console.error("Error loading financial report:",i),this.showError("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0645\u0627\u0644\u064A"),this.loading.financialReport=!1}})}loadRegistrationFeesDetails(){this.loading.registrationFees=!0,this.accountingService.getRegistrationFeeDetails().subscribe({next:t=>{this.registrationFeeDetails=t,this.loading.registrationFees=!1},error:t=>{console.error("Error loading registration fees:",t),this.showError("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u062A\u0641\u0627\u0635\u064A\u0644 \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644"),this.loading.registrationFees=!1}})}loadQuickFinancialStats(){this.accountingService.getQuickFinancialStats().subscribe({next:t=>{this.quickFinancialStats=t},error:t=>{console.error("Error loading quick stats:",t)}})}loadTeachers(){this.teacherService.getTeachers().subscribe({next:t=>{this.teachersList=t},error:t=>{console.error("Error loading teachers:",t)}})}loadLessons(){this.lessonsService.getClasses().subscribe({next:t=>{this.lessonsList=t},error:t=>{console.error("Error loading lessons:",t)}})}exportFinancialReport(t){let e=this.financialReportForm.value;this.loading.export=!0,this.accountingService.exportFinancialReport(t,e).subscribe({next:i=>{let r=window.URL.createObjectURL(i),o=document.createElement("a");o.href=r,o.download=`\u0627\u0644\u062A\u0642\u0631\u064A\u0631-\u0627\u0644\u0645\u0627\u0644\u064A-${new Date().toISOString().split("T")[0]}.${t}`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(r),this.loading.export=!1,this.showSuccess("\u062A\u0645 \u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0628\u0646\u062C\u0627\u062D")},error:i=>{console.error("Error exporting report:",i),this.loading.export=!1,this.showError("\u0641\u0634\u0644 \u0641\u064A \u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u062A\u0642\u0631\u064A\u0631")}})}addTransaction(){if(this.transactionForm.invalid){this.showWarning("\u064A\u0631\u062C\u0649 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");return}let t=this.transactionForm.value;this.showConfirmDialog("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F\u061F","\u0633\u064A\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0645\u0639\u0627\u0645\u0644\u0629 \u0645\u0627\u0644\u064A\u0629 \u062C\u062F\u064A\u062F\u0629","\u0646\u0639\u0645\u060C \u0623\u0636\u0641","\u0625\u0644\u063A\u0627\u0621").then(e=>{e.isConfirmed&&this.accountingService.addTransaction(t).subscribe({next:i=>{this.showSuccess("\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629 \u0628\u0646\u062C\u0627\u062D"),this.transactionForm.reset({type:"income",amount:"",description:"",category:"tuition",date:this.today}),this.closeTransactionModal(),this.loadTransactions(),this.loadDashboardData()},error:i=>{console.error("Error adding transaction:",i),this.showError("\u0641\u0634\u0644 \u0641\u064A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629")}})})}createBudget(){if(this.budgetForm.invalid){this.showWarning("\u064A\u0631\u062C\u0649 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");return}let t=this.budgetForm.value;this.accountingService.createBudget(t).subscribe({next:e=>{this.showSuccess("\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0645\u064A\u0632\u0627\u0646\u064A\u0629 \u0628\u0646\u062C\u0627\u062D"),this.budgetForm.reset({title:"",amount:"",category:"operational",description:"",startDate:this.today,endDate:""}),this.closeBudgetModal(),this.loadBudgets()},error:e=>{console.error("Error creating budget:",e),this.showError("\u0641\u0634\u0644 \u0641\u064A \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0645\u064A\u0632\u0627\u0646\u064A\u0629")}})}addExpense(){if(this.expenseForm.invalid){this.showWarning("\u064A\u0631\u062C\u0649 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");return}let t=this.expenseForm.value;this.showConfirmDialog("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F\u061F","\u0633\u064A\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0645\u0635\u0631\u0648\u0641 \u062C\u062F\u064A\u062F","\u0646\u0639\u0645\u060C \u0623\u0636\u0641","\u0625\u0644\u063A\u0627\u0621").then(e=>{e.isConfirmed&&this.accountingService.addExpense(t).subscribe({next:i=>{this.showSuccess("\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0635\u0631\u0648\u0641 \u0628\u0646\u062C\u0627\u062D"),this.expenseForm.reset({description:"",amount:"",category:"salary",paymentMethod:"cash",receiptNumber:""}),this.closeExpenseModal(),this.loadExpenses(),this.loadDashboardData()},error:i=>{console.error("Error adding expense:",i),this.showError("\u0641\u0634\u0644 \u0641\u064A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0635\u0631\u0648\u0641")}})})}addSchoolFee(){if(this.schoolFeeForm.invalid){this.showWarning("\u064A\u0631\u062C\u0649 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");return}let t=this.schoolFeeForm.value;this.showConfirmDialog("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F\u061F","\u0633\u064A\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0631\u0633\u0648\u0645 \u062A\u0633\u062C\u064A\u0644 \u062C\u062F\u064A\u062F\u0629","\u0646\u0639\u0645\u060C \u0623\u0636\u0641","\u0625\u0644\u063A\u0627\u0621").then(e=>{if(e.isConfirmed){let i={type:"registration",amount:t.amount,description:`\u0631\u0633\u0648\u0645 \u062A\u0633\u062C\u064A\u0644 \u0644\u0644\u0637\u0627\u0644\u0628 ${t.studentId}`,category:"registration",date:this.today};this.accountingService.addTransaction(i).subscribe({next:r=>{this.showSuccess("\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644 \u0628\u0646\u062C\u0627\u062D"),this.schoolFeeForm.reset({studentId:"",amount:60,paymentMethod:"cash"}),this.closeSchoolFeeModal(),this.loadSchoolFees(),this.loadDashboardData()},error:r=>{console.error("Error adding school fee:",r),this.showError("\u0641\u0634\u0644 \u0641\u064A \u0625\u0636\u0627\u0641\u0629 \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644")}})}})}paySchoolFee(t){el.default.fire({title:"\u062F\u0641\u0639 \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644",html:`
        <p>\u0627\u0644\u0637\u0627\u0644\u0628: ${t.student?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}</p>
        <p>\u0627\u0644\u0645\u0628\u0644\u063A: ${t.amount} \u062F.\u062C</p>
        <div class="form-group">
          <label for="paymentMethod">\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639:</label>
          <select id="paymentMethod" class="form-control">
            <option value="cash">\u0646\u0642\u062F\u0627\u064B</option>
            <option value="bank">\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A</option>
            <option value="online">\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A</option>
          </select>
        </div>
      `,showCancelButton:!0,confirmButtonText:"\u062F\u0641\u0639",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-secondary"},buttonsStyling:!1,preConfirm:()=>({paymentMethod:document.getElementById("paymentMethod").value,paymentDate:new Date().toISOString()})}).then(e=>{e.isConfirmed&&this.accountingService.paySchoolFee(t._id,e.value).subscribe({next:i=>{this.showSuccess("\u062A\u0645 \u062F\u0641\u0639 \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644 \u0628\u0646\u062C\u0627\u062D"),this.loadSchoolFees(),this.loadDashboardData()},error:i=>{console.error("Error paying school fee:",i),this.showError("\u0641\u0634\u0644 \u0641\u064A \u062F\u0641\u0639 \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644")}})})}payTeacherCommission(t){el.default.fire({title:"\u062F\u0641\u0639 \u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630",html:`
        <p>\u0627\u0644\u0623\u0633\u062A\u0627\u0630: ${t.teacher?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}</p>
        <p>\u0627\u0644\u0645\u0628\u0644\u063A: ${t.amount} \u062F.\u062C</p>
        <p>\u0627\u0644\u0634\u0647\u0631: ${t.month}</p>
        <div class="form-group">
          <label for="paymentMethod">\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639:</label>
          <select id="paymentMethod" class="form-control">
            <option value="cash">\u0646\u0642\u062F\u0627\u064B</option>
            <option value="bank">\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A</option>
            <option value="online">\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A</option>
          </select>
        </div>
      `,showCancelButton:!0,confirmButtonText:"\u062F\u0641\u0639",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-secondary"},buttonsStyling:!1,preConfirm:()=>({paymentMethod:document.getElementById("paymentMethod").value,paymentDate:new Date().toISOString()})}).then(e=>{e.isConfirmed&&this.accountingService.payTeacherCommission(t._id,e.value).subscribe({next:i=>{this.showSuccess("\u062A\u0645 \u062F\u0641\u0639 \u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 \u0628\u0646\u062C\u0627\u062D"),this.loadTeacherCommissions(),this.loadDashboardData()},error:i=>{console.error("Error paying teacher commission:",i),this.showError("\u0641\u0634\u0644 \u0641\u064A \u062F\u0641\u0639 \u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630")}})})}formatDate(t){return t?(0,dd.default)(t).format("YYYY-MM-DD"):"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"}formatDateTime(t){return t?(0,dd.default)(t).format("YYYY-MM-DD HH:mm"):"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"}formatCurrency(t){return t?new Intl.NumberFormat("ar-DZ",{style:"currency",currency:"DZD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t):"0.00 \u062F.\u062C"}getTransactionTypeBadge(t){return t&&{income:"success",expense:"danger",registration:"info",payment:"primary",commission:"warning"}[t]||"secondary"}getTransactionTypeText(t){return t?{income:"\u0625\u064A\u0631\u0627\u062F",expense:"\u0645\u0635\u0631\u0648\u0641",registration:"\u062A\u0633\u062C\u064A\u0644",payment:"\u062F\u0641\u0639\u0629",commission:"\u0639\u0645\u0648\u0644\u0629"}[t]||t:"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"}getCategoryText(t){return t?{tuition:"\u0631\u0633\u0648\u0645 \u062F\u0631\u0627\u0633\u064A\u0629",salary:"\u0631\u0648\u0627\u062A\u0628",rent:"\u0625\u064A\u062C\u0627\u0631",utilities:"\u0645\u0631\u0627\u0641\u0642",supplies:"\u0645\u0633\u062A\u0644\u0632\u0645\u0627\u062A",other:"\u0623\u062E\u0631\u0649",registration:"\u0631\u0633\u0648\u0645 \u062A\u0633\u062C\u064A\u0644",operational:"\u062A\u0634\u063A\u064A\u0644\u064A",development:"\u062A\u0637\u0648\u064A\u0631",marketing:"\u062A\u0633\u0648\u064A\u0642",maintenance:"\u0635\u064A\u0627\u0646\u0629",transportation:"\u0645\u0648\u0627\u0635\u0644\u0627\u062A",insurance:"\u062A\u0623\u0645\u064A\u0646"}[t]||t:"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"}getPaymentMethodText(t){return t?{cash:"\u0646\u0642\u062F\u0627\u064B",bank:"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A",online:"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",check:"\u0634\u064A\u0643"}[t]||t:"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"}getStatusText(t){return t?{paid:"\u0645\u062F\u0641\u0648\u0639\u0629",pending:"\u0645\u0639\u0644\u0642\u0629",overdue:"\u0645\u062A\u0623\u062E\u0631\u0629",cancelled:"\u0645\u0644\u063A\u0627\u0629",active:"\u0646\u0634\u0637",inactive:"\u063A\u064A\u0631 \u0646\u0634\u0637",completed:"\u0645\u0643\u062A\u0645\u0644"}[t]||t:"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"}getStatusBadge(t){return t&&{paid:"success",pending:"warning",overdue:"danger",cancelled:"secondary",active:"success",inactive:"secondary",completed:"info"}[t]||"secondary"}getCategoryTransactionCount(t){return!this.transactions||!t?0:this.transactions.filter(e=>e.category===t&&e.type==="income").length}getCurrentDateFormatted(){return this.formatDate(this.today)}getCategoryIncome(t){return!this.transactions||!t?0:this.transactions.filter(e=>e.category===t&&e.type==="income").reduce((e,i)=>e+(i.amount||0),0)}getTopCategories(t=5){let e={};return this.transactions.forEach(i=>{if(i.type==="income"){let r=i.category;e[r]||(e[r]=0),e[r]+=i.amount||0}}),Object.entries(e).map(([i,r])=>({name:i,amount:r,count:this.getCategoryTransactionCount(i),percentage:this.calculateTotalIncome()>0?r/this.calculateTotalIncome()*100:0})).sort((i,r)=>r.amount-i.amount).slice(0,t)}applyDateFilter(){(this.dateFilter.startDate||this.dateFilter.endDate)&&(this.loadTransactions(),this.activeTab==="financial-report"&&this.loadFinancialReport())}clearDateFilter(){this.dateFilter={startDate:"",endDate:""},this.loadTransactions(),this.activeTab==="financial-report"&&this.loadFinancialReport()}exportToExcel(){let t={startDate:this.dateFilter.startDate,endDate:this.dateFilter.endDate};this.loading.export=!0,this.accountingService.exportReport("excel",t).subscribe({next:e=>{let i=window.URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=`\u0627\u0644\u062A\u0642\u0631\u064A\u0631-\u0627\u0644\u0645\u0627\u0644\u064A-${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(i),this.loading.export=!1,this.showSuccess("\u062A\u0645 \u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0628\u0646\u062C\u0627\u062D")},error:e=>{console.error("Error exporting report:",e),this.loading.export=!1,this.showError("\u0641\u0634\u0644 \u0641\u064A \u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u062A\u0642\u0631\u064A\u0631")}})}exportToPDF(){let t={startDate:this.dateFilter.startDate,endDate:this.dateFilter.endDate};this.loading.export=!0,this.accountingService.exportReport("pdf",t).subscribe({next:e=>{let i=window.URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=`\u0627\u0644\u062A\u0642\u0631\u064A\u0631-\u0627\u0644\u0645\u0627\u0644\u064A-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(i),this.loading.export=!1,this.showSuccess("\u062A\u0645 \u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0628\u0646\u062C\u0627\u062D")},error:e=>{console.error("Error exporting report:",e),this.loading.export=!1,this.showError("\u0641\u0634\u0644 \u0641\u064A \u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u062A\u0642\u0631\u064A\u0631")}})}openModal(t){let e=document.querySelector(`[data-modal="${t}"]`);e&&(e.classList.add("show"),document.body.style.overflow="hidden",document.body.style.paddingRight="15px",setTimeout(()=>{let i=e.querySelector("input, select, textarea");i&&i.focus()},100))}closeModal(t){t.classList.remove("show"),document.body.style.overflow="auto",document.body.style.paddingRight=""}openTransactionModal(){this.openModal("transaction-modal")}closeTransactionModal(){let t=document.querySelector('[data-modal="transaction-modal"]');t&&this.closeModal(t)}openExpenseModal(){this.openModal("expense-modal")}closeExpenseModal(){let t=document.querySelector('[data-modal="expense-modal"]');t&&this.closeModal(t)}openBudgetModal(){this.openModal("budget-modal")}closeBudgetModal(){let t=document.querySelector('[data-modal="budget-modal"]');t&&this.closeModal(t)}openSchoolFeeModal(){this.openModal("school-fee-modal")}closeSchoolFeeModal(){let t=document.querySelector('[data-modal="school-fee-modal"]');t&&this.closeModal(t)}openClassCommissionModal(){this.openModal("class-commission-modal")}closeClassCommissionModal(){let t=document.querySelector('[data-modal="class-commission-modal"]');t&&this.closeModal(t)}showSuccess(t){el.default.fire({title:"\u0646\u062C\u0627\u062D!",text:t,icon:"success",confirmButtonText:"\u062D\u0633\u0646\u0627\u064B",confirmButtonColor:"#28a745",timer:2e3,timerProgressBar:!0})}showError(t){el.default.fire({title:"\u062E\u0637\u0623!",text:t,icon:"error",confirmButtonText:"\u062D\u0633\u0646\u0627\u064B",confirmButtonColor:"#dc3545"})}showWarning(t){el.default.fire({title:"\u062A\u0646\u0628\u064A\u0647!",text:t,icon:"warning",confirmButtonText:"\u062D\u0633\u0646\u0627\u064B",confirmButtonColor:"#ffc107"})}showConfirmDialog(t,e,i,r){return el.default.fire({title:t,text:e,icon:"question",showCancelButton:!0,confirmButtonText:i,cancelButtonText:r,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",reverseButtons:!0,focusCancel:!0})}validateForm(t){return t.invalid?(Object.keys(t.controls).forEach(e=>{let i=t.get(e);i?.invalid&&i.markAsTouched()}),!1):!0}searchTransactions(){if(this.searchTerm.trim()===""){this.loadTransactions();return}this.loading.transactions=!0;let t={search:this.searchTerm,startDate:this.dateFilter.startDate,endDate:this.dateFilter.endDate};this.accountingService.getTransactions(t).subscribe({next:e=>{this.transactions=e,this.loading.transactions=!1},error:e=>{console.error("Error searching transactions:",e),this.loading.transactions=!1,this.showError("\u0641\u0634\u0644 \u0641\u064A \u0627\u0644\u0628\u062D\u062B")}})}clearSearch(){this.searchTerm="",this.loadTransactions()}calculateTotalIncome(){return this.transactions.filter(t=>t.type==="income").reduce((t,e)=>t+(e.amount||0),0)}calculateTotalExpenses(){return this.transactions.filter(t=>t.type==="expense").reduce((t,e)=>t+(e.amount||0),0)}calculateNetProfit(){return this.calculateTotalIncome()-this.calculateTotalExpenses()}refreshData(){this.loadTabData(this.activeTab),this.showSuccess("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0628\u0646\u062C\u0627\u062D")}printReport(){window.print()}getMonthlyTrend(){let t={};return this.transactions.forEach(e=>{let i=(0,dd.default)(e.date).format("YYYY-MM");t[i]||(t[i]={income:0,expense:0}),e.type==="income"?t[i].income+=e.amount||0:e.type==="expense"&&(t[i].expense+=e.amount||0)}),Object.entries(t).map(([e,i])=>({month:e,income:i.income,expense:i.expense,profit:i.income-i.expense})).sort((e,i)=>e.month.localeCompare(i.month))}getTransactionCounts(){return{income:this.transactions.filter(t=>t.type==="income").length,expense:this.transactions.filter(t=>t.type==="expense").length}}getCurrentMonthData(){let t=(0,dd.default)().format("YYYY-MM"),e=this.transactions.filter(i=>(0,dd.default)(i.date).format("YYYY-MM")===t);return{income:e.filter(i=>i.type==="income").reduce((i,r)=>i+(r.amount||0),0),expense:e.filter(i=>i.type==="expense").reduce((i,r)=>i+(r.amount||0),0)}}getBudgetUtilization(t){return!t.amount||t.amount===0?0:(t.actualSpending||0)/t.amount*100}isOverBudget(t){return(t.actualSpending||0)>t.amount}formatPercentage(t){return`${t.toFixed(1)}%`}getPercentageColor(t){return t<70?"success":t<90?"warning":"danger"}onPeriodTypeChange(){let t=this.financialReportForm.get("periodType")?.value;t==="monthly"?(this.financialReportForm.get("month")?.setValidators([Ht.required]),this.financialReportForm.get("startDate")?.clearValidators(),this.financialReportForm.get("endDate")?.clearValidators(),this.financialReportForm.get("year")?.clearValidators()):t==="custom"?(this.financialReportForm.get("startDate")?.setValidators([Ht.required]),this.financialReportForm.get("endDate")?.setValidators([Ht.required]),this.financialReportForm.get("month")?.clearValidators(),this.financialReportForm.get("year")?.clearValidators()):t==="yearly"&&(this.financialReportForm.get("year")?.setValidators([Ht.required]),this.financialReportForm.get("month")?.clearValidators(),this.financialReportForm.get("startDate")?.clearValidators(),this.financialReportForm.get("endDate")?.clearValidators()),this.financialReportForm.get("month")?.updateValueAndValidity(),this.financialReportForm.get("startDate")?.updateValueAndValidity(),this.financialReportForm.get("endDate")?.updateValueAndValidity(),this.financialReportForm.get("year")?.updateValueAndValidity()}viewClassPaymentDetails(t){let e=`
      <div class="text-right">
        <h5>\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062D\u0635\u0629: ${t.class?.name}</h5>
        <hr>
        <p><strong>\u0627\u0644\u0623\u0633\u062A\u0627\u0630:</strong> ${t.teacher?.name}</p>
        <p><strong>\u0627\u0644\u0634\u0647\u0631:</strong> ${t.month}</p>
        <p><strong>\u0633\u0639\u0631 \u0627\u0644\u062D\u0635\u0629:</strong> ${this.formatCurrency(t.class?.price)}</p>
        <p><strong>\u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 (70%):</strong> ${this.formatCurrency(t.commissionAmount)}</p>
        <p><strong>\u0639\u062F\u062F \u0627\u0644\u0637\u0644\u0627\u0628:</strong> ${t.students?.total}</p>
        <p><strong>\u0637\u0644\u0627\u0628 \u0645\u062F\u0641\u0648\u0639\u064A\u0646:</strong> ${t.students?.paid}</p>
        <hr>
        <h6>\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0637\u0644\u0627\u0628:</h6>
    `;t.students?.list&&t.students.list.length>0?(e+='<ul class="list-group">',t.students.list.forEach(i=>{let r=i.hasPaid?"\u0645\u062F\u0641\u0648\u0639":"\u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639",o=i.hasPaid?"badge-success":"badge-danger";e+=`
          <li class="list-group-item d-flex justify-content-between align-items-center">
            ${i.studentName}
            <span class="badge ${o}">${r}</span>
          </li>
        `}),e+="</ul>"):e+='<p class="text-muted">\u0644\u0627 \u064A\u0648\u062C\u062F \u0637\u0644\u0627\u0628 \u0645\u0633\u062C\u0644\u064A\u0646</p>',e+="</div>",el.default.fire({title:"\u062A\u0641\u0627\u0635\u064A\u0644 \u062F\u0641\u0639 \u0627\u0644\u062D\u0635\u0629",html:e,width:"600px",showCloseButton:!0,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B",confirmButtonColor:"#28a745"})}getTotalStudents(){return this.filteredClassPayments.reduce((t,e)=>t+(e.students?.total||0),0)}getTotalCommission(){return this.filteredClassPayments.reduce((t,e)=>t+(e.commissionAmount||0),0)}getPendingPaymentsCount(){return this.filteredClassPayments.filter(t=>t.status==="pending"&&t.students?.paid>0).length}static \u0275fac=function(e){return new(e||n)(Te(Nv),Te(Cn),Te(_g),Te(Ka),Te(gs))};static \u0275cmp=vn({type:n,selectors:[["app-accounting"]],decls:327,vars:48,consts:[[1,"accounting-container"],[1,"header-section"],[1,"fas","fa-calculator"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-minus"],[1,"btn","btn-info",3,"click"],[1,"fas","fa-sync-alt"],[1,"btn","btn-warning",3,"click"],[1,"fas","fa-print"],[1,"tabs-navigation"],[1,"tabs-nav"],[1,"tab-btn",3,"click"],[1,"fas","fa-tachometer-alt"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-money-bill-wave"],[1,"fas","fa-receipt"],[1,"fas","fa-chart-pie"],[1,"fas","fa-user-graduate"],[1,"fas","fa-chalkboard-teacher"],[1,"fas","fa-money-check-alt"],[1,"fas","fa-file-invoice-dollar"],[1,"fas","fa-id-card"],[1,"fas","fa-file-invoice"],[1,"tab-content"],["class","dashboard-tab",4,"ngIf"],["class","transactions-tab",4,"ngIf"],["class","income-tab",4,"ngIf"],["class","expenses-tab",4,"ngIf"],["class","budgets-tab",4,"ngIf"],["class","school-fees-tab",4,"ngIf"],["class","commissions-tab",4,"ngIf"],["class","class-commission-tab",4,"ngIf"],["class","class-payments-tab",4,"ngIf"],["class","financial-report-tab",4,"ngIf"],["class","registration-fees-tab",4,"ngIf"],["class","invoices-tab",4,"ngIf"],["data-modal","transaction-modal",1,"transaction-modal"],[1,"transaction-modal-dialog"],[1,"transaction-modal-content"],[1,"transaction-modal-header"],[1,"transaction-modal-title"],["type","button",1,"close",3,"click"],[1,"transaction-modal-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["formControlName","type","required","",1,"form-control"],["value","income"],["value","expense"],["value","registration"],["type","number","formControlName","amount","min","1","required","","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0645\u0628\u0644\u063A",1,"form-control"],["type","text","formControlName","description","required","","placeholder","\u0623\u062F\u062E\u0644 \u0648\u0635\u0641 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629",1,"form-control"],["formControlName","category","required","",1,"form-control"],["value","tuition"],["value","salary"],["value","rent"],["value","utilities"],["value","supplies"],["value","other"],["type","date","formControlName","date","required","",1,"form-control"],[1,"transaction-modal-footer"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fas","fa-check"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],["data-modal","expense-modal",1,"transaction-modal"],["type","text","formControlName","description","required","","placeholder","\u0648\u0635\u0641 \u0627\u0644\u0645\u0635\u0631\u0648\u0641",1,"form-control"],["value","maintenance"],["value","marketing"],["formControlName","paymentMethod","required","",1,"form-control"],["value","cash"],["value","bank"],["value","online"],["type","text","formControlName","receiptNumber","placeholder","\u0631\u0642\u0645 \u0627\u0644\u0625\u064A\u0635\u0627\u0644",1,"form-control"],["data-modal","budget-modal",1,"transaction-modal"],["type","text","formControlName","title","required","","placeholder","\u0623\u062F\u062E\u0644 \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u064A\u0632\u0627\u0646\u064A\u0629",1,"form-control"],["value","operational"],["value","salaries"],["value","development"],["formControlName","description","rows","2","placeholder","\u0648\u0635\u0641 \u0627\u0644\u0645\u064A\u0632\u0627\u0646\u064A\u0629",1,"form-control"],[1,"row"],[1,"col-md-6"],["type","date","formControlName","startDate","required","",1,"form-control"],["type","date","formControlName","endDate","required","",1,"form-control"],["data-modal","school-fee-modal",1,"transaction-modal"],["type","text","formControlName","studentId","required","","placeholder","\u0623\u062F\u062E\u0644 \u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628",1,"form-control"],["type","number","formControlName","amount","min","1","required","","value","60",1,"form-control"],["data-modal","class-commission-modal",1,"transaction-modal"],["formControlName","teacherId","required","",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","classId","required","",1,"form-control"],["type","month","formControlName","month","required","",1,"form-control"],["formControlName","paymentMethod",1,"form-control"],[1,"dashboard-tab"],[1,"quick-stats"],[1,"stat-card","bg-success"],[1,"stat-icon"],[1,"fas","fa-wallet"],[1,"stat-content"],[1,"stat-card","bg-info"],[1,"stat-card","bg-danger"],[1,"stat-card","bg-warning"],[1,"card","mb-4"],[1,"card-header"],[1,"fas","fa-calendar-day"],[1,"date-badge"],[1,"card-body"],["class","loading-spinner",4,"ngIf"],["class","daily-income-content",4,"ngIf"],[1,"card"],[1,"fas","fa-chart-line"],[1,"financial-stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value","text-success"],[1,"stat-value","text-danger"],[1,"stat-value","text-warning"],[1,"stat-value"],[1,"fas","fa-bolt"],[1,"quick-actions"],[1,"btn","btn-outline-primary","btn-block","mb-2",3,"click"],[1,"fas","fa-plus-circle"],[1,"btn","btn-outline-success","btn-block","mb-2",3,"click"],[1,"fas","fa-minus-circle"],[1,"btn","btn-outline-info","btn-block","mb-2",3,"click"],[1,"btn","btn-outline-warning","btn-block",3,"click"],[1,"fas","fa-user-plus"],[1,"fas","fa-history"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"],["class","empty-state",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],[1,"daily-income-content"],[1,"total-income"],[1,"income-breakdown"],[1,"breakdown-item"],[1,"breakdown-label"],[1,"breakdown-value"],[1,"empty-state"],[1,"fas","fa-exchange-alt","fa-2x"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[3,"ngClass"],[1,"transactions-tab"],[1,"header-controls"],[1,"filters-section"],[1,"col-md-3"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-4"],[1,"input-group"],["type","text","placeholder","\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0648\u0635\u0641 \u0623\u0648 \u0627\u0644\u0645\u0628\u0644\u063A...",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group-append"],[1,"btn","btn-outline-primary",3,"click"],[1,"fas","fa-search"],[1,"btn","btn-outline-secondary",3,"click"],[1,"col-md-2"],[1,"btn-group","d-flex"],[1,"fas","fa-filter"],[1,"btn","btn-secondary",3,"click"],[1,"table-responsive","mt-3"],["class","table table-hover",4,"ngIf"],["class","summary-section mt-4",4,"ngIf"],[1,"fas","fa-exchange-alt","fa-3x"],[1,"category-badge"],["title","\u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644",1,"btn","btn-sm","btn-info"],[1,"fas","fa-eye"],[1,"summary-section","mt-4"],[1,"summary-card","bg-success"],[1,"summary-card","bg-danger"],[1,"summary-card",3,"ngClass"],[1,"income-tab"],[1,"income-reports"],[1,"report-card"],[1,"report-header"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"report-body"],[4,"ngIf"],[1,"fas","fa-calendar-alt"],[1,"income-total"],[1,"card","mt-4"],[1,"table"],[1,"progress"],[1,"progress-bar"],[1,"expenses-tab"],[1,"fas","fa-receipt","fa-3x"],[1,"text-danger"],[1,"badge","badge-secondary"],[1,"summary-card","bg-info"],[1,"budgets-tab"],[1,"fas","fa-chart-pie","fa-3x"],[1,"progress-bar",3,"ngClass"],["title","\u062A\u0639\u062F\u064A\u0644",1,"btn","btn-sm","btn-warning"],[1,"fas","fa-edit"],[1,"school-fees-tab"],[1,"fas","fa-user-graduate","fa-3x"],["class","btn btn-sm btn-success","title","\u062F\u0641\u0639",3,"click",4,"ngIf"],["title","\u062F\u0641\u0639",1,"btn","btn-sm","btn-success",3,"click"],[1,"commissions-tab"],[1,"fas","fa-chalkboard-teacher","fa-3x"],[1,"class-commission-tab"],[1,"commission-calculator"],["type","text","formControlName","round","placeholder","\u0645\u062B\u0627\u0644: \u0627\u0644\u062C\u0648\u0644\u0629 \u0627\u0644\u0623\u0648\u0644\u0649",1,"form-control"],["formControlName","notes","rows","2",1,"form-control"],[1,"form-actions"],["class","loading-spinner mt-4",4,"ngIf"],["class","commission-results mt-4",4,"ngIf"],[3,"value"],[1,"loading-spinner","mt-4"],[1,"commission-results","mt-4"],[1,"results-header"],[1,"btn","btn-success",3,"click","disabled"],[1,"results-summary"],[1,"summary-card","bg-warning"],[1,"summary-card","bg-secondary"],[1,"table","table-sm"],[1,"text-success"],[1,"class-payments-tab"],["title","\u062A\u062D\u062F\u064A\u062B",1,"btn","btn-info",3,"click"],[1,"row","mb-4"],["type","month",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"col-md-8"],["type","text","placeholder","\u0628\u062D\u062B \u0641\u064A \u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629 \u0623\u0648 \u0627\u0644\u0623\u0633\u062A\u0627\u0630...",1,"form-control",3,"ngModelChange","keyup","ngModel"],["class","loading-spinner text-center py-5",4,"ngIf"],[1,"loading-spinner","text-center","py-5"],[1,"fas","fa-spinner","fa-spin","fa-3x"],[1,"mt-3"],["class","empty-state text-center py-5",4,"ngIf"],[1,"empty-state","text-center","py-5"],[1,"fas","fa-money-check-alt","fa-3x","text-muted"],[1,"text-muted"],[1,"badge","badge-info"],[1,"text-warning"],["class","d-block",4,"ngIf"],["title","\u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644",1,"btn","btn-sm","btn-info","mb-1",3,"click"],["class","btn btn-sm btn-success mb-1","title","\u062F\u0641\u0639 \u0627\u0644\u0639\u0645\u0648\u0644\u0629",3,"click",4,"ngIf"],["class","btn btn-sm btn-secondary mb-1","title","\u0639\u0631\u0636 \u0627\u0644\u0625\u064A\u0635\u0627\u0644",4,"ngIf"],[1,"d-block"],["title","\u062F\u0641\u0639 \u0627\u0644\u0639\u0645\u0648\u0644\u0629",1,"btn","btn-sm","btn-success","mb-1",3,"click"],["title","\u0639\u0631\u0636 \u0627\u0644\u0625\u064A\u0635\u0627\u0644",1,"btn","btn-sm","btn-secondary","mb-1"],[1,"financial-report-tab"],[1,"fas","fa-file-excel"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-file-pdf"],[1,"report-filters"],["formControlName","periodType",1,"form-control",3,"change"],["value","monthly"],["value","custom"],["value","yearly"],["class","col-md-3",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"fas","fa-chart-bar"],["class","report-results mt-4",4,"ngIf"],["type","number","formControlName","year","min","2020","max","2030","required","",1,"form-control"],[1,"report-results","mt-4"],[1,"summary-cards"],[1,"registration-fees-tab"],[1,"fas","fa-id-card","fa-3x"],["title","\u0639\u0631\u0636 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629",1,"btn","btn-sm","btn-info"],[1,"invoices-tab"],[1,"fas","fa-file-invoice","fa-3x"],["title","\u0637\u0628\u0627\u0639\u0629",1,"btn","btn-sm","btn-warning"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"h1"),D(3,"i",2),c(4," \u0627\u0644\u0646\u0638\u0627\u0645 \u0627\u0644\u0645\u062D\u0627\u0633\u0628\u064A"),l(),a(5,"div",3)(6,"button",4),R("click",function(){return i.openTransactionModal()}),D(7,"i",5),c(8," \u0625\u0636\u0627\u0641\u0629 \u0645\u0639\u0627\u0645\u0644\u0629 "),l(),a(9,"button",6),R("click",function(){return i.openExpenseModal()}),D(10,"i",7),c(11," \u0625\u0636\u0627\u0641\u0629 \u0645\u0635\u0631\u0648\u0641 "),l(),a(12,"button",8),R("click",function(){return i.refreshData()}),D(13,"i",9),c(14," \u062A\u062D\u062F\u064A\u062B "),l(),a(15,"button",10),R("click",function(){return i.printReport()}),D(16,"i",11),c(17," \u0637\u0628\u0627\u0639\u0629 "),l()()(),a(18,"div",12)(19,"nav",13)(20,"button",14),R("click",function(){return i.switchTab("dashboard")}),D(21,"i",15),c(22," \u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645 "),l(),a(23,"button",14),R("click",function(){return i.switchTab("transactions")}),D(24,"i",16),c(25," \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A "),l(),a(26,"button",14),R("click",function(){return i.switchTab("income")}),D(27,"i",17),c(28," \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A "),l(),a(29,"button",14),R("click",function(){return i.switchTab("expenses")}),D(30,"i",18),c(31," \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062A "),l(),a(32,"button",14),R("click",function(){return i.switchTab("budgets")}),D(33,"i",19),c(34," \u0627\u0644\u0645\u064A\u0632\u0627\u0646\u064A\u0627\u062A "),l(),a(35,"button",14),R("click",function(){return i.switchTab("school-fees")}),D(36,"i",20),c(37," \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644 "),l(),a(38,"button",14),R("click",function(){return i.switchTab("commissions")}),D(39,"i",21),c(40," \u0639\u0645\u0648\u0644\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629 "),l(),a(41,"button",14),R("click",function(){return i.switchTab("class-commission")}),D(42,"i",2),c(43," \u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u062D\u0635\u0629 "),l(),a(44,"button",14),R("click",function(){return i.switchTab("class-payments")}),D(45,"i",22),c(46," \u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0627\u0644\u062D\u0635\u0635 "),l(),a(47,"button",14),R("click",function(){return i.switchTab("financial-report")}),D(48,"i",23),c(49," \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0645\u0627\u0644\u064A "),l(),a(50,"button",14),R("click",function(){return i.switchTab("registration-fees")}),D(51,"i",24),c(52," \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062A\u0641\u0635\u064A\u0644\u064A\u0629 "),l(),a(53,"button",14),R("click",function(){return i.switchTab("invoices")}),D(54,"i",25),c(55," \u0627\u0644\u0641\u0648\u0627\u062A\u064A\u0631 "),l()()(),a(56,"div",26),te(57,l$,111,17,"div",27)(58,p$,46,7,"div",28)(59,v$,50,4,"div",29)(60,M$,16,4,"div",30)(61,D$,15,3,"div",31)(62,F$,15,3,"div",32)(63,z$,11,3,"div",33)(64,Y$,65,6,"div",34)(65,iY,30,5,"div",35)(66,fY,40,10,"div",36)(67,_Y,11,3,"div",37)(68,CY,11,3,"div",38),l(),a(69,"div",39)(70,"div",40)(71,"div",41)(72,"div",42)(73,"h5",43),D(74,"i",16),c(75," \u0625\u0636\u0627\u0641\u0629 \u0645\u0639\u0627\u0645\u0644\u0629 \u0645\u0627\u0644\u064A\u0629 "),l(),a(76,"button",44),R("click",function(){return i.closeTransactionModal()}),a(77,"span"),c(78,"\xD7"),l()()(),a(79,"div",45)(80,"form",46),R("ngSubmit",function(){return i.addTransaction()}),a(81,"div",47)(82,"label"),c(83,"\u0646\u0648\u0639 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629 *"),l(),a(84,"select",48)(85,"option",49),c(86,"\u0625\u064A\u0631\u0627\u062F"),l(),a(87,"option",50),c(88,"\u0645\u0635\u0631\u0648\u0641"),l(),a(89,"option",51),c(90,"\u0631\u0633\u0648\u0645 \u062A\u0633\u062C\u064A\u0644"),l()()(),a(91,"div",47)(92,"label"),c(93,"\u0627\u0644\u0645\u0628\u0644\u063A *"),l(),D(94,"input",52),l(),a(95,"div",47)(96,"label"),c(97,"\u0627\u0644\u0648\u0635\u0641 *"),l(),D(98,"input",53),l(),a(99,"div",47)(100,"label"),c(101,"\u0627\u0644\u062A\u0635\u0646\u064A\u0641 *"),l(),a(102,"select",54)(103,"option",55),c(104,"\u0631\u0633\u0648\u0645 \u062F\u0631\u0627\u0633\u064A\u0629"),l(),a(105,"option",56),c(106,"\u0631\u0648\u0627\u062A\u0628"),l(),a(107,"option",57),c(108,"\u0625\u064A\u062C\u0627\u0631"),l(),a(109,"option",58),c(110,"\u0645\u0631\u0627\u0641\u0642"),l(),a(111,"option",59),c(112,"\u0645\u0633\u062A\u0644\u0632\u0645\u0627\u062A"),l(),a(113,"option",51),c(114,"\u0631\u0633\u0648\u0645 \u062A\u0633\u062C\u064A\u0644"),l(),a(115,"option",60),c(116,"\u0623\u062E\u0631\u0649"),l()()(),a(117,"div",47)(118,"label"),c(119,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E *"),l(),D(120,"input",61),l(),a(121,"div",62)(122,"button",63),D(123,"i",64),c(124," \u062D\u0641\u0638 "),l(),a(125,"button",65),R("click",function(){return i.closeTransactionModal()}),D(126,"i",66),c(127," \u0625\u0644\u063A\u0627\u0621 "),l()()()()()()(),a(128,"div",67)(129,"div",40)(130,"div",41)(131,"div",42)(132,"h5",43),D(133,"i",18),c(134," \u0625\u0636\u0627\u0641\u0629 \u0645\u0635\u0631\u0648\u0641 "),l(),a(135,"button",44),R("click",function(){return i.closeExpenseModal()}),a(136,"span"),c(137,"\xD7"),l()()(),a(138,"div",45)(139,"form",46),R("ngSubmit",function(){return i.addExpense()}),a(140,"div",47)(141,"label"),c(142,"\u0627\u0644\u0648\u0635\u0641 *"),l(),D(143,"input",68),l(),a(144,"div",47)(145,"label"),c(146,"\u0627\u0644\u0645\u0628\u0644\u063A *"),l(),D(147,"input",52),l(),a(148,"div",47)(149,"label"),c(150,"\u0627\u0644\u062A\u0635\u0646\u064A\u0641 *"),l(),a(151,"select",54)(152,"option",56),c(153,"\u0631\u0648\u0627\u062A\u0628"),l(),a(154,"option",57),c(155,"\u0625\u064A\u062C\u0627\u0631"),l(),a(156,"option",58),c(157,"\u0645\u0631\u0627\u0641\u0642"),l(),a(158,"option",59),c(159,"\u0645\u0633\u062A\u0644\u0632\u0645\u0627\u062A"),l(),a(160,"option",69),c(161,"\u0635\u064A\u0627\u0646\u0629"),l(),a(162,"option",70),c(163,"\u062A\u0633\u0648\u064A\u0642"),l(),a(164,"option",60),c(165,"\u0623\u062E\u0631\u0649"),l()()(),a(166,"div",47)(167,"label"),c(168,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639 *"),l(),a(169,"select",71)(170,"option",72),c(171,"\u0646\u0642\u062F\u0627\u064B"),l(),a(172,"option",73),c(173,"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A"),l(),a(174,"option",74),c(175,"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),l()()(),a(176,"div",47)(177,"label"),c(178,"\u0631\u0642\u0645 \u0627\u0644\u0625\u064A\u0635\u0627\u0644 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),l(),D(179,"input",75),l(),a(180,"div",62)(181,"button",63),D(182,"i",64),c(183," \u062D\u0641\u0638 "),l(),a(184,"button",65),R("click",function(){return i.closeExpenseModal()}),D(185,"i",66),c(186," \u0625\u0644\u063A\u0627\u0621 "),l()()()()()()(),a(187,"div",76)(188,"div",40)(189,"div",41)(190,"div",42)(191,"h5",43),D(192,"i",19),c(193," \u0625\u0646\u0634\u0627\u0621 \u0645\u064A\u0632\u0627\u0646\u064A\u0629 "),l(),a(194,"button",44),R("click",function(){return i.closeBudgetModal()}),a(195,"span"),c(196,"\xD7"),l()()(),a(197,"div",45)(198,"form",46),R("ngSubmit",function(){return i.createBudget()}),a(199,"div",47)(200,"label"),c(201,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u064A\u0632\u0627\u0646\u064A\u0629 *"),l(),D(202,"input",77),l(),a(203,"div",47)(204,"label"),c(205,"\u0627\u0644\u0645\u0628\u0644\u063A *"),l(),D(206,"input",52),l(),a(207,"div",47)(208,"label"),c(209,"\u0627\u0644\u062A\u0635\u0646\u064A\u0641 *"),l(),a(210,"select",54)(211,"option",78),c(212,"\u062A\u0634\u063A\u064A\u0644\u064A"),l(),a(213,"option",79),c(214,"\u0631\u0648\u0627\u062A\u0628"),l(),a(215,"option",80),c(216,"\u062A\u0637\u0648\u064A\u0631"),l(),a(217,"option",70),c(218,"\u062A\u0633\u0648\u064A\u0642"),l(),a(219,"option",60),c(220,"\u0623\u062E\u0631\u0649"),l()()(),a(221,"div",47)(222,"label"),c(223,"\u0627\u0644\u0648\u0635\u0641 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),l(),D(224,"textarea",81),l(),a(225,"div",82)(226,"div",83)(227,"div",47)(228,"label"),c(229,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0621 *"),l(),D(230,"input",84),l()(),a(231,"div",83)(232,"div",47)(233,"label"),c(234,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0627\u0646\u062A\u0647\u0627\u0621 *"),l(),D(235,"input",85),l()()(),a(236,"div",62)(237,"button",63),D(238,"i",64),c(239," \u0625\u0646\u0634\u0627\u0621 "),l(),a(240,"button",65),R("click",function(){return i.closeBudgetModal()}),D(241,"i",66),c(242," \u0625\u0644\u063A\u0627\u0621 "),l()()()()()()(),a(243,"div",86)(244,"div",40)(245,"div",41)(246,"div",42)(247,"h5",43),D(248,"i",20),c(249," \u062A\u0633\u062C\u064A\u0644 \u0631\u0633\u0648\u0645 \u062A\u0633\u062C\u064A\u0644 "),l(),a(250,"button",44),R("click",function(){return i.closeSchoolFeeModal()}),a(251,"span"),c(252,"\xD7"),l()()(),a(253,"div",45)(254,"form",46),R("ngSubmit",function(){return i.addSchoolFee()}),a(255,"div",47)(256,"label"),c(257,"\u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628 *"),l(),D(258,"input",87),l(),a(259,"div",47)(260,"label"),c(261,"\u0627\u0644\u0645\u0628\u0644\u063A *"),l(),D(262,"input",88),l(),a(263,"div",47)(264,"label"),c(265,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639 *"),l(),a(266,"select",71)(267,"option",72),c(268,"\u0646\u0642\u062F\u0627\u064B"),l(),a(269,"option",73),c(270,"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A"),l(),a(271,"option",74),c(272,"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),l()()(),a(273,"div",62)(274,"button",63),D(275,"i",64),c(276," \u062A\u0633\u062C\u064A\u0644 "),l(),a(277,"button",65),R("click",function(){return i.closeSchoolFeeModal()}),D(278,"i",66),c(279," \u0625\u0644\u063A\u0627\u0621 "),l()()()()()()(),a(280,"div",89)(281,"div",40)(282,"div",41)(283,"div",42)(284,"h5",43),D(285,"i",2),c(286," \u062D\u0633\u0627\u0628 \u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u062D\u0635\u0629 "),l(),a(287,"button",44),R("click",function(){return i.closeClassCommissionModal()}),a(288,"span"),c(289,"\xD7"),l()()(),a(290,"div",45)(291,"form",46),R("ngSubmit",function(){return i.calculateClassCommission()}),a(292,"div",47)(293,"label"),c(294,"\u0627\u0644\u0623\u0633\u062A\u0627\u0630 *"),l(),a(295,"select",90)(296,"option",91),c(297,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),l(),te(298,wY,2,2,"option",92),l()(),a(299,"div",47)(300,"label"),c(301,"\u0627\u0644\u062D\u0635\u0629 *"),l(),a(302,"select",93)(303,"option",91),c(304,"\u0627\u062E\u062A\u0631 \u0627\u0644\u062D\u0635\u0629"),l(),te(305,MY,2,4,"option",92),l()(),a(306,"div",47)(307,"label"),c(308,"\u0627\u0644\u0634\u0647\u0631 *"),l(),D(309,"input",94),l(),a(310,"div",47)(311,"label"),c(312,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639"),l(),a(313,"select",95)(314,"option",72),c(315,"\u0646\u0642\u062F\u0627\u064B"),l(),a(316,"option",73),c(317,"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A"),l(),a(318,"option",74),c(319,"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),l()()(),a(320,"div",62)(321,"button",63),D(322,"i",2),c(323," \u062D\u0633\u0627\u0628 "),l(),a(324,"button",65),R("click",function(){return i.closeClassCommissionModal()}),D(325,"i",66),c(326," \u0625\u0644\u063A\u0627\u0621 "),l()()()()()()()()),e&2&&(h(20),Ue("active",i.activeTab==="dashboard"),h(3),Ue("active",i.activeTab==="transactions"),h(3),Ue("active",i.activeTab==="income"),h(3),Ue("active",i.activeTab==="expenses"),h(3),Ue("active",i.activeTab==="budgets"),h(3),Ue("active",i.activeTab==="school-fees"),h(3),Ue("active",i.activeTab==="commissions"),h(3),Ue("active",i.activeTab==="class-commission"),h(3),Ue("active",i.activeTab==="class-payments"),h(3),Ue("active",i.activeTab==="financial-report"),h(3),Ue("active",i.activeTab==="registration-fees"),h(3),Ue("active",i.activeTab==="invoices"),h(4),P("ngIf",i.activeTab==="dashboard"),h(),P("ngIf",i.activeTab==="transactions"),h(),P("ngIf",i.activeTab==="income"),h(),P("ngIf",i.activeTab==="expenses"),h(),P("ngIf",i.activeTab==="budgets"),h(),P("ngIf",i.activeTab==="school-fees"),h(),P("ngIf",i.activeTab==="commissions"),h(),P("ngIf",i.activeTab==="class-commission"),h(),P("ngIf",i.activeTab==="class-payments"),h(),P("ngIf",i.activeTab==="financial-report"),h(),P("ngIf",i.activeTab==="registration-fees"),h(),P("ngIf",i.activeTab==="invoices"),h(12),P("formGroup",i.transactionForm),h(42),P("disabled",i.transactionForm.invalid||i.loading.transactions),h(17),P("formGroup",i.expenseForm),h(42),P("disabled",i.expenseForm.invalid||i.loading.transactions),h(17),P("formGroup",i.budgetForm),h(39),P("disabled",i.budgetForm.invalid||i.loading.transactions),h(17),P("formGroup",i.schoolFeeForm),h(20),P("disabled",i.schoolFeeForm.invalid||i.loading.transactions),h(17),P("formGroup",i.classCommissionForm),h(7),P("ngForOf",i.teachersList),h(7),P("ngForOf",i.lessonsList),h(16),P("disabled",i.classCommissionForm.invalid||i.loading.classCommission))},dependencies:[oi,xr,Ii,Oi,Yn,Nr,xi,ri,vr,Lr,Ro,of,Kn,bn,Ol,ii,Wn,vg,nf,rf],styles:[".accounting-container[_ngcontent-%COMP%]{padding:20px;background-color:#f8f9fa;min-height:100vh}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding:20px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:10px;color:#fff;box-shadow:0 4px 6px #0000001a}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:10px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.tabs-navigation[_ngcontent-%COMP%]{margin-bottom:30px;background:#fff;border-radius:10px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.tabs-nav[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:0;margin:0;list-style:none;overflow-x:auto}.tab-btn[_ngcontent-%COMP%]{padding:15px 25px;background:none;border:none;border-bottom:3px solid transparent;color:#6c757d;font-weight:500;cursor:pointer;transition:all .3s ease;white-space:nowrap}.tab-btn[_ngcontent-%COMP%]:hover{color:#007bff;background-color:#007bff0d}.tab-btn.active[_ngcontent-%COMP%]{color:#007bff;border-bottom-color:#007bff;background-color:#007bff1a}.tab-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:8px}.tab-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:25px;box-shadow:0 2px 4px #0000001a}.quick-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{padding:20px;border-radius:10px;color:#fff;display:flex;align-items:center;box-shadow:0 4px 6px #0000001a;transition:transform .3s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.stat-icon[_ngcontent-%COMP%]{font-size:40px;margin-left:20px;opacity:.8}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;font-size:24px;font-weight:600}.stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;opacity:.9}.stat-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{opacity:.8;font-size:12px}.date-badge[_ngcontent-%COMP%]{background:#fff3;padding:5px 15px;border-radius:20px;font-size:14px}.daily-income-content[_ngcontent-%COMP%]{text-align:center}.total-income[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:48px;font-weight:700;color:#28a745;margin-bottom:10px}.income-breakdown[_ngcontent-%COMP%]{margin-top:30px;text-align:right}.breakdown-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #e9ecef}.breakdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.breakdown-label[_ngcontent-%COMP%]{color:#6c757d}.breakdown-value[_ngcontent-%COMP%]{font-weight:600;color:#495057}.breakdown-value[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-size:12px}.financial-stats[_ngcontent-%COMP%]{padding:10px 0}.stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #e9ecef}.stat-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.stat-label[_ngcontent-%COMP%]{color:#6c757d}.stat-value[_ngcontent-%COMP%]{font-weight:600}.quick-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:12px}.quick-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:8px}.table-responsive[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden;border:1px solid #dee2e6}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:2px solid #dee2e6;font-weight:600;color:#495057;padding:15px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;vertical-align:middle}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.badge[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;font-weight:600;border-radius:20px}.badge-success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.badge-danger[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.badge-warning[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.badge-info[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460}.badge-secondary[_ngcontent-%COMP%]{background-color:#e2e3e5;color:#383d41}.badge-primary[_ngcontent-%COMP%]{background-color:#cce5ff;color:#004085}.summary-section[_ngcontent-%COMP%]{margin-top:30px}.summary-card[_ngcontent-%COMP%]{padding:20px;border-radius:10px;color:#fff;text-align:center;box-shadow:0 4px 6px #0000001a}.summary-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:24px;font-weight:600}.summary-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;opacity:.9}.summary-card[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{opacity:.8;font-size:12px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#6c757d}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-bottom:20px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:10px;color:#495057}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#6c757d}.loading-spinner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:10px}.progress[_ngcontent-%COMP%]{height:8px;border-radius:4px;background-color:#e9ecef;margin-bottom:5px}.progress-bar[_ngcontent-%COMP%]{border-radius:4px;background-color:#007bff}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#495057;margin-bottom:8px}.form-control[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:6px;padding:10px 15px;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}.filters-section[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:20px;border-radius:8px;margin-bottom:20px}.transaction-modal[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1050;overflow-x:hidden;overflow-y:auto;transition:opacity .3s ease}.transaction-modal.show[_ngcontent-%COMP%]{display:block}.transaction-modal-dialog[_ngcontent-%COMP%]{position:relative;width:auto;margin:1.75rem auto;max-width:500px;pointer-events:none}.transaction-modal.show[_ngcontent-%COMP%]   .transaction-modal-dialog[_ngcontent-%COMP%]{pointer-events:auto}.transaction-modal-content[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;width:100%;pointer-events:auto;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:.3rem;outline:0;animation:_ngcontent-%COMP%_modalFadeIn .3s ease}@keyframes _ngcontent-%COMP%_modalFadeIn{0%{opacity:0;transform:translateY(-50px)}to{opacity:1;transform:translateY(0)}}.transaction-modal-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;padding:1rem;border-bottom:1px solid #dee2e6;border-top-left-radius:calc(.3rem - 1px);border-top-right-radius:calc(.3rem - 1px)}.transaction-modal-title[_ngcontent-%COMP%]{margin-bottom:0;line-height:1.5;font-size:1.25rem}.transaction-modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{padding:1rem;margin:-1rem -1rem -1rem auto;background-color:transparent;border:0;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.5;cursor:pointer}.transaction-modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{opacity:.75}.transaction-modal-body[_ngcontent-%COMP%]{position:relative;flex:1 1 auto;padding:1rem}.transaction-modal-footer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-end;padding:.75rem;border-top:1px solid #dee2e6;border-bottom-right-radius:calc(.3rem - 1px);border-bottom-left-radius:calc(.3rem - 1px)}.transaction-modal-footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:.25rem}.commission-calculator[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:20px;border-radius:8px;margin-bottom:20px}.commission-results[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #dee2e6;border-radius:8px;padding:20px}.results-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #dee2e6}.results-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:20px}.report-filters[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:20px;border-radius:8px;margin-bottom:20px}.report-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:30px}.report-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000000d}.report-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid #dee2e6}.report-body[_ngcontent-%COMP%]{padding:10px 0}.income-total[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#28a745;margin-bottom:5px}.income-total[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;margin:0}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:15px}.header-actions[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.tabs-nav[_ngcontent-%COMP%]{justify-content:center}.tab-btn[_ngcontent-%COMP%]{padding:10px 15px;font-size:14px}.quick-stats[_ngcontent-%COMP%], .summary-cards[_ngcontent-%COMP%], .results-summary[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters-section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:10px}.filters-section[_ngcontent-%COMP%]   .col-md-2[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]   .col-md-3[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]{margin-bottom:15px}.transaction-modal-dialog[_ngcontent-%COMP%]{margin:.5rem;max-width:calc(100% - 1rem)}}@media (max-width: 576px){.accounting-container[_ngcontent-%COMP%]{padding:10px}.tab-content[_ngcontent-%COMP%]{padding:15px}.table-responsive[_ngcontent-%COMP%]{font-size:14px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px}.btn[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px}}@media print{.header-actions[_ngcontent-%COMP%], .tabs-navigation[_ngcontent-%COMP%], .transaction-modal[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{display:none!important}.accounting-container[_ngcontent-%COMP%]{padding:0;background:#fff}.tab-content[_ngcontent-%COMP%]{box-shadow:none;border:none}.table[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #000}}"]})};var BT=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:wg},{path:"accounting",component:Lv},{path:"home",component:Cg,children:[{path:"lesson-management",component:Mg},{path:"live-class",component:Ov},{path:"students-management",component:Sg},{path:"students-management/:id",component:kv},{path:"add-student-to-classes-modal/:id",component:Fv},{path:"teachers-management",component:Rv},{path:"rooms-management",component:Tv},{path:"payments-management",component:Pv},{path:"cards-management",component:Iv},{path:"",redirectTo:"lesson-management",pathMatch:"full"}]}];var zT={providers:[Ab(BT),Q1()]};var Vv=class n{title="adminApp";onWindowClick(t){}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=vn({type:n,selectors:[["app-root"]],hostBindings:function(e,i){e&1&&R("click",function(o){return i.onWindowClick(o)},!1,es)},decls:1,vars:0,template:function(e,i){e&1&&D(0,"router-outlet")},dependencies:[bn,Y0,Bl],styles:["[_ngcontent-%COMP%]:root{--main-blue: #0a66c2;--dark-blue: #004182;--glass-bg: rgba(255, 255, 255, .12);--glass-border: rgba(255, 255, 255, .2);--text-light: #ffffff;--text-dark: #1e293b;--shadow-light: rgba(0, 0, 0, .1);--shadow-dark: rgba(0, 0, 0, .3)}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.app-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1;background:linear-gradient(135deg,#0a66c2f2,#004182f2),url(https://images.unsplash.com/photo-1509062522246-3755977927d7?q=80&w=2000);background-size:cover;background-position:center;background-attachment:fixed;display:flex;flex-direction:column;overflow:hidden}.mobile-menu-toggle[_ngcontent-%COMP%]{display:none;position:fixed;top:20px;right:20px;z-index:1002;background:var(--glass-bg);backdrop-filter:blur(15px);border:1px solid var(--glass-border);border-radius:10px;width:45px;height:45px;display:flex;align-items:center;justify-content:center;color:var(--text-light);font-size:1.5rem;cursor:pointer;transition:all .3s ease}.mobile-menu-toggle[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.main-content[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.app-sidebar[_ngcontent-%COMP%]{width:280px;flex-shrink:0;transition:transform .3s ease;z-index:1000}.content-area[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;position:relative}.page-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;width:100%}.glass-panel[_ngcontent-%COMP%]{background:#fffffff2;backdrop-filter:blur(10px);border-radius:20px;padding:25px;box-shadow:0 15px 35px var(--shadow-dark);color:var(--text-dark);border:1px solid rgba(255,255,255,.3);margin-bottom:20px}.blue-glass-panel[_ngcontent-%COMP%]{background:#ffffff26;backdrop-filter:blur(20px);border-radius:20px;padding:25px;color:var(--text-light);border:1px solid var(--glass-border);margin-bottom:20px}.sidebar-overlay[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;z-index:999;opacity:0;visibility:hidden;transition:all .3s ease}.sidebar-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}@media (max-width: 1024px){.content-area[_ngcontent-%COMP%]{padding:15px}.glass-panel[_ngcontent-%COMP%], .blue-glass-panel[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 768px){.mobile-menu-toggle[_ngcontent-%COMP%]{display:flex}.app-sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-280px;height:100%;transform:translate(100%);transition:transform .3s ease}.app-sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}.stats-container[_ngcontent-%COMP%]{display:none!important}.sidebar-overlay[_ngcontent-%COMP%]{display:block}.glass-header[_ngcontent-%COMP%]{padding:0 15px;height:60px}.content-area[_ngcontent-%COMP%]{padding:80px 15px 20px}.glass-panel[_ngcontent-%COMP%], .blue-glass-panel[_ngcontent-%COMP%]{padding:15px;border-radius:15px;margin-bottom:15px}body.sidebar-open[_ngcontent-%COMP%]{overflow:hidden}}@media (max-width: 480px){.mobile-menu-toggle[_ngcontent-%COMP%]{top:15px;right:15px;width:40px;height:40px;font-size:1.3rem}.content-area[_ngcontent-%COMP%]{padding:70px 10px 10px}.glass-panel[_ngcontent-%COMP%], .blue-glass-panel[_ngcontent-%COMP%]{padding:12px;border-radius:12px}}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:4px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:4px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.page-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c!important;backdrop-filter:blur(10px);display:flex!important;align-items:center;justify-content:center;z-index:9999!important;padding:20px;opacity:1;visibility:visible}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:20px;width:100%;max-width:600px;max-height:85vh;overflow-y:auto;box-shadow:0 25px 60px #0006;animation:_ngcontent-%COMP%_modalSlideIn .3s ease;position:relative;z-index:10000}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}.modal-lg[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{padding:24px 32px;border-bottom:2px solid #f3f4f6;display:flex;justify-content:space-between;align-items:center;background:#fff;border-radius:20px 20px 0 0;position:sticky;top:0;z-index:1}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:24px;font-weight:700}.close-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:12px;background:#f3f4f6;border:none;display:flex;align-items:center;justify-content:center;color:#6b7280;cursor:pointer;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff}.modal-body[_ngcontent-%COMP%]{padding:32px}.modal-footer[_ngcontent-%COMP%]{padding:24px 32px;border-top:2px solid #f3f4f6;display:flex;justify-content:flex-end;gap:12px;background:#fff;border-radius:0 0 20px 20px;position:sticky;bottom:0}"]})};Z1(Vv,zT).catch(n=>console.error(n));
