var BT=Object.create;var Bg=Object.defineProperty,zT=Object.defineProperties,HT=Object.getOwnPropertyDescriptor,jT=Object.getOwnPropertyDescriptors,GT=Object.getOwnPropertyNames,$1=Object.getOwnPropertySymbols,WT=Object.getPrototypeOf,Y1=Object.prototype.hasOwnProperty,$T=Object.prototype.propertyIsEnumerable;var q1=(n,e,t)=>e in n?Bg(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xe=(n,e)=>{for(var t in e||={})Y1.call(e,t)&&q1(n,t,e[t]);if($1)for(var t of $1(e))$T.call(e,t)&&q1(n,t,e[t]);return n},lt=(n,e)=>zT(n,jT(e));var qT=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var YT=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of GT(e))!Y1.call(n,r)&&r!==t&&Bg(n,r,{get:()=>e[r],enumerable:!(i=HT(e,r))||i.enumerable});return n};var ou=(n,e,t)=>(t=n!=null?BT(WT(n)):{},YT(e||!n||!n.__esModule?Bg(t,"default",{value:n,enumerable:!0}):t,n));var $t=(n,e,t)=>new Promise((i,r)=>{var o=u=>{try{a(t.next(u))}catch(f){r(f)}},s=u=>{try{a(t.throw(u))}catch(f){r(f)}},a=u=>u.done?i(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});var vc=qT((wo,Ly)=>{"use strict";(function(n,e){typeof wo=="object"&&typeof Ly<"u"?Ly.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Sweetalert2=e())})(wo,function(){"use strict";function n(m,_,C){if(typeof m=="function"?m===_:m.has(_))return arguments.length<3?_:C;throw new TypeError("Private element is not present on this object")}function e(m,_){if(_.has(m))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t(m,_){return m.get(n(m,_))}function i(m,_,C){e(m,_),_.set(m,C)}function r(m,_,C){return m.set(n(m,_),C),C}let o=100,s={},a=()=>{s.previousActiveElement instanceof HTMLElement?(s.previousActiveElement.focus(),s.previousActiveElement=null):document.body&&document.body.focus()},u=m=>new Promise(_=>{if(!m)return _();let C=window.scrollX,k=window.scrollY;s.restoreFocusTimeout=setTimeout(()=>{a(),_()},o),window.scrollTo(C,k)}),f="swal2-",h=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce((m,_)=>(m[_]=f+_,m),{}),x=["success","warning","info","question","error"].reduce((m,_)=>(m[_]=f+_,m),{}),w="SweetAlert2:",S=m=>m.charAt(0).toUpperCase()+m.slice(1),b=m=>{console.warn(`${w} ${typeof m=="object"?m.join(" "):m}`)},y=m=>{console.error(`${w} ${m}`)},V=[],L=m=>{V.includes(m)||(V.push(m),b(m))},U=(m,_=null)=>{L(`"${m}" is deprecated and will be removed in the next major release.${_?` Use "${_}" instead.`:""}`)},B=m=>typeof m=="function"?m():m,z=m=>m&&typeof m.toPromise=="function",H=m=>z(m)?m.toPromise():Promise.resolve(m),Q=m=>m&&Promise.resolve(m)===m,A=()=>document.body.querySelector(`.${h.container}`),N=m=>{let _=A();return _?_.querySelector(m):null},G=m=>N(`.${m}`),q=()=>G(h.popup),ne=()=>G(h.icon),ue=()=>G(h["icon-content"]),ce=()=>G(h.title),ae=()=>G(h["html-container"]),oe=()=>G(h.image),_e=()=>G(h["progress-steps"]),Fe=()=>G(h["validation-message"]),Te=()=>N(`.${h.actions} .${h.confirm}`),Le=()=>N(`.${h.actions} .${h.cancel}`),ut=()=>N(`.${h.actions} .${h.deny}`),xt=()=>G(h["input-label"]),Kt=()=>N(`.${h.loader}`),qt=()=>G(h.actions),pe=()=>G(h.footer),ve=()=>G(h["timer-progress-bar"]),We=()=>G(h.close),ht=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Xe=()=>{let m=q();if(!m)return[];let _=m.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),C=Array.from(_).sort((Ae,mt)=>{let Lt=parseInt(Ae.getAttribute("tabindex")||"0"),dn=parseInt(mt.getAttribute("tabindex")||"0");return Lt>dn?1:Lt<dn?-1:0}),k=m.querySelectorAll(ht),X=Array.from(k).filter(Ae=>Ae.getAttribute("tabindex")!=="-1");return[...new Set(C.concat(X))].filter(Ae=>Se(Ae))},Rt=()=>It(document.body,h.shown)&&!It(document.body,h["toast-shown"])&&!It(document.body,h["no-backdrop"]),wn=()=>{let m=q();return m?It(m,h.toast):!1},Ft=()=>{let m=q();return m?m.hasAttribute("data-loading"):!1},pt=(m,_)=>{if(m.textContent="",_){let k=new DOMParser().parseFromString(_,"text/html"),X=k.querySelector("head");X&&Array.from(X.childNodes).forEach(mt=>{m.appendChild(mt)});let Ae=k.querySelector("body");Ae&&Array.from(Ae.childNodes).forEach(mt=>{mt instanceof HTMLVideoElement||mt instanceof HTMLAudioElement?m.appendChild(mt.cloneNode(!0)):m.appendChild(mt)})}},It=(m,_)=>{if(!_)return!1;let C=_.split(/\s+/);for(let k=0;k<C.length;k++)if(!m.classList.contains(C[k]))return!1;return!0},yt=(m,_)=>{Array.from(m.classList).forEach(C=>{!Object.values(h).includes(C)&&!Object.values(x).includes(C)&&!Object.values(_.showClass||{}).includes(C)&&m.classList.remove(C)})},Ut=(m,_,C)=>{if(yt(m,_),!_.customClass)return;let k=_.customClass[C];if(k){if(typeof k!="string"&&!k.forEach){b(`Invalid type of customClass.${C}! Expected string or iterable object, got "${typeof k}"`);return}et(m,k)}},j=(m,_)=>{if(!_)return null;switch(_){case"select":case"textarea":case"file":return m.querySelector(`.${h.popup} > .${h[_]}`);case"checkbox":return m.querySelector(`.${h.popup} > .${h.checkbox} input`);case"radio":return m.querySelector(`.${h.popup} > .${h.radio} input:checked`)||m.querySelector(`.${h.popup} > .${h.radio} input:first-child`);case"range":return m.querySelector(`.${h.popup} > .${h.range} input`);default:return m.querySelector(`.${h.popup} > .${h.input}`)}},Mn=m=>{if(m.focus(),m.type!=="file"){let _=m.value;m.value="",m.value=_}},Gt=(m,_,C)=>{!m||!_||(typeof _=="string"&&(_=_.split(/\s+/).filter(Boolean)),_.forEach(k=>{Array.isArray(m)?m.forEach(X=>{C?X.classList.add(k):X.classList.remove(k)}):C?m.classList.add(k):m.classList.remove(k)}))},et=(m,_)=>{Gt(m,_,!0)},ze=(m,_)=>{Gt(m,_,!1)},F=(m,_)=>{let C=Array.from(m.children);for(let k=0;k<C.length;k++){let X=C[k];if(X instanceof HTMLElement&&It(X,_))return X}},M=(m,_,C)=>{C===`${parseInt(`${C}`)}`&&(C=parseInt(C)),C||parseInt(`${C}`)===0?m.style.setProperty(_,typeof C=="number"?`${C}px`:C):m.style.removeProperty(_)},W=(m,_="flex")=>{m&&(m.style.display=_)},se=m=>{m&&(m.style.display="none")},ge=(m,_="block")=>{m&&new MutationObserver(()=>{Ze(m,m.innerHTML,_)}).observe(m,{childList:!0,subtree:!0})},le=(m,_,C,k)=>{let X=m.querySelector(_);X&&X.style.setProperty(C,k)},Ze=(m,_,C="flex")=>{_?W(m,C):se(m)},Se=m=>!!(m&&(m.offsetWidth||m.offsetHeight||m.getClientRects().length)),Ke=()=>!Se(Te())&&!Se(ut())&&!Se(Le()),rt=m=>m.scrollHeight>m.clientHeight,Ce=(m,_)=>{let C=m;for(;C&&C!==_;){if(rt(C))return!0;C=C.parentElement}return!1},Oe=m=>{let _=window.getComputedStyle(m),C=parseFloat(_.getPropertyValue("animation-duration")||"0"),k=parseFloat(_.getPropertyValue("transition-duration")||"0");return C>0||k>0},qe=(m,_=!1)=>{let C=ve();C&&Se(C)&&(_&&(C.style.transition="none",C.style.width="100%"),setTimeout(()=>{C.style.transition=`width ${m/1e3}s linear`,C.style.width="0%"},10))},Je=()=>{let m=ve();if(!m)return;let _=parseInt(window.getComputedStyle(m).width);m.style.removeProperty("transition"),m.style.width="100%";let C=parseInt(window.getComputedStyle(m).width),k=_/C*100;m.style.width=`${k}%`},Re=()=>typeof window>"u"||typeof document>"u",bt=`
 <div aria-labelledby="${h.title}" aria-describedby="${h["html-container"]}" class="${h.popup}" tabindex="-1">
   <button type="button" class="${h.close}"></button>
   <ul class="${h["progress-steps"]}"></ul>
   <div class="${h.icon}"></div>
   <img class="${h.image}" />
   <h2 class="${h.title}" id="${h.title}"></h2>
   <div class="${h["html-container"]}" id="${h["html-container"]}"></div>
   <input class="${h.input}" id="${h.input}" />
   <input type="file" class="${h.file}" />
   <div class="${h.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${h.select}" id="${h.select}"></select>
   <div class="${h.radio}"></div>
   <label class="${h.checkbox}">
     <input type="checkbox" id="${h.checkbox}" />
     <span class="${h.label}"></span>
   </label>
   <textarea class="${h.textarea}" id="${h.textarea}"></textarea>
   <div class="${h["validation-message"]}" id="${h["validation-message"]}"></div>
   <div class="${h.actions}">
     <div class="${h.loader}"></div>
     <button type="button" class="${h.confirm}"></button>
     <button type="button" class="${h.deny}"></button>
     <button type="button" class="${h.cancel}"></button>
   </div>
   <div class="${h.footer}"></div>
   <div class="${h["timer-progress-bar-container"]}">
     <div class="${h["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),$=()=>{let m=A();return m?(m.remove(),ze([document.documentElement,document.body],[h["no-backdrop"],h["toast-shown"],h["has-column"]]),!0):!1},ke=()=>{s.currentInstance&&s.currentInstance.resetValidationMessage()},Ee=()=>{let m=q();if(!m)return;let _=F(m,h.input),C=F(m,h.file),k=m.querySelector(`.${h.range} input`),X=m.querySelector(`.${h.range} output`),Ae=F(m,h.select),mt=m.querySelector(`.${h.checkbox} input`),Lt=F(m,h.textarea);_&&(_.oninput=ke),C&&(C.onchange=ke),Ae&&(Ae.onchange=ke),mt&&(mt.onchange=ke),Lt&&(Lt.oninput=ke),k&&X&&(k.oninput=()=>{ke(),X.value=k.value},k.onchange=()=>{ke(),X.value=k.value})},He=m=>{if(typeof m=="string"){let _=document.querySelector(m);if(!_)throw new Error(`Target element "${m}" not found`);return _}return m},ye=m=>{let _=q();_&&(_.setAttribute("role",m.toast?"alert":"dialog"),_.setAttribute("aria-live",m.toast?"polite":"assertive"),m.toast||_.setAttribute("aria-modal","true"))},me=m=>{window.getComputedStyle(m).direction==="rtl"&&(et(A(),h.rtl),s.isRTL=!0)},Ie=m=>{let _=$();if(Re()){y("SweetAlert2 requires document to initialize");return}let C=document.createElement("div");C.className=h.container,_&&et(C,h["no-transition"]),pt(C,bt),C.dataset.swal2Theme=m.theme;let k=He(m.target||"body");k.appendChild(C),m.topLayer&&(C.setAttribute("popover",""),C.showPopover()),ye(m),me(k),Ee()},at=(m,_)=>{m instanceof HTMLElement?_.appendChild(m):typeof m=="object"?rn(m,_):m&&pt(_,m)},rn=(m,_)=>{"jquery"in m?Yt(_,m):pt(_,m.toString())},Yt=(m,_)=>{if(m.textContent="",0 in _)for(let C=0;C in _;C++)m.appendChild(_[C].cloneNode(!0));else m.appendChild(_.cloneNode(!0))},dr=(m,_)=>{let C=qt(),k=Kt();!C||!k||(!_.showConfirmButton&&!_.showDenyButton&&!_.showCancelButton?se(C):W(C),Ut(C,_,"actions"),Tr(C,k,_),pt(k,_.loaderHtml||""),Ut(k,_,"loader"))};function Tr(m,_,C){let k=Te(),X=ut(),Ae=Le();!k||!X||!Ae||(na(k,"confirm",C),na(X,"deny",C),na(Ae,"cancel",C),Ig(k,X,Ae,C),C.reverseButtons&&(C.toast?(m.insertBefore(Ae,k),m.insertBefore(X,k)):(m.insertBefore(Ae,_),m.insertBefore(X,_),m.insertBefore(k,_))))}function Ig(m,_,C,k){if(!k.buttonsStyling){ze([m,_,C],h.styled);return}et([m,_,C],h.styled),k.confirmButtonColor&&m.style.setProperty("--swal2-confirm-button-background-color",k.confirmButtonColor),k.denyButtonColor&&_.style.setProperty("--swal2-deny-button-background-color",k.denyButtonColor),k.cancelButtonColor&&C.style.setProperty("--swal2-cancel-button-background-color",k.cancelButtonColor),sl(m),sl(_),sl(C)}function sl(m){let _=window.getComputedStyle(m);if(_.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;let C=_.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");m.style.setProperty("--swal2-action-button-focus-box-shadow",_.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${C}`))}function na(m,_,C){let k=S(_);Ze(m,C[`show${k}Button`],"inline-block"),pt(m,C[`${_}ButtonText`]||""),m.setAttribute("aria-label",C[`${_}ButtonAriaLabel`]||""),m.className=h[_],Ut(m,C,`${_}Button`)}let Og=(m,_)=>{let C=We();C&&(pt(C,_.closeButtonHtml||""),Ut(C,_,"closeButton"),Ze(C,_.showCloseButton),C.setAttribute("aria-label",_.closeButtonAriaLabel||""))},ff=(m,_)=>{let C=A();C&&(hf(C,_.backdrop),Oo(C,_.position),nu(C,_.grow),Ut(C,_,"container"))};function hf(m,_){typeof _=="string"?m.style.background=_:_||et([document.documentElement,document.body],h["no-backdrop"])}function Oo(m,_){_&&(_ in h?et(m,h[_]):(b('The "position" parameter is not valid, defaulting to "center"'),et(m,h.center)))}function nu(m,_){_&&et(m,h[`grow-${_}`])}var en={innerParams:new WeakMap,domCache:new WeakMap};let pf=["input","file","range","select","radio","checkbox","textarea"],al=(m,_)=>{let C=q();if(!C)return;let k=en.innerParams.get(m),X=!k||_.input!==k.input;pf.forEach(Ae=>{let mt=F(C,h[Ae]);mt&&(gf(Ae,_.inputAttributes),mt.className=h[Ae],X&&se(mt))}),_.input&&(X&&mf(_),_f(_))},mf=m=>{if(!m.input)return;if(!Sn[m.input]){y(`Unexpected type of input! Expected ${Object.keys(Sn).join(" | ")}, got "${m.input}"`);return}let _=vf(m.input);if(!_)return;let C=Sn[m.input](_,m);W(_),m.inputAutoFocus&&setTimeout(()=>{Mn(C)})},ll=m=>{for(let _=0;_<m.attributes.length;_++){let C=m.attributes[_].name;["id","type","value","style"].includes(C)||m.removeAttribute(C)}},gf=(m,_)=>{let C=q();if(!C)return;let k=j(C,m);if(k){ll(k);for(let X in _)k.setAttribute(X,_[X])}},_f=m=>{if(!m.input)return;let _=vf(m.input);_&&Ut(_,m,"input")},iu=(m,_)=>{!m.placeholder&&_.inputPlaceholder&&(m.placeholder=_.inputPlaceholder)},ia=(m,_,C)=>{if(C.inputLabel){let k=document.createElement("label"),X=h["input-label"];k.setAttribute("for",m.id),k.className=X,typeof C.customClass=="object"&&et(k,C.customClass.inputLabel),k.innerText=C.inputLabel,_.insertAdjacentElement("beforebegin",k)}},vf=m=>{let _=q();if(_)return F(_,h[m]||h.input)},cl=(m,_)=>{["string","number"].includes(typeof _)?m.value=`${_}`:Q(_)||b(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof _}"`)},Sn={};Sn.text=Sn.email=Sn.password=Sn.number=Sn.tel=Sn.url=Sn.search=Sn.date=Sn["datetime-local"]=Sn.time=Sn.week=Sn.month=(m,_)=>{let C=m;return cl(C,_.inputValue),ia(C,C,_),iu(C,_),C.type=_.input,C},Sn.file=(m,_)=>{let C=m;return ia(C,C,_),iu(C,_),C},Sn.range=(m,_)=>{let C=m,k=C.querySelector("input"),X=C.querySelector("output");return k&&(cl(k,_.inputValue),k.type=_.input,ia(k,m,_)),X&&cl(X,_.inputValue),m},Sn.select=(m,_)=>{let C=m;if(C.textContent="",_.inputPlaceholder){let k=document.createElement("option");pt(k,_.inputPlaceholder),k.value="",k.disabled=!0,k.selected=!0,C.appendChild(k)}return ia(C,C,_),C},Sn.radio=m=>{let _=m;return _.textContent="",m},Sn.checkbox=(m,_)=>{let C=q();if(!C)throw new Error("Popup not found");let k=j(C,"checkbox");if(!k)throw new Error("Checkbox input not found");k.value="1",k.checked=!!_.inputValue;let Ae=m.querySelector("span");if(Ae){let mt=_.inputPlaceholder||_.inputLabel;mt&&pt(Ae,mt)}return k},Sn.textarea=(m,_)=>{let C=m;cl(C,_.inputValue),iu(C,_),ia(C,C,_);let k=X=>parseInt(window.getComputedStyle(X).marginLeft)+parseInt(window.getComputedStyle(X).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let X=q();if(!X)return;let Ae=parseInt(window.getComputedStyle(X).width),mt=()=>{if(!document.body.contains(C))return;let Lt=C.offsetWidth+k(C),dn=q();dn&&(Lt>Ae?dn.style.width=`${Lt}px`:M(dn,"width",_.width))};new MutationObserver(mt).observe(C,{attributes:!0,attributeFilter:["style"]})}}),C};let Rg=(m,_)=>{let C=ae();C&&(ge(C),Ut(C,_,"htmlContainer"),_.html?(at(_.html,C),W(C,"block")):_.text?(C.textContent=_.text,W(C,"block")):se(C),al(m,_))},I=(m,_)=>{let C=pe();C&&(ge(C),Ze(C,!!_.footer,"block"),_.footer&&at(_.footer,C),Ut(C,_,"footer"))},Y=(m,_)=>{let C=en.innerParams.get(m),k=ne();if(!k)return;if(C&&_.icon===C.icon){je(k,_),re(k,_);return}if(!_.icon&&!_.iconHtml){se(k);return}if(_.icon&&Object.keys(x).indexOf(_.icon)===-1){y(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${_.icon}"`),se(k);return}W(k),je(k,_),re(k,_),et(k,_.showClass&&_.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",ie)},re=(m,_)=>{for(let[C,k]of Object.entries(x))_.icon!==C&&ze(m,k);et(m,_.icon&&x[_.icon]),Ve(m,_),ie(),Ut(m,_,"icon")},ie=()=>{let m=q();if(!m)return;let _=window.getComputedStyle(m).getPropertyValue("background-color"),C=m.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let k=0;k<C.length;k++)C[k].style.backgroundColor=_},J=m=>`
  ${m.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${m.animation?'<div class="swal2-success-fix"></div>':""}
  ${m.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,Ne=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,je=(m,_)=>{if(!_.icon&&!_.iconHtml)return;let C=m.innerHTML,k="";_.iconHtml?k=Ye(_.iconHtml):_.icon==="success"?(k=J(_),C=C.replace(/ style=".*?"/g,"")):_.icon==="error"?k=Ne:_.icon&&(k=Ye({question:"?",warning:"!",info:"i"}[_.icon])),C.trim()!==k.trim()&&pt(m,k)},Ve=(m,_)=>{if(_.iconColor){m.style.color=_.iconColor,m.style.borderColor=_.iconColor;for(let C of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])le(m,C,"background-color",_.iconColor);le(m,".swal2-success-ring","border-color",_.iconColor)}},Ye=m=>`<div class="${h["icon-content"]}">${m}</div>`,Qe=(m,_)=>{let C=oe();if(C){if(!_.imageUrl){se(C);return}W(C,""),C.setAttribute("src",_.imageUrl),C.setAttribute("alt",_.imageAlt||""),M(C,"width",_.imageWidth),M(C,"height",_.imageHeight),C.className=h.image,Ut(C,_,"image")}},it=!1,nt=0,Ct=0,Xt=0,_n=0,yn=m=>{m.addEventListener("mousedown",tt),document.body.addEventListener("mousemove",Bt),m.addEventListener("mouseup",Ot),m.addEventListener("touchstart",tt),document.body.addEventListener("touchmove",Bt),m.addEventListener("touchend",Ot)},tn=m=>{m.removeEventListener("mousedown",tt),document.body.removeEventListener("mousemove",Bt),m.removeEventListener("mouseup",Ot),m.removeEventListener("touchstart",tt),document.body.removeEventListener("touchmove",Bt),m.removeEventListener("touchend",Ot)},tt=m=>{let _=q();if(!_)return;let C=ne();if(m.target===_||C&&C.contains(m.target)){it=!0;let k=di(m);nt=k.clientX,Ct=k.clientY,Xt=parseInt(_.style.insetInlineStart)||0,_n=parseInt(_.style.insetBlockStart)||0,et(_,"swal2-dragging")}},Bt=m=>{let _=q();if(_&&it){let{clientX:C,clientY:k}=di(m),X=C-nt;_.style.insetInlineStart=`${Xt+(s.isRTL?-X:X)}px`,_.style.insetBlockStart=`${_n+(k-Ct)}px`}},Ot=()=>{let m=q();it=!1,ze(m,"swal2-dragging")},di=m=>{let _=0,C=0;return m.type.startsWith("mouse")?(_=m.clientX,C=m.clientY):m.type.startsWith("touch")&&(_=m.touches[0].clientX,C=m.touches[0].clientY),{clientX:_,clientY:C}},cs=(m,_)=>{let C=A(),k=q();if(!(!C||!k)){if(_.toast){M(C,"width",_.width),k.style.width="100%";let X=Kt();X&&k.insertBefore(X,ne())}else M(k,"width",_.width);M(k,"padding",_.padding),_.color&&(k.style.color=_.color),_.background&&(k.style.background=_.background),se(Fe()),Mi(k,_),_.draggable&&!_.toast?(et(k,h.draggable),yn(k)):(ze(k,h.draggable),tn(k))}},Mi=(m,_)=>{let C=_.showClass||{};m.className=`${h.popup} ${Se(m)?C.popup:""}`,_.toast?(et([document.documentElement,document.body],h["toast-shown"]),et(m,h.toast)):et(m,h.modal),Ut(m,_,"popup"),typeof _.customClass=="string"&&et(m,_.customClass),_.icon&&et(m,h[`icon-${_.icon}`])},ra=(m,_)=>{let C=_e();if(!C)return;let{progressSteps:k,currentProgressStep:X}=_;if(!k||k.length===0||X===void 0){se(C);return}W(C),C.textContent="",X>=k.length&&b("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),k.forEach((Ae,mt)=>{let Lt=on(Ae);if(C.appendChild(Lt),mt===X&&et(Lt,h["active-progress-step"]),mt!==k.length-1){let dn=fi(_);C.appendChild(dn)}})},on=m=>{let _=document.createElement("li");return et(_,h["progress-step"]),pt(_,m),_},fi=m=>{let _=document.createElement("li");return et(_,h["progress-step-line"]),m.progressStepsDistance&&M(_,"width",m.progressStepsDistance),_},Ii=(m,_)=>{let C=ce();C&&(ge(C),Ze(C,!!(_.title||_.titleText),"block"),_.title&&at(_.title,C),_.titleText&&(C.innerText=_.titleText),Ut(C,_,"title"))},oi=(m,_)=>{var C;cs(m,_),ff(m,_),ra(m,_),Y(m,_),Qe(m,_),Ii(m,_),Og(m,_),Rg(m,_),dr(m,_),I(m,_);let k=q();typeof _.didRender=="function"&&k&&_.didRender(k),(C=s.eventEmitter)===null||C===void 0||C.emit("didRender",k)},hi=()=>Se(q()),ul=()=>{var m;return(m=Te())===null||m===void 0?void 0:m.click()},Ro=()=>{var m;return(m=ut())===null||m===void 0?void 0:m.click()},rA=()=>{var m;return(m=Le())===null||m===void 0?void 0:m.click()},dl=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),f1=m=>{if(m.keydownTarget&&m.keydownHandlerAdded&&m.keydownHandler){let _=m.keydownHandler;m.keydownTarget.removeEventListener("keydown",_,{capture:m.keydownListenerCapture}),m.keydownHandlerAdded=!1}},oA=(m,_,C)=>{if(f1(m),!_.toast){let k=Ae=>aA(_,Ae,C);m.keydownHandler=k;let X=_.keydownListenerCapture?window:q();if(X){m.keydownTarget=X,m.keydownListenerCapture=_.keydownListenerCapture;let Ae=k;m.keydownTarget.addEventListener("keydown",Ae,{capture:m.keydownListenerCapture}),m.keydownHandlerAdded=!0}}},kg=(m,_)=>{var C;let k=Xe();if(k.length){m=m+_,m===-2&&(m=k.length-1),m===k.length?m=0:m===-1&&(m=k.length-1),k[m].focus();return}(C=q())===null||C===void 0||C.focus()},h1=["ArrowRight","ArrowDown"],sA=["ArrowLeft","ArrowUp"],aA=(m,_,C)=>{m&&(_.isComposing||_.keyCode===229||(m.stopKeydownPropagation&&_.stopPropagation(),_.key==="Enter"?lA(_,m):_.key==="Tab"?cA(_):[...h1,...sA].includes(_.key)?uA(_.key):_.key==="Escape"&&dA(_,m,C)))},lA=(m,_)=>{if(!B(_.allowEnterKey))return;let C=q();if(!C||!_.input)return;let k=j(C,_.input);if(m.target&&k&&m.target instanceof HTMLElement&&m.target.outerHTML===k.outerHTML){if(["textarea","file"].includes(_.input))return;ul(),m.preventDefault()}},cA=m=>{let _=m.target,C=Xe(),k=-1;for(let X=0;X<C.length;X++)if(_===C[X]){k=X;break}m.shiftKey?kg(k,-1):kg(k,1),m.stopPropagation(),m.preventDefault()},uA=m=>{let _=qt(),C=Te(),k=ut(),X=Le();if(!_||!C||!k||!X)return;let Ae=[C,k,X];if(document.activeElement instanceof HTMLElement&&!Ae.includes(document.activeElement))return;let mt=h1.includes(m)?"nextElementSibling":"previousElementSibling",Lt=document.activeElement;if(Lt){for(let dn=0;dn<_.children.length;dn++){if(Lt=Lt[mt],!Lt)return;if(Lt instanceof HTMLButtonElement&&Se(Lt))break}Lt instanceof HTMLButtonElement&&Lt.focus()}},dA=(m,_,C)=>{m.preventDefault(),B(_.allowEscapeKey)&&C(dl.esc)};var fl={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let fA=()=>{let m=A();Array.from(document.body.children).forEach(C=>{C.contains(m)||(C.hasAttribute("aria-hidden")&&C.setAttribute("data-previous-aria-hidden",C.getAttribute("aria-hidden")||""),C.setAttribute("aria-hidden","true"))})},p1=()=>{Array.from(document.body.children).forEach(_=>{_.hasAttribute("data-previous-aria-hidden")?(_.setAttribute("aria-hidden",_.getAttribute("data-previous-aria-hidden")||""),_.removeAttribute("data-previous-aria-hidden")):_.removeAttribute("aria-hidden")})},m1=typeof window<"u"&&!!window.GestureEvent,hA=()=>{if(m1&&!It(document.body,h.iosfix)){let m=document.body.scrollTop;document.body.style.top=`${m*-1}px`,et(document.body,h.iosfix),pA()}},pA=()=>{let m=A();if(!m)return;let _;m.ontouchstart=C=>{_=mA(C)},m.ontouchmove=C=>{_&&(C.preventDefault(),C.stopPropagation())}},mA=m=>{let _=m.target,C=A(),k=ae();return!C||!k||gA(m)||_A(m)?!1:_===C||!rt(C)&&_ instanceof HTMLElement&&!Ce(_,k)&&_.tagName!=="INPUT"&&_.tagName!=="TEXTAREA"&&!(rt(k)&&k.contains(_))},gA=m=>!!(m.touches&&m.touches.length&&m.touches[0].touchType==="stylus"),_A=m=>m.touches&&m.touches.length>1,vA=()=>{if(It(document.body,h.iosfix)){let m=parseInt(document.body.style.top,10);ze(document.body,h.iosfix),document.body.style.top="",document.body.scrollTop=m*-1}},xA=()=>{let m=document.createElement("div");m.className=h["scrollbar-measure"],document.body.appendChild(m);let _=m.getBoundingClientRect().width-m.clientWidth;return document.body.removeChild(m),_},hl=null,yA=m=>{hl===null&&(document.body.scrollHeight>window.innerHeight||m==="scroll")&&(hl=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${hl+xA()}px`)},bA=()=>{hl!==null&&(document.body.style.paddingRight=`${hl}px`,hl=null)};function g1(m,_,C,k){wn()?v1(m,k):(u(C).then(()=>v1(m,k)),f1(s)),m1?(_.setAttribute("style","display:none !important"),_.removeAttribute("class"),_.innerHTML=""):_.remove(),Rt()&&(bA(),vA(),p1()),CA()}function CA(){ze([document.documentElement,document.body],[h.shown,h["height-auto"],h["no-backdrop"],h["toast-shown"]])}function us(m){m=MA(m);let _=fl.swalPromiseResolve.get(this),C=wA(this);this.isAwaitingPromise?m.isDismissed||(ru(this),_(m)):C&&_(m)}let wA=m=>{let _=q();if(!_)return!1;let C=en.innerParams.get(m);if(!C||It(_,C.hideClass.popup))return!1;ze(_,C.showClass.popup),et(_,C.hideClass.popup);let k=A();return ze(k,C.showClass.backdrop),et(k,C.hideClass.backdrop),SA(m,_,C),!0};function _1(m){let _=fl.swalPromiseReject.get(this);ru(this),_&&_(m)}let ru=m=>{m.isAwaitingPromise&&(delete m.isAwaitingPromise,en.innerParams.get(m)||m._destroy())},MA=m=>typeof m>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},m),SA=(m,_,C)=>{var k;let X=A(),Ae=Oe(_);typeof C.willClose=="function"&&C.willClose(_),(k=s.eventEmitter)===null||k===void 0||k.emit("willClose",_),Ae&&X?EA(m,_,X,!!C.returnFocus,C.didClose):X&&g1(m,X,!!C.returnFocus,C.didClose)},EA=(m,_,C,k,X)=>{s.swalCloseEventFinishedCallback=g1.bind(null,m,C,k,X);let Ae=function(mt){if(mt.target===_){var Lt;(Lt=s.swalCloseEventFinishedCallback)===null||Lt===void 0||Lt.call(s),delete s.swalCloseEventFinishedCallback,_.removeEventListener("animationend",Ae),_.removeEventListener("transitionend",Ae)}};_.addEventListener("animationend",Ae),_.addEventListener("transitionend",Ae)},v1=(m,_)=>{setTimeout(()=>{var C;typeof _=="function"&&_.bind(m.params)(),(C=s.eventEmitter)===null||C===void 0||C.emit("didClose"),m._destroy&&m._destroy()})},pl=m=>{let _=q();if(_||new Mf,_=q(),!_)return;let C=Kt();wn()?se(ne()):AA(_,m),W(C),_.setAttribute("data-loading","true"),_.setAttribute("aria-busy","true"),_.focus()},AA=(m,_)=>{let C=qt(),k=Kt();!C||!k||(!_&&Se(Te())&&(_=Te()),W(C),_&&(se(_),k.setAttribute("data-button-to-replace",_.className),C.insertBefore(k,_)),et([m,C],h.loading))},TA=(m,_)=>{_.input==="select"||_.input==="radio"?RA(m,_):["text","email","number","tel","textarea"].some(C=>C===_.input)&&(z(_.inputValue)||Q(_.inputValue))&&(pl(Te()),kA(m,_))},DA=(m,_)=>{let C=m.getInput();if(!C)return null;switch(_.input){case"checkbox":return PA(C);case"radio":return IA(C);case"file":return OA(C);default:return _.inputAutoTrim?C.value.trim():C.value}},PA=m=>m.checked?1:0,IA=m=>m.checked?m.value:null,OA=m=>m.files&&m.files.length?m.getAttribute("multiple")!==null?m.files:m.files[0]:null,RA=(m,_)=>{let C=q();if(!C)return;let k=X=>{_.input==="select"?NA(C,xf(X),_):_.input==="radio"&&FA(C,xf(X),_)};z(_.inputOptions)||Q(_.inputOptions)?(pl(Te()),H(_.inputOptions).then(X=>{m.hideLoading(),k(X)})):typeof _.inputOptions=="object"?k(_.inputOptions):y(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof _.inputOptions}`)},kA=(m,_)=>{let C=m.getInput();C&&(se(C),H(_.inputValue).then(k=>{C.value=_.input==="number"?`${parseFloat(k)||0}`:`${k}`,W(C),C.focus(),m.hideLoading()}).catch(k=>{y(`Error in inputValue promise: ${k}`),C.value="",W(C),C.focus(),m.hideLoading()}))};function NA(m,_,C){let k=F(m,h.select);if(!k)return;let X=(Ae,mt,Lt)=>{let dn=document.createElement("option");dn.value=Lt,pt(dn,mt),dn.selected=x1(Lt,C.inputValue),Ae.appendChild(dn)};_.forEach(Ae=>{let mt=Ae[0],Lt=Ae[1];if(Array.isArray(Lt)){let dn=document.createElement("optgroup");dn.label=mt,dn.disabled=!1,k.appendChild(dn),Lt.forEach(ml=>X(dn,ml[1],ml[0]))}else X(k,Lt,mt)}),k.focus()}function FA(m,_,C){let k=F(m,h.radio);if(!k)return;_.forEach(Ae=>{let mt=Ae[0],Lt=Ae[1],dn=document.createElement("input"),ml=document.createElement("label");dn.type="radio",dn.name=h.radio,dn.value=mt,x1(mt,C.inputValue)&&(dn.checked=!0);let Ug=document.createElement("span");pt(Ug,Lt),Ug.className=h.label,ml.appendChild(dn),ml.appendChild(Ug),k.appendChild(ml)});let X=k.querySelectorAll("input");X.length&&X[0].focus()}let xf=m=>{let _=[];return m instanceof Map?m.forEach((C,k)=>{let X=C;typeof X=="object"&&(X=xf(X)),_.push([k,X])}):Object.keys(m).forEach(C=>{let k=m[C];typeof k=="object"&&(k=xf(k)),_.push([C,k])}),_},x1=(m,_)=>!!_&&_!==null&&_!==void 0&&_.toString()===m.toString(),LA=m=>{let _=en.innerParams.get(m);m.disableButtons(),_.input?y1(m,"confirm"):Fg(m,!0)},VA=m=>{let _=en.innerParams.get(m);m.disableButtons(),_.returnInputValueOnDeny?y1(m,"deny"):Ng(m,!1)},UA=(m,_)=>{m.disableButtons(),_(dl.cancel)},y1=(m,_)=>{let C=en.innerParams.get(m);if(!C.input){y(`The "input" parameter is needed to be set when using returnInputValueOn${S(_)}`);return}let k=m.getInput(),X=DA(m,C);C.inputValidator?BA(m,X,_):k&&!k.checkValidity()?(m.enableButtons(),m.showValidationMessage(C.validationMessage||k.validationMessage)):_==="deny"?Ng(m,X):Fg(m,X)},BA=(m,_,C)=>{let k=en.innerParams.get(m);m.disableInput(),Promise.resolve().then(()=>H(k.inputValidator(_,k.validationMessage))).then(Ae=>{m.enableButtons(),m.enableInput(),Ae?m.showValidationMessage(Ae):C==="deny"?Ng(m,_):Fg(m,_)})},Ng=(m,_)=>{let C=en.innerParams.get(m);C.showLoaderOnDeny&&pl(ut()),C.preDeny?(m.isAwaitingPromise=!0,Promise.resolve().then(()=>H(C.preDeny(_,C.validationMessage))).then(X=>{X===!1?(m.hideLoading(),ru(m)):m.close({isDenied:!0,value:typeof X>"u"?_:X})}).catch(X=>C1(m,X))):m.close({isDenied:!0,value:_})},b1=(m,_)=>{m.close({isConfirmed:!0,value:_})},C1=(m,_)=>{m.rejectPromise(_)},Fg=(m,_)=>{let C=en.innerParams.get(m);C.showLoaderOnConfirm&&pl(),C.preConfirm?(m.resetValidationMessage(),m.isAwaitingPromise=!0,Promise.resolve().then(()=>H(C.preConfirm(_,C.validationMessage))).then(X=>{Se(Fe())||X===!1?(m.hideLoading(),ru(m)):b1(m,typeof X>"u"?_:X)}).catch(X=>C1(m,X))):b1(m,_)};function yf(){let m=en.innerParams.get(this);if(!m)return;let _=en.domCache.get(this);se(_.loader),wn()?m.icon&&W(ne()):zA(_),ze([_.popup,_.actions],h.loading),_.popup.removeAttribute("aria-busy"),_.popup.removeAttribute("data-loading"),_.confirmButton.disabled=!1,_.denyButton.disabled=!1,_.cancelButton.disabled=!1}let zA=m=>{let _=m.loader.getAttribute("data-button-to-replace"),C=_?m.popup.getElementsByClassName(_):[];C.length?W(C[0],"inline-block"):Ke()&&se(m.actions)};function w1(){let m=en.innerParams.get(this),_=en.domCache.get(this);return _?j(_.popup,m.input):null}function M1(m,_,C){let k=en.domCache.get(m);_.forEach(X=>{k[X].disabled=C})}function S1(m,_){let C=q();if(!(!C||!m))if(m.type==="radio"){let k=C.querySelectorAll(`[name="${h.radio}"]`);for(let X=0;X<k.length;X++)k[X].disabled=_}else m.disabled=_}function E1(){M1(this,["confirmButton","denyButton","cancelButton"],!1)}function A1(){M1(this,["confirmButton","denyButton","cancelButton"],!0)}function T1(){S1(this.getInput(),!1)}function D1(){S1(this.getInput(),!0)}function P1(m){let _=en.domCache.get(this),C=en.innerParams.get(this);pt(_.validationMessage,m),_.validationMessage.className=h["validation-message"],C.customClass&&C.customClass.validationMessage&&et(_.validationMessage,C.customClass.validationMessage),W(_.validationMessage);let k=this.getInput();k&&(k.setAttribute("aria-invalid","true"),k.setAttribute("aria-describedby",h["validation-message"]),Mn(k),et(k,h.inputerror))}function I1(){let m=en.domCache.get(this);m.validationMessage&&se(m.validationMessage);let _=this.getInput();_&&(_.removeAttribute("aria-invalid"),_.removeAttribute("aria-describedby"),ze(_,h.inputerror))}let ds={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},HA=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],jA={allowEnterKey:void 0},GA=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],O1=m=>Object.prototype.hasOwnProperty.call(ds,m),R1=m=>HA.indexOf(m)!==-1,k1=m=>jA[m],WA=m=>{O1(m)||b(`Unknown parameter "${m}"`)},$A=m=>{GA.includes(m)&&b(`The parameter "${m}" is incompatible with toasts`)},qA=m=>{let _=k1(m);_&&U(m,_)},N1=m=>{m.backdrop===!1&&m.allowOutsideClick&&b('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),m.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(m.theme)&&b(`Invalid theme "${m.theme}"`);for(let _ in m)WA(_),m.toast&&$A(_),qA(_)};function F1(m){let _=A(),C=q(),k=en.innerParams.get(this);if(!C||It(C,k.hideClass.popup)){b("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let X=YA(m),Ae=Object.assign({},k,X);N1(Ae),_&&(_.dataset.swal2Theme=Ae.theme),oi(this,Ae),en.innerParams.set(this,Ae),Object.defineProperties(this,{params:{value:Object.assign({},this.params,m),writable:!1,enumerable:!0}})}let YA=m=>{let _={};return Object.keys(m).forEach(C=>{if(R1(C)){let k=m;_[C]=k[C]}else b(`Invalid parameter to update: ${C}`)}),_};function L1(){var m;let _=en.domCache.get(this),C=en.innerParams.get(this);if(!C){V1(this);return}_.popup&&s.swalCloseEventFinishedCallback&&(s.swalCloseEventFinishedCallback(),delete s.swalCloseEventFinishedCallback),typeof C.didDestroy=="function"&&C.didDestroy(),(m=s.eventEmitter)===null||m===void 0||m.emit("didDestroy"),XA(this)}let XA=m=>{V1(m),delete m.params,delete s.keydownHandler,delete s.keydownTarget,delete s.currentInstance},V1=m=>{m.isAwaitingPromise?(Lg(en,m),m.isAwaitingPromise=!0):(Lg(fl,m),Lg(en,m),delete m.isAwaitingPromise,delete m.disableButtons,delete m.enableButtons,delete m.getInput,delete m.disableInput,delete m.enableInput,delete m.hideLoading,delete m.disableLoading,delete m.showValidationMessage,delete m.resetValidationMessage,delete m.close,delete m.closePopup,delete m.closeModal,delete m.closeToast,delete m.rejectPromise,delete m.update,delete m._destroy)},Lg=(m,_)=>{for(let C in m)m[C].delete(_)};var ZA=Object.freeze({__proto__:null,_destroy:L1,close:us,closeModal:us,closePopup:us,closeToast:us,disableButtons:A1,disableInput:D1,disableLoading:yf,enableButtons:E1,enableInput:T1,getInput:w1,handleAwaitingPromise:ru,hideLoading:yf,rejectPromise:_1,resetValidationMessage:I1,showValidationMessage:P1,update:F1});let KA=(m,_,C)=>{m.toast?JA(m,_,C):(eT(_),tT(_),nT(m,_,C))},JA=(m,_,C)=>{_.popup.onclick=()=>{m&&(QA(m)||m.timer||m.input)||C(dl.close)}},QA=m=>!!(m.showConfirmButton||m.showDenyButton||m.showCancelButton||m.showCloseButton),bf=!1,eT=m=>{m.popup.onmousedown=()=>{m.container.onmouseup=function(_){m.container.onmouseup=()=>{},_.target===m.container&&(bf=!0)}}},tT=m=>{m.container.onmousedown=_=>{_.target===m.container&&_.preventDefault(),m.popup.onmouseup=function(C){m.popup.onmouseup=()=>{},(C.target===m.popup||C.target instanceof HTMLElement&&m.popup.contains(C.target))&&(bf=!0)}}},nT=(m,_,C)=>{_.container.onclick=k=>{if(bf){bf=!1;return}k.target===_.container&&B(m.allowOutsideClick)&&C(dl.backdrop)}},iT=m=>typeof m=="object"&&m.jquery,U1=m=>m instanceof Element||iT(m),rT=m=>{let _={};return typeof m[0]=="object"&&!U1(m[0])?Object.assign(_,m[0]):["title","html","icon"].forEach((C,k)=>{let X=m[k];typeof X=="string"||U1(X)?_[C]=X:X!==void 0&&y(`Unexpected type of ${C}! Expected "string" or "Element", got ${typeof X}`)}),_};function oT(...m){return new this(...m)}function sT(m){class _ extends this{_main(k,X){return super._main(k,Object.assign({},m,X))}}return _}let aT=()=>s.timeout&&s.timeout.getTimerLeft(),B1=()=>{if(s.timeout)return Je(),s.timeout.stop()},z1=()=>{if(s.timeout){let m=s.timeout.start();return qe(m),m}},lT=()=>{let m=s.timeout;return m&&(m.running?B1():z1())},cT=m=>{if(s.timeout){let _=s.timeout.increase(m);return qe(_,!0),_}},uT=()=>!!(s.timeout&&s.timeout.isRunning()),H1=!1,Vg={};function dT(m="data-swal-template"){Vg[m]=this,H1||(document.body.addEventListener("click",fT),H1=!0)}let fT=m=>{for(let _=m.target;_&&_!==document;_=_.parentNode)for(let C in Vg){let k=_.getAttribute&&_.getAttribute(C);if(k){Vg[C].fire({template:k});return}}};class hT{constructor(){this.events={}}_getHandlersByEventName(_){return typeof this.events[_]>"u"&&(this.events[_]=[]),this.events[_]}on(_,C){let k=this._getHandlersByEventName(_);k.includes(C)||k.push(C)}once(_,C){let k=(...X)=>{this.removeListener(_,k),C.apply(this,X)};this.on(_,k)}emit(_,...C){this._getHandlersByEventName(_).forEach(k=>{try{k.apply(this,C)}catch(X){console.error(X)}})}removeListener(_,C){let k=this._getHandlersByEventName(_),X=k.indexOf(C);X>-1&&k.splice(X,1)}removeAllListeners(_){this.events[_]!==void 0&&(this.events[_].length=0)}reset(){this.events={}}}s.eventEmitter=new hT;var pT=Object.freeze({__proto__:null,argsToParams:rT,bindClickHandler:dT,clickCancel:rA,clickConfirm:ul,clickDeny:Ro,enableLoading:pl,fire:oT,getActions:qt,getCancelButton:Le,getCloseButton:We,getConfirmButton:Te,getContainer:A,getDenyButton:ut,getFocusableElements:Xe,getFooter:pe,getHtmlContainer:ae,getIcon:ne,getIconContent:ue,getImage:oe,getInputLabel:xt,getLoader:Kt,getPopup:q,getProgressSteps:_e,getTimerLeft:aT,getTimerProgressBar:ve,getTitle:ce,getValidationMessage:Fe,increaseTimer:cT,isDeprecatedParameter:k1,isLoading:Ft,isTimerRunning:uT,isUpdatableParameter:R1,isValidParameter:O1,isVisible:hi,mixin:sT,off:(m,_)=>{if(s.eventEmitter){if(!m){s.eventEmitter.reset();return}_?s.eventEmitter.removeListener(m,_):s.eventEmitter.removeAllListeners(m)}},on:(m,_)=>{s.eventEmitter&&s.eventEmitter.on(m,_)},once:(m,_)=>{s.eventEmitter&&s.eventEmitter.once(m,_)},resumeTimer:z1,showLoading:pl,stopTimer:B1,toggleTimer:lT});class mT{constructor(_,C){this.callback=_,this.remaining=C,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(_){let C=this.running;return C&&this.stop(),this.remaining+=_,C&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let j1=["swal-title","swal-html","swal-footer"],gT=m=>{let _=typeof m.template=="string"?document.querySelector(m.template):m.template;if(!_)return{};let C=_.content;return MT(C),Object.assign(_T(C),vT(C),xT(C),yT(C),bT(C),CT(C),wT(C,j1))},_T=m=>{let _={};return Array.from(m.querySelectorAll("swal-param")).forEach(k=>{oa(k,["name","value"]);let X=k.getAttribute("name"),Ae=k.getAttribute("value");!X||!Ae||(X in ds&&typeof ds[X]=="boolean"?_[X]=Ae!=="false":X in ds&&typeof ds[X]=="object"?_[X]=JSON.parse(Ae):_[X]=Ae)}),_},vT=m=>{let _={};return Array.from(m.querySelectorAll("swal-function-param")).forEach(k=>{let X=k.getAttribute("name"),Ae=k.getAttribute("value");!X||!Ae||(_[X]=new Function(`return ${Ae}`)())}),_},xT=m=>{let _={};return Array.from(m.querySelectorAll("swal-button")).forEach(k=>{oa(k,["type","color","aria-label"]);let X=k.getAttribute("type");if(!(!X||!["confirm","cancel","deny"].includes(X))){if(_[`${X}ButtonText`]=k.innerHTML,_[`show${S(X)}Button`]=!0,k.hasAttribute("color")){let Ae=k.getAttribute("color");Ae!==null&&(_[`${X}ButtonColor`]=Ae)}if(k.hasAttribute("aria-label")){let Ae=k.getAttribute("aria-label");Ae!==null&&(_[`${X}ButtonAriaLabel`]=Ae)}}}),_},yT=m=>{let _={},C=m.querySelector("swal-image");return C&&(oa(C,["src","width","height","alt"]),C.hasAttribute("src")&&(_.imageUrl=C.getAttribute("src")||void 0),C.hasAttribute("width")&&(_.imageWidth=C.getAttribute("width")||void 0),C.hasAttribute("height")&&(_.imageHeight=C.getAttribute("height")||void 0),C.hasAttribute("alt")&&(_.imageAlt=C.getAttribute("alt")||void 0)),_},bT=m=>{let _={},C=m.querySelector("swal-icon");return C&&(oa(C,["type","color"]),C.hasAttribute("type")&&(_.icon=C.getAttribute("type")),C.hasAttribute("color")&&(_.iconColor=C.getAttribute("color")),_.iconHtml=C.innerHTML),_},CT=m=>{let _={},C=m.querySelector("swal-input");C&&(oa(C,["type","label","placeholder","value"]),_.input=C.getAttribute("type")||"text",C.hasAttribute("label")&&(_.inputLabel=C.getAttribute("label")),C.hasAttribute("placeholder")&&(_.inputPlaceholder=C.getAttribute("placeholder")),C.hasAttribute("value")&&(_.inputValue=C.getAttribute("value")));let k=Array.from(m.querySelectorAll("swal-input-option"));return k.length&&(_.inputOptions={},k.forEach(X=>{oa(X,["value"]);let Ae=X.getAttribute("value");if(!Ae)return;let mt=X.innerHTML;_.inputOptions[Ae]=mt})),_},wT=(m,_)=>{let C={};for(let k in _){let X=_[k],Ae=m.querySelector(X);Ae&&(oa(Ae,[]),C[X.replace(/^swal-/,"")]=Ae.innerHTML.trim())}return C},MT=m=>{let _=j1.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(m.children).forEach(C=>{let k=C.tagName.toLowerCase();_.includes(k)||b(`Unrecognized element <${k}>`)})},oa=(m,_)=>{Array.from(m.attributes).forEach(C=>{_.indexOf(C.name)===-1&&b([`Unrecognized attribute "${C.name}" on <${m.tagName.toLowerCase()}>.`,`${_.length?`Allowed attributes are: ${_.join(", ")}`:"To set the value, use HTML within the element."}`])})},G1=10,ST=m=>{var _,C;let k=A(),X=q();if(!k||!X)return;typeof m.willOpen=="function"&&m.willOpen(X),(_=s.eventEmitter)===null||_===void 0||_.emit("willOpen",X);let mt=window.getComputedStyle(document.body).overflowY;if(TT(k,X,m),setTimeout(()=>{ET(k,X)},G1),Rt()&&(AT(k,m.scrollbarPadding!==void 0?m.scrollbarPadding:!1,mt),fA()),!wn()&&!s.previousActiveElement&&(s.previousActiveElement=document.activeElement),typeof m.didOpen=="function"){let Lt=m.didOpen;setTimeout(()=>Lt(X))}(C=s.eventEmitter)===null||C===void 0||C.emit("didOpen",X)},Cf=m=>{let _=q();if(!_||m.target!==_)return;let C=A();C&&(_.removeEventListener("animationend",Cf),_.removeEventListener("transitionend",Cf),C.style.overflowY="auto",ze(C,h["no-transition"]))},ET=(m,_)=>{Oe(_)?(m.style.overflowY="hidden",_.addEventListener("animationend",Cf),_.addEventListener("transitionend",Cf)):m.style.overflowY="auto"},AT=(m,_,C)=>{hA(),_&&C!=="hidden"&&yA(C),setTimeout(()=>{m.scrollTop=0})},TT=(m,_,C)=>{var k;(k=C.showClass)!==null&&k!==void 0&&k.backdrop&&et(m,C.showClass.backdrop),C.animation?(_.style.setProperty("opacity","0","important"),W(_,"grid"),setTimeout(()=>{var X;(X=C.showClass)!==null&&X!==void 0&&X.popup&&et(_,C.showClass.popup),_.style.removeProperty("opacity")},G1)):W(_,"grid"),et([document.documentElement,document.body],h.shown),C.heightAuto&&C.backdrop&&!C.toast&&et([document.documentElement,document.body],h["height-auto"])};var W1={email:(m,_)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(m)?Promise.resolve():Promise.resolve(_||"Invalid email address"),url:(m,_)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(m)?Promise.resolve():Promise.resolve(_||"Invalid URL")};function DT(m){m.inputValidator||(m.input==="email"&&(m.inputValidator=W1.email),m.input==="url"&&(m.inputValidator=W1.url))}function PT(m){(!m.target||typeof m.target=="string"&&!document.querySelector(m.target)||typeof m.target!="string"&&!m.target.appendChild)&&(b('Target parameter is not valid, defaulting to "body"'),m.target="body")}function IT(m){DT(m),m.showLoaderOnConfirm&&!m.preConfirm&&b(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),PT(m),typeof m.title=="string"&&(m.title=m.title.split(`
`).join("<br />")),Ie(m)}let no;var wf=new WeakMap;class Ln{constructor(..._){if(i(this,wf,Promise.resolve({isConfirmed:!1,isDenied:!1,isDismissed:!0})),typeof window>"u")return;no=this;let C=Object.freeze(this.constructor.argsToParams(_));this.params=C,this.isAwaitingPromise=!1,r(wf,this,this._main(no.params))}_main(_,C={}){if(N1(Object.assign({},C,_)),s.currentInstance){let Ae=fl.swalPromiseResolve.get(s.currentInstance),{isAwaitingPromise:mt}=s.currentInstance;s.currentInstance._destroy(),mt||Ae({isDismissed:!0}),Rt()&&p1()}s.currentInstance=no;let k=RT(_,C);IT(k),Object.freeze(k),s.timeout&&(s.timeout.stop(),delete s.timeout),clearTimeout(s.restoreFocusTimeout);let X=kT(no);return oi(no,k),en.innerParams.set(no,k),OT(no,X,k)}then(_){return t(wf,this).then(_)}finally(_){return t(wf,this).finally(_)}}let OT=(m,_,C)=>new Promise((k,X)=>{let Ae=mt=>{m.close({isDismissed:!0,dismiss:mt,isConfirmed:!1,isDenied:!1})};fl.swalPromiseResolve.set(m,k),fl.swalPromiseReject.set(m,X),_.confirmButton.onclick=()=>{LA(m)},_.denyButton.onclick=()=>{VA(m)},_.cancelButton.onclick=()=>{UA(m,Ae)},_.closeButton.onclick=()=>{Ae(dl.close)},KA(C,_,Ae),oA(s,C,Ae),TA(m,C),ST(C),NT(s,C,Ae),FT(_,C),setTimeout(()=>{_.container.scrollTop=0})}),RT=(m,_)=>{let C=gT(m),k=Object.assign({},ds,_,C,m);return k.showClass=Object.assign({},ds.showClass,k.showClass),k.hideClass=Object.assign({},ds.hideClass,k.hideClass),k.animation===!1&&(k.showClass={backdrop:"swal2-noanimation"},k.hideClass={}),k},kT=m=>{let _={popup:q(),container:A(),actions:qt(),confirmButton:Te(),denyButton:ut(),cancelButton:Le(),loader:Kt(),closeButton:We(),validationMessage:Fe(),progressSteps:_e()};return en.domCache.set(m,_),_},NT=(m,_,C)=>{let k=ve();se(k),_.timer&&(m.timeout=new mT(()=>{C("timer"),delete m.timeout},_.timer),_.timerProgressBar&&k&&(W(k),Ut(k,_,"timerProgressBar"),setTimeout(()=>{m.timeout&&m.timeout.running&&qe(_.timer)})))},FT=(m,_)=>{if(!_.toast){if(!B(_.allowEnterKey)){U("allowEnterKey"),UT();return}LT(m)||VT(m,_)||kg(-1,1)}},LT=m=>{let _=Array.from(m.popup.querySelectorAll("[autofocus]"));for(let C of _)if(C instanceof HTMLElement&&Se(C))return C.focus(),!0;return!1},VT=(m,_)=>_.focusDeny&&Se(m.denyButton)?(m.denyButton.focus(),!0):_.focusCancel&&Se(m.cancelButton)?(m.cancelButton.focus(),!0):_.focusConfirm&&Se(m.confirmButton)?(m.confirmButton.focus(),!0):!1,UT=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Ln.prototype.disableButtons=A1,Ln.prototype.enableButtons=E1,Ln.prototype.getInput=w1,Ln.prototype.disableInput=D1,Ln.prototype.enableInput=T1,Ln.prototype.hideLoading=yf,Ln.prototype.disableLoading=yf,Ln.prototype.showValidationMessage=P1,Ln.prototype.resetValidationMessage=I1,Ln.prototype.close=us,Ln.prototype.closePopup=us,Ln.prototype.closeModal=us,Ln.prototype.closeToast=us,Ln.prototype.rejectPromise=_1,Ln.prototype.update=F1,Ln.prototype._destroy=L1,Object.assign(Ln,pT),Object.keys(ZA).forEach(m=>{Ln[m]=function(..._){if(no&&no[m])return no[m](..._)}}),Ln.DismissReason=dl,Ln.version="11.26.17";let Mf=Ln;return Mf.default=Mf,Mf});typeof wo<"u"&&wo.Sweetalert2&&(wo.swal=wo.sweetAlert=wo.Swal=wo.SweetAlert=wo.Sweetalert2);typeof document<"u"&&function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')});function Gg(n,e){return Object.is(n,e)}var Jn=null,Sf=!1,Wg=1,fr=Symbol("SIGNAL");function kt(n){let e=Jn;return Jn=n,e}function $g(){return Jn}var au={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function lu(n){if(Sf)throw new Error("");if(Jn===null)return;Jn.consumerOnSignalRead(n);let e=Jn.nextProducerIndex++;if(Df(Jn),e<Jn.producerNode.length&&Jn.producerNode[e]!==n&&su(Jn)){let t=Jn.producerNode[e];Tf(t,Jn.producerIndexOfThis[e])}Jn.producerNode[e]!==n&&(Jn.producerNode[e]=n,Jn.producerIndexOfThis[e]=su(Jn)?Z1(n,Jn,e):0),Jn.producerLastReadVersion[e]=n.version}function X1(){Wg++}function qg(n){if(!(su(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Wg)){if(!n.producerMustRecompute(n)&&!Kg(n)){jg(n);return}n.producerRecomputeValue(n),jg(n)}}function Yg(n){if(n.liveConsumerNode===void 0)return;let e=Sf;Sf=!0;try{for(let t of n.liveConsumerNode)t.dirty||XT(t)}finally{Sf=e}}function Xg(){return Jn?.consumerAllowSignalWrites!==!1}function XT(n){n.dirty=!0,Yg(n),n.consumerMarkedDirty?.(n)}function jg(n){n.dirty=!1,n.lastCleanEpoch=Wg}function Af(n){return n&&(n.nextProducerIndex=0),kt(n)}function Zg(n,e){if(kt(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(su(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Tf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Kg(n){Df(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(qg(t),i!==t.version))return!0}return!1}function Jg(n){if(Df(n),su(n))for(let e=0;e<n.producerNode.length;e++)Tf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Z1(n,e,t){if(K1(n),n.liveConsumerNode.length===0&&J1(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=Z1(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Tf(n,e){if(K1(n),n.liveConsumerNode.length===1&&J1(n))for(let i=0;i<n.producerNode.length;i++)Tf(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Df(r),r.producerIndexOfThis[i]=e}}function su(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Df(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function K1(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function J1(n){return n.producerNode!==void 0}function Qg(n,e){let t=Object.create(ZT);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(qg(t),lu(t),t.value===Ef)throw t.error;return t.value};return i[fr]=t,i}var zg=Symbol("UNSET"),Hg=Symbol("COMPUTING"),Ef=Symbol("ERRORED"),ZT=lt(xe({},au),{value:zg,dirty:!0,error:null,equal:Gg,kind:"computed",producerMustRecompute(n){return n.value===zg||n.value===Hg},producerRecomputeValue(n){if(n.value===Hg)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Hg;let t=Af(n),i,r=!1;try{i=n.computation(),kt(null),r=e!==zg&&e!==Ef&&i!==Ef&&n.equal(e,i)}catch(o){i=Ef,n.error=o}finally{Zg(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function KT(){throw new Error}var Q1=KT;function e2(n){Q1(n)}function e_(n){Q1=n}var JT=null;function t_(n,e){let t=Object.create(Pf);t.value=n,e!==void 0&&(t.equal=e);let i=()=>(lu(t),t.value);return i[fr]=t,i}function cu(n,e){Xg()||e2(n),n.equal(n.value,e)||(n.value=e,QT(n))}function n_(n,e){Xg()||e2(n),cu(n,e(n.value))}var Pf=lt(xe({},au),{equal:Gg,value:void 0,kind:"signal"});function QT(n){n.version++,X1(),Yg(n),JT?.()}function i_(n){let e=kt(null);try{return n()}finally{kt(e)}}var r_;function uu(){return r_}function ko(n){let e=r_;return r_=n,e}var If=Symbol("NotFound");function gt(n){return typeof n=="function"}function gl(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Of=gl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function du(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var zn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(gt(i))try{i()}catch(o){e=o instanceof Of?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{t2(o)}catch(s){e=e??[],s instanceof Of?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Of(e)}}add(e){var t;if(e&&e!==this)if(this.closed)t2(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&du(t,e)}remove(e){let{_finalizers:t}=this;t&&du(t,e),e instanceof n&&e._removeParent(this)}};zn.EMPTY=(()=>{let n=new zn;return n.closed=!0,n})();var o_=zn.EMPTY;function Rf(n){return n instanceof zn||n&&"closed"in n&&gt(n.remove)&&gt(n.add)&&gt(n.unsubscribe)}function t2(n){gt(n)?n():n.unsubscribe()}var Dr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var _l={setTimeout(n,e,...t){let{delegate:i}=_l;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=_l;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function kf(n){_l.setTimeout(()=>{let{onUnhandledError:e}=Dr;if(e)e(n);else throw n})}function fu(){}var n2=s_("C",void 0,void 0);function i2(n){return s_("E",void 0,n)}function r2(n){return s_("N",n,void 0)}function s_(n,e,t){return{kind:n,value:e,error:t}}var sa=null;function vl(n){if(Dr.useDeprecatedSynchronousErrorHandling){let e=!sa;if(e&&(sa={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=sa;if(sa=null,t)throw i}}else n()}function o2(n){Dr.useDeprecatedSynchronousErrorHandling&&sa&&(sa.errorThrown=!0,sa.error=n)}var aa=class extends zn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Rf(e)&&e.add(this)):this.destination=o3}static create(e,t,i){return new xl(e,t,i)}next(e){this.isStopped?l_(r2(e),this):this._next(e)}error(e){this.isStopped?l_(i2(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?l_(n2,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},i3=Function.prototype.bind;function a_(n,e){return i3.call(n,e)}var c_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Nf(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Nf(i)}else Nf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Nf(t)}}},xl=class extends aa{constructor(e,t,i){super();let r;if(gt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Dr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&a_(e.next,o),error:e.error&&a_(e.error,o),complete:e.complete&&a_(e.complete,o)}):r=e}this.destination=new c_(r)}};function Nf(n){Dr.useDeprecatedSynchronousErrorHandling?o2(n):kf(n)}function r3(n){throw n}function l_(n,e){let{onStoppedNotification:t}=Dr;t&&_l.setTimeout(()=>t(n,e))}var o3={closed:!0,next:fu,error:r3,complete:fu};var yl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Xi(n){return n}function u_(...n){return d_(n)}function d_(n){return n.length===0?Xi:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Wt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=a3(t)?t:new xl(t,i,r);return vl(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=s2(i),new i((r,o)=>{let s=new xl({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[yl](){return this}pipe(...t){return d_(t)(this)}toPromise(t){return t=s2(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function s2(n){var e;return(e=n??Dr.Promise)!==null&&e!==void 0?e:Promise}function s3(n){return n&&gt(n.next)&&gt(n.error)&&gt(n.complete)}function a3(n){return n&&n instanceof aa||s3(n)&&Rf(n)}function f_(n){return gt(n?.lift)}function zt(n){return e=>{if(f_(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Nt(n,e,t,i,r){return new h_(n,e,t,i,r)}var h_=class extends aa{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=r?function(a){try{r(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function bl(){return zt((n,e)=>{let t=null;n._refCount++;let i=Nt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Cl=class extends Wt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,f_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zn;let t=this.getSubject();e.add(this.source.subscribe(Nt(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zn.EMPTY)}return e}refCount(){return bl()(this)}};var a2=gl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Hn=(()=>{class n extends Wt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Ff(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new a2}next(t){vl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){vl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){vl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?o_:(this.currentObservers=null,o.push(t),new zn(()=>{this.currentObservers=null,du(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new Wt;return t.source=this,t}}return n.create=(e,t)=>new Ff(e,t),n})(),Ff=class extends Hn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:o_}};var Qn=class extends Hn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Oi=new Wt(n=>n.complete());function l2(n){return n&&gt(n.schedule)}function c2(n){return n[n.length-1]}function Lf(n){return gt(c2(n))?n.pop():void 0}function fs(n){return l2(c2(n))?n.pop():void 0}function d2(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(p){try{f(i.next(p))}catch(h){s(h)}}function u(p){try{f(i.throw(p))}catch(h){s(h)}}function f(p){p.done?o(p.value):r(p.value).then(a,u)}f((i=i.apply(n,e||[])).next())})}function u2(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function la(n){return this instanceof la?(this.v=n,this):new la(n)}function f2(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(x){return function(w){return Promise.resolve(w).then(x,h)}}function a(x,w){i[x]&&(r[x]=function(S){return new Promise(function(b,y){o.push([x,S,b,y])>1||u(x,S)})},w&&(r[x]=w(r[x])))}function u(x,w){try{f(i[x](w))}catch(S){v(o[0][3],S)}}function f(x){x.value instanceof la?Promise.resolve(x.value.v).then(p,h):v(o[0][2],x)}function p(x){u("next",x)}function h(x){u("throw",x)}function v(x,w){x(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}function h2(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof u2=="function"?u2(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),r(a,u,s.done,s.value)})}}function r(o,s,a,u){Promise.resolve(u).then(function(f){o({value:f,done:a})},s)}}var Vf=n=>n&&typeof n.length=="number"&&typeof n!="function";function Uf(n){return gt(n?.then)}function Bf(n){return gt(n[yl])}function zf(n){return Symbol.asyncIterator&&gt(n?.[Symbol.asyncIterator])}function Hf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function l3(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var jf=l3();function Gf(n){return gt(n?.[jf])}function Wf(n){return f2(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield la(t.read());if(r)return yield la(void 0);yield yield la(i)}}finally{t.releaseLock()}})}function $f(n){return gt(n?.getReader)}function jn(n){if(n instanceof Wt)return n;if(n!=null){if(Bf(n))return c3(n);if(Vf(n))return u3(n);if(Uf(n))return d3(n);if(zf(n))return p2(n);if(Gf(n))return f3(n);if($f(n))return h3(n)}throw Hf(n)}function c3(n){return new Wt(e=>{let t=n[yl]();if(gt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function u3(n){return new Wt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function d3(n){return new Wt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,kf)})}function f3(n){return new Wt(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function p2(n){return new Wt(e=>{p3(n,e).catch(t=>e.error(t))})}function h3(n){return p2(Wf(n))}function p3(n,e){var t,i,r,o;return d2(this,void 0,void 0,function*(){try{for(t=h2(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Ri(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function qf(n,e=0){return zt((t,i)=>{t.subscribe(Nt(i,r=>Ri(i,n,()=>i.next(r),e),()=>Ri(i,n,()=>i.complete(),e),r=>Ri(i,n,()=>i.error(r),e)))})}function Yf(n,e=0){return zt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function m2(n,e){return jn(n).pipe(Yf(e),qf(e))}function g2(n,e){return jn(n).pipe(Yf(e),qf(e))}function _2(n,e){return new Wt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function v2(n,e){return new Wt(t=>{let i;return Ri(t,e,()=>{i=n[jf](),Ri(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>gt(i?.return)&&i.return()})}function Xf(n,e){if(!n)throw new Error("Iterable cannot be null");return new Wt(t=>{Ri(t,e,()=>{let i=n[Symbol.asyncIterator]();Ri(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function x2(n,e){return Xf(Wf(n),e)}function y2(n,e){if(n!=null){if(Bf(n))return m2(n,e);if(Vf(n))return _2(n,e);if(Uf(n))return g2(n,e);if(zf(n))return Xf(n,e);if(Gf(n))return v2(n,e);if($f(n))return x2(n,e)}throw Hf(n)}function hn(n,e){return e?y2(n,e):jn(n)}function st(...n){let e=fs(n);return hn(n,e)}function wl(n,e){let t=gt(n)?n:()=>n,i=r=>r.error(t());return new Wt(e?r=>e.schedule(i,0,r):i)}function p_(n){return!!n&&(n instanceof Wt||gt(n.lift)&&gt(n.subscribe))}var No=gl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Mt(n,e){return zt((t,i)=>{let r=0;t.subscribe(Nt(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:m3}=Array;function g3(n,e){return m3(e)?n(...e):n(e)}function Zf(n){return Mt(e=>g3(n,e))}var{isArray:_3}=Array,{getPrototypeOf:v3,prototype:x3,keys:y3}=Object;function Kf(n){if(n.length===1){let e=n[0];if(_3(e))return{args:e,keys:null};if(b3(e)){let t=y3(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function b3(n){return n&&typeof n=="object"&&v3(n)===x3}function Jf(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function hu(...n){let e=fs(n),t=Lf(n),{args:i,keys:r}=Kf(n);if(i.length===0)return hn([],e);let o=new Wt(C3(i,e,r?s=>Jf(r,s):Xi));return t?o.pipe(Zf(t)):o}function C3(n,e,t=Xi){return i=>{b2(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let u=0;u<r;u++)b2(e,()=>{let f=hn(n[u],e),p=!1;f.subscribe(Nt(i,h=>{o[u]=h,p||(p=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function b2(n,e,t){n?Ri(t,n,e):e()}function C2(n,e,t,i,r,o,s,a){let u=[],f=0,p=0,h=!1,v=()=>{h&&!u.length&&!f&&e.complete()},x=S=>f<i?w(S):u.push(S),w=S=>{o&&e.next(S),f++;let b=!1;jn(t(S,p++)).subscribe(Nt(e,y=>{r?.(y),o?x(y):e.next(y)},()=>{b=!0},void 0,()=>{if(b)try{for(f--;u.length&&f<i;){let y=u.shift();s?Ri(e,s,()=>w(y)):w(y)}v()}catch(y){e.error(y)}}))};return n.subscribe(Nt(e,x,()=>{h=!0,v()})),()=>{a?.()}}function Vn(n,e,t=1/0){return gt(e)?Vn((i,r)=>Mt((o,s)=>e(i,o,r,s))(jn(n(i,r))),t):(typeof e=="number"&&(t=e),zt((i,r)=>C2(i,r,n,t)))}function Ml(n=1/0){return Vn(Xi,n)}function w2(){return Ml(1)}function Sl(...n){return w2()(hn(n,fs(n)))}function Qf(n){return new Wt(e=>{jn(n()).subscribe(e)})}function Fo(...n){let e=Lf(n),{args:t,keys:i}=Kf(n),r=new Wt(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,f=s;for(let p=0;p<s;p++){let h=!1;jn(t[p]).subscribe(Nt(o,v=>{h||(h=!0,f--),a[p]=v},()=>u--,void 0,()=>{(!u||!h)&&(f||o.next(i?Jf(i,a):a),o.complete())}))}});return e?r.pipe(Zf(e)):r}function Si(n,e){return zt((t,i)=>{let r=0;t.subscribe(Nt(i,o=>n.call(e,o,r++)&&i.next(o)))})}function Lo(n){return zt((e,t)=>{let i=null,r=!1,o;i=e.subscribe(Nt(t,void 0,void 0,s=>{o=jn(n(s,Lo(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function M2(n,e,t,i,r){return(o,s)=>{let a=t,u=e,f=0;o.subscribe(Nt(s,p=>{let h=f++;u=a?n(u,p,h):(a=!0,p),i&&s.next(u)},r&&(()=>{a&&s.next(u),s.complete()})))}}function io(n,e){return gt(e)?Vn(n,e,1):Vn(n,1)}function hs(n){return zt((e,t)=>{let i=!1;e.subscribe(Nt(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Vo(n){return n<=0?()=>Oi:zt((e,t)=>{let i=0;e.subscribe(Nt(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function eh(n=w3){return zt((e,t)=>{let i=!1;e.subscribe(Nt(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function w3(){return new No}function ca(n){return zt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Uo(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Si((r,o)=>n(r,o,i)):Xi,Vo(1),t?hs(e):eh(()=>new No))}function El(n){return n<=0?()=>Oi:zt((e,t)=>{let i=[];e.subscribe(Nt(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function m_(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Si((r,o)=>n(r,o,i)):Xi,El(1),t?hs(e):eh(()=>new No))}function g_(n,e){return zt(M2(n,e,arguments.length>=2,!0))}function __(...n){let e=fs(n);return zt((t,i)=>{(e?Sl(n,t,e):Sl(n,t)).subscribe(i)})}function ki(n,e){return zt((t,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();t.subscribe(Nt(i,u=>{r?.unsubscribe();let f=0,p=o++;jn(n(u,p)).subscribe(r=Nt(i,h=>i.next(e?e(u,h,p,f++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function v_(n){return zt((e,t)=>{jn(n).subscribe(Nt(t,()=>t.complete(),fu)),!t.closed&&e.subscribe(t)})}function Gn(n,e,t){let i=gt(n)||e||t?{next:n,error:e,complete:t}:n;return i?zt((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(Nt(o,u=>{var f;(f=i.next)===null||f===void 0||f.call(i,u),o.next(u)},()=>{var u;a=!1,(u=i.complete)===null||u===void 0||u.call(i),o.complete()},u=>{var f;a=!1,(f=i.error)===null||f===void 0||f.call(i,u),o.error(u)},()=>{var u,f;a&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):Xi}var uC="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Ge=class extends Error{code;constructor(e,t){super(dC(e,t)),this.code=e}};function M3(n){return`NG0${Math.abs(n)}`}function dC(n,e){return`${M3(n)}${e?": "+e:""}`}var fC=Symbol("InputSignalNode#UNSET"),S3=lt(xe({},Pf),{transformFn:void 0,applyValueToInputSignal(n,e){cu(n,e)}});function hC(n,e){let t=Object.create(S3);t.value=n,t.transformFn=e?.transform;function i(){if(lu(t),t.value===fC){let r=null;throw new Ge(-950,r)}return t.value}return i[fr]=t,i}function Su(n){return{toString:n}.toString()}var th="__parameters__";function E3(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function pC(n,e,t){return Su(()=>{let i=E3(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(u,f,p){let h=u.hasOwnProperty(th)?u[th]:Object.defineProperty(u,th,{value:[]})[th];for(;h.length<=p;)h.push(null);return(h[p]=h[p]||[]).push(s),u}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var mu=globalThis;function fn(n){for(let e in n)if(n[e]===fn)return e;throw Error("Could not find renamed property on target object.")}function A3(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Li(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Li).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function R_(n,e){return n?e?`${n} ${e}`:n:e||""}var T3=fn({__forward_ref__:fn});function Ai(n){return n.__forward_ref__=Ai,n.toString=function(){return Li(this())},n}function Ei(n){return mC(n)?n():n}function mC(n){return typeof n=="function"&&n.hasOwnProperty(T3)&&n.__forward_ref__===Ai}function Pe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Rr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Rh(n){return S2(n,_C)||S2(n,vC)}function gC(n){return Rh(n)!==null}function S2(n,e){return n.hasOwnProperty(e)?n[e]:null}function D3(n){let e=n&&(n[_C]||n[vC]);return e||null}function E2(n){return n&&(n.hasOwnProperty(A2)||n.hasOwnProperty(P3))?n[A2]:null}var _C=fn({\u0275prov:fn}),A2=fn({\u0275inj:fn}),vC=fn({ngInjectableDef:fn}),P3=fn({ngInjectorDef:fn}),$e=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Pe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function xC(n){return n&&!!n.\u0275providers}var I3=fn({\u0275cmp:fn}),O3=fn({\u0275dir:fn}),R3=fn({\u0275pipe:fn}),k3=fn({\u0275mod:fn}),ch=fn({\u0275fac:fn}),vu=fn({__NG_ELEMENT_ID__:fn}),T2=fn({__NG_ENV_ID__:fn});function Bo(n){return typeof n=="string"?n:n==null?"":String(n)}function N3(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Bo(n)}function yC(n,e){throw new Ge(-200,n)}function Pv(n,e){throw new Ge(-201,!1)}var wt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(wt||{}),k_;function bC(){return k_}function Ni(n){let e=k_;return k_=n,e}function CC(n,e,t){let i=Rh(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&wt.Optional)return null;if(e!==void 0)return e;Pv(n,"Injector")}var F3={},da=F3,N_="__NG_DI_FLAG__",uh=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=t;return this.injector.get(e,i.optional?If:da,i)}},dh="ngTempTokenPath",L3="ngTokenPath",V3=/\n/gm,U3="\u0275",D2="__source";function B3(n,e=wt.Default){if(uu()===void 0)throw new Ge(-203,!1);if(uu()===null)return CC(n,void 0,e);{let t=uu(),i;return t instanceof uh?i=t.injector:i=t,i.get(n,e&wt.Optional?null:void 0,e)}}function De(n,e=wt.Default){return(bC()||B3)(Ei(n),e)}function be(n,e=wt.Default){return De(n,kh(e))}function kh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function F_(n){let e=[];for(let t=0;t<n.length;t++){let i=Ei(n[t]);if(Array.isArray(i)){if(i.length===0)throw new Ge(900,!1);let r,o=wt.Default;for(let s=0;s<i.length;s++){let a=i[s],u=z3(a);typeof u=="number"?u===-1?r=a.token:o|=u:r=a}e.push(De(r,o))}else e.push(De(i))}return e}function wC(n,e){return n[N_]=e,n.prototype[N_]=e,n}function z3(n){return n[N_]}function H3(n,e,t,i){let r=n[dh];throw e[D2]&&r.unshift(e[D2]),n.message=j3(`
`+n.message,r,t,i),n[L3]=r,n[dh]=null,n}function j3(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==U3?n.slice(2):n;let r=Li(e);if(Array.isArray(e))r=e.map(Li).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Li(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(V3,`
  `)}`}var G3=wC(pC("Optional"),8);var W3=wC(pC("SkipSelf"),4);function ha(n,e){let t=n.hasOwnProperty(ch);return t?n[ch]:null}function $3(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function q3(n){return n.flat(Number.POSITIVE_INFINITY)}function Iv(n,e){n.forEach(t=>Array.isArray(t)?Iv(t,e):e(t))}function MC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function fh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Y3(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function Nh(n,e,t){let i=Eu(n,e);return i>=0?n[i|1]=t:(i=~i,Y3(n,i,e,t)),i}function x_(n,e){let t=Eu(n,e);if(t>=0)return n[t|1]}function Eu(n,e){return X3(n,e,1)}function X3(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var pa={},Fi=[],xu=new $e(""),SC=new $e("",-1),EC=new $e(""),hh=class{get(e,t=da){if(t===da){let i=new Error(`NullInjectorError: No provider for ${Li(e)}!`);throw i.name="NullInjectorError",i}return t}};function AC(n,e){let t=n[k3]||null;if(!t&&e===!0)throw new Error(`Type ${Li(n)} does not have '\u0275mod' property.`);return t}function ma(n){return n[I3]||null}function Z3(n){return n[O3]||null}function K3(n){return n[R3]||null}function Au(n){return{\u0275providers:n}}function J3(...n){return{\u0275providers:TC(!0,n),\u0275fromNgModule:!0}}function TC(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return Iv(e,s=>{let a=s;L_(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&DC(r,o),t}function DC(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];Ov(r,o=>{e(o,i)})}}function L_(n,e,t,i){if(n=Ei(n),!n)return!1;let r=null,o=E2(n),s=!o&&ma(n);if(!o&&!s){let u=n.ngModule;if(o=E2(u),o)r=u;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let f of u)L_(f,e,t,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let f;try{Iv(o.imports,p=>{L_(p,e,t,i)&&(f||=[],f.push(p))})}finally{}f!==void 0&&DC(f,e)}if(!a){let f=ha(r)||(()=>new r);e({provide:r,useFactory:f,deps:Fi},r),e({provide:EC,useValue:r,multi:!0},r),e({provide:xu,useValue:()=>De(r),multi:!0},r)}let u=o.providers;if(u!=null&&!a){let f=n;Ov(u,p=>{e(p,f)})}}else return!1;return r!==n&&n.providers!==void 0}function Ov(n,e){for(let t of n)xC(t)&&(t=t.\u0275providers),Array.isArray(t)?Ov(t,e):e(t)}var Q3=fn({provide:String,useValue:fn});function PC(n){return n!==null&&typeof n=="object"&&Q3 in n}function eD(n){return!!(n&&n.useExisting)}function tD(n){return!!(n&&n.useFactory)}function Rl(n){return typeof n=="function"}function nD(n){return!!n.useClass}var Fh=new $e(""),ih={},P2={},y_;function Rv(){return y_===void 0&&(y_=new hh),y_}var pi=class{},yu=class extends pi{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,U_(e,s=>this.processProvider(s)),this.records.set(SC,Al(void 0,this)),r.has("environment")&&this.records.set(pi,Al(void 0,this));let o=this.records.get(Fh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(EC,Fi,wt.Self))}retrieve(e,t){let i=t;return this.get(e,i.optional?If:da,i)}destroy(){gu(this),this._destroyed=!0;let e=kt(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),kt(e)}}onDestroy(e){return gu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){gu(this);let t=ko(this),i=Ni(void 0),r;try{return e()}finally{ko(t),Ni(i)}}get(e,t=da,i=wt.Default){if(gu(this),e.hasOwnProperty(T2))return e[T2](this);i=kh(i);let r,o=ko(this),s=Ni(void 0);try{if(!(i&wt.SkipSelf)){let u=this.records.get(e);if(u===void 0){let f=aD(e)&&Rh(e);f&&this.injectableDefInScope(f)?u=Al(V_(e),ih):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let a=i&wt.Self?Rv():this.parent;return t=i&wt.Optional&&t===da?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[dh]=a[dh]||[]).unshift(Li(e)),o)throw a;return H3(a,e,"R3InjectorError",this.source)}else throw a}finally{Ni(s),ko(o)}}resolveInjectorInitializers(){let e=kt(null),t=ko(this),i=Ni(void 0),r;try{let o=this.get(xu,Fi,wt.Self);for(let s of o)s()}finally{ko(t),Ni(i),kt(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Li(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ei(e);let t=Rl(e)?e:Ei(e&&e.provide),i=rD(e);if(!Rl(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Al(void 0,ih,!0),r.factory=()=>F_(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=kt(null);try{return t.value===P2?yC(Li(e)):t.value===ih&&(t.value=P2,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&sD(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{kt(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ei(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function V_(n){let e=Rh(n),t=e!==null?e.factory:ha(n);if(t!==null)return t;if(n instanceof $e)throw new Ge(204,!1);if(n instanceof Function)return iD(n);throw new Ge(204,!1)}function iD(n){if(n.length>0)throw new Ge(204,!1);let t=D3(n);return t!==null?()=>t.factory(n):()=>new n}function rD(n){if(PC(n))return Al(void 0,n.useValue);{let e=IC(n);return Al(e,ih)}}function IC(n,e,t){let i;if(Rl(n)){let r=Ei(n);return ha(r)||V_(r)}else if(PC(n))i=()=>Ei(n.useValue);else if(tD(n))i=()=>n.useFactory(...F_(n.deps||[]));else if(eD(n))i=(r,o)=>De(Ei(n.useExisting),o!==void 0&&o&wt.Optional?wt.Optional:void 0);else{let r=Ei(n&&(n.useClass||n.provide));if(oD(n))i=()=>new r(...F_(n.deps));else return ha(r)||V_(r)}return i}function gu(n){if(n.destroyed)throw new Ge(205,!1)}function Al(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function oD(n){return!!n.deps}function sD(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function aD(n){return typeof n=="function"||typeof n=="object"&&n instanceof $e}function U_(n,e){for(let t of n)Array.isArray(t)?U_(t,e):t&&xC(t)?U_(t.\u0275providers,e):e(t)}function Bi(n,e){let t;n instanceof yu?(gu(n),t=n):t=new uh(n);let i,r=ko(t),o=Ni(void 0);try{return e()}finally{ko(r),Ni(o)}}function OC(){return bC()!==void 0||uu()!=null}function lD(n){if(!OC())throw new Ge(-203,!1)}function cD(n){return typeof n=="function"}var Go=0,Tt=1,ft=2,mi=3,Or=4,kr=5,ph=6,mh=7,Vi=8,kl=9,zo=10,In=11,bu=12,I2=13,jl=14,oo=15,ga=16,Tl=17,Ho=18,Lh=19,RC=20,ps=21,b_=22,gh=23,hr=24,Il=25,Ui=26,kC=1;var _a=7,_h=8,Nl=9,Zi=10;function ms(n){return Array.isArray(n)&&typeof n[kC]=="object"}function Wo(n){return Array.isArray(n)&&n[kC]===!0}function kv(n){return(n.flags&4)!==0}function Gl(n){return n.componentOffset>-1}function Vh(n){return(n.flags&1)===1}function so(n){return!!n.template}function vh(n){return(n[ft]&512)!==0}function Wl(n){return(n[ft]&256)===256}var B_=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function NC(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var $o=(()=>{let n=()=>FC;return n.ngInherit=!0,n})();function FC(n){return n.type.prototype.ngOnChanges&&(n.setInput=dD),uD}function uD(){let n=VC(this),e=n?.current;if(e){let t=n.previous;if(t===pa)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function dD(n,e,t,i,r){let o=this.declaredInputs[i],s=VC(n)||fD(n,{previous:pa,current:null}),a=s.current||(s.current={}),u=s.previous,f=u[o];a[o]=new B_(f&&f.currentValue,t,u===pa),NC(n,e,r,t)}var LC="__ngSimpleChanges__";function VC(n){return n[LC]||null}function fD(n,e){return n[LC]=e}var O2=null;var sn=function(n,e=null,t){O2?.(n,e,t)},hD="svg",pD="math";function ao(n){for(;Array.isArray(n);)n=n[Go];return n}function UC(n,e){return ao(e[n])}function ho(n,e){return ao(e[n.index])}function BC(n,e){return n.data[e]}function Nv(n,e){return n[e]}function mD(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function lo(n,e){let t=e[n];return ms(t)?t:t[Go]}function gD(n){return(n[ft]&4)===4}function Fv(n){return(n[ft]&128)===128}function _D(n){return Wo(n[mi])}function Fl(n,e){return e==null?null:n[e]}function zC(n){n[Tl]=0}function HC(n){n[ft]&1024||(n[ft]|=1024,Fv(n)&&Tu(n))}function vD(n,e){for(;n>0;)e=e[jl],n--;return e}function Uh(n){return!!(n[ft]&9216||n[hr]?.dirty)}function z_(n){n[zo].changeDetectionScheduler?.notify(8),n[ft]&64&&(n[ft]|=1024),Uh(n)&&Tu(n)}function Tu(n){n[zo].changeDetectionScheduler?.notify(0);let e=va(n);for(;e!==null&&!(e[ft]&8192||(e[ft]|=8192,!Fv(e)));)e=va(e)}function jC(n,e){if(Wl(n))throw new Ge(911,!1);n[ps]===null&&(n[ps]=[]),n[ps].push(e)}function xD(n,e){if(n[ps]===null)return;let t=n[ps].indexOf(e);t!==-1&&n[ps].splice(t,1)}function va(n){let e=n[mi];return Wo(e)?e[mi]:e}function Lv(n){return n[mh]??=[]}function Vv(n){return n.cleanup??=[]}function yD(n,e,t,i){let r=Lv(e);r.push(t),n.firstCreatePass&&Vv(n).push(i,r.length-1)}var St={lFrame:KC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var H_=!1;function bD(){return St.lFrame.elementDepthCount}function CD(){St.lFrame.elementDepthCount++}function wD(){St.lFrame.elementDepthCount--}function Uv(){return St.bindingsEnabled}function MD(){return St.skipHydrationRootTNode!==null}function SD(n){return St.skipHydrationRootTNode===n}function ED(){St.skipHydrationRootTNode=null}function Dt(){return St.lFrame.lView}function Wn(){return St.lFrame.tView}function T(n){return St.lFrame.contextLView=n,n[Vi]}function D(n){return St.lFrame.contextLView=null,n}function zi(){let n=GC();for(;n!==null&&n.type===64;)n=n.parent;return n}function GC(){return St.lFrame.currentTNode}function AD(){let n=St.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ma(n,e){let t=St.lFrame;t.currentTNode=n,t.isParent=e}function Bv(){return St.lFrame.isParent}function WC(){St.lFrame.isParent=!1}function TD(){return St.lFrame.contextLView}function $C(){return H_}function R2(n){let e=H_;return H_=n,e}function zv(){let n=St.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function qC(){return St.lFrame.bindingIndex}function DD(n){return St.lFrame.bindingIndex=n}function Bh(){return St.lFrame.bindingIndex++}function zh(n){let e=St.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function PD(){return St.lFrame.inI18n}function ID(n,e){let t=St.lFrame;t.bindingIndex=t.bindingRootIndex=n,j_(e)}function OD(){return St.lFrame.currentDirectiveIndex}function j_(n){St.lFrame.currentDirectiveIndex=n}function RD(n){let e=St.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function YC(){return St.lFrame.currentQueryIndex}function Hv(n){St.lFrame.currentQueryIndex=n}function kD(n){let e=n[Tt];return e.type===2?e.declTNode:e.type===1?n[kr]:null}function XC(n,e,t){if(t&wt.SkipSelf){let r=e,o=n;for(;r=r.parent,r===null&&!(t&wt.Host);)if(r=kD(o),r===null||(o=o[jl],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=St.lFrame=ZC();return i.currentTNode=e,i.lView=n,!0}function jv(n){let e=ZC(),t=n[Tt];St.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ZC(){let n=St.lFrame,e=n===null?null:n.child;return e===null?KC(n):e}function KC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function JC(){let n=St.lFrame;return St.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var QC=JC;function Gv(){let n=JC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ND(n){return(St.lFrame.contextLView=vD(n,St.lFrame.contextLView))[Vi]}function qo(){return St.lFrame.selectedIndex}function xa(n){St.lFrame.selectedIndex=n}function Hh(){let n=St.lFrame;return BC(n.tView,n.selectedIndex)}function FD(){return St.lFrame.currentNamespace}var ew=!0;function jh(){return ew}function Gh(n){ew=n}function LD(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=FC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Wv(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:p}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),p!=null&&(n.destroyHooks??=[]).push(t,p)}}function rh(n,e,t){tw(n,e,3,t)}function oh(n,e,t,i){(n[ft]&3)===t&&tw(n,e,t,i)}function C_(n,e){let t=n[ft];(t&3)===e&&(t&=16383,t+=1,n[ft]=t)}function tw(n,e,t,i){let r=i!==void 0?n[Tl]&65535:0,o=i??-1,s=e.length-1,a=0;for(let u=r;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],i!=null&&a>=i)break}else e[u]<0&&(n[Tl]+=65536),(a<o||o==-1)&&(VD(n,t,e,u),n[Tl]=(n[Tl]&4294901760)+u+2),u++}function k2(n,e){sn(4,n,e);let t=kt(null);try{e.call(n)}finally{kt(t),sn(5,n,e)}}function VD(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],a=n[s];r?n[ft]>>14<n[Tl]>>16&&(n[ft]&3)===e&&(n[ft]+=16384,k2(a,o)):k2(a,o)}var Ol=-1,ya=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=i}};function UD(n){return(n.flags&8)!==0}function BD(n){return(n.flags&16)!==0}function zD(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{let o=r,s=t[++i];jD(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function HD(n){return n===3||n===4||n===6}function jD(n){return n.charCodeAt(0)===64}function Ll(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?N2(n,t,r,null,e[++i]):N2(n,t,r,null,null))}}return n}function N2(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function nw(n){return n!==Ol}function xh(n){return n&32767}function GD(n){return n>>16}function yh(n,e){let t=GD(n),i=e;for(;t>0;)i=i[jl],t--;return i}var G_=!0;function bh(n){let e=G_;return G_=n,e}var WD=256,iw=WD-1,rw=5,$D=0,ro={};function qD(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(vu)&&(i=t[vu]),i==null&&(i=t[vu]=$D++);let r=i&iw,o=1<<r;e.data[n+(r>>rw)]|=o}function Ch(n,e){let t=ow(n,e);if(t!==-1)return t;let i=e[Tt];i.firstCreatePass&&(n.injectorIndex=e.length,w_(i.data,n),w_(e,null),w_(i.blueprint,null));let r=$v(n,e),o=n.injectorIndex;if(nw(r)){let s=xh(r),a=yh(r,e),u=a[Tt].data;for(let f=0;f<8;f++)e[o+f]=a[s+f]|u[s+f]}return e[o+8]=r,o}function w_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ow(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function $v(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=uw(r),i===null)return Ol;if(t++,r=r[jl],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Ol}function W_(n,e,t){qD(n,e,t)}function sw(n,e,t){if(t&wt.Optional||n!==void 0)return n;Pv(e,"NodeInjector")}function aw(n,e,t,i){if(t&wt.Optional&&i===void 0&&(i=null),(t&(wt.Self|wt.Host))===0){let r=n[kl],o=Ni(void 0);try{return r?r.get(e,i,t&wt.Optional):CC(e,i,t&wt.Optional)}finally{Ni(o)}}return sw(i,e,t)}function lw(n,e,t,i=wt.Default,r){if(n!==null){if(e[ft]&2048&&!(i&wt.Self)){let s=KD(n,e,t,i,ro);if(s!==ro)return s}let o=cw(n,e,t,i,ro);if(o!==ro)return o}return aw(e,t,i,r)}function cw(n,e,t,i,r){let o=XD(t);if(typeof o=="function"){if(!XC(e,n,i))return i&wt.Host?sw(r,t,i):aw(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&wt.Optional))Pv(t);else return s}finally{QC()}}else if(typeof o=="number"){let s=null,a=ow(n,e),u=Ol,f=i&wt.Host?e[oo][kr]:null;for((a===-1||i&wt.SkipSelf)&&(u=a===-1?$v(n,e):e[a+8],u===Ol||!L2(i,!1)?a=-1:(s=e[Tt],a=xh(u),e=yh(u,e)));a!==-1;){let p=e[Tt];if(F2(o,a,p.data)){let h=YD(a,e,t,s,i,f);if(h!==ro)return h}u=e[a+8],u!==Ol&&L2(i,e[Tt].data[a+8]===f)&&F2(o,a,e)?(s=p,a=xh(u),e=yh(u,e)):a=-1}}return r}function YD(n,e,t,i,r,o){let s=e[Tt],a=s.data[n+8],u=i==null?Gl(a)&&G_:i!=s&&(a.type&3)!==0,f=r&wt.Host&&o===a,p=sh(a,s,t,u,f);return p!==null?Cu(e,s,p,a,r):ro}function sh(n,e,t,i,r){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,f=n.directiveEnd,p=o>>20,h=i?a:a+p,v=r?a+p:f;for(let x=h;x<v;x++){let w=s[x];if(x<u&&t===w||x>=u&&w.type===t)return x}if(r){let x=s[u];if(x&&so(x)&&x.type===t)return u}return null}function Cu(n,e,t,i,r){let o=n[t],s=e.data;if(o instanceof ya){let a=o;a.resolving&&yC(N3(s[t]));let u=bh(a.canSeeViewProviders);a.resolving=!0;let f,p=a.injectImpl?Ni(a.injectImpl):null,h=XC(n,i,wt.Default);try{o=n[t]=a.factory(void 0,r,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&LD(t,s[t],e)}finally{p!==null&&Ni(p),bh(u),a.resolving=!1,QC()}}return o}function XD(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(vu)?n[vu]:void 0;return typeof e=="number"?e>=0?e&iw:ZD:e}function F2(n,e,t){let i=1<<n;return!!(t[e+(n>>rw)]&i)}function L2(n,e){return!(n&wt.Self)&&!(n&wt.Host&&e)}var fa=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return lw(this._tNode,this._lView,e,kh(i),t)}};function ZD(){return new fa(zi(),Dt())}function mr(n){return Su(()=>{let e=n.prototype.constructor,t=e[ch]||$_(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[ch]||$_(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function $_(n){return mC(n)?()=>{let e=$_(Ei(n));return e&&e()}:ha(n)}function KD(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[ft]&2048&&!vh(s);){let a=cw(o,s,t,i|wt.Self,ro);if(a!==ro)return a;let u=o.parent;if(!u){let f=s[RC];if(f){let p=f.get(t,ro,i);if(p!==ro)return p}u=uw(s),s=s[jl]}o=u}return r}function uw(n){let e=n[Tt],t=e.type;return t===2?e.declTNode:t===1?n[kr]:null}function V2(n,e=null,t=null,i){let r=dw(n,e,t,i);return r.resolveInjectorInitializers(),r}function dw(n,e=null,t=null,i,r=new Set){let o=[t||Fi,J3(n)];return i=i||(typeof n=="object"?void 0:Li(n)),new yu(o,e||Rv(),i||null,r)}var pr=class n{static THROW_IF_NOT_FOUND=da;static NULL=new hh;static create(e,t){if(Array.isArray(e))return V2({name:""},t,e,"");{let i=e.name??"";return V2({name:i},e.parent,e.providers,i)}}static \u0275prov=Pe({token:n,providedIn:"any",factory:()=>De(SC)});static __NG_ELEMENT_ID__=-1};var JD=new $e("");JD.__NG_ELEMENT_ID__=n=>{let e=zi();if(e===null)throw new Ge(204,!1);if(e.type&2)return e.value;if(n&wt.Optional)return null;throw new Ge(204,!1)};var fw=!1,$l=(()=>{class n{static __NG_ELEMENT_ID__=QD;static __NG_ENV_ID__=t=>t}return n})(),q_=class extends $l{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return Wl(t)?(e(),()=>{}):(jC(t,e),()=>xD(t,e))}};function QD(){return new q_(Dt())}var Vl=class{},hw=new $e("",{providedIn:"root",factory:()=>!1});var pw=new $e(""),mw=new $e(""),gs=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Qn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Pe({token:n,providedIn:"root",factory:()=>new n})}return n})();var Y_=class extends Hn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,OC()&&(this.destroyRef=be($l,{optional:!0})??void 0,this.pendingTasks=be(gs,{optional:!0})??void 0)}emit(e){let t=kt(null);try{super.next(e)}finally{kt(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof zn&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},En=Y_;function wh(...n){}function gw(n){let e,t;function i(){n=wh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function U2(n){return queueMicrotask(()=>n()),()=>{n=wh}}var qv="isAngularZone",Mh=qv+"_ID",eP=0,An=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new En(!1);onMicrotaskEmpty=new En(!1);onStable=new En(!1);onError=new En(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=fw}=e;if(typeof Zone>"u")throw new Ge(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,iP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(qv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Ge(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Ge(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,tP,wh,wh);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},tP={};function Yv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function nP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){gw(()=>{n.callbackScheduled=!1,X_(n),n.isCheckStableRunning=!0,Yv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),X_(n)}function iP(n){let e=()=>{nP(n)},t=eP++;n._inner=n._inner.fork({name:"angular",properties:{[qv]:!0,[Mh]:t,[Mh+t]:!0},onInvokeTask:(i,r,o,s,a,u)=>{if(rP(u))return i.invokeTask(o,s,a,u);try{return B2(n),i.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),z2(n)}},onInvoke:(i,r,o,s,a,u,f)=>{try{return B2(n),i.invoke(o,s,a,u,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!oP(u)&&e(),z2(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,X_(n),Yv(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function X_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function B2(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function z2(n){n._nesting--,Yv(n)}var Z_=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new En;onMicrotaskEmpty=new En;onStable=new En;onError=new En;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function rP(n){return _w(n,"__ignore_ng_zone__")}function oP(n){return _w(n,"__scheduler_tick__")}function _w(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var co=class{_console=console;handleError(e){this._console.error("ERROR",e)}},sP=new $e("",{providedIn:"root",factory:()=>{let n=be(An),e=be(co);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function H2(n,e){return hC(n,e)}function aP(n){return hC(fC,n)}var vw=(H2.required=aP,H2);function lP(){return ql(zi(),Dt())}function ql(n,e){return new Ki(ho(n,e))}var Ki=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=lP}return n})();function cP(n){return n instanceof Ki?n.nativeElement:n}function uP(n){return typeof n=="function"&&n[fr]!==void 0}function Yl(n,e){let t=t_(n,e?.equal),i=t[fr];return t.set=r=>cu(i,r),t.update=r=>n_(i,r),t.asReadonly=dP.bind(t),t}function dP(){let n=this[fr];if(n.readonlyFn===void 0){let e=()=>this();e[fr]=n,n.readonlyFn=e}return n.readonlyFn}function xw(n){return uP(n)&&typeof n.set=="function"}function fP(){return this._results[Symbol.iterator]()}var K_=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Hn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=q3(e);(this._changesDetected=!$3(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=fP};function yw(n){return(n.flags&128)===128}var bw=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(bw||{}),Cw=new Map,hP=0;function pP(){return hP++}function mP(n){Cw.set(n[Lh],n)}function J_(n){Cw.delete(n[Lh])}var j2="__ngContext__";function Xl(n,e){ms(e)?(n[j2]=e[Lh],mP(e)):n[j2]=e}function ww(n){return Sw(n[bu])}function Mw(n){return Sw(n[Or])}function Sw(n){for(;n!==null&&!Wo(n);)n=n[Or];return n}var Q_;function Ew(n){Q_=n}function gP(){if(Q_!==void 0)return Q_;if(typeof document<"u")return document;throw new Ge(210,!1)}var Xv=new $e("",{providedIn:"root",factory:()=>_P}),_P="ng",Zv=new $e(""),Zl=new $e("",{providedIn:"platform",factory:()=>"unknown"});var Kv=new $e("",{providedIn:"root",factory:()=>gP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var vP="h",xP="b";var Aw=!1,yP=new $e("",{providedIn:"root",factory:()=>Aw});var Jv=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Jv||{}),Kl=new $e(""),G2=new Set;function Du(n){G2.has(n)||(G2.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Tw=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=bP}return n})();function bP(){return new Tw(Dt(),zi())}var Dl=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Dl||{}),Dw=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Pe({token:n,providedIn:"root",factory:()=>new n})}return n})(),CP=[Dl.EarlyRead,Dl.Write,Dl.MixedReadWrite,Dl.Read],wP=(()=>{class n{ngZone=be(An);scheduler=be(Vl);errorHandler=be(co,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){be(Kl,{optional:!0})}execute(){let t=this.sequences.size>0;t&&sn(16),this.executing=!0;for(let i of CP)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&sn(17)}register(t){let{view:i}=t;i!==void 0?((i[Il]??=[]).push(t),Tu(i),i[ft]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(Jv.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Pe({token:n,providedIn:"root",factory:()=>new n})}return n})(),ev=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,o,s=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Il];e&&(this.view[Il]=e.filter(t=>t!==this))}};function Qv(n,e){!e?.injector&&lD(Qv);let t=e?.injector??be(pr);return Du("NgAfterNextRender"),SP(n,t,e,!0)}function MP(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function SP(n,e,t,i){let r=e.get(Dw);r.impl??=e.get(wP);let o=e.get(Kl,null,{optional:!0}),s=t?.phase??Dl.MixedReadWrite,a=t?.manualCleanup!==!0?e.get($l):null,u=e.get(Tw,null,{optional:!0}),f=new ev(r.impl,MP(n,s),u?.view,i,a,o?.snapshot(null));return r.impl.register(f),f}var EP=(n,e,t,i)=>{};function AP(n,e,t,i){EP(n,e,t,i)}var TP=()=>null;function Pw(n,e,t=!1){return TP(n,e,t)}function Iw(n,e){let t=n.contentQueries;if(t!==null){let i=kt(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=n.data[s];Hv(o),a.contentQueries(2,e[s],s)}}}finally{kt(i)}}}function tv(n,e,t){Hv(0);let i=kt(null);try{e(n,t)}finally{kt(i)}}function ex(n,e,t){if(kv(e)){let i=kt(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{kt(i)}}}var uo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(uo||{});var Sh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${uC})`}};function Wh(n){return n instanceof Sh?n.changingThisBreaksApplicationSecurity:n}function DP(n,e){let t=PP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${uC})`)}return t===e}function PP(n){return n instanceof Sh&&n.getTypeName()||null}var IP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function OP(n){return n=String(n),n.match(IP)?n:"unsafe:"+n}var RP=/^>|^->|<!--|-->|--!>|<!-$/g,kP=/(<|>)/g,NP="\u200B$1\u200B";function FP(n){return n.replace(RP,e=>e.replace(kP,NP))}function LP(n,e){return n.createText(e)}function VP(n,e,t){n.setValue(e,t)}function UP(n,e){return n.createComment(FP(e))}function Ow(n,e,t){return n.createElement(e,t)}function Eh(n,e,t,i,r){n.insertBefore(e,t,i,r)}function Rw(n,e,t){n.appendChild(e,t)}function W2(n,e,t,i,r){i!==null?Eh(n,e,t,i,r):Rw(n,e,t)}function BP(n,e,t){n.removeChild(null,e,t)}function zP(n,e,t){n.setAttribute(e,"style",t)}function HP(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function kw(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&zD(n,e,i),r!==null&&HP(n,e,r),o!==null&&zP(n,e,o)}var Nw=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Nw||{});function $h(n){let e=jP();return e?e.sanitize(Nw.URL,n)||"":DP(n,"URL")?Wh(n):OP(Bo(n))}function jP(){let n=Dt();return n&&n[zo].sanitizer}function po(n){return n.ownerDocument.defaultView}function Fw(n){return n.ownerDocument}function Lw(n){return n instanceof Function?n():n}function GP(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var Vw="ng-template";function WP(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&GP(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(tx(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function tx(n){return n.type===4&&n.value!==Vw}function $P(n,e,t){let i=n.type===4&&!t?Vw:n.value;return e===i}function qP(n,e,t){let i=4,r=n.attrs,o=r!==null?ZP(r):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Pr(i)&&!Pr(u))return!1;if(s&&Pr(u))continue;s=!1,i=u|i&1;continue}if(!s)if(i&4){if(i=2|i&1,u!==""&&!$P(n,u,t)||u===""&&e.length===1){if(Pr(i))return!1;s=!0}}else if(i&8){if(r===null||!WP(n,r,u,t)){if(Pr(i))return!1;s=!0}}else{let f=e[++a],p=YP(u,r,tx(n),t);if(p===-1){if(Pr(i))return!1;s=!0;continue}if(f!==""){let h;if(p>o?h="":h=r[p+1].toLowerCase(),i&2&&f!==h){if(Pr(i))return!1;s=!0}}}}return Pr(i)||s}function Pr(n){return(n&1)===0}function YP(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return KP(e,n)}function XP(n,e,t=!1){for(let i=0;i<e.length;i++)if(qP(n,e[i],t))return!0;return!1}function ZP(n){for(let e=0;e<n.length;e++){let t=n[e];if(HD(t))return e}return n.length}function KP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function $2(n,e){return n?":not("+e.trim()+")":e}function JP(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Pr(s)&&(e+=$2(o,r),r=""),i=s,o=o||!Pr(i);t++}return r!==""&&(e+=$2(o,r)),e}function QP(n){return n.map(JP).join(",")}function eI(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!Pr(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var Ti={};function nx(n,e,t,i,r,o,s,a,u,f,p){let h=Ui+i,v=h+r,x=tI(h,v),w=typeof f=="function"?f():f;return x[Tt]={type:n,blueprint:x,template:t,queries:null,viewQuery:a,declTNode:e,data:x.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:p}}function tI(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Ti);return t}function nI(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=nx(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ix(n,e,t,i,r,o,s,a,u,f,p){let h=e.blueprint.slice();return h[Go]=r,h[ft]=i|4|128|8|64|1024,(f!==null||n&&n[ft]&2048)&&(h[ft]|=2048),zC(h),h[mi]=h[jl]=n,h[Vi]=t,h[zo]=s||n&&n[zo],h[In]=a||n&&n[In],h[kl]=u||n&&n[kl]||null,h[kr]=o,h[Lh]=pP(),h[ph]=p,h[RC]=f,h[oo]=e.type==2?n[oo]:h,h}function iI(n,e,t){let i=ho(e,n),r=nI(t),o=n[zo].rendererFactory,s=rx(n,ix(n,r,null,Uw(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function Uw(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Bw(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function rx(n,e){return n[bu]?n[I2][Or]=e:n[bu]=e,n[I2]=e,e}function g(n=1){zw(Wn(),Dt(),qo()+n,!1)}function zw(n,e,t,i){if(!i)if((e[ft]&3)===3){let o=n.preOrderCheckHooks;o!==null&&rh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&oh(e,o,0,t)}xa(t)}var qh=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(qh||{});function nv(n,e,t,i){let r=kt(null);try{let[o,s,a]=n.inputs[t],u=null;(s&qh.SignalBased)!==0&&(u=e[o][fr]),u!==null&&u.transformFn!==void 0?i=u.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,u,i,t,o):NC(e,u,o,i)}finally{kt(r)}}function Hw(n,e,t,i,r){let o=qo(),s=i&2;try{xa(-1),s&&e.length>Ui&&zw(n,e,Ui,!1),sn(s?2:0,r),t(i,r)}finally{xa(o),sn(s?3:1,r)}}function Yh(n,e,t){cI(n,e,t),(t.flags&64)===64&&uI(n,e,t)}function ox(n,e,t=ho){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?t(e,n):n[s];n[r++]=a}}}function rI(n,e,t,i){let o=i.get(yP,Aw)||t===uo.ShadowDom,s=n.selectRootElement(e,o);return oI(s),s}function oI(n){sI(n)}var sI=()=>null;function aI(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function sx(n,e,t,i,r,o,s,a){if(!a&&lx(e,n,t,i,r)){Gl(e)&&lI(t,e.index);return}if(e.type&3){let u=ho(e,t);i=aI(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(u,i,r)}else e.type&12}function lI(n,e){let t=lo(e,n);t[ft]&16||(t[ft]|=64)}function cI(n,e,t){let i=t.directiveStart,r=t.directiveEnd;Gl(t)&&iI(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ch(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let a=n.data[s],u=Cu(e,n,s,t);if(Xl(u,e),o!==null&&pI(e,s-i,u,a,t,o),so(a)){let f=lo(t.index,e);f[Vi]=Cu(e,n,s,t)}}}function uI(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=OD();try{xa(o);for(let a=i;a<r;a++){let u=n.data[a],f=e[a];j_(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&dI(u,f)}}finally{xa(-1),j_(s)}}function dI(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function ax(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];XP(e,o.selectors,!1)&&(i??=[],so(o)?i.unshift(o):i.push(o))}return i}function fI(n,e,t,i,r,o){let s=ho(n,e);hI(e[In],s,o,n.value,t,i,r)}function hI(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let a=s==null?Bo(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}function pI(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],f=s[a+1];nv(i,t,u,f)}}function mI(n,e){let t=n[kl],i=t?t.get(co,null):null;i&&i.handleError(e)}function lx(n,e,t,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],a=!1;if(s)for(let u=0;u<s.length;u+=2){let f=s[u],p=s[u+1],h=e.data[f];nv(h,t[f],p,r),a=!0}if(o)for(let u of o){let f=t[u],p=e.data[u];nv(p,f,i,r),a=!0}return a}function gI(n,e){let t=lo(e,n),i=t[Tt];_I(i,t);let r=t[Go];r!==null&&t[ph]===null&&(t[ph]=Pw(r,t[kl])),sn(18),cx(i,t,t[Vi]),sn(19,t[Vi])}function _I(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function cx(n,e,t){jv(e);try{let i=n.viewQuery;i!==null&&tv(1,i,t);let r=n.template;r!==null&&Hw(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ho]?.finishViewCreation(n),n.staticContentQueries&&Iw(n,e),n.staticViewQueries&&tv(2,n.viewQuery,t);let o=n.components;o!==null&&vI(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[ft]&=-5,Gv()}}function vI(n,e){for(let t=0;t<e.length;t++)gI(n,e[t])}function xI(n,e,t,i){let r=kt(null);try{let o=e.tView,a=n[ft]&4096?4096:16,u=ix(n,o,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=n[e.index];u[ga]=f;let p=n[Ho];return p!==null&&(u[Ho]=p.createEmbeddedView(o)),cx(o,u,t),u}finally{kt(r)}}function q2(n,e){return!e||e.firstChild===null||yw(n)}var yI;function ux(n,e){return yI(n,e)}var jo=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(jo||{});function jw(n){return(n.flags&32)===32}function Pl(n,e,t,i,r){if(i!=null){let o,s=!1;Wo(i)?o=i:ms(i)&&(s=!0,i=i[Go]);let a=ao(i);n===0&&t!==null?r==null?Rw(e,t,a):Eh(e,t,a,r||null,!0):n===1&&t!==null?Eh(e,t,a,r||null,!0):n===2?BP(e,a,s):n===3&&e.destroyNode(a),o!=null&&OI(e,n,o,t,r)}}function bI(n,e){Gw(n,e),e[Go]=null,e[kr]=null}function CI(n,e,t,i,r,o){i[Go]=r,i[kr]=e,Zh(n,i,t,1,r,o)}function Gw(n,e){e[zo].changeDetectionScheduler?.notify(9),Zh(n,e,e[In],2,null,null)}function wI(n){let e=n[bu];if(!e)return M_(n[Tt],n);for(;e;){let t=null;if(ms(e))t=e[bu];else{let i=e[Zi];i&&(t=i)}if(!t){for(;e&&!e[Or]&&e!==n;)ms(e)&&M_(e[Tt],e),e=e[mi];e===null&&(e=n),ms(e)&&M_(e[Tt],e),t=e&&e[Or]}e=t}}function dx(n,e){let t=n[Nl],i=t.indexOf(e);t.splice(i,1)}function Ww(n,e){if(Wl(e))return;let t=e[In];t.destroyNode&&Zh(n,e,t,3,null,null),wI(e)}function M_(n,e){if(Wl(e))return;let t=kt(null);try{e[ft]&=-129,e[ft]|=256,e[hr]&&Jg(e[hr]),SI(n,e),MI(n,e),e[Tt].type===1&&e[In].destroy();let i=e[ga];if(i!==null&&Wo(e[mi])){i!==e[mi]&&dx(i,e);let r=e[Ho];r!==null&&r.detachView(n)}J_(e)}finally{kt(t)}}function MI(n,e){let t=n.cleanup,i=e[mh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[t[s+1]];t[s].call(a)}i!==null&&(e[mh]=null);let r=e[ps];if(r!==null){e[ps]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[gh];if(o!==null){e[gh]=null;for(let s of o)s.destroy()}}function SI(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof ya)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],u=o[s+1];sn(4,a,u);try{u.call(a)}finally{sn(5,a,u)}}else{sn(4,r,o);try{o.call(r)}finally{sn(5,r,o)}}}}}function EI(n,e,t){return AI(n,e.parent,t)}function AI(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Go];if(Gl(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===uo.None||r===uo.Emulated)return null}return ho(i,t)}function TI(n,e,t){return PI(n,e,t)}function DI(n,e,t){return n.type&40?ho(n,t):null}var PI=DI,Y2;function Xh(n,e,t,i){let r=EI(n,i,e),o=e[In],s=i.parent||e[kr],a=TI(s,i,e);if(r!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)W2(o,r,t[u],a,!1);else W2(o,r,t,a,!1);Y2!==void 0&&Y2(o,i,e,t,r)}function _u(n,e){if(e!==null){let t=e.type;if(t&3)return ho(e,n);if(t&4)return iv(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return _u(n,i);{let r=n[e.index];return Wo(r)?iv(-1,r):ao(r)}}else{if(t&128)return _u(n,e.next);if(t&32)return ux(e,n)()||ao(n[e.index]);{let i=$w(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=va(n[oo]);return _u(r,i)}else return _u(n,e.next)}}}return null}function $w(n,e){if(e!==null){let i=n[oo][kr],r=e.projection;return i.projection[r]}return null}function iv(n,e){let t=Zi+n+1;if(t<e.length){let i=e[t],r=i[Tt].firstChild;if(r!==null)return _u(i,r)}return e[_a]}function fx(n,e,t,i,r,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],u=t.type;if(s&&e===0&&(a&&Xl(ao(a),i),t.flags|=2),!jw(t))if(u&8)fx(n,e,t.child,i,r,o,!1),Pl(e,n,r,a,o);else if(u&32){let f=ux(t,i),p;for(;p=f();)Pl(e,n,r,p,o);Pl(e,n,r,a,o)}else u&16?II(n,e,i,t,r,o):Pl(e,n,r,a,o);t=s?t.projectionNext:t.next}}function Zh(n,e,t,i,r,o){fx(t,i,n.firstChild,e,r,o,!1)}function II(n,e,t,i,r,o){let s=t[oo],u=s[kr].projection[i.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++){let p=u[f];Pl(e,n,r,p,o)}else{let f=u,p=s[mi];yw(i)&&(f.flags|=128),fx(n,e,f,p,r,o,!0)}}function OI(n,e,t,i,r){let o=t[_a],s=ao(t);o!==s&&Pl(e,n,i,o,r);for(let a=Zi;a<t.length;a++){let u=t[a];Zh(u[Tt],u,n,e,i,o)}}function RI(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:jo.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=jo.Important),n.setStyle(t,i,r,o))}}function Ah(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(ao(o)),Wo(o)&&kI(o,i);let s=t.type;if(s&8)Ah(n,e,t.child,i);else if(s&32){let a=ux(t,e),u;for(;u=a();)i.push(u)}else if(s&16){let a=$w(e,t);if(Array.isArray(a))i.push(...a);else{let u=va(e[oo]);Ah(u[Tt],u,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function kI(n,e){for(let t=Zi;t<n.length;t++){let i=n[t],r=i[Tt].firstChild;r!==null&&Ah(i[Tt],i,r,e)}n[_a]!==n[Go]&&e.push(n[_a])}function qw(n){if(n[Il]!==null){for(let e of n[Il])e.impl.addSequence(e);n[Il].length=0}}var Yw=[];function NI(n){return n[hr]??FI(n)}function FI(n){let e=Yw.pop()??Object.create(VI);return e.lView=n,e}function LI(n){n.lView[hr]!==n&&(n.lView=null,Yw.push(n))}var VI=lt(xe({},au),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Tu(n.lView)},consumerOnSignalRead(){this.lView[hr]=this}});function UI(n){let e=n[hr]??Object.create(BI);return e.lView=n,e}var BI=lt(xe({},au),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=va(n.lView);for(;e&&!Xw(e[Tt]);)e=va(e);e&&HC(e)},consumerOnSignalRead(){this.lView[hr]=this}});function Xw(n){return n.type!==2}function Zw(n){if(n[gh]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[gh])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[ft]&8192)}}var zI=100;function Kw(n,e=!0,t=0){let r=n[zo].rendererFactory,o=!1;o||r.begin?.();try{HI(n,t)}catch(s){throw e&&mI(n,s),s}finally{o||r.end?.()}}function HI(n,e){let t=$C();try{R2(!0),rv(n,e);let i=0;for(;Uh(n);){if(i===zI)throw new Ge(103,!1);i++,rv(n,1)}}finally{R2(t)}}function jI(n,e,t,i){if(Wl(e))return;let r=e[ft],o=!1,s=!1;jv(e);let a=!0,u=null,f=null;o||(Xw(n)?(f=NI(e),u=Af(f)):$g()===null?(a=!1,f=UI(e),u=Af(f)):e[hr]&&(Jg(e[hr]),e[hr]=null));try{zC(e),DD(n.bindingStartIndex),t!==null&&Hw(n,e,t,2,i);let p=(r&3)===3;if(!o)if(p){let x=n.preOrderCheckHooks;x!==null&&rh(e,x,null)}else{let x=n.preOrderHooks;x!==null&&oh(e,x,0,null),C_(e,0)}if(s||GI(e),Zw(e),Jw(e,0),n.contentQueries!==null&&Iw(n,e),!o)if(p){let x=n.contentCheckHooks;x!==null&&rh(e,x)}else{let x=n.contentHooks;x!==null&&oh(e,x,1),C_(e,1)}$I(n,e);let h=n.components;h!==null&&e6(e,h,0);let v=n.viewQuery;if(v!==null&&tv(2,v,i),!o)if(p){let x=n.viewCheckHooks;x!==null&&rh(e,x)}else{let x=n.viewHooks;x!==null&&oh(e,x,2),C_(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[b_]){for(let x of e[b_])x();e[b_]=null}o||(qw(e),e[ft]&=-73)}catch(p){throw o||Tu(e),p}finally{f!==null&&(Zg(f,u),a&&LI(f)),Gv()}}function Jw(n,e){for(let t=ww(n);t!==null;t=Mw(t))for(let i=Zi;i<t.length;i++){let r=t[i];Qw(r,e)}}function GI(n){for(let e=ww(n);e!==null;e=Mw(e)){if(!(e[ft]&2))continue;let t=e[Nl];for(let i=0;i<t.length;i++){let r=t[i];HC(r)}}}function WI(n,e,t){sn(18);let i=lo(e,n);Qw(i,t),sn(19,i[Vi])}function Qw(n,e){Fv(n)&&rv(n,e)}function rv(n,e){let i=n[Tt],r=n[ft],o=n[hr],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&Kg(o)),s||=!1,o&&(o.dirty=!1),n[ft]&=-9217,s)jI(i,n,i.template,n[Vi]);else if(r&8192){Zw(n),Jw(n,1);let a=i.components;a!==null&&e6(n,a,1),qw(n)}}function e6(n,e,t){for(let i=0;i<e.length;i++)WI(n,e[i],t)}function $I(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)xa(~r);else{let o=r,s=t[++i],a=t[++i];ID(s,o);let u=e[o];sn(24,u),a(2,u),sn(25,u)}}}finally{xa(-1)}}function hx(n,e){let t=$C()?64:1088;for(n[zo].changeDetectionScheduler?.notify(e);n;){n[ft]|=t;let i=va(n);if(vh(n)&&!i)return n;n=i}return null}function t6(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function qI(n,e,t,i=!0){let r=e[Tt];if(YI(r,e,n,t),i){let s=iv(t,n),a=e[In],u=a.parentNode(n[_a]);u!==null&&CI(r,n[kr],a,e,u,s)}let o=e[ph];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ov(n,e){if(n.length<=Zi)return;let t=Zi+e,i=n[t];if(i){let r=i[ga];r!==null&&r!==n&&dx(r,i),e>0&&(n[t-1][Or]=i[Or]);let o=fh(n,Zi+e);bI(i[Tt],i);let s=o[Ho];s!==null&&s.detachView(o[Tt]),i[mi]=null,i[Or]=null,i[ft]&=-129}return i}function YI(n,e,t,i){let r=Zi+i,o=t.length;i>0&&(t[r-1][Or]=e),i<o-Zi?(e[Or]=t[r],MC(t,Zi+i,e)):(t.push(e),e[Or]=null),e[mi]=t;let s=e[ga];s!==null&&t!==s&&n6(s,e);let a=e[Ho];a!==null&&a.insertView(n),z_(e),e[ft]|=128}function n6(n,e){let t=n[Nl],i=e[mi];if(ms(i))n[ft]|=2;else{let r=i[mi][oo];e[oo]!==r&&(n[ft]|=2)}t===null?n[Nl]=[e]:t.push(e)}var wu=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Tt];return Ah(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i}get context(){return this._lView[Vi]}set context(e){this._lView[Vi]=e}get destroyed(){return Wl(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[mi];if(Wo(e)){let t=e[_h],i=t?t.indexOf(this):-1;i>-1&&(ov(e,i),fh(t,i))}this._attachedToViewContainer=!1}Ww(this._lView[Tt],this._lView)}onDestroy(e){jC(this._lView,e)}markForCheck(){hx(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ft]&=-129}reattach(){z_(this._lView),this._lView[ft]|=128}detectChanges(){this._lView[ft]|=1024,Kw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=vh(this._lView),t=this._lView[ga];t!==null&&!e&&dx(t,this._lView),Gw(this._lView[Tt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ge(902,!1);this._appRef=e;let t=vh(this._lView),i=this._lView[ga];i!==null&&!t&&n6(i,this._lView),z_(this._lView)}};var ba=(()=>{class n{static __NG_ELEMENT_ID__=KI}return n})(),XI=ba,ZI=class extends XI{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=xI(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new wu(r)}};function KI(){return Kh(zi(),Dt())}function Kh(n,e){return n.type&4?new ZI(e,n,ql(n,e)):null}function Jh(n,e,t,i,r){let o=n.data[e];if(o===null)o=JI(n,e,t,i,r),PD()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=AD();o.injectorIndex=s===null?-1:s.injectorIndex}return Ma(o,!0),o}function JI(n,e,t,i,r){let o=GC(),s=Bv(),a=s?o:o&&o.parent,u=n.data[e]=eO(n,a,t,e,i,r);return QI(n,u,o,s),u}function QI(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function eO(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return MD()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var qX=new RegExp(`^(\\d+)*(${xP}|${vP})*(.*)`);var tO=()=>null;function X2(n,e){return tO(n,e)}var nO=class{},i6=class{},sv=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Li(e)}.`)}},Qh=class{static NULL=new sv},Ul=class{},Yo=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>iO()}return n})();function iO(){let n=Dt(),e=zi(),t=lo(e.index,n);return(ms(t)?t:n)[In]}var rO=(()=>{class n{static \u0275prov=Pe({token:n,providedIn:"root",factory:()=>null})}return n})();var S_={},av=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=kh(i);let r=this.injector.get(e,S_,i);return r!==S_||t===S_?r:this.parentInjector.get(e,t,i)}};function lv(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=R_(r,a);else if(o==2){let u=a,f=e[++s];i=R_(i,u+": "+f+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function we(n,e=wt.Default){let t=Dt();if(t===null)return De(n,e);let i=zi();return lw(i,t,Ei(n),e)}function r6(){let n="invalid";throw new Error(n)}function px(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let a,u=null,f=null,p=sO(s);p===null?a=s:[a,u,f]=p,cO(n,e,t,a,o,u,f)}o!==null&&i!==null&&oO(t,i,o)}function oO(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new Ge(-301,!1);i.push(e[r],o)}}function sO(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&so(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let i=null,r=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,o??=new Map,aO(s,i,o,r)),s===e&&(i??=[],i.push(s));return i!==null?(i.push(...e===null?n:n.slice(1)),[i,r,o]):null}function aO(n,e,t,i){let r=e.length;n.findHostDirectiveDefs(n,e,i),t.set(n,[r,e.length-1])}function lO(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function cO(n,e,t,i,r,o,s){let a=i.length,u=!1;for(let v=0;v<a;v++){let x=i[v];!u&&so(x)&&(u=!0,lO(n,t,v)),W_(Ch(t,e),n,x.type)}mO(t,n.data.length,a);for(let v=0;v<a;v++){let x=i[v];x.providersResolver&&x.providersResolver(x)}let f=!1,p=!1,h=Bw(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let v=0;v<a;v++){let x=i[v];if(t.mergedAttrs=Ll(t.mergedAttrs,x.hostAttrs),dO(n,t,e,h,x),pO(h,x,r),s!==null&&s.has(x)){let[S,b]=s.get(x);t.directiveToIndex.set(x.type,[h,S+t.directiveStart,b+t.directiveStart])}else(o===null||!o.has(x))&&t.directiveToIndex.set(x.type,h);x.contentQueries!==null&&(t.flags|=4),(x.hostBindings!==null||x.hostAttrs!==null||x.hostVars!==0)&&(t.flags|=64);let w=x.type.prototype;!f&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),f=!0),!p&&(w.ngOnChanges||w.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),p=!0),h++}uO(n,t,o)}function uO(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))Z2(0,e,r,i),Z2(1,e,r,i),J2(e,i,!1);else{let o=t.get(r);K2(0,e,o,i),K2(1,e,o,i),J2(e,i,!0)}}}function Z2(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),o6(e,o)}}function K2(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),o6(e,s)}}function o6(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function J2(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||tx(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let u=i[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&r.hasOwnProperty(u)){let f=r[u];for(let p of f)if(p===e){s??=[],s.push(u,i[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let f=o[u];for(let p=0;p<f.length;p+=2)if(f[p]===e){s??=[],s.push(f[p+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function dO(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=ha(r.type,!0)),s=new ya(o,so(r),we);n.blueprint[i]=s,t[i]=s,fO(n,e,i,Bw(n,t,r.hostVars,Ti),r)}function fO(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;hO(s)!=a&&s.push(a),s.push(t,i,o)}}function hO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function pO(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;so(e)&&(t[""]=n)}}function mO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function s6(n,e,t,i,r,o,s,a){let u=e.consts,f=Fl(u,s),p=Jh(e,n,2,i,f);return o&&px(e,t,p,Fl(u,a),r),p.mergedAttrs=Ll(p.mergedAttrs,p.attrs),p.attrs!==null&&lv(p,p.attrs,!1),p.mergedAttrs!==null&&lv(p,p.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,p),p}function a6(n,e){Wv(n,e),kv(e)&&n.queries.elementEnd(e)}var Th=class extends Qh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ma(e);return new Bl(t,this.ngModule)}};function gO(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&qh.SignalBased)!==0};return r&&(o.transform=r),o})}function _O(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function vO(n,e,t){let i=e instanceof pi?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new av(t,i):t}function xO(n){let e=n.get(Ul,null);if(e===null)throw new Ge(407,!1);let t=n.get(rO,null),i=n.get(Vl,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i}}function yO(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return Ow(e,t,t==="svg"?hD:t==="math"?pD:null)}var Bl=class extends i6{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=gO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=_O(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=QP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r){sn(22);let o=kt(null);try{let s=this.componentDef,a=i?["ng-version","19.2.17"]:eI(this.componentDef.selectors[0]),u=nx(0,null,null,1,0,null,null,null,null,[a],null),f=vO(s,r||this.ngModule,e),p=xO(f),h=p.rendererFactory.createRenderer(null,s),v=i?rI(h,i,s.encapsulation,f):yO(s,h),x=ix(null,u,null,512|Uw(s),null,null,p,h,f,null,Pw(v,f,!0));x[Ui]=v,jv(x);let w=null;try{let S=s6(Ui,u,x,"#host",()=>[this.componentDef],!0,0);v&&(kw(h,v,S),Xl(v,x)),Yh(u,x,S),ex(u,S,x),a6(u,S),t!==void 0&&bO(S,this.ngContentSelectors,t),w=lo(S.index,x),x[Vi]=w[Vi],cx(u,x,null)}catch(S){throw w!==null&&J_(w),J_(x),S}finally{sn(23),Gv()}return new cv(this.componentType,x)}finally{kt(o)}}},cv=class extends nO{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=BC(t[Tt],Ui),this.location=ql(this._tNode,t),this.instance=lo(this._tNode.index,t)[Vi],this.hostView=this.changeDetectorRef=new wu(t,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=lx(i,r[Tt],r,e,t);this.previousInputValues.set(e,t);let s=lo(i.index,r);hx(s,1)}get injector(){return new fa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function bO(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var _s=(()=>{class n{static __NG_ELEMENT_ID__=CO}return n})();function CO(){let n=zi();return c6(n,Dt())}var wO=_s,l6=class extends wO{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return ql(this._hostTNode,this._hostLView)}get injector(){return new fa(this._hostTNode,this._hostLView)}get parentInjector(){let e=$v(this._hostTNode,this._hostLView);if(nw(e)){let t=yh(e,this._hostLView),i=xh(e),r=t[Tt].data[i+8];return new fa(r,t)}else return new fa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Q2(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Zi}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=X2(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,q2(this._hostTNode,s)),a}createComponent(e,t,i,r,o){let s=e&&!cD(e),a;if(s)a=t;else{let w=t||{};a=w.index,i=w.injector,r=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let u=s?e:new Bl(ma(e)),f=i||this.parentInjector;if(!o&&u.ngModule==null){let S=(s?f:this.parentInjector).get(pi,null);S&&(o=S)}let p=ma(u.componentType??{}),h=X2(this._lContainer,p?.id??null),v=h?.firstChild??null,x=u.create(f,r,v,o);return this.insertImpl(x.hostView,a,q2(this._hostTNode,h)),x}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(_D(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=r[mi],f=new l6(u,u[kr],u[mi]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return qI(s,r,o,i),e.attachToViewContainerRef(),MC(E_(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Q2(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=ov(this._lContainer,t);i&&(fh(E_(this._lContainer),t),Ww(i[Tt],i))}detach(e){let t=this._adjustIndex(e,-1),i=ov(this._lContainer,t);return i&&fh(E_(this._lContainer),t)!=null?new wu(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function Q2(n){return n[_h]}function E_(n){return n[_h]||(n[_h]=[])}function c6(n,e){let t,i=e[n.index];return Wo(i)?t=i:(t=t6(i,e,null,n),e[n.index]=t,rx(e,t)),SO(t,e,n,i),new l6(t,n,e)}function MO(n,e){let t=n[In],i=t.createComment(""),r=ho(e,n),o=t.parentNode(r);return Eh(t,o,i,t.nextSibling(r),!1),i}var SO=TO,EO=()=>!1;function AO(n,e,t){return EO(n,e,t)}function TO(n,e,t,i){if(n[_a])return;let r;t.type&8?r=ao(i):r=MO(e,t),n[_a]=r}var uv=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},dv=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)mx(e,t).matches!==null&&this.queries[t].setDirty()}},fv=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=FO(e):this.predicate=e}},hv=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},pv=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,DO(t,o)),this.matchTNodeWithReadOption(e,t,sh(t,e,o,!1,!1))}else i===ba?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,sh(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Ki||r===_s||r===ba&&t.type&4)this.addMatch(t.index,-2);else{let o=sh(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function DO(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function PO(n,e){return n.type&11?ql(n,e):n.type&4?Kh(n,e):null}function IO(n,e,t,i){return t===-1?PO(e,n):t===-2?OO(n,e,i):Cu(n,n[Tt],t,e)}function OO(n,e,t){if(t===Ki)return ql(e,n);if(t===ba)return Kh(e,n);if(t===_s)return c6(e,n)}function u6(n,e,t,i){let r=e[Ho].queries[i];if(r.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let f=s[u];if(f<0)a.push(null);else{let p=o[f];a.push(IO(e,p,s[u+1],t.metadata.read))}}r.matches=a}return r.matches}function mv(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=u6(n,e,r,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)i.push(s[a/2]);else{let f=o[a+1],p=e[-u];for(let h=Zi;h<p.length;h++){let v=p[h];v[ga]===v[mi]&&mv(v[Tt],v,f,i)}if(p[Nl]!==null){let h=p[Nl];for(let v=0;v<h.length;v++){let x=h[v];mv(x[Tt],x,f,i)}}}}}return i}function RO(n,e){return n[Ho].queries[e].queryList}function kO(n,e,t){let i=new K_((t&4)===4);return yD(n,e,i,i.destroy),(e[Ho]??=new dv).queries.push(new uv(i))-1}function NO(n,e,t){let i=Wn();return i.firstCreatePass&&(LO(i,new fv(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),kO(i,Dt(),e)}function FO(n){return n.split(",").map(e=>e.trim())}function LO(n,e,t){n.queries===null&&(n.queries=new hv),n.queries.track(new pv(e,t))}function mx(n,e){return n.queries.getByIndex(e)}function VO(n,e){let t=n[Tt],i=mx(t,e);return i.crossesNgTemplate?mv(t,n,e,[]):u6(t,n,i,e)}var zl=class{},gx=class{};var gv=class extends zl{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Th(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=AC(e);this._bootstrapComponents=Lw(o.bootstrap),this._r3Injector=dw(e,t,[{provide:zl,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver},...i],Li(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},_v=class extends gx{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new gv(this.moduleType,e,[])}};var Dh=class extends zl{injector;componentFactoryResolver=new Th(this);instance=null;constructor(e){super();let t=new yu([...e.providers,{provide:zl,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver}],e.parent||Rv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Pu(n,e,t=null){return new Dh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var UO=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=TC(!1,t.type),r=i.length>0?Pu([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Pe({token:n,providedIn:"environment",factory:()=>new n(De(pi))})}return n})();function Jt(n){return Su(()=>{let e=d6(n),t=lt(xe({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===bw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(UO).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||uo.Emulated,styles:n.styles||Fi,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Du("NgStandalone"),f6(t);let i=n.dependencies;return t.directiveDefs=eC(i,!1),t.pipeDefs=eC(i,!0),t.id=GO(t),t})}function BO(n){return ma(n)||Z3(n)}function zO(n){return n!==null}function Nr(n){return Su(()=>({type:n.type,bootstrap:n.bootstrap||Fi,declarations:n.declarations||Fi,imports:n.imports||Fi,exports:n.exports||Fi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function HO(n,e){if(n==null)return pa;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a,u;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,u=r[3]||null):(o=r,s=r,a=qh.None,u=null),t[o]=[i,a,u],e[o]=s}return t}function jO(n){if(n==null)return pa;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function an(n){return Su(()=>{let e=d6(n);return f6(e),e})}function _x(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function d6(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||pa,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Fi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:HO(n.inputs,e),outputs:jO(n.outputs),debugInfo:null}}function f6(n){n.features?.forEach(e=>e(n))}function eC(n,e){if(!n)return null;let t=e?K3:BO;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(zO)}function GO(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function WO(n){return Object.getPrototypeOf(n.prototype).constructor}function ci(n){let e=WO(n.type),t=!0,i=[n];for(;e;){let r;if(so(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ge(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=A_(n.inputs),s.declaredInputs=A_(n.declaredInputs),s.outputs=A_(n.outputs);let a=r.hostBindings;a&&ZO(n,a);let u=r.viewQuery,f=r.contentQueries;if(u&&YO(n,u),f&&XO(n,f),$O(n,r),A3(n.outputs,r.outputs),so(r)&&r.data.animation){let p=n.data;p.animation=(p.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ci&&(t=!1)}}e=Object.getPrototypeOf(e)}qO(i)}function $O(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function qO(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Ll(r.hostAttrs,t=Ll(t,r.hostAttrs))}}function A_(n){return n===pa?{}:n===Fi?[]:n}function YO(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function XO(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function ZO(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function h6(n){return JO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function KO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function JO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function vx(n,e,t){return n[e]=t}function QO(n,e){return n[e]}function fo(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function xx(n,e,t,i){let r=fo(n,e,t);return fo(n,e+1,i)||r}function eR(n,e,t,i,r){let o=xx(n,e,t,i);return fo(n,e+2,r)||o}function tR(n,e,t,i,r,o,s,a,u){let f=e.consts,p=Jh(e,n,4,s||null,a||null);Uv()&&px(e,t,p,Fl(f,u),ax),p.mergedAttrs=Ll(p.mergedAttrs,p.attrs),Wv(e,p);let h=p.tView=nx(2,p,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,f,null);return e.queries!==null&&(e.queries.template(e,p),h.queries=e.queries.embeddedTView(p)),p}function nR(n,e,t,i,r,o,s,a,u,f){let p=t+Ui,h=e.firstCreatePass?tR(p,e,n,i,r,o,s,a,u):e.data[p];Ma(h,!1);let v=iR(e,n,h,t);jh()&&Xh(e,n,v,h),Xl(v,n);let x=t6(v,n,v,h);return n[p]=x,rx(n,x),AO(x,h,n),Vh(h)&&Yh(e,n,h),u!=null&&ox(n,h,f),h}function ee(n,e,t,i,r,o,s,a){let u=Dt(),f=Wn(),p=Fl(f.consts,o);return nR(u,f,n,e,t,i,r,p,s,a),ee}var iR=rR;function rR(n,e,t,i){return Gh(!0),e[In].createComment("")}var p6=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var m6=new $e("");var oR=(()=>{class n{static \u0275prov=Pe({token:n,providedIn:"root",factory:()=>new vv})}return n})(),vv=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Sa(n){return!!n&&typeof n.then=="function"}function g6(n){return!!n&&typeof n.subscribe=="function"}var _6=new $e("");function yx(n){return Au([{provide:_6,multi:!0,useValue:n}])}var v6=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=be(_6,{optional:!0})??[];injector=be(pr);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=Bi(this.injector,r);if(Sa(o))t.push(o);else if(g6(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ep=new $e("");function sR(){e_(()=>{throw new Ge(600,!1)})}function aR(n){return n.isBoundToModule}var lR=10;var Ca=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=be(sP);afterRenderManager=be(Dw);zonelessEnabled=be(hw);rootEffectScheduler=be(oR);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Hn;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=be(gs).hasPendingTasks.pipe(Mt(t=>!t));constructor(){be(Kl,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=be(pi);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=pr.NULL){sn(10);let o=t instanceof i6;if(!this._injector.get(v6).done){let x="";throw new Ge(405,x)}let a;o?a=t:a=this._injector.get(Qh).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let u=aR(a)?void 0:this._injector.get(zl),f=i||a.selector,p=a.create(r,[],f,u),h=p.location.nativeElement,v=p.injector.get(m6,null);return v?.registerApplication(h),p.onDestroy(()=>{this.detachView(p.hostView),ah(this.components,p),v?.unregisterApplication(h)}),this._loadComponent(p),sn(11,p),p}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){sn(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Jv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Ge(101,!1);let t=kt(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,kt(t),this.afterTick.next(),sn(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ul,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<lR;)sn(14),this.synchronizeOnce(),sn(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)cR(i,r,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Uh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;ah(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ep,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ah(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ge(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ah(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function cR(n,e,t,i){if(!t&&!Uh(n))return;Kw(n,e,t&&!i?0:1)}function Jl(n,e,t,i){let r=Dt(),o=Bh();if(fo(r,o,e)){let s=Wn(),a=Hh();fI(a,r,n,e,t,i)}return Jl}function bx(n,e,t,i){return fo(n,Bh(),t)?e+Bo(t)+i:Ti}function uR(n,e,t,i,r,o){let s=qC(),a=xx(n,s,t,r);return zh(2),a?e+Bo(t)+i+Bo(r)+o:Ti}function dR(n,e,t,i,r,o,s,a){let u=qC(),f=eR(n,u,t,r,s);return zh(3),f?e+Bo(t)+i+Bo(r)+o+Bo(s)+a:Ti}function nh(n,e){return n<<17|e<<2}function wa(n){return n>>17&32767}function fR(n){return(n&2)==2}function hR(n,e){return n&131071|e<<17}function xv(n){return n|2}function Hl(n){return(n&131068)>>2}function T_(n,e){return n&-131069|e<<2}function pR(n){return(n&1)===1}function yv(n){return n|1}function mR(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=wa(s),u=Hl(s);n[i]=t;let f=!1,p;if(Array.isArray(t)){let h=t;p=h[1],(p===null||Eu(h,p)>0)&&(f=!0)}else p=t;if(r)if(u!==0){let v=wa(n[a+1]);n[i+1]=nh(v,a),v!==0&&(n[v+1]=T_(n[v+1],i)),n[a+1]=hR(n[a+1],i)}else n[i+1]=nh(a,0),a!==0&&(n[a+1]=T_(n[a+1],i)),a=i;else n[i+1]=nh(u,0),a===0?a=i:n[u+1]=T_(n[u+1],i),u=i;f&&(n[i+1]=xv(n[i+1])),tC(n,p,i,!0),tC(n,p,i,!1),gR(e,p,n,i,o),s=nh(a,u),o?e.classBindings=s:e.styleBindings=s}function gR(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Eu(o,e)>=0&&(t[i+1]=yv(t[i+1]))}function tC(n,e,t,i){let r=n[t+1],o=e===null,s=i?wa(r):Hl(r),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],f=n[s+1];_R(u,e)&&(a=!0,n[s+1]=i?yv(f):xv(f)),s=i?wa(f):Hl(f)}a&&(n[t+1]=i?xv(r):yv(r))}function _R(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Eu(n,e)>=0:!1}var Ir={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function vR(n){return n.substring(Ir.key,Ir.keyEnd)}function xR(n){return yR(n),x6(n,y6(n,0,Ir.textEnd))}function x6(n,e){let t=Ir.textEnd;return t===e?-1:(e=Ir.keyEnd=bR(n,Ir.key=e,t),y6(n,e,t))}function yR(n){Ir.key=0,Ir.keyEnd=0,Ir.value=0,Ir.valueEnd=0,Ir.textEnd=n.length}function y6(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function bR(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function R(n,e,t){let i=Dt(),r=Bh();if(fo(i,r,e)){let o=Wn(),s=Hh();sx(o,s,i,n,e,i[In],t,!1)}return R}function bv(n,e,t,i,r){lx(e,n,t,r?"class":"style",i)}function vs(n,e,t){return C6(n,e,t,!1),vs}function Ue(n,e){return C6(n,e,null,!0),Ue}function vn(n){w6(AR,b6,n,!0)}function b6(n,e){for(let t=xR(e);t>=0;t=x6(e,t))Nh(n,vR(e),!0)}function C6(n,e,t,i){let r=Dt(),o=Wn(),s=zh(2);if(o.firstUpdatePass&&S6(o,n,s,i),e!==Ti&&fo(r,s,e)){let a=o.data[qo()];E6(o,a,r,r[In],n,r[s+1]=DR(e,t),i,s)}}function w6(n,e,t,i){let r=Wn(),o=zh(2);r.firstUpdatePass&&S6(r,null,o,i);let s=Dt();if(t!==Ti&&fo(s,o,t)){let a=r.data[qo()];if(A6(a,i)&&!M6(r,o)){let u=i?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=R_(u,t||"")),bv(r,a,s,t,i)}else TR(r,a,s,s[In],s[o+1],s[o+1]=ER(n,e,t),i,o)}}function M6(n,e){return e>=n.expandoStartIndex}function S6(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[qo()],s=M6(n,t);A6(o,i)&&e===null&&!s&&(e=!1),e=CR(r,o,e,i),mR(r,o,e,t,s,i)}}function CR(n,e,t,i){let r=RD(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=D_(null,n,e,t,i),t=Mu(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=D_(r,n,e,t,i),o===null){let u=wR(n,e,i);u!==void 0&&Array.isArray(u)&&(u=D_(null,n,e,u[1],i),u=Mu(u,e.attrs,i),MR(n,e,i,u))}else o=SR(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function wR(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Hl(i)!==0)return n[wa(i)]}function MR(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[wa(r)]=i}function SR(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=Mu(i,s,t)}return Mu(i,e.attrs,t)}function D_(n,e,t,i,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],i=Mu(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function Mu(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Nh(n,s,t?!0:e[++o]))}return n===void 0?null:n}function ER(n,e,t){if(t==null||t==="")return Fi;let i=[],r=Wh(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function AR(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&Nh(n,i,t)}function TR(n,e,t,i,r,o,s,a){r===Ti&&(r=Fi);let u=0,f=0,p=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;p!==null||h!==null;){let v=u<r.length?r[u+1]:void 0,x=f<o.length?o[f+1]:void 0,w=null,S;p===h?(u+=2,f+=2,v!==x&&(w=h,S=x)):h===null||p!==null&&p<h?(u+=2,w=p):(f+=2,w=h,S=x),w!==null&&E6(n,e,t,i,w,S,s,a),p=u<r.length?r[u]:null,h=f<o.length?o[f]:null}}function E6(n,e,t,i,r,o,s,a){if(!(e.type&3))return;let u=n.data,f=u[a+1],p=pR(f)?nC(u,e,t,r,Hl(f),s):void 0;if(!Ph(p)){Ph(o)||fR(f)&&(o=nC(u,null,t,r,a,s));let h=UC(qo(),t);RI(i,s,h,r,o)}}function nC(n,e,t,i,r,o){let s=e===null,a;for(;r>0;){let u=n[r],f=Array.isArray(u),p=f?u[1]:u,h=p===null,v=t[r+1];v===Ti&&(v=h?Fi:void 0);let x=h?x_(v,i):p===i?v:void 0;if(f&&!Ph(x)&&(x=x_(u,i)),Ph(x)&&(a=x,s))return a;let w=n[r+1];r=s?wa(w):Hl(w)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=x_(u,i))}return a}function Ph(n){return n!==void 0}function DR(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Li(Wh(n)))),n}function A6(n,e){return(n.flags&(e?8:16))!==0}function T6(n,e,t){let i=Dt(),r=bx(i,n,e,t);w6(Nh,b6,r,!0)}function l(n,e,t,i){let r=Dt(),o=Wn(),s=Ui+n,a=r[In],u=o.firstCreatePass?s6(s,o,r,e,ax,Uv(),t,i):o.data[s],f=PR(o,r,u,a,e,n);r[s]=f;let p=Vh(u);return Ma(u,!0),kw(a,f,u),!jw(u)&&jh()&&Xh(o,r,f,u),(bD()===0||p)&&Xl(f,r),CD(),p&&(Yh(o,r,u),ex(o,u,r)),i!==null&&ox(r,u),l}function c(){let n=zi();Bv()?WC():(n=n.parent,Ma(n,!1));let e=n;SD(e)&&ED(),wD();let t=Wn();return t.firstCreatePass&&a6(t,e),e.classesWithoutHost!=null&&UD(e)&&bv(t,e,Dt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&BD(e)&&bv(t,e,Dt(),e.stylesWithoutHost,!1),c}function P(n,e,t,i){return l(n,e,t,i),c(),P}var PR=(n,e,t,i,r,o)=>(Gh(!0),Ow(i,r,FD()));function IR(n,e,t,i,r){let o=e.consts,s=Fl(o,i),a=Jh(e,n,8,"ng-container",s);s!==null&&lv(a,s,!0);let u=Fl(o,r);return Uv()&&px(e,t,a,u,ax),a.mergedAttrs=Ll(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function xs(n,e,t){let i=Dt(),r=Wn(),o=n+Ui,s=r.firstCreatePass?IR(o,r,i,e,t):r.data[o];Ma(s,!0);let a=OR(r,i,s,n);return i[o]=a,jh()&&Xh(r,i,a,s),Xl(a,i),Vh(s)&&(Yh(r,i,s),ex(r,s,i)),t!=null&&ox(i,s),xs}function ys(){let n=zi(),e=Wn();return Bv()?WC():(n=n.parent,Ma(n,!1)),e.firstCreatePass&&(Wv(e,n),kv(n)&&e.queries.elementEnd(n)),ys}var OR=(n,e,t,i)=>(Gh(!0),UP(e[In],""));function Me(){return Dt()}var ua=void 0;function RR(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var kR=["en",[["a","p"],["AM","PM"],ua],[["AM","PM"],ua,ua],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ua,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ua,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ua,"{1} 'at' {0}",ua],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",RR],P_={};function Ji(n){let e=NR(n),t=iC(e);if(t)return t;let i=e.split("-")[0];if(t=iC(i),t)return t;if(i==="en")return kR;throw new Ge(701,!1)}function iC(n){return n in P_||(P_[n]=mu.ng&&mu.ng.common&&mu.ng.common.locales&&mu.ng.common.locales[n]),P_[n]}var On=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(On||{});function NR(n){return n.toLowerCase().replace(/_/g,"-")}var Ih="en-US";var FR=Ih;function LR(n){typeof n=="string"&&(FR=n.toLowerCase().replace(/_/g,"-"))}function rC(n,e,t){return function i(r){if(r===Function)return t;let o=Gl(n)?lo(n.index,e):e;hx(o,5);let s=e[Vi],a=oC(e,s,t,r),u=i.__ngNextListenerFn__;for(;u;)a=oC(e,s,u,r)&&a,u=u.__ngNextListenerFn__;return a}}function oC(n,e,t,i){let r=kt(null);try{return sn(6,e,t),t(i)!==!1}catch(o){return VR(n,o),!1}finally{sn(7,e,t),kt(r)}}function VR(n,e){let t=n[kl],i=t?t.get(co,null):null;i&&i.handleError(e)}function sC(n,e,t,i,r,o){let s=e[t],a=e[Tt],f=a.data[t].outputs[i],p=s[f],h=a.firstCreatePass?Vv(a):null,v=Lv(e),x=p.subscribe(o),w=v.length;v.push(o,x),h&&h.push(r,n.index,w,-(w+1))}function O(n,e,t,i){let r=Dt(),o=Wn(),s=zi();return D6(o,r,r[In],s,n,e,i),O}function UR(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let a=e[mh],u=r[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function D6(n,e,t,i,r,o,s){let a=Vh(i),f=n.firstCreatePass?Vv(n):null,p=Lv(e),h=!0;if(i.type&3||s){let v=ho(i,e),x=s?s(v):v,w=p.length,S=s?y=>s(ao(y[i.index])):i.index,b=null;if(!s&&a&&(b=UR(n,e,r,i.index)),b!==null){let y=b.__ngLastListenerFn__||b;y.__ngNextListenerFn__=o,b.__ngLastListenerFn__=o,h=!1}else{o=rC(i,e,o),AP(e,x,r,o);let y=t.listen(x,r,o);p.push(o,y),f&&f.push(r,S,w,w+1)}}else o=rC(i,e,o);if(h){let v=i.outputs?.[r],x=i.hostDirectiveOutputs?.[r];if(x&&x.length)for(let w=0;w<x.length;w+=2){let S=x[w],b=x[w+1];sC(i,e,S,b,r,o)}if(v&&v.length)for(let w of v)sC(i,e,w,r,r,o)}}function E(n=1){return ND(n)}function Cx(n,e,t){return P6(n,"",e,"",t),Cx}function P6(n,e,t,i,r){let o=Dt(),s=bx(o,e,t,i);if(s!==Ti){let a=Wn(),u=Hh();sx(a,u,o,n,s,o[In],r,!1)}return P6}function tp(n,e,t){NO(n,e,t)}function Iu(n){let e=Dt(),t=Wn(),i=YC();Hv(i+1);let r=mx(t,i);if(n.dirty&&gD(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=VO(e,i);n.reset(o,cP),n.notifyOnChanges()}return!0}return!1}function Ou(){return RO(Dt(),YC())}function Ru(n){let e=TD();return Nv(e,Ui+n)}function d(n,e=""){let t=Dt(),i=Wn(),r=n+Ui,o=i.firstCreatePass?Jh(i,r,1,e,null):i.data[r],s=BR(i,t,o,e,n);t[r]=s,jh()&&Xh(i,t,s,o),Ma(o,!1)}var BR=(n,e,t,i,r)=>(Gh(!0),LP(e[In],i));function te(n){return K("",n,""),te}function K(n,e,t){let i=Dt(),r=bx(i,n,e,t);return r!==Ti&&wx(i,qo(),r),K}function Un(n,e,t,i,r){let o=Dt(),s=uR(o,n,e,t,i,r);return s!==Ti&&wx(o,qo(),s),Un}function bs(n,e,t,i,r,o,s){let a=Dt(),u=dR(a,n,e,t,i,r,o,s);return u!==Ti&&wx(a,qo(),u),bs}function wx(n,e,t){let i=UC(e,n);VP(n[In],i,t)}function de(n,e,t){xw(e)&&(e=e());let i=Dt(),r=Bh();if(fo(i,r,e)){let o=Wn(),s=Hh();sx(o,s,i,n,e,i[In],t,!1)}return de}function he(n,e){let t=xw(n);return t&&n.set(e),t}function fe(n,e){let t=Dt(),i=Wn(),r=zi();return D6(i,t,t[In],r,n,e),fe}function zR(n,e,t){let i=Wn();if(i.firstCreatePass){let r=so(n);Cv(t,i.data,i.blueprint,r,!0),Cv(e,i.data,i.blueprint,r,!1)}}function Cv(n,e,t,i,r){if(n=Ei(n),Array.isArray(n))for(let o=0;o<n.length;o++)Cv(n[o],e,t,i,r);else{let o=Wn(),s=Dt(),a=zi(),u=Rl(n)?n:Ei(n.provide),f=IC(n),p=a.providerIndexes&1048575,h=a.directiveStart,v=a.providerIndexes>>20;if(Rl(n)||!n.multi){let x=new ya(f,r,we),w=O_(u,e,r?p:p+v,h);w===-1?(W_(Ch(a,s),o,u),I_(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(x),s.push(x)):(t[w]=x,s[w]=x)}else{let x=O_(u,e,p+v,h),w=O_(u,e,p,p+v),S=x>=0&&t[x],b=w>=0&&t[w];if(r&&!b||!r&&!S){W_(Ch(a,s),o,u);let y=GR(r?jR:HR,t.length,r,i,f);!r&&b&&(t[w].providerFactory=y),I_(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(y),s.push(y)}else{let y=I6(t[r?w:x],f,!r&&i);I_(o,n,x>-1?x:w,y)}!r&&i&&b&&t[w].componentProviders++}}}function I_(n,e,t,i){let r=Rl(e),o=nD(e);if(r||o){let u=(o?Ei(e.useClass):e).prototype.ngOnDestroy;if(u){let f=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let p=f.indexOf(t);p===-1?f.push(t,[i,u]):f[p+1].push(i,u)}else f.push(t,u)}}}function I6(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function O_(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function HR(n,e,t,i,r){return wv(this.multi,[])}function jR(n,e,t,i,r){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Cu(i,i[Tt],this.providerFactory.index,r);s=u.slice(0,a),wv(o,s);for(let f=a;f<u.length;f++)s.push(u[f])}else s=[],wv(o,s);return s}function wv(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function GR(n,e,t,i,r){let o=new ya(n,t,we);return o.multi=[],o.index=e,o.componentProviders=0,I6(o,r,i&&!t),o}function Qi(n,e=[]){return t=>{t.providersResolver=(i,r)=>zR(i,r?r(n):n,e)}}function Cs(n,e,t){let i=zv()+n,r=Dt();return r[i]===Ti?vx(r,i,t?e.call(t):e()):QO(r,i)}function O6(n,e){let t=n[e];return t===Ti?void 0:t}function WR(n,e,t,i,r,o){let s=e+t;return fo(n,s,r)?vx(n,s+1,o?i.call(o,r):i(r)):O6(n,s+1)}function $R(n,e,t,i,r,o,s){let a=e+t;return xx(n,a,r,o)?vx(n,a+2,s?i.call(s,r,o):i(r,o)):O6(n,a+2)}function pn(n,e){let t=Wn(),i,r=n+Ui;t.firstCreatePass?(i=qR(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=ha(i.type,!0)),s,a=Ni(we);try{let u=bh(!1),f=o();return bh(u),mD(t,Dt(),r,f),f}finally{Ni(a)}}function qR(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function gr(n,e,t){let i=n+Ui,r=Dt(),o=Nv(r,i);return R6(r,i)?WR(r,zv(),e,o.transform,t,o):o.transform(t)}function gi(n,e,t,i){let r=n+Ui,o=Dt(),s=Nv(o,r);return R6(o,r)?$R(o,zv(),e,s.transform,t,i,s):s.transform(t,i)}function R6(n,e){return n[Tt].data[e].pure}function np(n,e){return Kh(n,e)}var Mv=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},k6=(()=>{class n{compileModuleSync(t){return new _v(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=AC(t),o=Lw(r.declarations).reduce((s,a)=>{let u=ma(a);return u&&s.push(new Bl(u)),s},[]);return new Mv(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var YR=(()=>{class n{zone=be(An);changeDetectionScheduler=be(Vl);applicationRef=be(Ca);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function XR({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new An(lt(xe({},ZR()),{scheduleInRootZone:t})),[{provide:An,useFactory:n},{provide:xu,multi:!0,useFactory:()=>{let i=be(YR,{optional:!0});return()=>i.initialize()}},{provide:xu,multi:!0,useFactory:()=>{let i=be(KR);return()=>{i.initialize()}}},e===!0?{provide:pw,useValue:!0}:[],{provide:mw,useValue:t??fw}]}function ZR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var KR=(()=>{class n{subscription=new zn;initialized=!1;zone=be(An);pendingTasks=be(gs);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{An.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{An.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var JR=(()=>{class n{appRef=be(Ca);taskService=be(gs);ngZone=be(An);zonelessEnabled=be(hw);tracing=be(Kl,{optional:!0});disableScheduling=be(pw,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new zn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Mh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(be(mw,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Z_||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?U2:gw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Mh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,U2(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QR(){return typeof $localize<"u"&&$localize.locale||Ih}var ku=new $e("",{providedIn:"root",factory:()=>be(ku,wt.Optional|wt.SkipSelf)||QR()});var Sv=new $e(""),ek=new $e("");function pu(n){return!n.moduleRef}function tk(n){let e=pu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(An);return t.run(()=>{pu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(co,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:o=>{i.handleError(o)}})}),pu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Sv);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Sv);s.add(o),n.moduleRef.onDestroy(()=>{ah(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return ik(i,t,()=>{let o=e.get(v6);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(ku,Ih);if(LR(s||Ih),!e.get(ek,!0))return pu(n)?e.get(Ca):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(pu(n)){let u=e.get(Ca);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return nk(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function nk(n,e){let t=n.injector.get(Ca);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Ge(-403,!1);e.push(n)}function ik(n,e,t){try{let i=t();return Sa(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var lh=null;function rk(n=[],e){return pr.create({name:e,providers:[{provide:Fh,useValue:"platform"},{provide:Sv,useValue:new Set([()=>lh=null])},...n]})}function ok(n=[]){if(lh)return lh;let e=rk(n);return lh=e,sR(),sk(e),e}function sk(n){let e=n.get(Zv,null);Bi(n,()=>{e?.forEach(t=>t())})}var Ea=(()=>{class n{static __NG_ELEMENT_ID__=ak}return n})();function ak(n){return lk(zi(),Dt(),(n&16)===16)}function lk(n,e,t){if(Gl(n)&&!t){let i=lo(n.index,e);return new wu(i,i)}else if(n.type&175){let i=e[oo];return new wu(i,e)}return null}var Ev=class{constructor(){}supports(e){return h6(e)}create(e){return new Av(e)}},ck=(n,e)=>e,Av=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||ck}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let s=!i||t&&t.currentIndex<aC(i,r,o)?t:i,a=aC(s,r,o),u=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,s.previousIndex==null)r++;else{o||(o=[]);let f=a-r,p=u-r;if(f!=p){for(let v=0;v<f;v++){let x=v<o.length?o[v]:o[v]=0,w=x+v;p<=w&&w<f&&(o[v]=x+1)}let h=s.previousIndex;o[h]=p-f}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!h6(e))throw new Ge(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),i=!0):(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,KO(e,a=>{s=this._trackByFn(r,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new Tv(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Oh),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Oh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Tv=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Dv=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},Oh=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new Dv,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function aC(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function lC(){return new Mx([new Ev])}var Mx=(()=>{class n{factories;static \u0275prov=Pe({token:n,providedIn:"root",factory:lC});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||lC()),deps:[[n,new W3,new G3]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new Ge(901,!1)}}return n})();function N6(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;sn(8);try{let o=r?.injector??ok(i),s=[XR({}),{provide:Vl,useExisting:JR},...t||[]],a=new Dh({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return tk({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{sn(9)}}function Nu(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function mo(n){return i_(n)}function Ql(n,e){return Qg(n,e?.equal)}var cC=class{[fr];constructor(e){this[fr]=e}destroy(){this[fr].destroy()}};function F6(n){let e=ma(n);if(!e)return null;let t=new Bl(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var $n=new $e("");var U6=null;function _r(){return U6}function Sx(n){U6??=n}var Fu=class{},Lu=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:()=>be(B6),providedIn:"platform"})}return n})(),Ex=new $e(""),B6=(()=>{class n extends Lu{_location;_history;_doc=be($n);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _r().getBaseHref(this._doc)}onPopState(t){let i=_r().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=_r().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function ip(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function L6(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Fr(n){return n&&n[0]!=="?"?`?${n}`:n}var Xo=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:()=>be(op),providedIn:"root"})}return n})(),rp=new $e(""),op=(()=>{class n extends Xo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??be($n).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ip(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Fr(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+Fr(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+Fr(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(De(Lu),De(rp,8))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ws=(()=>{class n{_subject=new Hn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=fk(L6(V6(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Fr(i))}normalize(t){return n.stripTrailingSlash(dk(this._basePath,V6(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fr(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fr(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Fr;static joinWithSlash=ip;static stripTrailingSlash=L6;static \u0275fac=function(i){return new(i||n)(De(Xo))};static \u0275prov=Pe({token:n,factory:()=>uk(),providedIn:"root"})}return n})();function uk(){return new ws(De(Xo))}function dk(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function V6(n){return n.replace(/\/index.html$/,"")}function fk(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Rx=(()=>{class n extends Xo{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=ip(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+Fr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+Fr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(De(Lu),De(rp,8))};static \u0275prov=Pe({token:n,factory:n.\u0275fac})}return n})();var kx=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(kx||{});var _i=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(_i||{}),ln=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(ln||{}),Hi=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Hi||{}),ji={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function $6(n){return Ji(n)[On.LocaleId]}function q6(n,e,t){let i=Ji(n),r=[i[On.DayPeriodsFormat],i[On.DayPeriodsStandalone]],o=vr(r,e);return vr(o,t)}function Y6(n,e,t){let i=Ji(n),r=[i[On.DaysFormat],i[On.DaysStandalone]],o=vr(r,e);return vr(o,t)}function X6(n,e,t){let i=Ji(n),r=[i[On.MonthsFormat],i[On.MonthsStandalone]],o=vr(r,e);return vr(o,t)}function Z6(n,e){let i=Ji(n)[On.Eras];return vr(i,e)}function Vu(n,e){let t=Ji(n);return vr(t[On.DateFormat],e)}function Uu(n,e){let t=Ji(n);return vr(t[On.TimeFormat],e)}function Bu(n,e){let i=Ji(n)[On.DateTimeFormat];return vr(i,e)}function go(n,e){let t=Ji(n),i=t[On.NumberSymbols][e];if(typeof i>"u"){if(e===ji.CurrencyDecimal)return t[On.NumberSymbols][ji.Decimal];if(e===ji.CurrencyGroup)return t[On.NumberSymbols][ji.Group]}return i}function K6(n,e){return Ji(n)[On.NumberFormats][e]}function J6(n){if(!n[On.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[On.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Q6(n){let e=Ji(n);return J6(e),(e[On.ExtraData][2]||[]).map(i=>typeof i=="string"?Ax(i):[Ax(i[0]),Ax(i[1])])}function eM(n,e,t){let i=Ji(n);J6(i);let r=[i[On.ExtraData][0],i[On.ExtraData][1]],o=vr(r,e)||[];return vr(o,t)||[]}function vr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Ax(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var pk=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,sp={},mk=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function tM(n,e,t,i){let r=Mk(n);e=Zo(t,e)||e;let s=[],a;for(;e;)if(a=mk.exec(e),a){s=s.concat(a.slice(1));let p=s.pop();if(!p)break;e=p}else{s.push(e);break}let u=r.getTimezoneOffset();i&&(u=iM(i,u),r=wk(r,i));let f="";return s.forEach(p=>{let h=bk(p);f+=h?h(r,t,u):p==="''"?"'":p.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function dp(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Zo(n,e){let t=$6(n);if(sp[t]??={},sp[t][e])return sp[t][e];let i="";switch(e){case"shortDate":i=Vu(n,Hi.Short);break;case"mediumDate":i=Vu(n,Hi.Medium);break;case"longDate":i=Vu(n,Hi.Long);break;case"fullDate":i=Vu(n,Hi.Full);break;case"shortTime":i=Uu(n,Hi.Short);break;case"mediumTime":i=Uu(n,Hi.Medium);break;case"longTime":i=Uu(n,Hi.Long);break;case"fullTime":i=Uu(n,Hi.Full);break;case"short":let r=Zo(n,"shortTime"),o=Zo(n,"shortDate");i=ap(Bu(n,Hi.Short),[r,o]);break;case"medium":let s=Zo(n,"mediumTime"),a=Zo(n,"mediumDate");i=ap(Bu(n,Hi.Medium),[s,a]);break;case"long":let u=Zo(n,"longTime"),f=Zo(n,"longDate");i=ap(Bu(n,Hi.Long),[u,f]);break;case"full":let p=Zo(n,"fullTime"),h=Zo(n,"fullDate");i=ap(Bu(n,Hi.Full),[p,h]);break}return i&&(sp[t][e]=i),i}function ap(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function Lr(n,e,t="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return i&&(s=s.slice(s.length-e)),o+s}function gk(n,e){return Lr(n,3).substring(0,e)}function qn(n,e,t=0,i=!1,r=!1){return function(o,s){let a=_k(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return gk(a,e);let u=go(s,ji.MinusSign);return Lr(a,e,u,i,r)}}function _k(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function mn(n,e,t=_i.Format,i=!1){return function(r,o){return vk(r,o,n,e,t,i)}}function vk(n,e,t,i,r,o){switch(t){case 2:return X6(e,r,i)[n.getMonth()];case 1:return Y6(e,r,i)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let f=Q6(e),p=eM(e,r,i),h=f.findIndex(v=>{if(Array.isArray(v)){let[x,w]=v,S=s>=x.hours&&a>=x.minutes,b=s<w.hours||s===w.hours&&a<w.minutes;if(x.hours<w.hours){if(S&&b)return!0}else if(S||b)return!0}else if(v.hours===s&&v.minutes===a)return!0;return!1});if(h!==-1)return p[h]}return q6(e,r,i)[s<12?0:1];case 3:return Z6(e,i)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function lp(n){return function(e,t,i){let r=-1*i,o=go(t,ji.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+Lr(s,2,o)+Lr(Math.abs(r%60),2,o);case 1:return"GMT"+(r>=0?"+":"")+Lr(s,1,o);case 2:return"GMT"+(r>=0?"+":"")+Lr(s,2,o)+":"+Lr(Math.abs(r%60),2,o);case 3:return i===0?"Z":(r>=0?"+":"")+Lr(s,2,o)+":"+Lr(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var xk=0,up=4;function yk(n){let e=dp(n,xk,1).getDay();return dp(n,0,1+(e<=up?up:up+7)-e)}function nM(n){let e=n.getDay(),t=e===0?-3:up-e;return dp(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Tx(n,e=!1){return function(t,i){let r;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();r=1+Math.floor((s+o)/7)}else{let o=nM(t),s=yk(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return Lr(r,n,go(i,ji.MinusSign))}}function cp(n,e=!1){return function(t,i){let o=nM(t).getFullYear();return Lr(o,n,go(i,ji.MinusSign),e)}}var Dx={};function bk(n){if(Dx[n])return Dx[n];let e;switch(n){case"G":case"GG":case"GGG":e=mn(3,ln.Abbreviated);break;case"GGGG":e=mn(3,ln.Wide);break;case"GGGGG":e=mn(3,ln.Narrow);break;case"y":e=qn(0,1,0,!1,!0);break;case"yy":e=qn(0,2,0,!0,!0);break;case"yyy":e=qn(0,3,0,!1,!0);break;case"yyyy":e=qn(0,4,0,!1,!0);break;case"Y":e=cp(1);break;case"YY":e=cp(2,!0);break;case"YYY":e=cp(3);break;case"YYYY":e=cp(4);break;case"M":case"L":e=qn(1,1,1);break;case"MM":case"LL":e=qn(1,2,1);break;case"MMM":e=mn(2,ln.Abbreviated);break;case"MMMM":e=mn(2,ln.Wide);break;case"MMMMM":e=mn(2,ln.Narrow);break;case"LLL":e=mn(2,ln.Abbreviated,_i.Standalone);break;case"LLLL":e=mn(2,ln.Wide,_i.Standalone);break;case"LLLLL":e=mn(2,ln.Narrow,_i.Standalone);break;case"w":e=Tx(1);break;case"ww":e=Tx(2);break;case"W":e=Tx(1,!0);break;case"d":e=qn(2,1);break;case"dd":e=qn(2,2);break;case"c":case"cc":e=qn(7,1);break;case"ccc":e=mn(1,ln.Abbreviated,_i.Standalone);break;case"cccc":e=mn(1,ln.Wide,_i.Standalone);break;case"ccccc":e=mn(1,ln.Narrow,_i.Standalone);break;case"cccccc":e=mn(1,ln.Short,_i.Standalone);break;case"E":case"EE":case"EEE":e=mn(1,ln.Abbreviated);break;case"EEEE":e=mn(1,ln.Wide);break;case"EEEEE":e=mn(1,ln.Narrow);break;case"EEEEEE":e=mn(1,ln.Short);break;case"a":case"aa":case"aaa":e=mn(0,ln.Abbreviated);break;case"aaaa":e=mn(0,ln.Wide);break;case"aaaaa":e=mn(0,ln.Narrow);break;case"b":case"bb":case"bbb":e=mn(0,ln.Abbreviated,_i.Standalone,!0);break;case"bbbb":e=mn(0,ln.Wide,_i.Standalone,!0);break;case"bbbbb":e=mn(0,ln.Narrow,_i.Standalone,!0);break;case"B":case"BB":case"BBB":e=mn(0,ln.Abbreviated,_i.Format,!0);break;case"BBBB":e=mn(0,ln.Wide,_i.Format,!0);break;case"BBBBB":e=mn(0,ln.Narrow,_i.Format,!0);break;case"h":e=qn(3,1,-12);break;case"hh":e=qn(3,2,-12);break;case"H":e=qn(3,1);break;case"HH":e=qn(3,2);break;case"m":e=qn(4,1);break;case"mm":e=qn(4,2);break;case"s":e=qn(5,1);break;case"ss":e=qn(5,2);break;case"S":e=qn(6,1);break;case"SS":e=qn(6,2);break;case"SSS":e=qn(6,3);break;case"Z":case"ZZ":case"ZZZ":e=lp(0);break;case"ZZZZZ":e=lp(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=lp(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=lp(2);break;default:return null}return Dx[n]=e,e}function iM(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Ck(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function wk(n,e,t){let r=n.getTimezoneOffset(),o=iM(e,r);return Ck(n,-1*(o-r))}function Mk(n){if(z6(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,s=1]=n.split("-").map(a=>+a);return dp(r,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(pk))return Sk(i)}let e=new Date(n);if(!z6(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function Sk(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-i,u=Number(n[6]||0),f=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,u,f),e}function z6(n){return n instanceof Date&&!isNaN(n.valueOf())}var Ek=/^(\d+)?\.((\d+)(-(\d+))?)?$/,H6=22,fp=".",zu="0",Ak=";",Tk=",",Px="#";function Dk(n,e,t,i,r,o,s=!1){let a="",u=!1;if(!isFinite(n))a=go(t,ji.Infinity);else{let f=Ok(n);s&&(f=Ik(f));let p=e.minInt,h=e.minFrac,v=e.maxFrac;if(o){let V=o.match(Ek);if(V===null)throw new Error(`${o} is not a valid digit info`);let L=V[1],U=V[3],B=V[5];L!=null&&(p=Ix(L)),U!=null&&(h=Ix(U)),B!=null?v=Ix(B):U!=null&&h>v&&(v=h)}Rk(f,h,v);let x=f.digits,w=f.integerLen,S=f.exponent,b=[];for(u=x.every(V=>!V);w<p;w++)x.unshift(0);for(;w<0;w++)x.unshift(0);w>0?b=x.splice(w,x.length):(b=x,x=[0]);let y=[];for(x.length>=e.lgSize&&y.unshift(x.splice(-e.lgSize,x.length).join(""));x.length>e.gSize;)y.unshift(x.splice(-e.gSize,x.length).join(""));x.length&&y.unshift(x.join("")),a=y.join(go(t,i)),b.length&&(a+=go(t,r)+b.join("")),S&&(a+=go(t,ji.Exponential)+"+"+S)}return n<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function rM(n,e,t){let i=K6(e,kx.Decimal),r=Pk(i,go(e,ji.MinusSign));return Dk(n,r,e,ji.Group,ji.Decimal,t)}function Pk(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(Ak),r=i[0],o=i[1],s=r.indexOf(fp)!==-1?r.split(fp):[r.substring(0,r.lastIndexOf(zu)+1),r.substring(r.lastIndexOf(zu)+1)],a=s[0],u=s[1]||"";t.posPre=a.substring(0,a.indexOf(Px));for(let p=0;p<u.length;p++){let h=u.charAt(p);h===zu?t.minFrac=t.maxFrac=p+1:h===Px?t.maxFrac=p+1:t.posSuf+=h}let f=a.split(Tk);if(t.gSize=f[1]?f[1].length:0,t.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let p=r.length-t.posPre.length-t.posSuf.length,h=o.indexOf(Px);t.negPre=o.substring(0,h).replace(/'/g,""),t.negSuf=o.slice(h+p).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function Ik(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function Ok(n){let e=Math.abs(n)+"",t=0,i,r,o,s,a;for((r=e.indexOf(fp))>-1&&(e=e.replace(fp,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===zu;o++);if(o===(a=e.length))i=[0],r=1;else{for(a--;e.charAt(a)===zu;)a--;for(r-=o,i=[],s=0;o<=a;o++,s++)i[s]=Number(e.charAt(o))}return r>H6&&(i=i.splice(0,H6-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function Rk(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(e,r),t),s=o+n.integerLen,a=i[s];if(s>0){i.splice(Math.max(n.integerLen,s));for(let h=s;h<i.length;h++)i[h]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let h=1;h<s;h++)i[h]=0}if(a>=5)if(s-1<0){for(let h=0;h>s;h--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let u=o!==0,f=e+n.integerLen,p=i.reduceRight(function(h,v,x,w){return v=v+h,w[x]=v<10?v:v-10,u&&(w[x]===0&&x>=f?w.pop():u=!1),v>=10?1:0},0);p&&(i.unshift(p),n.integerLen++)}function Ix(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var Ox=/\s+/,j6=[],Hu=(()=>{class n{_ngEl;_renderer;initialClasses=j6;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(Ox):j6}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Ox):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(Ox).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(we(Ki),we(Yo))};static \u0275dir=an({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var hp=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Yn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new hp(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),G6(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);G6(o,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(we(_s),we(ba),we(Mx))};static \u0275dir=an({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function G6(n,e){n.context.$implicit=e.item}var Tn=(()=>{class n{_viewContainer;_context=new pp;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){W6(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){W6(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(we(_s),we(ba))};static \u0275dir=an({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),pp=class{$implicit=null;ngIf=null};function W6(n,e){if(n&&!n.createEmbeddedView)throw new Ge(2020,!1)}function oM(n,e){return new Ge(2100,!1)}var kk="mediumDate",sM=new $e(""),aM=new $e(""),Vr=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,o){if(t==null||t===""||t!==t)return null;try{let s=i??this.defaultOptions?.dateFormat??kk,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return tM(t,s,o||this.locale,a)}catch(s){throw oM(n,s.message)}}static \u0275fac=function(i){return new(i||n)(we(ku,16),we(sM,24),we(aM,24))};static \u0275pipe=_x({name:"date",type:n,pure:!0})}return n})();var ju=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,i,r){if(!Nk(t))return null;r||=this._locale;try{let o=Fk(t);return rM(o,r,i)}catch(o){throw oM(n,o.message)}}static \u0275fac=function(i){return new(i||n)(we(ku,16))};static \u0275pipe=_x({name:"number",type:n,pure:!0})}return n})();function Nk(n){return!(n==null||n===""||n!==n)}function Fk(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var cn=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Nr({type:n});static \u0275inj=Rr({})}return n})();function Gu(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var Nx="browser",lM="server";function mp(n){return n===lM}var Aa=class{};var cM=(()=>{class n{static \u0275prov=Pe({token:n,providedIn:"root",factory:()=>new Fx(be($n),window)})}return n})(),Fx=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=Vk(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function Vk(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}var vp=new $e(""),Bx=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new Ge(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(De(vp),De(An))};static \u0275prov=Pe({token:n,factory:n.\u0275fac})}return n})(),Wu=class{_doc;constructor(e){this._doc=e}manager},gp="ng-app-id";function uM(n){for(let e of n)e.remove()}function dM(n,e){let t=e.createElement("style");return t.textContent=n,t}function Uk(n,e,t,i){let r=n.head?.querySelectorAll(`style[${gp}="${e}"],link[${gp}="${e}"]`);if(r)for(let o of r)o.removeAttribute(gp),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Vx(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var zx=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.isServer=mp(o),Uk(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,dM);i?.forEach(r=>this.addUsage(r,this.external,Vx))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(uM(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])uM(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,dM(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,Vx(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(gp,this.appId),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(De($n),De(Xv),De(Kv,8),De(Zl))};static \u0275prov=Pe({token:n,factory:n.\u0275fac})}return n})(),Lx={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Hx=/%COMP%/g;var hM="%COMP%",Bk=`_nghost-${hM}`,zk=`_ngcontent-${hM}`,Hk=!0,jk=new $e("",{providedIn:"root",factory:()=>Hk});function Gk(n){return zk.replace(Hx,n)}function Wk(n){return Bk.replace(Hx,n)}function pM(n,e){return e.map(t=>t.replace(Hx,n))}var jx=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,s,a,u,f=null,p=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=f,this.tracingService=p,this.platformIsServer=mp(a),this.defaultRenderer=new $u(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===uo.ShadowDom&&(i=lt(xe({},i),{encapsulation:uo.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof _p?r.applyToHost(t):r instanceof qu&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,f=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,h=this.platformIsServer,v=this.tracingService;switch(i.encapsulation){case uo.Emulated:o=new _p(u,f,i,this.appId,p,s,a,h,v);break;case uo.ShadowDom:return new Ux(u,f,t,i,s,a,this.nonce,h,v);default:o=new qu(u,f,i,p,s,a,h,v);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(De(Bx),De(zx),De(Xv),De(jk),De($n),De(Zl),De(An),De(Kv),De(Kl,8))};static \u0275prov=Pe({token:n,factory:n.\u0275fac})}return n})(),$u=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Lx[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(fM(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(fM(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Ge(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=Lx[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Lx[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(jo.DashCase|jo.Important)?e.style.setProperty(t,i,r&jo.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&jo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=_r().getGlobalEventTarget(this.doc,e),!e))throw new Ge(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function fM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ux=class extends $u{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,s,a,u,f){super(e,o,s,u,f),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=r.styles;p=pM(r.id,p);for(let v of p){let x=document.createElement("style");a&&x.setAttribute("nonce",a),x.textContent=v,this.shadowRoot.appendChild(x)}let h=r.getExternalStyles?.();if(h)for(let v of h){let x=Vx(v,o);a&&x.setAttribute("nonce",a),this.shadowRoot.appendChild(x)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qu=class extends $u{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,a,u,f){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let p=i.styles;this.styles=f?pM(f,p):p,this.styleUrls=i.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},_p=class extends qu{contentAttr;hostAttr;constructor(e,t,i,r,o,s,a,u,f){let p=r+"-"+i.id;super(e,t,i,o,s,a,u,f,p),this.contentAttr=Gk(p),this.hostAttr=Wk(p)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var xp=class n extends Fu{supportsDOMEvents=!0;static makeCurrent(){Sx(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=$k();return t==null?null:qk(t)}resetBaseElement(){Yu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Gu(document.cookie,e)}},Yu=null;function $k(){return Yu=Yu||document.head.querySelector("base"),Yu?Yu.getAttribute("href"):null}function qk(n){return new URL(n,document.baseURI).pathname}var Yk=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:n.\u0275fac})}return n})(),gM=(()=>{class n extends Wu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(De($n))};static \u0275prov=Pe({token:n,factory:n.\u0275fac})}return n})(),mM=["alt","control","meta","shift"],Xk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},_M=(()=>{class n extends Wu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_r().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),mM.forEach(f=>{let p=i.indexOf(f);p>-1&&(i.splice(p,1),s+=f+".")}),s+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=r,u.fullKey=s,u}static matchEventFullKeyCode(t,i){let r=Xk[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),mM.forEach(s=>{if(s!==r){let a=Zk[s];a(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(De($n))};static \u0275prov=Pe({token:n,factory:n.\u0275fac})}return n})();function Gx(n,e,t){return N6(xe({rootComponent:n,platformRef:t?.platformRef},Kk(e)))}function Kk(n){return{appProviders:[...nN,...n?.providers??[]],platformProviders:tN}}function Jk(){xp.makeCurrent()}function Qk(){return new co}function eN(){return Ew(document),document}var tN=[{provide:Zl,useValue:Nx},{provide:Zv,useValue:Jk,multi:!0},{provide:$n,useFactory:eN}];var nN=[{provide:Fh,useValue:"root"},{provide:co,useFactory:Qk},{provide:vp,useClass:gM,multi:!0,deps:[$n]},{provide:vp,useClass:_M,multi:!0,deps:[$n]},jx,zx,Bx,{provide:Ul,useExisting:jx},{provide:Aa,useClass:Yk},[]];var tc=class{},Xu=class{},Ms=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=t.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var bp=class{encodeKey(e){return vM(e)}encodeValue(e){return vM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function iN(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var rN=/%(\d[a-f0-9])/gi,oN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function vM(n){return encodeURIComponent(n).replace(rN,(e,t)=>oN[t]??e)}function yp(n){return`${n}`}var Ko=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new bp,e.fromString){if(e.fromObject)throw new Ge(2805,!1);this.map=iN(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(yp):[yp(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(yp(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(yp(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Cp=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function sN(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function xM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function yM(n){return typeof Blob<"u"&&n instanceof Blob}function bM(n){return typeof FormData<"u"&&n instanceof FormData}function aN(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var CM="Content-Type",wM="Accept",MM="X-Request-URL",SM="text/plain",EM="application/json",lN=`${EM}, ${SM}, */*`,ec=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let o;if(sN(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ms,this.context??=new Cp,!this.params)this.params=new Ko,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||xM(this.body)||yM(this.body)||bM(this.body)||aN(this.body)?this.body:this.body instanceof Ko?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||bM(this.body)?null:yM(this.body)?this.body.type||null:xM(this.body)?null:typeof this.body=="string"?SM:this.body instanceof Ko?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?EM:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,f=e.headers||this.headers,p=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(f=Object.keys(e.setHeaders).reduce((v,x)=>v.set(x,e.setHeaders[x]),f)),e.setParams&&(p=Object.keys(e.setParams).reduce((v,x)=>v.set(x,e.setParams[x]),p)),new n(t,i,s,{params:p,headers:f,context:h,reportProgress:u,responseType:r,withCredentials:a,transferCache:o})}},Ta=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ta||{}),nc=class{headers;status;statusText;url;ok;type;constructor(e,t=200,i="OK"){this.headers=e.headers||new Ms,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},wp=class n extends nc{constructor(e={}){super(e)}type=Ta.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Zu=class n extends nc{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Ta.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ku=class extends nc{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},cN=200,uN=204;function Wx(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var bn=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof ec)o=t;else{let u;r.headers instanceof Ms?u=r.headers:u=new Ms(r.headers);let f;r.params&&(r.params instanceof Ko?f=r.params:f=new Ko({fromObject:r.params})),o=new ec(t,i,r.body!==void 0?r.body:null,{headers:u,context:r.context,params:f,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=st(o).pipe(io(u=>this.handler.handle(u)));if(t instanceof ec||r.observe==="events")return s;let a=s.pipe(Si(u=>u instanceof Zu));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Mt(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Ge(2806,!1);return u.body}));case"blob":return a.pipe(Mt(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Ge(2807,!1);return u.body}));case"text":return a.pipe(Mt(u=>{if(u.body!==null&&typeof u.body!="string")throw new Ge(2808,!1);return u.body}));case"json":default:return a.pipe(Mt(u=>u.body))}case"response":return a;default:throw new Ge(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Ko().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Wx(r,i))}post(t,i,r={}){return this.request("POST",t,Wx(r,i))}put(t,i,r={}){return this.request("PUT",t,Wx(r,i))}static \u0275fac=function(i){return new(i||n)(De(tc))};static \u0275prov=Pe({token:n,factory:n.\u0275fac})}return n})();var dN=new $e("");function fN(n,e){return e(n)}function hN(n,e,t){return(i,r)=>Bi(t,()=>e(i,o=>n(o,r)))}var AM=new $e(""),TM=new $e(""),DM=new $e("",{providedIn:"root",factory:()=>!0});var Mp=(()=>{class n extends tc{backend;injector;chain=null;pendingTasks=be(gs);contributeToStability=be(DM);constructor(t,i){super(),this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(AM),...this.injector.get(TM,[])]));this.chain=i.reduceRight((r,o)=>hN(r,o,this.injector),fN)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(ca(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(De(Xu),De(pi))};static \u0275prov=Pe({token:n,factory:n.\u0275fac})}return n})();var pN=/^\)\]\}',?\n/,mN=RegExp(`^${MM}:`,"m");function gN(n){return"responseURL"in n&&n.responseURL?n.responseURL:mN.test(n.getAllResponseHeaders())?n.getResponseHeader(MM):null}var $x=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Ge(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?hn(i.\u0275loadImpl()):st(null)).pipe(ki(()=>new Wt(o=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((S,b)=>s.setRequestHeader(S,b.join(","))),t.headers.has(wM)||s.setRequestHeader(wM,lN),!t.headers.has(CM)){let S=t.detectContentTypeHeader();S!==null&&s.setRequestHeader(CM,S)}if(t.responseType){let S=t.responseType.toLowerCase();s.responseType=S!=="json"?S:"text"}let a=t.serializeBody(),u=null,f=()=>{if(u!==null)return u;let S=s.statusText||"OK",b=new Ms(s.getAllResponseHeaders()),y=gN(s)||t.url;return u=new wp({headers:b,status:s.status,statusText:S,url:y}),u},p=()=>{let{headers:S,status:b,statusText:y,url:V}=f(),L=null;b!==uN&&(L=typeof s.response>"u"?s.responseText:s.response),b===0&&(b=L?cN:0);let U=b>=200&&b<300;if(t.responseType==="json"&&typeof L=="string"){let B=L;L=L.replace(pN,"");try{L=L!==""?JSON.parse(L):null}catch(z){L=B,U&&(U=!1,L={error:z,text:L})}}U?(o.next(new Zu({body:L,headers:S,status:b,statusText:y,url:V||void 0})),o.complete()):o.error(new Ku({error:L,headers:S,status:b,statusText:y,url:V||void 0}))},h=S=>{let{url:b}=f(),y=new Ku({error:S,status:s.status||0,statusText:s.statusText||"Unknown Error",url:b||void 0});o.error(y)},v=!1,x=S=>{v||(o.next(f()),v=!0);let b={type:Ta.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(b.total=S.total),t.responseType==="text"&&s.responseText&&(b.partialText=s.responseText),o.next(b)},w=S=>{let b={type:Ta.UploadProgress,loaded:S.loaded};S.lengthComputable&&(b.total=S.total),o.next(b)};return s.addEventListener("load",p),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",x),a!==null&&s.upload&&s.upload.addEventListener("progress",w)),s.send(a),o.next({type:Ta.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",p),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",x),a!==null&&s.upload&&s.upload.removeEventListener("progress",w)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(De(Aa))};static \u0275prov=Pe({token:n,factory:n.\u0275fac})}return n})(),PM=new $e(""),_N="XSRF-TOKEN",vN=new $e("",{providedIn:"root",factory:()=>_N}),xN="X-XSRF-TOKEN",yN=new $e("",{providedIn:"root",factory:()=>xN}),Ju=class{},bN=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,i){this.doc=t,this.cookieName=i}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Gu(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(i){return new(i||n)(De($n),De(vN))};static \u0275prov=Pe({token:n,factory:n.\u0275fac})}return n})(),CN=/^(?:https?:)?\/\//i;function wN(n,e){if(!be(PM)||n.method==="GET"||n.method==="HEAD"||CN.test(n.url))return e(n);let t=be(Ju).getToken(),i=be(yN);return t!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,t)})),e(n)}function qx(...n){let e=[bn,$x,Mp,{provide:tc,useExisting:Mp},{provide:Xu,useFactory:()=>be(dN,{optional:!0})??be($x)},{provide:AM,useValue:wN,multi:!0},{provide:PM,useValue:!0},{provide:Ju,useClass:bN}];for(let t of n)e.push(...t.\u0275providers);return Au(e)}var IM=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(De($n))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _t="primary",dd=Symbol("RouteTitle"),Jx=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ia(n){return new Jx(n)}function UM(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function SN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_o(n[t],e[t]))return!1;return!0}function _o(n,e){let t=n?Qx(n):void 0,i=e?Qx(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!BM(n[r],e[r]))return!1;return!0}function Qx(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function BM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function zM(n){return n.length>0?n[n.length-1]:null}function Ts(n){return p_(n)?n:Sa(n)?hn(Promise.resolve(n)):st(n)}var EN={exact:jM,subset:GM},HM={exact:AN,subset:TN,ignored:()=>!0};function OM(n,e,t){return EN[t.paths](n.root,e.root,t.matrixParams)&&HM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function AN(n,e){return _o(n,e)}function jM(n,e,t){if(!Da(n.segments,e.segments)||!Ap(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!jM(n.children[i],e.children[i],t))return!1;return!0}function TN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>BM(n[t],e[t]))}function GM(n,e,t){return WM(n,e,e.segments,t)}function WM(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Da(r,t)||e.hasChildren()||!Ap(r,t,i))}else if(n.segments.length===t.length){if(!Da(n.segments,t)||!Ap(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!GM(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Da(n.segments,r)||!Ap(n.segments,r,i)||!n.children[_t]?!1:WM(n.children[_t],e,o,i)}}function Ap(n,e,t){return e.every((i,r)=>HM[t](n[r].parameters,i.parameters))}var xo=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Zt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Ia(this.queryParams),this._queryParamMap}toString(){return IN.serialize(this)}},Zt=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tp(this)}},Ss=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ia(this.parameters),this._parameterMap}toString(){return qM(this)}};function DN(n,e){return Da(n,e)&&n.every((t,i)=>_o(t.parameters,e[i].parameters))}function Da(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function PN(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===_t&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==_t&&(t=t.concat(e(r,i)))}),t}var Oa=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:()=>new Es,providedIn:"root"})}return n})(),Es=class{parse(e){let t=new ty(e);return new xo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Qu(e.root,!0)}`,i=kN(e.queryParams),r=typeof e.fragment=="string"?`#${ON(e.fragment)}`:"";return`${t}${i}${r}`}},IN=new Es;function Tp(n){return n.segments.map(e=>qM(e)).join("/")}function Qu(n,e){if(!n.hasChildren())return Tp(n);if(e){let t=n.children[_t]?Qu(n.children[_t],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==_t&&i.push(`${r}:${Qu(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=PN(n,(i,r)=>r===_t?[Qu(n.children[_t],!1)]:[`${r}:${Qu(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[_t]!=null?`${Tp(n)}/${t[0]}`:`${Tp(n)}/(${t.join("//")})`}}function $M(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sp(n){return $M(n).replace(/%3B/gi,";")}function ON(n){return encodeURI(n)}function ey(n){return $M(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dp(n){return decodeURIComponent(n)}function RM(n){return Dp(n.replace(/\+/g,"%20"))}function qM(n){return`${ey(n.path)}${RN(n.parameters)}`}function RN(n){return Object.entries(n).map(([e,t])=>`;${ey(e)}=${ey(t)}`).join("")}function kN(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Sp(t)}=${Sp(r)}`).join("&"):`${Sp(t)}=${Sp(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var NN=/^[^\/()?;#]+/;function Yx(n){let e=n.match(NN);return e?e[0]:""}var FN=/^[^\/()?;=#]+/;function LN(n){let e=n.match(FN);return e?e[0]:""}var VN=/^[^=?&#]+/;function UN(n){let e=n.match(VN);return e?e[0]:""}var BN=/^[^&#]+/;function zN(n){let e=n.match(BN);return e?e[0]:""}var ty=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[_t]=new Zt(e,t)),i}parseSegment(){let e=Yx(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ge(4009,!1);return this.capture(e),new Ss(Dp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=LN(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Yx(this.remaining);r&&(i=r,this.capture(i))}e[Dp(t)]=Dp(i)}parseQueryParam(e){let t=UN(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=zN(this.remaining);s&&(i=s,this.capture(i))}let r=RM(t),o=RM(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Yx(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ge(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=_t);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[_t]:new Zt([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ge(4011,!1)}};function YM(n){return n.segments.length>0?new Zt([],{[_t]:n}):n}function XM(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=XM(r);if(i===_t&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new Zt(n.segments,e);return HN(t)}function HN(n){if(n.numberOfChildren===1&&n.children[_t]){let e=n.children[_t];return new Zt(n.segments.concat(e.segments),e.children)}return n}function ac(n){return n instanceof xo}function ZM(n,e,t=null,i=null){let r=KM(n);return JM(r,e,t,i)}function KM(n){let e;function t(o){let s={};for(let u of o.children){let f=t(u);s[u.outlet]=f}let a=new Zt(o.url,s);return o===n&&(e=a),a}let i=t(n.root),r=YM(i);return e??r}function JM(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Xx(r,r,r,t,i);let o=jN(e);if(o.toRoot())return Xx(r,r,new Zt([],{}),t,i);let s=GN(o,r,n),a=s.processChildren?td(s.segmentGroup,s.index,o.commands):eS(s.segmentGroup,s.index,o.commands);return Xx(r,s.segmentGroup,a,t,i)}function Ip(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function id(n){return typeof n=="object"&&n!=null&&n.outlets}function Xx(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([u,f])=>{o[u]=Array.isArray(f)?f.map(p=>`${p}`):`${f}`});let s;n===e?s=t:s=QM(n,e,t);let a=YM(XM(s));return new xo(a,o,r)}function QM(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=QM(o,e,t)}),new Zt(n.segments,i)}var Op=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Ip(i[0]))throw new Ge(4003,!1);let r=i.find(id);if(r&&r!==zM(i))throw new Ge(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function jN(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Op(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,f])=>{a[u]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Op(t,e,i)}var oc=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function GN(n,e,t){if(n.isAbsolute)return new oc(e,!0,0);if(!t)return new oc(e,!1,NaN);if(t.parent===null)return new oc(t,!0,0);let i=Ip(n.commands[0])?0:1,r=t.segments.length-1+i;return WN(t,r,n.numberOfDoubleDots)}function WN(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Ge(4005,!1);r=i.segments.length}return new oc(i,!1,r-o)}function $N(n){return id(n[0])?n[0].outlets:{[_t]:n}}function eS(n,e,t){if(n??=new Zt([],{}),n.segments.length===0&&n.hasChildren())return td(n,e,t);let i=qN(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new Zt(n.segments.slice(0,i.pathIndex),{});return o.children[_t]=new Zt(n.segments.slice(i.pathIndex),n.children),td(o,0,r)}else return i.match&&r.length===0?new Zt(n.segments,{}):i.match&&!n.hasChildren()?ny(n,e,t):i.match?td(n,0,r):ny(n,e,t)}function td(n,e,t){if(t.length===0)return new Zt(n.segments,{});{let i=$N(t),r={};if(Object.keys(i).some(o=>o!==_t)&&n.children[_t]&&n.numberOfChildren===1&&n.children[_t].segments.length===0){let o=td(n.children[_t],e,t);return new Zt(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=eS(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Zt(n.segments,r)}}function qN(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],a=t[i];if(id(a))break;let u=`${a}`,f=i<t.length-1?t[i+1]:null;if(r>0&&u===void 0)break;if(u&&f&&typeof f=="object"&&f.outlets===void 0){if(!NM(u,f,s))return o;i+=2}else{if(!NM(u,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function ny(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(id(o)){let u=YN(o.outlets);return new Zt(i,u)}if(r===0&&Ip(t[0])){let u=n.segments[e];i.push(new Ss(u.path,kM(t[0]))),r++;continue}let s=id(o)?o.outlets[_t]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&Ip(a)?(i.push(new Ss(s,kM(a))),r+=2):(i.push(new Ss(s,{})),r++)}return new Zt(i,{})}function YN(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=ny(new Zt([],{}),0,i))}),e}function kM(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function NM(n,e,t){return n==t.path&&_o(e,t.parameters)}var Pp="imperative",ei=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ei||{}),tr=class{id;url;constructor(e,t){this.id=e,this.url=t}},As=class extends tr{type=ei.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Hr=class extends tr{urlAfterRedirects;type=ei.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Gi=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Gi||{}),lc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(lc||{}),vo=class extends tr{reason;code;type=ei.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yo=class extends tr{reason;code;type=ei.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},cc=class extends tr{error;target;type=ei.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},rd=class extends tr{urlAfterRedirects;state;type=ei.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rp=class extends tr{urlAfterRedirects;state;type=ei.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kp=class extends tr{urlAfterRedirects;state;shouldActivate;type=ei.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Np=class extends tr{urlAfterRedirects;state;type=ei.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fp=class extends tr{urlAfterRedirects;state;type=ei.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lp=class{route;type=ei.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Vp=class{route;type=ei.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Up=class{snapshot;type=ei.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bp=class{snapshot;type=ei.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zp=class{snapshot;type=ei.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hp=class{snapshot;type=ei.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uc=class{routerEvent;position;anchor;type=ei.Scroll;constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},od=class{},dc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function XN(n,e){return n.providers&&!n._injector&&(n._injector=Pu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function zr(n){return n.outlet||_t}function ZN(n,e){let t=n.filter(i=>zr(i)===e);return t.push(...n.filter(i=>zr(i)!==e)),t}function fd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var jp=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return fd(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ra(this.rootInjector)}},Ra=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new jp(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(De(pi))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=iy(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=iy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ry(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return ry(e,this._root).map(t=>t.value)}};function iy(n,e){if(n===e.value)return e;for(let t of e.children){let i=iy(n,t);if(i)return i}return null}function ry(n,e){if(n===e.value)return[e];for(let t of e.children){let i=ry(n,t);if(i.length)return i.unshift(e),i}return[]}var er=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function rc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var sd=class extends Gp{snapshot;constructor(e,t){super(e),this.snapshot=t,fy(this,e)}toString(){return this.snapshot.toString()}};function tS(n){let e=KN(n),t=new Qn([new Ss("",{})]),i=new Qn({}),r=new Qn({}),o=new Qn({}),s=new Qn(""),a=new jr(t,i,o,s,r,_t,n,e.root);return a.snapshot=e.root,new sd(new er(a,[]),e)}function KN(n){let e={},t={},i={},r="",o=new Pa([],e,i,r,t,_t,n,null,{});return new ad("",new er(o,[]))}var jr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Mt(f=>f[dd]))??st(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Mt(e=>Ia(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Mt(e=>Ia(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Wp(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:xe(xe({},e.params),n.params),data:xe(xe({},e.data),n.data),resolve:xe(xe(xe(xe({},n.data),e.data),r?.data),n._resolvedData)}:i={params:xe({},n.params),data:xe({},n.data),resolve:xe(xe({},n.data),n._resolvedData??{})},r&&iS(r)&&(i.resolve[dd]=r.title),i}var Pa=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[dd]}constructor(e,t,i,r,o,s,a,u,f){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ia(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ia(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ad=class extends Gp{url;constructor(e,t){super(t),this.url=e,fy(this,t)}toString(){return nS(this._root)}};function fy(n,e){e.value._routerState=n,e.children.forEach(t=>fy(n,t))}function nS(n){let e=n.children.length>0?` { ${n.children.map(nS).join(", ")} } `:"";return`${n.value}${e}`}function Zx(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_o(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),_o(e.params,t.params)||n.paramsSubject.next(t.params),SN(e.url,t.url)||n.urlSubject.next(t.url),_o(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function oy(n,e){let t=_o(n.params,e.params)&&DN(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||oy(n.parent,e.parent))}function iS(n){return typeof n.title=="string"||n.title===null}var rS=new $e(""),ka=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=_t;activateEvents=new En;deactivateEvents=new En;attachEvents=new En;detachEvents=new En;routerOutletData=vw(void 0);parentContexts=be(Ra);location=be(_s);changeDetector=be(Ea);inputBinder=be(hd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ge(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ge(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ge(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Ge(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new sy(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=an({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[$o]})}return n})(),sy=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===jr?this.route:e===Ra?this.childContexts:e===rS?this.outletData:this.parent.get(e,t)}},hd=new $e(""),hy=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=hu([i.queryParams,i.params,i.data]).pipe(ki(([o,s,a],u)=>(a=xe(xe(xe({},o),s),a),u===0?st(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let s=F6(i.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:n.\u0275fac})}return n})(),py=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Jt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&P(0,"router-outlet")},dependencies:[ka],encapsulation:2})}return n})();function my(n){let e=n.children&&n.children.map(my),t=e?lt(xe({},n),{children:e}):xe({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==_t&&(t.component=py),t}function JN(n,e,t){let i=ld(n,e._root,t?t._root:void 0);return new sd(i,e)}function ld(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=QN(n,e,t);return new er(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ld(n,a)),s}}let i=eF(e.value),r=e.children.map(o=>ld(n,o));return new er(i,r)}}function QN(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ld(n,i,r);return ld(n,i)})}function eF(n){return new jr(new Qn(n.url),new Qn(n.params),new Qn(n.queryParams),new Qn(n.fragment),new Qn(n.data),n.outlet,n.component,n)}var fc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},oS="ngNavigationCancelingError";function $p(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=ac(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=sS(!1,Gi.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function sS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[oS]=!0,t.cancellationCode=e,t}function tF(n){return aS(n)&&ac(n.url)}function aS(n){return!!n&&n[oS]}var nF=(n,e,t,i)=>Mt(r=>(new ay(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),ay=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Zx(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=rc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=rc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=rc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=rc(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Hp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Bp(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(Zx(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Zx(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},qp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},sc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function iF(n,e,t){let i=n._root,r=e?e._root:null;return ed(i,r,t,[i.value])}function rF(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function pc(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!gC(n)?n:e.get(n):i}function ed(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=rc(e);return n.children.forEach(s=>{oF(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>nd(a,t.getContext(s),r)),r}function oF(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=sF(s,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new qp(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ed(n,e,a?a.children:null,i,r):ed(n,e,t,i,r),u&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new sc(a.outlet.component,s))}else s&&nd(e,a,r),r.canActivateChecks.push(new qp(i)),o.component?ed(n,null,a?a.children:null,i,r):ed(n,null,t,i,r);return r}function sF(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Da(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Da(n.url,e.url)||!_o(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oy(n,e)||!_o(n.queryParams,e.queryParams);case"paramsChange":default:return!oy(n,e)}}function nd(n,e,t){let i=rc(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?nd(s,e.children.getContext(o),t):nd(s,null,t):nd(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new sc(e.outlet.component,r)):t.canDeactivateChecks.push(new sc(null,r)):t.canDeactivateChecks.push(new sc(null,r))}function pd(n){return typeof n=="function"}function aF(n){return typeof n=="boolean"}function lF(n){return n&&pd(n.canLoad)}function cF(n){return n&&pd(n.canActivate)}function uF(n){return n&&pd(n.canActivateChild)}function dF(n){return n&&pd(n.canDeactivate)}function fF(n){return n&&pd(n.canMatch)}function lS(n){return n instanceof No||n?.name==="EmptyError"}var Ep=Symbol("INITIAL_VALUE");function hc(){return ki(n=>hu(n.map(e=>e.pipe(Vo(1),__(Ep)))).pipe(Mt(e=>{for(let t of e)if(t!==!0){if(t===Ep)return Ep;if(t===!1||hF(t))return t}return!0}),Si(e=>e!==Ep),Vo(1)))}function hF(n){return ac(n)||n instanceof fc}function pF(n,e){return Vn(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?st(lt(xe({},t),{guardsResult:!0})):mF(s,i,r,n).pipe(Vn(a=>a&&aF(a)?gF(i,o,n,e):st(a)),Mt(a=>lt(xe({},t),{guardsResult:a})))})}function mF(n,e,t,i){return hn(n).pipe(Vn(r=>bF(r.component,r.route,t,e,i)),Uo(r=>r!==!0,!0))}function gF(n,e,t,i){return hn(e).pipe(io(r=>Sl(vF(r.route.parent,i),_F(r.route,i),yF(n,r.path,t),xF(n,r.route,t))),Uo(r=>r!==!0,!0))}function _F(n,e){return n!==null&&e&&e(new zp(n)),st(!0)}function vF(n,e){return n!==null&&e&&e(new Up(n)),st(!0)}function xF(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return st(!0);let r=i.map(o=>Qf(()=>{let s=fd(e)??t,a=pc(o,s),u=cF(a)?a.canActivate(e,n):Bi(s,()=>a(e,n));return Ts(u).pipe(Uo())}));return st(r).pipe(hc())}function yF(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>rF(s)).filter(s=>s!==null).map(s=>Qf(()=>{let a=s.guards.map(u=>{let f=fd(s.node)??t,p=pc(u,f),h=uF(p)?p.canActivateChild(i,n):Bi(f,()=>p(i,n));return Ts(h).pipe(Uo())});return st(a).pipe(hc())}));return st(o).pipe(hc())}function bF(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return st(!0);let s=o.map(a=>{let u=fd(e)??r,f=pc(a,u),p=dF(f)?f.canDeactivate(n,e,t,i):Bi(u,()=>f(n,e,t,i));return Ts(p).pipe(Uo())});return st(s).pipe(hc())}function CF(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return st(!0);let o=r.map(s=>{let a=pc(s,n),u=lF(a)?a.canLoad(e,t):Bi(n,()=>a(e,t));return Ts(u)});return st(o).pipe(hc(),cS(i))}function cS(n){return u_(Gn(e=>{if(typeof e!="boolean")throw $p(n,e)}),Mt(e=>e===!0))}function wF(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return st(!0);let o=r.map(s=>{let a=pc(s,n),u=fF(a)?a.canMatch(e,t):Bi(n,()=>a(e,t));return Ts(u)});return st(o).pipe(hc(),cS(i))}var cd=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},ud=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ic(n){return wl(new cd(n))}function MF(n){return wl(new Ge(4e3,!1))}function SF(n){return wl(sS(!1,Gi.GuardRejected))}var ly=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return st(i);if(r.numberOfChildren>1||!r.children[_t])return MF(`${e.redirectTo}`);r=r.children[_t]}}applyRedirectCommands(e,t,i,r,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:f,routeConfig:p,url:h,outlet:v,params:x,data:w,title:S}=r,b=Bi(o,()=>a({params:x,data:w,queryParams:u,fragment:f,routeConfig:p,url:h,outlet:v,title:S}));if(b instanceof xo)throw new ud(b);t=b}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new ud(s);return s}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new xo(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,i,r)}),new Zt(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Ge(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},cy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function EF(n,e,t,i,r){let o=uS(n,e,t);return o.matched?(i=XN(e,i),wF(i,e,t,r).pipe(Mt(s=>s===!0?o:xe({},cy)))):st(o)}function uS(n,e,t){if(e.path==="**")return AF(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?xe({},cy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||UM)(t,n,e);if(!r)return xe({},cy);let o={};Object.entries(r.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=r.consumed.length>0?xe(xe({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function AF(n){return{matched:!0,parameters:n.length>0?zM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function FM(n,e,t,i){return t.length>0&&PF(n,t,i)?{segmentGroup:new Zt(e,DF(i,new Zt(t,n.children))),slicedSegments:[]}:t.length===0&&IF(n,t,i)?{segmentGroup:new Zt(n.segments,TF(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Zt(n.segments,n.children),slicedSegments:t}}function TF(n,e,t,i){let r={};for(let o of t)if(Xp(n,e,o)&&!i[zr(o)]){let s=new Zt([],{});r[zr(o)]=s}return xe(xe({},i),r)}function DF(n,e){let t={};t[_t]=e;for(let i of n)if(i.path===""&&zr(i)!==_t){let r=new Zt([],{});t[zr(i)]=r}return t}function PF(n,e,t){return t.some(i=>Xp(n,e,i)&&zr(i)!==_t)}function IF(n,e,t){return t.some(i=>Xp(n,e,i))}function Xp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function OF(n,e,t){return e.length===0&&!n.children[t]}var uy=class{};function RF(n,e,t,i,r,o,s="emptyOnly"){return new dy(n,e,t,i,r,s,o).recognize()}var kF=31,dy=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ly(this.urlSerializer,this.urlTree)}noMatchError(e){return new Ge(4002,`'${e.segmentGroup}'`)}recognize(){let e=FM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Mt(({children:t,rootSnapshot:i})=>{let r=new er(i,t),o=new ad("",r),s=ZM(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Pa([],Object.freeze({}),Object.freeze(xe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),_t,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,_t,t).pipe(Mt(i=>({children:i,rootSnapshot:t})),Lo(i=>{if(i instanceof ud)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof cd?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(Mt(s=>s instanceof er?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return hn(o).pipe(io(s=>{let a=i.children[s],u=ZN(t,s);return this.processSegmentGroup(e,u,a,s,r)}),g_((s,a)=>(s.push(...a),s)),hs(null),m_(),Vn(s=>{if(s===null)return ic(i);let a=dS(s);return NF(a),st(a)}))}processSegment(e,t,i,r,o,s,a){return hn(t).pipe(io(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,i,r,o,s,a).pipe(Lo(f=>{if(f instanceof cd)return st(null);throw f}))),Uo(u=>!!u),Lo(u=>{if(lS(u))return OF(i,r,o)?st(new uy):ic(i);throw u}))}processSegmentAgainstRoute(e,t,i,r,o,s,a,u){return zr(i)!==s&&(s===_t||!Xp(r,o,i))?ic(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,u):ic(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,a){let{matched:u,parameters:f,consumedSegments:p,positionalParamSegments:h,remainingSegments:v}=uS(t,r,o);if(!u)return ic(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kF&&(this.allowRedirects=!1));let x=new Pa(o,f,Object.freeze(xe({},this.urlTree.queryParams)),this.urlTree.fragment,LM(r),zr(r),r.component??r._loadedComponent??null,r,VM(r)),w=Wp(x,a,this.paramsInheritanceStrategy);x.params=Object.freeze(w.params),x.data=Object.freeze(w.data);let S=this.applyRedirects.applyRedirectCommands(p,r.redirectTo,h,x,e);return this.applyRedirects.lineralizeSegments(r,S).pipe(Vn(b=>this.processSegment(e,i,t,b.concat(v),s,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a=EF(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(ki(u=>u.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(ki(({routes:f})=>{let p=i._loadedInjector??e,{parameters:h,consumedSegments:v,remainingSegments:x}=u,w=new Pa(v,h,Object.freeze(xe({},this.urlTree.queryParams)),this.urlTree.fragment,LM(i),zr(i),i.component??i._loadedComponent??null,i,VM(i)),S=Wp(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(S.params),w.data=Object.freeze(S.data);let{segmentGroup:b,slicedSegments:y}=FM(t,v,x,f);if(y.length===0&&b.hasChildren())return this.processChildren(p,f,b,w).pipe(Mt(L=>new er(w,L)));if(f.length===0&&y.length===0)return st(new er(w,[]));let V=zr(i)===o;return this.processSegment(p,f,b,y,V?_t:o,!0,w).pipe(Mt(L=>new er(w,L instanceof er?[L]:[])))}))):ic(t)))}getChildConfig(e,t,i){return t.children?st({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?st({routes:t._loadedRoutes,injector:t._loadedInjector}):CF(e,t,i,this.urlSerializer).pipe(Vn(r=>r?this.configLoader.loadChildren(e,t).pipe(Gn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):SF(t))):st({routes:[],injector:e})}};function NF(n){n.sort((e,t)=>e.value.outlet===_t?-1:t.value.outlet===_t?1:e.value.outlet.localeCompare(t.value.outlet))}function FF(n){let e=n.value.routeConfig;return e&&e.path===""}function dS(n){let e=[],t=new Set;for(let i of n){if(!FF(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=dS(i.children);e.push(new er(i.value,r))}return e.filter(i=>!t.has(i))}function LM(n){return n.data||{}}function VM(n){return n.resolve||{}}function LF(n,e,t,i,r,o){return Vn(s=>RF(n,e,t,i,s.extractedUrl,r,o).pipe(Mt(({state:a,tree:u})=>lt(xe({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function VF(n,e){return Vn(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return st(t);let o=new Set(r.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let f of fS(u))s.add(f);let a=0;return hn(s).pipe(io(u=>o.has(u)?UF(u,i,n,e):(u.data=Wp(u,u.parent,n).resolve,st(void 0))),Gn(()=>a++),El(1),Vn(u=>a===s.size?st(t):Oi))})}function fS(n){let e=n.children.map(t=>fS(t)).flat();return[n,...e]}function UF(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!iS(r)&&(o[dd]=r.title),BF(o,n,e,i).pipe(Mt(s=>(n._resolvedData=s,n.data=Wp(n,n.parent,t).resolve,null)))}function BF(n,e,t,i){let r=Qx(n);if(r.length===0)return st({});let o={};return hn(r).pipe(Vn(s=>zF(n[s],e,t,i).pipe(Uo(),Gn(a=>{if(a instanceof fc)throw $p(new Es,a);o[s]=a}))),El(1),Mt(()=>o),Lo(s=>lS(s)?Oi:wl(s)))}function zF(n,e,t,i){let r=fd(e)??i,o=pc(n,r),s=o.resolve?o.resolve(e,t):Bi(r,()=>o(e,t));return Ts(s)}function Kx(n){return ki(e=>{let t=n(e);return t?hn(t).pipe(Mt(()=>e)):st(e)})}var gy=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===_t);return i}getResolvedTitleForRoute(t){return t.data[dd]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:()=>be(hS),providedIn:"root"})}return n})(),hS=(()=>{class n extends gy{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(De(IM))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Na=new $e("",{providedIn:"root",factory:()=>({})}),Fa=new $e(""),Zp=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=be(k6);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return st(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Ts(t.loadComponent()).pipe(Mt(mS),Gn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ca(()=>{this.componentLoaders.delete(t)})),r=new Cl(i,()=>new Hn).pipe(bl());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return st({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=pS(i,this.compiler,t,this.onLoadEndListener).pipe(ca(()=>{this.childrenLoaders.delete(i)})),s=new Cl(o,()=>new Hn).pipe(bl());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pS(n,e,t,i){return Ts(n.loadChildren()).pipe(Mt(mS),Vn(r=>r instanceof gx||Array.isArray(r)?st(r):hn(e.compileModuleAsync(r))),Mt(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(t).injector,s=o.get(Fa,[],{optional:!0,self:!0}).flat()),{routes:s.map(my),injector:o}}))}function HF(n){return n&&typeof n=="object"&&"default"in n}function mS(n){return HF(n)?n.default:n}var Kp=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:()=>be(jF),providedIn:"root"})}return n})(),jF=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_y=new $e(""),vy=new $e("");function gS(n,e,t){let i=n.get(vy),r=n.get($n);return n.get(An).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,s=new Promise(f=>{o=f}),a=r.startViewTransition(()=>(o(),GF(n))),{onViewTransitionCreated:u}=i;return u&&Bi(n,()=>u({transition:a,from:e,to:t})),s})}function GF(n){return new Promise(e=>{Qv({read:()=>setTimeout(e)},{injector:n})})}var xy=new $e(""),Jp=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Hn;transitionAbortSubject=new Hn;configLoader=be(Zp);environmentInjector=be(pi);destroyRef=be($l);urlSerializer=be(Oa);rootContexts=be(Ra);location=be(ws);inputBindingEnabled=be(hd,{optional:!0})!==null;titleStrategy=be(gy);options=be(Na,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=be(Kp);createViewTransition=be(_y,{optional:!0});navigationErrorHandler=be(xy,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>st(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new Lp(r)),i=r=>this.events.next(new Vp(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(lt(xe({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(t){return this.transitions=new Qn(null),this.transitions.pipe(Si(i=>i!==null),ki(i=>{let r=!1,o=!1;return st(i).pipe(ki(s=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Gi.SupersededByNewNavigation),Oi;this.currentTransition=i,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?lt(xe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&u!=="reload"){let f="";return this.events.next(new yo(s.id,this.urlSerializer.serialize(s.rawUrl),f,lc.IgnoredSameUrlNavigation)),s.resolve(!1),Oi}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return st(s).pipe(ki(f=>(this.events.next(new As(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),f.id!==this.navigationId?Oi:Promise.resolve(f))),LF(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Gn(f=>{i.targetSnapshot=f.targetSnapshot,i.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=lt(xe({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let p=new rd(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:f,extractedUrl:p,source:h,restoredState:v,extras:x}=s,w=new As(f,this.urlSerializer.serialize(p),h,v);this.events.next(w);let S=tS(this.rootComponentType).snapshot;return this.currentTransition=i=lt(xe({},s),{targetSnapshot:S,urlAfterRedirects:p,extras:lt(xe({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,st(i)}else{let f="";return this.events.next(new yo(s.id,this.urlSerializer.serialize(s.extractedUrl),f,lc.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Oi}}),Gn(s=>{let a=new Rp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Mt(s=>(this.currentTransition=i=lt(xe({},s),{guards:iF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),i)),pF(this.environmentInjector,s=>this.events.next(s)),Gn(s=>{if(i.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw $p(this.urlSerializer,s.guardsResult);let a=new kp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Si(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Gi.GuardRejected),!1)),Kx(s=>{if(s.guards.canActivateChecks.length!==0)return st(s).pipe(Gn(a=>{let u=new Np(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),ki(a=>{let u=!1;return st(a).pipe(VF(this.paramsInheritanceStrategy,this.environmentInjector),Gn({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Gi.NoDataFromResolver)}}))}),Gn(a=>{let u=new Fp(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Kx(s=>{let a=u=>{let f=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(u.routeConfig).pipe(Gn(p=>{u.component=p}),Mt(()=>{})));for(let p of u.children)f.push(...a(p));return f};return hu(a(s.targetSnapshot.root)).pipe(hs(null),Vo(1))}),Kx(()=>this.afterPreactivation()),ki(()=>{let{currentSnapshot:s,targetSnapshot:a}=i,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?hn(u).pipe(Mt(()=>i)):st(i)}),Mt(s=>{let a=JN(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=i=lt(xe({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),Gn(()=>{this.events.next(new od)}),nF(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Vo(1),Gn({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Hr(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),v_(this.transitionAbortSubject.pipe(Gn(s=>{throw s}))),ca(()=>{!r&&!o&&this.cancelNavigationTransition(i,"",Gi.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Lo(s=>{if(this.destroyed)return i.resolve(!1),Oi;if(o=!0,aS(s))this.events.next(new vo(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode)),tF(s)?this.events.next(new dc(s.url,s.navigationBehaviorOptions)):i.resolve(!1);else{let a=new cc(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);try{let u=Bi(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof fc){let{message:f,cancellationCode:p}=$p(this.urlSerializer,u);this.events.next(new vo(i.id,this.urlSerializer.serialize(i.extractedUrl),f,p)),this.events.next(new dc(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(u)}}return Oi}))}))}cancelNavigationTransition(t,i,r){let o=new vo(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function WF(n){return n!==Pp}var _S=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:()=>be($F),providedIn:"root"})}return n})(),Yp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},$F=(()=>{class n extends Yp{static \u0275fac=(()=>{let t;return function(r){return(t||(t=mr(n)))(r||n)}})();static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vS=(()=>{class n{urlSerializer=be(Oa);options=be(Na,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=be(ws);urlHandlingStrategy=be(Kp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new xo;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,s=r??o;return s instanceof xo?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=tS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:()=>be(qF),providedIn:"root"})}return n})(),qF=(()=>{class n extends vS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof As?this.updateStateMemento():t instanceof yo?this.commitTransition(i):t instanceof rd?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof od?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof vo&&(t.code===Gi.GuardRejected||t.code===Gi.NoDataFromResolver)?this.restoreHistory(i):t instanceof cc?this.restoreHistory(i,!0):t instanceof Hr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=xe(xe({},s),this.generateNgRouterState(r,a));this.location.replaceState(t,"",u)}else{let a=xe(xe({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=mr(n)))(r||n)}})();static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qp(n,e){n.events.pipe(Si(t=>t instanceof Hr||t instanceof vo||t instanceof cc||t instanceof yo),Mt(t=>t instanceof Hr||t instanceof yo?0:(t instanceof vo?t.code===Gi.Redirect||t.code===Gi.SupersededByNewNavigation:!1)?2:1),Si(t=>t!==2),Vo(1)).subscribe(()=>{e()})}var YF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ti=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=be(p6);stateManager=be(vS);options=be(Na,{optional:!0})||{};pendingTasks=be(gs);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=be(Jp);urlSerializer=be(Oa);location=be(ws);urlHandlingStrategy=be(Kp);_events=new Hn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=be(_S);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=be(Fa,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!be(hd,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new zn;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof vo&&i.code!==Gi.Redirect&&i.code!==Gi.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Hr)this.navigated=!0;else if(i instanceof dc){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u=xe({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||WF(r.source)},s);this.scheduleNavigation(a,Pp,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}KF(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pp,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let u=xe({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(my),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=i,f=u?this.currentUrlTree.fragment:s,p=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":p=xe(xe({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let h;try{let v=r?r.snapshot:this.routerState.snapshot.root;h=KM(v)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return JM(h,t,p,f??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=ac(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Pp,null,i)}navigate(t,i={skipLocationChange:!1}){return ZF(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=xe({},YF):i===!1?r=xe({},XF):r=i,ac(t))return OM(this.currentUrlTree,t,r);let o=this.parseUrl(t);return OM(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,f;s?(a=s.resolve,u=s.reject,f=s.promise):f=new Promise((h,v)=>{a=h,u=v});let p=this.pendingTasks.add();return Qp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(h=>Promise.reject(h))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZF(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Ge(4008,!1)}function KF(n){return!(n instanceof od)&&!(n instanceof dc)}var md=class{};var xS=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,i,r,o){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Si(t=>t instanceof Hr),io(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Pu(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return hn(r).pipe(Ml())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=st(null);let o=r.pipe(Vn(s=>s===null?st(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return hn([o,s]).pipe(Ml())}else return o})}static \u0275fac=function(i){return new(i||n)(De(ti),De(pi),De(md),De(Zp))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yS=new $e(""),JF=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof As?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof yo&&t.code===lc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof uc&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new uc(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){r6()};static \u0275prov=Pe({token:n,factory:n.\u0275fac})}return n})();function by(n,...e){return Au([{provide:Fa,multi:!0,useValue:n},[],{provide:jr,useFactory:bS,deps:[ti]},{provide:ep,multi:!0,useFactory:CS},e.map(t=>t.\u0275providers)])}function bS(n){return n.routerState.root}function gd(n,e){return{\u0275kind:n,\u0275providers:e}}function CS(){let n=be(pr);return e=>{let t=n.get(Ca);if(e!==t.components[0])return;let i=n.get(ti),r=n.get(wS);n.get(Cy)===1&&i.initialNavigation(),n.get(ES,null,wt.Optional)?.setUpPreloading(),n.get(yS,null,wt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var wS=new $e("",{factory:()=>new Hn}),Cy=new $e("",{providedIn:"root",factory:()=>1});function MS(){let n=[{provide:Cy,useValue:0},yx(()=>{let e=be(pr);return e.get(Ex,Promise.resolve()).then(()=>new Promise(i=>{let r=e.get(ti),o=e.get(wS);Qp(r,()=>{i(!0)}),e.get(Jp).afterPreactivation=()=>(i(!0),o.closed?st(void 0):o),r.initialNavigation()}))})];return gd(2,n)}function SS(){let n=[yx(()=>{be(ti).setUpLocationChangeListener()}),{provide:Cy,useValue:2}];return gd(3,n)}var ES=new $e("");function AS(n){return gd(0,[{provide:ES,useExisting:xS},{provide:md,useExisting:n}])}function TS(){return gd(8,[hy,{provide:hd,useExisting:hy}])}function DS(n){Du("NgRouterViewTransitions");let e=[{provide:_y,useValue:gS},{provide:vy,useValue:xe({skipNextTransition:!!n?.skipInitialTransition},n)}];return gd(9,e)}var PS=[ws,{provide:Oa,useClass:Es},ti,Ra,{provide:jr,useFactory:bS,deps:[ti]},Zp,[]],_d=(()=>{class n{constructor(){}static forRoot(t,i){return{ngModule:n,providers:[PS,[],{provide:Fa,multi:!0,useValue:t},[],i?.errorHandler?{provide:xy,useValue:i.errorHandler}:[],{provide:Na,useValue:i||{}},i?.useHash?eL():tL(),QF(),i?.preloadingStrategy?AS(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?nL(i):[],i?.bindToComponentInputs?TS().\u0275providers:[],i?.enableViewTransitions?DS().\u0275providers:[],iL()]}}static forChild(t){return{ngModule:n,providers:[{provide:Fa,multi:!0,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Nr({type:n});static \u0275inj=Rr({})}return n})();function QF(){return{provide:yS,useFactory:()=>{let n=be(cM),e=be(An),t=be(Na),i=be(Jp),r=be(Oa);return t.scrollOffset&&n.setOffset(t.scrollOffset),new JF(r,i,n,e,t)}}}function eL(){return{provide:Xo,useClass:Rx}}function tL(){return{provide:Xo,useClass:op}}function nL(n){return[n.initialNavigation==="disabled"?SS().\u0275providers:[],n.initialNavigation==="enabledBlocking"?MS().\u0275providers:[]]}var yy=new $e("");function iL(){return[{provide:yy,useFactory:CS},{provide:ep,multi:!0,useExisting:yy}]}var BS=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(we(Yo),we(Ki))};static \u0275dir=an({type:n})}return n})(),Md=(()=>{class n extends BS{static \u0275fac=(()=>{let t;return function(r){return(t||(t=mr(n)))(r||n)}})();static \u0275dir=an({type:n,features:[ci]})}return n})(),Ua=new $e(""),oL={provide:Ua,useExisting:Ai(()=>Ba),multi:!0},Ba=(()=>{class n extends Md{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=mr(n)))(r||n)}})();static \u0275dir=an({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&O("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Qi([oL]),ci]})}return n})(),sL={provide:Ua,useExisting:Ai(()=>Rn),multi:!0};function aL(){let n=_r()?_r().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var lL=new $e(""),Rn=(()=>{class n extends BS{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!aL())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(we(Yo),we(Ki),we(lL,8))};static \u0275dir=an({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&O("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[Qi([sL]),ci]})}return n})();function Ey(n){return n==null||Ay(n)===0}function Ay(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var za=new $e(""),d0=new $e(""),cL=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,bo=class{static min(e){return zS(e)}static max(e){return HS(e)}static required(e){return jS(e)}static requiredTrue(e){return uL(e)}static email(e){return dL(e)}static minLength(e){return fL(e)}static maxLength(e){return hL(e)}static pattern(e){return pL(e)}static nullValidator(e){return t0()}static compose(e){return XS(e)}static composeAsync(e){return ZS(e)}};function zS(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function HS(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function jS(n){return Ey(n.value)?{required:!0}:null}function uL(n){return n.value===!0?null:{required:!0}}function dL(n){return Ey(n.value)||cL.test(n.value)?null:{email:!0}}function fL(n){return e=>{let t=e.value?.length??Ay(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function hL(n){return e=>{let t=e.value?.length??Ay(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function pL(n){if(!n)return t0;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Ey(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function t0(n){return null}function GS(n){return n!=null}function WS(n){return Sa(n)?hn(n):n}function $S(n){let e={};return n.forEach(t=>{e=t!=null?xe(xe({},e),t):e}),Object.keys(e).length===0?null:e}function qS(n,e){return e.map(t=>t(n))}function mL(n){return!n.validate}function YS(n){return n.map(e=>mL(e)?e:t=>e.validate(t))}function XS(n){if(!n)return null;let e=n.filter(GS);return e.length==0?null:function(t){return $S(qS(t,e))}}function Ty(n){return n!=null?XS(YS(n)):null}function ZS(n){if(!n)return null;let e=n.filter(GS);return e.length==0?null:function(t){let i=qS(t,e).map(WS);return Fo(i).pipe(Mt($S))}}function Dy(n){return n!=null?ZS(YS(n)):null}function IS(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function KS(n){return n._rawValidators}function JS(n){return n._rawAsyncValidators}function wy(n){return n?Array.isArray(n)?n:[n]:[]}function n0(n,e){return Array.isArray(n)?n.includes(e):n===e}function OS(n,e){let t=wy(e);return wy(n).forEach(r=>{n0(t,r)||t.push(r)}),t}function RS(n,e){return wy(e).filter(t=>!n0(n,t))}var i0=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ty(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Dy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Jo=class extends i0{name;get formDirective(){return null}get path(){return null}},Va=class extends i0{_parent=null;name=null;valueAccessor=null},r0=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},gL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},zQ=lt(xe({},gL),{"[class.ng-submitted]":"isSubmitted"}),Xn=(()=>{class n extends r0{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(we(Va,2))};static \u0275dir=an({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Ue("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[ci]})}return n})(),xr=(()=>{class n extends r0{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(we(Jo,10))};static \u0275dir=an({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Ue("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[ci]})}return n})();var vd="VALID",e0="INVALID",mc="PENDING",xd="DISABLED",Ds=class{},o0=class extends Ds{value;source;constructor(e,t){super(),this.value=e,this.source=t}},bd=class extends Ds{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Cd=class extends Ds{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},gc=class extends Ds{status;source;constructor(e,t){super(),this.status=e,this.source=t}},s0=class extends Ds{source;constructor(e){super(),this.source=e}},a0=class extends Ds{source;constructor(e){super(),this.source=e}};function Py(n){return(f0(n)?n.validators:n)||null}function _L(n){return Array.isArray(n)?Ty(n):n||null}function Iy(n,e){return(f0(e)?e.asyncValidators:n)||null}function vL(n){return Array.isArray(n)?Dy(n):n||null}function f0(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function QS(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Ge(1e3,"");if(!i[t])throw new Ge(1001,"")}function eE(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Ge(1002,"")})}var _c=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return mo(this.statusReactive)}set status(e){mo(()=>this.statusReactive.set(e))}_status=Ql(()=>this.statusReactive());statusReactive=Yl(void 0);get valid(){return this.status===vd}get invalid(){return this.status===e0}get pending(){return this.status==mc}get disabled(){return this.status===xd}get enabled(){return this.status!==xd}errors;get pristine(){return mo(this.pristineReactive)}set pristine(e){mo(()=>this.pristineReactive.set(e))}_pristine=Ql(()=>this.pristineReactive());pristineReactive=Yl(!0);get dirty(){return!this.pristine}get touched(){return mo(this.touchedReactive)}set touched(e){mo(()=>this.touchedReactive.set(e))}_touched=Ql(()=>this.touchedReactive());touchedReactive=Yl(!1);get untouched(){return!this.touched}_events=new Hn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(OS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(OS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(RS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(RS(e,this._rawAsyncValidators))}hasValidator(e){return n0(this._rawValidators,e)}hasAsyncValidator(e){return n0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(lt(xe({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Cd(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Cd(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(lt(xe({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new bd(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new bd(!0,i))}markAsPending(e={}){this.status=mc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(lt(xe({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xd,this.errors=null,this._forEachChild(r=>{r.disable(lt(xe({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new o0(this.value,i)),this._events.next(new gc(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(lt(xe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=vd,this._forEachChild(i=>{i.enable(lt(xe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(lt(xe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vd||this.status===mc)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new o0(this.value,t)),this._events.next(new gc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(lt(xe({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xd:vd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=mc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=WS(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new gc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new En,this.statusChanges=new En}_calculateStatus(){return this._allControlsDisabled()?xd:this.errors?e0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mc)?mc:this._anyControlsHaveStatus(e0)?e0:vd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new bd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Cd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){f0(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=_L(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=vL(this._rawAsyncValidators)}},Ps=class extends _c{constructor(e,t,i){super(Py(t),Iy(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){eE(this,!0,e),Object.keys(e).forEach(i=>{QS(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var My=class extends Ps{};var Sd=new $e("",{providedIn:"root",factory:()=>h0}),h0="always";function tE(n,e){return[...e.path,n]}function l0(n,e,t=h0){Oy(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),yL(n,e),CL(n,e),bL(n,e),xL(n,e)}function kS(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),u0(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function c0(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function xL(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Oy(n,e){let t=KS(n);e.validator!==null?n.setValidators(IS(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=JS(n);e.asyncValidator!==null?n.setAsyncValidators(IS(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();c0(e._rawValidators,r),c0(e._rawAsyncValidators,r)}function u0(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=KS(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let r=JS(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}let i=()=>{};return c0(e._rawValidators,i),c0(e._rawAsyncValidators,i),t}function yL(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&nE(n,e)})}function bL(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&nE(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function nE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function CL(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function iE(n,e){n==null,Oy(n,e)}function wL(n,e){return u0(n,e)}function rE(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function ML(n){return Object.getPrototypeOf(n.constructor)===Md}function oE(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function sE(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===Rn?t=o:ML(o)?i=o:r=o}),r||i||t||null}function SL(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var EL={provide:Jo,useExisting:Ai(()=>Gr)},yd=Promise.resolve(),Gr=(()=>{class n extends Jo{callSetDisabledState;get submitted(){return mo(this.submittedReactive)}_submitted=Ql(()=>this.submittedReactive());submittedReactive=Yl(!1);_directives=new Set;form;ngSubmit=new En;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new Ps({},Ty(t),Dy(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){yd.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),l0(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){yd.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){yd.then(()=>{let i=this._findContainer(t.path),r=new Ps({});iE(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){yd.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){yd.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),oE(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new s0(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new a0(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(we(za,10),we(d0,10),we(Sd,8))};static \u0275dir=an({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&O("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Qi([EL]),ci]})}return n})();function NS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function FS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var wd=class extends _c{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(Py(t),Iy(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),f0(t)&&(t.nonNullable||t.initialValueIsDefault)&&(FS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){NS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){NS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){FS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var AL=n=>n instanceof wd;var TL={provide:Va,useExisting:Ai(()=>Bn)},LS=Promise.resolve(),Bn=(()=>{class n extends Va{_changeDetectorRef;callSetDisabledState;control=new wd;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new En;constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=sE(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),rE(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){l0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){LS.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Nu(i);LS.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?tE(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(we(Jo,9),we(za,10),we(d0,10),we(Ua,10),we(Ea,8),we(Sd,8))};static \u0275dir=an({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Qi([TL]),ci,$o]})}return n})();var yr=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=an({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),DL={provide:Ua,useExisting:Ai(()=>Wr),multi:!0},Wr=(()=>{class n extends Md{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=mr(n)))(r||n)}})();static \u0275dir=an({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&O("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Qi([DL]),ci]})}return n})();var aE=new $e("");var PL={provide:Jo,useExisting:Ai(()=>Ry)},Ry=(()=>{class n extends Jo{callSetDisabledState;get submitted(){return mo(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Ql(()=>this._submittedReactive());_submittedReactive=Yl(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new En;constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(u0(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return l0(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){kS(t.control||null,t,!1),SL(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),oE(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new s0(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new a0(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(kS(i||null,t),AL(r)&&(l0(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);iE(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&wL(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Oy(this.form,this),this._oldForm&&u0(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(we(za,10),we(d0,10),we(Sd,8))};static \u0275dir=an({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&O("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Qi([PL]),ci,$o]})}return n})();var IL={provide:Va,useExisting:Ai(()=>ky)},ky=(()=>{class n extends Va{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new En;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=sE(this,o)}ngOnChanges(t){this._added||this._setUpControl(),rE(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return tE(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(we(Jo,13),we(za,10),we(d0,10),we(Ua,10),we(aE,8))};static \u0275dir=an({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Qi([IL]),ci,$o]})}return n})();var OL={provide:Ua,useExisting:Ai(()=>si),multi:!0};function lE(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function RL(n){return n.split(":")[0]}var si=(()=>{class n extends Md{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i=this._getOptionId(t),r=lE(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=RL(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=mr(n)))(r||n)}})();static \u0275dir=an({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&O("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Qi([OL]),ci]})}return n})(),vi=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(lE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(we(Ki),we(Yo),we(si,9))};static \u0275dir=an({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),kL={provide:Ua,useExisting:Ai(()=>cE),multi:!0};function VS(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function NL(n){return n.split(":")[0]}var cE=(()=>{class n extends Md{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],f=this._getOptionValue(u.value);r.push(f)}}else{let s=i.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let f=this._getOptionValue(u.value);r.push(f)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=NL(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=mr(n)))(r||n)}})();static \u0275dir=an({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&O("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Qi([kL]),ci]})}return n})(),xi=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(VS(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(VS(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(we(Ki),we(Yo),we(cE,9))};static \u0275dir=an({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function uE(n){return typeof n=="number"?n:parseFloat(n)}var Ny=(()=>{class n{_validator=t0;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):t0,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=an({type:n,features:[$o]})}return n})(),FL={provide:za,useExisting:Ai(()=>Fy),multi:!0},Fy=(()=>{class n extends Ny{max;inputName="max";normalizeInput=t=>uE(t);createValidator=t=>HS(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=mr(n)))(r||n)}})();static \u0275dir=an({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Jl("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[Qi([FL]),ci]})}return n})(),LL={provide:za,useExisting:Ai(()=>Qo),multi:!0},Qo=(()=>{class n extends Ny{min;inputName="min";normalizeInput=t=>uE(t);createValidator=t=>zS(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=mr(n)))(r||n)}})();static \u0275dir=an({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Jl("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[Qi([LL]),ci]})}return n})(),VL={provide:za,useExisting:Ai(()=>$r),multi:!0};var $r=(()=>{class n extends Ny{required;inputName="required";normalizeInput=Nu;createValidator=t=>jS;enabled(t){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=mr(n)))(r||n)}})();static \u0275dir=an({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Jl("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Qi([VL]),ci]})}return n})();var dE=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Nr({type:n});static \u0275inj=Rr({})}return n})(),Sy=class extends _c{constructor(e,t,i){super(Py(t),Iy(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){eE(this,!1,e),e.forEach((i,r)=>{QS(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function US(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var fE=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),o={};return US(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Ps(r,o)}record(t,i=null){let r=this._reduceControls(t);return new My(r,i)}control(t,i,r){let o={};return this.useNonNullable?(US(i)?o=i:(o.validators=i,o.asyncValidators=r),new wd(t,lt(xe({},o),{nonNullable:!0}))):new wd(t,i,r)}array(t,i,r){let o=t.map(s=>this._createControl(s));return new Sy(o,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof wd)return t;if(t instanceof _c)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(i,r,o)}else return this.control(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Zn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Sd,useValue:t.callSetDisabledState??h0}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Nr({type:n});static \u0275inj=Rr({imports:[dE]})}return n})(),hE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:aE,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Sd,useValue:t.callSetDisabledState??h0}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Nr({type:n});static \u0275inj=Rr({imports:[dE]})}return n})();var gn=class n{constructor(e,t){this.http=e;this.router=t;this.loadUserFromStorage()}apiUrl="/api";currentUserSubject=new Qn(null);currentUser$=this.currentUserSubject.asObservable();loadUserFromStorage(){let e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&t&&this.currentUserSubject.next(JSON.parse(t))}login(e,t){return this.http.post(`${this.apiUrl}/auth/login`,{username:e,password:t}).pipe(Gn(i=>{i.token&&(localStorage.setItem("token",i.token),localStorage.setItem("user",JSON.stringify(i.user)),this.currentUserSubject.next(i.user))}))}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.currentUserSubject.next(null),this.router.navigate(["/login"])}getToken(){return localStorage.getItem("token")}getCurrentUser(){return this.currentUserSubject.value}isAuthenticated(){return!!this.getToken()}getAuthHeaders(){return{Authorization:`Bearer ${this.getToken()}`,"Content-Type":"application/json"}}static \u0275fac=function(t){return new(t||n)(De(bn),De(ti))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})};var p0=class n{constructor(e,t){this.http=e;this.authService=t}apiUrl="/api/count";getClassesNumber(){return this.http.get(`${this.apiUrl}/classes`,{headers:this.authService.getAuthHeaders()})}getStudentsNumber(){return this.http.get(`${this.apiUrl}/students`,{headers:this.authService.getAuthHeaders()})}getTeachersNumber(){return this.http.get(`${this.apiUrl}/teachers`,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(t){return new(t||n)(De(bn),De(gn))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})};var m0=class n{constructor(e){this.countService=e}studentCount=0;teacherCount=0;lessonCount=0;userName="\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645";userRole="\u0627\u0644\u062F\u0648\u0631";userAvatar="https://ui-avatars.com/api/?name=User&background=random";notificationCount=3;searchTerm;ngOnInit(){this.loadStats(),this.loadUserData()}loadStats(){Fo({students:this.countService.getStudentsNumber(),teachers:this.countService.getTeachersNumber(),classes:this.countService.getClassesNumber()}).subscribe(e=>{this.studentCount=e.students.count,this.teacherCount=e.teachers.count,this.lessonCount=e.classes.count})}loadUserData(){setTimeout(()=>{this.userName="\u064A\u0627\u0633\u0631 \u062E\u064A\u0634\u0647",this.userRole="\u0645\u062F\u064A\u0631 \u0627\u0644\u0646\u0638\u0627\u0645",this.userAvatar="https://ui-avatars.com/api/?name=\u0623\u062D\u0645\u062F+\u0645\u062D\u0645\u062F&background=0D8ABC&color=fff"},800)}static \u0275fac=function(t){return new(t||n)(we(p0))};static \u0275cmp=Jt({type:n,selectors:[["app-header"]],decls:28,vars:7,consts:[[1,"glass-header"],[1,"stats-container"],[1,"stat-item"],[1,"bi","bi-people"],[1,"bi","bi-person-video3"],[1,"bi","bi-journal-bookmark"],[1,"search-container",2,"position","relative","width","200px","height","40px","margin-right","10px","margin-left","10px","margin-top","10px","margin-bottom","10px"],["type","text","placeholder","\u0627\u0628\u062D\u062B",2,"width","100%","height","100%","padding-left","35px","border-radius","20px","border","1px solid #ccc","outline","none",3,"ngModelChange","ngModel"],[1,"bi","bi-search",2,"display","inline-block","position","absolute","top","50%","left","10px","transform","translateY(-50%)","color","#999"],[1,"logo"],[1,"bi","bi-people-fill"],[1,"user-actions"],[1,"notification-badge"],[1,"bi","bi-bell"],[1,"dot"],[1,"profile-pill"],["alt","Avatar",3,"src"]],template:function(t,i){t&1&&(l(0,"header",0)(1,"div",1)(2,"div",2),P(3,"i",3),l(4,"span"),d(5),c()(),l(6,"div",2),P(7,"i",4),l(8,"span"),d(9),c()(),l(10,"div",2),P(11,"i",5),l(12,"span"),d(13),c()()(),l(14,"div",6)(15,"input",7),fe("ngModelChange",function(o){return he(i.searchTerm,o)||(i.searchTerm=o),o}),c(),P(16,"i",8),c(),l(17,"div",9),P(18,"i",10),c(),l(19,"div",11)(20,"div",12),P(21,"i",13),l(22,"span",14),d(23),c()(),l(24,"div",15)(25,"span"),d(26),c(),P(27,"img",16),c()()()),t&2&&(g(5),K("",i.studentCount," \u0637\u0627\u0644\u0628"),g(4),K("",i.teacherCount," \u0623\u0633\u062A\u0627\u0630"),g(4),K("",i.lessonCount," \u062D\u0635\u0629"),g(2),de("ngModel",i.searchTerm),g(8),te(i.notificationCount),g(3),te(i.userName),g(),R("src",i.userAvatar,$h))},dependencies:[cn,Zn,Rn,Xn,Bn],styles:["[_ngcontent-%COMP%]:root{--glass-bg: rgba(255, 255, 255, .12);--glass-border: rgba(255, 255, 255, .2);--deep-blue: #003366;--accent-red: #ff4d4d}.glass-header[_ngcontent-%COMP%]{height:70px;background:var(--glass-bg);backdrop-filter:blur(15px);border-bottom:1px solid var(--glass-border);display:flex;justify-content:space-between;align-items:center;padding:0 25px;color:#fff;z-index:100;position:sticky;top:0;width:100%}.stats-container[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}.stat-item[_ngcontent-%COMP%]{background:#ffffff26;padding:8px 16px;border-radius:12px;display:flex;align-items:center;gap:10px;font-size:.9rem;border:1px solid rgba(255,255,255,.1);color:#fff;transition:all .3s ease;min-width:140px}.stat-item[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px);box-shadow:0 5px 15px #0003}.stat-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff}.user-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:25px}.notification-badge[_ngcontent-%COMP%]{position:relative;font-size:1.4rem;color:#fff;cursor:pointer;padding:8px;border-radius:50%;transition:all .3s ease}.notification-badge[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:scale(1.1)}.dot[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:var(--accent-red);color:#fff;font-size:.7rem;padding:2px 6px;border-radius:10px;font-weight:700;min-width:20px;text-align:center}.profile-pill[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:#fff;color:var(--deep-blue);padding:5px 5px 5px 15px;border-radius:30px;font-weight:700;box-shadow:0 4px 15px #0003;transition:all .3s ease;cursor:pointer;min-width:180px}.profile-pill[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00000040}.profile-pill[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:2px solid var(--deep-blue);object-fit:cover}@media (max-width: 480px){.glass-header[_ngcontent-%COMP%]{padding:0 10px}.profile-pill[_ngcontent-%COMP%]{padding:2px}.profile-pill[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px}}.profile-pill[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;color:#1f1f8b;font-weight:700;font-family:Amiri,serif}@media (max-width: 768px){.glass-header[_ngcontent-%COMP%]{padding:0 15px;height:60px;justify-content:flex-end}.stats-container[_ngcontent-%COMP%]{display:none}.profile-pill[_ngcontent-%COMP%]{min-width:auto;padding:4px 4px 4px 12px}.profile-pill[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.profile-pill[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;height:35px}.user-actions[_ngcontent-%COMP%]{gap:15px}.notification-badge[_ngcontent-%COMP%]{font-size:1.2rem}}search-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:12px;background:#fff;color:var(--deep-blue);padding:5px 5px 5px 15px;border-radius:30px;font-weight:700;box-shadow:0 4px 15px #0003;transition:all .3s ease;cursor:pointer;min-width:180px}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;font-size:1rem;color:var(--deep-blue);width:120px;font-weight:700;font-family:Amiri,serif;align-items:center}.search-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--deep-blue)}.search-container[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00000040}.mobile-menu-toggle[_ngcontent-%COMP%]{background:#ffffff1a;border-radius:10px;width:45px;height:45px;display:flex;align-items:center;justify-content:center;color:var(--text-light);font-size:1.5rem;cursor:pointer;transition:all .3s ease}.mobile-menu-toggle[_ngcontent-%COMP%]:hover{background:#fff3}.mobile-menu-toggle[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 768px){.mobile-menu-toggle[_ngcontent-%COMP%]{display:flex}}.main-content[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}"]})};function BL(n,e){if(n&1){let t=Me();l(0,"div",15),O("click",function(){T(t);let r=E();return D(r.closeSidebar())}),P(1,"i",16),c()}}function zL(n,e){if(n&1){let t=Me();l(0,"i",17),O("click",function(){T(t);let r=E();return D(r.toggleCollapsed())}),c()}}function HL(n,e){if(n&1&&(l(0,"span",25),d(1),c()),n&2){let t=E().$implicit;g(),te(t.notification)}}function jL(n,e){n&1&&P(0,"i",26)}function GL(n,e){if(n&1){let t=Me();l(0,"li")(1,"a",29),O("click",function(){let r=T(t).$implicit,o=E(2).$implicit,s=E();return D(s.navigateTo(r.route,o.id))}),d(2),c()()}if(n&2){let t=e.$implicit;g(2),te(t.label)}}function WL(n,e){if(n&1&&(l(0,"ul",27),ee(1,GL,3,1,"li",28),c()),n&2){let t=E().$implicit;g(),R("ngForOf",t.subItems)}}function $L(n,e){if(n&1){let t=Me();l(0,"li",18)(1,"a",19),O("click",function(){let r=T(t).$implicit,o=E();return D(o.navigateTo(r.route,r.id))}),l(2,"div",20),P(3,"i"),ee(4,HL,2,1,"span",21),c(),l(5,"span",22),d(6),c(),ee(7,jL,1,0,"i",23),c(),ee(8,WL,2,1,"ul",24),c()}if(n&2){let t=e.$implicit,i=E();g(),Ue("active",i.activeSection===t.id),R("title",t.label),g(2),T6("bi ",t.icon,""),g(),R("ngIf",t.notification),g(),Ue("collapsed",i.collapsed),g(),te(t.label),g(),R("ngIf",t.subItems),g(),R("ngIf",t.subItems)}}function qL(n,e){n&1&&(l(0,"div",30),P(1,"i",31),c())}var g0=class n{constructor(e){this.router=e}isMobile=!1;sidebarClosed=new En;collapsed=!1;activeSection="dashboard";hoveredItem=null;userName="Yasser";userRole="\u0645\u062F\u064A\u0631 \u0627\u0644\u0646\u0638\u0627\u0645";userAvatar="https://ui-avatars.com/api/?name=\u0623\u062D\u0645\u062F+\u0645\u062D\u0645\u062F&background=0D8ABC&color=fff";menuItems=[{id:"dashboard",icon:"bi-speedometer2",label:"\u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645",route:"/home/lesson-management",notification:3},{id:"live-classes",icon:"bi-camera-video",label:"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u062D\u064A\u0629",route:"/home/live-class"},{id:"students",icon:"bi-people",label:"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0637\u0644\u0627\u0628",route:"/home/students-management",subItems:[{label:"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0637\u0644\u0627\u0628",route:"/home/students-management"},{label:"\u062D\u0633\u0627\u0628\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628",route:"/home/students-accounts"},{label:"\u0637\u0644\u0628\u0627\u062A \u0627\u0644\u062A\u0633\u062C\u064A\u0644",route:"/home/registration-requests"}]},{id:"teachers",icon:"bi-person-video3",label:"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629",route:"/home/teachers-management"},{id:"classes",icon:"bi-book",label:"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062D\u0635\u0635",route:"/home/lesson-management"},{id:"classrooms",icon:"bi-building",label:"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0642\u0627\u0639\u0627\u062A",route:"/home/rooms-management"},{id:"payments",icon:"bi-cash-coin",label:"\u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A",route:"/home/payments-management",notification:5},{id:"cards",icon:"bi-credit-card",label:"\u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062A",route:"/home/cards-management"},{id:"gate-interface",icon:"bi-door-open",label:"\u0648\u0627\u062C\u0647\u0629 \u0627\u0644\u0645\u062F\u062E\u0644",route:"/home/gate-interface"},{id:"settings",icon:"bi-gear",label:"\u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A",route:"/home/settings",subItems:[{label:"\u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0639\u0627\u0645\u0629",route:"/home/settings/general"},{label:"\u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646",route:"/home/settings/permissions"},{label:"\u0646\u0633\u062E \u0627\u062D\u062A\u064A\u0627\u0637\u064A",route:"/home/settings/backup"}]}];ngOnInit(){this.setActiveFromRoute(),this.checkScreenSize()}onResize(){this.checkScreenSize()}checkScreenSize(){this.isMobile=window.innerWidth<=768,this.isMobile||(this.collapsed=!1)}setActiveFromRoute(){let e=this.router.url,t=this.menuItems.find(i=>e.includes(i.route)||i.subItems&&i.subItems.some(r=>e.includes(r.route)));t&&(this.activeSection=t.id)}toggleCollapsed(){this.isMobile||(this.collapsed=!this.collapsed)}navigateTo(e,t){this.activeSection=t,this.router.navigate([e]).then(()=>{this.isMobile&&this.closeSidebar()})}closeSidebar(){this.sidebarClosed.emit()}logout(){this.router.navigate(["/login"])}onItemHover(e){this.collapsed&&!this.isMobile&&(this.hoveredItem=e)}onItemLeave(){this.hoveredItem=null}static \u0275fac=function(t){return new(t||n)(we(ti))};static \u0275cmp=Jt({type:n,selectors:[["app-nav-bar"]],hostBindings:function(t,i){t&1&&O("resize",function(){return i.onResize()},!1,po)},inputs:{isMobile:"isMobile"},outputs:{sidebarClosed:"sidebarClosed"},decls:19,vars:12,consts:[[1,"sidebar"],["class","mobile-close-btn",3,"click",4,"ngIf"],[1,"user-info-compact"],[1,"user-avatar",3,"src","alt"],[1,"user-details"],[1,"user-name"],[1,"user-role"],["class","bi bi-chevron-left toggle-icon",3,"click",4,"ngIf"],[1,"nav-menu"],[1,"nav-list"],["class","nav-item",4,"ngFor","ngForOf"],[1,"logout-section"],[1,"logout-btn",3,"click"],[1,"bi","bi-box-arrow-left"],["class","mini-logo",4,"ngIf"],[1,"mobile-close-btn",3,"click"],[1,"bi","bi-x-lg"],[1,"bi","bi-chevron-left","toggle-icon",3,"click"],[1,"nav-item"],[1,"nav-link",3,"click","title"],[1,"nav-icon"],["class","notification-badge",4,"ngIf"],[1,"nav-label"],["class","bi bi-chevron-left arrow",4,"ngIf"],["class","sub-menu",4,"ngIf"],[1,"notification-badge"],[1,"bi","bi-chevron-left","arrow"],[1,"sub-menu"],[4,"ngFor","ngForOf"],[3,"click"],[1,"mini-logo"],[1,"bi","bi-building"]],template:function(t,i){t&1&&(l(0,"div",0),ee(1,BL,2,0,"div",1),l(2,"div",2),P(3,"img",3),l(4,"div",4)(5,"p",5),d(6),c(),l(7,"small",6),d(8),c()(),ee(9,zL,1,0,"i",7),c(),l(10,"div",8)(11,"ul",9),ee(12,$L,9,12,"li",10),c()(),l(13,"div",11)(14,"a",12),O("click",function(){return i.logout()}),P(15,"i",13),l(16,"span"),d(17,"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062E\u0631\u0648\u062C"),c()()(),ee(18,qL,2,0,"div",14),c()),t&2&&(Ue("mobile-open",i.isMobile),g(),R("ngIf",i.isMobile),g(2),R("src",i.userAvatar,$h)("alt",i.userName),g(3),te(i.userName),g(2),te(i.userRole),g(),R("ngIf",!i.isMobile),g(3),R("ngForOf",i.menuItems),g(4),Ue("collapsed",i.collapsed),g(2),R("ngIf",i.collapsed&&!i.isMobile))},dependencies:[cn,Yn,Tn],styles:["[_ngcontent-%COMP%]:root{--sidebar-bg: rgba(255, 255, 255, .08);--sidebar-border: rgba(255, 255, 255, .15);--glass-blur: 20px;--text-primary: #ffffff;--text-secondary: rgba(255, 255, 255, .7);--accent-color: #ffffff;--hover-bg: rgba(255, 255, 255, .2);--active-bg: rgba(255, 255, 255, .25);--active-color: #0a66c2;--shadow-color: rgba(0, 0, 0, .2);--logout-color: rgba(255, 153, 153, .9)}*[_ngcontent-%COMP%]{color:#fff}.sidebar[_ngcontent-%COMP%]{width:100%;height:100%;background:var(--sidebar-bg);backdrop-filter:blur(var(--glass-blur));border-left:1px solid var(--sidebar-border);display:flex;flex-direction:column;padding:20px 0;color:var(--text-primary);position:relative;overflow:hidden}.mobile-close-btn[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;width:40px;height:40px;background:#ffffff1a;border-radius:12px;display:flex;align-items:center;justify-content:center;color:var(--text-primary);font-size:1.2rem;cursor:pointer;transition:all .3s;border:1px solid var(--sidebar-border);z-index:1001}.mobile-close-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:rotate(90deg)}.user-info-compact[_ngcontent-%COMP%]{padding:25px 20px;display:flex;align-items:center;gap:15px;background:#ffffff0d;border-bottom:1px solid var(--sidebar-border);position:relative;transition:all .3s}.sidebar.collapsed[_ngcontent-%COMP%]   .user-info-compact[_ngcontent-%COMP%]{padding:20px 15px;justify-content:center}.user-avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:12px;border:2px solid rgba(255,255,255,.3);object-fit:cover;box-shadow:0 4px 12px #0003;transition:all .3s}.sidebar.collapsed[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:40px;height:40px}.user-details[_ngcontent-%COMP%]{flex:1;overflow:hidden}.user-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user-role[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);display:block;margin-top:3px}.toggle-icon[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1.2rem;cursor:pointer;transition:all .3s;padding:5px;border-radius:8px}.toggle-icon[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:var(--hover-bg);transform:rotate(180deg)}.sidebar.collapsed[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{display:none}.nav-menu[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px 0;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.2) transparent}.nav-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.nav-item[_ngcontent-%COMP%]{position:relative;margin:5px 15px}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 15px;color:var(--text-secondary);text-decoration:none;border-radius:12px;transition:all .3s;cursor:pointer;position:relative;overflow:hidden;gap:15px}.nav-link[_ngcontent-%COMP%]:hover:not(.active):not(.logout-btn){background:var(--hover-bg);color:var(--text-primary);border-color:var(--sidebar-border);transform:translate(-5px);padding-right:20px}.nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.1)}.nav-link.active[_ngcontent-%COMP%]{background:var(--active-bg);color:var(--accent-color);border-color:var(--sidebar-border);font-weight:600;padding-right:20px}.nav-link.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent-color);transform:scale(1.1)}.nav-icon[_ngcontent-%COMP%]{position:relative;width:24px;height:24px;display:flex;align-items:center;justify-content:center;transition:all .3s}.nav-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;transition:all .3s}.notification-badge[_ngcontent-%COMP%]{position:absolute;top:-5px;left:-5px;background:#ff6b6b;color:#fff;font-size:.7rem;padding:2px 6px;border-radius:10px;font-weight:700;min-width:18px;text-align:center;box-shadow:0 2px 8px #ff6b6b4d}.nav-label[_ngcontent-%COMP%]{flex:1;font-size:.9rem;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:all .3s}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{opacity:0;width:0}.arrow[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);transition:transform .3s}.nav-link[_ngcontent-%COMP%]:hover   .arrow[_ngcontent-%COMP%]{transform:translate(-3px)}.sub-menu[_ngcontent-%COMP%]{list-style:none;padding:0;margin:5px 0 5px 30px;background:#0000001a;border-radius:10px;overflow:hidden;max-height:0;transition:max-height .3s ease-out}.nav-item[_ngcontent-%COMP%]:hover   .sub-menu[_ngcontent-%COMP%]{max-height:300px;transition:max-height .3s ease-in}.sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0}.sub-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:10px 15px;color:var(--text-secondary);text-decoration:none;font-size:.9rem;transition:all .3s;cursor:pointer}.sub-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:var(--text-primary);padding-right:20px}.logout-section[_ngcontent-%COMP%]{padding:20px;border-top:1px solid var(--sidebar-border);background:#0000001a}.logout-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:12px 20px;color:var(--logout-color);text-decoration:none;border-radius:12px;transition:all .3s;cursor:pointer;background:#ff6b6b1a;border:1px solid rgba(255,107,107,.2)}.logout-btn[_ngcontent-%COMP%]:hover{background:#ff6b6b33;color:#fff;transform:translate(-5px)}.logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.logout-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-size:.95rem;font-weight:500;transition:all .3s}.sidebar.collapsed[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:0;width:0}.mini-logo[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:50%;transform:translate(50%);width:40px;height:40px;background:#ffffff1a;border-radius:10px;display:flex;align-items:center;justify-content:center;color:var(--text-primary);font-size:1.5rem;cursor:pointer;transition:all .3s}.mini-logo[_ngcontent-%COMP%]:hover{background:#fff3;transform:translate(50%) scale(1.1)}.nav-link[_ngcontent-%COMP%]:hover   .nav-label.collapsed[_ngcontent-%COMP%]{position:absolute;right:70px;background:#000000e6;color:#fff;padding:8px 15px;border-radius:8px;white-space:nowrap;opacity:1;width:auto;z-index:1000;box-shadow:0 4px 15px #0000004d;font-size:.9rem}.nav-menu[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.nav-menu[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d;border-radius:4px}.nav-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:4px}.nav-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff4d}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{box-shadow:-5px 0 25px #0000004d}.mobile-close-btn[_ngcontent-%COMP%]{display:flex}.toggle-icon[_ngcontent-%COMP%]{display:none}.sidebar.collapsed[_ngcontent-%COMP%]{width:100%}.nav-link[_ngcontent-%COMP%]{padding:12px 15px}}"]})};function YL(n,e){if(n&1){let t=Me();l(0,"div",8),O("click",function(){T(t);let r=E();return D(r.toggleSidebar())}),P(1,"i",9),c()}if(n&2){let t=E();g(),Ue("bi-list",!t.sidebarOpen)("bi-x",t.sidebarOpen)}}var _0=class n{sidebarOpen=!1;isMobile=!1;ngOnInit(){this.checkScreenSize(),this.setupKeyboardListeners()}onResize(e){this.checkScreenSize()}onKeyDown(e){e.key==="Escape"&&this.sidebarOpen&&this.isMobile&&this.closeSidebar()}checkScreenSize(){this.isMobile=window.innerWidth<=768,!this.isMobile&&this.sidebarOpen&&this.closeSidebar()}setupKeyboardListeners(){document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="m"&&(e.preventDefault(),this.toggleSidebar())})}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen,this.updateBodyScroll(),this.playClickSound()}closeSidebar(){this.sidebarOpen=!1,this.updateBodyScroll()}updateBodyScroll(){this.isMobile&&(this.sidebarOpen?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"))}playClickSound(){}isLandscape(){return window.innerWidth>window.innerHeight&&this.isMobile}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Jt({type:n,selectors:[["app-home"]],hostBindings:function(t,i){t&1&&O("resize",function(o){return i.onResize(o)},!1,po)("keydown",function(o){return i.onKeyDown(o)},!1,po)},decls:9,vars:6,consts:[[1,"app-container"],[1,"app-header"],[1,"main-content"],["class","mobile-menu-toggle",3,"click",4,"ngIf"],[1,"app-sidebar",3,"sidebarClosed","isMobile"],[1,"mobile-overlay",3,"click"],[1,"content-area"],[1,"page-content"],[1,"mobile-menu-toggle",3,"click"],[1,"bi"]],template:function(t,i){t&1&&(l(0,"div",0),P(1,"app-header",1),l(2,"div",2),ee(3,YL,2,4,"div",3),l(4,"app-nav-bar",4),O("sidebarClosed",function(){return i.closeSidebar()}),c(),l(5,"div",5),O("click",function(){return i.closeSidebar()}),c(),l(6,"main",6)(7,"div",7),P(8,"router-outlet"),c()()()()),t&2&&(g(3),R("ngIf",i.isMobile),g(),Ue("sidebar-open",i.sidebarOpen),R("isMobile",i.isMobile),g(),Ue("active",i.sidebarOpen&&i.isMobile))},dependencies:[cn,Tn,_d,ka,m0,g0],styles:["[_ngcontent-%COMP%]:root{--header-height: 70px;--sidebar-width: 280px;--mobile-sidebar-width: 280px;--glass-bg: rgba(255, 255, 255, .1);--glass-border: rgba(255, 255, 255, .15);--overlay-color: rgba(0, 0, 0, .5);--transition-speed: .3s;--blur-intensity: 20px;--shadow-intensity: 0 10px 30px rgba(0, 0, 0, .2)}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.app-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden;background:linear-gradient(135deg,#0a66c2f2,#004182e6),url(https://images.unsplash.com/photo-1509062522246-3755977927d7?q=80&w=2000);background-size:cover;background-position:center;background-attachment:fixed}.app-header[_ngcontent-%COMP%]{height:var(--header-height);position:sticky;top:0;z-index:100;flex-shrink:0}.main-content[_ngcontent-%COMP%]{display:flex;flex:1;height:calc(100vh - var(--header-height));position:relative;overflow:hidden}.mobile-menu-toggle[_ngcontent-%COMP%]{display:none;position:fixed;top:85px;right:25px;z-index:1002;background:var(--glass-bg);backdrop-filter:blur(var(--blur-intensity));border:1px solid var(--glass-border);border-radius:12px;width:48px;height:48px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.5rem;cursor:pointer;transition:all var(--transition-speed);box-shadow:var(--shadow-intensity)}.mobile-menu-toggle[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.mobile-menu-toggle[_ngcontent-%COMP%]:active{transform:scale(.95)}.app-sidebar[_ngcontent-%COMP%]{width:var(--sidebar-width);height:100%;flex-shrink:0;transition:transform var(--transition-speed);z-index:999;position:relative}.content-area[_ngcontent-%COMP%]{flex:1;height:100%;overflow-y:auto;padding:25px;position:relative;background:#ffffff08;backdrop-filter:blur(5px)}.page-content[_ngcontent-%COMP%]{width:100%;max-width:1400px;margin:0 auto;min-height:100%;position:relative}.mobile-overlay[_ngcontent-%COMP%]{display:none;position:fixed;top:var(--header-height);left:0;width:100%;height:calc(100% - var(--header-height));background:var(--overlay-color);z-index:998;opacity:0;visibility:hidden;transition:all var(--transition-speed);backdrop-filter:blur(3px)}.mobile-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d;border-radius:4px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:4px;transition:background var(--transition-speed)}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff4d}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.page-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards}@media (max-width: 768px){[_ngcontent-%COMP%]:root{--header-height: 65px}.mobile-menu-toggle[_ngcontent-%COMP%]{display:flex!important;top:80px;right:20px}.app-sidebar[_ngcontent-%COMP%]{position:fixed;top:var(--header-height);right:-100%;width:var(--mobile-sidebar-width);height:calc(100% - var(--header-height));transform:translate(100%);transition:transform var(--transition-speed);z-index:1000;box-shadow:-10px 0 40px #0000004d}.app-sidebar.sidebar-open[_ngcontent-%COMP%]{transform:translate(0);right:0}.mobile-overlay[_ngcontent-%COMP%]{display:block}.content-area[_ngcontent-%COMP%]{padding:20px 15px}}@media (max-width: 480px){[_ngcontent-%COMP%]:root{--mobile-sidebar-width: 260px;--header-height: 60px}.mobile-menu-toggle[_ngcontent-%COMP%]{top:75px;right:15px;width:44px;height:44px;font-size:1.3rem}.content-area[_ngcontent-%COMP%]{padding:15px 12px}}@media (min-width: 1440px){[_ngcontent-%COMP%]:root{--sidebar-width: 300px}.content-area[_ngcontent-%COMP%]{padding:30px}.page-content[_ngcontent-%COMP%]{max-width:1600px}}.content-area[_ngcontent-%COMP%]{position:relative!important;z-index:1!important}body.modal-open[_ngcontent-%COMP%]{overflow:hidden!important}.modal-overlay[_ngcontent-%COMP%]{position:fixed!important;inset:0!important;background:#000000d9!important;backdrop-filter:blur(12px)!important;display:flex!important;align-items:center!important;justify-content:center!important;z-index:99999!important;padding:20px!important;animation:_ngcontent-%COMP%_fadeIn .2s ease!important}.modal[_ngcontent-%COMP%]{background:#fff!important;border-radius:24px!important;width:100%!important;max-width:600px!important;max-height:90vh!important;overflow-y:auto!important;box-shadow:0 30px 80px #00000080!important;animation:_ngcontent-%COMP%_modalScaleIn .3s cubic-bezier(.175,.885,.32,1.275)!important;position:relative!important;z-index:100000!important}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_modalScaleIn{0%{opacity:0;transform:scale(.9) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}.modal-lg[_ngcontent-%COMP%]{max-width:900px!important}"]})};var xc=ou(vc());function XL(n,e){n&1&&(l(0,"span"),d(1,"\u062F\u062E\u0648\u0644 \u0627\u0644\u0646\u0638\u0627\u0645"),c())}function ZL(n,e){n&1&&P(0,"div",29)}var v0=class n{constructor(e){this.router=e}username="";password="";rememberMe=!1;currentYear=new Date().getFullYear();isLoading=!1;passwordFieldType="password";ngOnInit(){this.loadRememberedUser()}loadRememberedUser(){let e=localStorage.getItem("rememberedUser");if(e)try{let t=JSON.parse(e);t.rememberMe&&(this.username=t.username,this.rememberMe=!0)}catch{localStorage.removeItem("rememberedUser")}}togglePasswordVisibility(){this.passwordFieldType=this.passwordFieldType==="password"?"text":"password"}login(){return $t(this,null,function*(){if(!this.isFormValid()){xc.default.fire({title:"\u062E\u0637\u0623",text:"\u064A\u0631\u062C\u0649 \u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A",icon:"error",confirmButtonColor:"#0a66c2"});return}this.isLoading=!0;try{let e=yield fetch("https://redox-sm.onrender.com/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username.trim(),password:this.password})}),t=yield e.json();e.ok&&t.token?(localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),this.rememberMe?localStorage.setItem("rememberedUser",JSON.stringify({username:this.username.trim(),rememberMe:!0})):localStorage.removeItem("rememberedUser"),yield xc.default.fire({title:"\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644",text:"\u062C\u0627\u0631\u064A \u062A\u062D\u0648\u064A\u0644\u0643 \u0625\u0644\u0649 \u0645\u062F\u0631\u0633\u0629 \u0627\u0644\u0631\u0648\u0627\u062F...",icon:"success",timer:1500,showConfirmButton:!1}),this.router.navigate(["/home/lesson-management"])):xc.default.fire({title:"\u0641\u0634\u0644 \u0627\u0644\u062F\u062E\u0648\u0644",text:t.message||"\u0628\u064A\u0627\u0646\u0627\u062A \u063A\u064A\u0631 \u0635\u062D\u064A\u062D\u0629",icon:"error"})}catch{xc.default.fire({title:"\u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u0627\u062A\u0635\u0627\u0644",text:"\u064A\u0631\u062C\u0649 \u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0627\u0644\u0625\u0646\u062A\u0631\u0646\u062A",icon:"error"})}finally{this.isLoading=!1}})}onUsernameKeyPress(e){e.key==="Enter"&&document.getElementById("password")?.focus()}onPasswordKeyPress(e){e.key==="Enter"&&this.login()}forgotPassword(){xc.default.fire({title:"\u0646\u0633\u064A\u062A \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631\u061F",text:"\u064A\u0631\u062C\u0649 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0625\u062F\u0627\u0631\u0629 \u0645\u062F\u0631\u0633\u0629 \u0627\u0644\u0631\u0648\u0627\u062F \u0644\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u062D\u0633\u0627\u0628\u0643.",icon:"info",confirmButtonText:"\u062D\u0633\u0646\u0627\u064B"})}navigateToRegister(){this.router.navigate(["/register"])}isFormValid(){return this.username.trim().length>0&&this.password.length>0}getGreeting(){return new Date().getHours()<12?"\u0635\u0628\u0627\u062D \u0627\u0644\u062E\u064A\u0631":"\u0645\u0633\u0627\u0621 \u0627\u0644\u062E\u064A\u0631"}static \u0275fac=function(t){return new(t||n)(we(ti))};static \u0275cmp=Jt({type:n,selectors:[["app-login"]],decls:44,vars:13,consts:[[1,"bg-animation"],[1,"login-container"],[1,"glass-card","animate-fade-up"],[1,"top-badge"],[1,"card-header"],[1,"logo-circle"],[1,"bi","bi-mortarboard-fill"],[1,"header-text"],[1,"title"],[1,"subtitle"],[1,"login-form",3,"ngSubmit"],[1,"input-group"],[1,"input-wrapper"],["type","text","name","username","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645",3,"ngModelChange","keypress","ngModel","disabled"],[1,"bi","bi-person-fill"],["name","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"ngModelChange","keypress","type","ngModel","disabled"],[1,"bi",2,"cursor","pointer",3,"click","ngClass"],[1,"form-options"],[1,"checkbox-container"],["type","checkbox","name","rememberMe",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"forgot-link",3,"click"],[1,"button-group"],["type","submit",1,"btn-login",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"divider-line"],[1,"btn-new",3,"click","disabled"],[1,"footer-info"],[1,"spinner"]],template:function(t,i){t&1&&(P(0,"div",0),l(1,"div",1)(2,"div",2)(3,"div",3),d(4,"\u0645\u062F\u0631\u0633\u0629 \u0627\u0644\u0631\u0648\u0627\u062F \u0644\u0644\u062A\u0639\u0644\u064A\u0645 \u0648 \u0627\u0644\u0645\u0639\u0627\u0631\u0641"),c(),l(5,"div",4)(6,"div",5),P(7,"i",6),c(),l(8,"div",7)(9,"h2",8),d(10,"Ta3limi"),c(),l(11,"p",9),d(12),c()()(),l(13,"form",10),O("ngSubmit",function(){return i.login()}),l(14,"div",11)(15,"label"),d(16,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),c(),l(17,"div",12)(18,"input",13),fe("ngModelChange",function(o){return he(i.username,o)||(i.username=o),o}),O("keypress",function(o){return i.onUsernameKeyPress(o)}),c(),P(19,"i",14),c()(),l(20,"div",11)(21,"label"),d(22,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),c(),l(23,"div",12)(24,"input",15),fe("ngModelChange",function(o){return he(i.password,o)||(i.password=o),o}),O("keypress",function(o){return i.onPasswordKeyPress(o)}),c(),l(25,"i",16),O("click",function(){return i.togglePasswordVisibility()}),c()()(),l(26,"div",17)(27,"label",18)(28,"input",19),fe("ngModelChange",function(o){return he(i.rememberMe,o)||(i.rememberMe=o),o}),c(),P(29,"span",20),d(30," \u062A\u0630\u0643\u0631\u0646\u064A "),c(),l(31,"a",21),O("click",function(){return i.forgotPassword()}),d(32,"\u0646\u0633\u064A\u062A \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631\u061F"),c()(),l(33,"div",22)(34,"button",23),ee(35,XL,2,0,"span",24)(36,ZL,1,0,"div",25),c()()(),l(37,"div",26)(38,"span"),d(39,"\u0623\u0648"),c()(),l(40,"button",27),O("click",function(){return i.navigateToRegister()}),d(41," \u0625\u0646\u0634\u0627\u0621 \u062D\u0633\u0627\u0628 \u062C\u062F\u064A\u062F "),c(),l(42,"footer",28),d(43),c()()()),t&2&&(g(12),K("",i.getGreeting(),"\u060C \u0646\u0638\u0627\u0645 \u0627\u0644\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0630\u0643\u064A"),g(6),de("ngModel",i.username),R("disabled",i.isLoading),g(6),R("type",i.passwordFieldType),de("ngModel",i.password),R("disabled",i.isLoading),g(),R("ngClass",i.passwordFieldType==="password"?"bi-eye-slash-fill":"bi-eye-fill"),g(3),de("ngModel",i.rememberMe),g(6),R("disabled",i.isLoading||!i.isFormValid()),g(),R("ngIf",!i.isLoading),g(),R("ngIf",i.isLoading),g(4),R("disabled",i.isLoading),g(3),K(" \xA9 ",i.currentYear," Redox Club | \u0627\u0644\u0625\u0635\u062F\u0627\u0631 1.0.3 "))},dependencies:[Zn,yr,Rn,Ba,Xn,xr,Bn,Gr,cn,Hu,Tn],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;width:100vw;padding:20px;position:relative}.bg-animation[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;background:linear-gradient(135deg,#0a66c2f2,#004182f2),url(https://images.unsplash.com/photo-1509062522246-3755977927d7?q=80&w=2000);background-size:cover;background-position:center}.glass-card[_ngcontent-%COMP%]{background:#ffffff1f;backdrop-filter:blur(25px);-webkit-backdrop-filter:blur(25px);border:1px solid var(--glass-border);border-radius:40px;padding:40px;color:var(--text-light);width:100%;max-width:420px;box-shadow:0 25px 50px #0000004d;text-align:center}.top-badge[_ngcontent-%COMP%]{background:#fff;color:var(--dark-blue);display:inline-block;padding:8px 20px;border-radius:30px;font-weight:700;font-size:1.1rem;margin-bottom:25px;box-shadow:0 4px 10px #0000001a}.card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:30px}.logo-circle[_ngcontent-%COMP%]{width:70px;height:70px;background:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:2.2rem;color:var(--main-blue);margin:0 auto 15px}.title[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:700}.subtitle[_ngcontent-%COMP%]{margin:5px 0 30px;opacity:.8;font-size:.9rem}.login-form[_ngcontent-%COMP%]{width:100%}.input-group[_ngcontent-%COMP%]{margin-bottom:18px;text-align:right;width:100%}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:.85rem;margin-right:10px;color:var(--text-light)}.input-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%!important;padding:14px 15px 14px 45px;border-radius:18px;border:none;font-size:1rem;color:var(--text-dark);background:#fff;outline:none;direction:rtl}.input-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:var(--main-blue);font-size:1.1rem;z-index:5}.form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;font-size:.85rem}.forgot-link[_ngcontent-%COMP%]{color:#90c4ff;cursor:pointer;text-decoration:none;transition:all .3s ease}.forgot-link[_ngcontent-%COMP%]:hover{color:#fff;text-decoration:underline}.btn-login[_ngcontent-%COMP%]{width:100%;padding:15px;border-radius:18px;border:none;background:#fff;color:var(--dark-blue);font-weight:700;font-size:1.1rem;cursor:pointer;transition:.3s;margin-top:10px}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.02);background:#f0f0f0}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-new[_ngcontent-%COMP%]{width:100%;padding:12px;border-radius:18px;border:1px solid white;background:transparent;color:#fff;cursor:pointer;margin-top:10px;transition:all .3s ease}.btn-new[_ngcontent-%COMP%]:hover{background:#ffffff1a}.divider-line[_ngcontent-%COMP%]{margin:25px 0;border-bottom:1px solid rgba(255,255,255,.2);position:relative}.divider-line[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:-10px;left:50%;transform:translate(-50%);background:var(--dark-blue);padding:0 15px;font-size:.8rem;border-radius:10px}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:3px solid rgba(0,0,0,.1);border-radius:50%;border-top-color:var(--main-blue);animation:_ngcontent-%COMP%_spin .8s linear infinite;display:inline-block}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.animate-fade-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_floatIn .8s ease-out forwards}@keyframes _ngcontent-%COMP%_floatIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.glass-card[_ngcontent-%COMP%]{padding:30px 20px;border-radius:30px}.logo-circle[_ngcontent-%COMP%]{width:60px;height:60px;font-size:1.8rem}.title[_ngcontent-%COMP%]{font-size:1.5rem}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 12px 12px 40px}.btn-login[_ngcontent-%COMP%], .btn-new[_ngcontent-%COMP%]{padding:12px}}"]})};var Is=class n{constructor(e,t){this.http=e;this.authService=t}apiUrl="http://localhost:3000/api";getClasses(){return this.http.get(`${this.apiUrl}/classes`,{headers:this.authService.getAuthHeaders()})}getClassById(e){return this.http.get(`${this.apiUrl}/classes/${e}`,{headers:this.authService.getAuthHeaders()})}createClass(e){return this.http.post(`${this.apiUrl}/classes`,e,{headers:this.authService.getAuthHeaders()})}updateClass(e,t){return this.http.put(`${this.apiUrl}/classes/${e}`,t,{headers:this.authService.getAuthHeaders()})}deleteClass(e){return this.http.delete(`${this.apiUrl}/classes/${e}`,{headers:this.authService.getAuthHeaders()})}enrollStudent(e,t){return this.http.post(`${this.apiUrl}/classes/${e}/enroll/${t}`,{},{headers:this.authService.getAuthHeaders()})}unenrollStudent(e,t){return this.http.delete(`${this.apiUrl}/classes/${e}/unenroll/${t}`,{headers:this.authService.getAuthHeaders()})}getAvailableClasses(e,t){let i=`${this.apiUrl}/classes/available`,r={};return e&&(r.academicYear=e),t&&(r.studentId=t),this.http.get(i,{params:r,headers:this.authService.getAuthHeaders()})}getAvailableClassesForStudent(e,t){return this.http.get(`${this.apiUrl}/classes/available/${e}?studentId=${t}`,{headers:this.authService.getAuthHeaders()})}addStudentToClass(e,t){return this.http.post(`${this.apiUrl}/classes/${e}/enroll/${t}`,{},{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(t){return new(t||n)(De(bn),De(gn))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})};var Cr=class n{constructor(e,t){this.http=e;this.authService=t}apiUrl="/api";getStudents(){return this.http.get(`${this.apiUrl}/students`,{headers:this.authService.getAuthHeaders()})}getStudentById(e){return this.http.get(`${this.apiUrl}/students/${e}`,{headers:this.authService.getAuthHeaders()})}createStudent(e){return this.http.post(`${this.apiUrl}/students`,e,{headers:this.authService.getAuthHeaders()})}updateStudent(e,t){return this.http.put(`${this.apiUrl}/students/${e}`,t,{headers:this.authService.getAuthHeaders()})}deleteStudent(e){return this.http.delete(`${this.apiUrl}/students/${e}`,{headers:this.authService.getAuthHeaders()})}payRegistrationFee(e,t){return this.http.post(`${this.apiUrl}/students/${e}/pay-registration`,t,{headers:this.authService.getAuthHeaders()})}getStudentClasses(e){return this.http.get(`${this.apiUrl}/students/${e}/classes`,{headers:this.authService.getAuthHeaders()})}getStudentsWithoutAccounts(){return this.http.get(`${this.apiUrl}/students?hasAccount=false`,{headers:this.authService.getAuthHeaders()})}enrollStudentMultiple(e,t){return this.http.post(`${this.apiUrl}/students/${e}/enroll-multiple`,t,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(t){return new(t||n)(De(bn),De(gn))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})};var Os=class n{constructor(e,t){this.http=e;this.authService=t}apiUrl="/api";getLiveClasses(e){let t=`${this.apiUrl}/live-classes`;if(e){let i=new URLSearchParams;e.status&&i.append("status",e.status),e.date&&i.append("date",e.date),t+=`?${i.toString()}`}return this.http.get(t,{headers:this.authService.getAuthHeaders()})}getLiveClassById(e){return this.http.get(`${this.apiUrl}/live-classes/${e}`,{headers:this.authService.getAuthHeaders()})}createLiveClass(e){return this.http.post(`${this.apiUrl}/live-classes`,e,{headers:this.authService.getAuthHeaders()})}updateLiveClass(e,t){return this.http.put(`${this.apiUrl}/live-classes/${e}`,t,{headers:this.authService.getAuthHeaders()})}recordAttendance(e,t){return this.http.post(`${this.apiUrl}/live-classes/${e}/attendance`,t,{headers:this.authService.getAuthHeaders()})}startLiveClass(e){return this.http.put(`${this.apiUrl}/live-classes/${e}`,{status:"ongoing"},{headers:this.authService.getAuthHeaders()})}endLiveClass(e,t){let i={status:"completed"};return t&&(i.endTime=t),this.http.put(`${this.apiUrl}/live-classes/${e}`,i,{headers:this.authService.getAuthHeaders()})}cancelLiveClass(e){return this.http.put(`${this.apiUrl}/live-classes/${e}`,{status:"cancelled"},{headers:this.authService.getAuthHeaders()})}getClassAttendance(e){return this.http.get(`${this.apiUrl}/live-classes/class/${e}/attendance`,{headers:this.authService.getAuthHeaders()})}autoMarkAbsent(e){return this.http.post(`${this.apiUrl}/live-classes/${e}/auto-mark-absent`,{},{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(t){return new(t||n)(De(bn),De(gn))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})};var Rs=class n{constructor(e,t){this.http=e;this.authService=t}apiUrl="/api";getPayments(e){return this.http.get(`${this.apiUrl}/payments`,{params:e,headers:this.authService.getAuthHeaders()})}cancelPayment(e){return this.http.put(`${this.apiUrl}/payments/${e}/cancel`,{},{headers:this.authService.getAuthHeaders()})}deletePayment(e){return this.http.delete(`${this.apiUrl}/payments/${e}`,{headers:this.authService.getAuthHeaders()})}updatePaymentAmount(e,t){return this.http.put(`${this.apiUrl}/payments/${e}/amount`,{amount:t},{headers:this.authService.getAuthHeaders()})}createPayment(e){return this.http.post(`${this.apiUrl}/payments`,e,{headers:this.authService.getAuthHeaders()})}payPayment(e,t){return this.http.put(`${this.apiUrl}/payments/${e}/pay`,t,{headers:this.authService.getAuthHeaders()})}getClassPayments(e){return this.http.get(`${this.apiUrl}/payments/class/${e}`,{headers:this.authService.getAuthHeaders()})}getStudentPayments(e){return this.http.get(`${this.apiUrl}/payments/student/${e}`,{headers:this.authService.getAuthHeaders()})}recordPayment(e){return this.http.post(`${this.apiUrl}/payments`,e,{headers:this.authService.getAuthHeaders()})}updatePayment(e,t){return this.http.put(`${this.apiUrl}/payments/${e}`,t,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(t){return new(t||n)(De(bn),De(gn))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})};var pE=()=>[];function KL(n,e){if(n&1&&(l(0,"option",71),d(1),c()),n&2){let t=e.$implicit;R("value",t._id),g(),Un(" ",t.name," - ",t.subjects==null?null:t.subjects.join(", ")," ")}}function JL(n,e){if(n&1&&(l(0,"option",71),d(1),c()),n&2){let t=e.$implicit;R("value",t.value),g(),K(" ",t.label," ")}}function QL(n,e){if(n&1&&(l(0,"option",71),d(1),c()),n&2){let t=e.$implicit;R("value",t),g(),K(" ",t," ")}}function e5(n,e){if(n&1&&(l(0,"option",71),d(1),c()),n&2){let t=e.$implicit;R("value",t._id),g(),Un(" ",t.name," (\u0627\u0644\u0633\u0639\u0629: ",t.capacity,") ")}}function t5(n,e){if(n&1){let t=Me();l(0,"div",72)(1,"div",42)(2,"div",43)(3,"label",73),d(4,"\u0627\u0644\u064A\u0648\u0645:"),c(),l(5,"select",74),fe("ngModelChange",function(r){T(t);let o=E(3);return he(o.newScheduleItem.day,r)||(o.newScheduleItem.day=r),D(r)}),l(6,"option",18),d(7,"\u0627\u062E\u062A\u0631 \u0627\u0644\u064A\u0648\u0645"),c(),ee(8,JL,2,2,"option",33),c()(),l(9,"div",43)(10,"label",75),d(11,"\u0627\u0644\u0648\u0642\u062A:"),c(),l(12,"select",76),fe("ngModelChange",function(r){T(t);let o=E(3);return he(o.newScheduleItem.time,r)||(o.newScheduleItem.time=r),D(r)}),l(13,"option",18),d(14,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0648\u0642\u062A"),c(),ee(15,QL,2,2,"option",33),c()()(),l(16,"div",42)(17,"div",43)(18,"label",77),d(19,"\u0627\u0644\u0642\u0627\u0639\u0629:"),c(),l(20,"select",78),fe("ngModelChange",function(r){T(t);let o=E(3);return he(o.newScheduleItem.classroom,r)||(o.newScheduleItem.classroom=r),D(r)}),l(21,"option",18),d(22,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0642\u0627\u0639\u0629"),c(),ee(23,e5,2,3,"option",33),c()(),l(24,"div",43)(25,"button",79),O("click",function(){T(t);let r=E(3);return D(r.addScheduleItem())}),d(26," \u2795 \u0625\u0636\u0627\u0641\u0629 \u0625\u0644\u0649 \u0627\u0644\u062C\u062F\u0648\u0644 "),c()()()()}if(n&2){let t=E(3);g(5),de("ngModel",t.newScheduleItem.day),g(3),R("ngForOf",t.daysOfWeek),g(4),de("ngModel",t.newScheduleItem.time),g(3),R("ngForOf",t.timeSlots),g(5),de("ngModel",t.newScheduleItem.classroom),g(3),R("ngForOf",t.classrooms),g(2),R("disabled",!t.newScheduleItem.day||!t.newScheduleItem.time||!t.newScheduleItem.classroom)}}function n5(n,e){if(n&1){let t=Me();l(0,"tr")(1,"td"),d(2),c(),l(3,"td"),d(4),c(),l(5,"td"),d(6),c(),l(7,"td")(8,"button",83),O("click",function(){let r=T(t).index,o=E(4);return D(o.removeScheduleItem(r))}),d(9," \u{1F5D1}\uFE0F \u062D\u0630\u0641 "),c()()()}if(n&2){let t=e.$implicit,i=E(4);g(2),te(t.day),g(2),te(t.time),g(2),K(" ",i.getClassroomName(t.classroom)," ")}}function i5(n,e){if(n&1&&(l(0,"div",80)(1,"h4"),d(2,"\u{1F4CB} \u0627\u0644\u062C\u062F\u0648\u0644 \u0627\u0644\u0645\u0636\u0627\u0641"),c(),l(3,"div",81)(4,"table")(5,"thead")(6,"tr")(7,"th"),d(8,"\u0627\u0644\u064A\u0648\u0645"),c(),l(9,"th"),d(10,"\u0627\u0644\u0648\u0642\u062A"),c(),l(11,"th"),d(12,"\u0627\u0644\u0642\u0627\u0639\u0629"),c(),l(13,"th"),d(14,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),c()()(),l(15,"tbody"),ee(16,n5,10,3,"tr",82),c()()()()),n&2){let t=E(3);g(16),R("ngForOf",t.newClass.schedule)}}function r5(n,e){if(n&1){let t=Me();l(0,"div",39)(1,"h2",12),d(2,"\u2795 \u0625\u0646\u0634\u0627\u0621 \u062D\u0635\u0629 \u062C\u062F\u064A\u062F\u0629"),c(),l(3,"div",40)(4,"div",41)(5,"h3"),d(6,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u062D\u0635\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629"),c()(),l(7,"div",42)(8,"div",43)(9,"label",44),d(10,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629:"),c(),l(11,"input",45),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.newClass.name,r)||(o.newClass.name=r),D(r)}),c()(),l(12,"div",43)(13,"label",46),d(14,"\u0627\u0644\u0645\u0627\u062F\u0629:"),c(),l(15,"select",47),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.newClass.subject,r)||(o.newClass.subject=r),D(r)}),l(16,"option",18),d(17,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0627\u062F\u0629"),c(),l(18,"option",27),d(19,"\u0631\u064A\u0627\u0636\u064A\u0627\u062A"),c(),l(20,"option",28),d(21,"\u0641\u064A\u0632\u064A\u0627\u0621"),c(),l(22,"option",29),d(23,"\u0639\u0644\u0648\u0645"),c(),l(24,"option",30),d(25,"\u0644\u063A\u0629 \u0639\u0631\u0628\u064A\u0629"),c(),l(26,"option",31),d(27,"\u0644\u063A\u0629 \u0641\u0631\u0646\u0633\u064A\u0629"),c(),l(28,"option",32),d(29,"\u0644\u063A\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629"),c(),l(30,"option",48),d(31,"\u062A\u0627\u0631\u064A\u062E"),c(),l(32,"option",49),d(33,"\u062C\u063A\u0631\u0627\u0641\u064A\u0627"),c(),l(34,"option",50),d(35,"\u0641\u0644\u0633\u0641\u0629"),c(),l(36,"option",51),d(37,"\u0625\u0639\u0644\u0627\u0645 \u0622\u0644\u064A"),c()()()(),l(38,"div",42)(39,"div",43)(40,"label",52),d(41,"\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062F\u0631\u0627\u0633\u064A\u0629:"),c(),l(42,"select",53),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.newClass.academicYear,r)||(o.newClass.academicYear=r),D(r)}),l(43,"option",18),d(44,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0633\u0646\u0629"),c(),l(45,"option",19),d(46,"\u0627\u0644\u0623\u0648\u0644\u0649 \u062B\u0627\u0646\u0648\u064A"),c(),l(47,"option",20),d(48,"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u062B\u0627\u0646\u0648\u064A"),c(),l(49,"option",21),d(50,"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u062B\u0627\u0646\u0648\u064A"),c(),l(51,"option",22),d(52,"\u0627\u0644\u0623\u0648\u0644\u0649 \u0645\u062A\u0648\u0633\u0637"),c(),l(53,"option",23),d(54,"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0645\u062A\u0648\u0633\u0637"),c(),l(55,"option",24),d(56,"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u0645\u062A\u0648\u0633\u0637"),c(),l(57,"option",25),d(58,"\u0627\u0644\u0631\u0627\u0628\u0639\u0629 \u0645\u062A\u0648\u0633\u0637"),c(),l(59,"option",26),d(60,"\u0627\u0644\u062E\u0627\u0645\u0633\u0629 \u0645\u062A\u0648\u0633\u0637"),c(),l(61,"option",54),d(62,"\u0627\u0644\u0623\u0648\u0644\u0649 \u0625\u0628\u062A\u062F\u0627\u0626\u064A"),c(),l(63,"option",55),d(64,"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0625\u0628\u062A\u062F\u0627\u0626\u064A"),c(),l(65,"option",56),d(66,"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u0625\u0628\u062A\u062F\u0627\u0626\u064A"),c(),l(67,"option",57),d(68,"\u0627\u0644\u0631\u0627\u0628\u0639\u0629 \u0625\u0628\u062A\u062F\u0627\u0626\u064A"),c(),l(69,"option",58),d(70,"\u0627\u0644\u062E\u0627\u0645\u0633\u0629 \u0625\u0628\u062A\u062F\u0627\u0626\u064A"),c(),l(71,"option",59),d(72,"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),c()()(),l(73,"div",43)(74,"label",60),d(75,"\u0627\u0644\u0633\u0639\u0631 (\u062F.\u062C):"),c(),l(76,"input",61),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.newClass.price,r)||(o.newClass.price=r),D(r)}),c()()(),l(77,"div",42)(78,"div",43)(79,"label",62),d(80,"\u0627\u0644\u0645\u0639\u0644\u0645:"),c(),l(81,"select",63),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.newClass.teacher,r)||(o.newClass.teacher=r),D(r)}),l(82,"option",18),d(83,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0639\u0644\u0645"),c(),ee(84,KL,2,3,"option",33),c()()(),l(85,"div",64)(86,"label",65),d(87,"\u0648\u0635\u0641 \u0627\u0644\u062D\u0635\u0629:"),c(),l(88,"textarea",66),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.newClass.description,r)||(o.newClass.description=r),D(r)}),c()(),l(89,"div",41)(90,"h3"),d(91,"\u{1F4C5} \u062C\u062F\u0648\u0644 \u0627\u0644\u062D\u0635\u0635"),c(),l(92,"button",35),O("click",function(){T(t);let r=E(2);return D(r.showScheduleForm=!r.showScheduleForm)}),d(93),c()(),ee(94,t5,27,7,"div",67)(95,i5,17,1,"div",68),l(96,"div",69)(97,"button",13),O("click",function(){T(t);let r=E(2);return D(r.createClass())}),d(98," \u{1F4BE} \u062D\u0641\u0638 \u0627\u0644\u062D\u0635\u0629 "),c(),l(99,"button",35),O("click",function(){T(t);let r=E(2);return D(r.resetNewClassForm())}),d(100," \u{1F504} \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),c(),l(101,"button",70),O("click",function(){T(t);let r=E(2);return D(r.isCreatingClass=!1)}),d(102," \u274C \u0625\u0644\u063A\u0627\u0621 "),c()()()()}if(n&2){let t=E(2);g(11),de("ngModel",t.newClass.name),g(4),de("ngModel",t.newClass.subject),g(27),de("ngModel",t.newClass.academicYear),g(34),de("ngModel",t.newClass.price),g(5),de("ngModel",t.newClass.teacher),g(3),R("ngForOf",t.teachers),g(4),de("ngModel",t.newClass.description),g(5),K(" ",t.showScheduleForm?"\u0625\u062E\u0641\u0627\u0621 \u0627\u0644\u0646\u0645\u0648\u0630\u062C":"\u2795 \u0625\u0636\u0627\u0641\u0629 \u062C\u062F\u0648\u0644"," "),g(),R("ngIf",t.showScheduleForm),g(),R("ngIf",t.newClass.schedule&&t.newClass.schedule.length>0)}}function o5(n,e){if(n&1&&(l(0,"option",71),d(1),c()),n&2){let t=e.$implicit;R("value",t._id),g(),K(" ",t.name," ")}}function s5(n,e){if(n&1){let t=Me();l(0,"div",84),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.selectClass(r))}),l(1,"div",85)(2,"h3"),d(3),c(),l(4,"span",86),d(5),c()(),l(6,"div",87)(7,"div",88)(8,"span",89),d(9,"\u0627\u0644\u0645\u0627\u062F\u0629:"),c(),l(10,"span",90),d(11),c()(),l(12,"div",88)(13,"span",89),d(14,"\u0627\u0644\u0633\u0646\u0629:"),c(),l(15,"span",90),d(16),c()(),l(17,"div",88)(18,"span",89),d(19,"\u0627\u0644\u0633\u0639\u0631:"),c(),l(20,"span",91),d(21),c()(),l(22,"div",88)(23,"span",89),d(24,"\u0627\u0644\u0645\u0639\u0644\u0645:"),c(),l(25,"span",90),d(26),c()(),l(27,"div",88)(28,"span",89),d(29,"\u0627\u0644\u062C\u062F\u0648\u0644:"),c(),l(30,"span",90),d(31),c()()(),l(32,"div",92)(33,"button",93),O("click",function(r){let o=T(t).$implicit;return E(2).selectClass(o),D(r.stopPropagation())}),d(34," \u{1F441}\uFE0F \u062A\u0641\u0627\u0635\u064A\u0644 "),c(),l(35,"button",83),O("click",function(r){let o=T(t).$implicit;return E(2).deleteClass(o._id),D(r.stopPropagation())}),d(36," \u{1F5D1}\uFE0F \u062D\u0630\u0641 "),c()()()}if(n&2){let t=e.$implicit,i=E(2);Ue("selected",(i.selectedClass==null?null:i.selectedClass._id)===t._id),g(3),te(t.name),g(),Ue("active",t.students&&t.students.length>0||!1),g(),K(" ",t.students&&t.students.length||0," \u0637\u0627\u0644\u0628 "),g(6),te(t.subject),g(5),te(t.academicYear),g(5),K("",t.price," \u062F.\u062C"),g(5),te(i.getTeacherName(t.teacher)),g(5),K(" ",t.schedule&&t.schedule.length||0," \u062C\u0644\u0633\u0629 ")}}function a5(n,e){if(n&1){let t=Me();l(0,"button",108),O("click",function(){T(t);let r=E(3);return D(r.isCreatingLiveClass=!0)}),d(1," \u{1F3A5} \u0625\u0646\u0634\u0627\u0621 \u062D\u0635\u0629 \u062D\u064A\u0629 "),c()}}function l5(n,e){if(n&1){let t=Me();l(0,"div",109)(1,"div",42)(2,"div",43)(3,"label"),d(4,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629:"),c(),l(5,"input",110),fe("ngModelChange",function(r){T(t);let o=E(3);return he(o.selectedClass.name,r)||(o.selectedClass.name=r),D(r)}),c()(),l(6,"div",43)(7,"label"),d(8,"\u0627\u0644\u0633\u0639\u0631:"),c(),l(9,"input",111),fe("ngModelChange",function(r){T(t);let o=E(3);return he(o.selectedClass.price,r)||(o.selectedClass.price=r),D(r)}),c()()(),l(10,"div",64)(11,"label"),d(12,"\u0627\u0644\u0648\u0635\u0641:"),c(),l(13,"textarea",112),fe("ngModelChange",function(r){T(t);let o=E(3);return he(o.selectedClass.description,r)||(o.selectedClass.description=r),D(r)}),c()(),l(14,"div",69)(15,"button",13),O("click",function(){T(t);let r=E(3);return D(r.updateClass())}),d(16," \u{1F4BE} \u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A "),c(),l(17,"button",35),O("click",function(){T(t);let r=E(3);return D(r.isEditingClass=!1)}),d(18," \u274C \u0625\u0644\u063A\u0627\u0621 "),c()()()}if(n&2){let t=E(3);g(5),de("ngModel",t.selectedClass.name),g(4),de("ngModel",t.selectedClass.price),g(4),de("ngModel",t.selectedClass.description)}}function c5(n,e){if(n&1&&(l(0,"tr")(1,"td"),d(2),c(),l(3,"td"),d(4),c(),l(5,"td"),d(6),c()()),n&2){let t=e.$implicit,i=E(4);g(2),te(t.day),g(2),te(t.time),g(2),te(i.getClassroomName(t.classroom))}}function u5(n,e){if(n&1&&(l(0,"div",113)(1,"h3"),d(2,"\u{1F4C5} \u062C\u062F\u0648\u0644 \u0627\u0644\u062D\u0635\u0635"),c(),l(3,"div",81)(4,"table")(5,"thead")(6,"tr")(7,"th"),d(8,"\u0627\u0644\u064A\u0648\u0645"),c(),l(9,"th"),d(10,"\u0627\u0644\u0648\u0642\u062A"),c(),l(11,"th"),d(12,"\u0627\u0644\u0642\u0627\u0639\u0629"),c()()(),l(13,"tbody"),ee(14,c5,7,3,"tr",82),c()()()()),n&2){let t=E(3);g(14),R("ngForOf",t.selectedClass.schedule)}}function d5(n,e){if(n&1&&(l(0,"option",114),d(1),c()),n&2){let t=e.$implicit;R("ngValue",t),g(),bs(" ",t.name," - ",t.academicYear," - ",t.parentPhone," ")}}function f5(n,e){if(n&1){let t=Me();l(0,"tr")(1,"td"),d(2),c(),l(3,"td"),d(4),c(),l(5,"td"),d(6),c(),l(7,"td"),d(8),c(),l(9,"td"),d(10),c(),l(11,"td")(12,"button",83),O("click",function(){let r=T(t).$implicit,o=E(3);return D(o.unenrollStudent(r._id||r))}),d(13," \u{1F5D1}\uFE0F \u0625\u0632\u0627\u0644\u0629 "),c()()()}if(n&2){let t=e.$implicit,i=E(3);g(2),te(i.getStudentName(t)),g(2),te(i.getStudentId(t)),g(2),te(i.getStudentAcademicYear(t)),g(2),te(i.getStudentParentName(t)),g(2),te(i.getStudentParentPhone(t))}}function h5(n,e){n&1&&(l(0,"tr")(1,"td",115),d(2,"\u0644\u0627 \u064A\u0648\u062C\u062F \u0637\u0644\u0627\u0628 \u0645\u0633\u062C\u0644\u064A\u0646 \u0641\u064A \u0647\u0630\u0647 \u0627\u0644\u062D\u0635\u0629"),c()())}function p5(n,e){if(n&1){let t=Me();l(0,"div",94)(1,"h2",12),d(2),c(),l(3,"div",95)(4,"div",96)(5,"div",97)(6,"button",13),O("click",function(){T(t);let r=E(2);return D(r.isEditingClass=!r.isEditingClass)}),d(7," \u270F\uFE0F \u062A\u0639\u062F\u064A\u0644 "),c(),ee(8,a5,2,0,"button",98),l(9,"button",35),O("click",function(){T(t);let r=E(2);return D(r.selectedClass=null)}),d(10," \u2716\uFE0F \u0625\u063A\u0644\u0627\u0642 "),c()()(),ee(11,l5,19,3,"div",99),l(12,"div",100)(13,"div",101)(14,"div",102)(15,"strong"),d(16,"\u0627\u0644\u0645\u0627\u062F\u0629:"),c(),d(17),c(),l(18,"div",102)(19,"strong"),d(20,"\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062F\u0631\u0627\u0633\u064A\u0629:"),c(),d(21),c(),l(22,"div",102)(23,"strong"),d(24,"\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0634\u0647\u0631\u064A:"),c(),d(25),c(),l(26,"div",102)(27,"strong"),d(28,"\u0627\u0644\u0645\u0639\u0644\u0645:"),c(),d(29),c(),l(30,"div",102)(31,"strong"),d(32,"\u0639\u062F\u062F \u0627\u0644\u0637\u0644\u0627\u0628:"),c(),d(33),c()(),ee(34,u5,15,1,"div",103),l(35,"div",104)(36,"h3"),d(37,"\u2795 \u0625\u0636\u0627\u0641\u0629 \u0637\u0627\u0644\u0628 \u0644\u0644\u062D\u0635\u0629"),c(),l(38,"div",42)(39,"div",43)(40,"label"),d(41,"\u0627\u062E\u062A\u0631 \u0637\u0627\u0644\u0628\u0627\u064B:"),c(),l(42,"select",17),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.selectedStudent,r)||(o.selectedStudent=r),D(r)}),l(43,"option",18),d(44,"\u0627\u062E\u062A\u0631 \u0637\u0627\u0644\u0628\u0627\u064B"),c(),ee(45,d5,2,4,"option",105),c()(),l(46,"div",43)(47,"button",79),O("click",function(){T(t);let r=E(2);return D(r.enrollStudent(r.selectedStudent))}),d(48," \u2795 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0637\u0627\u0644\u0628 "),c()()()(),l(49,"div",106)(50,"h3"),d(51),c(),l(52,"div",81)(53,"table")(54,"thead")(55,"tr")(56,"th"),d(57,"\u0627\u0644\u0627\u0633\u0645"),c(),l(58,"th"),d(59,"\u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628"),c(),l(60,"th"),d(61,"\u0627\u0644\u0633\u0646\u0629"),c(),l(62,"th"),d(63,"\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631"),c(),l(64,"th"),d(65,"\u0627\u0644\u0647\u0627\u062A\u0641"),c(),l(66,"th"),d(67,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),c()()(),l(68,"tbody"),ee(69,f5,14,5,"tr",82)(70,h5,3,0,"tr",107),c()()()()()()()}if(n&2){let t=E(2);g(2),K("\u{1F4CB} \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062D\u0635\u0629: ",t.selectedClass.name,""),g(6),R("ngIf",!t.isCreatingLiveClass),g(3),R("ngIf",t.isEditingClass),g(6),K(" ",t.selectedClass.subject," "),g(4),K(" ",t.selectedClass.academicYear," "),g(4),K(" ",t.selectedClass.price," \u062F.\u062C "),g(4),K(" ",t.getTeacherName(t.selectedClass.teacher)," "),g(4),K(" ",t.selectedClass.students&&t.selectedClass.students.length||0," \u0637\u0627\u0644\u0628 "),g(),R("ngIf",t.selectedClass.schedule&&t.selectedClass.schedule.length>0),g(8),de("ngModel",t.selectedStudent),g(3),R("ngForOf",t.availableStudents),g(2),R("disabled",!t.selectedStudent),g(4),K("\u{1F468}\u200D\u{1F393} \u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u0645\u0633\u062C\u0644\u064A\u0646 (",t.selectedClass.students&&t.selectedClass.students.length||0,")"),g(18),R("ngForOf",t.selectedClass.students||Cs(15,pE)),g(),R("ngIf",!t.selectedClass.students||t.selectedClass.students.length===0)}}function m5(n,e){if(n&1){let t=Me();l(0,"div",8),ee(1,r5,103,10,"div",9),l(2,"div",10)(3,"div",11)(4,"h2",12),d(5),c(),l(6,"button",13),O("click",function(){T(t);let r=E();return D(r.isCreatingClass=!0)}),d(7," \u2795 \u0625\u0646\u0634\u0627\u0621 \u062D\u0635\u0629 \u062C\u062F\u064A\u062F\u0629 "),c()(),l(8,"div",14)(9,"div",15)(10,"div",16)(11,"label"),d(12,"\u062A\u0635\u0641\u064A\u0629 \u062D\u0633\u0628:"),c(),l(13,"select",17),fe("ngModelChange",function(r){T(t);let o=E();return he(o.classFilter.academicYear,r)||(o.classFilter.academicYear=r),D(r)}),l(14,"option",18),d(15,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0633\u0646\u0648\u0627\u062A"),c(),l(16,"option",19),d(17,"\u0627\u0644\u0623\u0648\u0644\u0649 \u062B\u0627\u0646\u0648\u064A"),c(),l(18,"option",20),d(19,"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u062B\u0627\u0646\u0648\u064A"),c(),l(20,"option",21),d(21,"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u062B\u0627\u0646\u0648\u064A"),c(),l(22,"option",22),d(23,"\u0627\u0644\u0623\u0648\u0644\u0649 \u0645\u062A\u0648\u0633\u0637"),c(),l(24,"option",23),d(25,"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0645\u062A\u0648\u0633\u0637"),c(),l(26,"option",24),d(27,"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u0645\u062A\u0648\u0633\u0637"),c(),l(28,"option",25),d(29,"\u0627\u0644\u0631\u0627\u0628\u0639\u0629 \u0645\u062A\u0648\u0633\u0637"),c(),l(30,"option",26),d(31,"\u0627\u0644\u062E\u0627\u0645\u0633\u0629 \u0645\u062A\u0648\u0633\u0637"),c()()(),l(32,"div",16)(33,"select",17),fe("ngModelChange",function(r){T(t);let o=E();return he(o.classFilter.subject,r)||(o.classFilter.subject=r),D(r)}),l(34,"option",18),d(35,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0648\u0627\u062F"),c(),l(36,"option",27),d(37,"\u0631\u064A\u0627\u0636\u064A\u0627\u062A"),c(),l(38,"option",28),d(39,"\u0641\u064A\u0632\u064A\u0627\u0621"),c(),l(40,"option",29),d(41,"\u0639\u0644\u0648\u0645"),c(),l(42,"option",30),d(43,"\u0644\u063A\u0629 \u0639\u0631\u0628\u064A\u0629"),c(),l(44,"option",31),d(45,"\u0644\u063A\u0629 \u0641\u0631\u0646\u0633\u064A\u0629"),c(),l(46,"option",32),d(47,"\u0644\u063A\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629"),c()()(),l(48,"div",16)(49,"select",17),fe("ngModelChange",function(r){T(t);let o=E();return he(o.classFilter.teacher,r)||(o.classFilter.teacher=r),D(r)}),l(50,"option",18),d(51,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0639\u0644\u0645\u064A\u0646"),c(),ee(52,o5,2,2,"option",33),c()(),l(53,"div",34)(54,"button",13),O("click",function(){T(t);let r=E();return D(r.applyClassFilter())}),d(55," \u{1F50D} \u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u062A\u0635\u0641\u064A\u0629 "),c(),l(56,"button",35),O("click",function(){T(t);let r=E();return D(r.resetClassFilter())}),d(57," \u267B\uFE0F \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),c()()()(),l(58,"div",36),ee(59,s5,37,11,"div",37),c()(),ee(60,p5,71,16,"div",38),c()}if(n&2){let t=E();g(),R("ngIf",t.isCreatingClass),g(4),K("\u{1F4CB} \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u062D\u0635\u0635 (",t.classes.length,")"),g(8),de("ngModel",t.classFilter.academicYear),g(20),de("ngModel",t.classFilter.subject),g(16),de("ngModel",t.classFilter.teacher),g(3),R("ngForOf",t.teachers),g(7),R("ngForOf",t.classes),g(),R("ngIf",t.selectedClass)}}function g5(n,e){if(n&1){let t=Me();l(0,"div",39)(1,"div",121)(2,"h2",12),d(3),c(),l(4,"button",35),O("click",function(){T(t);let r=E(2);return D(r.isCreatingLiveClass=!1)}),d(5," \u2716\uFE0F \u0625\u0644\u063A\u0627\u0621 "),c()(),l(6,"div",40)(7,"div",42)(8,"div",43)(9,"label",122),d(10,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E:"),c(),l(11,"input",123),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.newLiveClass.date,r)||(o.newLiveClass.date=r),D(r)}),c()(),l(12,"div",43)(13,"label",124),d(14,"\u0648\u0642\u062A \u0627\u0644\u0628\u062F\u0627\u064A\u0629:"),c(),l(15,"input",125),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.newLiveClass.startTime,r)||(o.newLiveClass.startTime=r),D(r)}),c()()(),l(16,"div",64)(17,"label",126),d(18,"\u0627\u0644\u062D\u0627\u0644\u0629:"),c(),l(19,"select",127),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.newLiveClass.status,r)||(o.newLiveClass.status=r),D(r)}),l(20,"option",116),d(21,"\u0645\u062C\u062F\u0648\u0644\u0629"),c(),l(22,"option",117),d(23,"\u062C\u0627\u0631\u064A\u0629"),c(),l(24,"option",118),d(25,"\u0645\u0646\u062A\u0647\u064A\u0629"),c()()(),l(26,"div",69)(27,"button",13),O("click",function(){T(t);let r=E(2);return D(r.createLiveClass())}),d(28," \u{1F4BE} \u062D\u0641\u0638 \u0627\u0644\u062D\u0635\u0629 \u0627\u0644\u062D\u064A\u0629 "),c(),l(29,"button",35),O("click",function(){T(t);let r=E(2);return D(r.resetNewLiveClassForm())}),d(30," \u{1F504} \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),c()()()()}if(n&2){let t=E(2);g(3),K("\u2795 \u0625\u0646\u0634\u0627\u0621 \u062D\u0635\u0629 \u062D\u064A\u0629 \u0644\u0644\u062D\u0635\u0629: ",t.selectedClass.name,""),g(8),de("ngModel",t.newLiveClass.date),g(4),de("ngModel",t.newLiveClass.startTime),g(4),de("ngModel",t.newLiveClass.status)}}function _5(n,e){if(n&1){let t=Me();l(0,"button",83),O("click",function(r){T(t);let o=E().$implicit;return E(2).cancelLiveClass(o._id),D(r.stopPropagation())}),d(1," \u274C \u0625\u0644\u063A\u0627\u0621 "),c()}}function v5(n,e){if(n&1){let t=Me();l(0,"button",131),O("click",function(r){T(t);let o=E().$implicit;return E(2).startLiveClass(o._id),D(r.stopPropagation())}),d(1," \u25B6\uFE0F \u0628\u062F\u0621 "),c()}}function x5(n,e){if(n&1){let t=Me();l(0,"button",132),O("click",function(r){T(t);let o=E().$implicit;return E(2).endLiveClass(o._id),D(r.stopPropagation())}),d(1," \u23F9\uFE0F \u0625\u0646\u0647\u0627\u0621 "),c()}}function y5(n,e){if(n&1){let t=Me();l(0,"div",84),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.selectLiveClass(r))}),l(1,"div",85)(2,"h3"),d(3),c(),l(4,"span",86),d(5),c()(),l(6,"div",87)(7,"div",88)(8,"span",89),d(9,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E:"),c(),l(10,"span",90),d(11),pn(12,"date"),c()(),l(13,"div",88)(14,"span",89),d(15,"\u0627\u0644\u0648\u0642\u062A:"),c(),l(16,"span",90),d(17),c()(),l(18,"div",88)(19,"span",89),d(20,"\u0627\u0644\u062D\u0636\u0648\u0631:"),c(),l(21,"span",90),d(22),c()(),l(23,"div",88)(24,"span",89),d(25,"\u0627\u0644\u0645\u0627\u062F\u0629:"),c(),l(26,"span",90),d(27),c()()(),l(28,"div",92)(29,"button",93),O("click",function(r){let o=T(t).$implicit;return E(2).viewAttendance(o),D(r.stopPropagation())}),d(30," \u{1F4DD} \u0627\u0644\u062D\u0636\u0648\u0631 "),c(),ee(31,_5,2,0,"button",128)(32,v5,2,0,"button",129)(33,x5,2,0,"button",130),c()()}if(n&2){let t=e.$implicit,i=E(2);Ue("selected",(i.selectedLiveClass==null?null:i.selectedLiveClass._id)===t._id),g(3),te((t.class==null?null:t.class.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),g(),vn("status-"+t.status),g(),K(" ",i.getStatusText(t.status)," "),g(6),te(gi(12,14,t.date,"dd/MM/yyyy")),g(6),te(t.startTime),g(5),Un(" ",i.getPresentCount(t)," / ",t.class&&t.class.students&&t.class.students.length||0," "),g(5),te((t.class==null?null:t.class.subject)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),g(4),R("ngIf",t.status==="scheduled"),g(),R("ngIf",t.status==="scheduled"),g(),R("ngIf",t.status==="ongoing")}}function b5(n,e){if(n&1){let t=Me();l(0,"div",8),ee(1,g5,31,4,"div",9),l(2,"div",10)(3,"h2",12),d(4),c(),l(5,"div",14)(6,"div",15)(7,"div",16)(8,"label"),d(9,"\u062A\u0635\u0641\u064A\u0629 \u062D\u0633\u0628:"),c(),l(10,"select",17),fe("ngModelChange",function(r){T(t);let o=E();return he(o.liveClassFilter.status,r)||(o.liveClassFilter.status=r),D(r)}),l(11,"option",18),d(12,"\u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0627\u0644\u0627\u062A"),c(),l(13,"option",116),d(14,"\u0645\u062C\u062F\u0648\u0644\u0629"),c(),l(15,"option",117),d(16,"\u062C\u0627\u0631\u064A\u0629"),c(),l(17,"option",118),d(18,"\u0645\u0646\u062A\u0647\u064A\u0629"),c(),l(19,"option",119),d(20,"\u0645\u0644\u063A\u0627\u0629"),c()()(),l(21,"div",16)(22,"input",120),fe("ngModelChange",function(r){T(t);let o=E();return he(o.liveClassFilter.date,r)||(o.liveClassFilter.date=r),D(r)}),c()(),l(23,"div",34)(24,"button",13),O("click",function(){T(t);let r=E();return D(r.applyLiveClassFilter())}),d(25," \u{1F50D} \u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u062A\u0635\u0641\u064A\u0629 "),c(),l(26,"button",35),O("click",function(){T(t);let r=E();return D(r.resetLiveClassFilter())}),d(27," \u267B\uFE0F \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),c()()()(),l(28,"div",36),ee(29,y5,34,17,"div",37),c()()()}if(n&2){let t=E();g(),R("ngIf",t.selectedClass&&t.isCreatingLiveClass),g(3),K("\u{1F3A5} \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u062D\u064A\u0629 (",t.liveClasses.length,")"),g(6),de("ngModel",t.liveClassFilter.status),g(12),de("ngModel",t.liveClassFilter.date),g(7),R("ngForOf",t.liveClasses)}}function C5(n,e){if(n&1&&(l(0,"div",141)(1,"div",142)(2,"div",3),d(3,"\u{1F465}"),c(),l(4,"div",4)(5,"h3"),d(6),c(),l(7,"p"),d(8,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0637\u0644\u0627\u0628"),c()()(),l(9,"div",142)(10,"div",3),d(11,"\u2705"),c(),l(12,"div",4)(13,"h3"),d(14),c(),l(15,"p"),d(16,"\u062D\u0627\u0636\u0631"),c()()(),l(17,"div",142)(18,"div",3),d(19,"\u274C"),c(),l(20,"div",4)(21,"h3"),d(22),c(),l(23,"p"),d(24,"\u063A\u0627\u0626\u0628"),c()()()()),n&2){let t=E(2);g(6),te(t.selectedLiveClass.class&&t.selectedLiveClass.class.students&&t.selectedLiveClass.class.students.length||0),g(8),te(t.getPresentCount(t.selectedLiveClass)),g(8),te((t.selectedLiveClass.class&&t.selectedLiveClass.class.students&&t.selectedLiveClass.class.students.length||0)-t.getPresentCount(t.selectedLiveClass))}}function w5(n,e){if(n&1){let t=Me();l(0,"tr")(1,"td"),d(2),c(),l(3,"td"),d(4),c(),l(5,"td"),d(6),c(),l(7,"td"),d(8),c(),l(9,"td"),d(10),c(),l(11,"td"),d(12),c(),l(13,"td")(14,"span",145),d(15),c()(),l(16,"td")(17,"div",146)(18,"button",131),O("click",function(){let r=T(t).$implicit,o=E(3);return D(o.recordAttendance(r,"present"))}),d(19," \u2705 \u062D\u0627\u0636\u0631 "),c(),l(20,"button",83),O("click",function(){let r=T(t).$implicit,o=E(3);return D(o.recordAttendance(r,"absent"))}),d(21," \u274C \u063A\u0627\u0626\u0628 "),c(),l(22,"button",132),O("click",function(){let r=T(t).$implicit,o=E(3);return D(o.recordAttendance(r,"late"))}),d(23," \u23F0 \u0645\u062A\u0623\u062E\u0631 "),c()()()()}if(n&2){let t=e.$implicit,i=e.index,r=E(3);vn(r.getAttendanceStatusClass(t)),g(2),te(i+1),g(2),te(r.getStudentName(t)),g(2),te(r.getStudentId(t)),g(2),te(r.getStudentAcademicYear(t)),g(2),te(r.getStudentParentName(t)),g(2),te(r.getStudentParentPhone(t)),g(2),vn("status-"+r.getAttendanceStatus(t)),g(),K(" ",r.getAttendanceStatus(t)," ")}}function M5(n,e){if(n&1&&(l(0,"div",143)(1,"div",81)(2,"table")(3,"thead")(4,"tr")(5,"th"),d(6,"#"),c(),l(7,"th"),d(8,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628"),c(),l(9,"th"),d(10,"\u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628"),c(),l(11,"th"),d(12,"\u0627\u0644\u0633\u0646\u0629"),c(),l(13,"th"),d(14,"\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631"),c(),l(15,"th"),d(16,"\u0627\u0644\u0647\u0627\u062A\u0641"),c(),l(17,"th"),d(18,"\u0627\u0644\u062D\u0627\u0644\u0629"),c(),l(19,"th"),d(20,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),c()()(),l(21,"tbody"),ee(22,w5,24,11,"tr",144),c()()()()),n&2){let t=E(2);g(22),R("ngForOf",t.selectedLiveClass.class.students)}}function S5(n,e){if(n&1){let t=Me();l(0,"div",147)(1,"div",148),d(2,"\u{1F468}\u200D\u{1F393}"),c(),l(3,"h3"),d(4,"\u0644\u0627 \u064A\u0648\u062C\u062F \u0637\u0644\u0627\u0628 \u0645\u0633\u062C\u0644\u064A\u0646 \u0641\u064A \u0647\u0630\u0647 \u0627\u0644\u062D\u0635\u0629"),c(),l(5,"p"),d(6,"\u064A\u062C\u0628 \u062A\u0633\u062C\u064A\u0644 \u0637\u0644\u0627\u0628 \u0641\u064A \u0627\u0644\u062D\u0635\u0629 \u0642\u0628\u0644 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062D\u0636\u0648\u0631"),c(),l(7,"button",13),O("click",function(){T(t);let r=E(2);return D(r.goToClassDetails())}),d(8," \u{1F4DA} \u0627\u0644\u0630\u0647\u0627\u0628 \u0644\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0644\u0627\u0628 "),c()()}}function E5(n,e){if(n&1){let t=Me();l(0,"div",8)(1,"div",133)(2,"div",134)(3,"h2",12),d(4,"\u{1F4DD} \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062D\u0636\u0648\u0631"),c(),l(5,"div",135)(6,"span"),d(7),c(),l(8,"span"),d(9),pn(10,"date"),c(),l(11,"span"),d(12),c()()(),l(13,"div",136)(14,"button",13),O("click",function(){T(t);let r=E();return D(r.autoMarkAbsent())}),d(15," \u26A1 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u063A\u064A\u0627\u0628 \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A "),c(),l(16,"button",35),O("click",function(){T(t);let r=E();return D(r.debugAttendance())}),d(17," \u{1F41B} \u062A\u0635\u062D\u064A\u062D "),c(),l(18,"button",70),O("click",function(){T(t);let r=E();return D(r.goToClassDetails())}),d(19," \u{1F4DA} \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062D\u0635\u0629 "),c(),l(20,"button",137),O("click",function(){T(t);let r=E();return r.selectedLiveClass=null,D(r.viewMode="liveClasses")}),d(21," \u2716\uFE0F \u0625\u063A\u0644\u0627\u0642 "),c()(),ee(22,C5,25,3,"div",138)(23,M5,23,1,"div",139)(24,S5,9,0,"div",140),c()()}if(n&2){let t=E();g(7),K("\u0627\u0644\u062D\u0635\u0629: ",t.selectedLiveClass.class==null?null:t.selectedLiveClass.class.name,""),g(2),K("\u0627\u0644\u062A\u0627\u0631\u064A\u062E: ",gi(10,6,t.selectedLiveClass.date,"dd/MM/yyyy"),""),g(3),K("\u0627\u0644\u0648\u0642\u062A: ",t.selectedLiveClass.startTime,""),g(10),R("ngIf",t.hasValidLiveClassData()),g(),R("ngIf",t.hasValidLiveClassData()&&t.selectedLiveClass.class&&t.selectedLiveClass.class.students),g(),R("ngIf",!t.hasValidLiveClassData())}}function A5(n,e){if(n&1){let t=Me();l(0,"tr")(1,"td"),d(2),c(),l(3,"td"),d(4),c(),l(5,"td"),d(6),c(),l(7,"td"),d(8),c(),l(9,"td"),d(10),c(),l(11,"td")(12,"button",93),O("click",function(){let r=T(t).$implicit,o=E(2);return o.selectClass(r),D(o.viewMode="classes")}),d(13," \u{1F441}\uFE0F \u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644 "),c()()()}if(n&2){let t=e.$implicit;g(2),te(t.name),g(2),te(t.subject),g(2),te(t.academicYear),g(2),K("",t.price," \u062F.\u062C"),g(2),te(t.schedule&&t.schedule.length||0)}}function T5(n,e){n&1&&(l(0,"tr")(1,"td",115),d(2,"\u0644\u0627 \u064A\u0648\u062C\u062F \u062D\u0635\u0635 \u0645\u0633\u062C\u0644\u0629 \u0644\u0647\u0630\u0627 \u0627\u0644\u0637\u0627\u0644\u0628"),c()())}function D5(n,e){if(n&1){let t=Me();l(0,"div",8)(1,"div",149)(2,"div",11)(3,"h2",12),d(4),c(),l(5,"button",35),O("click",function(){T(t);let r=E();return D(r.selectedStudent=null)}),d(6," \u2716\uFE0F \u0625\u063A\u0644\u0627\u0642 "),c()(),l(7,"div",150)(8,"div",101)(9,"div",102)(10,"strong"),d(11,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628:"),c(),d(12),c(),l(13,"div",102)(14,"strong"),d(15,"\u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628:"),c(),d(16),c(),l(17,"div",102)(18,"strong"),d(19,"\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062F\u0631\u0627\u0633\u064A\u0629:"),c(),d(20),c(),l(21,"div",102)(22,"strong"),d(23,"\u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u0633\u062C\u064A\u0644:"),c(),l(24,"span"),d(25),c()(),l(26,"div",102)(27,"strong"),d(28,"\u0627\u0633\u0645 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631:"),c(),d(29),c(),l(30,"div",102)(31,"strong"),d(32,"\u0647\u0627\u062A\u0641 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631:"),c(),d(33),c(),l(34,"div",102)(35,"strong"),d(36,"\u062F\u0641\u0639 \u0627\u0644\u062A\u0633\u062C\u064A\u0644:"),c(),l(37,"span"),d(38),c()(),l(39,"div",102)(40,"strong"),d(41,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0633\u062C\u064A\u0644:"),c(),d(42),pn(43,"date"),c()()(),l(44,"div",151)(45,"h3"),d(46,"\u{1F4DA} \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u0633\u062C\u0644 \u0641\u064A\u0647\u0627"),c(),l(47,"div",81)(48,"table")(49,"thead")(50,"tr")(51,"th"),d(52,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629"),c(),l(53,"th"),d(54,"\u0627\u0644\u0645\u0627\u062F\u0629"),c(),l(55,"th"),d(56,"\u0627\u0644\u0633\u0646\u0629"),c(),l(57,"th"),d(58,"\u0627\u0644\u0633\u0639\u0631"),c(),l(59,"th"),d(60,"\u0639\u062F\u062F \u0627\u0644\u062C\u0644\u0633\u0627\u062A"),c(),l(61,"th"),d(62,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),c()()(),l(63,"tbody"),ee(64,A5,14,5,"tr",82)(65,T5,3,0,"tr",107),c()()()()()()}if(n&2){let t=E();g(4),K("\u{1F468}\u200D\u{1F393} \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628: ",t.selectedStudent.name,""),g(8),K(" ",t.selectedStudent.name," "),g(4),K(" ",t.selectedStudent.studentId," "),g(4),K(" ",t.selectedStudent.academicYear," "),g(4),vn("status-"+t.selectedStudent.status),g(),K(" ",t.getStudentStatusText(t.selectedStudent.status)," "),g(4),K(" ",t.selectedStudent.parentName," "),g(4),K(" ",t.selectedStudent.parentPhone," "),g(4),vn(t.selectedStudent.hasPaidRegistration?"status-active":"status-inactive"),g(),K(" ",t.selectedStudent.hasPaidRegistration?"\u0645\u062F\u0641\u0648\u0639":"\u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639"," "),g(4),K(" ",gi(43,15,t.selectedStudent.registrationDate,"dd/MM/yyyy")," "),g(22),R("ngForOf",t.selectedStudent.classes||Cs(18,pE)),g(),R("ngIf",!t.selectedStudent.classes||t.selectedStudent.classes.length===0)}}var x0=class n{constructor(e,t,i,r,o){this.classesService=e;this.studentsService=t;this.liveClassesService=i;this.paymentsService=r;this.http=o}classes=[];students=[];liveClasses=[];availableStudents=[];teachers=[];classrooms=[];selectedClass=null;selectedLiveClass=null;selectedStudent=null;newClass={name:"",subject:"",description:"",academicYear:"",price:0,schedule:[],teacher:"",students:[]};newLiveClass={date:new Date().toISOString().split("T")[0],startTime:"08:00",status:"scheduled"};newScheduleItem={day:"",time:"",classroom:""};daysOfWeek=[{value:"\u0627\u0644\u0633\u0628\u062A",label:"\u0627\u0644\u0633\u0628\u062A"},{value:"\u0627\u0644\u0623\u062D\u062F",label:"\u0627\u0644\u0623\u062D\u062F"},{value:"\u0627\u0644\u0625\u062B\u0646\u064A\u0646",label:"\u0627\u0644\u0625\u062B\u0646\u064A\u0646"},{value:"\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621",label:"\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621"},{value:"\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621",label:"\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621"},{value:"\u0627\u0644\u062E\u0645\u064A\u0633",label:"\u0627\u0644\u062E\u0645\u064A\u0633"},{value:"\u0627\u0644\u062C\u0645\u0639\u0629",label:"\u0627\u0644\u062C\u0645\u0639\u0629"}];timeSlots=[];viewMode="classes";isEditingClass=!1;isCreatingLiveClass=!1;isViewingAttendance=!1;showScheduleForm=!1;isCreatingClass=!1;classFilter={academicYear:"",subject:"",teacher:""};liveClassFilter={status:"",date:"",class:""};stats={totalClasses:0,totalStudents:0,totalLiveClasses:0,upcomingClasses:0};ngOnInit(){this.loadData(),this.generateTimeSlots()}loadData(){this.loadClasses(),this.loadStudents(),this.loadLiveClasses(),this.loadTeachers(),this.loadClassrooms(),this.calculateStats()}generateTimeSlots(){this.timeSlots=[];for(let e=8;e<=20;e++)for(let t=0;t<60;t+=30){let i=`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;this.timeSlots.push(i)}}loadClasses(){this.classesService.getClasses().subscribe({next:e=>{this.classes=e,this.stats.totalClasses=e.length},error:e=>{console.error("Error loading classes:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062D\u0635\u0635")}})}loadStudents(){this.studentsService.getStudents().subscribe({next:e=>{this.students=e,this.stats.totalStudents=e.length},error:e=>{console.error("Error loading students:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0637\u0644\u0627\u0628")}})}loadTeachers(){this.http.get("http://localhost:3000/api/teachers").subscribe({next:e=>{this.teachers=e},error:e=>{console.error("Error loading teachers:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0639\u0644\u0645\u064A\u0646")}})}loadClassrooms(){this.http.get("http://localhost:3000/api/classrooms").subscribe({next:e=>{this.classrooms=e},error:e=>{console.error("Error loading classrooms:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0642\u0627\u0639\u0627\u062A")}})}loadLiveClasses(){this.liveClassesService.getLiveClasses(this.liveClassFilter).subscribe({next:e=>{this.liveClasses=e,console.log("Live classes loaded:",e),e.forEach((t,i)=>{console.log(`Live class ${i+1}:`,{id:t._id,name:t.class?.name,hasClass:!!t.class,hasStudents:!!t.class?.students,studentCount:t.class?.students?.length||0,students:t.class?.students})}),this.stats.totalLiveClasses=e.length,this.stats.upcomingClasses=e.filter(t=>t.status==="scheduled"||t.status==="ongoing").length},error:e=>{console.error("Error loading live classes:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u062D\u064A\u0629")}})}hasValidLiveClassData(){return this.selectedLiveClass?(console.log("Selected live class:",{liveClass:this.selectedLiveClass,hasClass:!!this.selectedLiveClass.class,hasStudents:!!this.selectedLiveClass.class?.students,students:this.selectedLiveClass.class?.students}),!!this.selectedLiveClass.class?.students):!1}getPresentCount(e){return e.attendance?e.attendance.filter(t=>t.status==="present").length:0}getStudentName(e){return typeof e=="string"?this.students.find(i=>i._id===e||i.id===e)?.name||`\u0637\u0627\u0644\u0628 (${e.substring(0,8)}...)`:e?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}getStudentId(e){return typeof e=="string"?this.students.find(i=>i._id===e||i.id===e)?.studentId||e:e?.studentId||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}getStudentAcademicYear(e){return typeof e=="string"?this.students.find(i=>i._id===e||i.id===e)?.academicYear||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641":e?.academicYear||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}getStudentParentName(e){return typeof e=="string"?this.students.find(i=>i._id===e||i.id===e)?.parentName||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641":e?.parentName||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}getStudentParentPhone(e){return typeof e=="string"?this.students.find(i=>i._id===e||i.id===e)?.parentPhone||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641":e?.parentPhone||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}getStatusText(e){return{scheduled:"\u0645\u062C\u062F\u0648\u0644\u0629",ongoing:"\u062C\u0627\u0631\u064A\u0629",completed:"\u0645\u0646\u062A\u0647\u064A\u0629",cancelled:"\u0645\u0644\u063A\u0627\u0629"}[e]||e}getStudentStatusText(e){return{active:"\u0646\u0634\u0637",pending:"\u0642\u064A\u062F \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631",inactive:"\u063A\u064A\u0631 \u0646\u0634\u0637",banned:"\u0645\u062D\u0638\u0648\u0631"}[e]||e}getAttendanceStatus(e){if(console.log("Getting attendance status for student:",e),!this.selectedLiveClass||!this.selectedLiveClass.attendance)return console.log("No live class or attendance data"),"\u063A\u064A\u0631 \u0645\u0633\u062C\u0644";let t=typeof e=="string"?e:e?._id;if(!t)return console.log("No student ID found"),"\u063A\u0627\u0626\u0628";if(!Array.isArray(this.selectedLiveClass.attendance))return console.log("Attendance is not an array:",this.selectedLiveClass.attendance),"\u063A\u0627\u0626\u0628";let i=this.selectedLiveClass.attendance.find(o=>{if(!o||!o.student)return!1;let s=o.student;return typeof s=="string"?s===t:s?._id===t});return console.log("Found attendance:",i),i?{present:"\u062D\u0627\u0636\u0631",absent:"\u063A\u0627\u0626\u0628",late:"\u0645\u062A\u0623\u062E\u0631"}[i.status]||i.status:"\u063A\u0627\u0626\u0628"}getAttendanceStatusClass(e){if(!this.selectedLiveClass)return"";let t=typeof e=="string"?e:e?._id;if(!t)return"status-absent";let i=this.selectedLiveClass.attendance?.find(r=>{let o=r.student;return typeof o=="string"?o===t:o?._id===t});return i?`status-${i.status}`:"status-absent"}getStudentFullObject(e){return typeof e=="string"?this.students.find(t=>t._id===e)||null:e||null}selectClass(e){this.selectedClass=e,this.loadAvailableStudents(e._id)}addScheduleItem(){this.newScheduleItem.day&&this.newScheduleItem.time&&this.newScheduleItem.classroom?(this.newClass.schedule||(this.newClass.schedule=[]),this.newClass.schedule.push({day:this.newScheduleItem.day,time:this.newScheduleItem.time,classroom:this.newScheduleItem.classroom}),this.resetScheduleForm()):alert("\u0627\u0644\u0631\u062C\u0627\u0621 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644")}removeScheduleItem(e){this.newClass.schedule&&this.newClass.schedule.splice(e,1)}resetScheduleForm(){this.newScheduleItem={day:"",time:"",classroom:""}}createClass(){this.validateClass()&&this.classesService.createClass(this.newClass).subscribe({next:e=>{this.classes.push(e),this.resetNewClassForm(),this.isCreatingClass=!1,alert("\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D")},error:e=>{console.error("Error creating class:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062D\u0635\u0629")}})}updateClass(){!this.selectedClass||!this.validateClass()||this.classesService.updateClass(this.selectedClass._id,this.selectedClass).subscribe({next:e=>{let t=this.classes.findIndex(i=>i._id===e._id);t!==-1&&(this.classes[t]=e),this.isEditingClass=!1,alert("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D")},error:e=>{console.error("Error updating class:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062D\u0635\u0629")}})}deleteClass(e){confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u062D\u0635\u0629\u061F")&&this.classesService.deleteClass(e).subscribe({next:()=>{this.classes=this.classes.filter(t=>t._id!==e),this.selectedClass?._id===e&&(this.selectedClass=null),alert("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D")},error:t=>{console.error("Error deleting class:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u062D\u0630\u0641 \u0627\u0644\u062D\u0635\u0629")}})}loadAvailableStudents(e){this.classesService.getAvailableClasses("","").subscribe({next:t=>{let i=t.find(r=>r._id===e);if(i){let r=i.students?.map(o=>typeof o=="string"?o:o._id)||[];this.availableStudents=this.students.filter(o=>!r.includes(o._id))}},error:t=>{console.error("Error loading available students:",t)}})}enrollStudent(e){this.selectedClass&&confirm(`\u0647\u0644 \u062A\u0631\u064A\u062F \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628 ${e.name} \u0641\u064A \u0627\u0644\u062D\u0635\u0629 ${this.selectedClass.name}\u061F`)&&this.classesService.enrollStudent(this.selectedClass._id,e._id).subscribe({next:t=>{this.selectedClass&&(this.selectedClass.students||(this.selectedClass.students=[]),this.selectedClass.students.push(e),this.availableStudents=this.availableStudents.filter(i=>i._id!==e._id)),alert("\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D")},error:t=>{console.error("Error enrolling student:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628")}})}unenrollStudent(e){this.selectedClass&&confirm("\u0647\u0644 \u062A\u0631\u064A\u062F \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0637\u0627\u0644\u0628 \u0645\u0646 \u0647\u0630\u0647 \u0627\u0644\u062D\u0635\u0629\u061F")&&this.classesService.unenrollStudent(this.selectedClass._id,e).subscribe({next:()=>{this.selectedClass&&this.selectedClass.students&&(this.selectedClass.students=this.selectedClass.students.filter(t=>(typeof t=="string"?t:t._id)!==e),this.loadAvailableStudents(this.selectedClass._id)),alert("\u062A\u0645 \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D")},error:t=>{console.error("Error unenrolling student:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0637\u0627\u0644\u0628")}})}selectLiveClass(e){this.selectedLiveClass=e}createLiveClass(){if(!this.selectedClass||!this.validateLiveClass())return;let e=lt(xe({},this.newLiveClass),{class:this.selectedClass._id,teacher:this.selectedClass.teacher?._id||this.selectedClass.teacher});this.liveClassesService.createLiveClass(e).subscribe({next:t=>{this.liveClasses.push(t),this.isCreatingLiveClass=!1,this.resetNewLiveClassForm(),alert("\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 \u0627\u0644\u062D\u064A\u0629 \u0628\u0646\u062C\u0627\u062D")},error:t=>{console.error("Error creating live class:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 \u0627\u0644\u062D\u064A\u0629")}})}startLiveClass(e){this.liveClassesService.startLiveClass(e).subscribe({next:t=>{this.updateLiveClassInList(t),alert("\u062A\u0645 \u0628\u062F\u0621 \u0627\u0644\u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D")},error:t=>{console.error("Error starting live class:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u0628\u062F\u0621 \u0627\u0644\u062D\u0635\u0629")}})}endLiveClass(e){this.liveClassesService.endLiveClass(e).subscribe({next:t=>{this.updateLiveClassInList(t),alert("\u062A\u0645 \u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D")},error:t=>{console.error("Error ending live class:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062D\u0635\u0629")}})}cancelLiveClass(e){confirm("\u0647\u0644 \u062A\u0631\u064A\u062F \u0625\u0644\u063A\u0627\u0621 \u0647\u0630\u0647 \u0627\u0644\u062D\u0635\u0629\u061F")&&this.liveClassesService.cancelLiveClass(e).subscribe({next:t=>{this.updateLiveClassInList(t),alert("\u062A\u0645 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D")},error:t=>{console.error("Error canceling live class:",t),alert("\u0641\u0634\u0644 \u0641\u064A \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u0635\u0629")}})}viewAttendance(e){this.selectedLiveClass=e,this.viewMode="attendance"}recordAttendance(e,t){if(!this.selectedLiveClass)return;let i;if(typeof e=="string")i=e;else if(e?._id)i=e._id;else{console.error("Invalid student format:",e),alert("\u062E\u0637\u0623 \u0641\u064A \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628");return}let r={studentId:i,status:t,method:"manual"};this.liveClassesService.recordAttendance(this.selectedLiveClass._id,r).subscribe({next:o=>{if(this.selectedLiveClass){this.selectedLiveClass.attendance||(this.selectedLiveClass.attendance=[]);let s=this.selectedLiveClass.attendance.findIndex(a=>{let u=a.student;return typeof u=="string"?u===i:u?._id===i});if(s>=0)this.selectedLiveClass.attendance[s].status=t;else{let a=this.getStudentFullObject(i);this.selectedLiveClass.attendance.push({student:a||i,status:t,timestamp:new Date().toISOString(),method:"manual"})}}alert("\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062D\u0636\u0648\u0631 \u0628\u0646\u062C\u0627\u062D")},error:o=>{console.error("Error recording attendance:",o),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062D\u0636\u0648\u0631")}})}autoMarkAbsent(){this.selectedLiveClass&&confirm("\u0647\u0644 \u062A\u0631\u064A\u062F \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u063A\u064A\u0627\u0628 \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A \u0644\u0644\u0637\u0644\u0627\u0628 \u063A\u064A\u0631 \u0627\u0644\u062D\u0627\u0636\u0631\u064A\u0646\u061F")&&this.liveClassesService.autoMarkAbsent(this.selectedLiveClass._id).subscribe({next:e=>{alert(`\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 ${e.absentStudents?.length||0} \u0637\u0627\u0644\u0628 \u0643\u063A\u0627\u0626\u0628\u064A\u0646`),this.loadLiveClasses()},error:e=>{console.error("Error auto-marking absent:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u063A\u064A\u0627\u0628 \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A")}})}viewStudentPayments(e){this.selectedStudent=e,this.viewMode="students"}viewAttendanceForStudent(e){this.selectedStudent=e,this.viewMode="attendance",console.log("Viewing attendance for student:",e.name)}validateClass(){return!this.newClass.name||!this.newClass.subject||!this.newClass.academicYear||!this.newClass.price||!this.newClass.teacher||this.newClass.schedule&&this.newClass.schedule.length===0?(alert("\u0627\u0644\u0631\u062C\u0627\u0621 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u0648\u0625\u0636\u0627\u0641\u0629 \u062C\u062F\u0648\u0644 \u0627\u0644\u062D\u0635\u0635"),!1):!0}validateLiveClass(){return!this.newLiveClass.date||!this.newLiveClass.startTime?(alert("\u0627\u0644\u0631\u062C\u0627\u0621 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629"),!1):!0}resetNewClassForm(){this.newClass={name:"",subject:"",description:"",academicYear:"",price:0,schedule:[],teacher:"",students:[]},this.resetScheduleForm()}resetNewLiveClassForm(){this.newLiveClass={date:new Date().toISOString().split("T")[0],startTime:"08:00",status:"scheduled"}}updateLiveClassInList(e){let t=this.liveClasses.findIndex(i=>i._id===e._id);t!==-1&&(this.liveClasses[t]=e),this.selectedLiveClass?._id===e._id&&(this.selectedLiveClass=e)}applyClassFilter(){this.loadClasses()}applyLiveClassFilter(){this.loadLiveClasses()}resetClassFilter(){this.classFilter={academicYear:"",subject:"",teacher:""},this.loadClasses()}resetLiveClassFilter(){this.liveClassFilter={status:"",date:"",class:""},this.loadLiveClasses()}setViewMode(e){this.viewMode=e,this.isEditingClass=!1,this.isCreatingLiveClass=!1,this.isViewingAttendance=!1,this.isCreatingClass=!1}exportClassData(){console.log("Exporting class data...")}printAttendanceReport(){console.log("Printing attendance report...")}calculateStats(){}goToClassDetails(){if(this.selectedLiveClass?.class?._id){let e=this.classes.find(t=>t._id===this.selectedLiveClass?.class?._id);e&&(this.selectClass(e),this.setViewMode("classes"))}}debugAttendance(){console.log("=== Attendance Debug ==="),console.log("Selected live class:",this.selectedLiveClass),this.selectedLiveClass?.class?.students&&(console.log("Students in class:",this.selectedLiveClass.class.students),this.selectedLiveClass.class.students.forEach((e,t)=>{console.log(`Student ${t+1}:`,{id:e,name:this.getStudentName(e),attendanceStatus:this.getAttendanceStatus(e)})})),console.log("All students loaded:",this.students)}getTeacherName(e){return e?typeof e=="string"?this.teachers.find(i=>i._id===e)?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641":e?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641":"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}getClassroomName(e){return e?typeof e=="string"?this.classrooms.find(i=>i._id===e)?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641":e?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641":"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}static \u0275fac=function(t){return new(t||n)(we(Is),we(Cr),we(Os),we(Rs),we(bn))};static \u0275cmp=Jt({type:n,selectors:[["app-lesson-management"]],decls:47,vars:16,consts:[[1,"lesson-management-container"],[1,"stats-overview"],[1,"stat-card",3,"click"],[1,"stat-icon"],[1,"stat-info"],[1,"navigation-tabs"],[1,"tab-btn",3,"click"],["class","section-container",4,"ngIf"],[1,"section-container"],["class","form-section",4,"ngIf"],[1,"list-section"],[1,"section-header"],[1,"section-title"],[1,"btn","btn-primary",3,"click"],[1,"filter-section"],[1,"filter-row"],[1,"filter-group"],[3,"ngModelChange","ngModel"],["value",""],["value","1AS"],["value","2AS"],["value","3AS"],["value","1MS"],["value","2MS"],["value","3MS"],["value","4MS"],["value","5MS"],["value","\u0631\u064A\u0627\u0636\u064A\u0627\u062A"],["value","\u0641\u064A\u0632\u064A\u0627\u0621"],["value","\u0639\u0644\u0648\u0645"],["value","\u0644\u063A\u0629 \u0639\u0631\u0628\u064A\u0629"],["value","\u0644\u063A\u0629 \u0641\u0631\u0646\u0633\u064A\u0629"],["value","\u0644\u063A\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629"],[3,"value",4,"ngFor","ngForOf"],[1,"filter-actions"],[1,"btn","btn-secondary",3,"click"],[1,"grid-container"],["class","grid-card",3,"selected","click",4,"ngFor","ngForOf"],["class","detail-section",4,"ngIf"],[1,"form-section"],[1,"form-card"],[1,"form-section-header"],[1,"form-row"],[1,"form-group"],["for","className"],["type","text","id","className","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629",3,"ngModelChange","ngModel"],["for","classSubject"],["id","classSubject",3,"ngModelChange","ngModel"],["value","\u062A\u0627\u0631\u064A\u062E"],["value","\u062C\u063A\u0631\u0627\u0641\u064A\u0627"],["value","\u0641\u0644\u0633\u0641\u0629"],["value","\u0625\u0639\u0644\u0627\u0645 \u0622\u0644\u064A"],["for","academicYear"],["id","academicYear",3,"ngModelChange","ngModel"],["value","1AP"],["value","2AP"],["value","3AP"],["value","4AP"],["value","5AP"],["value","NS"],["for","classPrice"],["type","number","id","classPrice","placeholder","\u0623\u062F\u062E\u0644 \u0633\u0639\u0631 \u0627\u0644\u062D\u0635\u0629",3,"ngModelChange","ngModel"],["for","classTeacher"],["id","classTeacher",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["for","classDescription"],["id","classDescription","placeholder","\u0623\u062F\u062E\u0644 \u0648\u0635\u0641\u0627\u064B \u0644\u0644\u062D\u0635\u0629","rows","3",3,"ngModelChange","ngModel"],["class","schedule-form",4,"ngIf"],["class","schedule-table",4,"ngIf"],[1,"form-actions"],[1,"btn","btn-warning",3,"click"],[3,"value"],[1,"schedule-form"],["for","scheduleDay"],["id","scheduleDay",3,"ngModelChange","ngModel"],["for","scheduleTime"],["id","scheduleTime",3,"ngModelChange","ngModel"],["for","scheduleClassroom"],["id","scheduleClassroom",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click","disabled"],[1,"schedule-table"],[1,"table-container"],[4,"ngFor","ngForOf"],[1,"btn-action","btn-danger",3,"click"],[1,"grid-card",3,"click"],[1,"card-header"],[1,"status-badge"],[1,"card-body"],[1,"info-row"],[1,"label"],[1,"value"],[1,"value","price"],[1,"card-actions"],[1,"btn-action",3,"click"],[1,"detail-section"],[1,"detail-card"],[1,"detail-header"],[1,"header-actions"],["class","btn btn-success",3,"click",4,"ngIf"],["class","edit-form",4,"ngIf"],[1,"detail-body"],[1,"info-grid"],[1,"info-item"],["class","schedule-section",4,"ngIf"],[1,"add-student-form"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"students-list"],[4,"ngIf"],[1,"btn","btn-success",3,"click"],[1,"edit-form"],["type","text",3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],["rows","3",3,"ngModelChange","ngModel"],[1,"schedule-section"],[3,"ngValue"],["colspan","6",1,"empty-row"],["value","scheduled"],["value","ongoing"],["value","completed"],["value","cancelled"],["type","date","placeholder","\u0627\u0644\u062A\u0627\u0631\u064A\u062E",3,"ngModelChange","ngModel"],[1,"form-header"],["for","liveDate"],["type","date","id","liveDate",3,"ngModelChange","ngModel"],["for","startTime"],["type","time","id","startTime",3,"ngModelChange","ngModel"],["for","liveStatus"],["id","liveStatus",3,"ngModelChange","ngModel"],["class","btn-action btn-danger",3,"click",4,"ngIf"],["class","btn-action btn-success",3,"click",4,"ngIf"],["class","btn-action btn-warning",3,"click",4,"ngIf"],[1,"btn-action","btn-success",3,"click"],[1,"btn-action","btn-warning",3,"click"],[1,"attendance-section"],[1,"attendance-header"],[1,"header-info"],[1,"attendance-actions"],[1,"btn","btn-danger",3,"click"],["class","stats-cards",4,"ngIf"],["class","attendance-table",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"stats-cards"],[1,"stat-card"],[1,"attendance-table"],[3,"class",4,"ngFor","ngForOf"],[1,"attendance-status"],[1,"action-buttons"],[1,"empty-state"],[1,"empty-icon"],[1,"student-details-section"],[1,"student-info-card"],[1,"student-classes-section"]],template:function(t,i){t&1&&(l(0,"div",0)(1,"div",1)(2,"div",2),O("click",function(){return i.setViewMode("classes")}),l(3,"div",3),d(4,"\u{1F4DA}"),c(),l(5,"div",4)(6,"h3"),d(7),c(),l(8,"p"),d(9,"\u0627\u0644\u062D\u0635\u0635"),c()()(),l(10,"div",2),O("click",function(){return i.setViewMode("liveClasses")}),l(11,"div",3),d(12,"\u{1F3A5}"),c(),l(13,"div",4)(14,"h3"),d(15),c(),l(16,"p"),d(17,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u062D\u064A\u0629"),c()()(),l(18,"div",2),O("click",function(){return i.setViewMode("students")}),l(19,"div",3),d(20,"\u{1F468}\u200D\u{1F393}"),c(),l(21,"div",4)(22,"h3"),d(23),c(),l(24,"p"),d(25,"\u0627\u0644\u0637\u0644\u0627\u0628"),c()()(),l(26,"div",2),O("click",function(){return i.setViewMode("liveClasses")}),l(27,"div",3),d(28,"\u{1F4C5}"),c(),l(29,"div",4)(30,"h3"),d(31),c(),l(32,"p"),d(33,"\u062D\u0635\u0635 \u0642\u0627\u062F\u0645\u0629"),c()()()(),l(34,"div",5)(35,"button",6),O("click",function(){return i.setViewMode("classes")}),d(36," \u{1F4DA} \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062D\u0635\u0635 "),c(),l(37,"button",6),O("click",function(){return i.setViewMode("liveClasses")}),d(38," \u{1F3A5} \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u062D\u064A\u0629 "),c(),l(39,"button",6),O("click",function(){return i.setViewMode("attendance")}),d(40," \u{1F4DD} \u0627\u0644\u062D\u0636\u0648\u0631 \u0648\u0627\u0644\u063A\u064A\u0627\u0628 "),c(),l(41,"button",6),O("click",function(){return i.setViewMode("students")}),d(42," \u{1F468}\u200D\u{1F393} \u0627\u0644\u0637\u0644\u0627\u0628 "),c()(),ee(43,m5,61,8,"div",7)(44,b5,30,5,"div",7)(45,E5,25,9,"div",7)(46,D5,66,19,"div",7),c()),t&2&&(g(7),te(i.stats.totalClasses),g(8),te(i.stats.totalLiveClasses),g(8),te(i.stats.totalStudents),g(8),te(i.stats.upcomingClasses),g(4),Ue("active",i.viewMode==="classes"),g(2),Ue("active",i.viewMode==="liveClasses"),g(2),Ue("active",i.viewMode==="attendance"),g(2),Ue("active",i.viewMode==="students"),g(2),R("ngIf",i.viewMode==="classes"),g(),R("ngIf",i.viewMode==="liveClasses"),g(),R("ngIf",i.viewMode==="attendance"&&i.selectedLiveClass),g(),R("ngIf",i.viewMode==="students"&&i.selectedStudent))},dependencies:[cn,Yn,Tn,Vr,Zn,vi,xi,Rn,Wr,si,Xn,Bn],styles:[".lesson-management-container[_ngcontent-%COMP%]{padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;direction:rtl;background:#f5f7fa;min-height:100vh}.stats-overview[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 6px #0000001a;display:flex;align-items:center;gap:15px;cursor:pointer;transition:transform .3s,box-shadow .3s;border:2px solid transparent}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 6px 12px #00000026;border-color:#3498db}.stat-icon[_ngcontent-%COMP%]{font-size:2.5em;color:#3498db}.stat-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.8em;color:#2c3e50}.stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#7f8c8d;font-size:.9em}.navigation-tabs[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:30px;flex-wrap:wrap}.tab-btn[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;font-size:1em;font-weight:500;color:#555;transition:all .3s;display:flex;align-items:center;gap:8px}.tab-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;border-color:#3498db;color:#3498db}.tab-btn.active[_ngcontent-%COMP%]{background:#3498db;color:#fff;border-color:#3498db}.section-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 4px 12px #00000014;margin-bottom:30px}.section-title[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:20px;font-size:1.5em;border-bottom:2px solid #f0f0f0;padding-bottom:10px}.form-section[_ngcontent-%COMP%]{margin-bottom:30px}.form-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px;padding:25px;border:1px solid #e0e0e0}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:8px;color:#34495e;font-weight:500;font-size:.95em}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:12px 15px;border:2px solid #e0e0e0;border-radius:8px;font-size:1em;transition:border-color .3s;background:#fff}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.form-actions[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:25px;justify-content:flex-end}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;cursor:pointer;font-size:1em;font-weight:500;transition:all .3s;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:#3498db;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#2980b9;transform:translateY(-2px)}.btn-secondary[_ngcontent-%COMP%]{background:#95a5a6;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#7f8c8d}.btn-success[_ngcontent-%COMP%]{background:#27ae60;color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background:#219a52}.btn-danger[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:#c0392b}.btn-warning[_ngcontent-%COMP%]{background:#f39c12;color:#fff}.btn-warning[_ngcontent-%COMP%]:hover{background:#d68910}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;margin-top:20px}.grid-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 8px #0000001a;border:2px solid transparent;transition:all .3s;cursor:pointer}.grid-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 16px #00000026;border-color:#3498db}.grid-card.selected[_ngcontent-%COMP%]{border-color:#3498db;background:#f8f9ff}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:1.2em}.status-badge[_ngcontent-%COMP%]{padding:5px 12px;border-radius:20px;font-size:.8em;font-weight:500}.status-scheduled[_ngcontent-%COMP%]{background:#f1c40f;color:#7d6608}.status-ongoing[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.status-completed[_ngcontent-%COMP%]{background:#3498db;color:#fff}.status-cancelled[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.status-active[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.status-inactive[_ngcontent-%COMP%]{background:#95a5a6;color:#fff}.status-pending[_ngcontent-%COMP%]{background:#f39c12;color:#fff}.status-banned[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.card-body[_ngcontent-%COMP%]{color:#34495e}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px;padding-bottom:8px;border-bottom:1px solid #f0f0f0}.info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#7f8c8d;font-weight:500}.info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2c3e50;font-weight:600}.info-row[_ngcontent-%COMP%]   .value.price[_ngcontent-%COMP%]{color:#27ae60}.card-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:15px;flex-wrap:wrap}.btn-action[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;cursor:pointer;font-size:.9em;transition:all .3s;display:inline-flex;align-items:center;gap:5px;background:#ecf0f1;color:#34495e}.btn-action[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.filter-section[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:10px;margin-bottom:20px}.filter-row[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:200px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;color:#34495e;font-weight:500}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 15px;border:2px solid #e0e0e0;border-radius:8px;font-size:1em}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:auto}.detail-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 4px 12px #00000014;border:2px solid #f0f0f0}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #f0f0f0}.edit-form[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:10px;margin-bottom:20px}.detail-body[_ngcontent-%COMP%]{margin-top:20px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px;margin-bottom:25px}.info-item[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px;border-radius:8px;border-right:4px solid #3498db}.add-student-form[_ngcontent-%COMP%]{background:#e8f4fc;padding:20px;border-radius:10px;margin-bottom:25px;border:2px dashed #3498db}.table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:15px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a}thead[_ngcontent-%COMP%]{background:#3498db;color:#fff}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;text-align:right;font-weight:600}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f0f0f0;transition:background .3s}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9ff}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;text-align:right;color:#34495e}.attendance-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px}.attendance-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;flex-wrap:wrap;gap:15px}.header-info[_ngcontent-%COMP%]{display:flex;gap:25px;color:#34495e;font-weight:500}.attendance-actions[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:25px;flex-wrap:wrap}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-bottom:25px}.attendance-status[_ngcontent-%COMP%]{padding:5px 12px;border-radius:20px;font-size:.9em;font-weight:500}.status-present[_ngcontent-%COMP%]{background:#d5f4e6;color:#27ae60}.status-absent[_ngcontent-%COMP%]{background:#ffeaea;color:#e74c3c}.status-late[_ngcontent-%COMP%]{background:#fff3cd;color:#d68910}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:50px 20px;color:#7f8c8d}.empty-icon[_ngcontent-%COMP%]{font-size:4em;margin-bottom:20px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#34495e;margin-bottom:10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:25px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px}.student-info-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px;padding:25px;margin-bottom:25px}.student-classes-section[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;border:2px solid #f0f0f0}@media (max-width: 768px){.form-row[_ngcontent-%COMP%], .info-grid[_ngcontent-%COMP%], .stats-overview[_ngcontent-%COMP%], .grid-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.navigation-tabs[_ngcontent-%COMP%]{flex-direction:column}.tab-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.filter-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-group[_ngcontent-%COMP%]{min-width:auto}.attendance-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.header-info[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.section-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.loading[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.full-width[_ngcontent-%COMP%]{width:100%}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-20[_ngcontent-%COMP%]{margin-top:20px}.mb-20[_ngcontent-%COMP%]{margin-bottom:20px}.p-20[_ngcontent-%COMP%]{padding:20px}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:.8em;font-weight:500}.badge-primary[_ngcontent-%COMP%]{background:#3498db;color:#fff}.badge-success[_ngcontent-%COMP%]{background:#27ae60;color:#fff}.badge-warning[_ngcontent-%COMP%]{background:#f39c12;color:#fff}.badge-danger[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}"]})};var xn=ou(vc());function P5(n,e){if(n&1&&(l(0,"option",30),d(1),c()),n&2){let t=e.$implicit;R("value",t.value),g(),K(" ",t.label," ")}}function I5(n,e){n&1&&(l(0,"div",31),P(1,"div",32),l(2,"h3"),d(3,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628..."),c(),l(4,"p"),d(5,"\u064A\u0631\u062C\u0649 \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631 \u0642\u0644\u064A\u0644\u0627\u064B"),c()())}function O5(n,e){if(n&1){let t=Me();l(0,"div",33),P(1,"i",34),l(2,"h3"),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0637\u0644\u0627\u0628"),c(),l(4,"p"),d(5,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0637\u0644\u0627\u0628 \u0645\u0637\u0627\u0628\u0642\u064A\u0646 \u0644\u0628\u062D\u062B\u0643. \u062C\u0631\u0628 \u0645\u0635\u0637\u0644\u062D\u0627\u062A \u0628\u062D\u062B \u0645\u062E\u062A\u0644\u0641\u0629 \u0623\u0648 \u0633\u062C\u0644 \u0637\u0627\u0644\u0628\u0627\u064B \u062C\u062F\u064A\u062F\u0627\u064B."),c(),l(6,"div",35)(7,"button",7),O("click",function(){T(t);let r=E();return D(r.openRegistrationForm())}),P(8,"i",8),l(9,"span"),d(10,"\u0625\u0636\u0627\u0641\u0629 \u0637\u0627\u0644\u0628"),c()(),l(11,"button",9),O("click",function(){T(t);let r=E();return D(r.openBulkImportForm())}),P(12,"i",10),l(13,"span"),d(14,"\u0627\u0633\u062A\u064A\u0631\u0627\u062F \u062C\u0645\u0627\u0639\u064A"),c()()()()}}function R5(n,e){if(n&1&&(l(0,"div",60),P(1,"i",69),l(2,"span"),d(3),pn(4,"date"),c()()),n&2){let t=E().$implicit;g(3),K("\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0633\u062C\u064A\u0644: ",gi(4,1,t.registrationDate,"dd/MM/yyyy"),"")}}function k5(n,e){if(n&1&&(l(0,"div",60),P(1,"i",70),l(2,"span"),d(3),pn(4,"date"),c()()),n&2){let t=E().$implicit;g(3),K("\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u064A\u0644\u0627\u062F: ",gi(4,1,t.birthDate,"dd/MM/yyyy"),"")}}function N5(n,e){if(n&1){let t=Me();l(0,"div",38)(1,"div",39)(2,"div",40)(3,"div",41),d(4),c()(),l(5,"div",42)(6,"h3"),d(7),c(),l(8,"p",43),d(9),c(),l(10,"div",44)(11,"span",45),d(12),c(),l(13,"span",46),d(14),c()()(),l(15,"div",47)(16,"button",48),O("click",function(r){T(t);let o=E(2);return D(o.toggleDropdown(r))}),P(17,"i",49),c(),l(18,"div",50)(19,"button",51),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.viewStudentDetails(r))}),P(20,"i",52),l(21,"span"),d(22,"\u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644"),c()(),l(23,"button",51),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.editStudent(r))}),P(24,"i",53),l(25,"span"),d(26,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"),c()(),l(27,"button",54),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.openPaymentModal(r))}),P(28,"i",55),l(29,"span"),d(30),c()(),P(31,"div",56),l(32,"button",57),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.deleteStudent(r))}),P(33,"i",58),l(34,"span"),d(35,"\u062D\u0630\u0641 \u0627\u0644\u0637\u0627\u0644\u0628"),c()()()()(),l(36,"div",59)(37,"div",60),P(38,"i",61),l(39,"span"),d(40),c()(),l(41,"div",60),P(42,"i",62),l(43,"span"),d(44),c()(),l(45,"div",60),P(46,"i",63),l(47,"span"),d(48),c()(),ee(49,R5,5,4,"div",64)(50,k5,5,4,"div",64),c(),l(51,"div",65)(52,"button",66),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.viewStudentDetails(r))}),P(53,"i",52),l(54,"span",67),d(55,"\u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644"),c()(),l(56,"button",68),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.openPaymentModal(r))}),P(57,"i",55),l(58,"span",67),d(59),c()()()()}if(n&2){let t=e.$implicit,i=E(2);g(2),vs("background",i.getAvatarColor(t)),g(2),K(" ",i.getStudentInitials(t)," "),g(3),te(t.name),g(2),K("\u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628: ",t.studentId||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F",""),g(3),te(i.getAcademicYearName(t.academicYear)),g(),vn(i.getPaymentStatusClass(t)),g(),K(" ",i.getPaymentStatus(t)," "),g(13),R("disabled",t.hasPaidRegistration),g(3),te(t.hasPaidRegistration?"\u0631\u0633\u0648\u0645 \u0645\u062F\u0641\u0648\u0639\u0629":"\u062F\u0641\u0639 \u0627\u0644\u0631\u0633\u0648\u0645"),g(10),K("\u0627\u0644\u0645\u0633\u062A\u0648\u0649: ",i.getAcademicYearName(t.academicYear),""),g(4),K("\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631: ",t.parentName||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F",""),g(4),K("\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641: ",t.parentPhone||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F",""),g(),R("ngIf",t.registrationDate),g(),R("ngIf",t.birthDate),g(6),R("disabled",t.hasPaidRegistration),g(3),K(" ",t.hasPaidRegistration?"\u0645\u062F\u0641\u0648\u0639":"\u062F\u0641\u0639 \u0627\u0644\u0631\u0633\u0648\u0645"," ")}}function F5(n,e){if(n&1&&(l(0,"div",36),ee(1,N5,60,18,"div",37),c()),n&2){let t=E();g(),R("ngForOf",t.getDisplayedStudents())}}function L5(n,e){if(n&1&&(l(0,"option",30),d(1),c()),n&2){let t=e.$implicit;R("value",t.value),g(),K(" ",t.label," ")}}function V5(n,e){n&1&&P(0,"span",98)}function U5(n,e){if(n&1){let t=Me();l(0,"div",71),O("click",function(){T(t);let r=E();return D(r.closeRegistrationForm())}),l(1,"div",72),O("click",function(r){return T(t),D(r.stopPropagation())}),l(2,"div",73)(3,"h2"),d(4),c(),l(5,"button",74),O("click",function(){T(t);let r=E();return D(r.closeRegistrationForm())}),P(6,"i",75),c()(),l(7,"div",76)(8,"form",77),O("submit",function(r){return T(t),E().registerStudent(),D(r.preventDefault())}),l(9,"div",78)(10,"div",79)(11,"label",80),d(12,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628 *"),c(),l(13,"input",81),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newStudent.name,r)||(o.newStudent.name=r),D(r)}),c()(),l(14,"div",79)(15,"label",82),d(16,"\u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062F\u0631\u0627\u0633\u064A *"),c(),l(17,"select",83),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newStudent.academicYear,r)||(o.newStudent.academicYear=r),D(r)}),l(18,"option",84),d(19,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u0649"),c(),ee(20,L5,2,2,"option",22),c()()(),l(21,"div",78)(22,"div",79)(23,"label",85),d(24,"\u0627\u0633\u0645 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631"),c(),l(25,"input",86),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newStudent.parentName,r)||(o.newStudent.parentName=r),D(r)}),c()(),l(26,"div",79)(27,"label",87),d(28,"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631"),c(),l(29,"input",88),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newStudent.parentPhone,r)||(o.newStudent.parentPhone=r),D(r)}),c()()(),l(30,"div",78)(31,"div",79)(32,"label",89),d(33,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u064A\u0644\u0627\u062F"),c(),l(34,"input",90),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newStudent.birthDate,r)||(o.newStudent.birthDate=r),D(r)}),c()(),l(35,"div",79)(36,"label",91),d(37,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0633\u062C\u064A\u0644"),c(),l(38,"input",92),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newStudent.registrationDate,r)||(o.newStudent.registrationDate=r),D(r)}),c()()()()(),l(39,"div",93)(40,"button",11),O("click",function(){T(t);let r=E();return D(r.closeRegistrationForm())}),P(41,"i",94),l(42,"span"),d(43,"\u0625\u0644\u063A\u0627\u0621"),c()(),l(44,"button",95),O("click",function(){T(t);let r=E();return D(r.registerStudent())}),P(45,"i",96),l(46,"span"),d(47),c(),ee(48,V5,1,0,"span",97),c()()()()}if(n&2){let t=E();g(4),te(t.editMode?"\u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628":"\u062A\u0633\u062C\u064A\u0644 \u0637\u0627\u0644\u0628 \u062C\u062F\u064A\u062F"),g(9),de("ngModel",t.newStudent.name),g(4),de("ngModel",t.newStudent.academicYear),g(3),R("ngForOf",t.academicYears.slice(1)),g(5),de("ngModel",t.newStudent.parentName),g(4),de("ngModel",t.newStudent.parentPhone),g(5),de("ngModel",t.newStudent.birthDate),g(4),de("ngModel",t.newStudent.registrationDate),g(6),R("disabled",t.loading),g(3),te(t.editMode?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A":"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628"),g(),R("ngIf",t.loading)}}function B5(n,e){if(n&1&&(l(0,"option",30),d(1),c()),n&2){let t=e.$implicit;R("value",t.value),g(),K(" ",t.label," ")}}function z5(n,e){if(n&1&&(l(0,"option",30),d(1),c()),n&2){let t=e.$implicit;R("value",t.value),g(),K(" ",t.label," ")}}function H5(n,e){if(n&1){let t=Me();l(0,"tr")(1,"td"),d(2),c(),l(3,"td")(4,"input",118),fe("ngModelChange",function(r){let o=T(t).$implicit;return he(o.name,r)||(o.name=r),D(r)}),c()(),l(5,"td")(6,"input",119),fe("ngModelChange",function(r){let o=T(t).$implicit;return he(o.parentName,r)||(o.parentName=r),D(r)}),c()(),l(7,"td")(8,"input",120),fe("ngModelChange",function(r){let o=T(t).$implicit;return he(o.parentPhone,r)||(o.parentPhone=r),D(r)}),c()(),l(9,"td")(10,"select",121),fe("ngModelChange",function(r){let o=T(t).$implicit;return he(o.academicYear,r)||(o.academicYear=r),D(r)}),l(11,"option",84),d(12,"\u0627\u062E\u062A\u0631 \u0645\u0633\u062A\u0648\u0649"),c(),ee(13,z5,2,2,"option",22),c()(),l(14,"td")(15,"input",122),fe("ngModelChange",function(r){let o=T(t).$implicit;return he(o.birthDate,r)||(o.birthDate=r),D(r)}),c()(),l(16,"td")(17,"button",123),O("click",function(){let r=T(t).index,o=E(2);return D(o.removeImportRow(r))}),P(18,"i",124),c()()()}if(n&2){let t=e.$implicit,i=e.index,r=E(2);g(2),te(i+1),g(2),de("ngModel",t.name),g(2),de("ngModel",t.parentName),g(2),de("ngModel",t.parentPhone),g(2),de("ngModel",t.academicYear),g(3),R("ngForOf",r.academicYears.slice(1)),g(2),de("ngModel",t.birthDate),g(2),R("disabled",r.bulkImportData.students.length===1)}}function j5(n,e){n&1&&P(0,"span",98)}function G5(n,e){if(n&1){let t=Me();l(0,"div",71),O("click",function(){T(t);let r=E();return D(r.closeBulkImportForm())}),l(1,"div",99),O("click",function(r){return T(t),D(r.stopPropagation())}),l(2,"div",73)(3,"h2"),d(4,"\u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u062C\u0645\u0627\u0639\u064A\u0629 \u0644\u0644\u0637\u0644\u0627\u0628"),c(),l(5,"button",74),O("click",function(){T(t);let r=E();return D(r.closeBulkImportForm())}),P(6,"i",75),c()(),l(7,"div",76)(8,"div",100)(9,"div",101)(10,"div",102),O("click",function(){T(t);let r=E();return D(r.downloadImportTemplate())}),P(11,"i",103),l(12,"h4"),d(13,"\u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0646\u0645\u0648\u0630\u062C"),c(),l(14,"p"),d(15,"\u0646\u0645\u0648\u0630\u062C CSV \u0644\u0645\u0644\u0621 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"),c()(),l(16,"div",102),O("click",function(){T(t);let r=E();return D(r.importFromText())}),P(17,"i",104),l(18,"h4"),d(19,"\u0646\u0633\u062E \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"),c(),l(20,"p"),d(21,"\u0625\u062F\u062E\u0627\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0643\u0646\u0635"),c()(),l(22,"div",102),O("click",function(){T(t);let r=E();return D(r.addImportRow())}),P(23,"i",105),l(24,"h4"),d(25,"\u0625\u0636\u0627\u0641\u0629 \u064A\u062F\u0648\u064A\u0629"),c(),l(26,"p"),d(27,"\u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644\u0627\u062A \u062C\u062F\u064A\u062F\u0629"),c()()(),l(28,"div",106)(29,"label",107),d(30,"\u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u0627\u0641\u062A\u0631\u0627\u0636\u064A \u0644\u062C\u0645\u064A\u0639 \u0627\u0644\u0637\u0644\u0627\u0628 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),c(),l(31,"select",108),fe("ngModelChange",function(r){T(t);let o=E();return he(o.bulkImportData.academicYear,r)||(o.bulkImportData.academicYear=r),D(r)}),l(32,"option",84),d(33,"\u0627\u062E\u062A\u0631 \u0645\u0633\u062A\u0648\u0649 \u0627\u0641\u062A\u0631\u0627\u0636\u064A"),c(),ee(34,B5,2,2,"option",22),c(),l(35,"small",109),d(36,"\u0633\u064A\u062A\u0645 \u062A\u0637\u0628\u064A\u0642 \u0647\u0630\u0627 \u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0639\u0644\u0649 \u062C\u0645\u064A\u0639 \u0627\u0644\u0637\u0644\u0627\u0628 \u0645\u0627 \u0644\u0645 \u064A\u062A\u0645 \u062A\u062D\u062F\u064A\u062F \u0645\u0633\u062A\u0648\u0649 \u0645\u062E\u062A\u0644\u0641 \u0644\u0643\u0644 \u0637\u0627\u0644\u0628"),c()(),l(37,"div",110)(38,"div",111)(39,"h4"),d(40),c(),l(41,"button",112),O("click",function(){T(t);let r=E();return D(r.addImportRow())}),P(42,"i",113),d(43," \u0625\u0636\u0627\u0641\u0629 \u0637\u0627\u0644\u0628 "),c()(),l(44,"div",114)(45,"table",115)(46,"thead")(47,"tr")(48,"th"),d(49,"#"),c(),l(50,"th"),d(51,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628 *"),c(),l(52,"th"),d(53,"\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631"),c(),l(54,"th"),d(55,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),c(),l(56,"th"),d(57,"\u0627\u0644\u0645\u0633\u062A\u0648\u0649"),c(),l(58,"th"),d(59,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u064A\u0644\u0627\u062F"),c(),l(60,"th"),d(61,"\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),c()()(),l(62,"tbody"),ee(63,H5,19,8,"tr",116),c()()()()()(),l(64,"div",93)(65,"button",11),O("click",function(){T(t);let r=E();return D(r.closeBulkImportForm())}),P(66,"i",94),l(67,"span"),d(68,"\u0625\u0644\u063A\u0627\u0621"),c()(),l(69,"button",13),O("click",function(){T(t);let r=E();return D(r.downloadImportTemplate())}),P(70,"i",117),l(71,"span"),d(72,"\u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0646\u0645\u0648\u0630\u062C"),c()(),l(73,"button",95),O("click",function(){T(t);let r=E();return D(r.importStudents())}),P(74,"i",10),l(75,"span"),d(76),c(),ee(77,j5,1,0,"span",97),c()()()()}if(n&2){let t=E();g(31),de("ngModel",t.bulkImportData.academicYear),g(3),R("ngForOf",t.academicYears.slice(1)),g(6),K("\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628 (",t.bulkImportData.students.length," \u0637\u0627\u0644\u0628)"),g(23),R("ngForOf",t.bulkImportData.students),g(10),R("disabled",t.loading||t.bulkImportData.students.length===0),g(3),K("\u0627\u0633\u062A\u064A\u0631\u0627\u062F ",t.bulkImportData.students.length," \u0637\u0627\u0644\u0628"),g(),R("ngIf",t.loading)}}function W5(n,e){n&1&&P(0,"span",98)}function $5(n,e){if(n&1){let t=Me();l(0,"div",71),O("click",function(){T(t);let r=E();return D(r.closePaymentModal())}),l(1,"div",72),O("click",function(r){return T(t),D(r.stopPropagation())}),l(2,"div",73)(3,"h2"),d(4,"\u062F\u0641\u0639 \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644"),c(),l(5,"button",74),O("click",function(){T(t);let r=E();return D(r.closePaymentModal())}),P(6,"i",75),c()(),l(7,"div",76)(8,"div",125)(9,"div",126)(10,"div",40)(11,"div",41),d(12),c()(),l(13,"div",127)(14,"h3"),d(15),c(),l(16,"p",43),d(17),c(),l(18,"p",128),d(19),c()()(),l(20,"form",129),O("submit",function(r){return T(t),E().processPayment(),D(r.preventDefault())}),l(21,"div",78)(22,"div",79)(23,"label",130),d(24,"\u0627\u0644\u0645\u0628\u0644\u063A (\u062F\u064A\u0646\u0627\u0631 \u062C\u0632\u0627\u0626\u0631\u064A) *"),c(),l(25,"input",131),fe("ngModelChange",function(r){T(t);let o=E();return he(o.paymentData.amount,r)||(o.paymentData.amount=r),D(r)}),c()(),l(26,"div",79)(27,"label",132),d(28,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639 *"),c(),l(29,"select",133),fe("ngModelChange",function(r){T(t);let o=E();return he(o.paymentData.paymentMethod,r)||(o.paymentData.paymentMethod=r),D(r)}),l(30,"option",134),d(31,"\u0646\u0642\u062F\u0627\u064B"),c(),l(32,"option",135),d(33,"\u0628\u0637\u0627\u0642\u0629 \u0627\u0626\u062A\u0645\u0627\u0646"),c(),l(34,"option",136),d(35,"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A"),c(),l(36,"option",137),d(37,"\u0634\u064A\u0643"),c()()()(),l(38,"div",79)(39,"label",138),d(40,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629"),c(),l(41,"textarea",139),fe("ngModelChange",function(r){T(t);let o=E();return he(o.paymentData.notes,r)||(o.paymentData.notes=r),D(r)}),c()()()()(),l(42,"div",93)(43,"button",11),O("click",function(){T(t);let r=E();return D(r.closePaymentModal())}),P(44,"i",94),l(45,"span"),d(46,"\u0625\u0644\u063A\u0627\u0621"),c()(),l(47,"button",95),O("click",function(){T(t);let r=E();return D(r.processPayment())}),P(48,"i",55),l(49,"span"),d(50,"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062F\u0641\u0639"),c(),ee(51,W5,1,0,"span",97),c()()()()}if(n&2){let t=E();g(10),vs("background",t.getAvatarColor(t.selectedStudent)),g(2),K(" ",t.getStudentInitials(t.selectedStudent)," "),g(3),te(t.selectedStudent.name),g(2),K("\u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628: ",t.selectedStudent.studentId||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F",""),g(2),K("\u0627\u0644\u0645\u0633\u062A\u0648\u0649: ",t.getAcademicYearName(t.selectedStudent.academicYear),""),g(6),de("ngModel",t.paymentData.amount),g(4),de("ngModel",t.paymentData.paymentMethod),g(12),de("ngModel",t.paymentData.notes),g(6),R("disabled",t.loading),g(4),R("ngIf",t.loading)}}var y0=class n{constructor(e,t){this.studentsService=e;this.router=t}toggleBodyScroll(e){if(typeof document<"u"){let t=document.querySelector("body");t&&(e?t.classList.add("no-scroll","modal-open"):t.classList.remove("no-scroll","modal-open"))}}students=[];filteredStudents=[];loading=!1;searchTerm="";selectedAcademicYear="all";showRegistrationForm=!1;showEditForm=!1;showBulkImportForm=!1;showPaymentModal=!1;selectedStudent=null;editMode=!1;newStudent={name:"",parentName:"",parentPhone:"",academicYear:"",birthDate:"",registrationDate:new Date().toISOString().split("T")[0]};bulkImportData={students:[{name:"",parentName:"",parentPhone:"",academicYear:"",birthDate:""}],delimiter:",",academicYear:""};paymentData={amount:600,paymentMethod:"cash",notes:""};academicYears=[{value:"all",label:"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0633\u062A\u0648\u064A\u0627\u062A"},{value:"1AS",label:"\u0627\u0644\u0623\u0648\u0644\u0649 \u062B\u0627\u0646\u0648\u064A"},{value:"2AS",label:"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u062B\u0627\u0646\u0648\u064A"},{value:"3AS",label:"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u062B\u0627\u0646\u0648\u064A"},{value:"1MS",label:"\u0627\u0644\u0623\u0648\u0644\u0649 \u0645\u062A\u0648\u0633\u0637"},{value:"2MS",label:"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0645\u062A\u0648\u0633\u0637"},{value:"3MS",label:"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u0645\u062A\u0648\u0633\u0637"},{value:"4MS",label:"\u0627\u0644\u0631\u0627\u0628\u0639\u0629 \u0645\u062A\u0648\u0633\u0637"},{value:"1AP",label:"\u0627\u0644\u0623\u0648\u0644\u0649 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"2AP",label:"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"3AP",label:"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"4AP",label:"\u0627\u0644\u0631\u0627\u0628\u0639\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"5AP",label:"\u0627\u0644\u062E\u0627\u0645\u0633\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"}];ngOnInit(){this.loadStudents()}loadStudents(){this.loading=!0,this.studentsService.getStudents().subscribe({next:e=>{this.students=e,this.filteredStudents=[...this.students],this.loading=!1},error:e=>{console.error("Error loading students:",e),xn.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628","error"),this.loading=!1}})}filterStudents(){this.filteredStudents=this.students.filter(e=>{let t=!this.searchTerm||e.name.toLowerCase().includes(this.searchTerm.toLowerCase())||e.studentId&&e.studentId.includes(this.searchTerm)||e.parentName&&e.parentName.toLowerCase().includes(this.searchTerm.toLowerCase()),i=this.selectedAcademicYear==="all"||e.academicYear===this.selectedAcademicYear;return t&&i})}getDisplayedStudents(){return this.filteredStudents}clearSearch(){this.searchTerm="",this.selectedAcademicYear="all",this.filterStudents()}getAvatarColor(e){if(!e)return"#0a66c2";let t=["#0a66c2","#004182","#2563eb","#3b82f6","#7c3aed","#10b981","#06b6d4","#f59e0b","#ef4444","#8b5cf6"],i=e.name.length%t.length;return t[i]}getStudentInitials(e){return e?e.name.charAt(0).toUpperCase():"?"}getAcademicYearName(e){if(!e)return"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F";let t=this.academicYears.find(i=>i.value===e);return t?t.label:e}getPaymentStatus(e){return e.hasPaidRegistration?"\u0645\u062F\u0641\u0648\u0639":"\u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639"}getPaymentStatusClass(e){return e.hasPaidRegistration?"status-paid":"status-unpaid"}openRegistrationForm(){this.editMode=!1,this.resetForm(),this.showRegistrationForm=!0,this.toggleBodyScroll(!0)}editStudent(e){this.editMode=!0,this.selectedStudent=e,this.newStudent={name:e.name,parentName:e.parentName||"",parentPhone:e.parentPhone||"",academicYear:e.academicYear,birthDate:e.birthDate||"",registrationDate:e.registrationDate?new Date(e.registrationDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]},this.showRegistrationForm=!0}closeRegistrationForm(){this.showRegistrationForm=!1,this.selectedStudent=null,this.toggleBodyScroll(!1),this.resetForm()}registerStudent(){if(this.validateStudentForm())if(this.loading=!0,this.editMode&&this.selectedStudent){let e=this.selectedStudent._id||this.selectedStudent.id;if(!e){xn.default.fire("\u062E\u0637\u0623","\u0644\u0627 \u064A\u0645\u0643\u0646 \u062A\u062D\u062F\u064A\u062F \u0647\u0648\u064A\u0629 \u0627\u0644\u0637\u0627\u0644\u0628","error"),this.loading=!1;return}this.studentsService.updateStudent(e,this.newStudent).subscribe({next:t=>{xn.default.fire("\u0646\u062C\u0627\u062D","\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D","success"),this.closeRegistrationForm(),this.loadStudents()},error:t=>{console.error("Error updating student:",t),xn.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628","error"),this.loading=!1}})}else this.studentsService.createStudent(this.newStudent).subscribe({next:e=>{xn.default.fire("\u0646\u062C\u0627\u062D","\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D","success"),this.closeRegistrationForm(),this.loadStudents()},error:e=>{console.error("Error registering student:",e),xn.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628","error"),this.loading=!1}})}validateStudentForm(){return this.newStudent.name.trim()?this.newStudent.academicYear?!0:(xn.default.fire("\u062E\u0637\u0623","\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062F\u0631\u0627\u0633\u064A","error"),!1):(xn.default.fire("\u062E\u0637\u0623","\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628","error"),!1)}resetForm(){this.newStudent={name:"",parentName:"",parentPhone:"",academicYear:"",birthDate:"",registrationDate:new Date().toISOString().split("T")[0]}}toggleDropdown(e){e.stopPropagation();let t=e.target.closest(".student-actions-dropdown")?.querySelector(".dropdown-menu");t&&t.classList.toggle("show")}closeAllDropdowns(e){document.querySelectorAll(".dropdown-menu.show").forEach(i=>{i.closest(".student-actions-dropdown")?.contains(e.target)||i.classList.remove("show")})}openBulkImportForm(){this.bulkImportData={students:[{name:"",parentName:"",parentPhone:"",academicYear:"",birthDate:""}],delimiter:",",academicYear:""},this.showBulkImportForm=!0,this.toggleBodyScroll(!0)}closeBulkImportForm(){this.showBulkImportForm=!1,this.toggleBodyScroll(!1)}addImportRow(){this.bulkImportData.students.push({name:"",parentName:"",parentPhone:"",academicYear:"",birthDate:""})}removeImportRow(e){this.bulkImportData.students.length>1&&this.bulkImportData.students.splice(e,1)}importFromText(){xn.default.fire({title:"\u0625\u062F\u062E\u0627\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0646\u0635\u064A\u0629",html:`
        <div>
          <p>\u0623\u062F\u062E\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628\u060C \u0643\u0644 \u0637\u0627\u0644\u0628 \u0641\u064A \u0633\u0637\u0631 \u062C\u062F\u064A\u062F.</p>
          <p>\u0627\u0644\u0635\u064A\u063A\u0629: <strong>\u0627\u0644\u0627\u0633\u0645,\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631,\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641,\u0627\u0644\u0645\u0633\u062A\u0648\u0649,\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u064A\u0644\u0627\u062F (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)</strong></p>
          <p>\u0645\u062B\u0627\u0644: \u0645\u062D\u0645\u062F \u0623\u062D\u0645\u062F,\u0623\u062D\u0645\u062F \u0645\u062D\u0645\u062F,0551234567,1AS,2008-01-15</p>
          <textarea id="studentsText" rows="10" class="swal2-textarea" 
            placeholder="\u0623\u062F\u062E\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628 \u0647\u0646\u0627..."></textarea>
          <div class="mt-3">
            <label for="delimiter">\u0627\u0644\u0641\u0627\u0635\u0644:</label>
            <select id="delimiter" class="swal2-select">
              <option value=",">\u0641\u0627\u0635\u0644\u0629 (,)</option>
              <option value=";">\u0641\u0627\u0635\u0644\u0629 \u0645\u0646\u0642\u0648\u0637\u0629 (;)</option>
              <option value="	">\u062A\u0628\u0648\u064A\u0628 (Tab)</option>
            </select>
          </div>
        </div>
      `,showCancelButton:!0,confirmButtonText:"\u0627\u0633\u062A\u064A\u0631\u0627\u062F",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",preConfirm:()=>{let e=document.getElementById("studentsText").value,t=document.getElementById("delimiter").value;return e.trim()?{text:e,delimiter:t}:(xn.default.showValidationMessage("\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628"),!1)}}).then(e=>{e.isConfirmed&&e.value&&this.parseTextData(e.value.text,e.value.delimiter)})}parseTextData(e,t){let i=e.split(`
`).filter(o=>o.trim()!==""),r=[];for(let o of i){let s=o.split(t).map(a=>a.trim());s.length>=3&&r.push({name:s[0],parentName:s[1]||"",parentPhone:s[2]||"",academicYear:this.bulkImportData.academicYear||s[3]||"",birthDate:s[4]||""})}r.length>0?(this.bulkImportData.students=r,xn.default.fire("\u0646\u062C\u0627\u062D",`\u062A\u0645 \u062A\u062D\u0644\u064A\u0644 ${r.length} \u0637\u0627\u0644\u0628`,"success")):xn.default.fire("\u062E\u0637\u0623","\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0628\u064A\u0627\u0646\u0627\u062A \u0635\u062D\u064A\u062D\u0629","error")}importStudents(){this.validateBulkImportData()&&xn.default.fire({title:"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0627\u0633\u062A\u064A\u0631\u0627\u062F",html:`\u0633\u064A\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 ${this.bulkImportData.students.length} \u0637\u0627\u0644\u0628. \u0647\u0644 \u062A\u0631\u064A\u062F \u0627\u0644\u0645\u062A\u0627\u0628\u0639\u0629\u061F`,icon:"warning",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645\u060C \u0627\u0633\u062A\u064A\u0631\u0627\u062F",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"}).then(e=>{e.isConfirmed&&this.processBulkImport()})}validateBulkImportData(){for(let e=0;e<this.bulkImportData.students.length;e++)if(!this.bulkImportData.students[e].name.trim())return xn.default.fire("\u062E\u0637\u0623",`\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628 \u0641\u064A \u0627\u0644\u0635\u0641 ${e+1}`,"error"),!1;return!this.bulkImportData.academicYear&&this.bulkImportData.students.some(e=>!e.academicYear)?(xn.default.fire("\u062E\u0637\u0623","\u064A\u0631\u062C\u0649 \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062F\u0631\u0627\u0633\u064A \u0644\u0644\u0637\u0644\u0627\u0628","error"),!1):!0}processBulkImport(){this.loading=!0,this.bulkImportData.academicYear&&this.bulkImportData.students.forEach(o=>{o.academicYear||(o.academicYear=this.bulkImportData.academicYear)});let e=0,t=0,i=this.bulkImportData.students.length,r=o=>{if(o>=i){this.loading=!1,this.showBulkImportForm=!1,xn.default.fire({title:"\u062A\u0645 \u0627\u0644\u0627\u0633\u062A\u064A\u0631\u0627\u062F",html:`
            <div class="text-center">
              <i class="bi bi-check-circle-fill text-success" style="font-size: 3rem;"></i>
              <h4 class="mt-3">\u062A\u0645 \u0627\u0644\u0627\u0646\u062A\u0647\u0627\u0621 \u0645\u0646 \u0627\u0644\u0627\u0633\u062A\u064A\u0631\u0627\u062F</h4>
              <div class="mt-3">
                <p>\u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u0645\u0636\u0627\u0641\u0629 \u0628\u0646\u062C\u0627\u062D: <strong>${e}</strong></p>
                <p>\u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u062A\u064A \u0641\u0634\u0644 \u0625\u0636\u0627\u0641\u062A\u0647\u0627: <strong>${t}</strong></p>
              </div>
            </div>
          `,confirmButtonText:"\u062A\u0645"}).then(()=>{this.loadStudents()});return}let s=this.bulkImportData.students[o],a=lt(xe({},s),{registrationDate:new Date().toISOString().split("T")[0]});this.studentsService.createStudent(a).subscribe({next:u=>{e++,r(o+1)},error:u=>{console.error(`Error importing student ${s.name}:`,u),t++,r(o+1)}})};r(0)}downloadImportTemplate(){let t=encodeURI(`data:text/csv;charset=utf-8,\u0627\u0644\u0627\u0633\u0645,\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631,\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641,\u0627\u0644\u0645\u0633\u062A\u0648\u0649,\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u064A\u0644\u0627\u062F
\u0645\u062D\u0645\u062F \u0623\u062D\u0645\u062F,\u0623\u062D\u0645\u062F \u0645\u062D\u0645\u062F,0551234567,1AS,2008-01-15
\u0633\u0627\u0631\u0629 \u0645\u062D\u0645\u062F,\u0645\u062D\u0645\u062F \u062E\u0627\u0644\u062F,0557654321,2AS,2007-05-20
\u0639\u0644\u064A \u062D\u0633\u0646,\u062D\u0633\u0646 \u0639\u0644\u064A,0551122334,1MS,2009-08-10`),i=document.createElement("a");i.setAttribute("href",t),i.setAttribute("download","\u0646\u0645\u0648\u0630\u062C_\u0627\u0633\u062A\u064A\u0631\u0627\u062F_\u0627\u0644\u0637\u0644\u0627\u0628.csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}openPaymentModal(e){this.selectedStudent=e,this.paymentData.amount=600,this.showPaymentModal=!0,this.toggleBodyScroll(!0)}closePaymentModal(){this.showPaymentModal=!1,this.selectedStudent=null,this.toggleBodyScroll(!1),this.paymentData={amount:600,paymentMethod:"cash",notes:""}}ngOnDestroy(){this.toggleBodyScroll(!1)}processPayment(){if(!this.selectedStudent)return;let e=this.selectedStudent._id||this.selectedStudent.id;if(!e){xn.default.fire("\u062E\u0637\u0623","\u0644\u0627 \u064A\u0645\u0643\u0646 \u062A\u062D\u062F\u064A\u062F \u0647\u0648\u064A\u0629 \u0627\u0644\u0637\u0627\u0644\u0628","error");return}this.loading=!0,this.studentsService.payRegistrationFee(e,this.paymentData).subscribe({next:t=>{xn.default.fire("\u0646\u062C\u0627\u062D","\u062A\u0645 \u062F\u0641\u0639 \u0631\u0633\u0648\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644 \u0628\u0646\u062C\u0627\u062D","success"),this.closePaymentModal(),this.loadStudents()},error:t=>{console.error("Error processing payment:",t),xn.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u062F\u0641\u0639","error"),this.loading=!1}})}viewStudentDetails(e){let t=e._id||e.id;t?this.router.navigate(["/home/students-management",t]):xn.default.fire("\u062E\u0637\u0623","\u0644\u0627 \u064A\u0645\u0643\u0646 \u0639\u0631\u0636 \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628","error")}deleteStudent(e){let t=e._id||e.id;if(!t){xn.default.fire("\u062E\u0637\u0623","\u0644\u0627 \u064A\u0645\u0643\u0646 \u062A\u062D\u062F\u064A\u062F \u0647\u0648\u064A\u0629 \u0627\u0644\u0637\u0627\u0644\u0628 \u0644\u0644\u062D\u0630\u0641","error");return}xn.default.fire({title:"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F\u061F",text:`\u0633\u064A\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0637\u0627\u0644\u0628 ${e.name} \u0628\u0634\u0643\u0644 \u062F\u0627\u0626\u0645`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"\u0646\u0639\u0645\u060C \u0627\u062D\u0630\u0641",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"}).then(i=>{i.isConfirmed&&this.studentsService.deleteStudent(t).subscribe({next:()=>{xn.default.fire("\u062A\u0645 \u0627\u0644\u062D\u0630\u0641","\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D","success"),this.loadStudents()},error:r=>{console.error("Error deleting student:",r),xn.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062D\u0630\u0641 \u0627\u0644\u0637\u0627\u0644\u0628","error")}})})}parseCSV(e,t=","){let i=e.split(`
`),r=[],o=i[0].split(t).map(s=>s.trim());for(let s=1;s<i.length;s++){if(!i[s].trim())continue;let a={},u=i[s].split(t).map(f=>f.trim());for(let f=0;f<o.length;f++)a[o[f]]=u[f]||"";r.push(a)}return r}static \u0275fac=function(t){return new(t||n)(we(Cr),we(ti))};static \u0275cmp=Jt({type:n,selectors:[["app-students-management"]],hostBindings:function(t,i){t&1&&O("click",function(o){return i.closeAllDropdowns(o)},!1,Fw)},decls:45,vars:10,consts:[[1,"students-management"],[1,"header"],[1,"header-content"],[1,"logo-section"],[1,"logo"],[1,"bi","bi-people-fill"],[1,"header-actions"],[1,"btn-primary",3,"click"],[1,"bi","bi-person-plus-fill"],[1,"btn-success",3,"click"],[1,"bi","bi-upload"],[1,"btn-secondary",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"btn-info",3,"click"],[1,"bi","bi-cloud-download-fill"],[1,"controls-section"],[1,"search-box"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0637\u0627\u0644\u0628 \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0627\u0644\u0631\u0642\u0645 \u0623\u0648 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631...",3,"ngModelChange","input","ngModel"],[1,"bi","bi-search"],[1,"filter-group"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"stats-badge"],[1,"badge-count"],[1,"badge-label"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","students-grid",4,"ngIf"],["class","student-modal-overlay",3,"click",4,"ngIf"],[3,"value"],[1,"loading-container"],[1,"spinner"],[1,"empty-state"],[1,"bi","bi-person-x-fill"],[1,"empty-state-actions"],[1,"students-grid"],["class","student-card",4,"ngFor","ngForOf"],[1,"student-card"],[1,"student-header"],[1,"student-avatar","large"],[1,"avatar-fallback"],[1,"student-info"],[1,"student-id"],[1,"student-tags"],[1,"tag","academic-tag"],[1,"tag","status-tag"],[1,"student-actions-dropdown"],[1,"dropdown-toggle",3,"click"],[1,"bi","bi-three-dots-vertical"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"bi","bi-eye-fill"],[1,"bi","bi-pencil-square"],[1,"dropdown-item",3,"click","disabled"],[1,"bi","bi-cash-stack"],[1,"dropdown-divider"],[1,"dropdown-item","text-danger",3,"click"],[1,"bi","bi-trash3-fill"],[1,"student-details"],[1,"detail-item"],[1,"bi","bi-mortarboard-fill"],[1,"bi","bi-person-vcard-fill"],[1,"bi","bi-telephone-fill"],["class","detail-item",4,"ngIf"],[1,"student-actions"],[1,"btn-action","btn-view",3,"click"],[1,"btn-text"],[1,"btn-action","btn-payment",3,"click","disabled"],[1,"bi","bi-calendar-check-fill"],[1,"bi","bi-balloon-fill"],[1,"student-modal-overlay",3,"click"],[1,"student-modal",3,"click"],[1,"student-modal-header"],[1,"close-btn",3,"click"],[1,"bi","bi-x-lg"],[1,"student-modal-body"],[1,"student-form",3,"submit"],[1,"form-row"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628 \u0627\u0644\u0643\u0627\u0645\u0644","required","",3,"ngModelChange","ngModel"],["for","academicYear"],["id","academicYear","name","academicYear","required","",3,"ngModelChange","ngModel"],["value",""],["for","parentName"],["type","text","id","parentName","name","parentName","placeholder","\u0627\u0633\u0645 \u0648\u0644\u064A \u0623\u0645\u0631 \u0627\u0644\u0637\u0627\u0644\u0628",3,"ngModelChange","ngModel"],["for","parentPhone"],["type","tel","id","parentPhone","name","parentPhone","placeholder","05X XXX XXXX",3,"ngModelChange","ngModel"],["for","birthDate"],["type","date","id","birthDate","name","birthDate",3,"ngModelChange","ngModel"],["for","registrationDate"],["type","date","id","registrationDate","name","registrationDate",3,"ngModelChange","ngModel"],[1,"student-modal-footer"],[1,"bi","bi-x-circle"],[1,"btn-success",3,"click","disabled"],[1,"bi","bi-check-circle-fill"],["class","spinner-small",4,"ngIf"],[1,"spinner-small"],[1,"student-modal","student-modal-lg",3,"click"],[1,"bulk-import-container"],[1,"import-options"],[1,"option-card",3,"click"],[1,"bi","bi-file-earmark-arrow-down"],[1,"bi","bi-text-paragraph"],[1,"bi","bi-plus-circle"],[1,"form-group","full-width"],["for","defaultAcademicYear"],["id","defaultAcademicYear","name","defaultAcademicYear",3,"ngModelChange","ngModel"],[1,"form-text"],[1,"students-table-container"],[1,"table-header"],[1,"btn-sm","btn-success",3,"click"],[1,"bi","bi-plus"],[1,"table-responsive"],[1,"students-table"],[4,"ngFor","ngForOf"],[1,"bi","bi-download"],["type","text","placeholder","\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631",3,"ngModelChange","ngModel"],["type","tel","placeholder","05X XXX XXXX",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],[1,"btn-icon","btn-danger",3,"click","disabled"],[1,"bi","bi-trash"],[1,"payment-info"],[1,"student-payment-header"],[1,"student-payment-details"],[1,"academic-year"],[1,"payment-form",3,"submit"],["for","amount"],["type","number","id","amount","name","amount","min","0","step","100","required","",3,"ngModelChange","ngModel"],["for","paymentMethod"],["id","paymentMethod","name","paymentMethod","required","",3,"ngModelChange","ngModel"],["value","cash"],["value","card"],["value","transfer"],["value","check"],["for","notes"],["id","notes","name","notes","rows","3","placeholder","\u0623\u064A \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629 \u062D\u0648\u0644 \u0627\u0644\u062F\u0641\u0639...",3,"ngModelChange","ngModel"]],template:function(t,i){t&1&&(l(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4),P(5,"i",5),c(),l(6,"h1"),d(7,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0637\u0644\u0627\u0628"),c()(),l(8,"div",6)(9,"button",7),O("click",function(){return i.openRegistrationForm()}),P(10,"i",8),l(11,"span"),d(12,"\u0637\u0627\u0644\u0628 \u062C\u062F\u064A\u062F"),c()(),l(13,"button",9),O("click",function(){return i.openBulkImportForm()}),P(14,"i",10),l(15,"span"),d(16,"\u0625\u0636\u0627\u0641\u0629 \u062C\u0645\u0627\u0639\u064A\u0629"),c()(),l(17,"button",11),O("click",function(){return i.clearSearch()}),P(18,"i",12),l(19,"span"),d(20,"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646"),c()(),l(21,"button",13),O("click",function(){return i.loadStudents()}),P(22,"i",14),l(23,"span"),d(24,"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"),c()()()()(),l(25,"div",15)(26,"div",16)(27,"input",17),fe("ngModelChange",function(o){return he(i.searchTerm,o)||(i.searchTerm=o),o}),O("input",function(){return i.filterStudents()}),c(),P(28,"i",18),c(),l(29,"div",19)(30,"select",20),fe("ngModelChange",function(o){return he(i.selectedAcademicYear,o)||(i.selectedAcademicYear=o),o}),O("change",function(){return i.filterStudents()}),l(31,"option",21),d(32,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0633\u062A\u0648\u064A\u0627\u062A"),c(),ee(33,P5,2,2,"option",22),c()(),l(34,"div",23)(35,"span",24),d(36),c(),l(37,"span",25),d(38,"\u0637\u0627\u0644\u0628"),c()()(),ee(39,I5,6,0,"div",26)(40,O5,15,0,"div",27)(41,F5,2,1,"div",28)(42,U5,49,11,"div",29)(43,G5,78,7,"div",29)(44,$5,52,11,"div",29),c()),t&2&&(g(27),de("ngModel",i.searchTerm),g(3),de("ngModel",i.selectedAcademicYear),g(3),R("ngForOf",i.academicYears.slice(1)),g(3),te(i.getDisplayedStudents().length),g(3),R("ngIf",i.loading),g(),R("ngIf",!i.loading&&i.getDisplayedStudents().length===0),g(),R("ngIf",!i.loading&&i.getDisplayedStudents().length>0),g(),R("ngIf",i.showRegistrationForm),g(),R("ngIf",i.showBulkImportForm),g(),R("ngIf",i.showPaymentModal&&i.selectedStudent))},dependencies:[cn,Yn,Tn,Vr,Zn,yr,vi,xi,Rn,Wr,si,Xn,xr,$r,Qo,Bn,Gr],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:20px;width:100%;max-width:600px;max-height:85vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d}.modal-lg[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{padding:24px 32px;border-bottom:2px solid #f3f4f6;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;background:#fff;border-radius:20px 20px 0 0;z-index:1}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:24px;font-weight:700}.close-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:12px;background:#f3f4f6;border:none;display:flex;align-items:center;justify-content:center;color:#6b7280;cursor:pointer;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff}.modal-body[_ngcontent-%COMP%]{padding:32px}.modal-footer[_ngcontent-%COMP%]{padding:24px 32px;border-top:2px solid #f3f4f6;display:flex;justify-content:flex-end;gap:12px;position:sticky;bottom:0;background:#fff;border-radius:0 0 20px 20px}.student-form[_ngcontent-%COMP%], .payment-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#374151;font-size:14px;font-weight:600}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e5e7eb;border-radius:12px;font-family:Cairo,sans-serif;font-size:14px;transition:all .3s ease;background:#f9fafb}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff;box-shadow:0 0 0 4px #3b82f61a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-text[_ngcontent-%COMP%]{color:#6b7280;font-size:13px;margin-top:4px}.bulk-import-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.import-options[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}.option-card[_ngcontent-%COMP%]{background:#f9fafb;border:2px solid #e5e7eb;border-radius:16px;padding:24px;text-align:center;cursor:pointer;transition:all .3s ease}.option-card[_ngcontent-%COMP%]:hover{background:#fff;border-color:#3b82f6;transform:translateY(-2px);box-shadow:0 8px 25px #3b82f61a}.option-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:36px;color:#3b82f6;margin-bottom:12px;display:block}.option-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;color:#1f2937;font-size:16px}.option-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6b7280;font-size:14px}.students-table-container[_ngcontent-%COMP%]{background:#f9fafb;border-radius:16px;padding:20px;border:2px solid #e5e7eb}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.table-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:18px}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.students-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 6px #0000000d}.students-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f3f4f6}.students-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px;text-align:right;font-weight:600;color:#374151;border-bottom:2px solid #e5e7eb;white-space:nowrap}.students-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e5e7eb}.students-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.students-table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .students-table[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:2px solid #e5e7eb;border-radius:8px;font-family:Cairo,sans-serif;font-size:14px;background:#fff;transition:all .3s ease}.students-table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .students-table[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.students-table[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{min-width:120px}.payment-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.student-payment-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding:20px;background:#f9fafb;border-radius:16px;border:2px solid #e5e7eb}.student-payment-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;color:#1f2937;font-size:20px;font-weight:700}.student-payment-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;color:#6b7280;font-size:14px}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;text-align:center}.logo-section[_ngcontent-%COMP%]{justify-content:center;margin-bottom:16px}.header-actions[_ngcontent-%COMP%]{justify-content:center}.controls-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{min-width:100%}.filter-group[_ngcontent-%COMP%]{width:100%}.students-grid[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.student-payment-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.modal-footer[_ngcontent-%COMP%]{flex-direction:column}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.import-options[_ngcontent-%COMP%]{grid-template-columns:1fr}.students-table[_ngcontent-%COMP%]{min-width:800px}.empty-state-actions[_ngcontent-%COMP%]{flex-direction:column}.empty-state-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media (max-width: 480px){.students-management[_ngcontent-%COMP%]{padding:12px}.header[_ngcontent-%COMP%]{padding:20px}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.student-card[_ngcontent-%COMP%]{padding:20px}.student-header[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.student-actions[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal[_ngcontent-%COMP%]{margin:10px;max-height:95vh}.modal-lg[_ngcontent-%COMP%]{margin:10px}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.modal[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.modal[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.modal[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.text-center[_ngcontent-%COMP%]{text-align:center}.text-danger[_ngcontent-%COMP%]{color:#dc2626}.mt-3[_ngcontent-%COMP%]{margin-top:12px}@media print{.header-actions[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%], .student-actions[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%]{display:none!important}.students-management[_ngcontent-%COMP%]{background:#fff!important}.student-card[_ngcontent-%COMP%]{break-inside:avoid;box-shadow:none!important;border:1px solid #ddd!important}}[_nghost-%COMP%]{display:block;min-height:100vh;background:linear-gradient(135deg,#f8fafc,#f1f5f9);font-family:Cairo,sans-serif}.students-management[_ngcontent-%COMP%]{min-height:calc(100vh - 120px);padding:25px;margin:0;width:100%;box-sizing:border-box}.header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0a66c2,#004182);border-radius:20px;padding:24px 32px;margin-bottom:24px;color:#fff;box-shadow:0 10px 30px #0a66c233}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.logo[_ngcontent-%COMP%]{width:56px;height:56px;background:#ffffff26;border-radius:16px;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}.logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:28px;color:#fff}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:700;background:linear-gradient(45deg,#fff,#e0f2fe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}button[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:12px;font-family:Cairo,sans-serif;font-weight:600;font-size:14px;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;justify-content:center;gap:8px}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6b7280,#4b5563);color:#fff}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.btn-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0ea5e9,#0284c7);color:#fff}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:8px 16px;font-size:13px}.btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;padding:0;border-radius:10px}.controls-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;margin-bottom:24px;display:flex;align-items:center;gap:20px;flex-wrap:wrap;box-shadow:0 4px 20px #00000014;border:1px solid #e5e7eb}.search-box[_ngcontent-%COMP%]{flex:1;min-width:300px;position:relative}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 48px 14px 16px;border:2px solid #e5e7eb;border-radius:12px;font-family:Cairo,sans-serif;font-size:14px;transition:all .3s ease;background:#f9fafb}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff;box-shadow:0 0 0 4px #3b82f61a}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:16px;top:50%;transform:translateY(-50%);color:#9ca3af}.filter-group[_ngcontent-%COMP%]{min-width:200px}.form-select[_ngcontent-%COMP%]{width:100%;padding:14px 16px;border:2px solid #e5e7eb;border-radius:12px;font-family:Cairo,sans-serif;font-size:14px;background:#f9fafb;cursor:pointer;transition:all .3s ease}.form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff;box-shadow:0 0 0 4px #3b82f61a}.stats-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;padding:12px 24px;border-radius:12px;display:flex;flex-direction:column;align-items:center;min-width:100px}.badge-count[_ngcontent-%COMP%]{font-size:28px;font-weight:800}.badge-label[_ngcontent-%COMP%]{font-size:14px;opacity:.9}.loading-container[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:60px 40px;text-align:center;box-shadow:0 4px 20px #00000014;border:1px solid #e5e7eb;margin:20px 0}.spinner[_ngcontent-%COMP%]{width:60px;height:60px;border:4px solid #e5e7eb;border-top-color:#3b82f6;border-radius:50%;margin:0 auto 24px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#1f2937;font-size:20px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6b7280}.spinner-small[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;display:inline-block;margin-right:8px}.empty-state[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:60px 40px;text-align:center;box-shadow:0 4px 20px #00000014;border:1px solid #e5e7eb;margin:20px 0}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px;color:#9ca3af;margin-bottom:24px;display:block}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;color:#1f2937;font-size:24px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;max-width:500px;margin:0 auto 32px;line-height:1.6}.empty-state-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}.students-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(380px,1fr));gap:24px;margin-top:24px}.student-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:24px;transition:all .3s ease;box-shadow:0 4px 20px #00000014;border:1px solid #e5e7eb;display:flex;flex-direction:column;gap:20px;position:relative}.student-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 32px #00000026}.student-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px;padding-bottom:20px;border-bottom:2px solid #f3f4f6}.student-avatar.large[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:16px;overflow:hidden;flex-shrink:0;position:relative;display:flex;align-items:center;justify-content:center;font-size:24px;font-weight:700;color:#fff}.avatar-fallback[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.student-info[_ngcontent-%COMP%]{flex:1;min-width:0}.student-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;color:#1f2937;font-size:20px;font-weight:700;word-break:break-word}.student-id[_ngcontent-%COMP%]{margin:0 0 8px;color:#6b7280;font-size:14px}.student-tags[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.tag[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600}.academic-tag[_ngcontent-%COMP%]{background:#e0f2fe;color:#0369a1}.status-tag[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.status-tag.status-unpaid[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.student-actions-dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-toggle[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;background:#f3f4f6;border:none;display:flex;align-items:center;justify-content:center;color:#6b7280;cursor:pointer;transition:all .3s ease}.dropdown-toggle[_ngcontent-%COMP%]:hover{background:#e5e7eb}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:1000;min-width:200px;background:#fff;border-radius:12px;box-shadow:0 10px 25px #0000001a;border:1px solid #e5e7eb;padding:8px 0;display:none}.dropdown-menu.show[_ngcontent-%COMP%]{display:block}.dropdown-item[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:none;background:transparent;display:flex;align-items:center;gap:10px;color:#4b5563;font-size:14px;text-align:right;cursor:pointer;transition:all .2s ease}.dropdown-item[_ngcontent-%COMP%]:hover{background:#f9fafb;color:#111827}.dropdown-item.text-danger[_ngcontent-%COMP%]{color:#dc2626}.dropdown-item.text-danger[_ngcontent-%COMP%]:hover{background:#fef2f2;color:#991b1b}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background:#e5e7eb;margin:8px 0}.student-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:#4b5563;font-size:14px}.detail-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:16px;width:20px;text-align:center}.student-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;padding-top:20px;border-top:2px solid #f3f4f6}.btn-action[_ngcontent-%COMP%]{padding:10px 16px;border-radius:10px;font-size:13px;display:flex;align-items:center;justify-content:center;gap:6px;transition:all .2s ease}.btn-action[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-size:12px}.btn-view[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.btn-payment[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.btn-payment[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#6b7280,#4b5563)}.student-modal-overlay[_ngcontent-%COMP%]{position:fixed!important;inset:20% 0 0!important;backdrop-filter:blur(15px)!important;display:flex!important;z-index:999999!important;padding:20px!important;opacity:1!important;visibility:visible!important;height:100%!important;animation:_ngcontent-%COMP%_studentModalFadeIn .2s ease!important;width:80%!important;align-items:center!important;justify-content:center!important;margin:auto!important;border-radius:20px!important}.student-modal-overlay.hidden[_ngcontent-%COMP%]{opacity:0!important;visibility:hidden!important;animation:_ngcontent-%COMP%_studentModalFadeOut .2s ease!important}.student-modal-overlay[_ngcontent-%COMP%]   button.close-btn[_ngcontent-%COMP%]{z-index:1001!important;padding:14px;margin:50px}.student-modal-footer[_ngcontent-%COMP%]{padding:24px 32px;border-top:2px solid #f3f4f6;display:flex;justify-content:flex-end;gap:12px;position:sticky;bottom:0;background:#fff;border-radius:0 0 20px 20px}@keyframes _ngcontent-%COMP%_studentModalFadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_studentModalFadeOut{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}"]})};var gm="182",Ys={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Xs={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},UE=0,xb=1,BE=2;var tf=1,zE=2,$c=3,ss=0,Pi=1,ur=2,To=0,qa=1,yb=2,bb=3,Cb=4,HE=5,zs=100,jE=101,GE=102,WE=103,$E=104,qE=200,YE=201,XE=202,ZE=203,j0=204,G0=205,KE=206,JE=207,QE=208,e4=209,t4=210,n4=211,i4=212,r4=213,o4=214,_m=0,vm=1,xm=2,Ya=3,ym=4,bm=5,Cm=6,wm=7,Mm=0,s4=1,a4=2,Jr=0,wb=1,Mb=2,Sb=3,Eb=4,Ab=5,Tb=6,Db=7;var ub=300,Zs=301,el=302,Sm=303,Em=304,nf=306,Xa=1e3,Mo=1001,W0=1002,li=1003,l4=1004;var rf=1005;var ui=1006,Am=1007;var Ks=1008;var $i=1009,Pb=1010,Ib=1011,qc=1012,Tm=1013,Qr=1014,eo=1015,Do=1016,Dm=1017,Pm=1018,Yc=1020,Ob=35902,Rb=35899,kb=1021,Nb=1022,Ar=1023,So=1026,Js=1027,Fb=1028,Im=1029,tl=1030,Om=1031;var Rm=1033,of=33776,sf=33777,af=33778,lf=33779,km=35840,Nm=35841,Fm=35842,Lm=35843,Vm=36196,Um=37492,Bm=37496,zm=37488,Hm=37489,jm=37490,Gm=37491,Wm=37808,$m=37809,qm=37810,Ym=37811,Xm=37812,Zm=37813,Km=37814,Jm=37815,Qm=37816,eg=37817,tg=37818,ng=37819,ig=37820,rg=37821,og=36492,sg=36494,ag=36495,lg=36283,cg=36284,ug=36285,dg=36286;var kd=2300,$0=2301,z0=2302,db=2400,fb=2401,hb=2402;var c4=3200;var Lb=0,u4=1,ls="",or="srgb",Za="srgb-linear",Nd="linear",Qt="srgb";var $a=7680;var pb=519,d4=512,f4=513,h4=514,fg=515,p4=516,m4=517,hg=518,g4=519,mb=35044;var Vb="300 es",Zr=2e3,Fd=2001;function Ub(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function q5(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Nc(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function _4(){let n=Nc("canvas");return n.style.display="block",n}var mE={},Fc=null;function Bb(...n){let e="THREE."+n.shift();Fc?Fc("log",e,...n):console.log(e,...n)}function ot(...n){let e="THREE."+n.shift();Fc?Fc("warn",e,...n):console.warn(e,...n)}function ct(...n){let e="THREE."+n.shift();Fc?Fc("error",e,...n):console.error(e,...n)}function Lc(...n){let e=n.join(" ");e in mE||(mE[e]=!0,ot(...n))}function v4(n,e,t){return new Promise(function(i,r){function o(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:i()}}setTimeout(o,t)})}var Eo=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){let i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){let i=this._listeners;if(i===void 0)return;let r=i[e];if(r!==void 0){let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}dispatchEvent(e){let t=this._listeners;if(t===void 0)return;let i=t[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}},yi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],gE=1234567,Od=Math.PI/180,Vc=180/Math.PI;function Xc(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(yi[n&255]+yi[n>>8&255]+yi[n>>16&255]+yi[n>>24&255]+"-"+yi[e&255]+yi[e>>8&255]+"-"+yi[e>>16&15|64]+yi[e>>24&255]+"-"+yi[t&63|128]+yi[t>>8&255]+"-"+yi[t>>16&255]+yi[t>>24&255]+yi[i&255]+yi[i>>8&255]+yi[i>>16&255]+yi[i>>24&255]).toLowerCase()}function Pt(n,e,t){return Math.max(e,Math.min(t,n))}function zb(n,e){return(n%e+e)%e}function Y5(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function X5(n,e,t){return n!==e?(t-n)/(e-n):0}function Rd(n,e,t){return(1-t)*n+t*e}function Z5(n,e,t,i){return Rd(n,e,1-Math.exp(-t*i))}function K5(n,e=1){return e-Math.abs(zb(n,e*2)-e)}function J5(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Q5(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function e7(n,e){return n+Math.floor(Math.random()*(e-n+1))}function t7(n,e){return n+Math.random()*(e-n)}function n7(n){return n*(.5-Math.random())}function i7(n){n!==void 0&&(gE=n);let e=gE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function r7(n){return n*Od}function o7(n){return n*Vc}function s7(n){return(n&n-1)===0&&n!==0}function a7(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function l7(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function c7(n,e,t,i,r){let o=Math.cos,s=Math.sin,a=o(t/2),u=s(t/2),f=o((e+i)/2),p=s((e+i)/2),h=o((e-i)/2),v=s((e-i)/2),x=o((i-e)/2),w=s((i-e)/2);switch(r){case"XYX":n.set(a*p,u*h,u*v,a*f);break;case"YZY":n.set(u*v,a*p,u*h,a*f);break;case"ZXZ":n.set(u*h,u*v,a*p,a*f);break;case"XZX":n.set(a*p,u*w,u*x,a*f);break;case"YXY":n.set(u*x,a*p,u*w,a*f);break;case"ZYZ":n.set(u*w,u*x,a*p,a*f);break;default:ot("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Rc(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Di(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Hb={DEG2RAD:Od,RAD2DEG:Vc,generateUUID:Xc,clamp:Pt,euclideanModulo:zb,mapLinear:Y5,inverseLerp:X5,lerp:Rd,damp:Z5,pingpong:K5,smoothstep:J5,smootherstep:Q5,randInt:e7,randFloat:t7,randFloatSpread:n7,seededRandom:i7,degToRad:r7,radToDeg:o7,isPowerOfTwo:s7,ceilPowerOfTwo:a7,floorPowerOfTwo:l7,setQuaternionFromProperEuler:c7,normalize:Di,denormalize:Rc},dt=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Pt(this.x,e.x,t.x),this.y=Pt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Pt(this.x,e,t),this.y=Pt(this.y,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Pt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Pt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Er=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,o,s,a){let u=i[r+0],f=i[r+1],p=i[r+2],h=i[r+3],v=o[s+0],x=o[s+1],w=o[s+2],S=o[s+3];if(a<=0){e[t+0]=u,e[t+1]=f,e[t+2]=p,e[t+3]=h;return}if(a>=1){e[t+0]=v,e[t+1]=x,e[t+2]=w,e[t+3]=S;return}if(h!==S||u!==v||f!==x||p!==w){let b=u*v+f*x+p*w+h*S;b<0&&(v=-v,x=-x,w=-w,S=-S,b=-b);let y=1-a;if(b<.9995){let V=Math.acos(b),L=Math.sin(V);y=Math.sin(y*V)/L,a=Math.sin(a*V)/L,u=u*y+v*a,f=f*y+x*a,p=p*y+w*a,h=h*y+S*a}else{u=u*y+v*a,f=f*y+x*a,p=p*y+w*a,h=h*y+S*a;let V=1/Math.sqrt(u*u+f*f+p*p+h*h);u*=V,f*=V,p*=V,h*=V}}e[t]=u,e[t+1]=f,e[t+2]=p,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,o,s){let a=i[r],u=i[r+1],f=i[r+2],p=i[r+3],h=o[s],v=o[s+1],x=o[s+2],w=o[s+3];return e[t]=a*w+p*h+u*x-f*v,e[t+1]=u*w+p*v+f*h-a*x,e[t+2]=f*w+p*x+a*v-u*h,e[t+3]=p*w-a*h-u*v-f*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,u=Math.sin,f=a(i/2),p=a(r/2),h=a(o/2),v=u(i/2),x=u(r/2),w=u(o/2);switch(s){case"XYZ":this._x=v*p*h+f*x*w,this._y=f*x*h-v*p*w,this._z=f*p*w+v*x*h,this._w=f*p*h-v*x*w;break;case"YXZ":this._x=v*p*h+f*x*w,this._y=f*x*h-v*p*w,this._z=f*p*w-v*x*h,this._w=f*p*h+v*x*w;break;case"ZXY":this._x=v*p*h-f*x*w,this._y=f*x*h+v*p*w,this._z=f*p*w+v*x*h,this._w=f*p*h-v*x*w;break;case"ZYX":this._x=v*p*h-f*x*w,this._y=f*x*h+v*p*w,this._z=f*p*w-v*x*h,this._w=f*p*h+v*x*w;break;case"YZX":this._x=v*p*h+f*x*w,this._y=f*x*h+v*p*w,this._z=f*p*w-v*x*h,this._w=f*p*h-v*x*w;break;case"XZY":this._x=v*p*h-f*x*w,this._y=f*x*h-v*p*w,this._z=f*p*w+v*x*h,this._w=f*p*h+v*x*w;break;default:ot("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],o=t[8],s=t[1],a=t[5],u=t[9],f=t[2],p=t[6],h=t[10],v=i+a+h;if(v>0){let x=.5/Math.sqrt(v+1);this._w=.25/x,this._x=(p-u)*x,this._y=(o-f)*x,this._z=(s-r)*x}else if(i>a&&i>h){let x=2*Math.sqrt(1+i-a-h);this._w=(p-u)/x,this._x=.25*x,this._y=(r+s)/x,this._z=(o+f)/x}else if(a>h){let x=2*Math.sqrt(1+a-i-h);this._w=(o-f)/x,this._x=(r+s)/x,this._y=.25*x,this._z=(u+p)/x}else{let x=2*Math.sqrt(1+h-i-a);this._w=(s-r)/x,this._x=(o+f)/x,this._y=(u+p)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Pt(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,o=e._z,s=e._w,a=t._x,u=t._y,f=t._z,p=t._w;return this._x=i*p+s*a+r*f-o*u,this._y=r*p+s*u+o*a-i*f,this._z=o*p+s*f+i*u-r*a,this._w=s*p-i*a-r*u-o*f,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,r=e._y,o=e._z,s=e._w,a=this.dot(e);a<0&&(i=-i,r=-r,o=-o,s=-s,a=-a);let u=1-t;if(a<.9995){let f=Math.acos(a),p=Math.sin(f);u=Math.sin(u*f)/p,t=Math.sin(t*f)/p,this._x=this._x*u+i*t,this._y=this._y*u+r*t,this._z=this._z*u+o*t,this._w=this._w*u+s*t,this._onChangeCallback()}else this._x=this._x*u+i*t,this._y=this._y*u+r*t,this._z=this._z*u+o*t,this._w=this._w*u+s*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},Z=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(_E.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(_E.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,u=e.w,f=2*(s*r-a*i),p=2*(a*t-o*r),h=2*(o*i-s*t);return this.x=t+u*f+s*h-a*p,this.y=i+u*p+a*f-o*h,this.z=r+u*h+o*p-s*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Pt(this.x,e.x,t.x),this.y=Pt(this.y,e.y,t.y),this.z=Pt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Pt(this.x,e,t),this.y=Pt(this.y,e,t),this.z=Pt(this.z,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Pt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,o=e.z,s=t.x,a=t.y,u=t.z;return this.x=r*u-o*a,this.y=o*s-i*u,this.z=i*a-r*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return zy.copy(this).projectOnVector(e),this.sub(zy)}reflect(e){return this.sub(zy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Pt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},zy=new Z,_E=new Er,vt=class n{constructor(e,t,i,r,o,s,a,u,f){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,u,f)}set(e,t,i,r,o,s,a,u,f){let p=this.elements;return p[0]=e,p[1]=r,p[2]=a,p[3]=t,p[4]=o,p[5]=u,p[6]=i,p[7]=s,p[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[3],u=i[6],f=i[1],p=i[4],h=i[7],v=i[2],x=i[5],w=i[8],S=r[0],b=r[3],y=r[6],V=r[1],L=r[4],U=r[7],B=r[2],z=r[5],H=r[8];return o[0]=s*S+a*V+u*B,o[3]=s*b+a*L+u*z,o[6]=s*y+a*U+u*H,o[1]=f*S+p*V+h*B,o[4]=f*b+p*L+h*z,o[7]=f*y+p*U+h*H,o[2]=v*S+x*V+w*B,o[5]=v*b+x*L+w*z,o[8]=v*y+x*U+w*H,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],f=e[7],p=e[8];return t*s*p-t*a*f-i*o*p+i*a*u+r*o*f-r*s*u}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],f=e[7],p=e[8],h=p*s-a*f,v=a*u-p*o,x=f*o-s*u,w=t*h+i*v+r*x;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);let S=1/w;return e[0]=h*S,e[1]=(r*f-p*i)*S,e[2]=(a*i-r*s)*S,e[3]=v*S,e[4]=(p*t-r*u)*S,e[5]=(r*o-a*t)*S,e[6]=x*S,e[7]=(i*u-f*t)*S,e[8]=(s*t-i*o)*S,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,s,a){let u=Math.cos(o),f=Math.sin(o);return this.set(i*u,i*f,-i*(u*s+f*a)+s+e,-r*f,r*u,-r*(-f*s+u*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Hy.makeScale(e,t)),this}rotate(e){return this.premultiply(Hy.makeRotation(-e)),this}translate(e,t){return this.premultiply(Hy.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},Hy=new vt,vE=new vt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),xE=new vt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function u7(){let n={enabled:!0,workingColorSpace:Za,spaces:{},convert:function(r,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===Qt&&(r.r=os(r.r),r.g=os(r.g),r.b=os(r.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[o].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Qt&&(r.r=kc(r.r),r.g=kc(r.g),r.b=kc(r.b))),r},workingToColorSpace:function(r,o){return this.convert(r,this.workingColorSpace,o)},colorSpaceToWorking:function(r,o){return this.convert(r,o,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===ls?Nd:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,o=this.workingColorSpace){return r.fromArray(this.spaces[o].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,o,s){return r.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,o){return Lc("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,o)},toWorkingColorSpace:function(r,o){return Lc("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,o)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Za]:{primaries:e,whitePoint:i,transfer:Nd,toXYZ:vE,fromXYZ:xE,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:or},outputColorSpaceConfig:{drawingBufferColorSpace:or}},[or]:{primaries:e,whitePoint:i,transfer:Qt,toXYZ:vE,fromXYZ:xE,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:or}}}),n}var jt=u7();function os(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function kc(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var yc,q0=class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{yc===void 0&&(yc=Nc("canvas")),yc.width=e.width,yc.height=e.height;let r=yc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=yc}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Nc("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=os(o[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(os(t[i]/255)*255):t[i]=os(t[i]);return{data:t,width:e.width,height:e.height}}else return ot("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},d7=0,Uc=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:d7++}),this.uuid=Xc(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){let t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(jy(r[s].image)):o.push(jy(r[s]))}else o=jy(r);i.url=o}return t||(e.images[this.uuid]=i),i}};function jy(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?q0.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(ot("Texture: Unable to serialize Texture."),{})}var f7=0,Gy=new Z,to=(()=>{class n extends Eo{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Mo,o=Mo,s=ui,a=Ks,u=Ar,f=$i,p=n.DEFAULT_ANISOTROPY,h=ls){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:f7++}),this.uuid=Xc(),this.name="",this.source=new Uc(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=f,this.offset=new dt(0,0),this.repeat=new dt(1,1),this.center=new dt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Gy).x}get height(){return this.source.getSize(Gy).y}get depth(){return this.source.getSize(Gy).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(let i in t){let r=t[i];if(r===void 0){ot(`Texture.setValues(): parameter '${i}' has value of undefined.`);continue}let o=this[i];if(o===void 0){ot(`Texture.setValues(): property '${i}' does not exist.`);continue}o&&r&&o.isVector2&&r.isVector2||o&&r&&o.isVector3&&r.isVector3||o&&r&&o.isMatrix3&&r.isMatrix3?o.copy(r):this[i]=r}}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==ub)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Xa:t.x=t.x-Math.floor(t.x);break;case Mo:t.x=t.x<0?0:1;break;case W0:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Xa:t.y=t.y-Math.floor(t.y);break;case Mo:t.y=t.y<0?0:1;break;case W0:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=ub,n.DEFAULT_ANISOTROPY=1,n})(),Pn=class n{constructor(e=0,t=0,i=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o,u=e.elements,f=u[0],p=u[4],h=u[8],v=u[1],x=u[5],w=u[9],S=u[2],b=u[6],y=u[10];if(Math.abs(p-v)<.01&&Math.abs(h-S)<.01&&Math.abs(w-b)<.01){if(Math.abs(p+v)<.1&&Math.abs(h+S)<.1&&Math.abs(w+b)<.1&&Math.abs(f+x+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let L=(f+1)/2,U=(x+1)/2,B=(y+1)/2,z=(p+v)/4,H=(h+S)/4,Q=(w+b)/4;return L>U&&L>B?L<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(L),r=z/i,o=H/i):U>B?U<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(U),i=z/r,o=Q/r):B<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(B),i=H/o,r=Q/o),this.set(i,r,o,t),this}let V=Math.sqrt((b-w)*(b-w)+(h-S)*(h-S)+(v-p)*(v-p));return Math.abs(V)<.001&&(V=1),this.x=(b-w)/V,this.y=(h-S)/V,this.z=(v-p)/V,this.w=Math.acos((f+x+y-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Pt(this.x,e.x,t.x),this.y=Pt(this.y,e.y,t.y),this.z=Pt(this.z,e.z,t.z),this.w=Pt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Pt(this.x,e,t),this.y=Pt(this.y,e,t),this.z=Pt(this.z,e,t),this.w=Pt(this.w,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Pt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Y0=class extends Eo{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ui,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Pn(0,0,e,t),this.scissorTest=!1,this.viewport=new Pn(0,0,e,t);let r={width:e,height:t,depth:i.depth},o=new to(r);this.textures=[];let s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){let t={minFilter:ui,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;let r=Object.assign({},e.textures[t].image);this.textures[t].source=new Uc(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},ar=class extends Y0{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}},Ld=class extends to{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=li,this.minFilter=li,this.wrapR=Mo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var X0=class extends to{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=li,this.minFilter=li,this.wrapR=Mo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Hs=class{constructor(e=new Z(1/0,1/0,1/0),t=new Z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(qr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(qr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=qr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let o=i.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,qr):qr.fromBufferAttribute(o,s),qr.applyMatrix4(e.matrixWorld),this.expandByPoint(qr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),b0.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),b0.copy(i.boundingBox)),b0.applyMatrix4(e.matrixWorld),this.union(b0)}let r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,qr),qr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ad),C0.subVectors(this.max,Ad),bc.subVectors(e.a,Ad),Cc.subVectors(e.b,Ad),wc.subVectors(e.c,Ad),ks.subVectors(Cc,bc),Ns.subVectors(wc,Cc),Ha.subVectors(bc,wc);let t=[0,-ks.z,ks.y,0,-Ns.z,Ns.y,0,-Ha.z,Ha.y,ks.z,0,-ks.x,Ns.z,0,-Ns.x,Ha.z,0,-Ha.x,-ks.y,ks.x,0,-Ns.y,Ns.x,0,-Ha.y,Ha.x,0];return!Wy(t,bc,Cc,wc,C0)||(t=[1,0,0,0,1,0,0,0,1],!Wy(t,bc,Cc,wc,C0))?!1:(w0.crossVectors(ks,Ns),t=[w0.x,w0.y,w0.z],Wy(t,bc,Cc,wc,C0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(qr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(es[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),es[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),es[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),es[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),es[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),es[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),es[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),es[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(es),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}},es=[new Z,new Z,new Z,new Z,new Z,new Z,new Z,new Z],qr=new Z,b0=new Hs,bc=new Z,Cc=new Z,wc=new Z,ks=new Z,Ns=new Z,Ha=new Z,Ad=new Z,C0=new Z,w0=new Z,ja=new Z;function Wy(n,e,t,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){ja.fromArray(n,o);let a=r.x*Math.abs(ja.x)+r.y*Math.abs(ja.y)+r.z*Math.abs(ja.z),u=e.dot(ja),f=t.dot(ja),p=i.dot(ja);if(Math.max(-Math.max(u,f,p),Math.min(u,f,p))>a)return!1}return!0}var h7=new Hs,Td=new Z,$y=new Z,Ka=class{constructor(e=new Z,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):h7.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Td.subVectors(e,this.center);let t=Td.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Td,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):($y.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Td.copy(e.center).add($y)),this.expandByPoint(Td.copy(e.center).sub($y))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}},ts=new Z,qy=new Z,M0=new Z,Fs=new Z,Yy=new Z,S0=new Z,Xy=new Z,Ja=class{constructor(e=new Z,t=new Z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ts)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=ts.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ts.copy(this.origin).addScaledVector(this.direction,t),ts.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){qy.copy(e).add(t).multiplyScalar(.5),M0.copy(t).sub(e).normalize(),Fs.copy(this.origin).sub(qy);let o=e.distanceTo(t)*.5,s=-this.direction.dot(M0),a=Fs.dot(this.direction),u=-Fs.dot(M0),f=Fs.lengthSq(),p=Math.abs(1-s*s),h,v,x,w;if(p>0)if(h=s*u-a,v=s*a-u,w=o*p,h>=0)if(v>=-w)if(v<=w){let S=1/p;h*=S,v*=S,x=h*(h+s*v+2*a)+v*(s*h+v+2*u)+f}else v=o,h=Math.max(0,-(s*v+a)),x=-h*h+v*(v+2*u)+f;else v=-o,h=Math.max(0,-(s*v+a)),x=-h*h+v*(v+2*u)+f;else v<=-w?(h=Math.max(0,-(-s*o+a)),v=h>0?-o:Math.min(Math.max(-o,-u),o),x=-h*h+v*(v+2*u)+f):v<=w?(h=0,v=Math.min(Math.max(-o,-u),o),x=v*(v+2*u)+f):(h=Math.max(0,-(s*o+a)),v=h>0?o:Math.min(Math.max(-o,-u),o),x=-h*h+v*(v+2*u)+f);else v=s>0?-o:o,h=Math.max(0,-(s*v+a)),x=-h*h+v*(v+2*u)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(qy).addScaledVector(M0,v),x}intersectSphere(e,t){ts.subVectors(e.center,this.origin);let i=ts.dot(this.direction),r=ts.dot(ts)-i*i,o=e.radius*e.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,u=i+s;return u<0?null:a<0?this.at(u,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,s,a,u,f=1/this.direction.x,p=1/this.direction.y,h=1/this.direction.z,v=this.origin;return f>=0?(i=(e.min.x-v.x)*f,r=(e.max.x-v.x)*f):(i=(e.max.x-v.x)*f,r=(e.min.x-v.x)*f),p>=0?(o=(e.min.y-v.y)*p,s=(e.max.y-v.y)*p):(o=(e.max.y-v.y)*p,s=(e.min.y-v.y)*p),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),h>=0?(a=(e.min.z-v.z)*h,u=(e.max.z-v.z)*h):(a=(e.max.z-v.z)*h,u=(e.min.z-v.z)*h),i>u||a>r)||((a>i||i!==i)&&(i=a),(u<r||r!==r)&&(r=u),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ts)!==null}intersectTriangle(e,t,i,r,o){Yy.subVectors(t,e),S0.subVectors(i,e),Xy.crossVectors(Yy,S0);let s=this.direction.dot(Xy),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Fs.subVectors(this.origin,e);let u=a*this.direction.dot(S0.crossVectors(Fs,S0));if(u<0)return null;let f=a*this.direction.dot(Yy.cross(Fs));if(f<0||u+f>s)return null;let p=-a*Fs.dot(Xy);return p<0?null:this.at(p/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Dn=class n{constructor(e,t,i,r,o,s,a,u,f,p,h,v,x,w,S,b){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,u,f,p,h,v,x,w,S,b)}set(e,t,i,r,o,s,a,u,f,p,h,v,x,w,S,b){let y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=r,y[1]=o,y[5]=s,y[9]=a,y[13]=u,y[2]=f,y[6]=p,y[10]=h,y[14]=v,y[3]=x,y[7]=w,y[11]=S,y[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();let t=this.elements,i=e.elements,r=1/Mc.setFromMatrixColumn(e,0).length(),o=1/Mc.setFromMatrixColumn(e,1).length(),s=1/Mc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),u=Math.cos(r),f=Math.sin(r),p=Math.cos(o),h=Math.sin(o);if(e.order==="XYZ"){let v=s*p,x=s*h,w=a*p,S=a*h;t[0]=u*p,t[4]=-u*h,t[8]=f,t[1]=x+w*f,t[5]=v-S*f,t[9]=-a*u,t[2]=S-v*f,t[6]=w+x*f,t[10]=s*u}else if(e.order==="YXZ"){let v=u*p,x=u*h,w=f*p,S=f*h;t[0]=v+S*a,t[4]=w*a-x,t[8]=s*f,t[1]=s*h,t[5]=s*p,t[9]=-a,t[2]=x*a-w,t[6]=S+v*a,t[10]=s*u}else if(e.order==="ZXY"){let v=u*p,x=u*h,w=f*p,S=f*h;t[0]=v-S*a,t[4]=-s*h,t[8]=w+x*a,t[1]=x+w*a,t[5]=s*p,t[9]=S-v*a,t[2]=-s*f,t[6]=a,t[10]=s*u}else if(e.order==="ZYX"){let v=s*p,x=s*h,w=a*p,S=a*h;t[0]=u*p,t[4]=w*f-x,t[8]=v*f+S,t[1]=u*h,t[5]=S*f+v,t[9]=x*f-w,t[2]=-f,t[6]=a*u,t[10]=s*u}else if(e.order==="YZX"){let v=s*u,x=s*f,w=a*u,S=a*f;t[0]=u*p,t[4]=S-v*h,t[8]=w*h+x,t[1]=h,t[5]=s*p,t[9]=-a*p,t[2]=-f*p,t[6]=x*h+w,t[10]=v-S*h}else if(e.order==="XZY"){let v=s*u,x=s*f,w=a*u,S=a*f;t[0]=u*p,t[4]=-h,t[8]=f*p,t[1]=v*h+S,t[5]=s*p,t[9]=x*h-w,t[2]=w*h-x,t[6]=a*p,t[10]=S*h+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(p7,e,m7)}lookAt(e,t,i){let r=this.elements;return ir.subVectors(e,t),ir.lengthSq()===0&&(ir.z=1),ir.normalize(),Ls.crossVectors(i,ir),Ls.lengthSq()===0&&(Math.abs(i.z)===1?ir.x+=1e-4:ir.z+=1e-4,ir.normalize(),Ls.crossVectors(i,ir)),Ls.normalize(),E0.crossVectors(ir,Ls),r[0]=Ls.x,r[4]=E0.x,r[8]=ir.x,r[1]=Ls.y,r[5]=E0.y,r[9]=ir.y,r[2]=Ls.z,r[6]=E0.z,r[10]=ir.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[4],u=i[8],f=i[12],p=i[1],h=i[5],v=i[9],x=i[13],w=i[2],S=i[6],b=i[10],y=i[14],V=i[3],L=i[7],U=i[11],B=i[15],z=r[0],H=r[4],Q=r[8],A=r[12],N=r[1],G=r[5],q=r[9],ne=r[13],ue=r[2],ce=r[6],ae=r[10],oe=r[14],_e=r[3],Fe=r[7],Te=r[11],Le=r[15];return o[0]=s*z+a*N+u*ue+f*_e,o[4]=s*H+a*G+u*ce+f*Fe,o[8]=s*Q+a*q+u*ae+f*Te,o[12]=s*A+a*ne+u*oe+f*Le,o[1]=p*z+h*N+v*ue+x*_e,o[5]=p*H+h*G+v*ce+x*Fe,o[9]=p*Q+h*q+v*ae+x*Te,o[13]=p*A+h*ne+v*oe+x*Le,o[2]=w*z+S*N+b*ue+y*_e,o[6]=w*H+S*G+b*ce+y*Fe,o[10]=w*Q+S*q+b*ae+y*Te,o[14]=w*A+S*ne+b*oe+y*Le,o[3]=V*z+L*N+U*ue+B*_e,o[7]=V*H+L*G+U*ce+B*Fe,o[11]=V*Q+L*q+U*ae+B*Te,o[15]=V*A+L*ne+U*oe+B*Le,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],u=e[9],f=e[13],p=e[2],h=e[6],v=e[10],x=e[14],w=e[3],S=e[7],b=e[11],y=e[15],V=u*x-f*v,L=a*x-f*h,U=a*v-u*h,B=s*x-f*p,z=s*v-u*p,H=s*h-a*p;return t*(S*V-b*L+y*U)-i*(w*V-b*B+y*z)+r*(w*L-S*B+y*H)-o*(w*U-S*z+b*H)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],f=e[7],p=e[8],h=e[9],v=e[10],x=e[11],w=e[12],S=e[13],b=e[14],y=e[15],V=h*b*f-S*v*f+S*u*x-a*b*x-h*u*y+a*v*y,L=w*v*f-p*b*f-w*u*x+s*b*x+p*u*y-s*v*y,U=p*S*f-w*h*f+w*a*x-s*S*x-p*a*y+s*h*y,B=w*h*u-p*S*u-w*a*v+s*S*v+p*a*b-s*h*b,z=t*V+i*L+r*U+o*B;if(z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let H=1/z;return e[0]=V*H,e[1]=(S*v*o-h*b*o-S*r*x+i*b*x+h*r*y-i*v*y)*H,e[2]=(a*b*o-S*u*o+S*r*f-i*b*f-a*r*y+i*u*y)*H,e[3]=(h*u*o-a*v*o-h*r*f+i*v*f+a*r*x-i*u*x)*H,e[4]=L*H,e[5]=(p*b*o-w*v*o+w*r*x-t*b*x-p*r*y+t*v*y)*H,e[6]=(w*u*o-s*b*o-w*r*f+t*b*f+s*r*y-t*u*y)*H,e[7]=(s*v*o-p*u*o+p*r*f-t*v*f-s*r*x+t*u*x)*H,e[8]=U*H,e[9]=(w*h*o-p*S*o-w*i*x+t*S*x+p*i*y-t*h*y)*H,e[10]=(s*S*o-w*a*o+w*i*f-t*S*f-s*i*y+t*a*y)*H,e[11]=(p*a*o-s*h*o-p*i*f+t*h*f+s*i*x-t*a*x)*H,e[12]=B*H,e[13]=(p*S*r-w*h*r+w*i*v-t*S*v-p*i*b+t*h*b)*H,e[14]=(w*a*r-s*S*r-w*i*u+t*S*u+s*i*b-t*a*b)*H,e[15]=(s*h*r-p*a*r+p*i*u-t*h*u-s*i*v+t*a*v)*H,this}scale(e){let t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),o=1-i,s=e.x,a=e.y,u=e.z,f=o*s,p=o*a;return this.set(f*s+i,f*a-r*u,f*u+r*a,0,f*a+r*u,p*a+i,p*u-r*s,0,f*u-r*a,p*u+r*s,o*u*u+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,o=t._x,s=t._y,a=t._z,u=t._w,f=o+o,p=s+s,h=a+a,v=o*f,x=o*p,w=o*h,S=s*p,b=s*h,y=a*h,V=u*f,L=u*p,U=u*h,B=i.x,z=i.y,H=i.z;return r[0]=(1-(S+y))*B,r[1]=(x+U)*B,r[2]=(w-L)*B,r[3]=0,r[4]=(x-U)*z,r[5]=(1-(v+y))*z,r[6]=(b+V)*z,r[7]=0,r[8]=(w+L)*H,r[9]=(b-V)*H,r[10]=(1-(v+S))*H,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements;if(e.x=r[12],e.y=r[13],e.z=r[14],this.determinant()===0)return i.set(1,1,1),t.identity(),this;let o=Mc.set(r[0],r[1],r[2]).length(),s=Mc.set(r[4],r[5],r[6]).length(),a=Mc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),Yr.copy(this);let f=1/o,p=1/s,h=1/a;return Yr.elements[0]*=f,Yr.elements[1]*=f,Yr.elements[2]*=f,Yr.elements[4]*=p,Yr.elements[5]*=p,Yr.elements[6]*=p,Yr.elements[8]*=h,Yr.elements[9]*=h,Yr.elements[10]*=h,t.setFromRotationMatrix(Yr),i.x=o,i.y=s,i.z=a,this}makePerspective(e,t,i,r,o,s,a=Zr,u=!1){let f=this.elements,p=2*o/(t-e),h=2*o/(i-r),v=(t+e)/(t-e),x=(i+r)/(i-r),w,S;if(u)w=o/(s-o),S=s*o/(s-o);else if(a===Zr)w=-(s+o)/(s-o),S=-2*s*o/(s-o);else if(a===Fd)w=-s/(s-o),S=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return f[0]=p,f[4]=0,f[8]=v,f[12]=0,f[1]=0,f[5]=h,f[9]=x,f[13]=0,f[2]=0,f[6]=0,f[10]=w,f[14]=S,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,i,r,o,s,a=Zr,u=!1){let f=this.elements,p=2/(t-e),h=2/(i-r),v=-(t+e)/(t-e),x=-(i+r)/(i-r),w,S;if(u)w=1/(s-o),S=s/(s-o);else if(a===Zr)w=-2/(s-o),S=-(s+o)/(s-o);else if(a===Fd)w=-1/(s-o),S=-o/(s-o);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return f[0]=p,f[4]=0,f[8]=0,f[12]=v,f[1]=0,f[5]=h,f[9]=0,f[13]=x,f[2]=0,f[6]=0,f[10]=w,f[14]=S,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},Mc=new Z,Yr=new Dn,p7=new Z(0,0,0),m7=new Z(1,1,1),Ls=new Z,E0=new Z,ir=new Z,yE=new Dn,bE=new Er,js=(()=>{class n{constructor(t=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,o=this._order){return this._x=t,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let o=t.elements,s=o[0],a=o[4],u=o[8],f=o[1],p=o[5],h=o[9],v=o[2],x=o[6],w=o[10];switch(i){case"XYZ":this._y=Math.asin(Pt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,w),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(x,p),this._z=0);break;case"YXZ":this._x=Math.asin(-Pt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(u,w),this._z=Math.atan2(f,p)):(this._y=Math.atan2(-v,s),this._z=0);break;case"ZXY":this._x=Math.asin(Pt(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-v,w),this._z=Math.atan2(-a,p)):(this._y=0,this._z=Math.atan2(f,s));break;case"ZYX":this._y=Math.asin(-Pt(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(x,w),this._z=Math.atan2(f,s)):(this._x=0,this._z=Math.atan2(-a,p));break;case"YZX":this._z=Math.asin(Pt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-h,p),this._y=Math.atan2(-v,s)):(this._x=0,this._y=Math.atan2(u,w));break;case"XZY":this._z=Math.asin(-Pt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(x,p),this._y=Math.atan2(u,s)):(this._x=Math.atan2(-h,w),this._y=0);break;default:ot("Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return yE.makeRotationFromQuaternion(t),this.setFromRotationMatrix(yE,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return bE.setFromEuler(this),this.setFromQuaternion(bE,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),Vd=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},g7=0,CE=new Z,Sc=new Er,ns=new Dn,A0=new Z,Dd=new Z,_7=new Z,v7=new Er,wE=new Z(1,0,0),ME=new Z(0,1,0),SE=new Z(0,0,1),EE={type:"added"},x7={type:"removed"},Ec={type:"childadded",child:null},Zy={type:"childremoved",child:null},Kr=(()=>{class n extends Eo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:g7++}),this.uuid=Xc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new Z,i=new js,r=new Er,o=new Z(1,1,1);function s(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Dn},normalMatrix:{value:new vt}}),this.matrix=new Dn,this.matrixWorld=new Dn,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Vd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Sc.setFromAxisAngle(t,i),this.quaternion.multiply(Sc),this}rotateOnWorldAxis(t,i){return Sc.setFromAxisAngle(t,i),this.quaternion.premultiply(Sc),this}rotateX(t){return this.rotateOnAxis(wE,t)}rotateY(t){return this.rotateOnAxis(ME,t)}rotateZ(t){return this.rotateOnAxis(SE,t)}translateOnAxis(t,i){return CE.copy(t).applyQuaternion(this.quaternion),this.position.add(CE.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(wE,t)}translateY(t){return this.translateOnAxis(ME,t)}translateZ(t){return this.translateOnAxis(SE,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(ns.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?A0.copy(t):A0.set(t,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),Dd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ns.lookAt(Dd,A0,this.up):ns.lookAt(A0,Dd,this.up),this.quaternion.setFromRotationMatrix(ns),o&&(ns.extractRotation(o.matrixWorld),Sc.setFromRotationMatrix(ns),this.quaternion.premultiply(Sc.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(ct("Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(EE),Ec.child=t,this.dispatchEvent(Ec),Ec.child=null):ct("Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(x7),Zy.child=t,this.dispatchEvent(Zy),Zy.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),ns.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),ns.multiply(t.parent.matrixWorld)),t.applyMatrix4(ns),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(EE),Ec.child=t,this.dispatchEvent(Ec),Ec.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(t,i);if(a!==void 0)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Dd,t,_7),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Dd,v7,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.geometryInfo=this._geometryInfo.map(u=>lt(xe({},u),{boundingBox:u.boundingBox?u.boundingBox.toJSON():void 0,boundingSphere:u.boundingSphere?u.boundingSphere.toJSON():void 0})),o.instanceInfo=this._instanceInfo.map(u=>xe({},u)),o.availableInstanceIds=this._availableInstanceIds.slice(),o.availableGeometryIds=this._availableGeometryIds.slice(),o.nextIndexStart=this._nextIndexStart,o.nextVertexStart=this._nextVertexStart,o.geometryCount=this._geometryCount,o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.matricesTexture=this._matricesTexture.toJSON(t),o.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(o.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(o.boundingBox=this.boundingBox.toJSON()));function s(u,f){return u[f.uuid]===void 0&&(u[f.uuid]=f.toJSON(t)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);let u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){let f=u.shapes;if(Array.isArray(f))for(let p=0,h=f.length;p<h;p++){let v=f[p];s(t.shapes,v)}else s(t.shapes,f)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let u=[];for(let f=0,p=this.material.length;f<p;f++)u.push(s(t.materials,this.material[f]));o.material=u}else o.material=s(t.materials,this.material);if(this.children.length>0){o.children=[];for(let u=0;u<this.children.length;u++)o.children.push(this.children[u].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let u=0;u<this.animations.length;u++){let f=this.animations[u];o.animations.push(s(t.animations,f))}}if(i){let u=a(t.geometries),f=a(t.materials),p=a(t.textures),h=a(t.images),v=a(t.shapes),x=a(t.skeletons),w=a(t.animations),S=a(t.nodes);u.length>0&&(r.geometries=u),f.length>0&&(r.materials=f),p.length>0&&(r.textures=p),h.length>0&&(r.images=h),v.length>0&&(r.shapes=v),x.length>0&&(r.skeletons=x),w.length>0&&(r.animations=w),S.length>0&&(r.nodes=S)}return r.object=o,r;function a(u){let f=[];for(let p in u){let h=u[p];delete h.metadata,f.push(h)}return f}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let o=t.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new Z(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),Xr=new Z,is=new Z,Ky=new Z,rs=new Z,Ac=new Z,Tc=new Z,AE=new Z,Jy=new Z,Qy=new Z,eb=new Z,tb=new Pn,nb=new Pn,ib=new Pn,Bs=class n{constructor(e=new Z,t=new Z,i=new Z){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Xr.subVectors(e,t),r.cross(Xr);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){Xr.subVectors(r,t),is.subVectors(i,t),Ky.subVectors(e,t);let s=Xr.dot(Xr),a=Xr.dot(is),u=Xr.dot(Ky),f=is.dot(is),p=is.dot(Ky),h=s*f-a*a;if(h===0)return o.set(0,0,0),null;let v=1/h,x=(f*u-a*p)*v,w=(s*p-a*u)*v;return o.set(1-x-w,w,x)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,rs)===null?!1:rs.x>=0&&rs.y>=0&&rs.x+rs.y<=1}static getInterpolation(e,t,i,r,o,s,a,u){return this.getBarycoord(e,t,i,r,rs)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(o,rs.x),u.addScaledVector(s,rs.y),u.addScaledVector(a,rs.z),u)}static getInterpolatedAttribute(e,t,i,r,o,s){return tb.setScalar(0),nb.setScalar(0),ib.setScalar(0),tb.fromBufferAttribute(e,t),nb.fromBufferAttribute(e,i),ib.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(tb,o.x),s.addScaledVector(nb,o.y),s.addScaledVector(ib,o.z),s}static isFrontFacing(e,t,i,r){return Xr.subVectors(i,t),is.subVectors(e,t),Xr.cross(is).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xr.subVectors(this.c,this.b),is.subVectors(this.a,this.b),Xr.cross(is).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,o){return n.getInterpolation(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,o=this.c,s,a;Ac.subVectors(r,i),Tc.subVectors(o,i),Jy.subVectors(e,i);let u=Ac.dot(Jy),f=Tc.dot(Jy);if(u<=0&&f<=0)return t.copy(i);Qy.subVectors(e,r);let p=Ac.dot(Qy),h=Tc.dot(Qy);if(p>=0&&h<=p)return t.copy(r);let v=u*h-p*f;if(v<=0&&u>=0&&p<=0)return s=u/(u-p),t.copy(i).addScaledVector(Ac,s);eb.subVectors(e,o);let x=Ac.dot(eb),w=Tc.dot(eb);if(w>=0&&x<=w)return t.copy(o);let S=x*f-u*w;if(S<=0&&f>=0&&w<=0)return a=f/(f-w),t.copy(i).addScaledVector(Tc,a);let b=p*w-x*h;if(b<=0&&h-p>=0&&x-w>=0)return AE.subVectors(o,r),a=(h-p)/(h-p+(x-w)),t.copy(r).addScaledVector(AE,a);let y=1/(b+S+v);return s=S*y,a=v*y,t.copy(i).addScaledVector(Ac,s).addScaledVector(Tc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},x4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Vs={h:0,s:0,l:0},T0={h:0,s:0,l:0};function rb(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var Et=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=or){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,jt.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=jt.workingColorSpace){return this.r=e,this.g=t,this.b=i,jt.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=jt.workingColorSpace){if(e=zb(e,1),t=Pt(t,0,1),i=Pt(i,0,1),t===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+t):i+t-i*t,s=2*i-o;this.r=rb(s,o,e+1/3),this.g=rb(s,o,e),this.b=rb(s,o,e-1/3)}return jt.colorSpaceToWorking(this,r),this}setStyle(e,t=or){function i(o){o!==void 0&&parseFloat(o)<1&&ot("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:ot("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(o,16),t);ot("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=or){let i=x4[e.toLowerCase()];return i!==void 0?this.setHex(i,t):ot("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=os(e.r),this.g=os(e.g),this.b=os(e.b),this}copyLinearToSRGB(e){return this.r=kc(e.r),this.g=kc(e.g),this.b=kc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=or){return jt.workingToColorSpace(bi.copy(this),e),Math.round(Pt(bi.r*255,0,255))*65536+Math.round(Pt(bi.g*255,0,255))*256+Math.round(Pt(bi.b*255,0,255))}getHexString(e=or){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=jt.workingColorSpace){jt.workingToColorSpace(bi.copy(this),t);let i=bi.r,r=bi.g,o=bi.b,s=Math.max(i,r,o),a=Math.min(i,r,o),u,f,p=(a+s)/2;if(a===s)u=0,f=0;else{let h=s-a;switch(f=p<=.5?h/(s+a):h/(2-s-a),s){case i:u=(r-o)/h+(r<o?6:0);break;case r:u=(o-i)/h+2;break;case o:u=(i-r)/h+4;break}u/=6}return e.h=u,e.s=f,e.l=p,e}getRGB(e,t=jt.workingColorSpace){return jt.workingToColorSpace(bi.copy(this),t),e.r=bi.r,e.g=bi.g,e.b=bi.b,e}getStyle(e=or){jt.workingToColorSpace(bi.copy(this),e);let t=bi.r,i=bi.g,r=bi.b;return e!==or?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Vs),this.setHSL(Vs.h+e,Vs.s+t,Vs.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Vs),e.getHSL(T0);let i=Rd(Vs.h,T0.h,t),r=Rd(Vs.s,T0.s,t),o=Rd(Vs.l,T0.l,t);return this.setHSL(i,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*r,this.g=o[1]*t+o[4]*i+o[7]*r,this.b=o[2]*t+o[5]*i+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},bi=new Et;Et.NAMES=x4;var y7=0,as=class extends Eo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:y7++}),this.uuid=Xc(),this.name="",this.type="Material",this.blending=qa,this.side=ss,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=j0,this.blendDst=G0,this.blendEquation=zs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Et(0,0,0),this.blendAlpha=0,this.depthFunc=Ya,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=pb,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$a,this.stencilZFail=$a,this.stencilZPass=$a,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){ot(`Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){ot(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==qa&&(i.blending=this.blending),this.side!==ss&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==j0&&(i.blendSrc=this.blendSrc),this.blendDst!==G0&&(i.blendDst=this.blendDst),this.blendEquation!==zs&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ya&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==pb&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==$a&&(i.stencilFail=this.stencilFail),this.stencilZFail!==$a&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==$a&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let a in o){let u=o[a];delete u.metadata,s.push(u)}return s}if(t){let o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Gs=class extends as{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new js,this.combine=Mm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var Kn=new Z,D0=new dt,b7=0,sr=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:b7++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=mb,this.updateRanges=[],this.gpuType=eo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)D0.fromBufferAttribute(this,t),D0.applyMatrix3(e),this.setXY(t,D0.x,D0.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Kn.fromBufferAttribute(this,t),Kn.applyMatrix3(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Kn.fromBufferAttribute(this,t),Kn.applyMatrix4(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Kn.fromBufferAttribute(this,t),Kn.applyNormalMatrix(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Kn.fromBufferAttribute(this,t),Kn.transformDirection(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Rc(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Di(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Rc(t,this.array)),t}setX(e,t){return this.normalized&&(t=Di(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Rc(t,this.array)),t}setY(e,t){return this.normalized&&(t=Di(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Rc(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Di(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Rc(t,this.array)),t}setW(e,t){return this.normalized&&(t=Di(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Di(t,this.array),i=Di(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Di(t,this.array),i=Di(i,this.array),r=Di(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e*=this.itemSize,this.normalized&&(t=Di(t,this.array),i=Di(i,this.array),r=Di(r,this.array),o=Di(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==mb&&(e.usage=this.usage),e}};var Ud=class extends sr{constructor(e,t,i){super(new Uint16Array(e),t,i)}};var Bd=class extends sr{constructor(e,t,i){super(new Uint32Array(e),t,i)}};var Nn=class extends sr{constructor(e,t,i){super(new Float32Array(e),t,i)}},C7=0,wr=new Dn,ob=new Kr,Dc=new Z,rr=new Hs,Pd=new Hs,ai=new Z,Wi=class n extends Eo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:C7++}),this.uuid=Xc(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Ub(e)?Bd:Ud)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new vt().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return wr.makeRotationFromQuaternion(e),this.applyMatrix4(wr),this}rotateX(e){return wr.makeRotationX(e),this.applyMatrix4(wr),this}rotateY(e){return wr.makeRotationY(e),this.applyMatrix4(wr),this}rotateZ(e){return wr.makeRotationZ(e),this.applyMatrix4(wr),this}translate(e,t,i){return wr.makeTranslation(e,t,i),this.applyMatrix4(wr),this}scale(e,t,i){return wr.makeScale(e,t,i),this.applyMatrix4(wr),this}lookAt(e){return ob.lookAt(e),ob.updateMatrix(),this.applyMatrix4(ob.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Dc).negate(),this.translate(Dc.x,Dc.y,Dc.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let i=[];for(let r=0,o=e.length;r<o;r++){let s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Nn(i,3))}else{let i=Math.min(e.length,t.count);for(let r=0;r<i;r++){let o=e[r];t.setXYZ(r,o.x,o.y,o.z||0)}e.length>t.count&&ot("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hs);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){ct("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Z(-1/0,-1/0,-1/0),new Z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let o=t[i];rr.setFromBufferAttribute(o),this.morphTargetsRelative?(ai.addVectors(this.boundingBox.min,rr.min),this.boundingBox.expandByPoint(ai),ai.addVectors(this.boundingBox.max,rr.max),this.boundingBox.expandByPoint(ai)):(this.boundingBox.expandByPoint(rr.min),this.boundingBox.expandByPoint(rr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&ct('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ka);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){ct("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Z,1/0);return}if(e){let i=this.boundingSphere.center;if(rr.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){let a=t[o];Pd.setFromBufferAttribute(a),this.morphTargetsRelative?(ai.addVectors(rr.min,Pd.min),rr.expandByPoint(ai),ai.addVectors(rr.max,Pd.max),rr.expandByPoint(ai)):(rr.expandByPoint(Pd.min),rr.expandByPoint(Pd.max))}rr.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)ai.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(ai));if(t)for(let o=0,s=t.length;o<s;o++){let a=t[o],u=this.morphTargetsRelative;for(let f=0,p=a.count;f<p;f++)ai.fromBufferAttribute(a,f),u&&(Dc.fromBufferAttribute(e,f),ai.add(Dc)),r=Math.max(r,i.distanceToSquared(ai))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&ct('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){ct("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.position,r=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new sr(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],u=[];for(let Q=0;Q<i.count;Q++)a[Q]=new Z,u[Q]=new Z;let f=new Z,p=new Z,h=new Z,v=new dt,x=new dt,w=new dt,S=new Z,b=new Z;function y(Q,A,N){f.fromBufferAttribute(i,Q),p.fromBufferAttribute(i,A),h.fromBufferAttribute(i,N),v.fromBufferAttribute(o,Q),x.fromBufferAttribute(o,A),w.fromBufferAttribute(o,N),p.sub(f),h.sub(f),x.sub(v),w.sub(v);let G=1/(x.x*w.y-w.x*x.y);isFinite(G)&&(S.copy(p).multiplyScalar(w.y).addScaledVector(h,-x.y).multiplyScalar(G),b.copy(h).multiplyScalar(x.x).addScaledVector(p,-w.x).multiplyScalar(G),a[Q].add(S),a[A].add(S),a[N].add(S),u[Q].add(b),u[A].add(b),u[N].add(b))}let V=this.groups;V.length===0&&(V=[{start:0,count:e.count}]);for(let Q=0,A=V.length;Q<A;++Q){let N=V[Q],G=N.start,q=N.count;for(let ne=G,ue=G+q;ne<ue;ne+=3)y(e.getX(ne+0),e.getX(ne+1),e.getX(ne+2))}let L=new Z,U=new Z,B=new Z,z=new Z;function H(Q){B.fromBufferAttribute(r,Q),z.copy(B);let A=a[Q];L.copy(A),L.sub(B.multiplyScalar(B.dot(A))).normalize(),U.crossVectors(z,A);let G=U.dot(u[Q])<0?-1:1;s.setXYZW(Q,L.x,L.y,L.z,G)}for(let Q=0,A=V.length;Q<A;++Q){let N=V[Q],G=N.start,q=N.count;for(let ne=G,ue=G+q;ne<ue;ne+=3)H(e.getX(ne+0)),H(e.getX(ne+1)),H(e.getX(ne+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new sr(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,x=i.count;v<x;v++)i.setXYZ(v,0,0,0);let r=new Z,o=new Z,s=new Z,a=new Z,u=new Z,f=new Z,p=new Z,h=new Z;if(e)for(let v=0,x=e.count;v<x;v+=3){let w=e.getX(v+0),S=e.getX(v+1),b=e.getX(v+2);r.fromBufferAttribute(t,w),o.fromBufferAttribute(t,S),s.fromBufferAttribute(t,b),p.subVectors(s,o),h.subVectors(r,o),p.cross(h),a.fromBufferAttribute(i,w),u.fromBufferAttribute(i,S),f.fromBufferAttribute(i,b),a.add(p),u.add(p),f.add(p),i.setXYZ(w,a.x,a.y,a.z),i.setXYZ(S,u.x,u.y,u.z),i.setXYZ(b,f.x,f.y,f.z)}else for(let v=0,x=t.count;v<x;v+=3)r.fromBufferAttribute(t,v+0),o.fromBufferAttribute(t,v+1),s.fromBufferAttribute(t,v+2),p.subVectors(s,o),h.subVectors(r,o),p.cross(h),i.setXYZ(v+0,p.x,p.y,p.z),i.setXYZ(v+1,p.x,p.y,p.z),i.setXYZ(v+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ai.fromBufferAttribute(e,t),ai.normalize(),e.setXYZ(t,ai.x,ai.y,ai.z)}toNonIndexed(){function e(a,u){let f=a.array,p=a.itemSize,h=a.normalized,v=new f.constructor(u.length*p),x=0,w=0;for(let S=0,b=u.length;S<b;S++){a.isInterleavedBufferAttribute?x=u[S]*a.data.stride+a.offset:x=u[S]*p;for(let y=0;y<p;y++)v[w++]=f[x++]}return new sr(v,p,h)}if(this.index===null)return ot("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,r=this.attributes;for(let a in r){let u=r[a],f=e(u,i);t.setAttribute(a,f)}let o=this.morphAttributes;for(let a in o){let u=[],f=o[a];for(let p=0,h=f.length;p<h;p++){let v=f[p],x=e(v,i);u.push(x)}t.morphAttributes[a]=u}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,u=s.length;a<u;a++){let f=s[a];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){let e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let u=this.parameters;for(let f in u)u[f]!==void 0&&(e[f]=u[f]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let u in i){let f=i[u];e.data.attributes[u]=f.toJSON(e.data)}let r={},o=!1;for(let u in this.morphAttributes){let f=this.morphAttributes[u],p=[];for(let h=0,v=f.length;h<v;h++){let x=f[h];p.push(x.toJSON(e.data))}p.length>0&&(r[u]=p,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone());let r=e.attributes;for(let f in r){let p=r[f];this.setAttribute(f,p.clone(t))}let o=e.morphAttributes;for(let f in o){let p=[],h=o[f];for(let v=0,x=h.length;v<x;v++)p.push(h[v].clone(t));this.morphAttributes[f]=p}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let f=0,p=s.length;f<p;f++){let h=s[f];this.addGroup(h.start,h.count,h.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},TE=new Dn,Ga=new Ja,P0=new Ka,DE=new Z,I0=new Z,O0=new Z,R0=new Z,sb=new Z,k0=new Z,PE=new Z,N0=new Z,Vt=class extends Kr{constructor(e=new Wi,t=new Gs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(o&&a){k0.set(0,0,0);for(let u=0,f=o.length;u<f;u++){let p=a[u],h=o[u];p!==0&&(sb.fromBufferAttribute(h,e),s?k0.addScaledVector(sb,p):k0.addScaledVector(sb.sub(t),p))}t.add(k0)}return t}raycast(e,t){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),P0.copy(i.boundingSphere),P0.applyMatrix4(o),Ga.copy(e.ray).recast(e.near),!(P0.containsPoint(Ga.origin)===!1&&(Ga.intersectSphere(P0,DE)===null||Ga.origin.distanceToSquared(DE)>(e.far-e.near)**2))&&(TE.copy(o).invert(),Ga.copy(e.ray).applyMatrix4(TE),!(i.boundingBox!==null&&Ga.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Ga)))}_computeIntersections(e,t,i){let r,o=this.geometry,s=this.material,a=o.index,u=o.attributes.position,f=o.attributes.uv,p=o.attributes.uv1,h=o.attributes.normal,v=o.groups,x=o.drawRange;if(a!==null)if(Array.isArray(s))for(let w=0,S=v.length;w<S;w++){let b=v[w],y=s[b.materialIndex],V=Math.max(b.start,x.start),L=Math.min(a.count,Math.min(b.start+b.count,x.start+x.count));for(let U=V,B=L;U<B;U+=3){let z=a.getX(U),H=a.getX(U+1),Q=a.getX(U+2);r=F0(this,y,e,i,f,p,h,z,H,Q),r&&(r.faceIndex=Math.floor(U/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{let w=Math.max(0,x.start),S=Math.min(a.count,x.start+x.count);for(let b=w,y=S;b<y;b+=3){let V=a.getX(b),L=a.getX(b+1),U=a.getX(b+2);r=F0(this,s,e,i,f,p,h,V,L,U),r&&(r.faceIndex=Math.floor(b/3),t.push(r))}}else if(u!==void 0)if(Array.isArray(s))for(let w=0,S=v.length;w<S;w++){let b=v[w],y=s[b.materialIndex],V=Math.max(b.start,x.start),L=Math.min(u.count,Math.min(b.start+b.count,x.start+x.count));for(let U=V,B=L;U<B;U+=3){let z=U,H=U+1,Q=U+2;r=F0(this,y,e,i,f,p,h,z,H,Q),r&&(r.faceIndex=Math.floor(U/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{let w=Math.max(0,x.start),S=Math.min(u.count,x.start+x.count);for(let b=w,y=S;b<y;b+=3){let V=b,L=b+1,U=b+2;r=F0(this,s,e,i,f,p,h,V,L,U),r&&(r.faceIndex=Math.floor(b/3),t.push(r))}}}};function w7(n,e,t,i,r,o,s,a){let u;if(e.side===Pi?u=i.intersectTriangle(s,o,r,!0,a):u=i.intersectTriangle(r,o,s,e.side===ss,a),u===null)return null;N0.copy(a),N0.applyMatrix4(n.matrixWorld);let f=t.ray.origin.distanceTo(N0);return f<t.near||f>t.far?null:{distance:f,point:N0.clone(),object:n}}function F0(n,e,t,i,r,o,s,a,u,f){n.getVertexPosition(a,I0),n.getVertexPosition(u,O0),n.getVertexPosition(f,R0);let p=w7(n,e,t,i,I0,O0,R0,PE);if(p){let h=new Z;Bs.getBarycoord(PE,I0,O0,R0,h),r&&(p.uv=Bs.getInterpolatedAttribute(r,a,u,f,h,new dt)),o&&(p.uv1=Bs.getInterpolatedAttribute(o,a,u,f,h,new dt)),s&&(p.normal=Bs.getInterpolatedAttribute(s,a,u,f,h,new Z),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));let v={a,b:u,c:f,normal:new Z,materialIndex:0};Bs.getNormal(I0,O0,R0,v.normal),p.face=v,p.barycoord=h}return p}var Fn=class n extends Wi{constructor(e=1,t=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let u=[],f=[],p=[],h=[],v=0,x=0;w("z","y","x",-1,-1,i,t,e,s,o,0),w("z","y","x",1,-1,i,t,-e,s,o,1),w("x","z","y",1,1,e,i,t,r,s,2),w("x","z","y",1,-1,e,i,-t,r,s,3),w("x","y","z",1,-1,e,t,i,r,o,4),w("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(u),this.setAttribute("position",new Nn(f,3)),this.setAttribute("normal",new Nn(p,3)),this.setAttribute("uv",new Nn(h,2));function w(S,b,y,V,L,U,B,z,H,Q,A){let N=U/H,G=B/Q,q=U/2,ne=B/2,ue=z/2,ce=H+1,ae=Q+1,oe=0,_e=0,Fe=new Z;for(let Te=0;Te<ae;Te++){let Le=Te*G-ne;for(let ut=0;ut<ce;ut++){let xt=ut*N-q;Fe[S]=xt*V,Fe[b]=Le*L,Fe[y]=ue,f.push(Fe.x,Fe.y,Fe.z),Fe[S]=0,Fe[b]=0,Fe[y]=z>0?1:-1,p.push(Fe.x,Fe.y,Fe.z),h.push(ut/H),h.push(1-Te/Q),oe+=1}}for(let Te=0;Te<Q;Te++)for(let Le=0;Le<H;Le++){let ut=v+Le+ce*Te,xt=v+Le+ce*(Te+1),Kt=v+(Le+1)+ce*(Te+1),qt=v+(Le+1)+ce*Te;u.push(ut,xt,qt),u.push(xt,Kt,qt),_e+=6}a.addGroup(x,_e,A),x+=_e,v+=oe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function nl(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(ot("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function wi(n){let e={};for(let t=0;t<n.length;t++){let i=nl(n[t]);for(let r in i)e[r]=i[r]}return e}function M7(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function jb(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:jt.workingColorSpace}var y4={clone:nl,merge:wi},S7=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,E7=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,lr=class extends as{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=S7,this.fragmentShader=E7,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=nl(e.uniforms),this.uniformsGroups=M7(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},zd=class extends Kr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Dn,this.projectionMatrix=new Dn,this.projectionMatrixInverse=new Dn,this.coordinateSystem=Zr,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Us=new Z,IE=new dt,OE=new dt,Ci=class extends zd{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Vc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Od*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Vc*2*Math.atan(Math.tan(Od*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Us.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Us.x,Us.y).multiplyScalar(-e/Us.z),Us.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Us.x,Us.y).multiplyScalar(-e/Us.z)}getViewSize(e,t){return this.getViewBounds(e,IE,OE),t.subVectors(OE,IE)}setViewOffset(e,t,i,r,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Od*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let u=s.fullWidth,f=s.fullHeight;o+=s.offsetX*r/u,t-=s.offsetY*i/f,r*=s.width/u,i*=s.height/f}let a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Pc=-90,Ic=1,Z0=class extends Kr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Ci(Pc,Ic,e,t);r.layers=this.layers,this.add(r);let o=new Ci(Pc,Ic,e,t);o.layers=this.layers,this.add(o);let s=new Ci(Pc,Ic,e,t);s.layers=this.layers,this.add(s);let a=new Ci(Pc,Ic,e,t);a.layers=this.layers,this.add(a);let u=new Ci(Pc,Ic,e,t);u.layers=this.layers,this.add(u);let f=new Ci(Pc,Ic,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,r,o,s,a,u]=t;for(let f of t)this.remove(f);if(e===Zr)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===Fd)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,u,f,p]=this.children,h=e.getRenderTarget(),v=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),w=e.xr.enabled;e.xr.enabled=!1;let S=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,o),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,u),e.setRenderTarget(i,4,r),e.render(t,f),i.texture.generateMipmaps=S,e.setRenderTarget(i,5,r),e.render(t,p),e.setRenderTarget(h,v,x),e.xr.enabled=w,i.texture.needsPMREMUpdate=!0}},Hd=class extends to{constructor(e=[],t=Zs,i,r,o,s,a,u,f,p){super(e,t,i,r,o,s,a,u,f,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},jd=class extends ar{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Hd(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Fn(5,5,5),o=new lr({name:"CubemapFromEquirect",uniforms:nl(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Pi,blending:To});o.uniforms.tEquirect.value=t;let s=new Vt(r,o),a=t.minFilter;return t.minFilter===Ks&&(t.minFilter=ui),new Z0(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){let o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(o)}},Sr=class extends Kr{constructor(){super(),this.isGroup=!0,this.type="Group"}},A7={type:"move"},Bc=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Sr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Sr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Sr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,o=null,s=null,a=this._targetRay,u=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){s=!0;for(let S of e.hand.values()){let b=t.getJointPose(S,i),y=this._getHandJoint(f,S);b!==null&&(y.matrix.fromArray(b.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=b.radius),y.visible=b!==null}let p=f.joints["index-finger-tip"],h=f.joints["thumb-tip"],v=p.position.distanceTo(h.position),x=.02,w=.005;f.inputState.pinching&&v>x+w?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&v<=x-w&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(u.matrix.fromArray(o.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,o.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(o.linearVelocity)):u.hasLinearVelocity=!1,o.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(o.angularVelocity)):u.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(A7)))}return a!==null&&(a.visible=r!==null),u!==null&&(u.visible=o!==null),f!==null&&(f.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new Sr;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}};var Gd=class extends Kr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new js,this.environmentIntensity=1,this.environmentRotation=new js,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};var K0=class extends to{constructor(e=null,t=1,i=1,r,o,s,a,u,f=li,p=li,h,v){super(null,s,a,u,f,p,r,o,h,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var ab=new Z,T7=new Z,D7=new vt,Mr=class{constructor(e=new Z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=ab.subVectors(i,t).cross(T7.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(ab),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||D7.getNormalMatrix(e),r=this.coplanarPoint(ab).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Wa=new Ka,P7=new dt(.5,.5),L0=new Z,zc=class{constructor(e=new Mr,t=new Mr,i=new Mr,r=new Mr,o=new Mr,s=new Mr){this.planes=[e,t,i,r,o,s]}set(e,t,i,r,o,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Zr,i=!1){let r=this.planes,o=e.elements,s=o[0],a=o[1],u=o[2],f=o[3],p=o[4],h=o[5],v=o[6],x=o[7],w=o[8],S=o[9],b=o[10],y=o[11],V=o[12],L=o[13],U=o[14],B=o[15];if(r[0].setComponents(f-s,x-p,y-w,B-V).normalize(),r[1].setComponents(f+s,x+p,y+w,B+V).normalize(),r[2].setComponents(f+a,x+h,y+S,B+L).normalize(),r[3].setComponents(f-a,x-h,y-S,B-L).normalize(),i)r[4].setComponents(u,v,b,U).normalize(),r[5].setComponents(f-u,x-v,y-b,B-U).normalize();else if(r[4].setComponents(f-u,x-v,y-b,B-U).normalize(),t===Zr)r[5].setComponents(f+u,x+v,y+b,B+U).normalize();else if(t===Fd)r[5].setComponents(u,v,b,U).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Wa.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Wa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Wa)}intersectsSprite(e){Wa.center.set(0,0,0);let t=P7.distanceTo(e.center);return Wa.radius=.7071067811865476+t,Wa.applyMatrix4(e.matrixWorld),this.intersectsSphere(Wa)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(L0.x=r.normal.x>0?e.max.x:e.min.x,L0.y=r.normal.y>0?e.max.y:e.min.y,L0.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(L0)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var Wd=class extends as{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Et(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},J0=new Z,Q0=new Z,RE=new Dn,Id=new Ja,V0=new Ka,lb=new Z,kE=new Z,em=class extends Kr{constructor(e=new Wi,t=new Wd){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,o=t.count;r<o;r++)J0.fromBufferAttribute(t,r-1),Q0.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=J0.distanceTo(Q0);e.setAttribute("lineDistance",new Nn(i,1))}else ot("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),V0.copy(i.boundingSphere),V0.applyMatrix4(r),V0.radius+=o,e.ray.intersectsSphere(V0)===!1)return;RE.copy(r).invert(),Id.copy(e.ray).applyMatrix4(RE);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a,f=this.isLineSegments?2:1,p=i.index,v=i.attributes.position;if(p!==null){let x=Math.max(0,s.start),w=Math.min(p.count,s.start+s.count);for(let S=x,b=w-1;S<b;S+=f){let y=p.getX(S),V=p.getX(S+1),L=U0(this,e,Id,u,y,V,S);L&&t.push(L)}if(this.isLineLoop){let S=p.getX(w-1),b=p.getX(x),y=U0(this,e,Id,u,S,b,w-1);y&&t.push(y)}}else{let x=Math.max(0,s.start),w=Math.min(v.count,s.start+s.count);for(let S=x,b=w-1;S<b;S+=f){let y=U0(this,e,Id,u,S,S+1,S);y&&t.push(y)}if(this.isLineLoop){let S=U0(this,e,Id,u,w-1,x,w-1);S&&t.push(S)}}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function U0(n,e,t,i,r,o,s){let a=n.geometry.attributes.position;if(J0.fromBufferAttribute(a,r),Q0.fromBufferAttribute(a,o),t.distanceSqToSegment(J0,Q0,lb,kE)>i)return;lb.applyMatrix4(n.matrixWorld);let f=e.ray.origin.distanceTo(lb);if(!(f<e.near||f>e.far))return{distance:f,point:kE.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}var NE=new Z,FE=new Z,tm=class extends em{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,o=t.count;r<o;r+=2)NE.fromBufferAttribute(t,r),FE.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+NE.distanceTo(FE);e.setAttribute("lineDistance",new Nn(i,1))}else ot("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}};var Hc=class extends to{constructor(e,t,i,r,o,s,a,u,f){super(e,t,i,r,o,s,a,u,f),this.isCanvasTexture=!0,this.needsUpdate=!0}},Ws=class extends to{constructor(e,t,i=Qr,r,o,s,a=li,u=li,f,p=So,h=1){if(p!==So&&p!==Js)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");let v={width:e,height:t,depth:h};super(v,r,o,s,a,u,p,i,f),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Uc(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}},nm=class extends Ws{constructor(e,t=Qr,i=Zs,r,o,s=li,a=li,u,f=So){let p={width:e,height:e,depth:1},h=[p,p,p,p,p,p];super(e,e,t,i,r,o,s,a,u,f),this.image=h,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}},$d=class extends to{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}};var jc=class n extends Wi{constructor(e=1,t=1,i=1,r=32,o=1,s=!1,a=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:u};let f=this;r=Math.floor(r),o=Math.floor(o);let p=[],h=[],v=[],x=[],w=0,S=[],b=i/2,y=0;V(),s===!1&&(e>0&&L(!0),t>0&&L(!1)),this.setIndex(p),this.setAttribute("position",new Nn(h,3)),this.setAttribute("normal",new Nn(v,3)),this.setAttribute("uv",new Nn(x,2));function V(){let U=new Z,B=new Z,z=0,H=(t-e)/i;for(let Q=0;Q<=o;Q++){let A=[],N=Q/o,G=N*(t-e)+e;for(let q=0;q<=r;q++){let ne=q/r,ue=ne*u+a,ce=Math.sin(ue),ae=Math.cos(ue);B.x=G*ce,B.y=-N*i+b,B.z=G*ae,h.push(B.x,B.y,B.z),U.set(ce,H,ae).normalize(),v.push(U.x,U.y,U.z),x.push(ne,1-N),A.push(w++)}S.push(A)}for(let Q=0;Q<r;Q++)for(let A=0;A<o;A++){let N=S[A][Q],G=S[A+1][Q],q=S[A+1][Q+1],ne=S[A][Q+1];(e>0||A!==0)&&(p.push(N,G,ne),z+=3),(t>0||A!==o-1)&&(p.push(G,q,ne),z+=3)}f.addGroup(y,z,0),y+=z}function L(U){let B=w,z=new dt,H=new Z,Q=0,A=U===!0?e:t,N=U===!0?1:-1;for(let q=1;q<=r;q++)h.push(0,b*N,0),v.push(0,N,0),x.push(.5,.5),w++;let G=w;for(let q=0;q<=r;q++){let ue=q/r*u+a,ce=Math.cos(ue),ae=Math.sin(ue);H.x=A*ae,H.y=b*N,H.z=A*ce,h.push(H.x,H.y,H.z),v.push(0,N,0),z.x=ce*.5+.5,z.y=ae*.5*N+.5,x.push(z.x,z.y),w++}for(let q=0;q<r;q++){let ne=B+q,ue=G+q;U===!0?p.push(ue,ue+1,ne):p.push(ue+1,ue,ne),Q+=3}f.addGroup(y,Q,U===!0?1:2),y+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}};var Ao=class n extends Wi{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let o=e/2,s=t/2,a=Math.floor(i),u=Math.floor(r),f=a+1,p=u+1,h=e/a,v=t/u,x=[],w=[],S=[],b=[];for(let y=0;y<p;y++){let V=y*v-s;for(let L=0;L<f;L++){let U=L*h-o;w.push(U,-V,0),S.push(0,0,1),b.push(L/a),b.push(1-y/u)}}for(let y=0;y<u;y++)for(let V=0;V<a;V++){let L=V+f*y,U=V+f*(y+1),B=V+1+f*(y+1),z=V+1+f*y;x.push(L,U,z),x.push(U,B,z)}this.setIndex(x),this.setAttribute("position",new Nn(w,3)),this.setAttribute("normal",new Nn(S,3)),this.setAttribute("uv",new Nn(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}};var qd=class n extends Wi{constructor(e=1,t=32,i=16,r=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));let u=Math.min(s+a,Math.PI),f=0,p=[],h=new Z,v=new Z,x=[],w=[],S=[],b=[];for(let y=0;y<=i;y++){let V=[],L=y/i,U=0;y===0&&s===0?U=.5/t:y===i&&u===Math.PI&&(U=-.5/t);for(let B=0;B<=t;B++){let z=B/t;h.x=-e*Math.cos(r+z*o)*Math.sin(s+L*a),h.y=e*Math.cos(s+L*a),h.z=e*Math.sin(r+z*o)*Math.sin(s+L*a),w.push(h.x,h.y,h.z),v.copy(h).normalize(),S.push(v.x,v.y,v.z),b.push(z+U,1-L),V.push(f++)}p.push(V)}for(let y=0;y<i;y++)for(let V=0;V<t;V++){let L=p[y][V+1],U=p[y][V],B=p[y+1][V],z=p[y+1][V+1];(y!==0||s>0)&&x.push(L,U,z),(y!==i-1||u<Math.PI)&&x.push(U,B,z)}this.setIndex(x),this.setAttribute("position",new Nn(w,3)),this.setAttribute("normal",new Nn(S,3)),this.setAttribute("uv",new Nn(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}};var im=class extends lr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}};var Cn=class extends as{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Et(16777215),this.specular=new Et(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lb,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new js,this.combine=Mm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};var rm=class extends as{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=c4,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},om=class extends as{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function B0(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}var Qa=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],o=t[i-1];n:{e:{let s;t:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<o)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=t[++i],e<r)break e}s=t.length;break t}if(!(e>=o)){let a=t[1];e<a&&(i=2,o=a);for(let u=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=o,o=t[--i-1],e>=o)break e}s=i,i=0;break t}break n}for(;i<s;){let a=i+s>>>1;e<t[a]?s=a:i=a+1}if(r=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=i[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},sm=class extends Qa{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:db,endingEnd:db}}intervalChanged_(e,t,i){let r=this.parameterPositions,o=e-2,s=e+1,a=r[o],u=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case fb:o=e,a=2*t-i;break;case hb:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=i}if(u===void 0)switch(this.getSettings_().endingEnd){case fb:s=e,u=2*i-t;break;case hb:s=1,u=i+r[1]-r[0];break;default:s=e-1,u=t}let f=(i-t)*.5,p=this.valueSize;this._weightPrev=f/(t-a),this._weightNext=f/(u-i),this._offsetPrev=o*p,this._offsetNext=s*p}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=e*a,f=u-a,p=this._offsetPrev,h=this._offsetNext,v=this._weightPrev,x=this._weightNext,w=(i-t)/(r-t),S=w*w,b=S*w,y=-v*b+2*v*S-v*w,V=(1+v)*b+(-1.5-2*v)*S+(-.5+v)*w+1,L=(-1-x)*b+(1.5+x)*S+.5*w,U=x*b-x*S;for(let B=0;B!==a;++B)o[B]=y*s[p+B]+V*s[f+B]+L*s[u+B]+U*s[h+B];return o}},am=class extends Qa{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=e*a,f=u-a,p=(i-t)/(r-t),h=1-p;for(let v=0;v!==a;++v)o[v]=s[f+v]*h+s[u+v]*p;return o}},lm=class extends Qa{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},cr=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=B0(t,this.TimeBufferType),this.values=B0(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:B0(e.times,Array),values:B0(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new lm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new am(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new sm(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case kd:t=this.InterpolantFactoryMethodDiscrete;break;case $0:t=this.InterpolantFactoryMethodLinear;break;case z0:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return ot("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return kd;case this.InterpolantFactoryMethodLinear:return $0;case this.InterpolantFactoryMethodSmooth:return z0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;s!==-1&&i[s]>t;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(ct("KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,o=i.length;o===0&&(ct("KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){let u=i[a];if(typeof u=="number"&&isNaN(u)){ct("KeyframeTrack: Time is not a valid number.",this,a,u),e=!1;break}if(s!==null&&s>u){ct("KeyframeTrack: Out of order keys.",this,a,u,s),e=!1;break}s=u}if(r!==void 0&&q5(r))for(let a=0,u=r.length;a!==u;++a){let f=r[a];if(isNaN(f)){ct("KeyframeTrack: Value is not a valid number.",this,a,f),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===z0,o=e.length-1,s=1;for(let a=1;a<o;++a){let u=!1,f=e[a],p=e[a+1];if(f!==p&&(a!==1||f!==e[0]))if(r)u=!0;else{let h=a*i,v=h-i,x=h+i;for(let w=0;w!==i;++w){let S=t[h+w];if(S!==t[v+w]||S!==t[x+w]){u=!0;break}}}if(u){if(a!==s){e[s]=e[a];let h=a*i,v=s*i;for(let x=0;x!==i;++x)t[v+x]=t[h+x]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,u=s*i,f=0;f!==i;++f)t[u+f]=t[a+f];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};cr.prototype.ValueTypeName="";cr.prototype.TimeBufferType=Float32Array;cr.prototype.ValueBufferType=Float32Array;cr.prototype.DefaultInterpolation=$0;var $s=class extends cr{constructor(e,t,i){super(e,t,i)}};$s.prototype.ValueTypeName="bool";$s.prototype.ValueBufferType=Array;$s.prototype.DefaultInterpolation=kd;$s.prototype.InterpolantFactoryMethodLinear=void 0;$s.prototype.InterpolantFactoryMethodSmooth=void 0;var cm=class extends cr{constructor(e,t,i,r){super(e,t,i,r)}};cm.prototype.ValueTypeName="color";var um=class extends cr{constructor(e,t,i,r){super(e,t,i,r)}};um.prototype.ValueTypeName="number";var dm=class extends Qa{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=(i-t)/(r-t),f=e*a;for(let p=f+a;f!==p;f+=4)Er.slerpFlat(o,0,s,f-a,s,f,u);return o}},Yd=class extends cr{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new dm(this.times,this.values,this.getValueSize(),e)}};Yd.prototype.ValueTypeName="quaternion";Yd.prototype.InterpolantFactoryMethodSmooth=void 0;var qs=class extends cr{constructor(e,t,i){super(e,t,i)}};qs.prototype.ValueTypeName="string";qs.prototype.ValueBufferType=Array;qs.prototype.DefaultInterpolation=kd;qs.prototype.InterpolantFactoryMethodLinear=void 0;qs.prototype.InterpolantFactoryMethodSmooth=void 0;var fm=class extends cr{constructor(e,t,i,r){super(e,t,i,r)}};fm.prototype.ValueTypeName="vector";var H0={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},hm=class{constructor(e,t,i){let r=this,o=!1,s=0,a=0,u,f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this._abortController=null,this.itemStart=function(p){a++,o===!1&&r.onStart!==void 0&&r.onStart(p,s,a),o=!0},this.itemEnd=function(p){s++,r.onProgress!==void 0&&r.onProgress(p,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return u?u(p):p},this.setURLModifier=function(p){return u=p,this},this.addHandler=function(p,h){return f.push(p,h),this},this.removeHandler=function(p){let h=f.indexOf(p);return h!==-1&&f.splice(h,2),this},this.getHandler=function(p){for(let h=0,v=f.length;h<v;h+=2){let x=f[h],w=f[h+1];if(x.global&&(x.lastIndex=0),x.test(p))return w}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}},b4=new hm,Gb=(()=>{class n{constructor(t){this.manager=t!==void 0?t:b4,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){let r=this;return new Promise(function(o,s){r.load(t,o,i,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}abort(){return this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})();var Oc=new WeakMap,pm=class extends Gb{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=H0.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0);else{let h=Oc.get(s);h===void 0&&(h=[],Oc.set(s,h)),h.push({onLoad:t,onError:r})}return s}let a=Nc("img");function u(){p(),t&&t(this);let h=Oc.get(this)||[];for(let v=0;v<h.length;v++){let x=h[v];x.onLoad&&x.onLoad(this)}Oc.delete(this),o.manager.itemEnd(e)}function f(h){p(),r&&r(h),H0.remove(`image:${e}`);let v=Oc.get(this)||[];for(let x=0;x<v.length;x++){let w=v[x];w.onError&&w.onError(h)}Oc.delete(this),o.manager.itemError(e),o.manager.itemEnd(e)}function p(){a.removeEventListener("load",u,!1),a.removeEventListener("error",f,!1)}return a.addEventListener("load",u,!1),a.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),H0.add(`image:${e}`,a),o.manager.itemStart(e),a.src=e,a}};var Xd=class extends Gb{constructor(e){super(e)}load(e,t,i,r){let o=new to,s=new pm(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,t!==void 0&&t(o)},i,r),o}},Zd=class extends Kr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Et(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}};var cb=new Dn,LE=new Z,VE=new Z,gb=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new dt(512,512),this.mapType=$i,this.map=null,this.mapPass=null,this.matrix=new Dn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new zc,this._frameExtents=new dt(1,1),this._viewportCount=1,this._viewports=[new Pn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;LE.setFromMatrixPosition(e.matrixWorld),t.position.copy(LE),VE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(VE),t.updateMatrixWorld(),cb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cb,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(cb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}};var Gc=class extends zd{constructor(e=-1,t=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-e,s=i+e,a=r+t,u=r-t;if(this.view!==null&&this.view.enabled){let f=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=f*this.view.offsetX,s=o+f*this.view.width,a-=p*this.view.offsetY,u=a-p*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,u,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},_b=class extends gb{constructor(){super(new Gc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Kd=class extends Zd{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Kr.DEFAULT_UP),this.updateMatrix(),this.target=new Kr,this.shadow=new _b}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){let t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}},Jd=class extends Zd{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var mm=class extends Ci{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}};var Wb="\\[\\]\\.:\\/",I7=new RegExp("["+Wb+"]","g"),$b="[^"+Wb+"]",O7="[^"+Wb.replace("\\.","")+"]",R7=/((?:WC+[\/:])*)/.source.replace("WC",$b),k7=/(WCOD+)?/.source.replace("WCOD",O7),N7=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",$b),F7=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",$b),L7=new RegExp("^"+R7+k7+N7+F7+"$"),V7=["material","materials","bones","map"],vb=class{constructor(e,t,i){let r=i||kn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},kn=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(I7,"")}static parseTrackName(t){let i=L7.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);V7.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(s){for(let a=0;a<s.length;a++){let u=s[a];if(u.name===i||u.uuid===i)return u;let f=r(u.children);if(f)return f}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)t[i++]=r[o]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){ot("PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let p=i.objectIndex;switch(r){case"materials":if(!t.material){ct("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){ct("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){ct("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===p){p=h;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){ct("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){ct("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){ct("PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(p!==void 0){if(t[p]===void 0){ct("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[p]}}let a=t[o];if(a===void 0){let p=i.nodeName;ct("PropertyBinding: Trying to update property for track: "+p+"."+o+" but it wasn't found.",t);return}let u=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?u=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!t.geometry){ct("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){ct("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}f=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(f=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=vb,n})();kn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};kn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};kn.prototype.GetterByBindingType=[kn.prototype._getValue_direct,kn.prototype._getValue_array,kn.prototype._getValue_arrayElement,kn.prototype._getValue_toArray];kn.prototype.SetterByBindingTypeAndVersioning=[[kn.prototype._setValue_direct,kn.prototype._setValue_direct_setNeedsUpdate,kn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[kn.prototype._setValue_array,kn.prototype._setValue_array_setNeedsUpdate,kn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[kn.prototype._setValue_arrayElement,kn.prototype._setValue_arrayElement_setNeedsUpdate,kn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[kn.prototype._setValue_fromArray,kn.prototype._setValue_fromArray_setNeedsUpdate,kn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Cee=new Float32Array(1);var Wc=class{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Pt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Pt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};var Qd=class extends tm{constructor(e=10,t=10,i=4473924,r=8947848){i=new Et(i),r=new Et(r);let o=t/2,s=e/t,a=e/2,u=[],f=[];for(let v=0,x=0,w=-a;v<=t;v++,w+=s){u.push(-a,0,w,a,0,w),u.push(w,0,-a,w,0,a);let S=v===o?i:r;S.toArray(f,x),x+=3,S.toArray(f,x),x+=3,S.toArray(f,x),x+=3,S.toArray(f,x),x+=3}let p=new Wi;p.setAttribute("position",new Nn(u,3)),p.setAttribute("color",new Nn(f,3));let h=new Wd({vertexColors:!0,toneMapped:!1});super(p,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}};var ef=class extends Eo{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){ot("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}};function qb(n,e,t,i){let r=U7(i);switch(t){case kb:return n*e;case Fb:return n*e/r.components*r.byteLength;case Im:return n*e/r.components*r.byteLength;case tl:return n*e*2/r.components*r.byteLength;case Om:return n*e*2/r.components*r.byteLength;case Nb:return n*e*3/r.components*r.byteLength;case Ar:return n*e*4/r.components*r.byteLength;case Rm:return n*e*4/r.components*r.byteLength;case of:case sf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case af:case lf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Nm:case Lm:return Math.max(n,16)*Math.max(e,8)/4;case km:case Fm:return Math.max(n,8)*Math.max(e,8)/2;case Vm:case Um:case zm:case Hm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Bm:case jm:case Gm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Wm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case $m:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case qm:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Ym:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Xm:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Zm:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Km:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Jm:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Qm:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case eg:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case tg:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case ng:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case ig:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case rg:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case og:case sg:case ag:return Math.ceil(n/4)*Math.ceil(e/4)*16;case lg:case cg:return Math.ceil(n/4)*Math.ceil(e/4)*8;case ug:case dg:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function U7(n){switch(n){case $i:case Pb:return{byteLength:1,components:1};case qc:case Ib:case Do:return{byteLength:2,components:1};case Dm:case Pm:return{byteLength:2,components:4};case Qr:case Tm:case eo:return{byteLength:4,components:1};case Ob:case Rb:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:gm}}));typeof window<"u"&&(window.__THREE__?ot("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=gm);function G4(){let n=null,e=!1,t=null,i=null;function r(o,s){t(o,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function B7(n){let e=new WeakMap;function t(a,u){let f=a.array,p=a.usage,h=f.byteLength,v=n.createBuffer();n.bindBuffer(u,v),n.bufferData(u,f,p),a.onUploadCallback();let x;if(f instanceof Float32Array)x=n.FLOAT;else if(typeof Float16Array<"u"&&f instanceof Float16Array)x=n.HALF_FLOAT;else if(f instanceof Uint16Array)a.isFloat16BufferAttribute?x=n.HALF_FLOAT:x=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)x=n.SHORT;else if(f instanceof Uint32Array)x=n.UNSIGNED_INT;else if(f instanceof Int32Array)x=n.INT;else if(f instanceof Int8Array)x=n.BYTE;else if(f instanceof Uint8Array)x=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)x=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:x,bytesPerElement:f.BYTES_PER_ELEMENT,version:a.version,size:h}}function i(a,u,f){let p=u.array,h=u.updateRanges;if(n.bindBuffer(f,a),h.length===0)n.bufferSubData(f,0,p);else{h.sort((x,w)=>x.start-w.start);let v=0;for(let x=1;x<h.length;x++){let w=h[v],S=h[x];S.start<=w.start+w.count+1?w.count=Math.max(w.count,S.start+S.count-w.start):(++v,h[v]=S)}h.length=v+1;for(let x=0,w=h.length;x<w;x++){let S=h[x];n.bufferSubData(f,S.start*p.BYTES_PER_ELEMENT,p,S.start,S.count)}u.clearUpdateRanges()}u.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let u=e.get(a);u&&(n.deleteBuffer(u.buffer),e.delete(a))}function s(a,u){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let p=e.get(a);(!p||p.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let f=e.get(a);if(f===void 0)e.set(a,t(a,u));else if(f.version<a.version){if(f.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(f.buffer,a,u),f.version=a.version}}return{get:r,remove:o,update:s}}var z7=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,H7=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,j7=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,G7=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,W7=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,$7=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,q7=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Y7=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,X7=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Z7=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,K7=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,J7=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Q7=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,eV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,tV=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,nV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,iV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,rV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,oV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,sV=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,aV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,lV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,cV=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,uV=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,dV=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,fV=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,hV=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,pV=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,mV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,gV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,_V="gl_FragColor = linearToOutputTexel( gl_FragColor );",vV=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,xV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,yV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,bV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,CV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,wV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,MV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,SV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,EV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,AV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,TV=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,DV=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,PV=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,IV=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,OV=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,RV=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,kV=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,NV=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,FV=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,LV=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,VV=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,UV=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,BV=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,zV=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,HV=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,jV=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,GV=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,WV=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,$V=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,qV=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,YV=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,XV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,ZV=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,KV=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,JV=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,QV=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,e8=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,t8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,n8=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,i8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,r8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,o8=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,s8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,a8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,l8=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,c8=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,u8=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,d8=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,f8=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,h8=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,p8=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,m8=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,g8=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,_8=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,v8=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,x8=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,y8=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,b8=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,C8=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,w8=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,M8=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,S8=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,E8=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,A8=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,T8=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,D8=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,P8=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,I8=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,O8=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,R8=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,k8=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,N8=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,F8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,L8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,V8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,U8=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,B8=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,z8=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,H8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,j8=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,G8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,W8=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$8=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,q8=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Y8=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,X8=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,Z8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,K8=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,J8=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Q8=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,eU=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,tU=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nU=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iU=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rU=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,oU=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sU=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,aU=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,lU=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cU=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uU=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,dU=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fU=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hU=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pU=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,mU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,gU=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_U=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vU=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,At={alphahash_fragment:z7,alphahash_pars_fragment:H7,alphamap_fragment:j7,alphamap_pars_fragment:G7,alphatest_fragment:W7,alphatest_pars_fragment:$7,aomap_fragment:q7,aomap_pars_fragment:Y7,batching_pars_vertex:X7,batching_vertex:Z7,begin_vertex:K7,beginnormal_vertex:J7,bsdfs:Q7,iridescence_fragment:eV,bumpmap_pars_fragment:tV,clipping_planes_fragment:nV,clipping_planes_pars_fragment:iV,clipping_planes_pars_vertex:rV,clipping_planes_vertex:oV,color_fragment:sV,color_pars_fragment:aV,color_pars_vertex:lV,color_vertex:cV,common:uV,cube_uv_reflection_fragment:dV,defaultnormal_vertex:fV,displacementmap_pars_vertex:hV,displacementmap_vertex:pV,emissivemap_fragment:mV,emissivemap_pars_fragment:gV,colorspace_fragment:_V,colorspace_pars_fragment:vV,envmap_fragment:xV,envmap_common_pars_fragment:yV,envmap_pars_fragment:bV,envmap_pars_vertex:CV,envmap_physical_pars_fragment:RV,envmap_vertex:wV,fog_vertex:MV,fog_pars_vertex:SV,fog_fragment:EV,fog_pars_fragment:AV,gradientmap_pars_fragment:TV,lightmap_pars_fragment:DV,lights_lambert_fragment:PV,lights_lambert_pars_fragment:IV,lights_pars_begin:OV,lights_toon_fragment:kV,lights_toon_pars_fragment:NV,lights_phong_fragment:FV,lights_phong_pars_fragment:LV,lights_physical_fragment:VV,lights_physical_pars_fragment:UV,lights_fragment_begin:BV,lights_fragment_maps:zV,lights_fragment_end:HV,logdepthbuf_fragment:jV,logdepthbuf_pars_fragment:GV,logdepthbuf_pars_vertex:WV,logdepthbuf_vertex:$V,map_fragment:qV,map_pars_fragment:YV,map_particle_fragment:XV,map_particle_pars_fragment:ZV,metalnessmap_fragment:KV,metalnessmap_pars_fragment:JV,morphinstance_vertex:QV,morphcolor_vertex:e8,morphnormal_vertex:t8,morphtarget_pars_vertex:n8,morphtarget_vertex:i8,normal_fragment_begin:r8,normal_fragment_maps:o8,normal_pars_fragment:s8,normal_pars_vertex:a8,normal_vertex:l8,normalmap_pars_fragment:c8,clearcoat_normal_fragment_begin:u8,clearcoat_normal_fragment_maps:d8,clearcoat_pars_fragment:f8,iridescence_pars_fragment:h8,opaque_fragment:p8,packing:m8,premultiplied_alpha_fragment:g8,project_vertex:_8,dithering_fragment:v8,dithering_pars_fragment:x8,roughnessmap_fragment:y8,roughnessmap_pars_fragment:b8,shadowmap_pars_fragment:C8,shadowmap_pars_vertex:w8,shadowmap_vertex:M8,shadowmask_pars_fragment:S8,skinbase_vertex:E8,skinning_pars_vertex:A8,skinning_vertex:T8,skinnormal_vertex:D8,specularmap_fragment:P8,specularmap_pars_fragment:I8,tonemapping_fragment:O8,tonemapping_pars_fragment:R8,transmission_fragment:k8,transmission_pars_fragment:N8,uv_pars_fragment:F8,uv_pars_vertex:L8,uv_vertex:V8,worldpos_vertex:U8,background_vert:B8,background_frag:z8,backgroundCube_vert:H8,backgroundCube_frag:j8,cube_vert:G8,cube_frag:W8,depth_vert:$8,depth_frag:q8,distance_vert:Y8,distance_frag:X8,equirect_vert:Z8,equirect_frag:K8,linedashed_vert:J8,linedashed_frag:Q8,meshbasic_vert:eU,meshbasic_frag:tU,meshlambert_vert:nU,meshlambert_frag:iU,meshmatcap_vert:rU,meshmatcap_frag:oU,meshnormal_vert:sU,meshnormal_frag:aU,meshphong_vert:lU,meshphong_frag:cU,meshphysical_vert:uU,meshphysical_frag:dU,meshtoon_vert:fU,meshtoon_frag:hU,points_vert:pU,points_frag:mU,shadow_vert:gU,shadow_frag:_U,sprite_vert:vU,sprite_frag:xU},Be={common:{diffuse:{value:new Et(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new vt},alphaMap:{value:null},alphaMapTransform:{value:new vt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new vt}},envmap:{envMap:{value:null},envMapRotation:{value:new vt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new vt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new vt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new vt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new vt},normalScale:{value:new dt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new vt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new vt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new vt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new vt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new vt},alphaTest:{value:0},uvTransform:{value:new vt}},sprite:{diffuse:{value:new Et(16777215)},opacity:{value:1},center:{value:new dt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new vt},alphaMap:{value:null},alphaMapTransform:{value:new vt},alphaTest:{value:0}}},Io={basic:{uniforms:wi([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.fog]),vertexShader:At.meshbasic_vert,fragmentShader:At.meshbasic_frag},lambert:{uniforms:wi([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new Et(0)}}]),vertexShader:At.meshlambert_vert,fragmentShader:At.meshlambert_frag},phong:{uniforms:wi([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new Et(0)},specular:{value:new Et(1118481)},shininess:{value:30}}]),vertexShader:At.meshphong_vert,fragmentShader:At.meshphong_frag},standard:{uniforms:wi([Be.common,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.roughnessmap,Be.metalnessmap,Be.fog,Be.lights,{emissive:{value:new Et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag},toon:{uniforms:wi([Be.common,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.gradientmap,Be.fog,Be.lights,{emissive:{value:new Et(0)}}]),vertexShader:At.meshtoon_vert,fragmentShader:At.meshtoon_frag},matcap:{uniforms:wi([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,{matcap:{value:null}}]),vertexShader:At.meshmatcap_vert,fragmentShader:At.meshmatcap_frag},points:{uniforms:wi([Be.points,Be.fog]),vertexShader:At.points_vert,fragmentShader:At.points_frag},dashed:{uniforms:wi([Be.common,Be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:At.linedashed_vert,fragmentShader:At.linedashed_frag},depth:{uniforms:wi([Be.common,Be.displacementmap]),vertexShader:At.depth_vert,fragmentShader:At.depth_frag},normal:{uniforms:wi([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,{opacity:{value:1}}]),vertexShader:At.meshnormal_vert,fragmentShader:At.meshnormal_frag},sprite:{uniforms:wi([Be.sprite,Be.fog]),vertexShader:At.sprite_vert,fragmentShader:At.sprite_frag},background:{uniforms:{uvTransform:{value:new vt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:At.background_vert,fragmentShader:At.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new vt}},vertexShader:At.backgroundCube_vert,fragmentShader:At.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:At.cube_vert,fragmentShader:At.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:At.equirect_vert,fragmentShader:At.equirect_frag},distance:{uniforms:wi([Be.common,Be.displacementmap,{referencePosition:{value:new Z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:At.distance_vert,fragmentShader:At.distance_frag},shadow:{uniforms:wi([Be.lights,Be.fog,{color:{value:new Et(0)},opacity:{value:1}}]),vertexShader:At.shadow_vert,fragmentShader:At.shadow_frag}};Io.physical={uniforms:wi([Io.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new vt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new vt},clearcoatNormalScale:{value:new dt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new vt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new vt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new vt},sheen:{value:0},sheenColor:{value:new Et(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new vt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new vt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new vt},transmissionSamplerSize:{value:new dt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new vt},attenuationDistance:{value:0},attenuationColor:{value:new Et(0)},specularColor:{value:new Et(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new vt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new vt},anisotropyVector:{value:new dt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new vt}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag};var pg={r:0,b:0,g:0},il=new js,yU=new Dn;function bU(n,e,t,i,r,o,s){let a=new Et(0),u=o===!0?0:1,f,p,h=null,v=0,x=null;function w(L){let U=L.isScene===!0?L.background:null;return U&&U.isTexture&&(U=(L.backgroundBlurriness>0?t:e).get(U)),U}function S(L){let U=!1,B=w(L);B===null?y(a,u):B&&B.isColor&&(y(B,1),U=!0);let z=n.xr.getEnvironmentBlendMode();z==="additive"?i.buffers.color.setClear(0,0,0,1,s):z==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||U)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function b(L,U){let B=w(U);B&&(B.isCubeTexture||B.mapping===nf)?(p===void 0&&(p=new Vt(new Fn(1,1,1),new lr({name:"BackgroundCubeMaterial",uniforms:nl(Io.backgroundCube.uniforms),vertexShader:Io.backgroundCube.vertexShader,fragmentShader:Io.backgroundCube.fragmentShader,side:Pi,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(z,H,Q){this.matrixWorld.copyPosition(Q.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),il.copy(U.backgroundRotation),il.x*=-1,il.y*=-1,il.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(il.y*=-1,il.z*=-1),p.material.uniforms.envMap.value=B,p.material.uniforms.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=U.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(yU.makeRotationFromEuler(il)),p.material.toneMapped=jt.getTransfer(B.colorSpace)!==Qt,(h!==B||v!==B.version||x!==n.toneMapping)&&(p.material.needsUpdate=!0,h=B,v=B.version,x=n.toneMapping),p.layers.enableAll(),L.unshift(p,p.geometry,p.material,0,0,null)):B&&B.isTexture&&(f===void 0&&(f=new Vt(new Ao(2,2),new lr({name:"BackgroundMaterial",uniforms:nl(Io.background.uniforms),vertexShader:Io.background.vertexShader,fragmentShader:Io.background.fragmentShader,side:ss,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=B,f.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,f.material.toneMapped=jt.getTransfer(B.colorSpace)!==Qt,B.matrixAutoUpdate===!0&&B.updateMatrix(),f.material.uniforms.uvTransform.value.copy(B.matrix),(h!==B||v!==B.version||x!==n.toneMapping)&&(f.material.needsUpdate=!0,h=B,v=B.version,x=n.toneMapping),f.layers.enableAll(),L.unshift(f,f.geometry,f.material,0,0,null))}function y(L,U){L.getRGB(pg,jb(n)),i.buffers.color.setClear(pg.r,pg.g,pg.b,U,s)}function V(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return a},setClearColor:function(L,U=1){a.set(L),u=U,y(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(L){u=L,y(a,u)},render:S,addToRenderList:b,dispose:V}}function CU(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=v(null),o=r,s=!1;function a(N,G,q,ne,ue){let ce=!1,ae=h(ne,q,G);o!==ae&&(o=ae,f(o.object)),ce=x(N,ne,q,ue),ce&&w(N,ne,q,ue),ue!==null&&e.update(ue,n.ELEMENT_ARRAY_BUFFER),(ce||s)&&(s=!1,U(N,G,q,ne),ue!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ue).buffer))}function u(){return n.createVertexArray()}function f(N){return n.bindVertexArray(N)}function p(N){return n.deleteVertexArray(N)}function h(N,G,q){let ne=q.wireframe===!0,ue=i[N.id];ue===void 0&&(ue={},i[N.id]=ue);let ce=ue[G.id];ce===void 0&&(ce={},ue[G.id]=ce);let ae=ce[ne];return ae===void 0&&(ae=v(u()),ce[ne]=ae),ae}function v(N){let G=[],q=[],ne=[];for(let ue=0;ue<t;ue++)G[ue]=0,q[ue]=0,ne[ue]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:G,enabledAttributes:q,attributeDivisors:ne,object:N,attributes:{},index:null}}function x(N,G,q,ne){let ue=o.attributes,ce=G.attributes,ae=0,oe=q.getAttributes();for(let _e in oe)if(oe[_e].location>=0){let Te=ue[_e],Le=ce[_e];if(Le===void 0&&(_e==="instanceMatrix"&&N.instanceMatrix&&(Le=N.instanceMatrix),_e==="instanceColor"&&N.instanceColor&&(Le=N.instanceColor)),Te===void 0||Te.attribute!==Le||Le&&Te.data!==Le.data)return!0;ae++}return o.attributesNum!==ae||o.index!==ne}function w(N,G,q,ne){let ue={},ce=G.attributes,ae=0,oe=q.getAttributes();for(let _e in oe)if(oe[_e].location>=0){let Te=ce[_e];Te===void 0&&(_e==="instanceMatrix"&&N.instanceMatrix&&(Te=N.instanceMatrix),_e==="instanceColor"&&N.instanceColor&&(Te=N.instanceColor));let Le={};Le.attribute=Te,Te&&Te.data&&(Le.data=Te.data),ue[_e]=Le,ae++}o.attributes=ue,o.attributesNum=ae,o.index=ne}function S(){let N=o.newAttributes;for(let G=0,q=N.length;G<q;G++)N[G]=0}function b(N){y(N,0)}function y(N,G){let q=o.newAttributes,ne=o.enabledAttributes,ue=o.attributeDivisors;q[N]=1,ne[N]===0&&(n.enableVertexAttribArray(N),ne[N]=1),ue[N]!==G&&(n.vertexAttribDivisor(N,G),ue[N]=G)}function V(){let N=o.newAttributes,G=o.enabledAttributes;for(let q=0,ne=G.length;q<ne;q++)G[q]!==N[q]&&(n.disableVertexAttribArray(q),G[q]=0)}function L(N,G,q,ne,ue,ce,ae){ae===!0?n.vertexAttribIPointer(N,G,q,ue,ce):n.vertexAttribPointer(N,G,q,ne,ue,ce)}function U(N,G,q,ne){S();let ue=ne.attributes,ce=q.getAttributes(),ae=G.defaultAttributeValues;for(let oe in ce){let _e=ce[oe];if(_e.location>=0){let Fe=ue[oe];if(Fe===void 0&&(oe==="instanceMatrix"&&N.instanceMatrix&&(Fe=N.instanceMatrix),oe==="instanceColor"&&N.instanceColor&&(Fe=N.instanceColor)),Fe!==void 0){let Te=Fe.normalized,Le=Fe.itemSize,ut=e.get(Fe);if(ut===void 0)continue;let xt=ut.buffer,Kt=ut.type,qt=ut.bytesPerElement,pe=Kt===n.INT||Kt===n.UNSIGNED_INT||Fe.gpuType===Tm;if(Fe.isInterleavedBufferAttribute){let ve=Fe.data,We=ve.stride,ht=Fe.offset;if(ve.isInstancedInterleavedBuffer){for(let Xe=0;Xe<_e.locationSize;Xe++)y(_e.location+Xe,ve.meshPerAttribute);N.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let Xe=0;Xe<_e.locationSize;Xe++)b(_e.location+Xe);n.bindBuffer(n.ARRAY_BUFFER,xt);for(let Xe=0;Xe<_e.locationSize;Xe++)L(_e.location+Xe,Le/_e.locationSize,Kt,Te,We*qt,(ht+Le/_e.locationSize*Xe)*qt,pe)}else{if(Fe.isInstancedBufferAttribute){for(let ve=0;ve<_e.locationSize;ve++)y(_e.location+ve,Fe.meshPerAttribute);N.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=Fe.meshPerAttribute*Fe.count)}else for(let ve=0;ve<_e.locationSize;ve++)b(_e.location+ve);n.bindBuffer(n.ARRAY_BUFFER,xt);for(let ve=0;ve<_e.locationSize;ve++)L(_e.location+ve,Le/_e.locationSize,Kt,Te,Le*qt,Le/_e.locationSize*ve*qt,pe)}}else if(ae!==void 0){let Te=ae[oe];if(Te!==void 0)switch(Te.length){case 2:n.vertexAttrib2fv(_e.location,Te);break;case 3:n.vertexAttrib3fv(_e.location,Te);break;case 4:n.vertexAttrib4fv(_e.location,Te);break;default:n.vertexAttrib1fv(_e.location,Te)}}}}V()}function B(){Q();for(let N in i){let G=i[N];for(let q in G){let ne=G[q];for(let ue in ne)p(ne[ue].object),delete ne[ue];delete G[q]}delete i[N]}}function z(N){if(i[N.id]===void 0)return;let G=i[N.id];for(let q in G){let ne=G[q];for(let ue in ne)p(ne[ue].object),delete ne[ue];delete G[q]}delete i[N.id]}function H(N){for(let G in i){let q=i[G];if(q[N.id]===void 0)continue;let ne=q[N.id];for(let ue in ne)p(ne[ue].object),delete ne[ue];delete q[N.id]}}function Q(){A(),s=!0,o!==r&&(o=r,f(o.object))}function A(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:Q,resetDefaultState:A,dispose:B,releaseStatesOfGeometry:z,releaseStatesOfProgram:H,initAttributes:S,enableAttribute:b,disableUnusedAttributes:V}}function wU(n,e,t){let i;function r(f){i=f}function o(f,p){n.drawArrays(i,f,p),t.update(p,i,1)}function s(f,p,h){h!==0&&(n.drawArraysInstanced(i,f,p,h),t.update(p,i,h))}function a(f,p,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,f,0,p,0,h);let x=0;for(let w=0;w<h;w++)x+=p[w];t.update(x,i,1)}function u(f,p,h,v){if(h===0)return;let x=e.get("WEBGL_multi_draw");if(x===null)for(let w=0;w<f.length;w++)s(f[w],p[w],v[w]);else{x.multiDrawArraysInstancedWEBGL(i,f,0,p,0,v,0,h);let w=0;for(let S=0;S<h;S++)w+=p[S]*v[S];t.update(w,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=u}function MU(n,e,t,i){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let H=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(H.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(H){return!(H!==Ar&&i.convert(H)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(H){let Q=H===Do&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(H!==$i&&i.convert(H)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&H!==eo&&!Q)}function u(H){if(H==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";H="mediump"}return H==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp",p=u(f);p!==f&&(ot("WebGLRenderer:",f,"not supported, using",p,"instead."),f=p);let h=t.logarithmicDepthBuffer===!0,v=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),x=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),w=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),S=n.getParameter(n.MAX_TEXTURE_SIZE),b=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),V=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),L=n.getParameter(n.MAX_VARYING_VECTORS),U=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),B=n.getParameter(n.MAX_SAMPLES),z=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:u,textureFormatReadable:s,textureTypeReadable:a,precision:f,logarithmicDepthBuffer:h,reversedDepthBuffer:v,maxTextures:x,maxVertexTextures:w,maxTextureSize:S,maxCubemapSize:b,maxAttributes:y,maxVertexUniforms:V,maxVaryings:L,maxFragmentUniforms:U,maxSamples:B,samples:z}}function SU(n){let e=this,t=null,i=0,r=!1,o=!1,s=new Mr,a=new vt,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(h,v){let x=h.length!==0||v||i!==0||r;return r=v,i=h.length,x},this.beginShadows=function(){o=!0,p(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,v){t=p(h,v,0)},this.setState=function(h,v,x){let w=h.clippingPlanes,S=h.clipIntersection,b=h.clipShadows,y=n.get(h);if(!r||w===null||w.length===0||o&&!b)o?p(null):f();else{let V=o?0:i,L=V*4,U=y.clippingState||null;u.value=U,U=p(w,v,L,x);for(let B=0;B!==L;++B)U[B]=t[B];y.clippingState=U,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=V}};function f(){u.value!==t&&(u.value=t,u.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(h,v,x,w){let S=h!==null?h.length:0,b=null;if(S!==0){if(b=u.value,w!==!0||b===null){let y=x+S*4,V=v.matrixWorldInverse;a.getNormalMatrix(V),(b===null||b.length<y)&&(b=new Float32Array(y));for(let L=0,U=x;L!==S;++L,U+=4)s.copy(h[L]).applyMatrix4(V,a),s.normal.toArray(b,U),b[U+3]=s.constant}u.value=b,u.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,b}}function EU(n){let e=new WeakMap;function t(s,a){return a===Sm?s.mapping=Zs:a===Em&&(s.mapping=el),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===Sm||a===Em)if(e.has(s)){let u=e.get(s).texture;return t(u,s.mapping)}else{let u=s.image;if(u&&u.height>0){let f=new jd(u.height);return f.fromEquirectangularTexture(n,s),e.set(s,f),s.addEventListener("dispose",r),t(f.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let u=e.get(a);u!==void 0&&(e.delete(a),u.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}var Qs=4,C4=[.125,.215,.35,.446,.526,.582],ol=20,AU=256,cf=new Gc,w4=new Et,Yb=null,Xb=0,Zb=0,Kb=!1,TU=new Z,gg=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,r=100,o={}){let{size:s=256,position:a=TU}=o;Yb=this._renderer.getRenderTarget(),Xb=this._renderer.getActiveCubeFace(),Zb=this._renderer.getActiveMipmapLevel(),Kb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);let u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,i,r,u,a),t>0&&this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=E4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=S4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(Yb,Xb,Zb),this._renderer.xr.enabled=Kb,e.scissorTest=!1,Zc(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Zs||e.mapping===el?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Yb=this._renderer.getRenderTarget(),Xb=this._renderer.getActiveCubeFace(),Zb=this._renderer.getActiveMipmapLevel(),Kb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ui,minFilter:ui,generateMipmaps:!1,type:Do,format:Ar,colorSpace:Za,depthBuffer:!1},r=M4(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=M4(e,t,i);let{_lodMax:o}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=DU(o)),this._blurMaterial=IU(o,e,t),this._ggxMaterial=PU(o,e,t)}return r}_compileMaterial(e){let t=new Vt(new Wi,e);this._renderer.compile(t,cf)}_sceneToCubeUV(e,t,i,r,o){let u=new Ci(90,1,t,i),f=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],h=this._renderer,v=h.autoClear,x=h.toneMapping;h.getClearColor(w4),h.toneMapping=Jr,h.autoClear=!1,h.state.buffers.depth.getReversed()&&(h.setRenderTarget(r),h.clearDepth(),h.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Vt(new Fn,new Gs({name:"PMREM.Background",side:Pi,depthWrite:!1,depthTest:!1})));let S=this._backgroundBox,b=S.material,y=!1,V=e.background;V?V.isColor&&(b.color.copy(V),e.background=null,y=!0):(b.color.copy(w4),y=!0);for(let L=0;L<6;L++){let U=L%3;U===0?(u.up.set(0,f[L],0),u.position.set(o.x,o.y,o.z),u.lookAt(o.x+p[L],o.y,o.z)):U===1?(u.up.set(0,0,f[L]),u.position.set(o.x,o.y,o.z),u.lookAt(o.x,o.y+p[L],o.z)):(u.up.set(0,f[L],0),u.position.set(o.x,o.y,o.z),u.lookAt(o.x,o.y,o.z+p[L]));let B=this._cubeSize;Zc(r,U*B,L>2?B:0,B,B),h.setRenderTarget(r),y&&h.render(S,u),h.render(e,u)}h.toneMapping=x,h.autoClear=v,e.background=V}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Zs||e.mapping===el;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=E4()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=S4());let o=r?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=o;let a=o.uniforms;a.envMap.value=e;let u=this._cubeSize;Zc(t,0,0,3*u,2*u),i.setRenderTarget(t),i.render(s,cf)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let r=this._lodMeshes.length;for(let o=1;o<r;o++)this._applyGGXFilter(e,o-1,o);t.autoClear=i}_applyGGXFilter(e,t,i){let r=this._renderer,o=this._pingPongRenderTarget,s=this._ggxMaterial,a=this._lodMeshes[i];a.material=s;let u=s.uniforms,f=i/(this._lodMeshes.length-1),p=t/(this._lodMeshes.length-1),h=Math.sqrt(f*f-p*p),v=0+f*1.25,x=h*v,{_lodMax:w}=this,S=this._sizeLods[i],b=3*S*(i>w-Qs?i-w+Qs:0),y=4*(this._cubeSize-S);u.envMap.value=e.texture,u.roughness.value=x,u.mipInt.value=w-t,Zc(o,b,y,3*S,2*S),r.setRenderTarget(o),r.render(a,cf),u.envMap.value=o.texture,u.roughness.value=0,u.mipInt.value=w-i,Zc(e,b,y,3*S,2*S),r.setRenderTarget(e),r.render(a,cf)}_blur(e,t,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,s,a){let u=this._renderer,f=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&ct("blur direction must be either latitudinal or longitudinal!");let p=3,h=this._lodMeshes[r];h.material=f;let v=f.uniforms,x=this._sizeLods[i]-1,w=isFinite(o)?Math.PI/(2*x):2*Math.PI/(2*ol-1),S=o/w,b=isFinite(o)?1+Math.floor(p*S):ol;b>ol&&ot(`sigmaRadians, ${o}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${ol}`);let y=[],V=0;for(let H=0;H<ol;++H){let Q=H/S,A=Math.exp(-Q*Q/2);y.push(A),H===0?V+=A:H<b&&(V+=2*A)}for(let H=0;H<y.length;H++)y[H]=y[H]/V;v.envMap.value=e.texture,v.samples.value=b,v.weights.value=y,v.latitudinal.value=s==="latitudinal",a&&(v.poleAxis.value=a);let{_lodMax:L}=this;v.dTheta.value=w,v.mipInt.value=L-i;let U=this._sizeLods[r],B=3*U*(r>L-Qs?r-L+Qs:0),z=4*(this._cubeSize-U);Zc(t,B,z,3*U,2*U),u.setRenderTarget(t),u.render(h,cf)}};function DU(n){let e=[],t=[],i=[],r=n,o=n-Qs+1+C4.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);e.push(a);let u=1/a;s>n-Qs?u=C4[s-n+Qs-1]:s===0&&(u=0),t.push(u);let f=1/(a-2),p=-f,h=1+f,v=[p,p,h,p,h,h,p,p,h,h,p,h],x=6,w=6,S=3,b=2,y=1,V=new Float32Array(S*w*x),L=new Float32Array(b*w*x),U=new Float32Array(y*w*x);for(let z=0;z<x;z++){let H=z%3*2/3-1,Q=z>2?0:-1,A=[H,Q,0,H+2/3,Q,0,H+2/3,Q+1,0,H,Q,0,H+2/3,Q+1,0,H,Q+1,0];V.set(A,S*w*z),L.set(v,b*w*z);let N=[z,z,z,z,z,z];U.set(N,y*w*z)}let B=new Wi;B.setAttribute("position",new sr(V,S)),B.setAttribute("uv",new sr(L,b)),B.setAttribute("faceIndex",new sr(U,y)),i.push(new Vt(B,null)),r>Qs&&r--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function M4(n,e,t){let i=new ar(n,e,t);return i.texture.mapping=nf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Zc(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function PU(n,e,t){return new lr({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:AU,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:vg(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:To,depthTest:!1,depthWrite:!1})}function IU(n,e,t){let i=new Float32Array(ol),r=new Z(0,1,0);return new lr({name:"SphericalGaussianBlur",defines:{n:ol,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:vg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:To,depthTest:!1,depthWrite:!1})}function S4(){return new lr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:vg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:To,depthTest:!1,depthWrite:!1})}function E4(){return new lr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:vg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:To,depthTest:!1,depthWrite:!1})}function vg(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function OU(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){let u=a.mapping,f=u===Sm||u===Em,p=u===Zs||u===el;if(f||p){let h=e.get(a),v=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==v)return t===null&&(t=new gg(n)),h=f?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{let x=a.image;return f&&x&&x.height>0||p&&x&&r(x)?(t===null&&(t=new gg(n)),h=f?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",o),h.texture):null}}}return a}function r(a){let u=0,f=6;for(let p=0;p<f;p++)a[p]!==void 0&&u++;return u===f}function o(a){let u=a.target;u.removeEventListener("dispose",o);let f=e.get(u);f!==void 0&&(e.delete(u),f.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function RU(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let r=n.getExtension(i);return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){let r=t(i);return r===null&&Lc("WebGLRenderer: "+i+" extension not supported."),r}}}function kU(n,e,t,i){let r={},o=new WeakMap;function s(h){let v=h.target;v.index!==null&&e.remove(v.index);for(let w in v.attributes)e.remove(v.attributes[w]);v.removeEventListener("dispose",s),delete r[v.id];let x=o.get(v);x&&(e.remove(x),o.delete(v)),i.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function a(h,v){return r[v.id]===!0||(v.addEventListener("dispose",s),r[v.id]=!0,t.memory.geometries++),v}function u(h){let v=h.attributes;for(let x in v)e.update(v[x],n.ARRAY_BUFFER)}function f(h){let v=[],x=h.index,w=h.attributes.position,S=0;if(x!==null){let V=x.array;S=x.version;for(let L=0,U=V.length;L<U;L+=3){let B=V[L+0],z=V[L+1],H=V[L+2];v.push(B,z,z,H,H,B)}}else if(w!==void 0){let V=w.array;S=w.version;for(let L=0,U=V.length/3-1;L<U;L+=3){let B=L+0,z=L+1,H=L+2;v.push(B,z,z,H,H,B)}}else return;let b=new(Ub(v)?Bd:Ud)(v,1);b.version=S;let y=o.get(h);y&&e.remove(y),o.set(h,b)}function p(h){let v=o.get(h);if(v){let x=h.index;x!==null&&v.version<x.version&&f(h)}else f(h);return o.get(h)}return{get:a,update:u,getWireframeAttribute:p}}function NU(n,e,t){let i;function r(v){i=v}let o,s;function a(v){o=v.type,s=v.bytesPerElement}function u(v,x){n.drawElements(i,x,o,v*s),t.update(x,i,1)}function f(v,x,w){w!==0&&(n.drawElementsInstanced(i,x,o,v*s,w),t.update(x,i,w))}function p(v,x,w){if(w===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,x,0,o,v,0,w);let b=0;for(let y=0;y<w;y++)b+=x[y];t.update(b,i,1)}function h(v,x,w,S){if(w===0)return;let b=e.get("WEBGL_multi_draw");if(b===null)for(let y=0;y<v.length;y++)f(v[y]/s,x[y],S[y]);else{b.multiDrawElementsInstancedWEBGL(i,x,0,o,v,0,S,0,w);let y=0;for(let V=0;V<w;V++)y+=x[V]*S[V];t.update(y,i,1)}}this.setMode=r,this.setIndex=a,this.render=u,this.renderInstances=f,this.renderMultiDraw=p,this.renderMultiDrawInstances=h}function FU(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:ct("WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function LU(n,e,t){let i=new WeakMap,r=new Pn;function o(s,a,u){let f=s.morphTargetInfluences,p=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=p!==void 0?p.length:0,v=i.get(a);if(v===void 0||v.count!==h){let N=function(){Q.dispose(),i.delete(a),a.removeEventListener("dispose",N)};var x=N;v!==void 0&&v.texture.dispose();let w=a.morphAttributes.position!==void 0,S=a.morphAttributes.normal!==void 0,b=a.morphAttributes.color!==void 0,y=a.morphAttributes.position||[],V=a.morphAttributes.normal||[],L=a.morphAttributes.color||[],U=0;w===!0&&(U=1),S===!0&&(U=2),b===!0&&(U=3);let B=a.attributes.position.count*U,z=1;B>e.maxTextureSize&&(z=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);let H=new Float32Array(B*z*4*h),Q=new Ld(H,B,z,h);Q.type=eo,Q.needsUpdate=!0;let A=U*4;for(let G=0;G<h;G++){let q=y[G],ne=V[G],ue=L[G],ce=B*z*4*G;for(let ae=0;ae<q.count;ae++){let oe=ae*A;w===!0&&(r.fromBufferAttribute(q,ae),H[ce+oe+0]=r.x,H[ce+oe+1]=r.y,H[ce+oe+2]=r.z,H[ce+oe+3]=0),S===!0&&(r.fromBufferAttribute(ne,ae),H[ce+oe+4]=r.x,H[ce+oe+5]=r.y,H[ce+oe+6]=r.z,H[ce+oe+7]=0),b===!0&&(r.fromBufferAttribute(ue,ae),H[ce+oe+8]=r.x,H[ce+oe+9]=r.y,H[ce+oe+10]=r.z,H[ce+oe+11]=ue.itemSize===4?r.w:1)}}v={count:h,texture:Q,size:new dt(B,z)},i.set(a,v),a.addEventListener("dispose",N)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)u.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let w=0;for(let b=0;b<f.length;b++)w+=f[b];let S=a.morphTargetsRelative?1:1-w;u.getUniforms().setValue(n,"morphTargetBaseInfluence",S),u.getUniforms().setValue(n,"morphTargetInfluences",f)}u.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),u.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}return{update:o}}function VU(n,e,t,i){let r=new WeakMap;function o(u){let f=i.render.frame,p=u.geometry,h=e.get(u,p);if(r.get(h)!==f&&(e.update(h),r.set(h,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",a)===!1&&u.addEventListener("dispose",a),r.get(u)!==f&&(t.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,n.ARRAY_BUFFER),r.set(u,f))),u.isSkinnedMesh){let v=u.skeleton;r.get(v)!==f&&(v.update(),r.set(v,f))}return h}function s(){r=new WeakMap}function a(u){let f=u.target;f.removeEventListener("dispose",a),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:o,dispose:s}}var UU={[wb]:"LINEAR_TONE_MAPPING",[Mb]:"REINHARD_TONE_MAPPING",[Sb]:"CINEON_TONE_MAPPING",[Eb]:"ACES_FILMIC_TONE_MAPPING",[Tb]:"AGX_TONE_MAPPING",[Db]:"NEUTRAL_TONE_MAPPING",[Ab]:"CUSTOM_TONE_MAPPING"};function BU(n,e,t,i,r){let o=new ar(e,t,{type:n,depthBuffer:i,stencilBuffer:r}),s=new ar(e,t,{type:Do,depthBuffer:!1,stencilBuffer:!1}),a=new Wi;a.setAttribute("position",new Nn([-1,3,0,-1,-1,0,3,-1,0],3)),a.setAttribute("uv",new Nn([0,2,0,0,2,0],2));let u=new im({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),f=new Vt(a,u),p=new Gc(-1,1,1,-1,0,1),h=null,v=null,x=!1,w,S=null,b=[],y=!1;this.setSize=function(V,L){o.setSize(V,L),s.setSize(V,L);for(let U=0;U<b.length;U++){let B=b[U];B.setSize&&B.setSize(V,L)}},this.setEffects=function(V){b=V,y=b.length>0&&b[0].isRenderPass===!0;let L=o.width,U=o.height;for(let B=0;B<b.length;B++){let z=b[B];z.setSize&&z.setSize(L,U)}},this.begin=function(V,L){if(x||V.toneMapping===Jr&&b.length===0)return!1;if(S=L,L!==null){let U=L.width,B=L.height;(o.width!==U||o.height!==B)&&this.setSize(U,B)}return y===!1&&V.setRenderTarget(o),w=V.toneMapping,V.toneMapping=Jr,!0},this.hasRenderPass=function(){return y},this.end=function(V,L){V.toneMapping=w,x=!0;let U=o,B=s;for(let z=0;z<b.length;z++){let H=b[z];if(H.enabled!==!1&&(H.render(V,B,U,L),H.needsSwap!==!1)){let Q=U;U=B,B=Q}}if(h!==V.outputColorSpace||v!==V.toneMapping){h=V.outputColorSpace,v=V.toneMapping,u.defines={},jt.getTransfer(h)===Qt&&(u.defines.SRGB_TRANSFER="");let z=UU[v];z&&(u.defines[z]=""),u.needsUpdate=!0}u.uniforms.tDiffuse.value=U.texture,V.setRenderTarget(S),V.render(f,p),S=null,x=!1},this.isCompositing=function(){return x},this.dispose=function(){o.dispose(),s.dispose(),a.dispose(),u.dispose()}}var W4=new to,e1=new Ws(1,1),$4=new Ld,q4=new X0,Y4=new Hd,A4=[],T4=[],D4=new Float32Array(16),P4=new Float32Array(9),I4=new Float32Array(4);function Jc(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,o=A4[r];if(o===void 0&&(o=new Float32Array(r),A4[r]=o),e!==0){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function ni(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ii(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function xg(n,e){let t=T4[e];t===void 0&&(t=new Int32Array(e),T4[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function zU(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function HU(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ni(t,e))return;n.uniform2fv(this.addr,e),ii(t,e)}}function jU(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ni(t,e))return;n.uniform3fv(this.addr,e),ii(t,e)}}function GU(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ni(t,e))return;n.uniform4fv(this.addr,e),ii(t,e)}}function WU(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(ni(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ii(t,e)}else{if(ni(t,i))return;I4.set(i),n.uniformMatrix2fv(this.addr,!1,I4),ii(t,i)}}function $U(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(ni(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ii(t,e)}else{if(ni(t,i))return;P4.set(i),n.uniformMatrix3fv(this.addr,!1,P4),ii(t,i)}}function qU(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(ni(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ii(t,e)}else{if(ni(t,i))return;D4.set(i),n.uniformMatrix4fv(this.addr,!1,D4),ii(t,i)}}function YU(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function XU(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ni(t,e))return;n.uniform2iv(this.addr,e),ii(t,e)}}function ZU(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ni(t,e))return;n.uniform3iv(this.addr,e),ii(t,e)}}function KU(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ni(t,e))return;n.uniform4iv(this.addr,e),ii(t,e)}}function JU(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function QU(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ni(t,e))return;n.uniform2uiv(this.addr,e),ii(t,e)}}function eB(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ni(t,e))return;n.uniform3uiv(this.addr,e),ii(t,e)}}function tB(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ni(t,e))return;n.uniform4uiv(this.addr,e),ii(t,e)}}function nB(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let o;this.type===n.SAMPLER_2D_SHADOW?(e1.compareFunction=t.isReversedDepthBuffer()?hg:fg,o=e1):o=W4,t.setTexture2D(e||o,r)}function iB(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||q4,r)}function rB(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Y4,r)}function oB(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||$4,r)}function sB(n){switch(n){case 5126:return zU;case 35664:return HU;case 35665:return jU;case 35666:return GU;case 35674:return WU;case 35675:return $U;case 35676:return qU;case 5124:case 35670:return YU;case 35667:case 35671:return XU;case 35668:case 35672:return ZU;case 35669:case 35673:return KU;case 5125:return JU;case 36294:return QU;case 36295:return eB;case 36296:return tB;case 35678:case 36198:case 36298:case 36306:case 35682:return nB;case 35679:case 36299:case 36307:return iB;case 35680:case 36300:case 36308:case 36293:return rB;case 36289:case 36303:case 36311:case 36292:return oB}}function aB(n,e){n.uniform1fv(this.addr,e)}function lB(n,e){let t=Jc(e,this.size,2);n.uniform2fv(this.addr,t)}function cB(n,e){let t=Jc(e,this.size,3);n.uniform3fv(this.addr,t)}function uB(n,e){let t=Jc(e,this.size,4);n.uniform4fv(this.addr,t)}function dB(n,e){let t=Jc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function fB(n,e){let t=Jc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function hB(n,e){let t=Jc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function pB(n,e){n.uniform1iv(this.addr,e)}function mB(n,e){n.uniform2iv(this.addr,e)}function gB(n,e){n.uniform3iv(this.addr,e)}function _B(n,e){n.uniform4iv(this.addr,e)}function vB(n,e){n.uniform1uiv(this.addr,e)}function xB(n,e){n.uniform2uiv(this.addr,e)}function yB(n,e){n.uniform3uiv(this.addr,e)}function bB(n,e){n.uniform4uiv(this.addr,e)}function CB(n,e,t){let i=this.cache,r=e.length,o=xg(t,r);ni(i,o)||(n.uniform1iv(this.addr,o),ii(i,o));let s;this.type===n.SAMPLER_2D_SHADOW?s=e1:s=W4;for(let a=0;a!==r;++a)t.setTexture2D(e[a]||s,o[a])}function wB(n,e,t){let i=this.cache,r=e.length,o=xg(t,r);ni(i,o)||(n.uniform1iv(this.addr,o),ii(i,o));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||q4,o[s])}function MB(n,e,t){let i=this.cache,r=e.length,o=xg(t,r);ni(i,o)||(n.uniform1iv(this.addr,o),ii(i,o));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||Y4,o[s])}function SB(n,e,t){let i=this.cache,r=e.length,o=xg(t,r);ni(i,o)||(n.uniform1iv(this.addr,o),ii(i,o));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||$4,o[s])}function EB(n){switch(n){case 5126:return aB;case 35664:return lB;case 35665:return cB;case 35666:return uB;case 35674:return dB;case 35675:return fB;case 35676:return hB;case 5124:case 35670:return pB;case 35667:case 35671:return mB;case 35668:case 35672:return gB;case 35669:case 35673:return _B;case 5125:return vB;case 36294:return xB;case 36295:return yB;case 36296:return bB;case 35678:case 36198:case 36298:case 36306:case 35682:return CB;case 35679:case 36299:case 36307:return wB;case 35680:case 36300:case 36308:case 36293:return MB;case 36289:case 36303:case 36311:case 36292:return SB}}var t1=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=sB(t.type)}},n1=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=EB(t.type)}},i1=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(e,t[a.id],i)}}},Jb=/(\w+)(\])?(\[|\.)?/g;function O4(n,e){n.seq.push(e),n.map[e.id]=e}function AB(n,e,t){let i=n.name,r=i.length;for(Jb.lastIndex=0;;){let o=Jb.exec(i),s=Jb.lastIndex,a=o[1],u=o[2]==="]",f=o[3];if(u&&(a=a|0),f===void 0||f==="["&&s+2===r){O4(t,f===void 0?new t1(a,n,e):new n1(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new i1(a),O4(t,h)),t=h}}}var Kc=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){let a=e.getActiveUniform(t,s),u=e.getUniformLocation(t,a.name);AB(a,u,this)}let r=[],o=[];for(let s of this.seq)s.type===e.SAMPLER_2D_SHADOW||s.type===e.SAMPLER_CUBE_SHADOW||s.type===e.SAMPLER_2D_ARRAY_SHADOW?r.push(s):o.push(s);r.length>0&&(this.seq=r.concat(o))}setValue(e,t,i,r){let o=this.map[t];o!==void 0&&o.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let o=0,s=t.length;o!==s;++o){let a=t[o],u=i[a.id];u.needsUpdate!==!1&&a.setValue(e,u.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,o=e.length;r!==o;++r){let s=e[r];s.id in t&&i.push(s)}return i}};function R4(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var TB=37297,DB=0;function PB(n,e){let t=n.split(`
`),i=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return i.join(`
`)}var k4=new vt;function IB(n){jt._getMatrix(k4,jt.workingColorSpace,n);let e=`mat3( ${k4.elements.map(t=>t.toFixed(4))} )`;switch(jt.getTransfer(n)){case Nd:return[e,"LinearTransferOETF"];case Qt:return[e,"sRGBTransferOETF"];default:return ot("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function N4(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),o=(n.getShaderInfoLog(e)||"").trim();if(i&&o==="")return"";let s=/ERROR: 0:(\d+)/.exec(o);if(s){let a=parseInt(s[1]);return t.toUpperCase()+`

`+o+`

`+PB(n.getShaderSource(e),a)}else return o}function OB(n,e){let t=IB(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}var RB={[wb]:"Linear",[Mb]:"Reinhard",[Sb]:"Cineon",[Eb]:"ACESFilmic",[Tb]:"AgX",[Db]:"Neutral",[Ab]:"Custom"};function kB(n,e){let t=RB[e];return t===void 0?(ot("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var mg=new Z;function NB(){jt.getLuminanceCoefficients(mg);let n=mg.x.toFixed(4),e=mg.y.toFixed(4),t=mg.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function FB(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(df).join(`
`)}function LB(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function VB(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=n.getActiveAttrib(e,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}function df(n){return n!==""}function F4(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function L4(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var UB=/^[ \t]*#include +<([\w\d./]+)>/gm;function r1(n){return n.replace(UB,zB)}var BB=new Map;function zB(n,e){let t=At[e];if(t===void 0){let i=BB.get(e);if(i!==void 0)t=At[i],ot('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return r1(t)}var HB=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function V4(n){return n.replace(HB,jB)}function jB(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function U4(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}var GB={[tf]:"SHADOWMAP_TYPE_PCF",[$c]:"SHADOWMAP_TYPE_VSM"};function WB(n){return GB[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}var $B={[Zs]:"ENVMAP_TYPE_CUBE",[el]:"ENVMAP_TYPE_CUBE",[nf]:"ENVMAP_TYPE_CUBE_UV"};function qB(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":$B[n.envMapMode]||"ENVMAP_TYPE_CUBE"}var YB={[el]:"ENVMAP_MODE_REFRACTION"};function XB(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":YB[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}var ZB={[Mm]:"ENVMAP_BLENDING_MULTIPLY",[s4]:"ENVMAP_BLENDING_MIX",[a4]:"ENVMAP_BLENDING_ADD"};function KB(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":ZB[n.combine]||"ENVMAP_BLENDING_NONE"}function JB(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function QB(n,e,t,i){let r=n.getContext(),o=t.defines,s=t.vertexShader,a=t.fragmentShader,u=WB(t),f=qB(t),p=XB(t),h=KB(t),v=JB(t),x=FB(t),w=LB(o),S=r.createProgram(),b,y,V=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(df).join(`
`),b.length>0&&(b+=`
`),y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(df).join(`
`),y.length>0&&(y+=`
`)):(b=[U4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(df).join(`
`),y=[U4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+p:"",t.envMap?"#define "+h:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Jr?"#define TONE_MAPPING":"",t.toneMapping!==Jr?At.tonemapping_pars_fragment:"",t.toneMapping!==Jr?kB("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",At.colorspace_pars_fragment,OB("linearToOutputTexel",t.outputColorSpace),NB(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(df).join(`
`)),s=r1(s),s=F4(s,t),s=L4(s,t),a=r1(a),a=F4(a,t),a=L4(a,t),s=V4(s),a=V4(a),t.isRawShaderMaterial!==!0&&(V=`#version 300 es
`,b=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,y=["#define varying in",t.glslVersion===Vb?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Vb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);let L=V+b+s,U=V+y+a,B=R4(r,r.VERTEX_SHADER,L),z=R4(r,r.FRAGMENT_SHADER,U);r.attachShader(S,B),r.attachShader(S,z),t.index0AttributeName!==void 0?r.bindAttribLocation(S,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(S,0,"position"),r.linkProgram(S);function H(G){if(n.debug.checkShaderErrors){let q=r.getProgramInfoLog(S)||"",ne=r.getShaderInfoLog(B)||"",ue=r.getShaderInfoLog(z)||"",ce=q.trim(),ae=ne.trim(),oe=ue.trim(),_e=!0,Fe=!0;if(r.getProgramParameter(S,r.LINK_STATUS)===!1)if(_e=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,S,B,z);else{let Te=N4(r,B,"vertex"),Le=N4(r,z,"fragment");ct("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(S,r.VALIDATE_STATUS)+`

Material Name: `+G.name+`
Material Type: `+G.type+`

Program Info Log: `+ce+`
`+Te+`
`+Le)}else ce!==""?ot("WebGLProgram: Program Info Log:",ce):(ae===""||oe==="")&&(Fe=!1);Fe&&(G.diagnostics={runnable:_e,programLog:ce,vertexShader:{log:ae,prefix:b},fragmentShader:{log:oe,prefix:y}})}r.deleteShader(B),r.deleteShader(z),Q=new Kc(r,S),A=VB(r,S)}let Q;this.getUniforms=function(){return Q===void 0&&H(this),Q};let A;this.getAttributes=function(){return A===void 0&&H(this),A};let N=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return N===!1&&(N=r.getProgramParameter(S,TB)),N},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(S),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=DB++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=B,this.fragmentShader=z,this}var e9=0,o1=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new s1(e),t.set(e,i)),i}},s1=class{constructor(e){this.id=e9++,this.code=e,this.usedTimes=0}};function t9(n,e,t,i,r,o,s){let a=new Vd,u=new o1,f=new Set,p=[],h=new Map,v=r.logarithmicDepthBuffer,x=r.precision,w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(A){return f.add(A),A===0?"uv":`uv${A}`}function b(A,N,G,q,ne){let ue=q.fog,ce=ne.geometry,ae=A.isMeshStandardMaterial?q.environment:null,oe=(A.isMeshStandardMaterial?t:e).get(A.envMap||ae),_e=oe&&oe.mapping===nf?oe.image.height:null,Fe=w[A.type];A.precision!==null&&(x=r.getMaxPrecision(A.precision),x!==A.precision&&ot("WebGLProgram.getParameters:",A.precision,"not supported, using",x,"instead."));let Te=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,Le=Te!==void 0?Te.length:0,ut=0;ce.morphAttributes.position!==void 0&&(ut=1),ce.morphAttributes.normal!==void 0&&(ut=2),ce.morphAttributes.color!==void 0&&(ut=3);let xt,Kt,qt,pe;if(Fe){let Yt=Io[Fe];xt=Yt.vertexShader,Kt=Yt.fragmentShader}else xt=A.vertexShader,Kt=A.fragmentShader,u.update(A),qt=u.getVertexShaderID(A),pe=u.getFragmentShaderID(A);let ve=n.getRenderTarget(),We=n.state.buffers.depth.getReversed(),ht=ne.isInstancedMesh===!0,Xe=ne.isBatchedMesh===!0,Rt=!!A.map,wn=!!A.matcap,Ft=!!oe,pt=!!A.aoMap,It=!!A.lightMap,yt=!!A.bumpMap,Ut=!!A.normalMap,j=!!A.displacementMap,Mn=!!A.emissiveMap,Gt=!!A.metalnessMap,et=!!A.roughnessMap,ze=A.anisotropy>0,F=A.clearcoat>0,M=A.dispersion>0,W=A.iridescence>0,se=A.sheen>0,ge=A.transmission>0,le=ze&&!!A.anisotropyMap,Ze=F&&!!A.clearcoatMap,Se=F&&!!A.clearcoatNormalMap,Ke=F&&!!A.clearcoatRoughnessMap,rt=W&&!!A.iridescenceMap,Ce=W&&!!A.iridescenceThicknessMap,Oe=se&&!!A.sheenColorMap,qe=se&&!!A.sheenRoughnessMap,Je=!!A.specularMap,Re=!!A.specularColorMap,bt=!!A.specularIntensityMap,$=ge&&!!A.transmissionMap,ke=ge&&!!A.thicknessMap,Ee=!!A.gradientMap,He=!!A.alphaMap,ye=A.alphaTest>0,me=!!A.alphaHash,Ie=!!A.extensions,at=Jr;A.toneMapped&&(ve===null||ve.isXRRenderTarget===!0)&&(at=n.toneMapping);let rn={shaderID:Fe,shaderType:A.type,shaderName:A.name,vertexShader:xt,fragmentShader:Kt,defines:A.defines,customVertexShaderID:qt,customFragmentShaderID:pe,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:x,batching:Xe,batchingColor:Xe&&ne._colorsTexture!==null,instancing:ht,instancingColor:ht&&ne.instanceColor!==null,instancingMorph:ht&&ne.morphTexture!==null,outputColorSpace:ve===null?n.outputColorSpace:ve.isXRRenderTarget===!0?ve.texture.colorSpace:Za,alphaToCoverage:!!A.alphaToCoverage,map:Rt,matcap:wn,envMap:Ft,envMapMode:Ft&&oe.mapping,envMapCubeUVHeight:_e,aoMap:pt,lightMap:It,bumpMap:yt,normalMap:Ut,displacementMap:j,emissiveMap:Mn,normalMapObjectSpace:Ut&&A.normalMapType===u4,normalMapTangentSpace:Ut&&A.normalMapType===Lb,metalnessMap:Gt,roughnessMap:et,anisotropy:ze,anisotropyMap:le,clearcoat:F,clearcoatMap:Ze,clearcoatNormalMap:Se,clearcoatRoughnessMap:Ke,dispersion:M,iridescence:W,iridescenceMap:rt,iridescenceThicknessMap:Ce,sheen:se,sheenColorMap:Oe,sheenRoughnessMap:qe,specularMap:Je,specularColorMap:Re,specularIntensityMap:bt,transmission:ge,transmissionMap:$,thicknessMap:ke,gradientMap:Ee,opaque:A.transparent===!1&&A.blending===qa&&A.alphaToCoverage===!1,alphaMap:He,alphaTest:ye,alphaHash:me,combine:A.combine,mapUv:Rt&&S(A.map.channel),aoMapUv:pt&&S(A.aoMap.channel),lightMapUv:It&&S(A.lightMap.channel),bumpMapUv:yt&&S(A.bumpMap.channel),normalMapUv:Ut&&S(A.normalMap.channel),displacementMapUv:j&&S(A.displacementMap.channel),emissiveMapUv:Mn&&S(A.emissiveMap.channel),metalnessMapUv:Gt&&S(A.metalnessMap.channel),roughnessMapUv:et&&S(A.roughnessMap.channel),anisotropyMapUv:le&&S(A.anisotropyMap.channel),clearcoatMapUv:Ze&&S(A.clearcoatMap.channel),clearcoatNormalMapUv:Se&&S(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ke&&S(A.clearcoatRoughnessMap.channel),iridescenceMapUv:rt&&S(A.iridescenceMap.channel),iridescenceThicknessMapUv:Ce&&S(A.iridescenceThicknessMap.channel),sheenColorMapUv:Oe&&S(A.sheenColorMap.channel),sheenRoughnessMapUv:qe&&S(A.sheenRoughnessMap.channel),specularMapUv:Je&&S(A.specularMap.channel),specularColorMapUv:Re&&S(A.specularColorMap.channel),specularIntensityMapUv:bt&&S(A.specularIntensityMap.channel),transmissionMapUv:$&&S(A.transmissionMap.channel),thicknessMapUv:ke&&S(A.thicknessMap.channel),alphaMapUv:He&&S(A.alphaMap.channel),vertexTangents:!!ce.attributes.tangent&&(Ut||ze),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,pointsUvs:ne.isPoints===!0&&!!ce.attributes.uv&&(Rt||He),fog:!!ue,useFog:A.fog===!0,fogExp2:!!ue&&ue.isFogExp2,flatShading:A.flatShading===!0&&A.wireframe===!1,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:v,reversedDepthBuffer:We,skinning:ne.isSkinnedMesh===!0,morphTargets:ce.morphAttributes.position!==void 0,morphNormals:ce.morphAttributes.normal!==void 0,morphColors:ce.morphAttributes.color!==void 0,morphTargetsCount:Le,morphTextureStride:ut,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numLightProbes:N.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:A.dithering,shadowMapEnabled:n.shadowMap.enabled&&G.length>0,shadowMapType:n.shadowMap.type,toneMapping:at,decodeVideoTexture:Rt&&A.map.isVideoTexture===!0&&jt.getTransfer(A.map.colorSpace)===Qt,decodeVideoTextureEmissive:Mn&&A.emissiveMap.isVideoTexture===!0&&jt.getTransfer(A.emissiveMap.colorSpace)===Qt,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===ur,flipSided:A.side===Pi,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionClipCullDistance:Ie&&A.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ie&&A.extensions.multiDraw===!0||Xe)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};return rn.vertexUv1s=f.has(1),rn.vertexUv2s=f.has(2),rn.vertexUv3s=f.has(3),f.clear(),rn}function y(A){let N=[];if(A.shaderID?N.push(A.shaderID):(N.push(A.customVertexShaderID),N.push(A.customFragmentShaderID)),A.defines!==void 0)for(let G in A.defines)N.push(G),N.push(A.defines[G]);return A.isRawShaderMaterial===!1&&(V(N,A),L(N,A),N.push(n.outputColorSpace)),N.push(A.customProgramCacheKey),N.join()}function V(A,N){A.push(N.precision),A.push(N.outputColorSpace),A.push(N.envMapMode),A.push(N.envMapCubeUVHeight),A.push(N.mapUv),A.push(N.alphaMapUv),A.push(N.lightMapUv),A.push(N.aoMapUv),A.push(N.bumpMapUv),A.push(N.normalMapUv),A.push(N.displacementMapUv),A.push(N.emissiveMapUv),A.push(N.metalnessMapUv),A.push(N.roughnessMapUv),A.push(N.anisotropyMapUv),A.push(N.clearcoatMapUv),A.push(N.clearcoatNormalMapUv),A.push(N.clearcoatRoughnessMapUv),A.push(N.iridescenceMapUv),A.push(N.iridescenceThicknessMapUv),A.push(N.sheenColorMapUv),A.push(N.sheenRoughnessMapUv),A.push(N.specularMapUv),A.push(N.specularColorMapUv),A.push(N.specularIntensityMapUv),A.push(N.transmissionMapUv),A.push(N.thicknessMapUv),A.push(N.combine),A.push(N.fogExp2),A.push(N.sizeAttenuation),A.push(N.morphTargetsCount),A.push(N.morphAttributeCount),A.push(N.numDirLights),A.push(N.numPointLights),A.push(N.numSpotLights),A.push(N.numSpotLightMaps),A.push(N.numHemiLights),A.push(N.numRectAreaLights),A.push(N.numDirLightShadows),A.push(N.numPointLightShadows),A.push(N.numSpotLightShadows),A.push(N.numSpotLightShadowsWithMaps),A.push(N.numLightProbes),A.push(N.shadowMapType),A.push(N.toneMapping),A.push(N.numClippingPlanes),A.push(N.numClipIntersection),A.push(N.depthPacking)}function L(A,N){a.disableAll(),N.instancing&&a.enable(0),N.instancingColor&&a.enable(1),N.instancingMorph&&a.enable(2),N.matcap&&a.enable(3),N.envMap&&a.enable(4),N.normalMapObjectSpace&&a.enable(5),N.normalMapTangentSpace&&a.enable(6),N.clearcoat&&a.enable(7),N.iridescence&&a.enable(8),N.alphaTest&&a.enable(9),N.vertexColors&&a.enable(10),N.vertexAlphas&&a.enable(11),N.vertexUv1s&&a.enable(12),N.vertexUv2s&&a.enable(13),N.vertexUv3s&&a.enable(14),N.vertexTangents&&a.enable(15),N.anisotropy&&a.enable(16),N.alphaHash&&a.enable(17),N.batching&&a.enable(18),N.dispersion&&a.enable(19),N.batchingColor&&a.enable(20),N.gradientMap&&a.enable(21),A.push(a.mask),a.disableAll(),N.fog&&a.enable(0),N.useFog&&a.enable(1),N.flatShading&&a.enable(2),N.logarithmicDepthBuffer&&a.enable(3),N.reversedDepthBuffer&&a.enable(4),N.skinning&&a.enable(5),N.morphTargets&&a.enable(6),N.morphNormals&&a.enable(7),N.morphColors&&a.enable(8),N.premultipliedAlpha&&a.enable(9),N.shadowMapEnabled&&a.enable(10),N.doubleSided&&a.enable(11),N.flipSided&&a.enable(12),N.useDepthPacking&&a.enable(13),N.dithering&&a.enable(14),N.transmission&&a.enable(15),N.sheen&&a.enable(16),N.opaque&&a.enable(17),N.pointsUvs&&a.enable(18),N.decodeVideoTexture&&a.enable(19),N.decodeVideoTextureEmissive&&a.enable(20),N.alphaToCoverage&&a.enable(21),A.push(a.mask)}function U(A){let N=w[A.type],G;if(N){let q=Io[N];G=y4.clone(q.uniforms)}else G=A.uniforms;return G}function B(A,N){let G=h.get(N);return G!==void 0?++G.usedTimes:(G=new QB(n,N,A,o),p.push(G),h.set(N,G)),G}function z(A){if(--A.usedTimes===0){let N=p.indexOf(A);p[N]=p[p.length-1],p.pop(),h.delete(A.cacheKey),A.destroy()}}function H(A){u.remove(A)}function Q(){u.dispose()}return{getParameters:b,getProgramCacheKey:y,getUniforms:U,acquireProgram:B,releaseProgram:z,releaseShaderCache:H,programs:p,dispose:Q}}function n9(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function i(s){n.delete(s)}function r(s,a,u){n.get(s)[a]=u}function o(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:o}}function i9(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function B4(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function z4(){let n=[],e=0,t=[],i=[],r=[];function o(){e=0,t.length=0,i.length=0,r.length=0}function s(h,v,x,w,S,b){let y=n[e];return y===void 0?(y={id:h.id,object:h,geometry:v,material:x,groupOrder:w,renderOrder:h.renderOrder,z:S,group:b},n[e]=y):(y.id=h.id,y.object=h,y.geometry=v,y.material=x,y.groupOrder=w,y.renderOrder=h.renderOrder,y.z=S,y.group=b),e++,y}function a(h,v,x,w,S,b){let y=s(h,v,x,w,S,b);x.transmission>0?i.push(y):x.transparent===!0?r.push(y):t.push(y)}function u(h,v,x,w,S,b){let y=s(h,v,x,w,S,b);x.transmission>0?i.unshift(y):x.transparent===!0?r.unshift(y):t.unshift(y)}function f(h,v){t.length>1&&t.sort(h||i9),i.length>1&&i.sort(v||B4),r.length>1&&r.sort(v||B4)}function p(){for(let h=e,v=n.length;h<v;h++){let x=n[h];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:i,transparent:r,init:o,push:a,unshift:u,finish:p,sort:f}}function r9(){let n=new WeakMap;function e(i,r){let o=n.get(i),s;return o===void 0?(s=new z4,n.set(i,[s])):r>=o.length?(s=new z4,o.push(s)):s=o[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function o9(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Z,color:new Et};break;case"SpotLight":t={position:new Z,direction:new Z,color:new Et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Z,color:new Et,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Z,skyColor:new Et,groundColor:new Et};break;case"RectAreaLight":t={color:new Et,position:new Z,halfWidth:new Z,halfHeight:new Z};break}return n[e.id]=t,t}}}function s9(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var a9=0;function l9(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function c9(n){let e=new o9,t=s9(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new Z);let r=new Z,o=new Dn,s=new Dn;function a(f){let p=0,h=0,v=0;for(let A=0;A<9;A++)i.probe[A].set(0,0,0);let x=0,w=0,S=0,b=0,y=0,V=0,L=0,U=0,B=0,z=0,H=0;f.sort(l9);for(let A=0,N=f.length;A<N;A++){let G=f[A],q=G.color,ne=G.intensity,ue=G.distance,ce=null;if(G.shadow&&G.shadow.map&&(G.shadow.map.texture.format===tl?ce=G.shadow.map.texture:ce=G.shadow.map.depthTexture||G.shadow.map.texture),G.isAmbientLight)p+=q.r*ne,h+=q.g*ne,v+=q.b*ne;else if(G.isLightProbe){for(let ae=0;ae<9;ae++)i.probe[ae].addScaledVector(G.sh.coefficients[ae],ne);H++}else if(G.isDirectionalLight){let ae=e.get(G);if(ae.color.copy(G.color).multiplyScalar(G.intensity),G.castShadow){let oe=G.shadow,_e=t.get(G);_e.shadowIntensity=oe.intensity,_e.shadowBias=oe.bias,_e.shadowNormalBias=oe.normalBias,_e.shadowRadius=oe.radius,_e.shadowMapSize=oe.mapSize,i.directionalShadow[x]=_e,i.directionalShadowMap[x]=ce,i.directionalShadowMatrix[x]=G.shadow.matrix,V++}i.directional[x]=ae,x++}else if(G.isSpotLight){let ae=e.get(G);ae.position.setFromMatrixPosition(G.matrixWorld),ae.color.copy(q).multiplyScalar(ne),ae.distance=ue,ae.coneCos=Math.cos(G.angle),ae.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),ae.decay=G.decay,i.spot[S]=ae;let oe=G.shadow;if(G.map&&(i.spotLightMap[B]=G.map,B++,oe.updateMatrices(G),G.castShadow&&z++),i.spotLightMatrix[S]=oe.matrix,G.castShadow){let _e=t.get(G);_e.shadowIntensity=oe.intensity,_e.shadowBias=oe.bias,_e.shadowNormalBias=oe.normalBias,_e.shadowRadius=oe.radius,_e.shadowMapSize=oe.mapSize,i.spotShadow[S]=_e,i.spotShadowMap[S]=ce,U++}S++}else if(G.isRectAreaLight){let ae=e.get(G);ae.color.copy(q).multiplyScalar(ne),ae.halfWidth.set(G.width*.5,0,0),ae.halfHeight.set(0,G.height*.5,0),i.rectArea[b]=ae,b++}else if(G.isPointLight){let ae=e.get(G);if(ae.color.copy(G.color).multiplyScalar(G.intensity),ae.distance=G.distance,ae.decay=G.decay,G.castShadow){let oe=G.shadow,_e=t.get(G);_e.shadowIntensity=oe.intensity,_e.shadowBias=oe.bias,_e.shadowNormalBias=oe.normalBias,_e.shadowRadius=oe.radius,_e.shadowMapSize=oe.mapSize,_e.shadowCameraNear=oe.camera.near,_e.shadowCameraFar=oe.camera.far,i.pointShadow[w]=_e,i.pointShadowMap[w]=ce,i.pointShadowMatrix[w]=G.shadow.matrix,L++}i.point[w]=ae,w++}else if(G.isHemisphereLight){let ae=e.get(G);ae.skyColor.copy(G.color).multiplyScalar(ne),ae.groundColor.copy(G.groundColor).multiplyScalar(ne),i.hemi[y]=ae,y++}}b>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Be.LTC_FLOAT_1,i.rectAreaLTC2=Be.LTC_FLOAT_2):(i.rectAreaLTC1=Be.LTC_HALF_1,i.rectAreaLTC2=Be.LTC_HALF_2)),i.ambient[0]=p,i.ambient[1]=h,i.ambient[2]=v;let Q=i.hash;(Q.directionalLength!==x||Q.pointLength!==w||Q.spotLength!==S||Q.rectAreaLength!==b||Q.hemiLength!==y||Q.numDirectionalShadows!==V||Q.numPointShadows!==L||Q.numSpotShadows!==U||Q.numSpotMaps!==B||Q.numLightProbes!==H)&&(i.directional.length=x,i.spot.length=S,i.rectArea.length=b,i.point.length=w,i.hemi.length=y,i.directionalShadow.length=V,i.directionalShadowMap.length=V,i.pointShadow.length=L,i.pointShadowMap.length=L,i.spotShadow.length=U,i.spotShadowMap.length=U,i.directionalShadowMatrix.length=V,i.pointShadowMatrix.length=L,i.spotLightMatrix.length=U+B-z,i.spotLightMap.length=B,i.numSpotLightShadowsWithMaps=z,i.numLightProbes=H,Q.directionalLength=x,Q.pointLength=w,Q.spotLength=S,Q.rectAreaLength=b,Q.hemiLength=y,Q.numDirectionalShadows=V,Q.numPointShadows=L,Q.numSpotShadows=U,Q.numSpotMaps=B,Q.numLightProbes=H,i.version=a9++)}function u(f,p){let h=0,v=0,x=0,w=0,S=0,b=p.matrixWorldInverse;for(let y=0,V=f.length;y<V;y++){let L=f[y];if(L.isDirectionalLight){let U=i.directional[h];U.direction.setFromMatrixPosition(L.matrixWorld),r.setFromMatrixPosition(L.target.matrixWorld),U.direction.sub(r),U.direction.transformDirection(b),h++}else if(L.isSpotLight){let U=i.spot[x];U.position.setFromMatrixPosition(L.matrixWorld),U.position.applyMatrix4(b),U.direction.setFromMatrixPosition(L.matrixWorld),r.setFromMatrixPosition(L.target.matrixWorld),U.direction.sub(r),U.direction.transformDirection(b),x++}else if(L.isRectAreaLight){let U=i.rectArea[w];U.position.setFromMatrixPosition(L.matrixWorld),U.position.applyMatrix4(b),s.identity(),o.copy(L.matrixWorld),o.premultiply(b),s.extractRotation(o),U.halfWidth.set(L.width*.5,0,0),U.halfHeight.set(0,L.height*.5,0),U.halfWidth.applyMatrix4(s),U.halfHeight.applyMatrix4(s),w++}else if(L.isPointLight){let U=i.point[v];U.position.setFromMatrixPosition(L.matrixWorld),U.position.applyMatrix4(b),v++}else if(L.isHemisphereLight){let U=i.hemi[S];U.direction.setFromMatrixPosition(L.matrixWorld),U.direction.transformDirection(b),S++}}}return{setup:a,setupView:u,state:i}}function H4(n){let e=new c9(n),t=[],i=[];function r(p){f.camera=p,t.length=0,i.length=0}function o(p){t.push(p)}function s(p){i.push(p)}function a(){e.setup(t)}function u(p){e.setupView(t,p)}let f={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:f,setupLights:a,setupLightsView:u,pushLight:o,pushShadow:s}}function u9(n){let e=new WeakMap;function t(r,o=0){let s=e.get(r),a;return s===void 0?(a=new H4(n),e.set(r,[a])):o>=s.length?(a=new H4(n),s.push(a)):a=s[o],a}function i(){e=new WeakMap}return{get:t,dispose:i}}var d9=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,f9=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,h9=[new Z(1,0,0),new Z(-1,0,0),new Z(0,1,0),new Z(0,-1,0),new Z(0,0,1),new Z(0,0,-1)],p9=[new Z(0,-1,0),new Z(0,-1,0),new Z(0,0,1),new Z(0,0,-1),new Z(0,-1,0),new Z(0,-1,0)],j4=new Dn,uf=new Z,Qb=new Z;function m9(n,e,t){let i=new zc,r=new dt,o=new dt,s=new Pn,a=new rm,u=new om,f={},p=t.maxTextureSize,h={[ss]:Pi,[Pi]:ss,[ur]:ur},v=new lr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new dt},radius:{value:4}},vertexShader:d9,fragmentShader:f9}),x=v.clone();x.defines.HORIZONTAL_PASS=1;let w=new Wi;w.setAttribute("position",new sr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let S=new Vt(w,v),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=tf;let y=this.type;this.render=function(z,H,Q){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||z.length===0)return;z.type===zE&&(ot("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),z.type=tf);let A=n.getRenderTarget(),N=n.getActiveCubeFace(),G=n.getActiveMipmapLevel(),q=n.state;q.setBlending(To),q.buffers.depth.getReversed()===!0?q.buffers.color.setClear(0,0,0,0):q.buffers.color.setClear(1,1,1,1),q.buffers.depth.setTest(!0),q.setScissorTest(!1);let ne=y!==this.type;ne&&H.traverse(function(ue){ue.material&&(Array.isArray(ue.material)?ue.material.forEach(ce=>ce.needsUpdate=!0):ue.material.needsUpdate=!0)});for(let ue=0,ce=z.length;ue<ce;ue++){let ae=z[ue],oe=ae.shadow;if(oe===void 0){ot("WebGLShadowMap:",ae,"has no shadow.");continue}if(oe.autoUpdate===!1&&oe.needsUpdate===!1)continue;r.copy(oe.mapSize);let _e=oe.getFrameExtents();if(r.multiply(_e),o.copy(oe.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(o.x=Math.floor(p/_e.x),r.x=o.x*_e.x,oe.mapSize.x=o.x),r.y>p&&(o.y=Math.floor(p/_e.y),r.y=o.y*_e.y,oe.mapSize.y=o.y)),oe.map===null||ne===!0){if(oe.map!==null&&(oe.map.depthTexture!==null&&(oe.map.depthTexture.dispose(),oe.map.depthTexture=null),oe.map.dispose()),this.type===$c){if(ae.isPointLight){ot("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}oe.map=new ar(r.x,r.y,{format:tl,type:Do,minFilter:ui,magFilter:ui,generateMipmaps:!1}),oe.map.texture.name=ae.name+".shadowMap",oe.map.depthTexture=new Ws(r.x,r.y,eo),oe.map.depthTexture.name=ae.name+".shadowMapDepth",oe.map.depthTexture.format=So,oe.map.depthTexture.compareFunction=null,oe.map.depthTexture.minFilter=li,oe.map.depthTexture.magFilter=li}else{ae.isPointLight?(oe.map=new jd(r.x),oe.map.depthTexture=new nm(r.x,Qr)):(oe.map=new ar(r.x,r.y),oe.map.depthTexture=new Ws(r.x,r.y,Qr)),oe.map.depthTexture.name=ae.name+".shadowMap",oe.map.depthTexture.format=So;let Te=n.state.buffers.depth.getReversed();this.type===tf?(oe.map.depthTexture.compareFunction=Te?hg:fg,oe.map.depthTexture.minFilter=ui,oe.map.depthTexture.magFilter=ui):(oe.map.depthTexture.compareFunction=null,oe.map.depthTexture.minFilter=li,oe.map.depthTexture.magFilter=li)}oe.camera.updateProjectionMatrix()}let Fe=oe.map.isWebGLCubeRenderTarget?6:1;for(let Te=0;Te<Fe;Te++){if(oe.map.isWebGLCubeRenderTarget)n.setRenderTarget(oe.map,Te),n.clear();else{Te===0&&(n.setRenderTarget(oe.map),n.clear());let Le=oe.getViewport(Te);s.set(o.x*Le.x,o.y*Le.y,o.x*Le.z,o.y*Le.w),q.viewport(s)}if(ae.isPointLight){let Le=oe.camera,ut=oe.matrix,xt=ae.distance||Le.far;xt!==Le.far&&(Le.far=xt,Le.updateProjectionMatrix()),uf.setFromMatrixPosition(ae.matrixWorld),Le.position.copy(uf),Qb.copy(Le.position),Qb.add(h9[Te]),Le.up.copy(p9[Te]),Le.lookAt(Qb),Le.updateMatrixWorld(),ut.makeTranslation(-uf.x,-uf.y,-uf.z),j4.multiplyMatrices(Le.projectionMatrix,Le.matrixWorldInverse),oe._frustum.setFromProjectionMatrix(j4,Le.coordinateSystem,Le.reversedDepth)}else oe.updateMatrices(ae);i=oe.getFrustum(),U(H,Q,oe.camera,ae,this.type)}oe.isPointLightShadow!==!0&&this.type===$c&&V(oe,Q),oe.needsUpdate=!1}y=this.type,b.needsUpdate=!1,n.setRenderTarget(A,N,G)};function V(z,H){let Q=e.update(S);v.defines.VSM_SAMPLES!==z.blurSamples&&(v.defines.VSM_SAMPLES=z.blurSamples,x.defines.VSM_SAMPLES=z.blurSamples,v.needsUpdate=!0,x.needsUpdate=!0),z.mapPass===null&&(z.mapPass=new ar(r.x,r.y,{format:tl,type:Do})),v.uniforms.shadow_pass.value=z.map.depthTexture,v.uniforms.resolution.value=z.mapSize,v.uniforms.radius.value=z.radius,n.setRenderTarget(z.mapPass),n.clear(),n.renderBufferDirect(H,null,Q,v,S,null),x.uniforms.shadow_pass.value=z.mapPass.texture,x.uniforms.resolution.value=z.mapSize,x.uniforms.radius.value=z.radius,n.setRenderTarget(z.map),n.clear(),n.renderBufferDirect(H,null,Q,x,S,null)}function L(z,H,Q,A){let N=null,G=Q.isPointLight===!0?z.customDistanceMaterial:z.customDepthMaterial;if(G!==void 0)N=G;else if(N=Q.isPointLight===!0?u:a,n.localClippingEnabled&&H.clipShadows===!0&&Array.isArray(H.clippingPlanes)&&H.clippingPlanes.length!==0||H.displacementMap&&H.displacementScale!==0||H.alphaMap&&H.alphaTest>0||H.map&&H.alphaTest>0||H.alphaToCoverage===!0){let q=N.uuid,ne=H.uuid,ue=f[q];ue===void 0&&(ue={},f[q]=ue);let ce=ue[ne];ce===void 0&&(ce=N.clone(),ue[ne]=ce,H.addEventListener("dispose",B)),N=ce}if(N.visible=H.visible,N.wireframe=H.wireframe,A===$c?N.side=H.shadowSide!==null?H.shadowSide:H.side:N.side=H.shadowSide!==null?H.shadowSide:h[H.side],N.alphaMap=H.alphaMap,N.alphaTest=H.alphaToCoverage===!0?.5:H.alphaTest,N.map=H.map,N.clipShadows=H.clipShadows,N.clippingPlanes=H.clippingPlanes,N.clipIntersection=H.clipIntersection,N.displacementMap=H.displacementMap,N.displacementScale=H.displacementScale,N.displacementBias=H.displacementBias,N.wireframeLinewidth=H.wireframeLinewidth,N.linewidth=H.linewidth,Q.isPointLight===!0&&N.isMeshDistanceMaterial===!0){let q=n.properties.get(N);q.light=Q}return N}function U(z,H,Q,A,N){if(z.visible===!1)return;if(z.layers.test(H.layers)&&(z.isMesh||z.isLine||z.isPoints)&&(z.castShadow||z.receiveShadow&&N===$c)&&(!z.frustumCulled||i.intersectsObject(z))){z.modelViewMatrix.multiplyMatrices(Q.matrixWorldInverse,z.matrixWorld);let ne=e.update(z),ue=z.material;if(Array.isArray(ue)){let ce=ne.groups;for(let ae=0,oe=ce.length;ae<oe;ae++){let _e=ce[ae],Fe=ue[_e.materialIndex];if(Fe&&Fe.visible){let Te=L(z,Fe,A,N);z.onBeforeShadow(n,z,H,Q,ne,Te,_e),n.renderBufferDirect(Q,null,ne,Te,z,_e),z.onAfterShadow(n,z,H,Q,ne,Te,_e)}}}else if(ue.visible){let ce=L(z,ue,A,N);z.onBeforeShadow(n,z,H,Q,ne,ce,null),n.renderBufferDirect(Q,null,ne,ce,z,null),z.onAfterShadow(n,z,H,Q,ne,ce,null)}}let q=z.children;for(let ne=0,ue=q.length;ne<ue;ne++)U(q[ne],H,Q,A,N)}function B(z){z.target.removeEventListener("dispose",B);for(let Q in f){let A=f[Q],N=z.target.uuid;N in A&&(A[N].dispose(),delete A[N])}}}var g9={[_m]:vm,[xm]:Cm,[ym]:wm,[Ya]:bm,[vm]:_m,[Cm]:xm,[wm]:ym,[bm]:Ya};function _9(n,e){function t(){let $=!1,ke=new Pn,Ee=null,He=new Pn(0,0,0,0);return{setMask:function(ye){Ee!==ye&&!$&&(n.colorMask(ye,ye,ye,ye),Ee=ye)},setLocked:function(ye){$=ye},setClear:function(ye,me,Ie,at,rn){rn===!0&&(ye*=at,me*=at,Ie*=at),ke.set(ye,me,Ie,at),He.equals(ke)===!1&&(n.clearColor(ye,me,Ie,at),He.copy(ke))},reset:function(){$=!1,Ee=null,He.set(-1,0,0,0)}}}function i(){let $=!1,ke=!1,Ee=null,He=null,ye=null;return{setReversed:function(me){if(ke!==me){let Ie=e.get("EXT_clip_control");me?Ie.clipControlEXT(Ie.LOWER_LEFT_EXT,Ie.ZERO_TO_ONE_EXT):Ie.clipControlEXT(Ie.LOWER_LEFT_EXT,Ie.NEGATIVE_ONE_TO_ONE_EXT),ke=me;let at=ye;ye=null,this.setClear(at)}},getReversed:function(){return ke},setTest:function(me){me?ve(n.DEPTH_TEST):We(n.DEPTH_TEST)},setMask:function(me){Ee!==me&&!$&&(n.depthMask(me),Ee=me)},setFunc:function(me){if(ke&&(me=g9[me]),He!==me){switch(me){case _m:n.depthFunc(n.NEVER);break;case vm:n.depthFunc(n.ALWAYS);break;case xm:n.depthFunc(n.LESS);break;case Ya:n.depthFunc(n.LEQUAL);break;case ym:n.depthFunc(n.EQUAL);break;case bm:n.depthFunc(n.GEQUAL);break;case Cm:n.depthFunc(n.GREATER);break;case wm:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}He=me}},setLocked:function(me){$=me},setClear:function(me){ye!==me&&(ke&&(me=1-me),n.clearDepth(me),ye=me)},reset:function(){$=!1,Ee=null,He=null,ye=null,ke=!1}}}function r(){let $=!1,ke=null,Ee=null,He=null,ye=null,me=null,Ie=null,at=null,rn=null;return{setTest:function(Yt){$||(Yt?ve(n.STENCIL_TEST):We(n.STENCIL_TEST))},setMask:function(Yt){ke!==Yt&&!$&&(n.stencilMask(Yt),ke=Yt)},setFunc:function(Yt,dr,Tr){(Ee!==Yt||He!==dr||ye!==Tr)&&(n.stencilFunc(Yt,dr,Tr),Ee=Yt,He=dr,ye=Tr)},setOp:function(Yt,dr,Tr){(me!==Yt||Ie!==dr||at!==Tr)&&(n.stencilOp(Yt,dr,Tr),me=Yt,Ie=dr,at=Tr)},setLocked:function(Yt){$=Yt},setClear:function(Yt){rn!==Yt&&(n.clearStencil(Yt),rn=Yt)},reset:function(){$=!1,ke=null,Ee=null,He=null,ye=null,me=null,Ie=null,at=null,rn=null}}}let o=new t,s=new i,a=new r,u=new WeakMap,f=new WeakMap,p={},h={},v=new WeakMap,x=[],w=null,S=!1,b=null,y=null,V=null,L=null,U=null,B=null,z=null,H=new Et(0,0,0),Q=0,A=!1,N=null,G=null,q=null,ne=null,ue=null,ce=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ae=!1,oe=0,_e=n.getParameter(n.VERSION);_e.indexOf("WebGL")!==-1?(oe=parseFloat(/^WebGL (\d)/.exec(_e)[1]),ae=oe>=1):_e.indexOf("OpenGL ES")!==-1&&(oe=parseFloat(/^OpenGL ES (\d)/.exec(_e)[1]),ae=oe>=2);let Fe=null,Te={},Le=n.getParameter(n.SCISSOR_BOX),ut=n.getParameter(n.VIEWPORT),xt=new Pn().fromArray(Le),Kt=new Pn().fromArray(ut);function qt($,ke,Ee,He){let ye=new Uint8Array(4),me=n.createTexture();n.bindTexture($,me),n.texParameteri($,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri($,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ie=0;Ie<Ee;Ie++)$===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY?n.texImage3D(ke,0,n.RGBA,1,1,He,0,n.RGBA,n.UNSIGNED_BYTE,ye):n.texImage2D(ke+Ie,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ye);return me}let pe={};pe[n.TEXTURE_2D]=qt(n.TEXTURE_2D,n.TEXTURE_2D,1),pe[n.TEXTURE_CUBE_MAP]=qt(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),pe[n.TEXTURE_2D_ARRAY]=qt(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),pe[n.TEXTURE_3D]=qt(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),ve(n.DEPTH_TEST),s.setFunc(Ya),yt(!1),Ut(xb),ve(n.CULL_FACE),pt(To);function ve($){p[$]!==!0&&(n.enable($),p[$]=!0)}function We($){p[$]!==!1&&(n.disable($),p[$]=!1)}function ht($,ke){return h[$]!==ke?(n.bindFramebuffer($,ke),h[$]=ke,$===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=ke),$===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=ke),!0):!1}function Xe($,ke){let Ee=x,He=!1;if($){Ee=v.get(ke),Ee===void 0&&(Ee=[],v.set(ke,Ee));let ye=$.textures;if(Ee.length!==ye.length||Ee[0]!==n.COLOR_ATTACHMENT0){for(let me=0,Ie=ye.length;me<Ie;me++)Ee[me]=n.COLOR_ATTACHMENT0+me;Ee.length=ye.length,He=!0}}else Ee[0]!==n.BACK&&(Ee[0]=n.BACK,He=!0);He&&n.drawBuffers(Ee)}function Rt($){return w!==$?(n.useProgram($),w=$,!0):!1}let wn={[zs]:n.FUNC_ADD,[jE]:n.FUNC_SUBTRACT,[GE]:n.FUNC_REVERSE_SUBTRACT};wn[WE]=n.MIN,wn[$E]=n.MAX;let Ft={[qE]:n.ZERO,[YE]:n.ONE,[XE]:n.SRC_COLOR,[j0]:n.SRC_ALPHA,[t4]:n.SRC_ALPHA_SATURATE,[QE]:n.DST_COLOR,[KE]:n.DST_ALPHA,[ZE]:n.ONE_MINUS_SRC_COLOR,[G0]:n.ONE_MINUS_SRC_ALPHA,[e4]:n.ONE_MINUS_DST_COLOR,[JE]:n.ONE_MINUS_DST_ALPHA,[n4]:n.CONSTANT_COLOR,[i4]:n.ONE_MINUS_CONSTANT_COLOR,[r4]:n.CONSTANT_ALPHA,[o4]:n.ONE_MINUS_CONSTANT_ALPHA};function pt($,ke,Ee,He,ye,me,Ie,at,rn,Yt){if($===To){S===!0&&(We(n.BLEND),S=!1);return}if(S===!1&&(ve(n.BLEND),S=!0),$!==HE){if($!==b||Yt!==A){if((y!==zs||U!==zs)&&(n.blendEquation(n.FUNC_ADD),y=zs,U=zs),Yt)switch($){case qa:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case yb:n.blendFunc(n.ONE,n.ONE);break;case bb:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Cb:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:ct("WebGLState: Invalid blending: ",$);break}else switch($){case qa:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case yb:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case bb:ct("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Cb:ct("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:ct("WebGLState: Invalid blending: ",$);break}V=null,L=null,B=null,z=null,H.set(0,0,0),Q=0,b=$,A=Yt}return}ye=ye||ke,me=me||Ee,Ie=Ie||He,(ke!==y||ye!==U)&&(n.blendEquationSeparate(wn[ke],wn[ye]),y=ke,U=ye),(Ee!==V||He!==L||me!==B||Ie!==z)&&(n.blendFuncSeparate(Ft[Ee],Ft[He],Ft[me],Ft[Ie]),V=Ee,L=He,B=me,z=Ie),(at.equals(H)===!1||rn!==Q)&&(n.blendColor(at.r,at.g,at.b,rn),H.copy(at),Q=rn),b=$,A=!1}function It($,ke){$.side===ur?We(n.CULL_FACE):ve(n.CULL_FACE);let Ee=$.side===Pi;ke&&(Ee=!Ee),yt(Ee),$.blending===qa&&$.transparent===!1?pt(To):pt($.blending,$.blendEquation,$.blendSrc,$.blendDst,$.blendEquationAlpha,$.blendSrcAlpha,$.blendDstAlpha,$.blendColor,$.blendAlpha,$.premultipliedAlpha),s.setFunc($.depthFunc),s.setTest($.depthTest),s.setMask($.depthWrite),o.setMask($.colorWrite);let He=$.stencilWrite;a.setTest(He),He&&(a.setMask($.stencilWriteMask),a.setFunc($.stencilFunc,$.stencilRef,$.stencilFuncMask),a.setOp($.stencilFail,$.stencilZFail,$.stencilZPass)),Mn($.polygonOffset,$.polygonOffsetFactor,$.polygonOffsetUnits),$.alphaToCoverage===!0?ve(n.SAMPLE_ALPHA_TO_COVERAGE):We(n.SAMPLE_ALPHA_TO_COVERAGE)}function yt($){N!==$&&($?n.frontFace(n.CW):n.frontFace(n.CCW),N=$)}function Ut($){$!==UE?(ve(n.CULL_FACE),$!==G&&($===xb?n.cullFace(n.BACK):$===BE?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):We(n.CULL_FACE),G=$}function j($){$!==q&&(ae&&n.lineWidth($),q=$)}function Mn($,ke,Ee){$?(ve(n.POLYGON_OFFSET_FILL),(ne!==ke||ue!==Ee)&&(n.polygonOffset(ke,Ee),ne=ke,ue=Ee)):We(n.POLYGON_OFFSET_FILL)}function Gt($){$?ve(n.SCISSOR_TEST):We(n.SCISSOR_TEST)}function et($){$===void 0&&($=n.TEXTURE0+ce-1),Fe!==$&&(n.activeTexture($),Fe=$)}function ze($,ke,Ee){Ee===void 0&&(Fe===null?Ee=n.TEXTURE0+ce-1:Ee=Fe);let He=Te[Ee];He===void 0&&(He={type:void 0,texture:void 0},Te[Ee]=He),(He.type!==$||He.texture!==ke)&&(Fe!==Ee&&(n.activeTexture(Ee),Fe=Ee),n.bindTexture($,ke||pe[$]),He.type=$,He.texture=ke)}function F(){let $=Te[Fe];$!==void 0&&$.type!==void 0&&(n.bindTexture($.type,null),$.type=void 0,$.texture=void 0)}function M(){try{n.compressedTexImage2D(...arguments)}catch($){ct("WebGLState:",$)}}function W(){try{n.compressedTexImage3D(...arguments)}catch($){ct("WebGLState:",$)}}function se(){try{n.texSubImage2D(...arguments)}catch($){ct("WebGLState:",$)}}function ge(){try{n.texSubImage3D(...arguments)}catch($){ct("WebGLState:",$)}}function le(){try{n.compressedTexSubImage2D(...arguments)}catch($){ct("WebGLState:",$)}}function Ze(){try{n.compressedTexSubImage3D(...arguments)}catch($){ct("WebGLState:",$)}}function Se(){try{n.texStorage2D(...arguments)}catch($){ct("WebGLState:",$)}}function Ke(){try{n.texStorage3D(...arguments)}catch($){ct("WebGLState:",$)}}function rt(){try{n.texImage2D(...arguments)}catch($){ct("WebGLState:",$)}}function Ce(){try{n.texImage3D(...arguments)}catch($){ct("WebGLState:",$)}}function Oe($){xt.equals($)===!1&&(n.scissor($.x,$.y,$.z,$.w),xt.copy($))}function qe($){Kt.equals($)===!1&&(n.viewport($.x,$.y,$.z,$.w),Kt.copy($))}function Je($,ke){let Ee=f.get(ke);Ee===void 0&&(Ee=new WeakMap,f.set(ke,Ee));let He=Ee.get($);He===void 0&&(He=n.getUniformBlockIndex(ke,$.name),Ee.set($,He))}function Re($,ke){let He=f.get(ke).get($);u.get(ke)!==He&&(n.uniformBlockBinding(ke,He,$.__bindingPointIndex),u.set(ke,He))}function bt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},Fe=null,Te={},h={},v=new WeakMap,x=[],w=null,S=!1,b=null,y=null,V=null,L=null,U=null,B=null,z=null,H=new Et(0,0,0),Q=0,A=!1,N=null,G=null,q=null,ne=null,ue=null,xt.set(0,0,n.canvas.width,n.canvas.height),Kt.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:ve,disable:We,bindFramebuffer:ht,drawBuffers:Xe,useProgram:Rt,setBlending:pt,setMaterial:It,setFlipSided:yt,setCullFace:Ut,setLineWidth:j,setPolygonOffset:Mn,setScissorTest:Gt,activeTexture:et,bindTexture:ze,unbindTexture:F,compressedTexImage2D:M,compressedTexImage3D:W,texImage2D:rt,texImage3D:Ce,updateUBOMapping:Je,uniformBlockBinding:Re,texStorage2D:Se,texStorage3D:Ke,texSubImage2D:se,texSubImage3D:ge,compressedTexSubImage2D:le,compressedTexSubImage3D:Ze,scissor:Oe,viewport:qe,reset:bt}}function v9(n,e,t,i,r,o,s){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new dt,p=new WeakMap,h,v=new WeakMap,x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(F,M){return x?new OffscreenCanvas(F,M):Nc("canvas")}function S(F,M,W){let se=1,ge=ze(F);if((ge.width>W||ge.height>W)&&(se=W/Math.max(ge.width,ge.height)),se<1)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap||typeof VideoFrame<"u"&&F instanceof VideoFrame){let le=Math.floor(se*ge.width),Ze=Math.floor(se*ge.height);h===void 0&&(h=w(le,Ze));let Se=M?w(le,Ze):h;return Se.width=le,Se.height=Ze,Se.getContext("2d").drawImage(F,0,0,le,Ze),ot("WebGLRenderer: Texture has been resized from ("+ge.width+"x"+ge.height+") to ("+le+"x"+Ze+")."),Se}else return"data"in F&&ot("WebGLRenderer: Image in DataTexture is too big ("+ge.width+"x"+ge.height+")."),F;return F}function b(F){return F.generateMipmaps}function y(F){n.generateMipmap(F)}function V(F){return F.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:F.isWebGL3DRenderTarget?n.TEXTURE_3D:F.isWebGLArrayRenderTarget||F.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function L(F,M,W,se,ge=!1){if(F!==null){if(n[F]!==void 0)return n[F];ot("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let le=M;if(M===n.RED&&(W===n.FLOAT&&(le=n.R32F),W===n.HALF_FLOAT&&(le=n.R16F),W===n.UNSIGNED_BYTE&&(le=n.R8)),M===n.RED_INTEGER&&(W===n.UNSIGNED_BYTE&&(le=n.R8UI),W===n.UNSIGNED_SHORT&&(le=n.R16UI),W===n.UNSIGNED_INT&&(le=n.R32UI),W===n.BYTE&&(le=n.R8I),W===n.SHORT&&(le=n.R16I),W===n.INT&&(le=n.R32I)),M===n.RG&&(W===n.FLOAT&&(le=n.RG32F),W===n.HALF_FLOAT&&(le=n.RG16F),W===n.UNSIGNED_BYTE&&(le=n.RG8)),M===n.RG_INTEGER&&(W===n.UNSIGNED_BYTE&&(le=n.RG8UI),W===n.UNSIGNED_SHORT&&(le=n.RG16UI),W===n.UNSIGNED_INT&&(le=n.RG32UI),W===n.BYTE&&(le=n.RG8I),W===n.SHORT&&(le=n.RG16I),W===n.INT&&(le=n.RG32I)),M===n.RGB_INTEGER&&(W===n.UNSIGNED_BYTE&&(le=n.RGB8UI),W===n.UNSIGNED_SHORT&&(le=n.RGB16UI),W===n.UNSIGNED_INT&&(le=n.RGB32UI),W===n.BYTE&&(le=n.RGB8I),W===n.SHORT&&(le=n.RGB16I),W===n.INT&&(le=n.RGB32I)),M===n.RGBA_INTEGER&&(W===n.UNSIGNED_BYTE&&(le=n.RGBA8UI),W===n.UNSIGNED_SHORT&&(le=n.RGBA16UI),W===n.UNSIGNED_INT&&(le=n.RGBA32UI),W===n.BYTE&&(le=n.RGBA8I),W===n.SHORT&&(le=n.RGBA16I),W===n.INT&&(le=n.RGBA32I)),M===n.RGB&&(W===n.UNSIGNED_INT_5_9_9_9_REV&&(le=n.RGB9_E5),W===n.UNSIGNED_INT_10F_11F_11F_REV&&(le=n.R11F_G11F_B10F)),M===n.RGBA){let Ze=ge?Nd:jt.getTransfer(se);W===n.FLOAT&&(le=n.RGBA32F),W===n.HALF_FLOAT&&(le=n.RGBA16F),W===n.UNSIGNED_BYTE&&(le=Ze===Qt?n.SRGB8_ALPHA8:n.RGBA8),W===n.UNSIGNED_SHORT_4_4_4_4&&(le=n.RGBA4),W===n.UNSIGNED_SHORT_5_5_5_1&&(le=n.RGB5_A1)}return(le===n.R16F||le===n.R32F||le===n.RG16F||le===n.RG32F||le===n.RGBA16F||le===n.RGBA32F)&&e.get("EXT_color_buffer_float"),le}function U(F,M){let W;return F?M===null||M===Qr||M===Yc?W=n.DEPTH24_STENCIL8:M===eo?W=n.DEPTH32F_STENCIL8:M===qc&&(W=n.DEPTH24_STENCIL8,ot("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):M===null||M===Qr||M===Yc?W=n.DEPTH_COMPONENT24:M===eo?W=n.DEPTH_COMPONENT32F:M===qc&&(W=n.DEPTH_COMPONENT16),W}function B(F,M){return b(F)===!0||F.isFramebufferTexture&&F.minFilter!==li&&F.minFilter!==ui?Math.log2(Math.max(M.width,M.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?M.mipmaps.length:1}function z(F){let M=F.target;M.removeEventListener("dispose",z),Q(M),M.isVideoTexture&&p.delete(M)}function H(F){let M=F.target;M.removeEventListener("dispose",H),N(M)}function Q(F){let M=i.get(F);if(M.__webglInit===void 0)return;let W=F.source,se=v.get(W);if(se){let ge=se[M.__cacheKey];ge.usedTimes--,ge.usedTimes===0&&A(F),Object.keys(se).length===0&&v.delete(W)}i.remove(F)}function A(F){let M=i.get(F);n.deleteTexture(M.__webglTexture);let W=F.source,se=v.get(W);delete se[M.__cacheKey],s.memory.textures--}function N(F){let M=i.get(F);if(F.depthTexture&&(F.depthTexture.dispose(),i.remove(F.depthTexture)),F.isWebGLCubeRenderTarget)for(let se=0;se<6;se++){if(Array.isArray(M.__webglFramebuffer[se]))for(let ge=0;ge<M.__webglFramebuffer[se].length;ge++)n.deleteFramebuffer(M.__webglFramebuffer[se][ge]);else n.deleteFramebuffer(M.__webglFramebuffer[se]);M.__webglDepthbuffer&&n.deleteRenderbuffer(M.__webglDepthbuffer[se])}else{if(Array.isArray(M.__webglFramebuffer))for(let se=0;se<M.__webglFramebuffer.length;se++)n.deleteFramebuffer(M.__webglFramebuffer[se]);else n.deleteFramebuffer(M.__webglFramebuffer);if(M.__webglDepthbuffer&&n.deleteRenderbuffer(M.__webglDepthbuffer),M.__webglMultisampledFramebuffer&&n.deleteFramebuffer(M.__webglMultisampledFramebuffer),M.__webglColorRenderbuffer)for(let se=0;se<M.__webglColorRenderbuffer.length;se++)M.__webglColorRenderbuffer[se]&&n.deleteRenderbuffer(M.__webglColorRenderbuffer[se]);M.__webglDepthRenderbuffer&&n.deleteRenderbuffer(M.__webglDepthRenderbuffer)}let W=F.textures;for(let se=0,ge=W.length;se<ge;se++){let le=i.get(W[se]);le.__webglTexture&&(n.deleteTexture(le.__webglTexture),s.memory.textures--),i.remove(W[se])}i.remove(F)}let G=0;function q(){G=0}function ne(){let F=G;return F>=r.maxTextures&&ot("WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+r.maxTextures),G+=1,F}function ue(F){let M=[];return M.push(F.wrapS),M.push(F.wrapT),M.push(F.wrapR||0),M.push(F.magFilter),M.push(F.minFilter),M.push(F.anisotropy),M.push(F.internalFormat),M.push(F.format),M.push(F.type),M.push(F.generateMipmaps),M.push(F.premultiplyAlpha),M.push(F.flipY),M.push(F.unpackAlignment),M.push(F.colorSpace),M.join()}function ce(F,M){let W=i.get(F);if(F.isVideoTexture&&Gt(F),F.isRenderTargetTexture===!1&&F.isExternalTexture!==!0&&F.version>0&&W.__version!==F.version){let se=F.image;if(se===null)ot("WebGLRenderer: Texture marked for update but no image data found.");else if(se.complete===!1)ot("WebGLRenderer: Texture marked for update but image is incomplete");else{pe(W,F,M);return}}else F.isExternalTexture&&(W.__webglTexture=F.sourceTexture?F.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,W.__webglTexture,n.TEXTURE0+M)}function ae(F,M){let W=i.get(F);if(F.isRenderTargetTexture===!1&&F.version>0&&W.__version!==F.version){pe(W,F,M);return}else F.isExternalTexture&&(W.__webglTexture=F.sourceTexture?F.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,W.__webglTexture,n.TEXTURE0+M)}function oe(F,M){let W=i.get(F);if(F.isRenderTargetTexture===!1&&F.version>0&&W.__version!==F.version){pe(W,F,M);return}t.bindTexture(n.TEXTURE_3D,W.__webglTexture,n.TEXTURE0+M)}function _e(F,M){let W=i.get(F);if(F.isCubeDepthTexture!==!0&&F.version>0&&W.__version!==F.version){ve(W,F,M);return}t.bindTexture(n.TEXTURE_CUBE_MAP,W.__webglTexture,n.TEXTURE0+M)}let Fe={[Xa]:n.REPEAT,[Mo]:n.CLAMP_TO_EDGE,[W0]:n.MIRRORED_REPEAT},Te={[li]:n.NEAREST,[l4]:n.NEAREST_MIPMAP_NEAREST,[rf]:n.NEAREST_MIPMAP_LINEAR,[ui]:n.LINEAR,[Am]:n.LINEAR_MIPMAP_NEAREST,[Ks]:n.LINEAR_MIPMAP_LINEAR},Le={[d4]:n.NEVER,[g4]:n.ALWAYS,[f4]:n.LESS,[fg]:n.LEQUAL,[h4]:n.EQUAL,[hg]:n.GEQUAL,[p4]:n.GREATER,[m4]:n.NOTEQUAL};function ut(F,M){if(M.type===eo&&e.has("OES_texture_float_linear")===!1&&(M.magFilter===ui||M.magFilter===Am||M.magFilter===rf||M.magFilter===Ks||M.minFilter===ui||M.minFilter===Am||M.minFilter===rf||M.minFilter===Ks)&&ot("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(F,n.TEXTURE_WRAP_S,Fe[M.wrapS]),n.texParameteri(F,n.TEXTURE_WRAP_T,Fe[M.wrapT]),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,Fe[M.wrapR]),n.texParameteri(F,n.TEXTURE_MAG_FILTER,Te[M.magFilter]),n.texParameteri(F,n.TEXTURE_MIN_FILTER,Te[M.minFilter]),M.compareFunction&&(n.texParameteri(F,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(F,n.TEXTURE_COMPARE_FUNC,Le[M.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(M.magFilter===li||M.minFilter!==rf&&M.minFilter!==Ks||M.type===eo&&e.has("OES_texture_float_linear")===!1)return;if(M.anisotropy>1||i.get(M).__currentAnisotropy){let W=e.get("EXT_texture_filter_anisotropic");n.texParameterf(F,W.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(M.anisotropy,r.getMaxAnisotropy())),i.get(M).__currentAnisotropy=M.anisotropy}}}function xt(F,M){let W=!1;F.__webglInit===void 0&&(F.__webglInit=!0,M.addEventListener("dispose",z));let se=M.source,ge=v.get(se);ge===void 0&&(ge={},v.set(se,ge));let le=ue(M);if(le!==F.__cacheKey){ge[le]===void 0&&(ge[le]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,W=!0),ge[le].usedTimes++;let Ze=ge[F.__cacheKey];Ze!==void 0&&(ge[F.__cacheKey].usedTimes--,Ze.usedTimes===0&&A(M)),F.__cacheKey=le,F.__webglTexture=ge[le].texture}return W}function Kt(F,M,W){return Math.floor(Math.floor(F/W)/M)}function qt(F,M,W,se){let le=F.updateRanges;if(le.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,M.width,M.height,W,se,M.data);else{le.sort((Ce,Oe)=>Ce.start-Oe.start);let Ze=0;for(let Ce=1;Ce<le.length;Ce++){let Oe=le[Ze],qe=le[Ce],Je=Oe.start+Oe.count,Re=Kt(qe.start,M.width,4),bt=Kt(Oe.start,M.width,4);qe.start<=Je+1&&Re===bt&&Kt(qe.start+qe.count-1,M.width,4)===Re?Oe.count=Math.max(Oe.count,qe.start+qe.count-Oe.start):(++Ze,le[Ze]=qe)}le.length=Ze+1;let Se=n.getParameter(n.UNPACK_ROW_LENGTH),Ke=n.getParameter(n.UNPACK_SKIP_PIXELS),rt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,M.width);for(let Ce=0,Oe=le.length;Ce<Oe;Ce++){let qe=le[Ce],Je=Math.floor(qe.start/4),Re=Math.ceil(qe.count/4),bt=Je%M.width,$=Math.floor(Je/M.width),ke=Re,Ee=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,bt),n.pixelStorei(n.UNPACK_SKIP_ROWS,$),t.texSubImage2D(n.TEXTURE_2D,0,bt,$,ke,Ee,W,se,M.data)}F.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Se),n.pixelStorei(n.UNPACK_SKIP_PIXELS,Ke),n.pixelStorei(n.UNPACK_SKIP_ROWS,rt)}}function pe(F,M,W){let se=n.TEXTURE_2D;(M.isDataArrayTexture||M.isCompressedArrayTexture)&&(se=n.TEXTURE_2D_ARRAY),M.isData3DTexture&&(se=n.TEXTURE_3D);let ge=xt(F,M),le=M.source;t.bindTexture(se,F.__webglTexture,n.TEXTURE0+W);let Ze=i.get(le);if(le.version!==Ze.__version||ge===!0){t.activeTexture(n.TEXTURE0+W);let Se=jt.getPrimaries(jt.workingColorSpace),Ke=M.colorSpace===ls?null:jt.getPrimaries(M.colorSpace),rt=M.colorSpace===ls||Se===Ke?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,M.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,M.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,M.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,rt);let Ce=S(M.image,!1,r.maxTextureSize);Ce=et(M,Ce);let Oe=o.convert(M.format,M.colorSpace),qe=o.convert(M.type),Je=L(M.internalFormat,Oe,qe,M.colorSpace,M.isVideoTexture);ut(se,M);let Re,bt=M.mipmaps,$=M.isVideoTexture!==!0,ke=Ze.__version===void 0||ge===!0,Ee=le.dataReady,He=B(M,Ce);if(M.isDepthTexture)Je=U(M.format===Js,M.type),ke&&($?t.texStorage2D(n.TEXTURE_2D,1,Je,Ce.width,Ce.height):t.texImage2D(n.TEXTURE_2D,0,Je,Ce.width,Ce.height,0,Oe,qe,null));else if(M.isDataTexture)if(bt.length>0){$&&ke&&t.texStorage2D(n.TEXTURE_2D,He,Je,bt[0].width,bt[0].height);for(let ye=0,me=bt.length;ye<me;ye++)Re=bt[ye],$?Ee&&t.texSubImage2D(n.TEXTURE_2D,ye,0,0,Re.width,Re.height,Oe,qe,Re.data):t.texImage2D(n.TEXTURE_2D,ye,Je,Re.width,Re.height,0,Oe,qe,Re.data);M.generateMipmaps=!1}else $?(ke&&t.texStorage2D(n.TEXTURE_2D,He,Je,Ce.width,Ce.height),Ee&&qt(M,Ce,Oe,qe)):t.texImage2D(n.TEXTURE_2D,0,Je,Ce.width,Ce.height,0,Oe,qe,Ce.data);else if(M.isCompressedTexture)if(M.isCompressedArrayTexture){$&&ke&&t.texStorage3D(n.TEXTURE_2D_ARRAY,He,Je,bt[0].width,bt[0].height,Ce.depth);for(let ye=0,me=bt.length;ye<me;ye++)if(Re=bt[ye],M.format!==Ar)if(Oe!==null)if($){if(Ee)if(M.layerUpdates.size>0){let Ie=qb(Re.width,Re.height,M.format,M.type);for(let at of M.layerUpdates){let rn=Re.data.subarray(at*Ie/Re.data.BYTES_PER_ELEMENT,(at+1)*Ie/Re.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ye,0,0,at,Re.width,Re.height,1,Oe,rn)}M.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ye,0,0,0,Re.width,Re.height,Ce.depth,Oe,Re.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ye,Je,Re.width,Re.height,Ce.depth,0,Re.data,0,0);else ot("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else $?Ee&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ye,0,0,0,Re.width,Re.height,Ce.depth,Oe,qe,Re.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ye,Je,Re.width,Re.height,Ce.depth,0,Oe,qe,Re.data)}else{$&&ke&&t.texStorage2D(n.TEXTURE_2D,He,Je,bt[0].width,bt[0].height);for(let ye=0,me=bt.length;ye<me;ye++)Re=bt[ye],M.format!==Ar?Oe!==null?$?Ee&&t.compressedTexSubImage2D(n.TEXTURE_2D,ye,0,0,Re.width,Re.height,Oe,Re.data):t.compressedTexImage2D(n.TEXTURE_2D,ye,Je,Re.width,Re.height,0,Re.data):ot("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$?Ee&&t.texSubImage2D(n.TEXTURE_2D,ye,0,0,Re.width,Re.height,Oe,qe,Re.data):t.texImage2D(n.TEXTURE_2D,ye,Je,Re.width,Re.height,0,Oe,qe,Re.data)}else if(M.isDataArrayTexture)if($){if(ke&&t.texStorage3D(n.TEXTURE_2D_ARRAY,He,Je,Ce.width,Ce.height,Ce.depth),Ee)if(M.layerUpdates.size>0){let ye=qb(Ce.width,Ce.height,M.format,M.type);for(let me of M.layerUpdates){let Ie=Ce.data.subarray(me*ye/Ce.data.BYTES_PER_ELEMENT,(me+1)*ye/Ce.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,me,Ce.width,Ce.height,1,Oe,qe,Ie)}M.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ce.width,Ce.height,Ce.depth,Oe,qe,Ce.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Je,Ce.width,Ce.height,Ce.depth,0,Oe,qe,Ce.data);else if(M.isData3DTexture)$?(ke&&t.texStorage3D(n.TEXTURE_3D,He,Je,Ce.width,Ce.height,Ce.depth),Ee&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ce.width,Ce.height,Ce.depth,Oe,qe,Ce.data)):t.texImage3D(n.TEXTURE_3D,0,Je,Ce.width,Ce.height,Ce.depth,0,Oe,qe,Ce.data);else if(M.isFramebufferTexture){if(ke)if($)t.texStorage2D(n.TEXTURE_2D,He,Je,Ce.width,Ce.height);else{let ye=Ce.width,me=Ce.height;for(let Ie=0;Ie<He;Ie++)t.texImage2D(n.TEXTURE_2D,Ie,Je,ye,me,0,Oe,qe,null),ye>>=1,me>>=1}}else if(bt.length>0){if($&&ke){let ye=ze(bt[0]);t.texStorage2D(n.TEXTURE_2D,He,Je,ye.width,ye.height)}for(let ye=0,me=bt.length;ye<me;ye++)Re=bt[ye],$?Ee&&t.texSubImage2D(n.TEXTURE_2D,ye,0,0,Oe,qe,Re):t.texImage2D(n.TEXTURE_2D,ye,Je,Oe,qe,Re);M.generateMipmaps=!1}else if($){if(ke){let ye=ze(Ce);t.texStorage2D(n.TEXTURE_2D,He,Je,ye.width,ye.height)}Ee&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Oe,qe,Ce)}else t.texImage2D(n.TEXTURE_2D,0,Je,Oe,qe,Ce);b(M)&&y(se),Ze.__version=le.version,M.onUpdate&&M.onUpdate(M)}F.__version=M.version}function ve(F,M,W){if(M.image.length!==6)return;let se=xt(F,M),ge=M.source;t.bindTexture(n.TEXTURE_CUBE_MAP,F.__webglTexture,n.TEXTURE0+W);let le=i.get(ge);if(ge.version!==le.__version||se===!0){t.activeTexture(n.TEXTURE0+W);let Ze=jt.getPrimaries(jt.workingColorSpace),Se=M.colorSpace===ls?null:jt.getPrimaries(M.colorSpace),Ke=M.colorSpace===ls||Ze===Se?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,M.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,M.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,M.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ke);let rt=M.isCompressedTexture||M.image[0].isCompressedTexture,Ce=M.image[0]&&M.image[0].isDataTexture,Oe=[];for(let me=0;me<6;me++)!rt&&!Ce?Oe[me]=S(M.image[me],!0,r.maxCubemapSize):Oe[me]=Ce?M.image[me].image:M.image[me],Oe[me]=et(M,Oe[me]);let qe=Oe[0],Je=o.convert(M.format,M.colorSpace),Re=o.convert(M.type),bt=L(M.internalFormat,Je,Re,M.colorSpace),$=M.isVideoTexture!==!0,ke=le.__version===void 0||se===!0,Ee=ge.dataReady,He=B(M,qe);ut(n.TEXTURE_CUBE_MAP,M);let ye;if(rt){$&&ke&&t.texStorage2D(n.TEXTURE_CUBE_MAP,He,bt,qe.width,qe.height);for(let me=0;me<6;me++){ye=Oe[me].mipmaps;for(let Ie=0;Ie<ye.length;Ie++){let at=ye[Ie];M.format!==Ar?Je!==null?$?Ee&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ie,0,0,at.width,at.height,Je,at.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ie,bt,at.width,at.height,0,at.data):ot("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ie,0,0,at.width,at.height,Je,Re,at.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ie,bt,at.width,at.height,0,Je,Re,at.data)}}}else{if(ye=M.mipmaps,$&&ke){ye.length>0&&He++;let me=ze(Oe[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,He,bt,me.width,me.height)}for(let me=0;me<6;me++)if(Ce){$?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,0,0,Oe[me].width,Oe[me].height,Je,Re,Oe[me].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,bt,Oe[me].width,Oe[me].height,0,Je,Re,Oe[me].data);for(let Ie=0;Ie<ye.length;Ie++){let rn=ye[Ie].image[me].image;$?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ie+1,0,0,rn.width,rn.height,Je,Re,rn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ie+1,bt,rn.width,rn.height,0,Je,Re,rn.data)}}else{$?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,0,0,Je,Re,Oe[me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,bt,Je,Re,Oe[me]);for(let Ie=0;Ie<ye.length;Ie++){let at=ye[Ie];$?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ie+1,0,0,Je,Re,at.image[me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ie+1,bt,Je,Re,at.image[me])}}}b(M)&&y(n.TEXTURE_CUBE_MAP),le.__version=ge.version,M.onUpdate&&M.onUpdate(M)}F.__version=M.version}function We(F,M,W,se,ge,le){let Ze=o.convert(W.format,W.colorSpace),Se=o.convert(W.type),Ke=L(W.internalFormat,Ze,Se,W.colorSpace),rt=i.get(M),Ce=i.get(W);if(Ce.__renderTarget=M,!rt.__hasExternalTextures){let Oe=Math.max(1,M.width>>le),qe=Math.max(1,M.height>>le);ge===n.TEXTURE_3D||ge===n.TEXTURE_2D_ARRAY?t.texImage3D(ge,le,Ke,Oe,qe,M.depth,0,Ze,Se,null):t.texImage2D(ge,le,Ke,Oe,qe,0,Ze,Se,null)}t.bindFramebuffer(n.FRAMEBUFFER,F),Mn(M)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,se,ge,Ce.__webglTexture,0,j(M)):(ge===n.TEXTURE_2D||ge>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ge<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,se,ge,Ce.__webglTexture,le),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ht(F,M,W){if(n.bindRenderbuffer(n.RENDERBUFFER,F),M.depthBuffer){let se=M.depthTexture,ge=se&&se.isDepthTexture?se.type:null,le=U(M.stencilBuffer,ge),Ze=M.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;Mn(M)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,j(M),le,M.width,M.height):W?n.renderbufferStorageMultisample(n.RENDERBUFFER,j(M),le,M.width,M.height):n.renderbufferStorage(n.RENDERBUFFER,le,M.width,M.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ze,n.RENDERBUFFER,F)}else{let se=M.textures;for(let ge=0;ge<se.length;ge++){let le=se[ge],Ze=o.convert(le.format,le.colorSpace),Se=o.convert(le.type),Ke=L(le.internalFormat,Ze,Se,le.colorSpace);Mn(M)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,j(M),Ke,M.width,M.height):W?n.renderbufferStorageMultisample(n.RENDERBUFFER,j(M),Ke,M.width,M.height):n.renderbufferStorage(n.RENDERBUFFER,Ke,M.width,M.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Xe(F,M,W){let se=M.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,F),!(M.depthTexture&&M.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let ge=i.get(M.depthTexture);if(ge.__renderTarget=M,(!ge.__webglTexture||M.depthTexture.image.width!==M.width||M.depthTexture.image.height!==M.height)&&(M.depthTexture.image.width=M.width,M.depthTexture.image.height=M.height,M.depthTexture.needsUpdate=!0),se){if(ge.__webglInit===void 0&&(ge.__webglInit=!0,M.depthTexture.addEventListener("dispose",z)),ge.__webglTexture===void 0){ge.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,ge.__webglTexture),ut(n.TEXTURE_CUBE_MAP,M.depthTexture);let rt=o.convert(M.depthTexture.format),Ce=o.convert(M.depthTexture.type),Oe;M.depthTexture.format===So?Oe=n.DEPTH_COMPONENT24:M.depthTexture.format===Js&&(Oe=n.DEPTH24_STENCIL8);for(let qe=0;qe<6;qe++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,Oe,M.width,M.height,0,rt,Ce,null)}}else ce(M.depthTexture,0);let le=ge.__webglTexture,Ze=j(M),Se=se?n.TEXTURE_CUBE_MAP_POSITIVE_X+W:n.TEXTURE_2D,Ke=M.depthTexture.format===Js?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(M.depthTexture.format===So)Mn(M)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ke,Se,le,0,Ze):n.framebufferTexture2D(n.FRAMEBUFFER,Ke,Se,le,0);else if(M.depthTexture.format===Js)Mn(M)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ke,Se,le,0,Ze):n.framebufferTexture2D(n.FRAMEBUFFER,Ke,Se,le,0);else throw new Error("Unknown depthTexture format")}function Rt(F){let M=i.get(F),W=F.isWebGLCubeRenderTarget===!0;if(M.__boundDepthTexture!==F.depthTexture){let se=F.depthTexture;if(M.__depthDisposeCallback&&M.__depthDisposeCallback(),se){let ge=()=>{delete M.__boundDepthTexture,delete M.__depthDisposeCallback,se.removeEventListener("dispose",ge)};se.addEventListener("dispose",ge),M.__depthDisposeCallback=ge}M.__boundDepthTexture=se}if(F.depthTexture&&!M.__autoAllocateDepthBuffer)if(W)for(let se=0;se<6;se++)Xe(M.__webglFramebuffer[se],F,se);else{let se=F.texture.mipmaps;se&&se.length>0?Xe(M.__webglFramebuffer[0],F,0):Xe(M.__webglFramebuffer,F,0)}else if(W){M.__webglDepthbuffer=[];for(let se=0;se<6;se++)if(t.bindFramebuffer(n.FRAMEBUFFER,M.__webglFramebuffer[se]),M.__webglDepthbuffer[se]===void 0)M.__webglDepthbuffer[se]=n.createRenderbuffer(),ht(M.__webglDepthbuffer[se],F,!1);else{let ge=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,le=M.__webglDepthbuffer[se];n.bindRenderbuffer(n.RENDERBUFFER,le),n.framebufferRenderbuffer(n.FRAMEBUFFER,ge,n.RENDERBUFFER,le)}}else{let se=F.texture.mipmaps;if(se&&se.length>0?t.bindFramebuffer(n.FRAMEBUFFER,M.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,M.__webglFramebuffer),M.__webglDepthbuffer===void 0)M.__webglDepthbuffer=n.createRenderbuffer(),ht(M.__webglDepthbuffer,F,!1);else{let ge=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,le=M.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,le),n.framebufferRenderbuffer(n.FRAMEBUFFER,ge,n.RENDERBUFFER,le)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function wn(F,M,W){let se=i.get(F);M!==void 0&&We(se.__webglFramebuffer,F,F.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),W!==void 0&&Rt(F)}function Ft(F){let M=F.texture,W=i.get(F),se=i.get(M);F.addEventListener("dispose",H);let ge=F.textures,le=F.isWebGLCubeRenderTarget===!0,Ze=ge.length>1;if(Ze||(se.__webglTexture===void 0&&(se.__webglTexture=n.createTexture()),se.__version=M.version,s.memory.textures++),le){W.__webglFramebuffer=[];for(let Se=0;Se<6;Se++)if(M.mipmaps&&M.mipmaps.length>0){W.__webglFramebuffer[Se]=[];for(let Ke=0;Ke<M.mipmaps.length;Ke++)W.__webglFramebuffer[Se][Ke]=n.createFramebuffer()}else W.__webglFramebuffer[Se]=n.createFramebuffer()}else{if(M.mipmaps&&M.mipmaps.length>0){W.__webglFramebuffer=[];for(let Se=0;Se<M.mipmaps.length;Se++)W.__webglFramebuffer[Se]=n.createFramebuffer()}else W.__webglFramebuffer=n.createFramebuffer();if(Ze)for(let Se=0,Ke=ge.length;Se<Ke;Se++){let rt=i.get(ge[Se]);rt.__webglTexture===void 0&&(rt.__webglTexture=n.createTexture(),s.memory.textures++)}if(F.samples>0&&Mn(F)===!1){W.__webglMultisampledFramebuffer=n.createFramebuffer(),W.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,W.__webglMultisampledFramebuffer);for(let Se=0;Se<ge.length;Se++){let Ke=ge[Se];W.__webglColorRenderbuffer[Se]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,W.__webglColorRenderbuffer[Se]);let rt=o.convert(Ke.format,Ke.colorSpace),Ce=o.convert(Ke.type),Oe=L(Ke.internalFormat,rt,Ce,Ke.colorSpace,F.isXRRenderTarget===!0),qe=j(F);n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,Oe,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Se,n.RENDERBUFFER,W.__webglColorRenderbuffer[Se])}n.bindRenderbuffer(n.RENDERBUFFER,null),F.depthBuffer&&(W.__webglDepthRenderbuffer=n.createRenderbuffer(),ht(W.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(le){t.bindTexture(n.TEXTURE_CUBE_MAP,se.__webglTexture),ut(n.TEXTURE_CUBE_MAP,M);for(let Se=0;Se<6;Se++)if(M.mipmaps&&M.mipmaps.length>0)for(let Ke=0;Ke<M.mipmaps.length;Ke++)We(W.__webglFramebuffer[Se][Ke],F,M,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,Ke);else We(W.__webglFramebuffer[Se],F,M,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0);b(M)&&y(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ze){for(let Se=0,Ke=ge.length;Se<Ke;Se++){let rt=ge[Se],Ce=i.get(rt),Oe=n.TEXTURE_2D;(F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(Oe=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Oe,Ce.__webglTexture),ut(Oe,rt),We(W.__webglFramebuffer,F,rt,n.COLOR_ATTACHMENT0+Se,Oe,0),b(rt)&&y(Oe)}t.unbindTexture()}else{let Se=n.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(Se=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Se,se.__webglTexture),ut(Se,M),M.mipmaps&&M.mipmaps.length>0)for(let Ke=0;Ke<M.mipmaps.length;Ke++)We(W.__webglFramebuffer[Ke],F,M,n.COLOR_ATTACHMENT0,Se,Ke);else We(W.__webglFramebuffer,F,M,n.COLOR_ATTACHMENT0,Se,0);b(M)&&y(Se),t.unbindTexture()}F.depthBuffer&&Rt(F)}function pt(F){let M=F.textures;for(let W=0,se=M.length;W<se;W++){let ge=M[W];if(b(ge)){let le=V(F),Ze=i.get(ge).__webglTexture;t.bindTexture(le,Ze),y(le),t.unbindTexture()}}}let It=[],yt=[];function Ut(F){if(F.samples>0){if(Mn(F)===!1){let M=F.textures,W=F.width,se=F.height,ge=n.COLOR_BUFFER_BIT,le=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ze=i.get(F),Se=M.length>1;if(Se)for(let rt=0;rt<M.length;rt++)t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+rt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+rt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer);let Ke=F.texture.mipmaps;Ke&&Ke.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer);for(let rt=0;rt<M.length;rt++){if(F.resolveDepthBuffer&&(F.depthBuffer&&(ge|=n.DEPTH_BUFFER_BIT),F.stencilBuffer&&F.resolveStencilBuffer&&(ge|=n.STENCIL_BUFFER_BIT)),Se){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[rt]);let Ce=i.get(M[rt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ce,0)}n.blitFramebuffer(0,0,W,se,0,0,W,se,ge,n.NEAREST),u===!0&&(It.length=0,yt.length=0,It.push(n.COLOR_ATTACHMENT0+rt),F.depthBuffer&&F.resolveDepthBuffer===!1&&(It.push(le),yt.push(le),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,yt)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,It))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Se)for(let rt=0;rt<M.length;rt++){t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+rt,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[rt]);let Ce=i.get(M[rt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+rt,n.TEXTURE_2D,Ce,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer)}else if(F.depthBuffer&&F.resolveDepthBuffer===!1&&u){let M=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[M])}}}function j(F){return Math.min(r.maxSamples,F.samples)}function Mn(F){let M=i.get(F);return F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&M.__useRenderToTexture!==!1}function Gt(F){let M=s.render.frame;p.get(F)!==M&&(p.set(F,M),F.update())}function et(F,M){let W=F.colorSpace,se=F.format,ge=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||W!==Za&&W!==ls&&(jt.getTransfer(W)===Qt?(se!==Ar||ge!==$i)&&ot("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):ct("WebGLTextures: Unsupported texture color space:",W)),M}function ze(F){return typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement?(f.width=F.naturalWidth||F.width,f.height=F.naturalHeight||F.height):typeof VideoFrame<"u"&&F instanceof VideoFrame?(f.width=F.displayWidth,f.height=F.displayHeight):(f.width=F.width,f.height=F.height),f}this.allocateTextureUnit=ne,this.resetTextureUnits=q,this.setTexture2D=ce,this.setTexture2DArray=ae,this.setTexture3D=oe,this.setTextureCube=_e,this.rebindTextures=wn,this.setupRenderTarget=Ft,this.updateRenderTargetMipmap=pt,this.updateMultisampleRenderTarget=Ut,this.setupDepthRenderbuffer=Rt,this.setupFrameBufferTexture=We,this.useMultisampledRTT=Mn,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function x9(n,e){function t(i,r=ls){let o,s=jt.getTransfer(r);if(i===$i)return n.UNSIGNED_BYTE;if(i===Dm)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Pm)return n.UNSIGNED_SHORT_5_5_5_1;if(i===Ob)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Rb)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===Pb)return n.BYTE;if(i===Ib)return n.SHORT;if(i===qc)return n.UNSIGNED_SHORT;if(i===Tm)return n.INT;if(i===Qr)return n.UNSIGNED_INT;if(i===eo)return n.FLOAT;if(i===Do)return n.HALF_FLOAT;if(i===kb)return n.ALPHA;if(i===Nb)return n.RGB;if(i===Ar)return n.RGBA;if(i===So)return n.DEPTH_COMPONENT;if(i===Js)return n.DEPTH_STENCIL;if(i===Fb)return n.RED;if(i===Im)return n.RED_INTEGER;if(i===tl)return n.RG;if(i===Om)return n.RG_INTEGER;if(i===Rm)return n.RGBA_INTEGER;if(i===of||i===sf||i===af||i===lf)if(s===Qt)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===of)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===sf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===af)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===lf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===of)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===sf)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===af)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===lf)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===km||i===Nm||i===Fm||i===Lm)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===km)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Nm)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Fm)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Lm)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Vm||i===Um||i===Bm||i===zm||i===Hm||i===jm||i===Gm)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(i===Vm||i===Um)return s===Qt?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===Bm)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC;if(i===zm)return o.COMPRESSED_R11_EAC;if(i===Hm)return o.COMPRESSED_SIGNED_R11_EAC;if(i===jm)return o.COMPRESSED_RG11_EAC;if(i===Gm)return o.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===Wm||i===$m||i===qm||i===Ym||i===Xm||i===Zm||i===Km||i===Jm||i===Qm||i===eg||i===tg||i===ng||i===ig||i===rg)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(i===Wm)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===$m)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===qm)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Ym)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Xm)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Zm)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Km)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Jm)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Qm)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===eg)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===tg)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===ng)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===ig)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===rg)return s===Qt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===og||i===sg||i===ag)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(i===og)return s===Qt?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===sg)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===ag)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===lg||i===cg||i===ug||i===dg)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(i===lg)return o.COMPRESSED_RED_RGTC1_EXT;if(i===cg)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===ug)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===dg)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Yc?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}var y9=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,b9=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,a1=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){let i=new $d(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,i=new lr({vertexShader:y9,fragmentShader:b9,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Vt(new Ao(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},l1=class extends Eo{constructor(e,t){super();let i=this,r=null,o=1,s=null,a="local-floor",u=1,f=null,p=null,h=null,v=null,x=null,w=null,S=typeof XRWebGLBinding<"u",b=new a1,y={},V=t.getContextAttributes(),L=null,U=null,B=[],z=[],H=new dt,Q=null,A=new Ci;A.viewport=new Pn;let N=new Ci;N.viewport=new Pn;let G=[A,N],q=new mm,ne=null,ue=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(pe){let ve=B[pe];return ve===void 0&&(ve=new Bc,B[pe]=ve),ve.getTargetRaySpace()},this.getControllerGrip=function(pe){let ve=B[pe];return ve===void 0&&(ve=new Bc,B[pe]=ve),ve.getGripSpace()},this.getHand=function(pe){let ve=B[pe];return ve===void 0&&(ve=new Bc,B[pe]=ve),ve.getHandSpace()};function ce(pe){let ve=z.indexOf(pe.inputSource);if(ve===-1)return;let We=B[ve];We!==void 0&&(We.update(pe.inputSource,pe.frame,f||s),We.dispatchEvent({type:pe.type,data:pe.inputSource}))}function ae(){r.removeEventListener("select",ce),r.removeEventListener("selectstart",ce),r.removeEventListener("selectend",ce),r.removeEventListener("squeeze",ce),r.removeEventListener("squeezestart",ce),r.removeEventListener("squeezeend",ce),r.removeEventListener("end",ae),r.removeEventListener("inputsourceschange",oe);for(let pe=0;pe<B.length;pe++){let ve=z[pe];ve!==null&&(z[pe]=null,B[pe].disconnect(ve))}ne=null,ue=null,b.reset();for(let pe in y)delete y[pe];e.setRenderTarget(L),x=null,v=null,h=null,r=null,U=null,qt.stop(),i.isPresenting=!1,e.setPixelRatio(Q),e.setSize(H.width,H.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(pe){o=pe,i.isPresenting===!0&&ot("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(pe){a=pe,i.isPresenting===!0&&ot("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||s},this.setReferenceSpace=function(pe){f=pe},this.getBaseLayer=function(){return v!==null?v:x},this.getBinding=function(){return h===null&&S&&(h=new XRWebGLBinding(r,t)),h},this.getFrame=function(){return w},this.getSession=function(){return r},this.setSession=function(pe){return $t(this,null,function*(){if(r=pe,r!==null){if(L=e.getRenderTarget(),r.addEventListener("select",ce),r.addEventListener("selectstart",ce),r.addEventListener("selectend",ce),r.addEventListener("squeeze",ce),r.addEventListener("squeezestart",ce),r.addEventListener("squeezeend",ce),r.addEventListener("end",ae),r.addEventListener("inputsourceschange",oe),V.xrCompatible!==!0&&(yield t.makeXRCompatible()),Q=e.getPixelRatio(),e.getSize(H),S&&"createProjectionLayer"in XRWebGLBinding.prototype){let We=null,ht=null,Xe=null;V.depth&&(Xe=V.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,We=V.stencil?Js:So,ht=V.stencil?Yc:Qr);let Rt={colorFormat:t.RGBA8,depthFormat:Xe,scaleFactor:o};h=this.getBinding(),v=h.createProjectionLayer(Rt),r.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),U=new ar(v.textureWidth,v.textureHeight,{format:Ar,type:$i,depthTexture:new Ws(v.textureWidth,v.textureHeight,ht,void 0,void 0,void 0,void 0,void 0,void 0,We),stencilBuffer:V.stencil,colorSpace:e.outputColorSpace,samples:V.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{let We={antialias:V.antialias,alpha:!0,depth:V.depth,stencil:V.stencil,framebufferScaleFactor:o};x=new XRWebGLLayer(r,t,We),r.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),U=new ar(x.framebufferWidth,x.framebufferHeight,{format:Ar,type:$i,colorSpace:e.outputColorSpace,stencilBuffer:V.stencil,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}U.isXRRenderTarget=!0,this.setFoveation(u),f=null,s=yield r.requestReferenceSpace(a),qt.setContext(r),qt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return b.getDepthTexture()};function oe(pe){for(let ve=0;ve<pe.removed.length;ve++){let We=pe.removed[ve],ht=z.indexOf(We);ht>=0&&(z[ht]=null,B[ht].disconnect(We))}for(let ve=0;ve<pe.added.length;ve++){let We=pe.added[ve],ht=z.indexOf(We);if(ht===-1){for(let Rt=0;Rt<B.length;Rt++)if(Rt>=z.length){z.push(We),ht=Rt;break}else if(z[Rt]===null){z[Rt]=We,ht=Rt;break}if(ht===-1)break}let Xe=B[ht];Xe&&Xe.connect(We)}}let _e=new Z,Fe=new Z;function Te(pe,ve,We){_e.setFromMatrixPosition(ve.matrixWorld),Fe.setFromMatrixPosition(We.matrixWorld);let ht=_e.distanceTo(Fe),Xe=ve.projectionMatrix.elements,Rt=We.projectionMatrix.elements,wn=Xe[14]/(Xe[10]-1),Ft=Xe[14]/(Xe[10]+1),pt=(Xe[9]+1)/Xe[5],It=(Xe[9]-1)/Xe[5],yt=(Xe[8]-1)/Xe[0],Ut=(Rt[8]+1)/Rt[0],j=wn*yt,Mn=wn*Ut,Gt=ht/(-yt+Ut),et=Gt*-yt;if(ve.matrixWorld.decompose(pe.position,pe.quaternion,pe.scale),pe.translateX(et),pe.translateZ(Gt),pe.matrixWorld.compose(pe.position,pe.quaternion,pe.scale),pe.matrixWorldInverse.copy(pe.matrixWorld).invert(),Xe[10]===-1)pe.projectionMatrix.copy(ve.projectionMatrix),pe.projectionMatrixInverse.copy(ve.projectionMatrixInverse);else{let ze=wn+Gt,F=Ft+Gt,M=j-et,W=Mn+(ht-et),se=pt*Ft/F*ze,ge=It*Ft/F*ze;pe.projectionMatrix.makePerspective(M,W,se,ge,ze,F),pe.projectionMatrixInverse.copy(pe.projectionMatrix).invert()}}function Le(pe,ve){ve===null?pe.matrixWorld.copy(pe.matrix):pe.matrixWorld.multiplyMatrices(ve.matrixWorld,pe.matrix),pe.matrixWorldInverse.copy(pe.matrixWorld).invert()}this.updateCamera=function(pe){if(r===null)return;let ve=pe.near,We=pe.far;b.texture!==null&&(b.depthNear>0&&(ve=b.depthNear),b.depthFar>0&&(We=b.depthFar)),q.near=N.near=A.near=ve,q.far=N.far=A.far=We,(ne!==q.near||ue!==q.far)&&(r.updateRenderState({depthNear:q.near,depthFar:q.far}),ne=q.near,ue=q.far),q.layers.mask=pe.layers.mask|6,A.layers.mask=q.layers.mask&3,N.layers.mask=q.layers.mask&5;let ht=pe.parent,Xe=q.cameras;Le(q,ht);for(let Rt=0;Rt<Xe.length;Rt++)Le(Xe[Rt],ht);Xe.length===2?Te(q,A,N):q.projectionMatrix.copy(A.projectionMatrix),ut(pe,q,ht)};function ut(pe,ve,We){We===null?pe.matrix.copy(ve.matrixWorld):(pe.matrix.copy(We.matrixWorld),pe.matrix.invert(),pe.matrix.multiply(ve.matrixWorld)),pe.matrix.decompose(pe.position,pe.quaternion,pe.scale),pe.updateMatrixWorld(!0),pe.projectionMatrix.copy(ve.projectionMatrix),pe.projectionMatrixInverse.copy(ve.projectionMatrixInverse),pe.isPerspectiveCamera&&(pe.fov=Vc*2*Math.atan(1/pe.projectionMatrix.elements[5]),pe.zoom=1)}this.getCamera=function(){return q},this.getFoveation=function(){if(!(v===null&&x===null))return u},this.setFoveation=function(pe){u=pe,v!==null&&(v.fixedFoveation=pe),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=pe)},this.hasDepthSensing=function(){return b.texture!==null},this.getDepthSensingMesh=function(){return b.getMesh(q)},this.getCameraTexture=function(pe){return y[pe]};let xt=null;function Kt(pe,ve){if(p=ve.getViewerPose(f||s),w=ve,p!==null){let We=p.views;x!==null&&(e.setRenderTargetFramebuffer(U,x.framebuffer),e.setRenderTarget(U));let ht=!1;We.length!==q.cameras.length&&(q.cameras.length=0,ht=!0);for(let Ft=0;Ft<We.length;Ft++){let pt=We[Ft],It=null;if(x!==null)It=x.getViewport(pt);else{let Ut=h.getViewSubImage(v,pt);It=Ut.viewport,Ft===0&&(e.setRenderTargetTextures(U,Ut.colorTexture,Ut.depthStencilTexture),e.setRenderTarget(U))}let yt=G[Ft];yt===void 0&&(yt=new Ci,yt.layers.enable(Ft),yt.viewport=new Pn,G[Ft]=yt),yt.matrix.fromArray(pt.transform.matrix),yt.matrix.decompose(yt.position,yt.quaternion,yt.scale),yt.projectionMatrix.fromArray(pt.projectionMatrix),yt.projectionMatrixInverse.copy(yt.projectionMatrix).invert(),yt.viewport.set(It.x,It.y,It.width,It.height),Ft===0&&(q.matrix.copy(yt.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale)),ht===!0&&q.cameras.push(yt)}let Xe=r.enabledFeatures;if(Xe&&Xe.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&S){h=i.getBinding();let Ft=h.getDepthInformation(We[0]);Ft&&Ft.isValid&&Ft.texture&&b.init(Ft,r.renderState)}if(Xe&&Xe.includes("camera-access")&&S){e.state.unbindTexture(),h=i.getBinding();for(let Ft=0;Ft<We.length;Ft++){let pt=We[Ft].camera;if(pt){let It=y[pt];It||(It=new $d,y[pt]=It);let yt=h.getCameraImage(pt);It.sourceTexture=yt}}}}for(let We=0;We<B.length;We++){let ht=z[We],Xe=B[We];ht!==null&&Xe!==void 0&&Xe.update(ht,ve,f||s)}xt&&xt(pe,ve),ve.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ve}),w=null}let qt=new G4;qt.setAnimationLoop(Kt),this.setAnimationLoop=function(pe){xt=pe},this.dispose=function(){}}},rl=new js,C9=new Dn;function w9(n,e){function t(b,y){b.matrixAutoUpdate===!0&&b.updateMatrix(),y.value.copy(b.matrix)}function i(b,y){y.color.getRGB(b.fogColor.value,jb(n)),y.isFog?(b.fogNear.value=y.near,b.fogFar.value=y.far):y.isFogExp2&&(b.fogDensity.value=y.density)}function r(b,y,V,L,U){y.isMeshBasicMaterial||y.isMeshLambertMaterial?o(b,y):y.isMeshToonMaterial?(o(b,y),h(b,y)):y.isMeshPhongMaterial?(o(b,y),p(b,y)):y.isMeshStandardMaterial?(o(b,y),v(b,y),y.isMeshPhysicalMaterial&&x(b,y,U)):y.isMeshMatcapMaterial?(o(b,y),w(b,y)):y.isMeshDepthMaterial?o(b,y):y.isMeshDistanceMaterial?(o(b,y),S(b,y)):y.isMeshNormalMaterial?o(b,y):y.isLineBasicMaterial?(s(b,y),y.isLineDashedMaterial&&a(b,y)):y.isPointsMaterial?u(b,y,V,L):y.isSpriteMaterial?f(b,y):y.isShadowMaterial?(b.color.value.copy(y.color),b.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function o(b,y){b.opacity.value=y.opacity,y.color&&b.diffuse.value.copy(y.color),y.emissive&&b.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(b.map.value=y.map,t(y.map,b.mapTransform)),y.alphaMap&&(b.alphaMap.value=y.alphaMap,t(y.alphaMap,b.alphaMapTransform)),y.bumpMap&&(b.bumpMap.value=y.bumpMap,t(y.bumpMap,b.bumpMapTransform),b.bumpScale.value=y.bumpScale,y.side===Pi&&(b.bumpScale.value*=-1)),y.normalMap&&(b.normalMap.value=y.normalMap,t(y.normalMap,b.normalMapTransform),b.normalScale.value.copy(y.normalScale),y.side===Pi&&b.normalScale.value.negate()),y.displacementMap&&(b.displacementMap.value=y.displacementMap,t(y.displacementMap,b.displacementMapTransform),b.displacementScale.value=y.displacementScale,b.displacementBias.value=y.displacementBias),y.emissiveMap&&(b.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,b.emissiveMapTransform)),y.specularMap&&(b.specularMap.value=y.specularMap,t(y.specularMap,b.specularMapTransform)),y.alphaTest>0&&(b.alphaTest.value=y.alphaTest);let V=e.get(y),L=V.envMap,U=V.envMapRotation;L&&(b.envMap.value=L,rl.copy(U),rl.x*=-1,rl.y*=-1,rl.z*=-1,L.isCubeTexture&&L.isRenderTargetTexture===!1&&(rl.y*=-1,rl.z*=-1),b.envMapRotation.value.setFromMatrix4(C9.makeRotationFromEuler(rl)),b.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=y.reflectivity,b.ior.value=y.ior,b.refractionRatio.value=y.refractionRatio),y.lightMap&&(b.lightMap.value=y.lightMap,b.lightMapIntensity.value=y.lightMapIntensity,t(y.lightMap,b.lightMapTransform)),y.aoMap&&(b.aoMap.value=y.aoMap,b.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,b.aoMapTransform))}function s(b,y){b.diffuse.value.copy(y.color),b.opacity.value=y.opacity,y.map&&(b.map.value=y.map,t(y.map,b.mapTransform))}function a(b,y){b.dashSize.value=y.dashSize,b.totalSize.value=y.dashSize+y.gapSize,b.scale.value=y.scale}function u(b,y,V,L){b.diffuse.value.copy(y.color),b.opacity.value=y.opacity,b.size.value=y.size*V,b.scale.value=L*.5,y.map&&(b.map.value=y.map,t(y.map,b.uvTransform)),y.alphaMap&&(b.alphaMap.value=y.alphaMap,t(y.alphaMap,b.alphaMapTransform)),y.alphaTest>0&&(b.alphaTest.value=y.alphaTest)}function f(b,y){b.diffuse.value.copy(y.color),b.opacity.value=y.opacity,b.rotation.value=y.rotation,y.map&&(b.map.value=y.map,t(y.map,b.mapTransform)),y.alphaMap&&(b.alphaMap.value=y.alphaMap,t(y.alphaMap,b.alphaMapTransform)),y.alphaTest>0&&(b.alphaTest.value=y.alphaTest)}function p(b,y){b.specular.value.copy(y.specular),b.shininess.value=Math.max(y.shininess,1e-4)}function h(b,y){y.gradientMap&&(b.gradientMap.value=y.gradientMap)}function v(b,y){b.metalness.value=y.metalness,y.metalnessMap&&(b.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,b.metalnessMapTransform)),b.roughness.value=y.roughness,y.roughnessMap&&(b.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,b.roughnessMapTransform)),y.envMap&&(b.envMapIntensity.value=y.envMapIntensity)}function x(b,y,V){b.ior.value=y.ior,y.sheen>0&&(b.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),b.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(b.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,b.sheenColorMapTransform)),y.sheenRoughnessMap&&(b.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,b.sheenRoughnessMapTransform))),y.clearcoat>0&&(b.clearcoat.value=y.clearcoat,b.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(b.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,b.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(b.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===Pi&&b.clearcoatNormalScale.value.negate())),y.dispersion>0&&(b.dispersion.value=y.dispersion),y.iridescence>0&&(b.iridescence.value=y.iridescence,b.iridescenceIOR.value=y.iridescenceIOR,b.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(b.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,b.iridescenceMapTransform)),y.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),y.transmission>0&&(b.transmission.value=y.transmission,b.transmissionSamplerMap.value=V.texture,b.transmissionSamplerSize.value.set(V.width,V.height),y.transmissionMap&&(b.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,b.transmissionMapTransform)),b.thickness.value=y.thickness,y.thicknessMap&&(b.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=y.attenuationDistance,b.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(b.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(b.anisotropyMap.value=y.anisotropyMap,t(y.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=y.specularIntensity,b.specularColor.value.copy(y.specularColor),y.specularColorMap&&(b.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,b.specularColorMapTransform)),y.specularIntensityMap&&(b.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,b.specularIntensityMapTransform))}function w(b,y){y.matcap&&(b.matcap.value=y.matcap)}function S(b,y){let V=e.get(y).light;b.referencePosition.value.setFromMatrixPosition(V.matrixWorld),b.nearDistance.value=V.shadow.camera.near,b.farDistance.value=V.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function M9(n,e,t,i){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function u(V,L){let U=L.program;i.uniformBlockBinding(V,U)}function f(V,L){let U=r[V.id];U===void 0&&(w(V),U=p(V),r[V.id]=U,V.addEventListener("dispose",b));let B=L.program;i.updateUBOMapping(V,B);let z=e.render.frame;o[V.id]!==z&&(v(V),o[V.id]=z)}function p(V){let L=h();V.__bindingPointIndex=L;let U=n.createBuffer(),B=V.__size,z=V.usage;return n.bindBuffer(n.UNIFORM_BUFFER,U),n.bufferData(n.UNIFORM_BUFFER,B,z),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,L,U),U}function h(){for(let V=0;V<a;V++)if(s.indexOf(V)===-1)return s.push(V),V;return ct("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(V){let L=r[V.id],U=V.uniforms,B=V.__cache;n.bindBuffer(n.UNIFORM_BUFFER,L);for(let z=0,H=U.length;z<H;z++){let Q=Array.isArray(U[z])?U[z]:[U[z]];for(let A=0,N=Q.length;A<N;A++){let G=Q[A];if(x(G,z,A,B)===!0){let q=G.__offset,ne=Array.isArray(G.value)?G.value:[G.value],ue=0;for(let ce=0;ce<ne.length;ce++){let ae=ne[ce],oe=S(ae);typeof ae=="number"||typeof ae=="boolean"?(G.__data[0]=ae,n.bufferSubData(n.UNIFORM_BUFFER,q+ue,G.__data)):ae.isMatrix3?(G.__data[0]=ae.elements[0],G.__data[1]=ae.elements[1],G.__data[2]=ae.elements[2],G.__data[3]=0,G.__data[4]=ae.elements[3],G.__data[5]=ae.elements[4],G.__data[6]=ae.elements[5],G.__data[7]=0,G.__data[8]=ae.elements[6],G.__data[9]=ae.elements[7],G.__data[10]=ae.elements[8],G.__data[11]=0):(ae.toArray(G.__data,ue),ue+=oe.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,q,G.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function x(V,L,U,B){let z=V.value,H=L+"_"+U;if(B[H]===void 0)return typeof z=="number"||typeof z=="boolean"?B[H]=z:B[H]=z.clone(),!0;{let Q=B[H];if(typeof z=="number"||typeof z=="boolean"){if(Q!==z)return B[H]=z,!0}else if(Q.equals(z)===!1)return Q.copy(z),!0}return!1}function w(V){let L=V.uniforms,U=0,B=16;for(let H=0,Q=L.length;H<Q;H++){let A=Array.isArray(L[H])?L[H]:[L[H]];for(let N=0,G=A.length;N<G;N++){let q=A[N],ne=Array.isArray(q.value)?q.value:[q.value];for(let ue=0,ce=ne.length;ue<ce;ue++){let ae=ne[ue],oe=S(ae),_e=U%B,Fe=_e%oe.boundary,Te=_e+Fe;U+=Fe,Te!==0&&B-Te<oe.storage&&(U+=B-Te),q.__data=new Float32Array(oe.storage/Float32Array.BYTES_PER_ELEMENT),q.__offset=U,U+=oe.storage}}}let z=U%B;return z>0&&(U+=B-z),V.__size=U,V.__cache={},this}function S(V){let L={boundary:0,storage:0};return typeof V=="number"||typeof V=="boolean"?(L.boundary=4,L.storage=4):V.isVector2?(L.boundary=8,L.storage=8):V.isVector3||V.isColor?(L.boundary=16,L.storage=12):V.isVector4?(L.boundary=16,L.storage=16):V.isMatrix3?(L.boundary=48,L.storage=48):V.isMatrix4?(L.boundary=64,L.storage=64):V.isTexture?ot("WebGLRenderer: Texture samplers can not be part of an uniforms group."):ot("WebGLRenderer: Unsupported uniform value type.",V),L}function b(V){let L=V.target;L.removeEventListener("dispose",b);let U=s.indexOf(L.__bindingPointIndex);s.splice(U,1),n.deleteBuffer(r[L.id]),delete r[L.id],delete o[L.id]}function y(){for(let V in r)n.deleteBuffer(r[V]);s=[],r={},o={}}return{bind:u,update:f,dispose:y}}var S9=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]),Po=null;function E9(){return Po===null&&(Po=new K0(S9,16,16,tl,Do),Po.name="DFG_LUT",Po.minFilter=ui,Po.magFilter=ui,Po.wrapS=Mo,Po.wrapT=Mo,Po.generateMipmaps=!1,Po.needsUpdate=!0),Po}var _g=class{constructor(e={}){let{canvas:t=_4(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:f=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:h=!1,reversedDepthBuffer:v=!1,outputBufferType:x=$i}=e;this.isWebGLRenderer=!0;let w;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");w=i.getContextAttributes().alpha}else w=s;let S=x,b=new Set([Rm,Om,Im]),y=new Set([$i,Qr,qc,Yc,Dm,Pm]),V=new Uint32Array(4),L=new Int32Array(4),U=null,B=null,z=[],H=[],Q=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Jr,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let A=this,N=!1;this._outputColorSpace=or;let G=0,q=0,ne=null,ue=-1,ce=null,ae=new Pn,oe=new Pn,_e=null,Fe=new Et(0),Te=0,Le=t.width,ut=t.height,xt=1,Kt=null,qt=null,pe=new Pn(0,0,Le,ut),ve=new Pn(0,0,Le,ut),We=!1,ht=new zc,Xe=!1,Rt=!1,wn=new Dn,Ft=new Z,pt=new Pn,It={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},yt=!1;function Ut(){return ne===null?xt:1}let j=i;function Mn(I,Y){return t.getContext(I,Y)}try{let I={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:u,preserveDrawingBuffer:f,powerPreference:p,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${gm}`),t.addEventListener("webglcontextlost",at,!1),t.addEventListener("webglcontextrestored",rn,!1),t.addEventListener("webglcontextcreationerror",Yt,!1),j===null){let Y="webgl2";if(j=Mn(Y,I),j===null)throw Mn(Y)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(I){throw ct("WebGLRenderer: "+I.message),I}let Gt,et,ze,F,M,W,se,ge,le,Ze,Se,Ke,rt,Ce,Oe,qe,Je,Re,bt,$,ke,Ee,He,ye;function me(){Gt=new RU(j),Gt.init(),Ee=new x9(j,Gt),et=new MU(j,Gt,e,Ee),ze=new _9(j,Gt),et.reversedDepthBuffer&&v&&ze.buffers.depth.setReversed(!0),F=new FU(j),M=new n9,W=new v9(j,Gt,ze,M,et,Ee,F),se=new EU(A),ge=new OU(A),le=new B7(j),He=new CU(j,le),Ze=new kU(j,le,F,He),Se=new VU(j,Ze,le,F),bt=new LU(j,et,W),qe=new SU(M),Ke=new t9(A,se,ge,Gt,et,He,qe),rt=new w9(A,M),Ce=new r9,Oe=new u9(Gt),Re=new bU(A,se,ge,ze,Se,w,u),Je=new m9(A,Se,et),ye=new M9(j,F,et,ze),$=new wU(j,Gt,F),ke=new NU(j,Gt,F),F.programs=Ke.programs,A.capabilities=et,A.extensions=Gt,A.properties=M,A.renderLists=Ce,A.shadowMap=Je,A.state=ze,A.info=F}me(),S!==$i&&(Q=new BU(S,t.width,t.height,r,o));let Ie=new l1(A,j);this.xr=Ie,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){let I=Gt.get("WEBGL_lose_context");I&&I.loseContext()},this.forceContextRestore=function(){let I=Gt.get("WEBGL_lose_context");I&&I.restoreContext()},this.getPixelRatio=function(){return xt},this.setPixelRatio=function(I){I!==void 0&&(xt=I,this.setSize(Le,ut,!1))},this.getSize=function(I){return I.set(Le,ut)},this.setSize=function(I,Y,re=!0){if(Ie.isPresenting){ot("WebGLRenderer: Can't change size while VR device is presenting.");return}Le=I,ut=Y,t.width=Math.floor(I*xt),t.height=Math.floor(Y*xt),re===!0&&(t.style.width=I+"px",t.style.height=Y+"px"),Q!==null&&Q.setSize(t.width,t.height),this.setViewport(0,0,I,Y)},this.getDrawingBufferSize=function(I){return I.set(Le*xt,ut*xt).floor()},this.setDrawingBufferSize=function(I,Y,re){Le=I,ut=Y,xt=re,t.width=Math.floor(I*re),t.height=Math.floor(Y*re),this.setViewport(0,0,I,Y)},this.setEffects=function(I){if(S===$i){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(I){for(let Y=0;Y<I.length;Y++)if(I[Y].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}Q.setEffects(I||[])},this.getCurrentViewport=function(I){return I.copy(ae)},this.getViewport=function(I){return I.copy(pe)},this.setViewport=function(I,Y,re,ie){I.isVector4?pe.set(I.x,I.y,I.z,I.w):pe.set(I,Y,re,ie),ze.viewport(ae.copy(pe).multiplyScalar(xt).round())},this.getScissor=function(I){return I.copy(ve)},this.setScissor=function(I,Y,re,ie){I.isVector4?ve.set(I.x,I.y,I.z,I.w):ve.set(I,Y,re,ie),ze.scissor(oe.copy(ve).multiplyScalar(xt).round())},this.getScissorTest=function(){return We},this.setScissorTest=function(I){ze.setScissorTest(We=I)},this.setOpaqueSort=function(I){Kt=I},this.setTransparentSort=function(I){qt=I},this.getClearColor=function(I){return I.copy(Re.getClearColor())},this.setClearColor=function(){Re.setClearColor(...arguments)},this.getClearAlpha=function(){return Re.getClearAlpha()},this.setClearAlpha=function(){Re.setClearAlpha(...arguments)},this.clear=function(I=!0,Y=!0,re=!0){let ie=0;if(I){let J=!1;if(ne!==null){let Ne=ne.texture.format;J=b.has(Ne)}if(J){let Ne=ne.texture.type,je=y.has(Ne),Ve=Re.getClearColor(),Ye=Re.getClearAlpha(),Qe=Ve.r,it=Ve.g,nt=Ve.b;je?(V[0]=Qe,V[1]=it,V[2]=nt,V[3]=Ye,j.clearBufferuiv(j.COLOR,0,V)):(L[0]=Qe,L[1]=it,L[2]=nt,L[3]=Ye,j.clearBufferiv(j.COLOR,0,L))}else ie|=j.COLOR_BUFFER_BIT}Y&&(ie|=j.DEPTH_BUFFER_BIT),re&&(ie|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(ie)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",at,!1),t.removeEventListener("webglcontextrestored",rn,!1),t.removeEventListener("webglcontextcreationerror",Yt,!1),Re.dispose(),Ce.dispose(),Oe.dispose(),M.dispose(),se.dispose(),ge.dispose(),Se.dispose(),He.dispose(),ye.dispose(),Ke.dispose(),Ie.dispose(),Ie.removeEventListener("sessionstart",ff),Ie.removeEventListener("sessionend",hf),Oo.stop()};function at(I){I.preventDefault(),Bb("WebGLRenderer: Context Lost."),N=!0}function rn(){Bb("WebGLRenderer: Context Restored."),N=!1;let I=F.autoReset,Y=Je.enabled,re=Je.autoUpdate,ie=Je.needsUpdate,J=Je.type;me(),F.autoReset=I,Je.enabled=Y,Je.autoUpdate=re,Je.needsUpdate=ie,Je.type=J}function Yt(I){ct("WebGLRenderer: A WebGL context could not be created. Reason: ",I.statusMessage)}function dr(I){let Y=I.target;Y.removeEventListener("dispose",dr),Tr(Y)}function Tr(I){Ig(I),M.remove(I)}function Ig(I){let Y=M.get(I).programs;Y!==void 0&&(Y.forEach(function(re){Ke.releaseProgram(re)}),I.isShaderMaterial&&Ke.releaseShaderCache(I))}this.renderBufferDirect=function(I,Y,re,ie,J,Ne){Y===null&&(Y=It);let je=J.isMesh&&J.matrixWorld.determinant()<0,Ve=iu(I,Y,re,ie,J);ze.setMaterial(ie,je);let Ye=re.index,Qe=1;if(ie.wireframe===!0){if(Ye=Ze.getWireframeAttribute(re),Ye===void 0)return;Qe=2}let it=re.drawRange,nt=re.attributes.position,Ct=it.start*Qe,Xt=(it.start+it.count)*Qe;Ne!==null&&(Ct=Math.max(Ct,Ne.start*Qe),Xt=Math.min(Xt,(Ne.start+Ne.count)*Qe)),Ye!==null?(Ct=Math.max(Ct,0),Xt=Math.min(Xt,Ye.count)):nt!=null&&(Ct=Math.max(Ct,0),Xt=Math.min(Xt,nt.count));let _n=Xt-Ct;if(_n<0||_n===1/0)return;He.setup(J,ie,Ve,re,Ye);let yn,tn=$;if(Ye!==null&&(yn=le.get(Ye),tn=ke,tn.setIndex(yn)),J.isMesh)ie.wireframe===!0?(ze.setLineWidth(ie.wireframeLinewidth*Ut()),tn.setMode(j.LINES)):tn.setMode(j.TRIANGLES);else if(J.isLine){let tt=ie.linewidth;tt===void 0&&(tt=1),ze.setLineWidth(tt*Ut()),J.isLineSegments?tn.setMode(j.LINES):J.isLineLoop?tn.setMode(j.LINE_LOOP):tn.setMode(j.LINE_STRIP)}else J.isPoints?tn.setMode(j.POINTS):J.isSprite&&tn.setMode(j.TRIANGLES);if(J.isBatchedMesh)if(J._multiDrawInstances!==null)Lc("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),tn.renderMultiDrawInstances(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount,J._multiDrawInstances);else if(Gt.get("WEBGL_multi_draw"))tn.renderMultiDraw(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount);else{let tt=J._multiDrawStarts,Bt=J._multiDrawCounts,Ot=J._multiDrawCount,di=Ye?le.get(Ye).bytesPerElement:1,cs=M.get(ie).currentProgram.getUniforms();for(let Mi=0;Mi<Ot;Mi++)cs.setValue(j,"_gl_DrawID",Mi),tn.render(tt[Mi]/di,Bt[Mi])}else if(J.isInstancedMesh)tn.renderInstances(Ct,_n,J.count);else if(re.isInstancedBufferGeometry){let tt=re._maxInstanceCount!==void 0?re._maxInstanceCount:1/0,Bt=Math.min(re.instanceCount,tt);tn.renderInstances(Ct,_n,Bt)}else tn.render(Ct,_n)};function sl(I,Y,re){I.transparent===!0&&I.side===ur&&I.forceSinglePass===!1?(I.side=Pi,I.needsUpdate=!0,ll(I,Y,re),I.side=ss,I.needsUpdate=!0,ll(I,Y,re),I.side=ur):ll(I,Y,re)}this.compile=function(I,Y,re=null){re===null&&(re=I),B=Oe.get(re),B.init(Y),H.push(B),re.traverseVisible(function(J){J.isLight&&J.layers.test(Y.layers)&&(B.pushLight(J),J.castShadow&&B.pushShadow(J))}),I!==re&&I.traverseVisible(function(J){J.isLight&&J.layers.test(Y.layers)&&(B.pushLight(J),J.castShadow&&B.pushShadow(J))}),B.setupLights();let ie=new Set;return I.traverse(function(J){if(!(J.isMesh||J.isPoints||J.isLine||J.isSprite))return;let Ne=J.material;if(Ne)if(Array.isArray(Ne))for(let je=0;je<Ne.length;je++){let Ve=Ne[je];sl(Ve,re,J),ie.add(Ve)}else sl(Ne,re,J),ie.add(Ne)}),B=H.pop(),ie},this.compileAsync=function(I,Y,re=null){let ie=this.compile(I,Y,re);return new Promise(J=>{function Ne(){if(ie.forEach(function(je){M.get(je).currentProgram.isReady()&&ie.delete(je)}),ie.size===0){J(I);return}setTimeout(Ne,10)}Gt.get("KHR_parallel_shader_compile")!==null?Ne():setTimeout(Ne,10)})};let na=null;function Og(I){na&&na(I)}function ff(){Oo.stop()}function hf(){Oo.start()}let Oo=new G4;Oo.setAnimationLoop(Og),typeof self<"u"&&Oo.setContext(self),this.setAnimationLoop=function(I){na=I,Ie.setAnimationLoop(I),I===null?Oo.stop():Oo.start()},Ie.addEventListener("sessionstart",ff),Ie.addEventListener("sessionend",hf),this.render=function(I,Y){if(Y!==void 0&&Y.isCamera!==!0){ct("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;let re=Ie.enabled===!0&&Ie.isPresenting===!0,ie=Q!==null&&(ne===null||re)&&Q.begin(A,ne);if(I.matrixWorldAutoUpdate===!0&&I.updateMatrixWorld(),Y.parent===null&&Y.matrixWorldAutoUpdate===!0&&Y.updateMatrixWorld(),Ie.enabled===!0&&Ie.isPresenting===!0&&(Q===null||Q.isCompositing()===!1)&&(Ie.cameraAutoUpdate===!0&&Ie.updateCamera(Y),Y=Ie.getCamera()),I.isScene===!0&&I.onBeforeRender(A,I,Y,ne),B=Oe.get(I,H.length),B.init(Y),H.push(B),wn.multiplyMatrices(Y.projectionMatrix,Y.matrixWorldInverse),ht.setFromProjectionMatrix(wn,Zr,Y.reversedDepth),Rt=this.localClippingEnabled,Xe=qe.init(this.clippingPlanes,Rt),U=Ce.get(I,z.length),U.init(),z.push(U),Ie.enabled===!0&&Ie.isPresenting===!0){let je=A.xr.getDepthSensingMesh();je!==null&&nu(je,Y,-1/0,A.sortObjects)}nu(I,Y,0,A.sortObjects),U.finish(),A.sortObjects===!0&&U.sort(Kt,qt),yt=Ie.enabled===!1||Ie.isPresenting===!1||Ie.hasDepthSensing()===!1,yt&&Re.addToRenderList(U,I),this.info.render.frame++,Xe===!0&&qe.beginShadows();let J=B.state.shadowsArray;if(Je.render(J,I,Y),Xe===!0&&qe.endShadows(),this.info.autoReset===!0&&this.info.reset(),(ie&&Q.hasRenderPass())===!1){let je=U.opaque,Ve=U.transmissive;if(B.setupLights(),Y.isArrayCamera){let Ye=Y.cameras;if(Ve.length>0)for(let Qe=0,it=Ye.length;Qe<it;Qe++){let nt=Ye[Qe];pf(je,Ve,I,nt)}yt&&Re.render(I);for(let Qe=0,it=Ye.length;Qe<it;Qe++){let nt=Ye[Qe];en(U,I,nt,nt.viewport)}}else Ve.length>0&&pf(je,Ve,I,Y),yt&&Re.render(I),en(U,I,Y)}ne!==null&&q===0&&(W.updateMultisampleRenderTarget(ne),W.updateRenderTargetMipmap(ne)),ie&&Q.end(A),I.isScene===!0&&I.onAfterRender(A,I,Y),He.resetDefaultState(),ue=-1,ce=null,H.pop(),H.length>0?(B=H[H.length-1],Xe===!0&&qe.setGlobalState(A.clippingPlanes,B.state.camera)):B=null,z.pop(),z.length>0?U=z[z.length-1]:U=null};function nu(I,Y,re,ie){if(I.visible===!1)return;if(I.layers.test(Y.layers)){if(I.isGroup)re=I.renderOrder;else if(I.isLOD)I.autoUpdate===!0&&I.update(Y);else if(I.isLight)B.pushLight(I),I.castShadow&&B.pushShadow(I);else if(I.isSprite){if(!I.frustumCulled||ht.intersectsSprite(I)){ie&&pt.setFromMatrixPosition(I.matrixWorld).applyMatrix4(wn);let je=Se.update(I),Ve=I.material;Ve.visible&&U.push(I,je,Ve,re,pt.z,null)}}else if((I.isMesh||I.isLine||I.isPoints)&&(!I.frustumCulled||ht.intersectsObject(I))){let je=Se.update(I),Ve=I.material;if(ie&&(I.boundingSphere!==void 0?(I.boundingSphere===null&&I.computeBoundingSphere(),pt.copy(I.boundingSphere.center)):(je.boundingSphere===null&&je.computeBoundingSphere(),pt.copy(je.boundingSphere.center)),pt.applyMatrix4(I.matrixWorld).applyMatrix4(wn)),Array.isArray(Ve)){let Ye=je.groups;for(let Qe=0,it=Ye.length;Qe<it;Qe++){let nt=Ye[Qe],Ct=Ve[nt.materialIndex];Ct&&Ct.visible&&U.push(I,je,Ct,re,pt.z,nt)}}else Ve.visible&&U.push(I,je,Ve,re,pt.z,null)}}let Ne=I.children;for(let je=0,Ve=Ne.length;je<Ve;je++)nu(Ne[je],Y,re,ie)}function en(I,Y,re,ie){let{opaque:J,transmissive:Ne,transparent:je}=I;B.setupLightsView(re),Xe===!0&&qe.setGlobalState(A.clippingPlanes,re),ie&&ze.viewport(ae.copy(ie)),J.length>0&&al(J,Y,re),Ne.length>0&&al(Ne,Y,re),je.length>0&&al(je,Y,re),ze.buffers.depth.setTest(!0),ze.buffers.depth.setMask(!0),ze.buffers.color.setMask(!0),ze.setPolygonOffset(!1)}function pf(I,Y,re,ie){if((re.isScene===!0?re.overrideMaterial:null)!==null)return;if(B.state.transmissionRenderTarget[ie.id]===void 0){let Ct=Gt.has("EXT_color_buffer_half_float")||Gt.has("EXT_color_buffer_float");B.state.transmissionRenderTarget[ie.id]=new ar(1,1,{generateMipmaps:!0,type:Ct?Do:$i,minFilter:Ks,samples:et.samples,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:jt.workingColorSpace})}let Ne=B.state.transmissionRenderTarget[ie.id],je=ie.viewport||ae;Ne.setSize(je.z*A.transmissionResolutionScale,je.w*A.transmissionResolutionScale);let Ve=A.getRenderTarget(),Ye=A.getActiveCubeFace(),Qe=A.getActiveMipmapLevel();A.setRenderTarget(Ne),A.getClearColor(Fe),Te=A.getClearAlpha(),Te<1&&A.setClearColor(16777215,.5),A.clear(),yt&&Re.render(re);let it=A.toneMapping;A.toneMapping=Jr;let nt=ie.viewport;if(ie.viewport!==void 0&&(ie.viewport=void 0),B.setupLightsView(ie),Xe===!0&&qe.setGlobalState(A.clippingPlanes,ie),al(I,re,ie),W.updateMultisampleRenderTarget(Ne),W.updateRenderTargetMipmap(Ne),Gt.has("WEBGL_multisampled_render_to_texture")===!1){let Ct=!1;for(let Xt=0,_n=Y.length;Xt<_n;Xt++){let yn=Y[Xt],{object:tn,geometry:tt,material:Bt,group:Ot}=yn;if(Bt.side===ur&&tn.layers.test(ie.layers)){let di=Bt.side;Bt.side=Pi,Bt.needsUpdate=!0,mf(tn,re,ie,tt,Bt,Ot),Bt.side=di,Bt.needsUpdate=!0,Ct=!0}}Ct===!0&&(W.updateMultisampleRenderTarget(Ne),W.updateRenderTargetMipmap(Ne))}A.setRenderTarget(Ve,Ye,Qe),A.setClearColor(Fe,Te),nt!==void 0&&(ie.viewport=nt),A.toneMapping=it}function al(I,Y,re){let ie=Y.isScene===!0?Y.overrideMaterial:null;for(let J=0,Ne=I.length;J<Ne;J++){let je=I[J],{object:Ve,geometry:Ye,group:Qe}=je,it=je.material;it.allowOverride===!0&&ie!==null&&(it=ie),Ve.layers.test(re.layers)&&mf(Ve,Y,re,Ye,it,Qe)}}function mf(I,Y,re,ie,J,Ne){I.onBeforeRender(A,Y,re,ie,J,Ne),I.modelViewMatrix.multiplyMatrices(re.matrixWorldInverse,I.matrixWorld),I.normalMatrix.getNormalMatrix(I.modelViewMatrix),J.onBeforeRender(A,Y,re,ie,I,Ne),J.transparent===!0&&J.side===ur&&J.forceSinglePass===!1?(J.side=Pi,J.needsUpdate=!0,A.renderBufferDirect(re,Y,ie,J,I,Ne),J.side=ss,J.needsUpdate=!0,A.renderBufferDirect(re,Y,ie,J,I,Ne),J.side=ur):A.renderBufferDirect(re,Y,ie,J,I,Ne),I.onAfterRender(A,Y,re,ie,J,Ne)}function ll(I,Y,re){Y.isScene!==!0&&(Y=It);let ie=M.get(I),J=B.state.lights,Ne=B.state.shadowsArray,je=J.state.version,Ve=Ke.getParameters(I,J.state,Ne,Y,re),Ye=Ke.getProgramCacheKey(Ve),Qe=ie.programs;ie.environment=I.isMeshStandardMaterial?Y.environment:null,ie.fog=Y.fog,ie.envMap=(I.isMeshStandardMaterial?ge:se).get(I.envMap||ie.environment),ie.envMapRotation=ie.environment!==null&&I.envMap===null?Y.environmentRotation:I.envMapRotation,Qe===void 0&&(I.addEventListener("dispose",dr),Qe=new Map,ie.programs=Qe);let it=Qe.get(Ye);if(it!==void 0){if(ie.currentProgram===it&&ie.lightsStateVersion===je)return _f(I,Ve),it}else Ve.uniforms=Ke.getUniforms(I),I.onBeforeCompile(Ve,A),it=Ke.acquireProgram(Ve,Ye),Qe.set(Ye,it),ie.uniforms=Ve.uniforms;let nt=ie.uniforms;return(!I.isShaderMaterial&&!I.isRawShaderMaterial||I.clipping===!0)&&(nt.clippingPlanes=qe.uniform),_f(I,Ve),ie.needsLights=vf(I),ie.lightsStateVersion=je,ie.needsLights&&(nt.ambientLightColor.value=J.state.ambient,nt.lightProbe.value=J.state.probe,nt.directionalLights.value=J.state.directional,nt.directionalLightShadows.value=J.state.directionalShadow,nt.spotLights.value=J.state.spot,nt.spotLightShadows.value=J.state.spotShadow,nt.rectAreaLights.value=J.state.rectArea,nt.ltc_1.value=J.state.rectAreaLTC1,nt.ltc_2.value=J.state.rectAreaLTC2,nt.pointLights.value=J.state.point,nt.pointLightShadows.value=J.state.pointShadow,nt.hemisphereLights.value=J.state.hemi,nt.directionalShadowMap.value=J.state.directionalShadowMap,nt.directionalShadowMatrix.value=J.state.directionalShadowMatrix,nt.spotShadowMap.value=J.state.spotShadowMap,nt.spotLightMatrix.value=J.state.spotLightMatrix,nt.spotLightMap.value=J.state.spotLightMap,nt.pointShadowMap.value=J.state.pointShadowMap,nt.pointShadowMatrix.value=J.state.pointShadowMatrix),ie.currentProgram=it,ie.uniformsList=null,it}function gf(I){if(I.uniformsList===null){let Y=I.currentProgram.getUniforms();I.uniformsList=Kc.seqWithValue(Y.seq,I.uniforms)}return I.uniformsList}function _f(I,Y){let re=M.get(I);re.outputColorSpace=Y.outputColorSpace,re.batching=Y.batching,re.batchingColor=Y.batchingColor,re.instancing=Y.instancing,re.instancingColor=Y.instancingColor,re.instancingMorph=Y.instancingMorph,re.skinning=Y.skinning,re.morphTargets=Y.morphTargets,re.morphNormals=Y.morphNormals,re.morphColors=Y.morphColors,re.morphTargetsCount=Y.morphTargetsCount,re.numClippingPlanes=Y.numClippingPlanes,re.numIntersection=Y.numClipIntersection,re.vertexAlphas=Y.vertexAlphas,re.vertexTangents=Y.vertexTangents,re.toneMapping=Y.toneMapping}function iu(I,Y,re,ie,J){Y.isScene!==!0&&(Y=It),W.resetTextureUnits();let Ne=Y.fog,je=ie.isMeshStandardMaterial?Y.environment:null,Ve=ne===null?A.outputColorSpace:ne.isXRRenderTarget===!0?ne.texture.colorSpace:Za,Ye=(ie.isMeshStandardMaterial?ge:se).get(ie.envMap||je),Qe=ie.vertexColors===!0&&!!re.attributes.color&&re.attributes.color.itemSize===4,it=!!re.attributes.tangent&&(!!ie.normalMap||ie.anisotropy>0),nt=!!re.morphAttributes.position,Ct=!!re.morphAttributes.normal,Xt=!!re.morphAttributes.color,_n=Jr;ie.toneMapped&&(ne===null||ne.isXRRenderTarget===!0)&&(_n=A.toneMapping);let yn=re.morphAttributes.position||re.morphAttributes.normal||re.morphAttributes.color,tn=yn!==void 0?yn.length:0,tt=M.get(ie),Bt=B.state.lights;if(Xe===!0&&(Rt===!0||I!==ce)){let oi=I===ce&&ie.id===ue;qe.setState(ie,I,oi)}let Ot=!1;ie.version===tt.__version?(tt.needsLights&&tt.lightsStateVersion!==Bt.state.version||tt.outputColorSpace!==Ve||J.isBatchedMesh&&tt.batching===!1||!J.isBatchedMesh&&tt.batching===!0||J.isBatchedMesh&&tt.batchingColor===!0&&J.colorTexture===null||J.isBatchedMesh&&tt.batchingColor===!1&&J.colorTexture!==null||J.isInstancedMesh&&tt.instancing===!1||!J.isInstancedMesh&&tt.instancing===!0||J.isSkinnedMesh&&tt.skinning===!1||!J.isSkinnedMesh&&tt.skinning===!0||J.isInstancedMesh&&tt.instancingColor===!0&&J.instanceColor===null||J.isInstancedMesh&&tt.instancingColor===!1&&J.instanceColor!==null||J.isInstancedMesh&&tt.instancingMorph===!0&&J.morphTexture===null||J.isInstancedMesh&&tt.instancingMorph===!1&&J.morphTexture!==null||tt.envMap!==Ye||ie.fog===!0&&tt.fog!==Ne||tt.numClippingPlanes!==void 0&&(tt.numClippingPlanes!==qe.numPlanes||tt.numIntersection!==qe.numIntersection)||tt.vertexAlphas!==Qe||tt.vertexTangents!==it||tt.morphTargets!==nt||tt.morphNormals!==Ct||tt.morphColors!==Xt||tt.toneMapping!==_n||tt.morphTargetsCount!==tn)&&(Ot=!0):(Ot=!0,tt.__version=ie.version);let di=tt.currentProgram;Ot===!0&&(di=ll(ie,Y,J));let cs=!1,Mi=!1,ra=!1,on=di.getUniforms(),fi=tt.uniforms;if(ze.useProgram(di.program)&&(cs=!0,Mi=!0,ra=!0),ie.id!==ue&&(ue=ie.id,Mi=!0),cs||ce!==I){ze.buffers.depth.getReversed()&&I.reversedDepth!==!0&&(I._reversedDepth=!0,I.updateProjectionMatrix()),on.setValue(j,"projectionMatrix",I.projectionMatrix),on.setValue(j,"viewMatrix",I.matrixWorldInverse);let hi=on.map.cameraPosition;hi!==void 0&&hi.setValue(j,Ft.setFromMatrixPosition(I.matrixWorld)),et.logarithmicDepthBuffer&&on.setValue(j,"logDepthBufFC",2/(Math.log(I.far+1)/Math.LN2)),(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial)&&on.setValue(j,"isOrthographic",I.isOrthographicCamera===!0),ce!==I&&(ce=I,Mi=!0,ra=!0)}if(tt.needsLights&&(Bt.state.directionalShadowMap.length>0&&on.setValue(j,"directionalShadowMap",Bt.state.directionalShadowMap,W),Bt.state.spotShadowMap.length>0&&on.setValue(j,"spotShadowMap",Bt.state.spotShadowMap,W),Bt.state.pointShadowMap.length>0&&on.setValue(j,"pointShadowMap",Bt.state.pointShadowMap,W)),J.isSkinnedMesh){on.setOptional(j,J,"bindMatrix"),on.setOptional(j,J,"bindMatrixInverse");let oi=J.skeleton;oi&&(oi.boneTexture===null&&oi.computeBoneTexture(),on.setValue(j,"boneTexture",oi.boneTexture,W))}J.isBatchedMesh&&(on.setOptional(j,J,"batchingTexture"),on.setValue(j,"batchingTexture",J._matricesTexture,W),on.setOptional(j,J,"batchingIdTexture"),on.setValue(j,"batchingIdTexture",J._indirectTexture,W),on.setOptional(j,J,"batchingColorTexture"),J._colorsTexture!==null&&on.setValue(j,"batchingColorTexture",J._colorsTexture,W));let Ii=re.morphAttributes;if((Ii.position!==void 0||Ii.normal!==void 0||Ii.color!==void 0)&&bt.update(J,re,di),(Mi||tt.receiveShadow!==J.receiveShadow)&&(tt.receiveShadow=J.receiveShadow,on.setValue(j,"receiveShadow",J.receiveShadow)),ie.isMeshGouraudMaterial&&ie.envMap!==null&&(fi.envMap.value=Ye,fi.flipEnvMap.value=Ye.isCubeTexture&&Ye.isRenderTargetTexture===!1?-1:1),ie.isMeshStandardMaterial&&ie.envMap===null&&Y.environment!==null&&(fi.envMapIntensity.value=Y.environmentIntensity),fi.dfgLUT!==void 0&&(fi.dfgLUT.value=E9()),Mi&&(on.setValue(j,"toneMappingExposure",A.toneMappingExposure),tt.needsLights&&ia(fi,ra),Ne&&ie.fog===!0&&rt.refreshFogUniforms(fi,Ne),rt.refreshMaterialUniforms(fi,ie,xt,ut,B.state.transmissionRenderTarget[I.id]),Kc.upload(j,gf(tt),fi,W)),ie.isShaderMaterial&&ie.uniformsNeedUpdate===!0&&(Kc.upload(j,gf(tt),fi,W),ie.uniformsNeedUpdate=!1),ie.isSpriteMaterial&&on.setValue(j,"center",J.center),on.setValue(j,"modelViewMatrix",J.modelViewMatrix),on.setValue(j,"normalMatrix",J.normalMatrix),on.setValue(j,"modelMatrix",J.matrixWorld),ie.isShaderMaterial||ie.isRawShaderMaterial){let oi=ie.uniformsGroups;for(let hi=0,ul=oi.length;hi<ul;hi++){let Ro=oi[hi];ye.update(Ro,di),ye.bind(Ro,di)}}return di}function ia(I,Y){I.ambientLightColor.needsUpdate=Y,I.lightProbe.needsUpdate=Y,I.directionalLights.needsUpdate=Y,I.directionalLightShadows.needsUpdate=Y,I.pointLights.needsUpdate=Y,I.pointLightShadows.needsUpdate=Y,I.spotLights.needsUpdate=Y,I.spotLightShadows.needsUpdate=Y,I.rectAreaLights.needsUpdate=Y,I.hemisphereLights.needsUpdate=Y}function vf(I){return I.isMeshLambertMaterial||I.isMeshToonMaterial||I.isMeshPhongMaterial||I.isMeshStandardMaterial||I.isShadowMaterial||I.isShaderMaterial&&I.lights===!0}this.getActiveCubeFace=function(){return G},this.getActiveMipmapLevel=function(){return q},this.getRenderTarget=function(){return ne},this.setRenderTargetTextures=function(I,Y,re){let ie=M.get(I);ie.__autoAllocateDepthBuffer=I.resolveDepthBuffer===!1,ie.__autoAllocateDepthBuffer===!1&&(ie.__useRenderToTexture=!1),M.get(I.texture).__webglTexture=Y,M.get(I.depthTexture).__webglTexture=ie.__autoAllocateDepthBuffer?void 0:re,ie.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(I,Y){let re=M.get(I);re.__webglFramebuffer=Y,re.__useDefaultFramebuffer=Y===void 0};let cl=j.createFramebuffer();this.setRenderTarget=function(I,Y=0,re=0){ne=I,G=Y,q=re;let ie=null,J=!1,Ne=!1;if(I){let Ve=M.get(I);if(Ve.__useDefaultFramebuffer!==void 0){ze.bindFramebuffer(j.FRAMEBUFFER,Ve.__webglFramebuffer),ae.copy(I.viewport),oe.copy(I.scissor),_e=I.scissorTest,ze.viewport(ae),ze.scissor(oe),ze.setScissorTest(_e),ue=-1;return}else if(Ve.__webglFramebuffer===void 0)W.setupRenderTarget(I);else if(Ve.__hasExternalTextures)W.rebindTextures(I,M.get(I.texture).__webglTexture,M.get(I.depthTexture).__webglTexture);else if(I.depthBuffer){let it=I.depthTexture;if(Ve.__boundDepthTexture!==it){if(it!==null&&M.has(it)&&(I.width!==it.image.width||I.height!==it.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");W.setupDepthRenderbuffer(I)}}let Ye=I.texture;(Ye.isData3DTexture||Ye.isDataArrayTexture||Ye.isCompressedArrayTexture)&&(Ne=!0);let Qe=M.get(I).__webglFramebuffer;I.isWebGLCubeRenderTarget?(Array.isArray(Qe[Y])?ie=Qe[Y][re]:ie=Qe[Y],J=!0):I.samples>0&&W.useMultisampledRTT(I)===!1?ie=M.get(I).__webglMultisampledFramebuffer:Array.isArray(Qe)?ie=Qe[re]:ie=Qe,ae.copy(I.viewport),oe.copy(I.scissor),_e=I.scissorTest}else ae.copy(pe).multiplyScalar(xt).floor(),oe.copy(ve).multiplyScalar(xt).floor(),_e=We;if(re!==0&&(ie=cl),ze.bindFramebuffer(j.FRAMEBUFFER,ie)&&ze.drawBuffers(I,ie),ze.viewport(ae),ze.scissor(oe),ze.setScissorTest(_e),J){let Ve=M.get(I.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+Y,Ve.__webglTexture,re)}else if(Ne){let Ve=Y;for(let Ye=0;Ye<I.textures.length;Ye++){let Qe=M.get(I.textures[Ye]);j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0+Ye,Qe.__webglTexture,re,Ve)}}else if(I!==null&&re!==0){let Ve=M.get(I.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,Ve.__webglTexture,re)}ue=-1},this.readRenderTargetPixels=function(I,Y,re,ie,J,Ne,je,Ve=0){if(!(I&&I.isWebGLRenderTarget)){ct("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ye=M.get(I).__webglFramebuffer;if(I.isWebGLCubeRenderTarget&&je!==void 0&&(Ye=Ye[je]),Ye){ze.bindFramebuffer(j.FRAMEBUFFER,Ye);try{let Qe=I.textures[Ve],it=Qe.format,nt=Qe.type;if(!et.textureFormatReadable(it)){ct("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!et.textureTypeReadable(nt)){ct("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Y>=0&&Y<=I.width-ie&&re>=0&&re<=I.height-J&&(I.textures.length>1&&j.readBuffer(j.COLOR_ATTACHMENT0+Ve),j.readPixels(Y,re,ie,J,Ee.convert(it),Ee.convert(nt),Ne))}finally{let Qe=ne!==null?M.get(ne).__webglFramebuffer:null;ze.bindFramebuffer(j.FRAMEBUFFER,Qe)}}},this.readRenderTargetPixelsAsync=function(I,Y,re,ie,J,Ne,je,Ve=0){return $t(this,null,function*(){if(!(I&&I.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ye=M.get(I).__webglFramebuffer;if(I.isWebGLCubeRenderTarget&&je!==void 0&&(Ye=Ye[je]),Ye)if(Y>=0&&Y<=I.width-ie&&re>=0&&re<=I.height-J){ze.bindFramebuffer(j.FRAMEBUFFER,Ye);let Qe=I.textures[Ve],it=Qe.format,nt=Qe.type;if(!et.textureFormatReadable(it))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!et.textureTypeReadable(nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let Ct=j.createBuffer();j.bindBuffer(j.PIXEL_PACK_BUFFER,Ct),j.bufferData(j.PIXEL_PACK_BUFFER,Ne.byteLength,j.STREAM_READ),I.textures.length>1&&j.readBuffer(j.COLOR_ATTACHMENT0+Ve),j.readPixels(Y,re,ie,J,Ee.convert(it),Ee.convert(nt),0);let Xt=ne!==null?M.get(ne).__webglFramebuffer:null;ze.bindFramebuffer(j.FRAMEBUFFER,Xt);let _n=j.fenceSync(j.SYNC_GPU_COMMANDS_COMPLETE,0);return j.flush(),yield v4(j,_n,4),j.bindBuffer(j.PIXEL_PACK_BUFFER,Ct),j.getBufferSubData(j.PIXEL_PACK_BUFFER,0,Ne),j.deleteBuffer(Ct),j.deleteSync(_n),Ne}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(I,Y=null,re=0){let ie=Math.pow(2,-re),J=Math.floor(I.image.width*ie),Ne=Math.floor(I.image.height*ie),je=Y!==null?Y.x:0,Ve=Y!==null?Y.y:0;W.setTexture2D(I,0),j.copyTexSubImage2D(j.TEXTURE_2D,re,0,0,je,Ve,J,Ne),ze.unbindTexture()};let Sn=j.createFramebuffer(),Rg=j.createFramebuffer();this.copyTextureToTexture=function(I,Y,re=null,ie=null,J=0,Ne=null){Ne===null&&(J!==0?(Lc("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ne=J,J=0):Ne=0);let je,Ve,Ye,Qe,it,nt,Ct,Xt,_n,yn=I.isCompressedTexture?I.mipmaps[Ne]:I.image;if(re!==null)je=re.max.x-re.min.x,Ve=re.max.y-re.min.y,Ye=re.isBox3?re.max.z-re.min.z:1,Qe=re.min.x,it=re.min.y,nt=re.isBox3?re.min.z:0;else{let Ii=Math.pow(2,-J);je=Math.floor(yn.width*Ii),Ve=Math.floor(yn.height*Ii),I.isDataArrayTexture?Ye=yn.depth:I.isData3DTexture?Ye=Math.floor(yn.depth*Ii):Ye=1,Qe=0,it=0,nt=0}ie!==null?(Ct=ie.x,Xt=ie.y,_n=ie.z):(Ct=0,Xt=0,_n=0);let tn=Ee.convert(Y.format),tt=Ee.convert(Y.type),Bt;Y.isData3DTexture?(W.setTexture3D(Y,0),Bt=j.TEXTURE_3D):Y.isDataArrayTexture||Y.isCompressedArrayTexture?(W.setTexture2DArray(Y,0),Bt=j.TEXTURE_2D_ARRAY):(W.setTexture2D(Y,0),Bt=j.TEXTURE_2D),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,Y.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,Y.unpackAlignment);let Ot=j.getParameter(j.UNPACK_ROW_LENGTH),di=j.getParameter(j.UNPACK_IMAGE_HEIGHT),cs=j.getParameter(j.UNPACK_SKIP_PIXELS),Mi=j.getParameter(j.UNPACK_SKIP_ROWS),ra=j.getParameter(j.UNPACK_SKIP_IMAGES);j.pixelStorei(j.UNPACK_ROW_LENGTH,yn.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,yn.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,Qe),j.pixelStorei(j.UNPACK_SKIP_ROWS,it),j.pixelStorei(j.UNPACK_SKIP_IMAGES,nt);let on=I.isDataArrayTexture||I.isData3DTexture,fi=Y.isDataArrayTexture||Y.isData3DTexture;if(I.isDepthTexture){let Ii=M.get(I),oi=M.get(Y),hi=M.get(Ii.__renderTarget),ul=M.get(oi.__renderTarget);ze.bindFramebuffer(j.READ_FRAMEBUFFER,hi.__webglFramebuffer),ze.bindFramebuffer(j.DRAW_FRAMEBUFFER,ul.__webglFramebuffer);for(let Ro=0;Ro<Ye;Ro++)on&&(j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,M.get(I).__webglTexture,J,nt+Ro),j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,M.get(Y).__webglTexture,Ne,_n+Ro)),j.blitFramebuffer(Qe,it,je,Ve,Ct,Xt,je,Ve,j.DEPTH_BUFFER_BIT,j.NEAREST);ze.bindFramebuffer(j.READ_FRAMEBUFFER,null),ze.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else if(J!==0||I.isRenderTargetTexture||M.has(I)){let Ii=M.get(I),oi=M.get(Y);ze.bindFramebuffer(j.READ_FRAMEBUFFER,Sn),ze.bindFramebuffer(j.DRAW_FRAMEBUFFER,Rg);for(let hi=0;hi<Ye;hi++)on?j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,Ii.__webglTexture,J,nt+hi):j.framebufferTexture2D(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,Ii.__webglTexture,J),fi?j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,oi.__webglTexture,Ne,_n+hi):j.framebufferTexture2D(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,oi.__webglTexture,Ne),J!==0?j.blitFramebuffer(Qe,it,je,Ve,Ct,Xt,je,Ve,j.COLOR_BUFFER_BIT,j.NEAREST):fi?j.copyTexSubImage3D(Bt,Ne,Ct,Xt,_n+hi,Qe,it,je,Ve):j.copyTexSubImage2D(Bt,Ne,Ct,Xt,Qe,it,je,Ve);ze.bindFramebuffer(j.READ_FRAMEBUFFER,null),ze.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else fi?I.isDataTexture||I.isData3DTexture?j.texSubImage3D(Bt,Ne,Ct,Xt,_n,je,Ve,Ye,tn,tt,yn.data):Y.isCompressedArrayTexture?j.compressedTexSubImage3D(Bt,Ne,Ct,Xt,_n,je,Ve,Ye,tn,yn.data):j.texSubImage3D(Bt,Ne,Ct,Xt,_n,je,Ve,Ye,tn,tt,yn):I.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,Ne,Ct,Xt,je,Ve,tn,tt,yn.data):I.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,Ne,Ct,Xt,yn.width,yn.height,tn,yn.data):j.texSubImage2D(j.TEXTURE_2D,Ne,Ct,Xt,je,Ve,tn,tt,yn);j.pixelStorei(j.UNPACK_ROW_LENGTH,Ot),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,di),j.pixelStorei(j.UNPACK_SKIP_PIXELS,cs),j.pixelStorei(j.UNPACK_SKIP_ROWS,Mi),j.pixelStorei(j.UNPACK_SKIP_IMAGES,ra),Ne===0&&Y.generateMipmaps&&j.generateMipmap(Bt),ze.unbindTexture()},this.initRenderTarget=function(I){M.get(I).__webglFramebuffer===void 0&&W.setupRenderTarget(I)},this.initTexture=function(I){I.isCubeTexture?W.setTextureCube(I,0):I.isData3DTexture?W.setTexture3D(I,0):I.isDataArrayTexture||I.isCompressedArrayTexture?W.setTexture2DArray(I,0):W.setTexture2D(I,0),ze.unbindTexture()},this.resetState=function(){G=0,q=0,ne=null,ze.reset(),He.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Zr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=jt._getDrawingBufferColorSpace(e),t.unpackColorSpace=jt._getUnpackColorSpace()}};var X4={type:"change"},u1={type:"start"},K4={type:"end"},yg=new Ja,Z4=new Mr,T9=Math.cos(70*Hb.DEG2RAD),ri=new Z,qi=2*Math.PI,un={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},c1=1e-6,bg=class extends ef{constructor(e,t=null){super(e,t),this.state=un.NONE,this.target=new Z,this.cursor=new Z,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Ys.ROTATE,MIDDLE:Ys.DOLLY,RIGHT:Ys.PAN},this.touches={ONE:Xs.ROTATE,TWO:Xs.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Z,this._lastQuaternion=new Er,this._lastTargetPosition=new Z,this._quat=new Er().setFromUnitVectors(e.up,new Z(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Wc,this._sphericalDelta=new Wc,this._scale=1,this._panOffset=new Z,this._rotateStart=new dt,this._rotateEnd=new dt,this._rotateDelta=new dt,this._panStart=new dt,this._panEnd=new dt,this._panDelta=new dt,this._dollyStart=new dt,this._dollyEnd=new dt,this._dollyDelta=new dt,this._dollyDirection=new Z,this._mouse=new dt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=P9.bind(this),this._onPointerDown=D9.bind(this),this._onPointerUp=I9.bind(this),this._onContextMenu=V9.bind(this),this._onMouseWheel=k9.bind(this),this._onKeyDown=N9.bind(this),this._onTouchStart=F9.bind(this),this._onTouchMove=L9.bind(this),this._onMouseDown=O9.bind(this),this._onMouseMove=R9.bind(this),this._interceptControlDown=U9.bind(this),this._interceptControlUp=B9.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(X4),this.update(),this.state=un.NONE}update(e=null){let t=this.object.position;ri.copy(t).sub(this.target),ri.applyQuaternion(this._quat),this._spherical.setFromVector3(ri),this.autoRotate&&this.state===un.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&&isFinite(r)&&(i<-Math.PI?i+=qi:i>Math.PI&&(i-=qi),r<-Math.PI?r+=qi:r>Math.PI&&(r-=qi),i<=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=s!=this._spherical.radius}if(ri.setFromSpherical(this._spherical),ri.applyQuaternion(this._quatInverse),t.copy(this.target).add(ri),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){let a=ri.length();s=this._clampDistance(a*this._scale);let u=a-s;this.object.position.addScaledVector(this._dollyDirection,u),this.object.updateMatrixWorld(),o=!!u}else if(this.object.isOrthographicCamera){let a=new Z(this._mouse.x,this._mouse.y,0);a.unproject(this.object);let u=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=u!==this.object.zoom;let f=new Z(this._mouse.x,this._mouse.y,0);f.unproject(this.object),this.object.position.sub(f).add(a),this.object.updateMatrixWorld(),s=ri.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(yg.origin.copy(this.object.position),yg.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(yg.direction))<T9?this.object.lookAt(this.target):(Z4.setFromNormalAndCoplanarPoint(this.object.up,this.target),yg.intersectPlane(Z4,this.target))))}else if(this.object.isOrthographicCamera){let s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,o||this._lastPosition.distanceToSquared(this.object.position)>c1||8*(1-this._lastQuaternion.dot(this.object.quaternion))>c1||this._lastTargetPosition.distanceToSquared(this.target)>c1?(this.dispatchEvent(X4),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?qi/60*this.autoRotateSpeed*e:qi/60/60*this.autoRotateSpeed}_getZoomScale(e){let t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){ri.setFromMatrixColumn(t,0),ri.multiplyScalar(-e),this._panOffset.add(ri)}_panUp(e,t){this.screenSpacePanning===!0?ri.setFromMatrixColumn(t,1):(ri.setFromMatrixColumn(t,0),ri.crossVectors(this.object.up,ri)),ri.multiplyScalar(e),this._panOffset.add(ri)}_pan(e,t){let i=this.domElement;if(this.object.isPerspectiveCamera){let r=this.object.position;ri.copy(r).sub(this.target);let o=ri.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*o/i.clientHeight,this.object.matrix),this._panUp(2*t*o/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),r=e-i.left,o=t-i.top,s=i.width,a=i.height;this._mouse.x=r/s*2-1,this._mouse.y=-(o/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft(qi*this._rotateDelta.x/t.clientHeight),this._rotateUp(qi*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(qi*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-qi*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(qi*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-qi*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(i,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(i,r)}}_handleTouchStartDolly(e){let t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{let i=this._getSecondPointerPosition(e),r=.5*(e.pageX+i.x),o=.5*(e.pageY+i.y);this._rotateEnd.set(r,o)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft(qi*this._rotateDelta.x/t.clientHeight),this._rotateUp(qi*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(i,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){let t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let s=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(s,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new dt,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){let t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){let t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}};function D9(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.ownerDocument.addEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function P9(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function I9(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(K4),this.state=un.NONE;break;case 1:let e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function O9(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Ys.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=un.DOLLY;break;case Ys.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=un.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=un.ROTATE}break;case Ys.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=un.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=un.PAN}break;default:this.state=un.NONE}this.state!==un.NONE&&this.dispatchEvent(u1)}function R9(n){switch(this.state){case un.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case un.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case un.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function k9(n){this.enabled===!1||this.enableZoom===!1||this.state!==un.NONE||(n.preventDefault(),this.dispatchEvent(u1),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(K4))}function N9(n){this.enabled!==!1&&this._handleKeyDown(n)}function F9(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Xs.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=un.TOUCH_ROTATE;break;case Xs.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=un.TOUCH_PAN;break;default:this.state=un.NONE}break;case 2:switch(this.touches.TWO){case Xs.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=un.TOUCH_DOLLY_PAN;break;case Xs.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=un.TOUCH_DOLLY_ROTATE;break;default:this.state=un.NONE}break;default:this.state=un.NONE}this.state!==un.NONE&&this.dispatchEvent(u1)}function L9(n){switch(this._trackPointer(n),this.state){case un.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case un.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case un.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case un.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=un.NONE}}function V9(n){this.enabled!==!1&&n.preventDefault()}function U9(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function B9(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var Cg=class n{constructor(e,t){this.http=e;this.authService=t}apiUrl="/api";getRooms(e){return this.http.get(`${this.apiUrl}/classrooms`,{params:e,headers:this.authService.getAuthHeaders()})}getRoomById(e){return this.http.get(`${this.apiUrl}/classrooms/${e}`,{headers:this.authService.getAuthHeaders()})}createRoom(e){return this.http.post(`${this.apiUrl}/classrooms`,e,{headers:this.authService.getAuthHeaders()})}updateRoom(e,t){return this.http.put(`${this.apiUrl}/classrooms/${e}`,t,{headers:this.authService.getAuthHeaders()})}deleteRoom(e){return this.http.delete(`${this.apiUrl}/classrooms/${e}`,{headers:this.authService.getAuthHeaders()})}getRoomSchedule(e){return this.http.get(`${this.apiUrl}/classrooms/${e}/schedule`,{headers:this.authService.getAuthHeaders()})}getCurrentClasses(e){return this.http.get(`${this.apiUrl}/classrooms/${e}/current-classes`,{headers:this.authService.getAuthHeaders()})}getSchoolMap(){return this.http.get(`${this.apiUrl}/school/map`,{headers:this.authService.getAuthHeaders()})}changeRoomStatus(e,t){return this.http.patch(`${this.apiUrl}/classrooms/${e}/status`,{status:t},{headers:this.authService.getAuthHeaders()})}getAvailableRooms(e){return this.http.get(`${this.apiUrl}/classrooms/available`,{params:e,headers:this.authService.getAuthHeaders()})}getRoomStatistics(){return this.http.get(`${this.apiUrl}/classrooms/statistics`,{headers:this.authService.getAuthHeaders()})}loadRoomFurniture(e){return this.http.get(`${this.apiUrl}/classrooms/${e}/furniture`,{headers:this.authService.getAuthHeaders()})}saveRoomLayout(e,t){return this.http.post(`${this.apiUrl}/classrooms/${e}/layout`,t,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(t){return new(t||n)(De(bn),De(gn))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})};var H9=["gameCanvas"],J4=()=>[1,2,3];function j9(n,e){n&1&&(l(0,"div",61)(1,"div",62)(2,"div",63),P(3,"div",64),l(4,"div",65),P(5,"div",66)(6,"div",66)(7,"div",66)(8,"div",66)(9,"div",66)(10,"div",66)(11,"div",67),c()(),l(12,"p"),d(13,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641..."),c()()())}function G9(n,e){if(n&1&&(l(0,"option",68),d(1),c()),n&2){let t=e.$implicit;R("value",t),g(),K(" \u0627\u0644\u0637\u0627\u0628\u0642 ",t," ")}}function W9(n,e){if(n&1){let t=Me();l(0,"div",69)(1,"div",70)(2,"button",71),O("click",function(){T(t);let r=E();return D(r.changeFloor(-1))}),P(3,"i",72),d(4," \u0627\u0644\u0637\u0627\u0628\u0642 \u0627\u0644\u0633\u0627\u0628\u0642 "),c(),l(5,"div",73)(6,"div",74),P(7,"i",34),d(8),c(),l(9,"p",75),P(10,"i",38),d(11),c()(),l(12,"button",71),O("click",function(){T(t);let r=E();return D(r.changeFloor(1))}),d(13," \u0627\u0644\u0637\u0627\u0628\u0642 \u0627\u0644\u062A\u0627\u0644\u064A "),P(14,"i",76),c()(),l(15,"div",77)(16,"button",78),O("click",function(){T(t);let r=E();return D(r.zoomOut())}),P(17,"i",79),c(),l(18,"div",80),d(19),c(),l(20,"button",78),O("click",function(){T(t);let r=E();return D(r.zoomIn())}),P(21,"i",81),c(),l(22,"button",82),O("click",function(){T(t);let r=E();return D(r.resetView())}),P(23,"i",83),c()()()}if(n&2){let t=E();g(8),K(" \u0627\u0644\u0637\u0627\u0628\u0642 ",t.currentFloor," "),g(3),K(" ",t.currentBuilding," "),g(8),K(" ",(t.zoomLevel*100).toFixed(0),"% ")}}function $9(n,e){n&1&&(l(0,"div",84)(1,"div",85),P(2,"canvas",86,0),l(4,"div",87)(5,"h4"),P(6,"i",88),d(7," \u062A\u0639\u0644\u064A\u0645\u0627\u062A \u0627\u0644\u062A\u062D\u0643\u0645"),c(),l(8,"ul")(9,"li")(10,"span",89),d(11,"\u2191 \u2193"),c(),d(12," \u0627\u0644\u062A\u0646\u0642\u0644 \u0628\u064A\u0646 \u0627\u0644\u0637\u0648\u0627\u0628\u0642"),c(),l(13,"li")(14,"span",89),d(15,"+ -"),c(),d(16," \u0627\u0644\u062A\u0643\u0628\u064A\u0631 \u0648\u0627\u0644\u062A\u0635\u063A\u064A\u0631"),c(),l(17,"li")(18,"span",89),d(19,"R"),c(),d(20," \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u062A\u0639\u064A\u064A\u0646"),c(),l(21,"li"),d(22,"\u0627\u0633\u062D\u0628 \u0627\u0644\u0641\u0623\u0631\u0629 \u0644\u0644\u062A\u062F\u0648\u064A\u0631"),c(),l(23,"li"),d(24,"\u0639\u062C\u0644\u0629 \u0627\u0644\u0641\u0623\u0631\u0629 \u0644\u0644\u062A\u0645\u0631\u064A\u0631"),c()()()()())}function q9(n,e){if(n&1){let t=Me();l(0,"div",92),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.selectRoom(r))}),l(1,"div",93)(2,"div",94),P(3,"i",95),d(4),c(),l(5,"div",96),P(6,"i"),d(7),c()(),l(8,"div",97)(9,"div",98),P(10,"i",99),c(),l(11,"div",100)(12,"p"),P(13,"i",34),d(14),c(),l(15,"p"),P(16,"i",38),d(17),c(),l(18,"p"),P(19,"i",25),d(20),c()()(),l(21,"div",101)(22,"button",102),O("click",function(r){let o=T(t).$implicit;return E(2).editRoom(o),D(r.stopPropagation())}),P(23,"i",103),c(),l(24,"button",102),O("click",function(r){let o=T(t).$implicit,s=E(2);return s.changeStatus(o._id,s.getNextStatus(o.status)),D(r.stopPropagation())}),P(25,"i"),c(),l(26,"button",104),O("click",function(r){let o=T(t).$implicit;return E(2).deleteRoom(o._id),D(r.stopPropagation())}),P(27,"i",105),c()()()}if(n&2){let t=e.$implicit,i=E(2);Ue("selected",(i.selectedRoom==null?null:i.selectedRoom._id)===t._id)("available",t.status==="available")("occupied",t.status==="occupied")("maintenance",t.status==="maintenance"),g(4),K(" ",t.name," "),g(),vn(t.status),g(),vn(i.getStatusIcon(t.status)),g(),K(" ",i.getStatusText(t.status)," "),g(7),K(" \u0627\u0644\u0637\u0627\u0628\u0642: ",t.floor," "),g(3),K(" \u0627\u0644\u0645\u0628\u0646\u0649: ",t.building," "),g(3),K(" \u0627\u0644\u0633\u0639\u0629: ",t.capacity," \u0637\u0627\u0644\u0628 "),g(5),vn(i.getStatusIcon(i.getNextStatus(t.status)))}}function Y9(n,e){if(n&1&&(l(0,"div",90),ee(1,q9,28,19,"div",91),c()),n&2){let t=E();g(),R("ngForOf",t.filteredRooms)}}function X9(n,e){if(n&1){let t=Me();l(0,"tr",109),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.selectRoom(r))}),l(1,"td")(2,"div",110),P(3,"div",111),d(4),c()(),l(5,"td"),P(6,"i",34),d(7),c(),l(8,"td"),P(9,"i",38),d(10),c(),l(11,"td")(12,"span",112),P(13,"i",25),d(14),c()(),l(15,"td")(16,"span",113),P(17,"i"),d(18),c()(),l(19,"td")(20,"div",114)(21,"button",115),O("click",function(r){let o=T(t).$implicit;return E(2).editRoom(o),D(r.stopPropagation())}),P(22,"i",103),c(),l(23,"button",115),O("click",function(r){let o=T(t).$implicit,s=E(2);return s.changeStatus(o._id,s.getNextStatus(o.status)),D(r.stopPropagation())}),P(24,"i"),c(),l(25,"button",116),O("click",function(r){let o=T(t).$implicit;return E(2).deleteRoom(o._id),D(r.stopPropagation())}),P(26,"i",105),c()()()()}if(n&2){let t=e.$implicit,i=E(2);Ue("selected",(i.selectedRoom==null?null:i.selectedRoom._id)===t._id),g(3),vs("background-color",t.color||"#3498db"),g(),K(" ",t.name," "),g(3),K(" ",t.floor," "),g(3),K(" ",t.building," "),g(4),K(" ",t.capacity," "),g(2),vn(t.status),g(),vn(i.getStatusIcon(t.status)),g(),K(" ",i.getStatusText(t.status)," "),g(6),vn(i.getStatusIcon(i.getNextStatus(t.status)))}}function Z9(n,e){if(n&1&&(l(0,"div",106)(1,"table",107)(2,"thead")(3,"tr")(4,"th"),d(5,"\u0627\u0644\u063A\u0631\u0641\u0629"),c(),l(6,"th"),d(7,"\u0627\u0644\u0637\u0627\u0628\u0642"),c(),l(8,"th"),d(9,"\u0627\u0644\u0645\u0628\u0646\u0649"),c(),l(10,"th"),d(11,"\u0627\u0644\u0633\u0639\u0629"),c(),l(12,"th"),d(13,"\u0627\u0644\u062D\u0627\u0644\u0629"),c(),l(14,"th"),d(15,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),c()()(),l(16,"tbody"),ee(17,X9,27,15,"tr",108),c()()()),n&2){let t=E();g(17),R("ngForOf",t.filteredRooms)}}function K9(n,e){if(n&1&&(l(0,"span",132),P(1,"i",133),d(2),c()),n&2){let t=e.$implicit;g(2),K(" ",t," ")}}function J9(n,e){n&1&&(l(0,"span",134),d(1," \u0644\u0627 \u062A\u0648\u062C\u062F \u062A\u062C\u0647\u064A\u0632\u0627\u062A "),c())}function Q9(n,e){if(n&1&&(l(0,"div",140)(1,"div"),d(2),c(),l(3,"div"),d(4),c(),l(5,"div"),d(6),c(),l(7,"div"),d(8),c()()),n&2){let t=e.$implicit;g(2),te(t.day),g(2),te(t.period),g(2),te(t.subject),g(2),te(t.teacher)}}function ez(n,e){if(n&1&&(l(0,"div",135)(1,"h4"),P(2,"i",136),d(3," \u062C\u062F\u0648\u0644 \u0627\u0644\u062D\u0635\u0635 "),c(),l(4,"div",137)(5,"div",138)(6,"div"),d(7,"\u0627\u0644\u064A\u0648\u0645"),c(),l(8,"div"),d(9,"\u0627\u0644\u062D\u0635\u0629"),c(),l(10,"div"),d(11,"\u0627\u0644\u0645\u0627\u062F\u0629"),c(),l(12,"div"),d(13,"\u0627\u0644\u0645\u0639\u0644\u0645"),c()(),ee(14,Q9,9,4,"div",139),c()()),n&2){let t=E(2);g(14),R("ngForOf",t.scheduleData)}}function tz(n,e){if(n&1){let t=Me();l(0,"div",117)(1,"div",118)(2,"h3"),P(3,"i",42),d(4),c(),l(5,"button",119),O("click",function(){T(t);let r=E();return D(r.selectedRoom=null)}),P(6,"i",120),c()(),l(7,"div",100)(8,"div",121)(9,"div",122),d(10,"\u0627\u0633\u0645 \u0627\u0644\u063A\u0631\u0641\u0629:"),c(),l(11,"div",123),P(12,"i",95),d(13),c()(),l(14,"div",121)(15,"div",122),d(16,"\u0627\u0644\u0645\u0648\u0642\u0639:"),c(),l(17,"div",123),P(18,"i",7),d(19),c()(),l(20,"div",121)(21,"div",122),d(22,"\u0627\u0644\u0637\u0627\u0628\u0642:"),c(),l(23,"div",123),P(24,"i",34),d(25),c()(),l(26,"div",121)(27,"div",122),d(28,"\u0627\u0644\u0645\u0628\u0646\u0649:"),c(),l(29,"div",123),P(30,"i",38),d(31),c()(),l(32,"div",121)(33,"div",122),d(34,"\u0627\u0644\u062D\u0627\u0644\u0629:"),c(),l(35,"div",123)(36,"div",124)(37,"button",125),O("click",function(){T(t);let r=E();return D(r.changeStatus(r.selectedRoom._id,"available"))}),P(38,"i",23),d(39," \u0645\u062A\u0627\u062D\u0629 "),c(),l(40,"button",125),O("click",function(){T(t);let r=E();return D(r.changeStatus(r.selectedRoom._id,"occupied"))}),P(41,"i",25),d(42," \u0645\u0634\u063A\u0648\u0644\u0629 "),c(),l(43,"button",125),O("click",function(){T(t);let r=E();return D(r.changeStatus(r.selectedRoom._id,"maintenance"))}),P(44,"i",27),d(45," \u0635\u064A\u0627\u0646\u0629 "),c()()()(),l(46,"div",121)(47,"div",122),d(48,"\u0627\u0644\u0633\u0639\u0629:"),c(),l(49,"div",123)(50,"div",126),P(51,"i",25),d(52),c()()(),l(53,"div",121)(54,"div",122),d(55,"\u0627\u0644\u062A\u062C\u0647\u064A\u0632\u0627\u062A:"),c(),l(56,"div",123)(57,"div",127),ee(58,K9,3,1,"span",128)(59,J9,2,0,"span",129),c()()(),l(60,"div",121)(61,"div",122),d(62,"\u0644\u0648\u0646 \u0627\u0644\u063A\u0631\u0641\u0629:"),c(),l(63,"div",123),P(64,"div",130),c()()(),ee(65,ez,15,1,"div",131),c()}if(n&2){let t=E();g(4),K(" \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u063A\u0631\u0641\u0629: ",t.selectedRoom.name," "),g(9),K(" ",t.selectedRoom.name," "),g(6),K(" ",t.selectedRoom.location||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"," "),g(6),K(" ",t.selectedRoom.floor," "),g(6),K(" ",t.selectedRoom.building," "),g(6),Ue("active",t.selectedRoom.status==="available"),g(3),Ue("active",t.selectedRoom.status==="occupied"),g(3),Ue("active",t.selectedRoom.status==="maintenance"),g(9),K(" ",t.selectedRoom.capacity," \u0637\u0627\u0644\u0628 "),g(6),R("ngForOf",t.selectedRoom.equipment),g(),R("ngIf",!t.selectedRoom.equipment||t.selectedRoom.equipment.length===0),g(5),vs("background-color",t.selectedRoom.color||"#3498db"),g(),R("ngIf",t.scheduleData.length>0)}}function nz(n,e){if(n&1&&(l(0,"option",68),d(1),c()),n&2){let t=e.$implicit;R("value",t),g(),K(" \u0627\u0644\u0637\u0627\u0628\u0642 ",t," ")}}function iz(n,e){if(n&1){let t=Me();l(0,"div",141),O("click",function(){T(t);let r=E();return r.isAddingRoom=!1,D(r.isEditingRoom=!1)}),l(1,"div",142),O("click",function(r){return T(t),D(r.stopPropagation())}),l(2,"div",143)(3,"h3"),P(4,"i",144),d(5),c(),l(6,"button",119),O("click",function(){T(t);let r=E();return r.isAddingRoom=!1,D(r.isEditingRoom=!1)}),P(7,"i",120),c()(),l(8,"div",145)(9,"form",146),O("ngSubmit",function(){T(t);let r=E();return D(r.isAddingRoom?r.saveNewRoom():r.saveRoomEdit())}),l(10,"div",147)(11,"div",148)(12,"label",149),P(13,"i",95),d(14," \u0627\u0633\u0645 \u0627\u0644\u063A\u0631\u0641\u0629 * "),c(),l(15,"input",150),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newRoom.name,r)||(o.newRoom.name=r),D(r)}),c()(),l(16,"div",148)(17,"label",151),P(18,"i",25),d(19," \u0627\u0644\u0633\u0639\u0629 "),c(),l(20,"input",152),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newRoom.capacity,r)||(o.newRoom.capacity=r),D(r)}),c()()(),l(21,"div",147)(22,"div",148)(23,"label",153),P(24,"i",34),d(25," \u0627\u0644\u0637\u0627\u0628\u0642 "),c(),l(26,"select",154),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newRoom.floor,r)||(o.newRoom.floor=r),D(r)}),ee(27,nz,2,2,"option",37),c()(),l(28,"div",148)(29,"label",155),P(30,"i",38),d(31," \u0627\u0644\u0645\u0628\u0646\u0649 "),c(),l(32,"select",156),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newRoom.building,r)||(o.newRoom.building=r),D(r)}),l(33,"option",39),d(34,"\u0627\u0644\u0645\u0628\u0646\u0649 \u0627\u0644\u0631\u0626\u064A\u0633\u064A"),c(),l(35,"option",40),d(36,"\u0645\u0628\u0646\u0649 \u0627\u0644\u0639\u0644\u0648\u0645"),c(),l(37,"option",41),d(38,"\u0645\u0628\u0646\u0649 \u0627\u0644\u0641\u0646\u0648\u0646"),c()()()(),l(39,"div",148)(40,"label",157),P(41,"i",7),d(42," \u0627\u0644\u0645\u0648\u0642\u0639 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A) "),c(),l(43,"input",158),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newRoom.location,r)||(o.newRoom.location=r),D(r)}),c()(),l(44,"div",148)(45,"label",159),P(46,"i",42),d(47," \u0627\u0644\u062D\u0627\u0644\u0629 "),c(),l(48,"select",160),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newRoom.status,r)||(o.newRoom.status=r),D(r)}),l(49,"option",43),d(50,"\u0645\u062A\u0627\u062D\u0629"),c(),l(51,"option",44),d(52,"\u0645\u0634\u063A\u0648\u0644\u0629"),c(),l(53,"option",45),d(54,"\u0642\u064A\u062F \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),c()()(),l(55,"div",148)(56,"label"),P(57,"i",161),d(58," \u0644\u0648\u0646 \u0627\u0644\u063A\u0631\u0641\u0629 "),c(),l(59,"div",162)(60,"input",163),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newRoom.color,r)||(o.newRoom.color=r),D(r)}),c(),P(61,"div",130),c()(),l(62,"div",148)(63,"label"),P(64,"i",27),d(65," \u0627\u0644\u062A\u062C\u0647\u064A\u0632\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629 "),c(),l(66,"div",164)(67,"label")(68,"input",165),O("change",function(){T(t);let r=E();return D(r.toggleEquipment("\u0628\u0631\u0648\u062C\u0643\u062A\u0631"))}),c(),P(69,"i",166),d(70," \u0628\u0631\u0648\u062C\u0643\u062A\u0631 "),c(),l(71,"label")(72,"input",167),O("change",function(){T(t);let r=E();return D(r.toggleEquipment("\u062D\u0627\u0633\u0628 \u0622\u0644\u064A"))}),c(),P(73,"i",168),d(74," \u062D\u0627\u0633\u0628 \u0622\u0644\u064A "),c(),l(75,"label")(76,"input",169),O("change",function(){T(t);let r=E();return D(r.toggleEquipment("\u0645\u0643\u064A\u0641"))}),c(),P(77,"i",170),d(78," \u0645\u0643\u064A\u0641 "),c(),l(79,"label")(80,"input",171),O("change",function(){T(t);let r=E();return D(r.toggleEquipment("\u0633\u0628\u0648\u0631\u0629 \u0630\u0643\u064A\u0629"))}),c(),P(81,"i",172),d(82," \u0633\u0628\u0648\u0631\u0629 \u0630\u0643\u064A\u0629 "),c(),l(83,"label")(84,"input",173),O("change",function(){T(t);let r=E();return D(r.toggleEquipment("\u0645\u0643\u0628\u0631\u0627\u062A \u0635\u0648\u062A"))}),c(),P(85,"i",174),d(86," \u0645\u0643\u0628\u0631\u0627\u062A \u0635\u0648\u062A "),c(),l(87,"label")(88,"input",175),O("change",function(){T(t);let r=E();return D(r.toggleEquipment("\u0648\u0627\u064A \u0641\u0627\u064A"))}),c(),P(89,"i",176),d(90," \u0648\u0627\u064A \u0641\u0627\u064A "),c()()(),l(91,"div",177)(92,"button",178),O("click",function(){T(t);let r=E();return r.isAddingRoom=!1,D(r.isEditingRoom=!1)}),d(93," \u0625\u0644\u063A\u0627\u0621 "),c(),l(94,"button",179),d(95),c()()()()()()}if(n&2){let t=E();g(4),Ue("fa-plus",t.isAddingRoom)("fa-edit",t.isEditingRoom),g(),K(" ",t.isAddingRoom?"\u0625\u0636\u0627\u0641\u0629 \u063A\u0631\u0641\u0629 \u062C\u062F\u064A\u062F\u0629":"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u063A\u0631\u0641\u0629"," "),g(10),de("ngModel",t.newRoom.name),g(5),de("ngModel",t.newRoom.capacity),g(6),de("ngModel",t.newRoom.floor),g(),R("ngForOf",(t.schoolMap==null?null:t.schoolMap.floors)||Cs(22,J4)),g(5),de("ngModel",t.newRoom.building),g(11),de("ngModel",t.newRoom.location),g(5),de("ngModel",t.newRoom.status),g(12),de("ngModel",t.newRoom.color),g(),vs("background-color",t.newRoom.color),g(7),R("checked",t.newRoom.equipment.includes("\u0628\u0631\u0648\u062C\u0643\u062A\u0631")),g(4),R("checked",t.newRoom.equipment.includes("\u062D\u0627\u0633\u0628 \u0622\u0644\u064A")),g(4),R("checked",t.newRoom.equipment.includes("\u0645\u0643\u064A\u0641")),g(4),R("checked",t.newRoom.equipment.includes("\u0633\u0628\u0648\u0631\u0629 \u0630\u0643\u064A\u0629")),g(4),R("checked",t.newRoom.equipment.includes("\u0645\u0643\u0628\u0631\u0627\u062A \u0635\u0648\u062A")),g(4),R("checked",t.newRoom.equipment.includes("\u0648\u0627\u064A \u0641\u0627\u064A")),g(7),K(" ",t.isAddingRoom?"\u0625\u0636\u0627\u0641\u0629":"\u062D\u0641\u0638 \u0627\u0644\u062A\u0639\u062F\u064A\u0644\u0627\u062A"," ")}}var wg=class n{constructor(e){this.roomsService=e}gameCanvasRef;rooms=[];selectedRoom=null;schoolMap=null;filteredRooms=[];isAddingRoom=!1;isEditingRoom=!1;isLoading=!0;viewMode="3d";currentFloor=1;currentBuilding="Main";zoomLevel=1;newRoom={name:"",capacity:30,floor:1,building:"Main",location:"",color:"#3498db",equipment:[],status:"available"};statistics={totalRooms:0,availableRooms:0,occupiedRooms:0,maintenanceRooms:0,totalCapacity:0};scene;camera;renderer;controls;roomObjects=[];filter={floor:"",building:"",status:"",capacity:""};scheduleData=[];ngOnInit(){this.loadData(),this.setupKeyboardControls()}ngAfterViewInit(){this.viewMode==="3d"&&this.init3DView()}loadData(){this.isLoading=!0,Fo({rooms:this.roomsService.getRooms(),map:this.roomsService.getSchoolMap(),stats:this.roomsService.getRoomStatistics()}).subscribe({next:e=>{this.rooms=e.rooms,this.filteredRooms=[...this.rooms],this.schoolMap=e.map,this.statistics=e.stats,this.isLoading=!1,this.viewMode==="3d"&&this.create3DScene()},error:e=>{console.error("Error loading data:",e),this.isLoading=!1}})}init3DView(){let e=this.gameCanvasRef.nativeElement;this.scene=new Gd,this.scene.background=new Et(8900331),this.camera=new Ci(75,e.clientWidth/e.clientHeight,.1,1e3),this.camera.position.set(50,50,50),this.renderer=new _g({canvas:e,antialias:!0}),this.renderer.setSize(e.clientWidth,e.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.controls=new bg(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05;let t=new Jd(16777215,.6);this.scene.add(t);let i=new Kd(16777215,.8);i.position.set(50,100,50),this.scene.add(i),this.createFloor(),this.create3DScene(),this.animate()}create3DScene(){if(!this.scene||!this.rooms.length)return;this.roomObjects.forEach(u=>this.scene.remove(u)),this.roomObjects=[];let e=100,t=60,i=15,r=new Fn(e,5,t),o=new Cn({color:9807270,transparent:!0,opacity:.8}),s=new Vt(r,o);s.position.y=2.5,this.scene.add(s);let a=this.schoolMap?.floors||[1,2,3];a.forEach(u=>{let f=new Ao(e-10,t-10),p=new Cn({color:15528177,side:ur}),h=new Vt(f,p);h.rotation.x=Math.PI/2,h.position.y=u*i,this.scene.add(h),this.addFloorLabel(u,e);let v=this.rooms.filter(x=>x.floor===u);this.createFloorRooms(v,u,i)}),this.addStairs(e,t,a.length,i),this.addExteriorDecorations(e,t)}createFloorRooms(e,t,i){e.forEach((u,f)=>{let p=Math.floor(f/4),v=(f%4-3/2)*23,x=p*20,w=this.create3DRoom(u,v,t*i,x);this.roomObjects.push(w),this.scene.add(w),this.addRoomInteraction(w,u)})}create3DRoom(e,t,i,r){let o=new Sr;o.position.set(t,i+2,r),o.userData={roomId:e._id,roomData:e};let s=18,a=10,u=12,f=.5,p;switch(e.status){case"available":p=3066993;break;case"occupied":p=15158332;break;case"maintenance":p=15965202;break;default:p=3447003}let h=new Vt(new Fn(s,a,f),new Cn({color:p}));h.position.z=-u/2,o.add(h);let v=h.clone();v.position.z=u/2,o.add(v);let x=new Vt(new Fn(f,a,u),new Cn({color:p}));x.position.x=s/2,o.add(x);let w=x.clone();w.position.x=-s/2,o.add(w);let S=new Vt(new Fn(s,f,u),new Cn({color:8359053}));S.position.y=a/2,o.add(S);let b=new Vt(new Fn(s-1,f,u-1),new Cn({color:3426654}));b.position.y=-a/2,o.add(b);let y=new Vt(new Fn(4,6,.2),new Cn({color:9127187}));y.position.set(0,-2,-u/2),o.add(y);for(let V=0;V<2;V++){let L=new Vt(new Fn(3,3,.1),new Cn({color:8900331,transparent:!0,opacity:.6}));L.position.set(V*6-3,2,-u/2),o.add(L)}return this.addRoomLabel(o,e.name,s),this.addFurniture(o,e),o}addFurniture(e,t){let i=Math.min(t.capacity,30),r=5,o=Math.ceil(i/r);for(let u=0;u<r;u++)for(let f=0;f<o&&!(u*o+f>=i);f++){let p=new Vt(new Fn(1.5,1,1.5),new Cn({color:2899536}));p.position.set(f*2-(o-1),-4.5,u*2-(r-1)),e.add(p);let h=new Vt(new Fn(1.5,2,.2),new Cn({color:3426654}));h.position.set(f*2-(o-1),-3,u*2-(r-1)-.8),e.add(h)}let s=new Vt(new Fn(10,4,.1),new Cn({color:0}));s.position.set(0,0,5),e.add(s);let a=new Vt(new Fn(10.2,4.2,.2),new Cn({color:12597547}));a.position.set(0,0,5.1),e.add(a)}addRoomLabel(e,t,i){let r=document.createElement("canvas"),o=r.getContext("2d");if(!o)return;r.width=512,r.height=256,o.fillStyle="#ffffff",o.fillRect(0,0,r.width,r.height),o.fillStyle="#000000",o.font="bold 60px Arial",o.textAlign="center",o.fillText(t,r.width/2,r.height/2+20);let s=new Hc(r),a=new Vt(new Ao(i-2,2),new Gs({map:s,transparent:!0}));a.position.set(0,5,-7),a.rotation.y=Math.PI,e.add(a)}addFloorLabel(e,t){let i=document.createElement("canvas"),r=i.getContext("2d");if(!r)return;i.width=256,i.height=128,r.fillStyle="#ffffff",r.fillRect(0,0,i.width,i.height),r.fillStyle="#2c3e50",r.font="bold 40px Arial",r.textAlign="center",r.fillText(`\u0627\u0644\u0637\u0627\u0628\u0642 ${e}`,i.width/2,i.height/2+20);let o=new Hc(i),s=new Vt(new Ao(10,5),new Gs({map:o,transparent:!0}));s.position.set(-t/2+5,e*15,0),this.scene.add(s)}addStairs(e,t,i,r){for(let a=0;a<i-1;a++){let u=new Sr;for(let f=0;f<10;f++){let p=new Vt(new Fn(5,r/10,10),new Cn({color:8207512}));p.position.set(e/2+2,a*r+f*r/10,f-5),u.add(p)}this.scene.add(u)}}addExteriorDecorations(e,t){for(let r=0;r<5;r++){let o=this.createTree();o.position.set((Math.random()-.5)*(e+50),0,(Math.random()-.5)*(t+50)),this.scene.add(o)}let i=10;for(let r=0;r<i;r++){let o=new Vt(new Fn(4,.1,8),new Cn({color:2899536}));if(o.position.set(-e/2-10+r%5*5,.05,t/2+10+Math.floor(r/5)*10),this.scene.add(o),Math.random()>.5){let s=this.createCar();s.position.copy(o.position),s.position.y=1,this.scene.add(s)}}}createTree(){let e=new Sr,t=new Vt(new jc(.5,.7,5),new Cn({color:9127187}));e.add(t);let i=new Vt(new qd(3,8,8),new Cn({color:2600544}));return i.position.y=4,e.add(i),e}createCar(){let e=new Sr,t=new Vt(new Fn(3,1,6),new Cn({color:12597547}));e.add(t);let i=new Vt(new Fn(2.8,.8,1),new Cn({color:3447003,transparent:!0,opacity:.5}));i.position.y=.6,i.position.z=-1.5,e.add(i);let r=new jc(.5,.5,.3,16),o=new Cn({color:2899536});for(let s=0;s<4;s++){let a=new Vt(r,o);a.rotation.z=Math.PI/2,a.position.set(s<2?-1.2:1.2,-.6,s%2?-2:2),e.add(a)}return e}addRoomInteraction(e,t){e.userData=lt(xe({},e.userData),{onClick:()=>this.selectRoom(t)})}createFloor(){let e=new Ao(200,200),t=new Xd().load("assets/textures/floor.jpg");t.wrapS=Xa,t.wrapT=Xa,t.repeat.set(8,8);let i=new Cn({map:t,side:ur}),r=new Vt(e,i);r.rotation.x=Math.PI/2,r.receiveShadow=!0,this.scene.add(r);let o=new Qd(200,50,0,0);this.scene.add(o)}animate(){requestAnimationFrame(()=>this.animate()),this.controls&&this.controls.update(),this.renderer&&this.scene&&this.camera&&this.renderer.render(this.scene,this.camera),this.roomObjects.forEach(e=>{e.rotation.y+=.001})}changeViewMode(e){this.viewMode=e,e==="3d"&&!this.renderer&&setTimeout(()=>this.init3DView(),100)}changeFloor(e){let t=this.schoolMap?.floors||[1,2,3],r=(t.indexOf(this.currentFloor)+e+t.length)%t.length;this.currentFloor=t[r],this.viewMode==="3d"&&(this.camera.position.y=this.currentFloor*15+20,this.controls.target.y=this.currentFloor*15),this.filterRooms()}filterRooms(){this.filteredRooms=this.rooms.filter(e=>!(this.filter.floor&&e.floor!==parseInt(this.filter.floor)||this.filter.building&&e.building!==this.filter.building||this.filter.status&&e.status!==this.filter.status||this.filter.capacity&&e.capacity<parseInt(this.filter.capacity)||this.currentFloor&&e.floor!==this.currentFloor))}addRoom(){this.isAddingRoom=!0,this.newRoom={name:"",capacity:30,floor:this.currentFloor,building:this.currentBuilding,location:"",color:"#3498db",equipment:[],status:"available"}}saveNewRoom(){if(!this.newRoom.name){alert("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u063A\u0631\u0641\u0629");return}this.roomsService.createRoom(this.newRoom).subscribe({next:e=>{this.rooms.push(e),this.filterRooms(),this.isAddingRoom=!1,this.viewMode==="3d"&&this.create3DScene()},error:e=>{console.error("Error adding room:",e),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u063A\u0631\u0641\u0629")}})}editRoom(e){this.selectedRoom=e,this.isEditingRoom=!0,this.newRoom=xe({},e)}saveRoomEdit(){this.selectedRoom&&this.roomsService.updateRoom(this.selectedRoom._id,this.newRoom).subscribe({next:e=>{let t=this.rooms.findIndex(i=>i._id===e._id);t!==-1&&(this.rooms[t]=e),this.selectedRoom=e,this.isEditingRoom=!1,this.viewMode==="3d"&&this.create3DScene()},error:e=>{console.error("Error updating room:",e),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u063A\u0631\u0641\u0629")}})}deleteRoom(e){confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u063A\u0631\u0641\u0629\u061F")&&this.roomsService.deleteRoom(e).subscribe({next:()=>{this.rooms=this.rooms.filter(t=>t._id!==e),this.filterRooms(),this.selectedRoom=null,this.viewMode==="3d"&&this.create3DScene()},error:t=>{console.error("Error deleting room:",t),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062D\u0630\u0641 \u0627\u0644\u063A\u0631\u0641\u0629")}})}selectRoom(e){if(this.selectedRoom=e,this.roomsService.getRoomSchedule(e._id).subscribe({next:t=>{this.scheduleData=t},error:t=>{console.error("Error loading schedule:",t)}}),this.viewMode==="3d"){let t=this.roomObjects.find(i=>i.userData.roomId===e._id);t&&(this.controls.target.copy(t.position),this.camera.position.copy(t.position).add(new Z(20,20,20)))}}changeStatus(e,t){this.roomsService.changeRoomStatus(e,t).subscribe({next:i=>{let r=this.rooms.findIndex(o=>o._id===i._id);r!==-1&&(this.rooms[r]=i),this.selectedRoom?._id===i._id&&(this.selectedRoom=i),this.viewMode==="3d"&&this.create3DScene()},error:i=>{console.error("Error changing room status:",i)}})}setupKeyboardControls(){}handleKeyboardEvent(e){if(this.viewMode==="3d")switch(e.key){case"ArrowUp":this.changeFloor(1);break;case"ArrowDown":this.changeFloor(-1);break;case"+":this.zoomLevel=Math.min(this.zoomLevel+.1,2),this.camera.zoom=this.zoomLevel,this.camera.updateProjectionMatrix();break;case"-":this.zoomLevel=Math.max(this.zoomLevel-.1,.5),this.camera.zoom=this.zoomLevel,this.camera.updateProjectionMatrix();break;case"r":case"R":this.camera.position.set(50,50,50),this.controls.target.set(0,0,0);break}}onWindowResize(){if(this.camera&&this.renderer){let e=this.gameCanvasRef.nativeElement;this.camera.aspect=e.clientWidth/e.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(e.clientWidth,e.clientHeight)}}zoomIn(){this.zoomLevel=Math.min(this.zoomLevel+.1,2),this.camera&&(this.camera.zoom=this.zoomLevel,this.camera.updateProjectionMatrix())}zoomOut(){this.zoomLevel=Math.max(this.zoomLevel-.1,.5),this.camera&&(this.camera.zoom=this.zoomLevel,this.camera.updateProjectionMatrix())}resetView(){this.camera&&this.controls&&(this.camera.position.set(50,50,50),this.controls.target.set(0,0,0),this.zoomLevel=1,this.camera.zoom=this.zoomLevel,this.camera.updateProjectionMatrix())}getStatusIcon(e){switch(e){case"available":return"fas fa-check-circle";case"occupied":return"fas fa-users";case"maintenance":return"fas fa-tools";default:return"fas fa-question-circle"}}getStatusText(e){switch(e){case"available":return"\u0645\u062A\u0627\u062D\u0629";case"occupied":return"\u0645\u0634\u063A\u0648\u0644\u0629";case"maintenance":return"\u0642\u064A\u062F \u0627\u0644\u0635\u064A\u0627\u0646\u0629";default:return"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}}getNextStatus(e){switch(e){case"available":return"occupied";case"occupied":return"maintenance";case"maintenance":return"available";default:return"available"}}toggleEquipment(e){let t=this.newRoom.equipment.indexOf(e);t>-1?this.newRoom.equipment.splice(t,1):this.newRoom.equipment.push(e)}static \u0275fac=function(t){return new(t||n)(we(Cg))};static \u0275cmp=Jt({type:n,selectors:[["app-rooms-management-component"]],viewQuery:function(t,i){if(t&1&&tp(H9,5),t&2){let r;Iu(r=Ou())&&(i.gameCanvasRef=r.first)}},hostBindings:function(t,i){t&1&&O("keydown",function(o){return i.handleKeyboardEvent(o)},!1,po)("resize",function(){return i.onWindowResize()},!1,po)},decls:135,vars:25,consts:[["gameCanvas",""],[1,"rooms-management"],["class","loading-screen",4,"ngIf"],[1,"control-bar"],[1,"title-section"],[1,"fas","fa-school"],[1,"school-name"],[1,"fas","fa-map-marker-alt"],[1,"controls"],[1,"view-controls"],[1,"btn",3,"click"],[1,"fas","fa-list"],[1,"fas","fa-th-large"],[1,"fas","fa-cube"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-panel"],[1,"stat-card"],[1,"stat-icon"],[1,"fas","fa-door-open"],[1,"stat-content"],[1,"stat-number"],[1,"stat-card","available"],[1,"fas","fa-check-circle"],[1,"stat-card","occupied"],[1,"fas","fa-users"],[1,"stat-card","maintenance"],[1,"fas","fa-tools"],[1,"fas","fa-user-friends"],[1,"filter-panel"],[1,"filter-title"],[1,"fas","fa-filter"],[1,"filter-controls"],[1,"filter-group"],[1,"fas","fa-layer-group"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fas","fa-building"],["value","Main"],["value","Science"],["value","Arts"],[1,"fas","fa-info-circle"],["value","available"],["value","occupied"],["value","maintenance"],["type","number","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0633\u0639\u0629","min","1","max","100",3,"ngModelChange","input","ngModel"],["class","navigation-panel",4,"ngIf"],["class","game-view",4,"ngIf"],["class","rooms-grid",4,"ngIf"],["class","rooms-table-container",4,"ngIf"],["class","details-panel",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"footer"],[1,"footer-info"],[1,"fas","fa-clock"],[1,"legend"],[1,"legend-item"],[1,"legend-color","available"],[1,"legend-color","occupied"],[1,"legend-color","maintenance"],[1,"loading-screen"],[1,"loader"],[1,"school-building"],[1,"building-roof"],[1,"building-body"],[1,"window"],[1,"building-door"],[3,"value"],[1,"navigation-panel"],[1,"floor-navigation"],[1,"btn-nav",3,"click"],[1,"fas","fa-chevron-down"],[1,"current-floor"],[1,"floor-number"],[1,"building-name"],[1,"fas","fa-chevron-up"],[1,"zoom-controls"],[1,"btn-zoom",3,"click"],[1,"fas","fa-search-minus"],[1,"zoom-level"],[1,"fas","fa-search-plus"],["title","\u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u062A\u0639\u064A\u064A\u0646",1,"btn-reset",3,"click"],[1,"fas","fa-sync-alt"],[1,"game-view"],[1,"canvas-container"],[1,"game-canvas"],[1,"game-instructions"],[1,"fas","fa-gamepad"],[1,"key"],[1,"rooms-grid"],["class","room-card",3,"selected","available","occupied","maintenance","click",4,"ngFor","ngForOf"],[1,"room-card",3,"click"],[1,"room-header"],[1,"room-name"],[1,"fas","fa-door-closed"],[1,"room-status"],[1,"room-body"],[1,"room-icon"],[1,"fas","fa-chalkboard-teacher"],[1,"room-details"],[1,"room-actions"],[1,"btn-action",3,"click"],[1,"fas","fa-edit"],[1,"btn-action","danger",3,"click"],[1,"fas","fa-trash"],[1,"rooms-table-container"],[1,"rooms-table"],[3,"selected","click",4,"ngFor","ngForOf"],[3,"click"],[1,"room-name-cell"],[1,"room-color-indicator"],[1,"capacity-badge"],[1,"status-badge"],[1,"actions-cell"],[1,"btn-action","small",3,"click"],[1,"btn-action","small","danger",3,"click"],[1,"details-panel"],[1,"panel-header"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"status-controls"],[1,"btn-status",3,"click"],[1,"capacity-display"],[1,"equipment-tags"],["class","equipment-tag",4,"ngFor","ngForOf"],["class","text-muted",4,"ngIf"],[1,"color-preview"],["class","schedule-section",4,"ngIf"],[1,"equipment-tag"],[1,"fas","fa-check"],[1,"text-muted"],[1,"schedule-section"],[1,"fas","fa-calendar-alt"],[1,"schedule-table"],[1,"schedule-header"],["class","schedule-row",4,"ngFor","ngForOf"],[1,"schedule-row"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"fas"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["for","roomName"],["type","text","id","roomName","name","roomName","required","","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u063A\u0631\u0641\u0629",3,"ngModelChange","ngModel"],["for","roomCapacity"],["type","number","id","roomCapacity","name","capacity","min","1","max","100","placeholder","\u0639\u062F\u062F \u0627\u0644\u0637\u0644\u0627\u0628",3,"ngModelChange","ngModel"],["for","roomFloor"],["id","roomFloor","name","floor",3,"ngModelChange","ngModel"],["for","roomBuilding"],["id","roomBuilding","name","building",3,"ngModelChange","ngModel"],["for","roomLocation"],["type","text","id","roomLocation","name","location","placeholder","\u0645\u062B\u0627\u0644: \u0634\u0645\u0627\u0644 \u0627\u0644\u0645\u0628\u0646\u0649 \u0627\u0644\u0631\u0626\u064A\u0633\u064A",3,"ngModelChange","ngModel"],["for","roomStatus"],["id","roomStatus","name","status",3,"ngModelChange","ngModel"],[1,"fas","fa-palette"],[1,"color-picker"],["type","color","name","color",3,"ngModelChange","ngModel"],[1,"equipment-selector"],["type","checkbox","name","projector",3,"change","checked"],[1,"fas","fa-video"],["type","checkbox","name","computer",3,"change","checked"],[1,"fas","fa-desktop"],["type","checkbox","name","airConditioner",3,"change","checked"],[1,"fas","fa-wind"],["type","checkbox","name","smartBoard",3,"change","checked"],[1,"fas","fa-chalkboard"],["type","checkbox","name","speakers",3,"change","checked"],[1,"fas","fa-volume-up"],["type","checkbox","name","wifi",3,"change","checked"],[1,"fas","fa-wifi"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"]],template:function(t,i){t&1&&(l(0,"div",1),ee(1,j9,14,0,"div",2),l(2,"div",3)(3,"div",4)(4,"h1"),P(5,"i",5),d(6," \u0646\u0638\u0627\u0645 \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0641\u0635\u0648\u0644 \u0627\u0644\u062F\u0631\u0627\u0633\u064A\u0629 "),c(),l(7,"p",6),P(8,"i",7),d(9," Al-rouad Akadime "),c()(),l(10,"div",8)(11,"div",9)(12,"button",10),O("click",function(){return i.changeViewMode("list")}),P(13,"i",11),d(14," \u0642\u0627\u0626\u0645\u0629 "),c(),l(15,"button",10),O("click",function(){return i.changeViewMode("grid")}),P(16,"i",12),d(17," \u0634\u0628\u0643\u0629 "),c(),l(18,"button",10),O("click",function(){return i.changeViewMode("3d")}),P(19,"i",13),d(20," \u062B\u0644\u0627\u062B\u064A \u0627\u0644\u0623\u0628\u0639\u0627\u062F "),c()(),l(21,"button",14),O("click",function(){return i.addRoom()}),P(22,"i",15),d(23," \u0625\u0636\u0627\u0641\u0629 \u063A\u0631\u0641\u0629 \u062C\u062F\u064A\u062F\u0629 "),c()()(),l(24,"div",16)(25,"div",17)(26,"div",18),P(27,"i",19),c(),l(28,"div",20)(29,"h3"),d(30,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u063A\u0631\u0641"),c(),l(31,"p",21),d(32),c()()(),l(33,"div",22)(34,"div",18),P(35,"i",23),c(),l(36,"div",20)(37,"h3"),d(38,"\u0627\u0644\u063A\u0631\u0641 \u0627\u0644\u0645\u062A\u0627\u062D\u0629"),c(),l(39,"p",21),d(40),c()()(),l(41,"div",24)(42,"div",18),P(43,"i",25),c(),l(44,"div",20)(45,"h3"),d(46,"\u0627\u0644\u063A\u0631\u0641 \u0627\u0644\u0645\u0634\u063A\u0648\u0644\u0629"),c(),l(47,"p",21),d(48),c()()(),l(49,"div",26)(50,"div",18),P(51,"i",27),c(),l(52,"div",20)(53,"h3"),d(54,"\u0642\u064A\u062F \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),c(),l(55,"p",21),d(56),c()()(),l(57,"div",17)(58,"div",18),P(59,"i",28),c(),l(60,"div",20)(61,"h3"),d(62,"\u0627\u0644\u0633\u0639\u0629 \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A\u0629"),c(),l(63,"p",21),d(64),c()()()(),l(65,"div",29)(66,"div",30),P(67,"i",31),d(68," \u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u063A\u0631\u0641 "),c(),l(69,"div",32)(70,"div",33)(71,"label"),P(72,"i",34),d(73," \u0627\u0644\u0637\u0627\u0628\u0642"),c(),l(74,"select",35),fe("ngModelChange",function(o){return he(i.filter.floor,o)||(i.filter.floor=o),o}),O("change",function(){return i.filterRooms()}),l(75,"option",36),d(76,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0637\u0648\u0627\u0628\u0642"),c(),ee(77,G9,2,2,"option",37),c()(),l(78,"div",33)(79,"label"),P(80,"i",38),d(81," \u0627\u0644\u0645\u0628\u0646\u0649"),c(),l(82,"select",35),fe("ngModelChange",function(o){return he(i.filter.building,o)||(i.filter.building=o),o}),O("change",function(){return i.filterRooms()}),l(83,"option",36),d(84,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0628\u0627\u0646\u064A"),c(),l(85,"option",39),d(86,"\u0627\u0644\u0645\u0628\u0646\u0649 \u0627\u0644\u0631\u0626\u064A\u0633\u064A"),c(),l(87,"option",40),d(88,"\u0645\u0628\u0646\u0649 \u0627\u0644\u0639\u0644\u0648\u0645"),c(),l(89,"option",41),d(90,"\u0645\u0628\u0646\u0649 \u0627\u0644\u0641\u0646\u0648\u0646"),c()()(),l(91,"div",33)(92,"label"),P(93,"i",42),d(94," \u0627\u0644\u062D\u0627\u0644\u0629"),c(),l(95,"select",35),fe("ngModelChange",function(o){return he(i.filter.status,o)||(i.filter.status=o),o}),O("change",function(){return i.filterRooms()}),l(96,"option",36),d(97,"\u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0627\u0644\u0627\u062A"),c(),l(98,"option",43),d(99,"\u0645\u062A\u0627\u062D\u0629"),c(),l(100,"option",44),d(101,"\u0645\u0634\u063A\u0648\u0644\u0629"),c(),l(102,"option",45),d(103,"\u0635\u064A\u0627\u0646\u0629"),c()()(),l(104,"div",33)(105,"label"),P(106,"i",25),d(107," \u0627\u0644\u0633\u0639\u0629 (\u062D\u062F \u0623\u062F\u0646\u0649)"),c(),l(108,"input",46),fe("ngModelChange",function(o){return he(i.filter.capacity,o)||(i.filter.capacity=o),o}),O("input",function(){return i.filterRooms()}),c()()()(),ee(109,W9,24,3,"div",47)(110,$9,25,0,"div",48)(111,Y9,2,1,"div",49)(112,Z9,18,1,"div",50)(113,tz,66,17,"div",51)(114,iz,96,23,"div",52),l(115,"div",53)(116,"div",54)(117,"p"),P(118,"i",55),c(),l(119,"p"),P(120,"i",5),d(121),c()(),l(122,"div",56)(123,"div",57),P(124,"div",58),l(125,"span"),d(126,"\u0645\u062A\u0627\u062D\u0629"),c()(),l(127,"div",57),P(128,"div",59),l(129,"span"),d(130,"\u0645\u0634\u063A\u0648\u0644\u0629"),c()(),l(131,"div",57),P(132,"div",60),l(133,"span"),d(134,"\u0635\u064A\u0627\u0646\u0629"),c()()()()()),t&2&&(g(),R("ngIf",i.isLoading),g(11),Ue("active",i.viewMode==="list"),g(3),Ue("active",i.viewMode==="grid"),g(3),Ue("active",i.viewMode==="3d"),g(14),te(i.statistics.totalRooms),g(8),te(i.statistics.availableRooms),g(8),te(i.statistics.occupiedRooms),g(8),te(i.statistics.maintenanceRooms),g(8),te(i.statistics.totalCapacity),g(10),de("ngModel",i.filter.floor),g(3),R("ngForOf",(i.schoolMap==null?null:i.schoolMap.floors)||Cs(24,J4)),g(5),de("ngModel",i.filter.building),g(13),de("ngModel",i.filter.status),g(13),de("ngModel",i.filter.capacity),g(),R("ngIf",i.viewMode==="3d"),g(),R("ngIf",i.viewMode==="3d"),g(),R("ngIf",i.viewMode==="grid"),g(),R("ngIf",i.viewMode==="list"),g(),R("ngIf",i.selectedRoom),g(),R("ngIf",i.isAddingRoom||i.isEditingRoom),g(7),K(" \u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u063A\u0631\u0641: ",i.statistics.totalRooms," \u063A\u0631\u0641\u0629 "))},dependencies:[Zn,yr,vi,xi,Rn,Wr,si,Xn,xr,$r,Qo,Fy,Bn,Gr,cn,Yn,Tn],styles:[".rooms-management[_ngcontent-%COMP%]{font-family:Cairo,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;padding:20px;color:#333}.control-bar[_ngcontent-%COMP%]{background:#fffffff2;backdrop-filter:blur(10px);border-radius:20px;padding:20px 30px;margin-bottom:20px;box-shadow:0 10px 40px #0000001a;display:flex;justify-content:space-between;align-items:center;border:2px solid #fff}.title-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:28px;display:flex;align-items:center;gap:15px}.school-name[_ngcontent-%COMP%]{color:#7f8c8d;font-size:16px;margin-top:5px}.controls[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center}.view-controls[_ngcontent-%COMP%]{display:flex;background:#f8f9fa;border-radius:12px;padding:5px}.view-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:none;background:transparent;padding:10px 20px;border-radius:8px;transition:all .3s}.view-controls[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{background:#3498db;color:#fff;box-shadow:0 4px 15px #3498db4d}.stats-panel[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fffffff2;border-radius:15px;padding:25px;display:flex;align-items:center;gap:20px;transition:transform .3s,box-shadow .3s;box-shadow:0 8px 30px #00000014;border:2px solid transparent}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 40px #00000026}.stat-card.available[_ngcontent-%COMP%]{border-color:#2ecc71}.stat-card.occupied[_ngcontent-%COMP%]{border-color:#e74c3c}.stat-card.maintenance[_ngcontent-%COMP%]{border-color:#f39c12}.stat-icon[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:30px;color:#fff}.stat-card.available[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2ecc71,#27ae60)}.stat-card.occupied[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b)}.stat-card.maintenance[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f39c12,#e67e22)}.stat-card[_ngcontent-%COMP%]:not(.available):not(.occupied):not(.maintenance)   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9)}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#2c3e50;font-size:16px}.stat-number[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#2c3e50;margin:0}.filter-panel[_ngcontent-%COMP%]{background:#fffffff2;border-radius:15px;padding:20px;margin-bottom:30px;box-shadow:0 8px 30px #00000014}.filter-title[_ngcontent-%COMP%]{font-size:18px;color:#2c3e50;margin-bottom:20px;display:flex;align-items:center;gap:10px}.filter-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;align-items:end}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#7f8c8d;font-size:14px;display:flex;align-items:center;gap:5px}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 15px;border:2px solid #e0e0e0;border-radius:10px;background:#fff;font-size:16px;transition:border-color .3s}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.navigation-panel[_ngcontent-%COMP%]{background:#ffffffe6;border-radius:15px;padding:15px;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 5px 20px #0000001a}.floor-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.btn-nav[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;border:none;padding:12px 25px;border-radius:10px;font-size:16px;cursor:pointer;display:flex;align-items:center;gap:10px;transition:all .3s}.btn-nav[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #3498db4d}.current-floor[_ngcontent-%COMP%]{text-align:center}.floor-number[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#2c3e50;display:flex;align-items:center;justify-content:center;gap:10px}.building-name[_ngcontent-%COMP%]{color:#7f8c8d;font-size:14px;margin-top:5px}.zoom-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.btn-zoom[_ngcontent-%COMP%], .btn-reset[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;border:none;background:#f8f9fa;color:#2c3e50;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s}.btn-zoom[_ngcontent-%COMP%]:hover, .btn-reset[_ngcontent-%COMP%]:hover{background:#3498db;color:#fff;transform:scale(1.1)}.zoom-level[_ngcontent-%COMP%]{font-weight:700;color:#2c3e50;min-width:60px;text-align:center}.game-view[_ngcontent-%COMP%]{background:#0000001a;border-radius:15px;overflow:hidden;margin-bottom:30px;box-shadow:0 15px 50px #0003}.canvas-container[_ngcontent-%COMP%]{position:relative;height:600px}.game-canvas[_ngcontent-%COMP%]{width:100%;height:100%;display:block;border-radius:15px}.game-instructions[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:20px;background:#fffffff2;padding:20px;border-radius:10px;max-width:300px;backdrop-filter:blur(10px);border:2px solid white}.game-instructions[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 15px;color:#2c3e50;display:flex;align-items:center;gap:10px}.game-instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.game-instructions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;color:#7f8c8d;font-size:14px}.key[_ngcontent-%COMP%]{display:inline-block;background:#2c3e50;color:#fff;padding:2px 8px;border-radius:4px;font-family:monospace;margin:0 3px}.rooms-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:25px;padding:20px}.room-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;overflow:hidden;box-shadow:0 10px 40px #0000001a;transition:all .3s;cursor:pointer;border:3px solid transparent}.room-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 20px 50px #0003}.room-card.available[_ngcontent-%COMP%]{border-color:#2ecc71}.room-card.occupied[_ngcontent-%COMP%]{border-color:#e74c3c}.room-card.maintenance[_ngcontent-%COMP%]{border-color:#f39c12}.room-header[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);display:flex;justify-content:space-between;align-items:center}.room-name[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#2c3e50}.room-status[_ngcontent-%COMP%]{padding:6px 15px;border-radius:20px;font-size:14px;display:flex;align-items:center;gap:8px}.room-status.available[_ngcontent-%COMP%]{background:#2ecc711a;color:#27ae60}.room-status.occupied[_ngcontent-%COMP%]{background:#e74c3c1a;color:#c0392b}.room-status.maintenance[_ngcontent-%COMP%]{background:#f39c121a;color:#d35400}.room-body[_ngcontent-%COMP%]{padding:20px;display:flex;gap:20px;align-items:center}.room-icon[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#3498db,#2980b9);display:flex;align-items:center;justify-content:center;font-size:30px;color:#fff}.room-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#7f8c8d;display:flex;align-items:center;gap:10px}.room-actions[_ngcontent-%COMP%]{padding:15px 20px;background:#f8f9fa;display:flex;gap:10px;justify-content:flex-end}.btn-action[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;border:none;background:#fff;color:#7f8c8d;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s;box-shadow:0 4px 15px #0000001a}.btn-action[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 25px #00000026;color:#3498db}.btn-action.danger[_ngcontent-%COMP%]:hover{color:#e74c3c}.rooms-table[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:15px;overflow:hidden;box-shadow:0 10px 40px #0000001a}.rooms-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9)}.rooms-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:20px;color:#fff;text-align:right;font-weight:600}.rooms-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f0f0f0;transition:all .3s}.rooms-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.rooms-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#3498db1a}.rooms-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 20px;text-align:right}.room-name-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.room-color-indicator[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;border:2px solid white;box-shadow:0 0 0 2px #f0f0f0}.capacity-badge[_ngcontent-%COMP%]{background:#3498db;color:#fff;padding:5px 15px;border-radius:20px;font-weight:700}.status-badge[_ngcontent-%COMP%]{padding:8px 20px;border-radius:20px;font-size:14px;display:inline-flex;align-items:center;gap:8px}.status-badge.available[_ngcontent-%COMP%]{background:#2ecc711a;color:#27ae60}.status-badge.occupied[_ngcontent-%COMP%]{background:#e74c3c1a;color:#c0392b}.status-badge.maintenance[_ngcontent-%COMP%]{background:#f39c121a;color:#d35400}.actions-cell[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end}.btn-action.small[_ngcontent-%COMP%]{width:35px;height:35px;font-size:14px}.details-panel[_ngcontent-%COMP%]{background:#fff;border-radius:15px;overflow:hidden;box-shadow:0 10px 40px #0000001a;margin-top:30px}.panel-header[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(135deg,#2c3e50,#34495e);color:#fff;display:flex;justify-content:space-between;align-items:center}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:15px}.btn-close[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:none;background:#ffffff1a;color:#fff;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s}.btn-close[_ngcontent-%COMP%]:hover{background:#fff3;transform:rotate(90deg)}.room-details[_ngcontent-%COMP%]{padding:30px}.detail-row[_ngcontent-%COMP%]{display:flex;margin-bottom:25px;align-items:center}.detail-label[_ngcontent-%COMP%]{width:150px;color:#7f8c8d;font-weight:600}.detail-value[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:20px}.status-controls[_ngcontent-%COMP%]{display:flex;gap:10px}.btn-status[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;border:2px solid #e0e0e0;background:#fff;color:#7f8c8d;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:8px}.btn-status.active[_ngcontent-%COMP%]{border-color:#3498db;background:#3498db;color:#fff}.btn-status[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #0000001a}.capacity-display[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px 25px;border-radius:10px;font-size:18px;font-weight:700;display:flex;align-items:center;gap:15px}.equipment-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.equipment-tag[_ngcontent-%COMP%]{background:#f8f9fa;padding:8px 15px;border-radius:20px;font-size:14px;display:flex;align-items:center;gap:8px}.schedule-section[_ngcontent-%COMP%]{padding:0 30px 30px}.schedule-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:20px;display:flex;align-items:center;gap:10px}.schedule-table[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px;overflow:hidden}.schedule-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);background:#2c3e50;color:#fff;padding:15px 20px;font-weight:600}.schedule-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);padding:15px 20px;border-bottom:1px solid #e0e0e0}.schedule-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.schedule-row[_ngcontent-%COMP%]:hover{background:#fff}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;backdrop-filter:blur(5px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:20px;width:100%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 25px 80px #0000004d;animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{padding:25px 30px;background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:10}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:15px}.modal-body[_ngcontent-%COMP%]{padding:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:25px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;color:#2c3e50;font-weight:600}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:15px;border:2px solid #e0e0e0;border-radius:10px;font-size:16px;transition:all .3s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.color-picker[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.color-picker[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{width:50px;height:50px;border:none;border-radius:50%;overflow:hidden;cursor:pointer}.color-preview[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:10px;border:2px solid #e0e0e0}.equipment-selector[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;padding:20px;background:#f8f9fa;border-radius:10px}.equipment-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px;background:#fff;border-radius:8px;cursor:pointer;transition:all .3s}.equipment-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background:#f0f0f0;transform:translateY(-2px)}.equipment-selector[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;margin-top:30px;padding-top:20px;border-top:2px solid #f0f0f0}.loading-screen[_ngcontent-%COMP%]{position:fixed;inset:0;background:#fffffff2;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:2000;backdrop-filter:blur(10px)}.loader[_ngcontent-%COMP%]{text-align:center}.school-building[_ngcontent-%COMP%]{width:150px;height:150px;position:relative;margin:0 auto 40px;animation:_ngcontent-%COMP%_bounce 2s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}.building-roof[_ngcontent-%COMP%]{width:0;height:0;border-left:75px solid transparent;border-right:75px solid transparent;border-bottom:40px solid #e74c3c;margin:0 auto}.building-body[_ngcontent-%COMP%]{width:140px;height:90px;background:#3498db;margin:0 auto;position:relative;border-radius:5px}.window[_ngcontent-%COMP%]{width:20px;height:30px;background:#f1c40f;position:absolute;border-radius:3px}.window[_ngcontent-%COMP%]:nth-child(1){top:20px;left:20px}.window[_ngcontent-%COMP%]:nth-child(2){top:20px;right:20px}.window[_ngcontent-%COMP%]:nth-child(3){top:50px;left:20px}.window[_ngcontent-%COMP%]:nth-child(4){top:50px;right:20px}.window[_ngcontent-%COMP%]:nth-child(5){top:20px;left:60px}.window[_ngcontent-%COMP%]:nth-child(6){top:50px;left:60px}.building-door[_ngcontent-%COMP%]{width:40px;height:60px;background:#8b4513;position:absolute;bottom:0;left:50%;transform:translate(-50%);border-radius:5px 5px 0 0}.loader[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#2c3e50;font-size:18px;margin-top:20px}.footer[_ngcontent-%COMP%]{margin-top:40px;padding:30px;background:#ffffffe6;border-radius:15px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 5px 20px #0000001a}.footer-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:#7f8c8d;display:flex;align-items:center;gap:10px}.legend[_ngcontent-%COMP%]{display:flex;gap:25px}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.legend-color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;border:2px solid white;box-shadow:0 0 0 2px #f0f0f0}.legend-color.available[_ngcontent-%COMP%]{background:#2ecc71}.legend-color.occupied[_ngcontent-%COMP%]{background:#e74c3c}.legend-color.maintenance[_ngcontent-%COMP%]{background:#f39c12}.btn[_ngcontent-%COMP%]{padding:12px 30px;border-radius:10px;border:none;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s;display:inline-flex;align-items:center;justify-content:center;gap:10px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;box-shadow:0 8px 25px #3498db4d}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 15px 40px #3498db66}.btn-secondary[_ngcontent-%COMP%]{background:#f8f9fa;color:#2c3e50;border:2px solid #e0e0e0}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e9ecef;transform:translateY(-2px);box-shadow:0 8px 25px #0000001a}@media (max-width: 768px){.control-bar[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.stats-panel[_ngcontent-%COMP%], .rooms-grid[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.navigation-panel[_ngcontent-%COMP%], .floor-navigation[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.canvas-container[_ngcontent-%COMP%]{height:400px}.game-instructions[_ngcontent-%COMP%]{position:static;max-width:100%;margin:20px}.filter-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}.schedule-header[_ngcontent-%COMP%], .schedule-row[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.footer[_ngcontent-%COMP%]{flex-direction:column;gap:20px;text-align:center}.legend[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}}"]})};var Yi=ou(vc());var ea=class n{constructor(e,t){this.http=e;this.authService=t}apiUrl="/api";removeStudentFromClass(e,t){return this.http.delete(`${this.apiUrl}/classes/${e}/unenroll/${t}`,{headers:this.authService.getAuthHeaders()})}getClasses(){return this.http.get(`${this.apiUrl}/classes`,{headers:this.authService.getAuthHeaders()})}getClassById(e){return this.http.get(`${this.apiUrl}/classes/${e}`,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(t){return new(t||n)(De(bn),De(gn))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qc=class n{constructor(e,t){this.http=e;this.authService=t}apiUrl="/api";getTeachers(){return this.http.get(`${this.apiUrl}/teachers`,{headers:this.authService.getAuthHeaders()})}getTeacherById(e){return this.http.get(`${this.apiUrl}/teachers/${e}`,{headers:this.authService.getAuthHeaders()})}createTeacher(e){return this.http.post(`${this.apiUrl}/teachers`,e,{headers:this.authService.getAuthHeaders()})}updateTeacher(e,t){return this.http.put(`${this.apiUrl}/teachers/${e}`,t,{headers:this.authService.getAuthHeaders()})}deleteTeacher(e){return this.http.delete(`${this.apiUrl}/teachers/${e}`,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(t){return new(t||n)(De(bn),De(gn))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})};var ta=ou(vc());var eu=class n{constructor(e){this.ngZone=e;window.addEventListener("beforeunload",()=>{this.disconnect()})}port=null;writer=null;reader=null;isConnected=!1;PRINT_WIDTH=576;PRINT_HEIGHT=900;CANVAS_WIDTH=576;CANVAS_HEIGHT=900;MAX_CHUNK_SIZE=1024;COMPANY_NAME="\u0623\u0643\u0627\u062F\u064A\u0645\u064A\u0629 \u0627\u0644\u0631\u0648\u0627\u062F \u0644\u0644\u062A\u0639\u0644\u064A\u0645 \u0648\u0627\u0644\u0645\u0639\u0627\u0631\u0641";DEVELOPER_NAME="\u0631\u064A\u062F\u0632\u0643\u0633";FOOTER_TEXT="\u062A\u062A\u0645\u0646\u0649 \u0644\u0643\u0645 \u062A\u062C\u0631\u0628\u0629 \u062A\u0639\u0644\u064A\u0645\u064A\u0629 \u0645\u0645\u062A\u0639\u0629 \u0648\u0645\u0641\u064A\u062F\u0629";COMPANY_ADDRESS="\u0627\u0644\u062C\u0632\u0627\u0626\u0631\u060C \u0648\u0644\u0627\u064A\u0629 \u0627\u0644\u062C\u0632\u0627\u0626\u0631";QR_CODE_TEXT=`\u0623\u0643\u0627\u062F\u064A\u0645\u064A\u0629 \u0627\u0644\u0631\u0648\u0627\u062F \u0644\u0644\u062A\u0639\u0644\u064A\u0645 \u0648\u0627\u0644\u0645\u0639\u0627\u0631\u0641
\u0627\u0644\u0645\u0648\u0642\u0639: academy-arrowad.edu.dz
\u0647\u0627\u062A\u0641: 1234567890`;REDOX_LOGO_URL="https://redox-sm.onrender.com/favicon.ico";ACADEMY_LOGO_URL="https://redox-sm.onrender.com/favicon.ico";connectToThermalPrinter(e=115200){return $t(this,null,function*(){try{if(!("serial"in navigator))throw new Error("\u0648\u0627\u062C\u0647\u0629 \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u063A\u064A\u0631 \u0645\u062F\u0639\u0648\u0645\u0629 \u0641\u064A \u0647\u0630\u0627 \u0627\u0644\u0645\u062A\u0635\u0641\u062D. \u0627\u0644\u0631\u062C\u0627\u0621 \u0627\u0633\u062A\u062E\u062F\u0627\u0645 Chrome \u0623\u0648 Edge.");return this.port=yield navigator.serial.requestPort(),yield this.port.open({baudRate:e,dataBits:8,stopBits:1,parity:"none",flowControl:"none"}),this.writer=this.port.writable.getWriter(),yield this.writer.write(new Uint8Array([27,64])),yield this.writer.write(new Uint8Array([27,51,24])),this.isConnected=!0,this.ngZone.run(()=>{ta.default.fire({icon:"success",title:"\u2705 \u062A\u0645 \u0627\u0644\u0627\u062A\u0635\u0627\u0644",text:"\u062A\u0645 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0627\u0644\u062D\u0631\u0627\u0631\u064A\u0629 \u0628\u0646\u062C\u0627\u062D",timer:1500,showConfirmButton:!1})}),console.log("\u2705 \u062A\u0645 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0628\u0646\u062C\u0627\u062D"),!0}catch(t){return console.error("\u274C \u062E\u0637\u0623 \u0627\u0644\u0627\u062A\u0635\u0627\u0644:",t),this.showConnectionError(t),this.isConnected=!1,!1}})}generateQRCode(e){let t=document.createElement("canvas");t.width=120,t.height=120;let i=t.getContext("2d");i.fillStyle="#FFFFFF",i.fillRect(0,0,t.width,t.height),i.fillStyle="#000000";let r=100,o=(t.width-r)/2,s=(t.height-r)/2;return i.fillRect(o,s,r,r),i.fillStyle="#FFFFFF",i.fillRect(o+10,s+10,r-20,r-20),i.fillStyle="#000000",i.font="bold 10px Arial",i.textAlign="center",i.fillText("QR Code",t.width/2,t.height-5),t}loadImage(e){return $t(this,null,function*(){return new Promise((t,i)=>{let r=new Image;r.crossOrigin="anonymous",r.onload=()=>t(r),r.onerror=i,r.src=e})})}createReceiptCanvas(e){return $t(this,null,function*(){let t=document.createElement("canvas");t.width=this.CANVAS_WIDTH,t.height=this.CANVAS_HEIGHT;let i=t.getContext("2d");i.fillStyle="#FFFFFF",i.fillRect(0,0,t.width,t.height),i.fillStyle="#000000",i.textAlign="center",i.lineWidth=2;try{let f=yield this.loadImage(this.REDOX_LOGO_URL);i.drawImage(f,20,20,80,80),i.font="bold 20px Arial",i.fillStyle="#2C3E50",i.textAlign="left",i.fillText("AR",470,40),i.textAlign="center"}catch{console.warn("\u0644\u0645 \u064A\u062A\u0645 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0634\u0639\u0627\u0631\u0627\u062A\u060C \u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0627\u0644\u0646\u0635 \u0627\u0644\u0628\u062F\u064A\u0644")}i.font='bold 38px "Arial", sans-serif',i.fillStyle="#000000",this.wrapText(i,this.COMPANY_NAME,t.width/2,60,t.width-40),i.font='bold 32px "Arial", sans-serif',i.fillText("\u0625\u064A\u0635\u0640\u0640\u0640\u0627\u0644 \u062F\u0641\u0640\u0640\u0640\u0639 \u0631\u0645\u0633\u0640\u0640\u0640\u064A",t.width/2,110),this.drawDoubleDivider(i,20,140,t.width-40);let r=this.generateQRCode(this.QR_CODE_TEXT);i.drawImage(r,t.width-140,160,100,100),i.textAlign="right",i.font='bold 24px "Arial", sans-serif';let o=180;i.strokeStyle="#000000",i.lineWidth=1,i.strokeRect(20,160,t.width-180,110),i.fillText(`\u0631\u0642\u0645 \u0627\u0644\u0625\u064A\u0635\u0627\u0644: ${e.receiptNumber}`,t.width-180,o),o+=30,i.fillText(`\u0627\u0644\u062A\u0627\u0631\u064A\u062E: ${e.date}`,t.width-180,o),o+=30,i.fillText(`\u0627\u0644\u0648\u0642\u062A: ${e.time}`,t.width-180,o),o+=30,i.fillText(`\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639: ${this.translatePaymentMethod(e.paymentMethod)}`,t.width-180,o),o+=50,this.drawDivider(i,20,o,t.width-40,"#000000",2),o+=30,i.font='bold 28px "Arial", sans-serif',i.fillStyle="#2C3E50",i.fillText("\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628",t.width-20,o),o+=35,i.font='bold 26px "Arial", sans-serif',i.fillStyle="#000000",i.fillText(`\u0627\u0644\u0627\u0633\u0640\u0640\u0640\u0645: ${e.studentName}`,t.width-20,o),o+=35,i.strokeStyle="#2C3E50",i.lineWidth=1.5;let s=o-70;i.strokeRect(20,s,t.width-40,140);let a=t.width-40;i.fillText(`\u0631\u0642\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644: ${e.studentId}`,a,o),o+=35,e.academicYear&&(i.fillText(`\u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062F\u0631\u0627\u0633\u064A: ${e.academicYear}`,a,o),o+=35),e.parentPhone&&(i.fillText(`\u0647\u0627\u062A\u0641 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631: ${e.parentPhone}`,a,o),o+=35),o+=30,this.drawDoubleDivider(i,20,o,t.width-40),o+=40,i.font='bold 28px "Arial", sans-serif',i.fillStyle="#2C3E50",i.fillText("\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062F\u0641\u0639",t.width-20,o),o+=40,i.font='bold 26px "Arial", sans-serif',i.fillStyle="#000000";let u=o;return i.strokeStyle="#000000",i.lineWidth=1,i.fillStyle="#2C3E50",i.fillRect(20,u,t.width-40,40),i.fillStyle="#FFFFFF",i.font='bold 22px "Arial", sans-serif',i.textAlign="center",i.fillText("\u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644",t.width/2,u+28),i.fillText("\u0627\u0644\u0645\u0628\u0644\u063A (\u062F\u062C)",100,u+28),o+=40,i.fillStyle="#FFFFFF",i.strokeRect(20,o,t.width-40,40),i.fillStyle="#000000",i.textAlign="right",i.font='22px "Arial", sans-serif',i.fillText(e.className,t.width-100,o+28),i.textAlign="center",i.font='bold 22px "Arial", sans-serif',i.fillText(e.amount.toLocaleString("ar-EG"),100,o+28),o+=40,i.strokeRect(20,o,t.width-40,40),i.textAlign="right",i.font='22px "Arial", sans-serif',i.fillText(`\u0644\u0641\u062A\u0631\u0629: ${e.month}`,t.width-100,o+28),o+=50,i.textAlign="center",i.font='bold 32px "Arial", sans-serif',i.fillStyle="#000000",i.fillText("\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A:",t.width/2-50,o),i.font='bold 36px "Arial", sans-serif',i.fillStyle="#2C3E50",i.fillText(`${e.amount.toLocaleString("ar-EG")} \u062F.\u062C`,t.width/2+60,o),o+=60,this.drawFancyDivider(i,20,o,t.width-40),o+=40,e.notes&&(i.textAlign="right",i.font='bold 22px "Arial", sans-serif',i.fillStyle="#2C3E50",i.fillText("\u0645\u0644\u0627\u062D\u0638\u0627\u062A:",t.width-20,o),o+=30,i.font='20px "Arial", sans-serif',i.fillStyle="#000000",this.wrapTextRight(i,e.notes,t.width-20,o,t.width-40),o+=60),this.drawDoubleDivider(i,20,o,t.width-40),o+=40,i.textAlign="center",i.font='bold 26px "Arial", sans-serif',i.fillStyle="#2C3E50",i.fillText("\u062A\u0645\u062A \u0627\u0644\u0637\u0628\u0627\u0639\u0629 \u0628\u0648\u0627\u0633\u0637\u0629 \u0646\u0638\u0627\u0645",t.width/2,o),o+=35,i.font='bold 32px "Arial", sans-serif',i.fillStyle="#E74C3C",i.fillText(this.DEVELOPER_NAME,t.width/2,o),o+=40,i.font='bold 24px "Arial", sans-serif',i.fillStyle="#000000",i.fillText(this.FOOTER_TEXT,t.width/2,o),o+=40,i.font='bold 22px "Arial", sans-serif',i.fillStyle="#2C3E50",i.fillText("\u0646\u0633\u062E\u0629 \u0627\u0644\u0637\u0627\u0644\u0628",t.width/2,o),o+=50,i.font='bold 26px "Arial", sans-serif',i.fillStyle="#27AE60",i.fillText("\u0634\u0643\u0631\u0627\u064B \u0644\u062B\u0642\u062A\u0643\u0645 \u0627\u0644\u063A\u0627\u0644\u064A\u0629",t.width/2,o),o+=35,i.font='20px "Arial", sans-serif',i.fillStyle="#000000",i.fillText("\u0647\u0630\u0627 \u0625\u064A\u0635\u0627\u0644 \u0631\u0633\u0645\u064A \u0648\u064A\u064F\u0631\u062C\u0649 \u0627\u0644\u0627\u062D\u062A\u0641\u0627\u0638 \u0628\u0647 \u0644\u0644\u0645\u0631\u0627\u062C\u0639\u0629",t.width/2,o),o+=30,this.drawDivider(i,20,o,t.width-40,"#000000",1),o+=40,i.font='bold 24px "Arial", sans-serif',i.fillStyle="#2C3E50",i.fillText("\uFDFA \u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u0649 \u0633\u064A\u062F\u0646\u0627 \u0645\u062D\u0645\u062F",t.width/2,o),o+=35,i.font='20px "Arial", sans-serif',i.fillStyle="#000000",i.fillText("\u0644\u0627 \u062A\u0646\u0633\u0648\u0627 \u0627\u0644\u0635\u0644\u0627\u0629 \u0639\u0644\u0649 \u0631\u0633\u0648\u0644 \u0627\u0644\u0644\u0647",t.width/2,o),t})}canvasToRaster(e){let r=e.getContext("2d").getImageData(0,0,e.width,e.height).data,o=Math.ceil(e.width/8),s=new Uint8Array(o*e.height);for(let a=0;a<e.height;a++)for(let u=0;u<e.width;u++){let f=(a*e.width+u)*4;if(.299*r[f]+.587*r[f+1]+.114*r[f+2]<128){let h=a*o+Math.floor(u/8),v=7-u%8;s[h]|=1<<v}}return s}printRasterImage(e,t){return $t(this,null,function*(){try{if(!this.writer)throw new Error("\u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u063A\u064A\u0631 \u0645\u062A\u0635\u0644\u0629");let i=Math.ceil(t.width/8),r=t.height,o=new Uint8Array([29,118,48,0,i&255,i>>8&255,r&255,r>>8&255]);yield this.writer.write(new Uint8Array([27,64,27,51,24])),yield this.writer.write(o);let s=this.MAX_CHUNK_SIZE;for(let a=0;a<e.length;a+=s){let u=e.slice(a,a+s);yield this.writer.write(u),yield new Promise(f=>setTimeout(f,5))}return yield this.writer.write(new Uint8Array([27,100,6])),yield this.writer.write(new Uint8Array([29,86,65,3])),!0}catch(i){throw console.error("\u274C \u062E\u0637\u0623 \u0641\u064A \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0646\u0642\u0637\u064A\u0629:",i),i}})}printProfessionalReceipt(e){return $t(this,null,function*(){if(!this.isConnected&&!(yield this.connectToThermalPrinter()))return this.showError("\u0641\u0634\u0644 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629"),!1;try{this.showLoading("\u062C\u0627\u0631\u064A \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0625\u064A\u0635\u0627\u0644...");let t=yield this.createReceiptCanvas(e),i=this.canvasToRaster(t);if(this.showLoading("\u062C\u0627\u0631\u064A \u0627\u0644\u0637\u0628\u0627\u0639\u0629..."),yield this.printRasterImage(i,t))return this.showSuccessToast("\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0625\u064A\u0635\u0627\u0644 \u0628\u0646\u062C\u0627\u062D"),!0;throw new Error("\u0641\u0634\u0644 \u0627\u0644\u0637\u0628\u0627\u0639\u0629")}catch(t){return this.handleError(t),!1}})}wrapTextRight(e,t,i,r,o){let s=t.split(" "),a="",u=30;for(let f=0;f<s.length;f++){let p=a+s[f]+" ";e.measureText(p).width>o&&f>0?(e.fillText(a,i,r),a=s[f]+" ",r+=u):a=p}e.fillText(a,i,r)}wrapText(e,t,i,r,o){let s=t.split(" "),a="",u=40;for(let f=0;f<s.length;f++){let p=a+s[f]+" ";e.measureText(p).width>o&&f>0?(e.fillText(a,i,r),a=s[f]+" ",r+=u):a=p}e.fillText(a,i,r)}drawDoubleDivider(e,t,i,r){e.beginPath(),e.strokeStyle="#000000",e.lineWidth=1,e.moveTo(t,i),e.lineTo(t+r,i),e.moveTo(t,i+3),e.lineTo(t+r,i+3),e.stroke()}drawFancyDivider(e,t,i,r){let o=r/20;e.beginPath(),e.strokeStyle="#2C3E50",e.lineWidth=2;for(let s=0;s<20;s++)s%2===0&&(e.moveTo(t+s*o,i),e.lineTo(t+(s+1)*o,i));e.stroke()}drawDivider(e,t,i,r,o="#000000",s=1){e.beginPath(),e.strokeStyle=o,e.lineWidth=s,e.moveTo(t,i),e.lineTo(t+r,i),e.stroke()}translatePaymentMethod(e){return{cash:"\u0646\u0642\u062F\u0627\u064B",bank:"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A",card:"\u0628\u0637\u0627\u0642\u0629 \u0625\u0626\u062A\u0645\u0627\u0646",check:"\u0634\u064A\u0643",online:"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",mobile:"\u062F\u0641\u0639 \u0645\u062D\u0645\u0648\u0644"}[e]||e}showConnectionError(e){let t="\u274C \u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629: ";e.message.includes("permission")||e.name==="SecurityError"?t+="\u064A\u062C\u0628 \u0645\u0646\u062D \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0629 \u0644\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649 \u0627\u0644\u0637\u0627\u0628\u0639\u0629":e.message.includes("supported")?t+="\u0647\u0630\u0647 \u0627\u0644\u0645\u064A\u0632\u0629 \u063A\u064A\u0631 \u0645\u062F\u0639\u0648\u0645\u0629 \u0641\u064A \u0645\u062A\u0635\u0641\u062D\u0643. \u0627\u0644\u0631\u062C\u0627\u0621 \u0627\u0633\u062A\u062E\u062F\u0627\u0645 Chrome \u0623\u0648 Edge":e.message.includes("No device selected")?t+="\u0644\u0645 \u064A\u062A\u0645 \u0627\u062E\u062A\u064A\u0627\u0631 \u0637\u0627\u0628\u0639\u0629":e.message.includes("baudRate")?t+="\u0645\u0639\u062F\u0644 \u0627\u0644\u0628\u0627\u0648\u062F \u063A\u064A\u0631 \u0635\u062D\u064A\u062D. \u062A\u0623\u0643\u062F \u0645\u0646 \u0636\u0628\u0637 \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0639\u0644\u0649 115200 \u0628\u0627\u0648\u062F":t+=e.message,this.ngZone.run(()=>{ta.default.fire({icon:"error",title:"\u062E\u0637\u0623",text:t,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B",footer:"<small>\u062A\u0623\u0643\u062F \u0645\u0646 \u0623\u0646 \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0645\u062A\u0635\u0644\u0629 \u0648\u062A\u0639\u0645\u0644 \u0628\u0634\u0643\u0644 \u0635\u062D\u064A\u062D</small>"})})}showSuccessToast(e){this.ngZone.run(()=>{ta.default.fire({icon:"success",title:"\u2705 \u0646\u062C\u0627\u062D",text:e,timer:2e3,showConfirmButton:!1,position:"top-end",toast:!0})})}showLoading(e){this.ngZone.run(()=>{ta.default.fire({title:e,allowOutsideClick:!1,showConfirmButton:!1,willOpen:()=>{ta.default.showLoading()}})})}handleError(e){console.error("\u274C \u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u0637\u0627\u0628\u0639\u0629:",e),this.ngZone.run(()=>{ta.default.fire({icon:"error",title:"\u274C \u062E\u0637\u0623",text:"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u0637\u0628\u0627\u0639\u0629: "+e.message,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B"})}),this.isConnected=!1}showError(e){this.ngZone.run(()=>{ta.default.fire({icon:"error",title:"\u062E\u0637\u0623",text:e,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B"})})}disconnect(){return $t(this,null,function*(){try{this.writer&&(yield this.writer.releaseLock(),this.writer=null),this.reader&&(yield this.reader.releaseLock(),this.reader=null),this.port&&(yield this.port.close(),this.port=null),this.isConnected=!1,console.log("\u062A\u0645 \u0642\u0637\u0639 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629")}catch(e){console.error("\u062E\u0637\u0623 \u0641\u064A \u0642\u0637\u0639 \u0627\u0644\u0627\u062A\u0635\u0627\u0644:",e)}})}checkConnectionStatus(){return this.isConnected}getPrinterStatus(){return{isConnected:this.isConnected,port:this.port?"\u0645\u062A\u0635\u0644":"\u063A\u064A\u0631 \u0645\u062A\u0635\u0644",timestamp:new Date().toLocaleString("ar-EG"),width:this.PRINT_WIDTH,height:this.PRINT_HEIGHT,academy:this.COMPANY_NAME,developer:this.DEVELOPER_NAME}}printMonthlyPaymentReceipt(e){return $t(this,null,function*(){let t={receiptNumber:`PAY-${Date.now().toString().slice(-8)}`,date:new Date().toLocaleDateString("ar-EG"),time:new Date().toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}),studentName:e.studentName||"\u0637\u0627\u0644\u0628",studentId:e.studentId||"\u0628\u062F\u0648\u0646 \u0631\u0642\u0645",className:e.className||"\u0645\u0627\u062F\u0629 \u062F\u0631\u0627\u0633\u064A\u0629",month:e.month||"\u0634\u0647\u0631",amount:e.amount||0,paymentMethod:e.paymentMethod||"cash",academicYear:e.academicYear||"",parentPhone:e.parentPhone||"",notes:"\u062A\u0645 \u0633\u062F\u0627\u062F \u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u0634\u0647\u0631\u064A \u0628\u0646\u062C\u0627\u062D. \u0646\u062A\u0645\u0646\u0649 \u0644\u0644\u0637\u0627\u0644\u0628 \u0627\u0644\u062A\u0648\u0641\u064A\u0642 \u0648\u0627\u0644\u0646\u062C\u0627\u062D."};return yield this.printProfessionalReceipt(t)})}printStudentMonthlyReport(e,t,i){return $t(this,null,function*(){try{let r=new Date,o={receiptNumber:`RPT-${r.getTime().toString().slice(-8)}`,date:r.toLocaleDateString("ar-EG"),time:r.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}),studentName:e.name||"\u0637\u0627\u0644\u0628",studentId:e.studentId||"\u0628\u062F\u0648\u0646 \u0631\u0642\u0645",className:"\u062A\u0642\u0631\u064A\u0631 \u0634\u0647\u0631\u064A \u0634\u0627\u0645\u0644",month:r.toLocaleDateString("ar-EG",{month:"long",year:"numeric"}),amount:i.totalPaid||0,paymentMethod:"\u062A\u0642\u0631\u064A\u0631",academicYear:e.academicYear||"",parentPhone:e.parentPhone||"",notes:`\u0646\u0633\u0628\u0629 \u0627\u0644\u062D\u0636\u0648\u0631: ${t.attendanceRate||0}%
\u062D\u0636\u0648\u0631: ${t.present||0} | \u063A\u064A\u0627\u0628: ${t.absent||0} | \u062A\u0623\u062E\u0631: ${t.late||0}
\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u062F\u0641\u0648\u0639: ${i.totalPaid||0} \u062F.\u062C | \u0627\u0644\u0645\u062A\u0628\u0642\u064A: ${i.pending||0} \u062F.\u062C`};return yield this.printProfessionalReceipt(o)}catch(r){return console.error("\u062E\u0637\u0623 \u0641\u064A \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u062A\u0642\u0631\u064A\u0631:",r),!1}})}printAdvancedTestPage(){return $t(this,null,function*(){if(!this.isConnected&&!(yield this.connectToThermalPrinter()))return!1;try{let e=document.createElement("canvas");e.width=this.CANVAS_WIDTH,e.height=this.CANVAS_HEIGHT;let t=e.getContext("2d");t.fillStyle="#FFFFFF",t.fillRect(0,0,e.width,e.height),t.fillStyle="#000000",t.textAlign="center",t.font='bold 40px "Arial", sans-serif',t.fillText("\u2728 \u0635\u0641\u062D\u0629 \u0627\u062E\u062A\u0628\u0627\u0631 \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u2728",e.width/2,60);let i=this.generateQRCode("\u0623\u0643\u0627\u062F\u064A\u0645\u064A\u0629 \u0627\u0644\u0631\u0648\u0627\u062F \u0644\u0644\u062A\u0639\u0644\u064A\u0645 \u0648\u0627\u0644\u0645\u0639\u0627\u0631\u0641 - \u0635\u0641\u062D\u0629 \u0627\u062E\u062A\u0628\u0627\u0631");t.drawImage(i,e.width/2-60,90,120,120),t.textAlign="right",t.font='bold 24px "Arial", sans-serif',t.fillText(`\u0627\u0644\u062A\u0627\u0631\u064A\u062E: ${new Date().toLocaleDateString("ar-EG")}`,e.width-20,250),t.fillText(`\u0627\u0644\u0648\u0642\u062A: ${new Date().toLocaleTimeString("ar-EG")}`,e.width-20,280),t.fillText(`\u0627\u0644\u0646\u0638\u0627\u0645: ${this.DEVELOPER_NAME}`,e.width-20,310),t.fillText(`\u0627\u0644\u0645\u0624\u0633\u0633\u0629: ${this.COMPANY_NAME}`,e.width-20,340),t.textAlign="center",t.font='bold 32px "Arial", sans-serif',t.fillText("\u0627\u062E\u062A\u0628\u0627\u0631 \u0627\u0644\u062E\u0637\u0648\u0637 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0648\u0627\u0644\u0644\u063A\u0629",e.width/2,400),t.font='26px "Arial", sans-serif',t.fillText("\u0645\u0631\u062D\u0628\u0627\u064B \u0628\u0643\u0645 \u0641\u064A \u0646\u0638\u0627\u0645 \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062A\u0639\u0644\u064A\u0645",e.width/2,440),t.fillText("\u0646\u0638\u0627\u0645 \u0645\u062A\u0643\u0627\u0645\u0644 \u0644\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0624\u0633\u0633\u0627\u062A \u0627\u0644\u062A\u0639\u0644\u064A\u0645\u064A\u0629",e.width/2,480),this.drawFancyDivider(t,20,520,e.width-40),t.fillStyle="#000000",t.fillRect(50,550,150,30),t.fillStyle="#666666",t.fillRect(50,585,150,30),t.fillStyle="#999999",t.fillRect(50,620,150,30),t.fillStyle="#000000",t.font='bold 20px "Arial", sans-serif',t.textAlign="left",t.fillText("\u062A\u062F\u0631\u062C \u0627\u0644\u0631\u0645\u0627\u062F\u064A",220,610),t.textAlign="center",t.font='bold 38px "Arial", sans-serif',t.fillStyle="#27AE60",t.fillText("\u2705 \u0627\u062E\u062A\u0628\u0627\u0631 \u0646\u0627\u062C\u062D \u2705",e.width/2,700),t.font='28px "Arial", sans-serif',t.fillStyle="#000000",t.fillText("\u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u062A\u0639\u0645\u0644 \u0628\u0634\u0643\u0644 \u0645\u0645\u062A\u0627\u0632",e.width/2,750),t.font='bold 26px "Arial", sans-serif',t.fillStyle="#2C3E50",t.fillText(this.COMPANY_NAME,e.width/2,800),t.fillText(this.DEVELOPER_NAME,e.width/2,840),t.font='22px "Arial", sans-serif',t.fillText("\uFDFA \u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u0649 \u0633\u064A\u062F\u0646\u0627 \u0645\u062D\u0645\u062F",e.width/2,880);let r=this.canvasToRaster(e);return(yield this.printRasterImage(r,e))?(this.showSuccessToast("\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 \u0635\u0641\u062D\u0629 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631 \u0628\u0646\u062C\u0627\u062D"),!0):!1}catch(e){return this.handleError(e),!1}})}quickTest(){return $t(this,null,function*(){try{let e={receiptNumber:"TEST-001",date:new Date().toLocaleDateString("ar-EG"),time:new Date().toLocaleTimeString("ar-EG"),studentName:"\u0627\u062E\u062A\u0628\u0627\u0631 \u0627\u0644\u0646\u0638\u0627\u0645",studentId:"TEST-001",className:"\u0627\u062E\u062A\u0628\u0627\u0631 \u0627\u0644\u0637\u0628\u0627\u0639\u0629",month:"\u0634\u0647\u0631 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631",amount:123456,paymentMethod:"cash",notes:"\u0647\u0630\u0627 \u0625\u064A\u0635\u0627\u0644 \u0627\u062E\u062A\u0628\u0627\u0631\u064A \u0644\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0639\u0645\u0644 \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0648\u0627\u0644\u0623\u0631\u0642\u0627\u0645 \u0627\u0644\u0639\u0631\u0628\u064A\u0629"};return yield this.printProfessionalReceipt(e)}catch(e){return console.error("\u0641\u0634\u0644 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631 \u0627\u0644\u0633\u0631\u064A\u0639:",e),!1}})}printWelcomeMessage(){return $t(this,null,function*(){if(!this.isConnected&&!(yield this.connectToThermalPrinter()))return!1;try{let e=document.createElement("canvas");e.width=this.CANVAS_WIDTH,e.height=600;let t=e.getContext("2d");t.fillStyle="#FFFFFF",t.fillRect(0,0,e.width,e.height),t.fillStyle="#000000",t.textAlign="center",t.font='bold 40px "Arial", sans-serif',t.fillText("\u0645\u0631\u062D\u0628\u0627\u064B \u0628\u0643\u0645 \u0641\u064A",e.width/2,60),t.fillText("\u0646\u0638\u0627\u0645 \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062A\u0639\u0644\u064A\u0645",e.width/2,110),t.font='28px "Arial", sans-serif',t.fillText("\u062A\u0647\u0627\u0646\u064A\u0646\u0627!",e.width/2,180),t.fillText("\u062A\u0645 \u0625\u0639\u062F\u0627\u062F \u0627\u0644\u0646\u0638\u0627\u0645 \u0628\u0646\u062C\u0627\u062D",e.width/2,220);let i=this.generateQRCode(this.QR_CODE_TEXT);t.drawImage(i,e.width/2-60,260,120,120),t.textAlign="right",t.font='24px "Arial", sans-serif';let r=400;t.fillText("\u2713 \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0637\u0644\u0627\u0628 \u0648\u0627\u0644\u0634\u0639\u0628",e.width-20,r),r+=30,t.fillText("\u2713 \u0646\u0638\u0627\u0645 \u0627\u0644\u062D\u0636\u0648\u0631 \u0648\u0627\u0644\u063A\u064A\u0627\u0628",e.width-20,r),r+=30,t.fillText("\u2713 \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0627\u0644\u0645\u0627\u0644\u064A\u0629",e.width-20,r),r+=30,t.fillText("\u2713 \u062A\u0642\u0627\u0631\u064A\u0631 \u062A\u0641\u0635\u064A\u0644\u064A\u0629",e.width-20,r),r+=30,t.fillText("\u2713 \u0637\u0628\u0627\u0639\u0629 \u0625\u064A\u0635\u0627\u0644\u0627\u062A \u0627\u062D\u062A\u0631\u0627\u0641\u064A\u0629",e.width-20,r),t.textAlign="center",t.font='bold 30px "Arial", sans-serif',t.fillText("\u062A\u062A\u0645\u0646\u0649 \u0644\u0643\u0645",e.width/2,520),t.fillText("\u062A\u062C\u0631\u0628\u0629 \u062A\u0639\u0644\u064A\u0645\u064A\u0629 \u0645\u0645\u062A\u0639\u0629 \u0648\u0645\u0641\u064A\u062F\u0629",e.width/2,560),t.font='24px "Arial", sans-serif',t.fillText("\u0646\u062D\u0648 \u0645\u0633\u062A\u0642\u0628\u0644 \u0632\u0627\u0647\u0631 \u0628\u0627\u0644\u0639\u0644\u0645 \u0648\u0627\u0644\u0645\u0639\u0631\u0641\u0629",e.width/2,600);let o=this.canvasToRaster(e);return(yield this.printRasterImage(o,e))?(this.showSuccessToast("\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062A\u0631\u062D\u064A\u0628 \u0628\u0646\u062C\u0627\u062D"),!0):!1}catch(e){return console.error("\u062E\u0637\u0623 \u0641\u064A \u0637\u0628\u0627\u0639\u0629 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062A\u0631\u062D\u064A\u0628:",e),!1}})}static \u0275fac=function(t){return new(t||n)(De(An))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})};function rz(n,e){n&1&&(l(0,"div",102)(1,"div",103),P(2,"div",104),l(3,"p"),d(4,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A..."),c()()())}function oz(n,e){n&1&&P(0,"i",105)}function sz(n,e){n&1&&P(0,"i",106)}function az(n,e){if(n&1){let t=Me();l(0,"button",83),O("click",function(){T(t);let r=E();return D(r.connectToPrinter())}),P(1,"i",107),d(2," \u0627\u0644\u0627\u062A\u0635\u0627\u0644 "),c()}}function lz(n,e){if(n&1){let t=Me();l(0,"button",83),O("click",function(){T(t);let r=E();return D(r.disconnectPrinter())}),P(1,"i",107),d(2," \u0642\u0637\u0639 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 "),c()}}function cz(n,e){if(n&1&&(l(0,"option",108),d(1),c()),n&2){let t=e.$implicit;R("value",t._id),g(),Un(" ",t.name," - ",t.studentId," ")}}function uz(n,e){if(n&1&&(l(0,"option",108),d(1),c()),n&2){let t=e.$implicit;R("value",t._id),g(),K(" ",t.name," ")}}function dz(n,e){if(n&1&&(l(0,"option",108),d(1),c()),n&2){let t=e.$implicit;R("value",t),g(),K(" ",t," ")}}function fz(n,e){n&1&&P(0,"i",115)}function hz(n,e){n&1&&P(0,"i",106)}function pz(n,e){if(n&1){let t=Me();l(0,"div",109)(1,"div",110),P(2,"i",27),d(3),c(),l(4,"div",111)(5,"button",112),O("click",function(){T(t);let r=E();return D(r.markSelectedAsPaid())}),ee(6,fz,1,0,"i",113)(7,hz,1,0,"i",10),d(8),c(),l(9,"button",114),O("click",function(){T(t);let r=E();return D(r.printSelectedReceipts())}),P(10,"i",17),d(11," \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0625\u064A\u0635\u0627\u0644\u0627\u062A "),c(),l(12,"button",36),O("click",function(){T(t);let r=E();return D(r.selectedPayments.clear())}),P(13,"i",37),d(14," \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062A\u062D\u062F\u064A\u062F "),c()()()}if(n&2){let t=E();g(3),K(" ",t.selectedPayments.size," \u062F\u0641\u0639\u0629 \u0645\u062D\u062F\u062F\u0629 "),g(2),R("disabled",t.isBulkActionLoading),g(),R("ngIf",!t.isBulkActionLoading),g(),R("ngIf",t.isBulkActionLoading),g(),K(" ",t.isBulkActionLoading?"\u062C\u0627\u0631\u064A \u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629...":"\u062A\u0633\u062F\u064A\u062F \u0627\u0644\u0645\u062D\u062F\u062F"," ")}}function mz(n,e){if(n&1){let t=Me();l(0,"button",142),O("click",function(){T(t);let r=E().$implicit,o=E(2);return D(o.markPaymentAsPaid(r))}),P(1,"i",115),c()}}function gz(n,e){if(n&1){let t=Me();l(0,"button",143),O("click",function(){T(t);let r=E().$implicit,o=E(2);return D(o.cancelPayment(r))}),P(1,"i",144),c()}}function _z(n,e){if(n&1){let t=Me();l(0,"tr")(1,"td",118)(2,"input",119),O("change",function(){let r=T(t).$implicit,o=E(2);return D(o.togglePaymentSelection(r._id))}),c()(),l(3,"td"),d(4),pn(5,"date"),c(),l(6,"td",122)(7,"div",123),d(8),c(),l(9,"div",124),d(10),c()(),l(11,"td"),d(12),l(13,"div",125),d(14),c()(),l(15,"td",126)(16,"span",127),d(17),pn(18,"number"),c()(),l(19,"td"),d(20),c(),l(21,"td")(22,"span",128),d(23),c()(),l(24,"td")(25,"span",129),d(26),c()(),l(27,"td",130)(28,"span",131),d(29),c(),l(30,"button",132),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.printSinglePaymentReceipt(r))}),P(31,"i",17),c()(),l(32,"td",133),d(33),c(),l(34,"td",134)(35,"div",135),ee(36,mz,2,0,"button",136),l(37,"button",137),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.openEditPaymentModal(r))}),P(38,"i",138),c(),ee(39,gz,2,0,"button",139),l(40,"button",140),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.deletePayment(r))}),P(41,"i",141),c()()()()}if(n&2){let t=e.$implicit,i=E(2);Ue("selected",i.selectedPayments.has(t._id)),g(2),R("checked",i.selectedPayments.has(t._id)),g(2),K(" ",t.paymentDate?gi(5,21,t.paymentDate,"yyyy/MM/dd"):"\u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639"," "),g(4),te((t.student==null?null:t.student.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),g(2),te((t.student==null?null:t.student.studentId)||"\u0628\u062F\u0648\u0646 \u0631\u0642\u0645"),g(2),K(" ",(t.class==null?null:t.class.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"," "),g(2),te(t.class==null||t.class.teacher==null?null:t.class.teacher.name),g(3),K("",gr(18,24,t.amount)," \u062F.\u062C"),g(3),te(t.month),g(2),vn(t.paymentMethod),g(),K(" ",i.getPaymentMethodText(t.paymentMethod)," "),g(2),vn(i.getStatusClass(t.status)),g(),K(" ",i.getStatusText(t.status)," "),g(3),te(t.invoiceNumber||"\u0628\u062F\u0648\u0646 \u0631\u0642\u0645"),g(),R("disabled",!i.isPrinterConnected),g(3),K(" ",t.notes||"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0644\u0627\u062D\u0638\u0627\u062A"," "),g(3),R("ngIf",t.status!=="paid"),g(3),R("ngIf",t.status==="paid")}}function vz(n,e){if(n&1){let t=Me();l(0,"div",116)(1,"table",117)(2,"thead")(3,"tr")(4,"th",118)(5,"input",119),O("change",function(){T(t);let r=E();return D(r.selectAllPayments())}),c()(),l(6,"th",120),O("click",function(){T(t);let r=E();return D(r.sort("paymentDate"))}),d(7," \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639 "),P(8,"i",84),c(),l(9,"th",120),O("click",function(){T(t);let r=E();return D(r.sort("student.name"))}),d(10," \u0627\u0644\u0637\u0627\u0644\u0628 "),P(11,"i",84),c(),l(12,"th",120),O("click",function(){T(t);let r=E();return D(r.sort("class.name"))}),d(13," \u0627\u0644\u062D\u0635\u0629 "),P(14,"i",84),c(),l(15,"th",120),O("click",function(){T(t);let r=E();return D(r.sort("amount"))}),d(16," \u0627\u0644\u0645\u0628\u0644\u063A "),P(17,"i",84),c(),l(18,"th"),d(19,"\u0627\u0644\u0634\u0647\u0631"),c(),l(20,"th"),d(21,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639"),c(),l(22,"th"),d(23,"\u0627\u0644\u062D\u0627\u0644\u0629"),c(),l(24,"th"),d(25,"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629"),c(),l(26,"th"),d(27,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),c(),l(28,"th"),d(29,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),c()()(),l(30,"tbody"),ee(31,_z,42,26,"tr",121),c()()()}if(n&2){let t=E();g(5),R("checked",t.selectedPayments.size===t.filteredPayments.length&&t.filteredPayments.length>0),g(3),Ue("fa-sort-up",t.sortField==="paymentDate"&&t.sortDirection==="asc")("fa-sort-down",t.sortField==="paymentDate"&&t.sortDirection==="desc"),g(3),Ue("fa-sort-up",t.sortField==="student.name"&&t.sortDirection==="asc")("fa-sort-down",t.sortField==="student.name"&&t.sortDirection==="desc"),g(3),Ue("fa-sort-up",t.sortField==="class.name"&&t.sortDirection==="asc")("fa-sort-down",t.sortField==="class.name"&&t.sortDirection==="desc"),g(3),Ue("fa-sort-up",t.sortField==="amount"&&t.sortDirection==="asc")("fa-sort-down",t.sortField==="amount"&&t.sortDirection==="desc"),g(14),R("ngForOf",t.paginatedPayments)}}function xz(n,e){if(n&1&&(l(0,"div",152)(1,"span",153),d(2,"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629:"),c(),l(3,"span",154),d(4),c()()),n&2){let t=E().$implicit;g(4),te(t.invoiceNumber)}}function yz(n,e){if(n&1&&(l(0,"div",152)(1,"span",153),d(2,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A:"),c(),l(3,"span",164),d(4),c()()),n&2){let t=E().$implicit;g(4),te(t.notes)}}function bz(n,e){if(n&1){let t=Me();l(0,"button",165),O("click",function(){T(t);let r=E().$implicit,o=E(2);return D(o.markPaymentAsPaid(r))}),P(1,"i",115),d(2," \u062A\u0633\u062F\u064A\u062F "),c()}}function Cz(n,e){if(n&1){let t=Me();l(0,"button",166),O("click",function(){T(t);let r=E().$implicit,o=E(2);return D(o.cancelPayment(r))}),P(1,"i",144),d(2," \u0625\u0644\u063A\u0627\u0621 "),c()}}function wz(n,e){if(n&1){let t=Me();l(0,"div",147)(1,"div",148)(2,"div",149)(3,"input",119),O("change",function(){let r=T(t).$implicit,o=E(2);return D(o.togglePaymentSelection(r._id))}),c()(),l(4,"div",150)(5,"h4"),d(6),c(),l(7,"span",124),d(8),c()(),l(9,"span",129),d(10),c()(),l(11,"div",151)(12,"div",152)(13,"span",153),d(14,"\u0627\u0644\u062D\u0635\u0629:"),c(),l(15,"span",154),d(16),c()(),l(17,"div",152)(18,"span",153),d(19,"\u0627\u0644\u0634\u0647\u0631:"),c(),l(20,"span",154),d(21),c()(),l(22,"div",152)(23,"span",153),d(24,"\u0627\u0644\u0645\u0628\u0644\u063A:"),c(),l(25,"span",155),d(26),pn(27,"number"),c()(),l(28,"div",152)(29,"span",153),d(30,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639:"),c(),l(31,"span",154),d(32),pn(33,"date"),c()(),l(34,"div",152)(35,"span",153),d(36,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639:"),c(),l(37,"span",128),d(38),c()(),ee(39,xz,5,1,"div",156)(40,yz,5,1,"div",156),c(),l(41,"div",157)(42,"div",158),ee(43,bz,3,0,"button",159),l(44,"button",160),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.openEditPaymentModal(r))}),P(45,"i",138),d(46," \u062A\u0639\u062F\u064A\u0644 "),c(),ee(47,Cz,3,0,"button",161),l(48,"button",162),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.deletePayment(r))}),P(49,"i",141),d(50," \u062D\u0630\u0641 "),c(),l(51,"button",163),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.printSinglePaymentReceipt(r))}),P(52,"i",17),d(53," \u0637\u0628\u0627\u0639\u0629 "),c()()()()}if(n&2){let t=e.$implicit,i=E(2);Ue("selected",i.selectedPayments.has(t._id)),g(3),R("checked",i.selectedPayments.has(t._id)),g(3),te((t.student==null?null:t.student.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),g(2),te((t.student==null?null:t.student.studentId)||"\u0628\u062F\u0648\u0646 \u0631\u0642\u0645"),g(),vn(i.getStatusClass(t.status)),g(),K(" ",i.getStatusText(t.status)," "),g(6),te((t.class==null?null:t.class.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),g(5),te(t.month),g(5),K("",gr(27,20,t.amount)," \u062F.\u062C"),g(6),te(t.paymentDate?gi(33,22,t.paymentDate,"yyyy/MM/dd"):"\u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639"),g(5),vn(t.paymentMethod),g(),K(" ",i.getPaymentMethodText(t.paymentMethod)," "),g(),R("ngIf",t.invoiceNumber),g(),R("ngIf",t.notes),g(3),R("ngIf",t.status!=="paid"),g(4),R("ngIf",t.status==="paid"),g(4),R("disabled",!i.isPrinterConnected)}}function Mz(n,e){if(n&1&&(l(0,"div",145),ee(1,wz,54,25,"div",146),c()),n&2){let t=E();g(),R("ngForOf",t.paginatedPayments)}}function Sz(n,e){if(n&1){let t=Me();l(0,"div",167)(1,"div",168),P(2,"i",169),l(3,"h3"),d(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u062F\u0641\u0648\u0639\u0627\u062A"),c(),l(5,"p"),d(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0645\u062F\u0641\u0648\u0639\u0627\u062A \u062A\u0637\u0627\u0628\u0642 \u0645\u0639\u0627\u064A\u064A\u0631 \u0627\u0644\u0628\u062D\u062B \u0627\u0644\u062E\u0627\u0635\u0629 \u0628\u0643"),c(),l(7,"button",6),O("click",function(){T(t);let r=E();return D(r.clearFilters())}),P(8,"i",37),d(9," \u0645\u0633\u062D \u0627\u0644\u0641\u0644\u0627\u062A\u0631 "),c()()()}}function Ez(n,e){if(n&1){let t=Me();l(0,"span",172),O("click",function(){T(t);let r=E().$implicit,o=E();return D(o.currentPage=r)}),d(1),c()}if(n&2){let t=E().$implicit,i=E();Ue("active",t===i.currentPage),g(),K(" ",t," ")}}function Az(n,e){if(n&1&&(l(0,"span",173),d(1),c()),n&2){let t=E().$implicit;g(),K(" ",t," ")}}function Tz(n,e){if(n&1&&(xs(0),ee(1,Ez,2,3,"span",170)(2,Az,2,1,"span",171),ys()),n&2){let t=e.$implicit;g(),R("ngIf",typeof t=="number"),g(),R("ngIf",typeof t=="string")}}function Dz(n,e){if(n&1&&(l(0,"option",108),d(1),c()),n&2){let t=e.$implicit;R("value",t._id),g(),bs(" ",t.name," - ",t.studentId," - ",t.grade||""," ")}}function Pz(n,e){n&1&&(l(0,"div",202),d(1," \u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0637\u0627\u0644\u0628 "),c())}function Iz(n,e){if(n&1&&(l(0,"option",108),d(1),c()),n&2){let t=e.$implicit;R("value",t._id),g(),Un(" ",t.name," - ",t.teacher==null?null:t.teacher.name," ")}}function Oz(n,e){n&1&&(l(0,"div",202),d(1," \u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u062D\u0635\u0629 "),c())}function Rz(n,e){n&1&&(l(0,"div",202),d(1," \u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0645\u0628\u0644\u063A \u0635\u062D\u064A\u062D "),c())}function kz(n,e){if(n&1&&(l(0,"option",108),d(1),c()),n&2){let t=e.$implicit;R("value",t),g(),K(" ",t," ")}}function Nz(n,e){n&1&&(l(0,"div",202),d(1," \u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0634\u0647\u0631 "),c())}function Fz(n,e){n&1&&P(0,"i",203)}function Lz(n,e){n&1&&P(0,"i",106)}function Vz(n,e){if(n&1){let t=Me();l(0,"div",174)(1,"div",175)(2,"div",176)(3,"h3"),P(4,"i",4),d(5," \u062A\u0633\u062C\u064A\u0644 \u062F\u0641\u0639\u0629 \u062C\u062F\u064A\u062F\u0629 "),c(),l(6,"button",177),O("click",function(){T(t);let r=E();return D(r.closeNewPaymentModal())}),P(7,"i",37),c()(),l(8,"form",178),O("ngSubmit",function(){T(t);let r=E();return D(r.onSubmitNewPayment())}),l(9,"div",179)(10,"div",180)(11,"label",181),P(12,"i",41),d(13," \u0627\u0644\u0637\u0627\u0644\u0628 * "),c(),l(14,"select",182)(15,"option",43),d(16,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0637\u0627\u0644\u0628"),c(),ee(17,Dz,2,4,"option",44),c(),ee(18,Pz,2,0,"div",183),c(),l(19,"div",180)(20,"label",184),P(21,"i",46),d(22," \u0627\u0644\u062D\u0635\u0629 * "),c(),l(23,"select",185)(24,"option",43),d(25,"\u0627\u062E\u062A\u0631 \u0627\u0644\u062D\u0635\u0629"),c(),ee(26,Iz,2,3,"option",44),c(),ee(27,Oz,2,0,"div",183),c(),l(28,"div",186)(29,"div",180)(30,"label",187),P(31,"i",25),d(32," \u0627\u0644\u0645\u0628\u0644\u063A (\u062F.\u062C) * "),c(),P(33,"input",188),ee(34,Rz,2,0,"div",183),c(),l(35,"div",180)(36,"label",189),P(37,"i",49),d(38," \u0627\u0644\u0634\u0647\u0631 * "),c(),l(39,"select",190)(40,"option",43),d(41,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0634\u0647\u0631"),c(),ee(42,kz,2,2,"option",44),c(),ee(43,Nz,2,0,"div",183),c()(),l(44,"div",186)(45,"div",180)(46,"label",191),P(47,"i",58),d(48," \u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639 "),c(),l(49,"select",192)(50,"option",60),d(51,"\u0646\u0642\u062F\u064A"),c(),l(52,"option",61),d(53,"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A"),c(),l(54,"option",62),d(55,"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),c(),l(56,"option",63),d(57,"\u062F\u0641\u0639 \u0645\u062D\u0645\u0648\u0644"),c(),l(58,"option",64),d(59,"\u0634\u064A\u0643"),c()()(),l(60,"div",180)(61,"label",193),P(62,"i",66),d(63," \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639 "),c(),P(64,"input",194),c()(),l(65,"div",180)(66,"label",195),P(67,"i",196),d(68," \u0645\u0644\u0627\u062D\u0638\u0627\u062A "),c(),P(69,"textarea",197),c()(),l(70,"div",198)(71,"button",199),O("click",function(){T(t);let r=E();return D(r.closeNewPaymentModal())}),d(72," \u0625\u0644\u063A\u0627\u0621 "),c(),l(73,"button",200),ee(74,Fz,1,0,"i",201)(75,Lz,1,0,"i",10),d(76),c()()()()()}if(n&2){let t,i,r,o,s,a,u,f,p,h,v=E();g(8),R("formGroup",v.newPaymentForm),g(2),Ue("error",((t=v.newPaymentForm.get("studentId"))==null?null:t.invalid)&&((t=v.newPaymentForm.get("studentId"))==null?null:t.touched)),g(7),R("ngForOf",v.students),g(),R("ngIf",((i=v.newPaymentForm.get("studentId"))==null?null:i.invalid)&&((i=v.newPaymentForm.get("studentId"))==null?null:i.touched)),g(),Ue("error",((r=v.newPaymentForm.get("classId"))==null?null:r.invalid)&&((r=v.newPaymentForm.get("classId"))==null?null:r.touched)),g(7),R("ngForOf",v.getStudentClasses(((o=v.newPaymentForm.get("studentId"))==null?null:o.value)||"")),g(),R("ngIf",((s=v.newPaymentForm.get("classId"))==null?null:s.invalid)&&((s=v.newPaymentForm.get("classId"))==null?null:s.touched)),g(2),Ue("error",((a=v.newPaymentForm.get("amount"))==null?null:a.invalid)&&((a=v.newPaymentForm.get("amount"))==null?null:a.touched)),g(5),R("ngIf",((u=v.newPaymentForm.get("amount"))==null?null:u.invalid)&&((u=v.newPaymentForm.get("amount"))==null?null:u.touched)),g(),Ue("error",((f=v.newPaymentForm.get("month"))==null?null:f.invalid)&&((f=v.newPaymentForm.get("month"))==null?null:f.touched)),g(7),R("ngForOf",v.availableMonths),g(),R("ngIf",((p=v.newPaymentForm.get("month"))==null?null:p.invalid)&&((p=v.newPaymentForm.get("month"))==null?null:p.touched)),g(17),Ue("error",((h=v.newPaymentForm.get("paymentDate"))==null?null:h.invalid)&&((h=v.newPaymentForm.get("paymentDate"))==null?null:h.touched)),g(13),R("disabled",v.newPaymentForm.invalid||v.isRecordingPayment),g(),R("ngIf",!v.isRecordingPayment),g(),R("ngIf",v.isRecordingPayment),g(),K(" ",v.isRecordingPayment?"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u0633\u062C\u064A\u0644...":"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629"," ")}}function Uz(n,e){if(n&1){let t=Me();l(0,"div",174)(1,"div",175)(2,"div",176)(3,"h3"),P(4,"i",138),d(5," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629 "),c(),l(6,"button",177),O("click",function(){T(t);let r=E();return D(r.isEditPaymentModalOpen=!1)}),P(7,"i",37),c()(),l(8,"div",179)(9,"div",204)(10,"div",205)(11,"span",153),d(12,"\u0627\u0644\u0637\u0627\u0644\u0628:"),c(),l(13,"span",154),d(14),c()(),l(15,"div",205)(16,"span",153),d(17,"\u0627\u0644\u062D\u0635\u0629:"),c(),l(18,"span",154),d(19),c()(),l(20,"div",205)(21,"span",153),d(22,"\u0627\u0644\u0634\u0647\u0631:"),c(),l(23,"span",154),d(24),c()(),l(25,"div",205)(26,"span",153),d(27,"\u0627\u0644\u062D\u0627\u0644\u0629:"),c(),l(28,"span",129),d(29),c()()(),l(30,"div",206)(31,"button",6),O("click",function(){T(t);let r=E();return D(r.updatePaymentAmount())}),P(32,"i",4),d(33," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0628\u0644\u063A "),c()()(),l(34,"div",198)(35,"button",199),O("click",function(){T(t);let r=E();return D(r.isEditPaymentModalOpen=!1)}),d(36," \u0625\u063A\u0644\u0627\u0642 "),c()()()()}if(n&2){let t=E();g(14),te(t.editingPayment==null||t.editingPayment.student==null?null:t.editingPayment.student.name),g(5),te(t.editingPayment==null||t.editingPayment.class==null?null:t.editingPayment.class.name),g(5),te(t.editingPayment==null?null:t.editingPayment.month),g(4),vn(t.getStatusClass((t.editingPayment==null?null:t.editingPayment.status)||"")),g(),K(" ",t.getStatusText((t.editingPayment==null?null:t.editingPayment.status)||"")," ")}}var Mg=class n{constructor(e,t,i,r,o,s,a){this.paymentsService=e;this.studentsService=t;this.lessonsService=i;this.teachersService=r;this.authService=o;this.printerService=s;this.fb=a;this.newPaymentForm=this.fb.group({studentId:["",bo.required],classId:["",bo.required],amount:["",[bo.required,bo.min(1)]],month:["",bo.required],paymentMethod:["cash",bo.required],paymentDate:[new Date().toISOString().split("T")[0],bo.required],notes:[""]}),this.generateAvailableMonths()}payments=[];filteredPayments=[];students=[];classes=[];teachers=[];isLoading=!0;isRecordingPayment=!1;isExporting=!1;filters={student:"",class:"",month:"",status:"",paymentMethod:"",startDate:"",endDate:""};newPaymentForm;isNewPaymentModalOpen=!1;selectedStudentForPayment=null;availableMonths=[];isEditPaymentModalOpen=!1;editingPayment=null;selectedPayments=new Set;isBulkActionLoading=!1;stats={totalPayments:0,totalAmount:0,pendingPayments:0,latePayments:0,paidAmount:0,pendingAmount:0};currentPage=1;itemsPerPage=20;totalPages=1;viewMode="table";sortField="paymentDate";sortDirection="desc";isPrinterConnected=!1;printerStatus="\u063A\u064A\u0631 \u0645\u062A\u0635\u0644";ngOnInit(){this.loadInitialData(),this.checkPrinterConnection(),this.updatePrinterStatus()}loadInitialData(){this.isLoading=!0,Fo({payments:this.paymentsService.getPayments(),students:this.studentsService.getStudents(),classes:this.lessonsService.getClasses(),teachers:this.teachersService.getTeachers()}).subscribe({next:e=>{this.payments=e.payments,this.students=e.students,this.classes=e.classes,this.teachers=e.teachers,this.applyFilters(),this.calculateStatistics(),this.isLoading=!1},error:e=>{console.error("Error loading data:",e),this.showError("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"),this.isLoading=!1}})}generateAvailableMonths(){let e=new Date,t=[];for(let i=-12;i<=6;i++){let r=new Date(e.getFullYear(),e.getMonth()+i,1),o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;t.push(o)}this.availableMonths=t}applyFilters(){let e=[...this.payments];if(this.filters.student&&(e=e.filter(t=>t.student?._id===this.filters.student||t.student?.name?.toLowerCase().includes(this.filters.student.toLowerCase()))),this.filters.class&&(e=e.filter(t=>t.class?._id===this.filters.class||t.class?.name?.toLowerCase().includes(this.filters.class.toLowerCase()))),this.filters.month&&(e=e.filter(t=>t.month===this.filters.month)),this.filters.status&&(e=e.filter(t=>t.status===this.filters.status)),this.filters.paymentMethod&&(e=e.filter(t=>t.paymentMethod===this.filters.paymentMethod)),this.filters.startDate){let t=new Date(this.filters.startDate);e=e.filter(i=>i.paymentDate?new Date(i.paymentDate)>=t:!1)}if(this.filters.endDate){let t=new Date(this.filters.endDate);t.setHours(23,59,59,999),e=e.filter(i=>i.paymentDate?new Date(i.paymentDate)<=t:!1)}e.sort((t,i)=>{let r=t[this.sortField],o=i[this.sortField];return this.sortField==="paymentDate"&&(r=t.paymentDate?new Date(t.paymentDate):new Date(0),o=i.paymentDate?new Date(i.paymentDate):new Date(0)),this.sortField==="student.name"&&(r=t.student?.name||"",o=i.student?.name||""),this.sortField==="class.name"&&(r=t.class?.name||"",o=i.class?.name||""),r<o?this.sortDirection==="asc"?-1:1:r>o?this.sortDirection==="asc"?1:-1:0}),this.filteredPayments=e,this.calculatePagination()}calculateStatistics(){this.stats.totalPayments=this.payments.length,this.stats.pendingPayments=this.payments.filter(e=>e.status==="pending").length,this.stats.latePayments=this.payments.filter(e=>e.status==="late").length,this.stats.totalAmount=this.payments.reduce((e,t)=>e+t.amount,0),this.stats.paidAmount=this.payments.filter(e=>e.status==="paid").reduce((e,t)=>e+t.amount,0),this.stats.pendingAmount=this.stats.totalAmount-this.stats.paidAmount}calculatePagination(){this.totalPages=Math.ceil(this.filteredPayments.length/this.itemsPerPage),this.currentPage=Math.max(1,Math.min(this.currentPage,this.totalPages))}get paginatedPayments(){let e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredPayments.slice(e,t)}getPaginatedInfo(){let e=(this.currentPage-1)*this.itemsPerPage+1,t=Math.min(this.currentPage*this.itemsPerPage,this.filteredPayments.length);return{start:e,end:t}}getPageNumbers(){let e=[];if(this.totalPages<=7)for(let i=1;i<=this.totalPages;i++)e.push(i);else{let i=Math.max(1,this.currentPage-3),r=Math.min(this.totalPages,this.currentPage+3);this.currentPage<=4?r=7:this.currentPage>=this.totalPages-3&&(i=this.totalPages-7+1);for(let o=i;o<=r;o++)e.push(o)}return e}clearFilters(){this.filters={student:"",class:"",month:"",status:"",paymentMethod:"",startDate:"",endDate:""},this.applyFilters()}sort(e){this.sortField===e?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortField=e,this.sortDirection="asc"),this.applyFilters()}openNewPaymentModal(e){e&&(this.selectedStudentForPayment=e,this.newPaymentForm.patchValue({studentId:e._id})),this.newPaymentForm.reset({paymentMethod:"cash",paymentDate:new Date().toISOString().split("T")[0],amount:"",month:"",classId:"",notes:""}),this.isNewPaymentModalOpen=!0}closeNewPaymentModal(){this.isNewPaymentModalOpen=!1,this.selectedStudentForPayment=null}onSubmitNewPayment(){if(this.newPaymentForm.invalid){this.markFormGroupTouched(this.newPaymentForm);return}this.isRecordingPayment=!0;let e=this.newPaymentForm.value;this.paymentsService.createPayment(e).subscribe({next:t=>{this.showSuccess("\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadInitialData(),this.closeNewPaymentModal(),this.isRecordingPayment=!1},error:t=>{console.error("Error recording payment:",t),this.showError("\u0641\u0634\u0644 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629"),this.isRecordingPayment=!1}})}markPaymentAsPaid(e){Yi.default.fire({title:"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062F\u0641\u0639",text:`\u0647\u0644 \u062A\u0631\u064A\u062F \u062A\u0623\u0643\u064A\u062F \u062F\u0641\u0639 \u0645\u0628\u0644\u063A ${e.amount} \u062F.\u062C \u0644\u0644\u0637\u0627\u0644\u0628 ${e.student?.name}\u061F`,icon:"question",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645\u060C \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062F\u0641\u0639",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",reverseButtons:!0}).then(t=>{if(t.isConfirmed){let i={paymentDate:new Date().toISOString(),paymentMethod:"cash"};this.paymentsService.payPayment(e._id,i).subscribe({next:r=>{this.showSuccess("\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639 \u0628\u0646\u062C\u0627\u062D");let o=this.payments.findIndex(s=>s._id===e._id);o!==-1&&(this.payments[o]=r,this.applyFilters(),this.calculateStatistics())},error:r=>{console.error("Error marking payment as paid:",r),this.showError("\u0641\u0634\u0644 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639")}})}})}openEditPaymentModal(e){this.editingPayment=xe({},e),this.isEditPaymentModalOpen=!0}updatePaymentAmount(){this.editingPayment&&Yi.default.fire({title:"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0628\u0644\u063A",input:"number",inputLabel:"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u062C\u062F\u064A\u062F",inputValue:this.editingPayment.amount,inputAttributes:{min:"1",step:"100"},showCancelButton:!0,confirmButtonText:"\u062D\u0641\u0638",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",reverseButtons:!0,inputValidator:e=>!e||Number(e)<=0?"\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0645\u0628\u0644\u063A \u0635\u062D\u064A\u062D":null}).then(e=>{if(e.isConfirmed){let t=Number(e.value);this.paymentsService.updatePaymentAmount(this.editingPayment._id,t).subscribe({next:i=>{this.showSuccess("\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0628\u0644\u063A \u0628\u0646\u062C\u0627\u062D");let r=this.payments.findIndex(o=>o._id===this.editingPayment._id);r!==-1&&(this.payments[r]=i,this.applyFilters(),this.calculateStatistics()),this.isEditPaymentModalOpen=!1},error:i=>{console.error("Error updating payment amount:",i),this.showError("\u0641\u0634\u0644 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0628\u0644\u063A")}})}})}cancelPayment(e){Yi.default.fire({title:"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0625\u0644\u063A\u0627\u0621",text:`\u0647\u0644 \u062A\u0631\u064A\u062F \u0625\u0644\u063A\u0627\u0621 \u062F\u0641\u0639\u0629 \u0645\u0628\u0644\u063A ${e.amount} \u062F.\u062C \u0644\u0644\u0637\u0627\u0644\u0628 ${e.student?.name}\u061F`,icon:"warning",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645\u060C \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062F\u0641\u0639\u0629",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u0623\u0645\u0631",confirmButtonColor:"#d33",reverseButtons:!0}).then(t=>{t.isConfirmed&&this.paymentsService.cancelPayment(e._id).subscribe({next:()=>{this.showSuccess("\u062A\u0645 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D");let i=this.payments.findIndex(r=>r._id===e._id);i!==-1&&(this.payments[i].status="pending",this.payments[i].paymentDate=null,this.applyFilters(),this.calculateStatistics())},error:i=>{console.error("Error canceling payment:",i),this.showError("\u0641\u0634\u0644 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062F\u0641\u0639\u0629")}})})}deletePayment(e){Yi.default.fire({title:"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u0630\u0641",text:`\u0647\u0644 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u062F\u0641\u0639\u0629 \u0645\u0628\u0644\u063A ${e.amount} \u062F.\u062C \u0644\u0644\u0637\u0627\u0644\u0628 ${e.student?.name}\u061F`,icon:"error",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645\u060C \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u0623\u0645\u0631",confirmButtonColor:"#d33",reverseButtons:!0}).then(t=>{t.isConfirmed&&this.paymentsService.deletePayment(e._id).subscribe({next:()=>{this.showSuccess("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D"),this.payments=this.payments.filter(i=>i._id!==e._id),this.applyFilters(),this.calculateStatistics()},error:i=>{console.error("Error deleting payment:",i),this.showError("\u0641\u0634\u0644 \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629")}})})}togglePaymentSelection(e){this.selectedPayments.has(e)?this.selectedPayments.delete(e):this.selectedPayments.add(e)}selectAllPayments(){this.selectedPayments.size===this.filteredPayments.length?this.selectedPayments.clear():this.filteredPayments.forEach(e=>this.selectedPayments.add(e._id))}markSelectedAsPaid(){if(this.selectedPayments.size===0){this.showWarning("\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u062F\u0641\u0639\u0627\u062A \u0623\u0648\u0644\u0627\u064B");return}Yi.default.fire({title:"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062F\u0641\u0639 \u0627\u0644\u062C\u0645\u0627\u0639\u064A",text:`\u0647\u0644 \u062A\u0631\u064A\u062F \u062A\u0623\u0643\u064A\u062F \u062F\u0641\u0639 ${this.selectedPayments.size} \u062F\u0641\u0639\u0629\u061F`,icon:"question",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645\u060C \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062F\u0641\u0639",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",reverseButtons:!0}).then(e=>{if(e.isConfirmed){this.isBulkActionLoading=!0;let t=Array.from(this.selectedPayments).map(i=>this.paymentsService.payPayment(i,{paymentDate:new Date().toISOString(),paymentMethod:"cash"}));Promise.all(t.map(i=>i.toPromise())).then(()=>{this.applyFilters(),this.calculateStatistics(),this.selectedPayments.clear(),this.isBulkActionLoading=!1,this.showSuccess(`\u062A\u0645 \u062A\u0633\u062F\u064A\u062F ${t.length} \u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D`)}).catch(i=>{console.error("Error in bulk payment:",i),this.showError("\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u064A \u062A\u0633\u062F\u064A\u062F \u0628\u0639\u0636 \u0627\u0644\u062F\u0641\u0639\u0627\u062A"),this.isBulkActionLoading=!1})}})}printSelectedReceipts(){return $t(this,null,function*(){if(this.selectedPayments.size===0){this.showWarning("\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u062F\u0641\u0639\u0627\u062A \u0623\u0648\u0644\u0627\u064B");return}let e=Array.from(this.selectedPayments),t=this.payments.filter(r=>e.includes(r._id));if(t.length===0){this.showError("\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062F\u0641\u0639\u0627\u062A \u0627\u0644\u0645\u062D\u062F\u062F\u0629");return}if(!this.isPrinterConnected&&!(yield this.connectToPrinter()))return;let i=0;for(let r of t)(yield this.printSinglePaymentReceipt(r))&&i++,yield new Promise(s=>setTimeout(s,1e3));i>0&&(this.showSuccess(`\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 ${i} \u0645\u0646 ${t.length} \u0625\u064A\u0635\u0627\u0644 \u0628\u0646\u062C\u0627\u062D`),i===t.length&&this.selectedPayments.clear())})}printSinglePaymentReceipt(e){return $t(this,null,function*(){if(!this.isPrinterConnected&&!(yield this.connectToPrinter()))return!1;let t={receiptNumber:e.invoiceNumber||`PAY-${Date.now().toString().slice(-8)}`,date:e.paymentDate?new Date(e.paymentDate).toLocaleDateString("ar-EG"):new Date().toLocaleDateString("ar-EG"),time:e.paymentDate?new Date(e.paymentDate).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}):new Date().toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}),studentName:e.student?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641",studentId:e.student?.studentId||"\u0628\u062F\u0648\u0646 \u0631\u0642\u0645",className:e.class?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641",month:e.month,amount:e.amount,paymentMethod:e.paymentMethod,academicYear:e.student?.academicYear||"",parentPhone:e.student?.parentPhone||"",notes:e.notes||`\u062D\u0627\u0644\u0629 \u0627\u0644\u062F\u0641\u0639: ${this.getStatusText(e.status)}`};try{let i=yield this.printerService.printProfessionalReceipt(t);return i&&this.showToast("\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 \u0625\u064A\u0635\u0627\u0644 \u0627\u0644\u062F\u0641\u0639"),i}catch(i){return console.error("Error printing receipt:",i),this.showError("\u0641\u0634\u0644 \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0625\u064A\u0635\u0627\u0644"),!1}})}connectToPrinter(){return $t(this,null,function*(){try{this.showLoading("\u062C\u0627\u0631\u064A \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629...");let e=yield this.printerService.connectToThermalPrinter();return this.isPrinterConnected=e,this.updatePrinterStatus(),e&&this.showSuccess("\u062A\u0645 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0628\u0646\u062C\u0627\u062D"),e}catch(e){return console.error("Error connecting to printer:",e),this.isPrinterConnected=!1,this.updatePrinterStatus(),!1}})}disconnectPrinter(){return $t(this,null,function*(){try{yield this.printerService.disconnect(),this.isPrinterConnected=!1,this.updatePrinterStatus(),this.showSuccess("\u062A\u0645 \u0642\u0637\u0639 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629")}catch(e){console.error("Error disconnecting printer:",e)}})}checkPrinterConnection(){this.isPrinterConnected=this.printerService.checkConnectionStatus(),this.updatePrinterStatus()}updatePrinterStatus(){if(this.isPrinterConnected){let e=this.printerService.getPrinterStatus();this.printerStatus=`\u0645\u062A\u0635\u0644 - ${e.timestamp}`}else this.printerStatus="\u063A\u064A\u0631 \u0645\u062A\u0635\u0644"}printTestPage(){return $t(this,null,function*(){if(!(!this.isPrinterConnected&&!(yield this.connectToPrinter())))try{this.showLoading("\u062C\u0627\u0631\u064A \u0637\u0628\u0627\u0639\u0629 \u0635\u0641\u062D\u0629 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631..."),(yield this.printerService.printAdvancedTestPage())&&(this.isPrinterConnected=!0,this.updatePrinterStatus(),this.showSuccess("\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 \u0635\u0641\u062D\u0629 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631 \u0628\u0646\u062C\u0627\u062D"))}catch(e){console.error("Error printing test page:",e),this.showError("\u0641\u0634\u0644 \u0637\u0628\u0627\u0639\u0629 \u0635\u0641\u062D\u0629 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631")}})}printWelcomeMessage(){return $t(this,null,function*(){if(!(!this.isPrinterConnected&&!(yield this.connectToPrinter())))try{this.showLoading("\u062C\u0627\u0631\u064A \u0637\u0628\u0627\u0639\u0629 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062A\u0631\u062D\u064A\u0628..."),(yield this.printerService.printWelcomeMessage())&&this.showSuccess("\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062A\u0631\u062D\u064A\u0628 \u0628\u0646\u062C\u0627\u062D")}catch(e){console.error("Error printing welcome message:",e),this.showError("\u0641\u0634\u0644 \u0637\u0628\u0627\u0639\u0629 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062A\u0631\u062D\u064A\u0628")}})}printMonthlyReport(){return $t(this,null,function*(){if(!this.isPrinterConnected&&!(yield this.connectToPrinter()))return;let e=this.paginatedPayments[0];if(!e){this.showWarning("\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0644\u0639\u0631\u0636 \u0627\u0644\u062A\u0642\u0631\u064A\u0631");return}let t=e.student;if(!t){this.showError("\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u0643\u0627\u0641\u064A\u0629 \u0644\u0644\u0637\u0627\u0644\u0628");return}let i={attendanceRate:85,present:17,absent:3,late:2},r={totalPaid:this.stats.paidAmount,pending:this.stats.pendingAmount};try{this.showLoading("\u062C\u0627\u0631\u064A \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0634\u0647\u0631\u064A..."),(yield this.printerService.printStudentMonthlyReport(t,i,r))&&this.showSuccess("\u062A\u0645 \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0634\u0647\u0631\u064A \u0628\u0646\u062C\u0627\u062D")}catch(o){console.error("Error printing monthly report:",o),this.showError("\u0641\u0634\u0644 \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0634\u0647\u0631\u064A")}})}exportToExcel(){this.isExporting=!0;let e=["\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629","\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628","\u0631\u0642\u0645 \u0627\u0644\u0637\u0627\u0644\u0628","\u0627\u0644\u062D\u0635\u0629","\u0627\u0644\u0645\u0628\u0644\u063A","\u0627\u0644\u0634\u0647\u0631","\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639","\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639","\u0627\u0644\u062D\u0627\u0644\u0629","\u0645\u0644\u0627\u062D\u0638\u0627\u062A"],t=this.filteredPayments.map(a=>[a.invoiceNumber||"N/A",a.student?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641",a.student?.studentId||"N/A",a.class?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641",a.amount,a.month,a.paymentDate?new Date(a.paymentDate).toLocaleDateString("ar-EG"):"\u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639",this.getPaymentMethodText(a.paymentMethod),this.getStatusText(a.status),a.notes||""]),i=[e.join(","),...t.map(a=>a.map(u=>`"${u}"`).join(","))].join(`
`),r=new Blob(["\uFEFF"+i],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),s=URL.createObjectURL(r);o.setAttribute("href",s),o.setAttribute("download",`\u0645\u062F\u0641\u0648\u0639\u0627\u062A_${new Date().toISOString().split("T")[0]}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),this.isExporting=!1,this.showSuccess("\u062A\u0645 \u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0628\u0646\u062C\u0627\u062D")}getStatusText(e){return{paid:"\u0645\u062F\u0641\u0648\u0639",pending:"\u0645\u0639\u0644\u0642",late:"\u0645\u062A\u0623\u062E\u0631"}[e]||e}getPaymentMethodText(e){return{cash:"\u0646\u0642\u062F\u064A",bank:"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A",online:"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",mobile:"\u062F\u0641\u0639 \u0645\u062D\u0645\u0648\u0644",check:"\u0634\u064A\u0643"}[e]||e}getStatusClass(e){switch(e){case"paid":return"status-paid";case"pending":return"status-pending";case"late":return"status-late";default:return""}}getStudentClasses(e){return this.classes.filter(t=>t.students?.some(i=>i._id===e))}markFormGroupTouched(e){Object.values(e.controls).forEach(t=>{t.markAsTouched(),t instanceof Ps&&this.markFormGroupTouched(t)})}showSuccess(e){Yi.default.fire({icon:"success",title:"\u0646\u062C\u0627\u062D",text:e,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B",timer:3e3})}showError(e){Yi.default.fire({icon:"error",title:"\u062E\u0637\u0623",text:e,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B"})}showWarning(e){Yi.default.fire({icon:"warning",title:"\u062A\u062D\u0630\u064A\u0631",text:e,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B"})}showToast(e){Yi.default.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:i=>{i.onmouseenter=Yi.default.stopTimer,i.onmouseleave=Yi.default.resumeTimer}}).fire({icon:"success",title:e})}showLoading(e){Yi.default.fire({title:e,allowOutsideClick:!1,didOpen:()=>{Yi.default.showLoading()}})}get printerStatusText(){return this.isPrinterConnected?"\u0645\u062A\u0635\u0644":"\u063A\u064A\u0631 \u0645\u062A\u0635\u0644"}static \u0275fac=function(t){return new(t||n)(we(Rs),we(Cr),we(ea),we(Qc),we(gn),we(eu),we(fE))};static \u0275cmp=Jt({type:n,selectors:[["app-payments-management"]],decls:208,vars:61,consts:[[1,"payments-management"],["class","loading-overlay",4,"ngIf"],[1,"header-section"],[1,"header-content"],[1,"fas","fa-money-bill-wave"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"btn","btn-success",3,"click","disabled"],["class","fas fa-file-excel",4,"ngIf"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"printer-status"],[1,"status-indicator"],[1,"status-dot"],[1,"printer-actions"],["class","btn btn-sm btn-outline",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline",3,"click","disabled"],[1,"fas","fa-print"],[1,"statistics-section"],[1,"stat-card","total-payments"],[1,"stat-icon"],[1,"fas","fa-receipt"],[1,"stat-content"],[1,"stat-number"],[1,"stat-card","total-amount"],[1,"fas","fa-money-bill"],[1,"stat-card","paid-amount"],[1,"fas","fa-check-circle"],[1,"stat-card","pending-payments"],[1,"fas","fa-clock"],[1,"stat-subtext"],[1,"stat-card","late-payments"],[1,"fas","fa-exclamation-circle"],[1,"filters-section","card"],[1,"filters-header"],[1,"fas","fa-filter"],[1,"btn","btn-outline","btn-sm",3,"click"],[1,"fas","fa-times"],[1,"filters-grid"],[1,"filter-group"],["for","filterStudent"],[1,"fas","fa-user-graduate"],["id","filterStudent",1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","filterClass"],[1,"fas","fa-chalkboard-teacher"],["id","filterClass",1,"form-control",3,"ngModelChange","change","ngModel"],["for","filterMonth"],[1,"fas","fa-calendar-alt"],["id","filterMonth",1,"form-control",3,"ngModelChange","change","ngModel"],["for","filterStatus"],[1,"fas","fa-info-circle"],["id","filterStatus",1,"form-control",3,"ngModelChange","change","ngModel"],["value","paid"],["value","pending"],["value","late"],["for","filterPaymentMethod"],[1,"fas","fa-credit-card"],["id","filterPaymentMethod",1,"form-control",3,"ngModelChange","change","ngModel"],["value","cash"],["value","bank"],["value","online"],["value","mobile"],["value","check"],["for","filterStartDate"],[1,"fas","fa-calendar"],["type","date","id","filterStartDate",1,"form-control",3,"ngModelChange","change","ngModel"],["for","filterEndDate"],["type","date","id","filterEndDate",1,"form-control",3,"ngModelChange","change","ngModel"],["class","bulk-actions",4,"ngIf"],[1,"view-options","card"],[1,"view-mode"],[1,"btn","btn-sm",3,"click"],[1,"fas","fa-table"],[1,"fas","fa-th-large"],[1,"sort-options"],[1,"form-control-sm",3,"ngModelChange","change","ngModel"],["value","paymentDate"],["value","student.name"],["value","class.name"],["value","amount"],["value","month"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"fas"],[1,"pagination-controls"],["value","10"],["value","20"],["value","50"],["value","100"],["class","table-responsive card",4,"ngIf"],["class","cards-grid",4,"ngIf"],["class","no-results card",4,"ngIf"],[1,"pagination-section"],[1,"pagination-info"],[1,"fas","fa-angle-double-right"],[1,"fas","fa-angle-right"],[1,"page-numbers"],[4,"ngFor","ngForOf"],[1,"fas","fa-angle-left"],[1,"fas","fa-angle-double-left"],["class","modal-overlay",4,"ngIf"],[1,"loading-overlay"],[1,"loading-content"],[1,"spinner"],[1,"fas","fa-file-excel"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-plug"],[3,"value"],[1,"bulk-actions"],[1,"bulk-info"],[1,"bulk-buttons"],[1,"btn","btn-success","btn-sm",3,"click","disabled"],["class","fas fa-check",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-check"],[1,"table-responsive","card"],[1,"payments-table"],[1,"select-column"],["type","checkbox",3,"change","checked"],[1,"sortable",3,"click"],[3,"selected",4,"ngFor","ngForOf"],[1,"student-info"],[1,"student-name"],[1,"student-id"],[1,"class-teacher"],[1,"amount-cell"],[1,"amount"],[1,"payment-method"],[1,"status-badge"],[1,"invoice-cell"],[1,"invoice-number"],["title","\u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0625\u064A\u0635\u0627\u0644",1,"btn-icon","btn-sm",3,"click","disabled"],[1,"notes-cell"],[1,"actions-cell"],[1,"action-buttons"],["class","btn-icon btn-success","title","\u062A\u0633\u062F\u064A\u062F \u0627\u0644\u062F\u0641\u0639\u0629",3,"click",4,"ngIf"],["title","\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0628\u0644\u063A",1,"btn-icon","btn-info",3,"click"],[1,"fas","fa-edit"],["class","btn-icon btn-warning","title","\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062F\u0641\u0639",3,"click",4,"ngIf"],["title","\u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629",1,"btn-icon","btn-danger",3,"click"],[1,"fas","fa-trash"],["title","\u062A\u0633\u062F\u064A\u062F \u0627\u0644\u062F\u0641\u0639\u0629",1,"btn-icon","btn-success",3,"click"],["title","\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062F\u0641\u0639",1,"btn-icon","btn-warning",3,"click"],[1,"fas","fa-undo"],[1,"cards-grid"],["class","payment-card",3,"selected",4,"ngFor","ngForOf"],[1,"payment-card"],[1,"card-header"],[1,"card-checkbox"],[1,"card-title"],[1,"card-body"],[1,"card-row"],[1,"label"],[1,"value"],[1,"amount-value"],["class","card-row",4,"ngIf"],[1,"card-footer"],[1,"card-actions"],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-info",3,"click"],["class","btn btn-sm btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"btn","btn-sm","btn-primary",3,"click","disabled"],[1,"value","notes"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"no-results","card"],[1,"no-results-content"],[1,"fas","fa-search"],["class","page-number",3,"active","click",4,"ngIf"],["class","page-ellipsis",4,"ngIf"],[1,"page-number",3,"click"],[1,"page-ellipsis"],[1,"modal-overlay"],[1,"modal-container"],[1,"modal-header"],[1,"btn-icon",3,"click"],[3,"ngSubmit","formGroup"],[1,"modal-body"],[1,"form-group"],["for","studentId"],["id","studentId","formControlName","studentId",1,"form-control"],["class","error-message",4,"ngIf"],["for","classId"],["id","classId","formControlName","classId",1,"form-control"],[1,"form-row"],["for","amount"],["type","number","id","amount","formControlName","amount","min","1","step","100",1,"form-control"],["for","month"],["id","month","formControlName","month",1,"form-control"],["for","paymentMethod"],["id","paymentMethod","formControlName","paymentMethod",1,"form-control"],["for","paymentDate"],["type","date","id","paymentDate","formControlName","paymentDate",1,"form-control"],["for","notes"],[1,"fas","fa-sticky-note"],["id","notes","formControlName","notes","rows","3","placeholder","\u0623\u064A \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629 \u062D\u0648\u0644 \u0627\u0644\u062F\u0641\u0639\u0629...",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","fas fa-save",4,"ngIf"],[1,"error-message"],[1,"fas","fa-save"],[1,"payment-info"],[1,"info-row"],[1,"edit-actions"]],template:function(t,i){t&1&&(l(0,"div",0),ee(1,rz,5,0,"div",1),l(2,"div",2)(3,"div",3)(4,"h1"),P(5,"i",4),d(6," \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A "),c(),l(7,"div",5)(8,"button",6),O("click",function(){return i.openNewPaymentModal()}),P(9,"i",7),d(10," \u062A\u0633\u062C\u064A\u0644 \u062F\u0641\u0639\u0629 \u062C\u062F\u064A\u062F\u0629 "),c(),l(11,"button",8),O("click",function(){return i.exportToExcel()}),ee(12,oz,1,0,"i",9)(13,sz,1,0,"i",10),d(14),c()()(),l(15,"div",11)(16,"div",12),P(17,"div",13),l(18,"span"),d(19),c()(),l(20,"div",14),ee(21,az,3,0,"button",15)(22,lz,3,0,"button",15),l(23,"button",16),O("click",function(){return i.printTestPage()}),P(24,"i",17),d(25," \u0627\u062E\u062A\u0628\u0627\u0631 \u0627\u0644\u0637\u0628\u0627\u0639\u0629 "),c()()()(),l(26,"div",18)(27,"div",19)(28,"div",20),P(29,"i",21),c(),l(30,"div",22)(31,"h3"),d(32,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A"),c(),l(33,"p",23),d(34),c()()(),l(35,"div",24)(36,"div",20),P(37,"i",25),c(),l(38,"div",22)(39,"h3"),d(40,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0628\u0627\u0644\u063A"),c(),l(41,"p",23),d(42),pn(43,"number"),c()()(),l(44,"div",26)(45,"div",20),P(46,"i",27),c(),l(47,"div",22)(48,"h3"),d(49,"\u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0627\u0644\u0645\u0624\u0643\u062F\u0629"),c(),l(50,"p",23),d(51),pn(52,"number"),c()()(),l(53,"div",28)(54,"div",20),P(55,"i",29),c(),l(56,"div",22)(57,"h3"),d(58,"\u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0627\u0644\u0645\u0639\u0644\u0642\u0629"),c(),l(59,"p",23),d(60),c(),l(61,"p",30),d(62),pn(63,"number"),c()()(),l(64,"div",31)(65,"div",20),P(66,"i",32),c(),l(67,"div",22)(68,"h3"),d(69,"\u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0627\u0644\u0645\u062A\u0623\u062E\u0631\u0629"),c(),l(70,"p",23),d(71),c()()()(),l(72,"div",33)(73,"div",34)(74,"h3"),P(75,"i",35),d(76," \u0641\u0644\u062A\u0631\u0629 \u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A"),c(),l(77,"button",36),O("click",function(){return i.clearFilters()}),P(78,"i",37),d(79," \u0645\u0633\u062D \u0627\u0644\u0641\u0644\u0627\u062A\u0631 "),c()(),l(80,"div",38)(81,"div",39)(82,"label",40),P(83,"i",41),d(84," \u0627\u0644\u0637\u0627\u0644\u0628 "),c(),l(85,"select",42),fe("ngModelChange",function(o){return he(i.filters.student,o)||(i.filters.student=o),o}),O("change",function(){return i.applyFilters()}),l(86,"option",43),d(87,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0637\u0644\u0627\u0628"),c(),ee(88,cz,2,3,"option",44),c()(),l(89,"div",39)(90,"label",45),P(91,"i",46),d(92," \u0627\u0644\u062D\u0635\u0629 "),c(),l(93,"select",47),fe("ngModelChange",function(o){return he(i.filters.class,o)||(i.filters.class=o),o}),O("change",function(){return i.applyFilters()}),l(94,"option",43),d(95,"\u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0635\u0635"),c(),ee(96,uz,2,2,"option",44),c()(),l(97,"div",39)(98,"label",48),P(99,"i",49),d(100," \u0627\u0644\u0634\u0647\u0631 "),c(),l(101,"select",50),fe("ngModelChange",function(o){return he(i.filters.month,o)||(i.filters.month=o),o}),O("change",function(){return i.applyFilters()}),l(102,"option",43),d(103,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0623\u0634\u0647\u0631"),c(),ee(104,dz,2,2,"option",44),c()(),l(105,"div",39)(106,"label",51),P(107,"i",52),d(108," \u0627\u0644\u062D\u0627\u0644\u0629 "),c(),l(109,"select",53),fe("ngModelChange",function(o){return he(i.filters.status,o)||(i.filters.status=o),o}),O("change",function(){return i.applyFilters()}),l(110,"option",43),d(111,"\u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0627\u0644\u0627\u062A"),c(),l(112,"option",54),d(113,"\u0645\u062F\u0641\u0648\u0639"),c(),l(114,"option",55),d(115,"\u0645\u0639\u0644\u0642"),c(),l(116,"option",56),d(117,"\u0645\u062A\u0623\u062E\u0631"),c()()(),l(118,"div",39)(119,"label",57),P(120,"i",58),d(121," \u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639 "),c(),l(122,"select",59),fe("ngModelChange",function(o){return he(i.filters.paymentMethod,o)||(i.filters.paymentMethod=o),o}),O("change",function(){return i.applyFilters()}),l(123,"option",43),d(124,"\u062C\u0645\u064A\u0639 \u0637\u0631\u0642 \u0627\u0644\u062F\u0641\u0639"),c(),l(125,"option",60),d(126,"\u0646\u0642\u062F\u064A"),c(),l(127,"option",61),d(128,"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A"),c(),l(129,"option",62),d(130,"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),c(),l(131,"option",63),d(132,"\u062F\u0641\u0639 \u0645\u062D\u0645\u0648\u0644"),c(),l(133,"option",64),d(134,"\u0634\u064A\u0643"),c()()(),l(135,"div",39)(136,"label",65),P(137,"i",66),d(138," \u0645\u0646 \u062A\u0627\u0631\u064A\u062E "),c(),l(139,"input",67),fe("ngModelChange",function(o){return he(i.filters.startDate,o)||(i.filters.startDate=o),o}),O("change",function(){return i.applyFilters()}),c()(),l(140,"div",39)(141,"label",68),P(142,"i",66),d(143," \u0625\u0644\u0649 \u062A\u0627\u0631\u064A\u062E "),c(),l(144,"input",69),fe("ngModelChange",function(o){return he(i.filters.endDate,o)||(i.filters.endDate=o),o}),O("change",function(){return i.applyFilters()}),c()()(),ee(145,pz,15,5,"div",70),c(),l(146,"div",71)(147,"div",72)(148,"button",73),O("click",function(){return i.viewMode="table"}),P(149,"i",74),d(150," \u062C\u062F\u0648\u0644 "),c(),l(151,"button",73),O("click",function(){return i.viewMode="cards"}),P(152,"i",75),d(153," \u0628\u0637\u0627\u0642\u0627\u062A "),c()(),l(154,"div",76)(155,"span"),d(156,"\u062A\u0631\u062A\u064A\u0628 \u062D\u0633\u0628:"),c(),l(157,"select",77),fe("ngModelChange",function(o){return he(i.sortField,o)||(i.sortField=o),o}),O("change",function(){return i.applyFilters()}),l(158,"option",78),d(159,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639"),c(),l(160,"option",79),d(161,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628"),c(),l(162,"option",80),d(163,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629"),c(),l(164,"option",81),d(165,"\u0627\u0644\u0645\u0628\u0644\u063A"),c(),l(166,"option",82),d(167,"\u0627\u0644\u0634\u0647\u0631"),c()(),l(168,"button",83),O("click",function(){return i.sortDirection=i.sortDirection==="asc"?"desc":"asc",i.applyFilters()}),P(169,"i",84),d(170),c()(),l(171,"div",85)(172,"span"),d(173,"\u0639\u0631\u0636"),c(),l(174,"select",77),fe("ngModelChange",function(o){return he(i.itemsPerPage,o)||(i.itemsPerPage=o),o}),O("change",function(){return i.applyFilters()}),l(175,"option",86),d(176,"10"),c(),l(177,"option",87),d(178,"20"),c(),l(179,"option",88),d(180,"50"),c(),l(181,"option",89),d(182,"100"),c()(),l(183,"span"),d(184),c()()(),ee(185,vz,32,18,"div",90)(186,Mz,2,1,"div",91)(187,Sz,10,0,"div",92),l(188,"div",93)(189,"div",94),d(190),c(),l(191,"div",85)(192,"button",16),O("click",function(){return i.currentPage=1}),P(193,"i",95),d(194," \u0627\u0644\u0623\u0648\u0644 "),c(),l(195,"button",16),O("click",function(){return i.currentPage=i.currentPage-1}),P(196,"i",96),d(197," \u0627\u0644\u0633\u0627\u0628\u0642 "),c(),l(198,"div",97),ee(199,Tz,3,2,"ng-container",98),c(),l(200,"button",16),O("click",function(){return i.currentPage=i.currentPage+1}),d(201," \u0627\u0644\u062A\u0627\u0644\u064A "),P(202,"i",99),c(),l(203,"button",16),O("click",function(){return i.currentPage=i.totalPages}),d(204," \u0627\u0644\u0623\u062E\u064A\u0631 "),P(205,"i",100),c()()(),ee(206,Vz,77,22,"div",101)(207,Uz,37,6,"div",101),c()),t&2&&(g(),R("ngIf",i.isLoading),g(10),R("disabled",i.isExporting||i.filteredPayments.length===0),g(),R("ngIf",!i.isExporting),g(),R("ngIf",i.isExporting),g(),K(" ",i.isExporting?"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u0635\u062F\u064A\u0631...":"\u062A\u0635\u062F\u064A\u0631 Excel"," "),g(),Ue("connected",i.isPrinterConnected)("disconnected",!i.isPrinterConnected),g(4),te(i.printerStatusText),g(2),R("ngIf",!i.isPrinterConnected),g(),R("ngIf",i.isPrinterConnected),g(),R("disabled",!i.isPrinterConnected),g(11),te(i.stats.totalPayments),g(8),K("",gr(43,55,i.stats.totalAmount)," \u062F.\u062C"),g(9),K("",gr(52,57,i.stats.paidAmount)," \u062F.\u062C"),g(9),te(i.stats.pendingPayments),g(2),K("",gr(63,59,i.stats.pendingAmount)," \u062F.\u062C"),g(9),te(i.stats.latePayments),g(14),de("ngModel",i.filters.student),g(3),R("ngForOf",i.students),g(5),de("ngModel",i.filters.class),g(3),R("ngForOf",i.classes),g(5),de("ngModel",i.filters.month),g(3),R("ngForOf",i.availableMonths),g(5),de("ngModel",i.filters.status),g(13),de("ngModel",i.filters.paymentMethod),g(17),de("ngModel",i.filters.startDate),g(5),de("ngModel",i.filters.endDate),g(),R("ngIf",i.selectedPayments.size>0),g(3),Ue("active",i.viewMode==="table"),g(3),Ue("active",i.viewMode==="cards"),g(6),de("ngModel",i.sortField),g(12),Ue("fa-sort-up",i.sortDirection==="asc")("fa-sort-down",i.sortDirection==="desc"),g(),K(" ",i.sortDirection==="asc"?"\u062A\u0635\u0627\u0639\u062F\u064A":"\u062A\u0646\u0627\u0632\u0644\u064A"," "),g(4),de("ngModel",i.itemsPerPage),g(10),K("\u0645\u0646 ",i.filteredPayments.length," \u062F\u0641\u0639\u0629"),g(),R("ngIf",i.viewMode==="table"&&i.filteredPayments.length>0),g(),R("ngIf",i.viewMode==="cards"&&i.filteredPayments.length>0),g(),R("ngIf",i.filteredPayments.length===0&&!i.isLoading),g(3),bs(" \u0639\u0631\u0636 ",i.getPaginatedInfo().start," \u0625\u0644\u0649 ",i.getPaginatedInfo().end," \u0645\u0646 ",i.filteredPayments.length," "),g(2),R("disabled",i.currentPage===1),g(3),R("disabled",i.currentPage===1),g(4),R("ngForOf",i.getPageNumbers()),g(),R("disabled",i.currentPage===i.totalPages),g(3),R("disabled",i.currentPage===i.totalPages),g(3),R("ngIf",i.isNewPaymentModalOpen),g(),R("ngIf",i.isEditPaymentModalOpen))},dependencies:[cn,Yn,Tn,ju,Vr,Zn,yr,vi,xi,Rn,Wr,si,Xn,xr,Qo,Bn,hE,Ry,ky],styles:['.payments-management[_ngcontent-%COMP%]{direction:rtl;font-family:Cairo,Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:#f8f9fa;min-height:100vh;padding:20px}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#fffffff2;display:flex;justify-content:center;align-items:center;z-index:9999}.loading-content[_ngcontent-%COMP%]{text-align:center;background:#fff;padding:3rem;border-radius:15px;box-shadow:0 10px 40px #0000001a;border:1px solid #eaeaea}.spinner[_ngcontent-%COMP%]{width:60px;height:60px;border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1.5rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.header-section[_ngcontent-%COMP%]{background:#fff;color:#2c3e50;padding:2rem;border-radius:12px;margin-bottom:2rem;box-shadow:0 4px 12px #00000014;border:1px solid #eaeaea}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;display:flex;align-items:center;gap:1rem;color:#2c3e50}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3498db}.header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.printer-status[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px;padding:1rem;margin-top:1rem;display:flex;justify-content:space-between;align-items:center;border:1px solid #eaeaea}.printer-status.connected[_ngcontent-%COMP%]{background:#2ecc711a;border-color:#2ecc714d}.printer-status.disconnected[_ngcontent-%COMP%]{background:#e74c3c1a;border-color:#e74c3c4d}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-weight:500}.status-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;background:#2ecc71;animation:_ngcontent-%COMP%_pulse 2s infinite}.printer-status.disconnected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#e74c3c;animation:none}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.printer-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.statistics-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem;margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;display:flex;align-items:center;gap:1.5rem;box-shadow:0 4px 12px #0000000d;transition:all .3s ease;border:1px solid #eaeaea;position:relative;overflow:hidden}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #0000001a}.stat-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;right:0;width:4px;height:100%}.stat-card.total-payments[_ngcontent-%COMP%]:before{background:#3498db}.stat-card.total-amount[_ngcontent-%COMP%]:before{background:#2ecc71}.stat-card.paid-amount[_ngcontent-%COMP%]:before{background:#9b59b6}.stat-card.pending-payments[_ngcontent-%COMP%]:before{background:#f39c12}.stat-card.late-payments[_ngcontent-%COMP%]:before{background:#e74c3c}.stat-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:#f8f9fa;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.8rem;color:#fff}.stat-card.total-payments[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#3498db}.stat-card.total-amount[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#2ecc71}.stat-card.paid-amount[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#9b59b6}.stat-card.pending-payments[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#f39c12}.stat-card.late-payments[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#e74c3c}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.9rem;color:#7f8c8d;font-weight:500}.stat-number[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:700;color:#2c3e50}.stat-subtext[_ngcontent-%COMP%]{margin:.25rem 0 0;font-size:.85rem;color:#95a5a6}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 4px 12px #0000000d;margin-bottom:1.5rem;border:1px solid #eaeaea}.filters-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid #eee}.filters-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;color:#2c3e50;display:flex;align-items:center;gap:.5rem}.filters-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3498db}.filters-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#555;display:flex;align-items:center;gap:.5rem;font-size:.9rem}.form-control[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #ddd;border-radius:8px;font-size:1rem;transition:all .3s ease;background:#fff;color:#333}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.form-control-sm[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.9rem}.bulk-actions[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px;padding:1rem;margin-top:1rem;display:flex;justify-content:space-between;align-items:center;border:1px solid #eaeaea}.bulk-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:500;color:#2c3e50}.bulk-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.view-options[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem 1.5rem;box-shadow:0 4px 12px #0000000d;margin-bottom:1.5rem;border:1px solid #eaeaea;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.view-mode[_ngcontent-%COMP%]{display:flex;gap:.5rem;background:#f8f9fa;padding:.25rem;border-radius:8px}.view-mode[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1rem;background:transparent;border:none;color:#7f8c8d;border-radius:6px}.view-mode[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{background:#fff;color:#3498db;box-shadow:0 2px 4px #0000001a}.sort-options[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;color:#666}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#666}.table-responsive[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px #0000000d;margin-bottom:1.5rem;border:1px solid #eaeaea}.payments-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff}.payments-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;padding:1rem;text-align:right;font-weight:600;color:#495057;border-bottom:2px solid #eaeaea;cursor:pointer;-webkit-user-select:none;user-select:none;font-size:.9rem}.payments-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#f1f3f4}.payments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #f1f3f4;vertical-align:middle;font-size:.95rem}.payments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease;background:#fff}.payments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.payments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#e8f4fd;border-left:3px solid #3498db}.select-column[_ngcontent-%COMP%]{width:40px;text-align:center}.select-column[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:#3498db}.student-info[_ngcontent-%COMP%]{min-width:150px}.student-name[_ngcontent-%COMP%]{font-weight:500;color:#2c3e50}.student-id[_ngcontent-%COMP%], .class-teacher[_ngcontent-%COMP%]{font-size:.85rem;color:#7f8c8d;margin-top:.25rem}.amount-cell[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50}.amount[_ngcontent-%COMP%]{color:#2c3e50;font-weight:600}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.35rem .75rem;border-radius:20px;font-size:.85rem;font-weight:500;min-width:70px;text-align:center}.status-paid[_ngcontent-%COMP%]{background:#2ecc711a;color:#27ae60;border:1px solid rgba(46,204,113,.2)}.status-pending[_ngcontent-%COMP%]{background:#f39c121a;color:#d35400;border:1px solid rgba(243,156,18,.2)}.status-late[_ngcontent-%COMP%]{background:#e74c3c1a;color:#c0392b;border:1px solid rgba(231,76,60,.2)}.payment-method[_ngcontent-%COMP%]{display:inline-block;padding:.35rem .75rem;border-radius:20px;font-size:.85rem;font-weight:500;background:#f8f9fa;color:#495057;border:1px solid #eaeaea}.payment-method.cash[_ngcontent-%COMP%]{background:#2ecc711a;color:#27ae60;border-color:#2ecc7133}.payment-method.bank[_ngcontent-%COMP%]{background:#3498db1a;color:#2980b9;border-color:#3498db33}.payment-method.online[_ngcontent-%COMP%]{background:#9b59b61a;color:#8e44ad;border-color:#9b59b633}.payment-method.mobile[_ngcontent-%COMP%]{background:#f1c40f1a;color:#f39c12;border-color:#f1c40f33}.payment-method.check[_ngcontent-%COMP%]{background:#e67e221a;color:#d35400;border-color:#e67e2233}.invoice-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.invoice-number[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:.9rem;color:#666;background:#f8f9fa;padding:.25rem .5rem;border-radius:4px;border:1px solid #eee}.notes-cell[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#666}.actions-cell[_ngcontent-%COMP%]{min-width:180px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;border:none;cursor:pointer;transition:all .3s ease;font-size:1rem;background:#f8f9fa;color:#666}.btn-icon[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.btn-icon.btn-success[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.btn-icon.btn-info[_ngcontent-%COMP%]{background:#3498db;color:#fff}.btn-icon.btn-warning[_ngcontent-%COMP%]{background:#f39c12;color:#fff}.btn-icon.btn-danger[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.btn-icon.btn-sm[_ngcontent-%COMP%]{width:32px;height:32px;font-size:.9rem}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem;margin-bottom:2rem}.payment-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px #0000000d;transition:all .3s ease;border:1px solid #eaeaea}.payment-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #0000001a}.payment-card.selected[_ngcontent-%COMP%]{border-color:#3498db;background:#f8fbff;box-shadow:0 4px 12px #3498db33}.card-header[_ngcontent-%COMP%]{background:#f8f9fa;padding:1.25rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eaeaea}.card-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center}.card-title[_ngcontent-%COMP%]{flex:1;margin:0 1rem}.card-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;color:#2c3e50;font-size:1.1rem}.card-title[_ngcontent-%COMP%]   .student-id[_ngcontent-%COMP%]{font-size:.85rem;color:#7f8c8d}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.card-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem;padding-bottom:.75rem;border-bottom:1px solid #f8f9fa}.card-row[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}.card-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#7f8c8d;font-size:.9rem}.card-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#2c3e50}.card-row[_ngcontent-%COMP%]   .amount-value[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;font-size:1.1rem}.card-row[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]{font-size:.9rem;color:#666;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.card-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;background:#f8f9fa;border-top:1px solid #eaeaea}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.no-results[_ngcontent-%COMP%]{background:#fff;text-align:center;padding:4rem 2rem;border-radius:12px;box-shadow:0 4px 12px #0000000d;border:1px solid #eaeaea}.no-results-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#bdc3c7;margin-bottom:1.5rem}.no-results-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:#7f8c8d;font-weight:500}.no-results-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#95a5a6;margin-bottom:2rem;line-height:1.6}.pagination-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;background:#fff;border-radius:12px;box-shadow:0 4px 12px #0000000d;margin-bottom:2rem;border:1px solid #eaeaea}.pagination-info[_ngcontent-%COMP%]{color:#666;font-size:.95rem}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.page-numbers[_ngcontent-%COMP%]{display:flex;gap:.25rem}.page-number[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:8px;cursor:pointer;transition:all .3s ease;font-weight:500;background:#f8f9fa;color:#666;border:1px solid #eaeaea}.page-number[_ngcontent-%COMP%]:hover{background:#e9ecef;border-color:#dee2e6}.page-number.active[_ngcontent-%COMP%]{background:#3498db;color:#fff;border-color:#3498db}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;backdrop-filter:blur(3px)}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px #00000026;animation:_ngcontent-%COMP%_modalSlideIn .3s ease;border:1px solid #eaeaea}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #eaeaea;display:flex;justify-content:space-between;align-items:center;background:#f8f9fa;border-radius:16px 16px 0 0}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:.5rem;color:#2c3e50}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#555;display:flex;align-items:center;gap:.5rem;font-size:.95rem}.form-group.error[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:#e74c3c}.form-group.error[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #e74c3c1a}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:.85rem;margin-top:.25rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.modal-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid #eaeaea;display:flex;justify-content:flex-end;gap:1rem;background:#f8f9fa;border-radius:0 0 16px 16px}.payment-info[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px;padding:1.5rem;margin-bottom:1.5rem;border:1px solid #eaeaea}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid #eee}.info-row[_ngcontent-%COMP%]:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}.info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-weight:500;font-size:.95rem}.info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2c3e50;font-weight:600}.edit-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1.5rem 0}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:8px;border:none;font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;justify-content:center;gap:.5rem;font-family:inherit}.btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #0000001a}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important;box-shadow:none!important}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2ecc71,#27ae60);color:#fff}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b);color:#fff}.btn-outline[_ngcontent-%COMP%]{background:transparent;border:2px solid #ddd;color:#666}.btn-outline[_ngcontent-%COMP%]:hover{border-color:#3498db;color:#3498db;background:#3498db0d}.btn-sm[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.9rem}.text-right[_ngcontent-%COMP%]{text-align:right}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.mt-1[_ngcontent-%COMP%]{margin-top:.5rem}.mt-2[_ngcontent-%COMP%]{margin-top:1rem}.mt-3[_ngcontent-%COMP%]{margin-top:1.5rem}.mb-1[_ngcontent-%COMP%]{margin-bottom:.5rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:1rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:1.5rem}.ml-auto[_ngcontent-%COMP%]{margin-left:auto}.w-100[_ngcontent-%COMP%]{width:100%}@media (max-width: 768px){.payments-management[_ngcontent-%COMP%]{padding:15px}.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem;text-align:center}.header-actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.statistics-section[_ngcontent-%COMP%], .filters-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.view-options[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.view-mode[_ngcontent-%COMP%], .sort-options[_ngcontent-%COMP%], .pagination-controls[_ngcontent-%COMP%]{justify-content:center}.cards-grid[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.pagination-section[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.payments-table[_ngcontent-%COMP%]{font-size:.9rem}.payments-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .payments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}.action-buttons[_ngcontent-%COMP%]{justify-content:center}.modal-container[_ngcontent-%COMP%]{width:95%;margin:1rem}}@media (prefers-color-scheme: dark){.payments-management[_ngcontent-%COMP%], .card[_ngcontent-%COMP%], .stat-card[_ngcontent-%COMP%], .payment-card[_ngcontent-%COMP%], .modal-container[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%], .view-options[_ngcontent-%COMP%], .pagination-section[_ngcontent-%COMP%], .no-results[_ngcontent-%COMP%]{background:#fff!important;color:#333!important}.form-control[_ngcontent-%COMP%]{background:#fff!important;color:#333!important;border-color:#ddd!important}.payments-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa!important;color:#495057!important}.payments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#fff!important;color:#333!important}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}button[_ngcontent-%COMP%]{font-family:inherit}.fas[_ngcontent-%COMP%]{font-size:1em}@media print{.payments-management[_ngcontent-%COMP%]{background:#fff!important;padding:0!important}.header-actions[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%], .view-options[_ngcontent-%COMP%], .bulk-actions[_ngcontent-%COMP%], .printer-actions[_ngcontent-%COMP%], .actions-cell[_ngcontent-%COMP%], .card-actions[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%], .pagination-section[_ngcontent-%COMP%]{display:none!important}.stat-card[_ngcontent-%COMP%], .payment-card[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]{box-shadow:none!important;border:1px solid #ddd!important}}']})};var tu=class n{constructor(e,t){this.http=e;this.authService=t}apiUrl="http://localhost:3000/api";getCards(){return this.http.get(`${this.apiUrl}/cards`,{headers:this.authService.getAuthHeaders()})}getCardByUid(e){return this.http.get(`${this.apiUrl}/cards/uid/${e}`,{headers:this.authService.getAuthHeaders()})}createCard(e){return this.http.post(`${this.apiUrl}/cards`,e,{headers:this.authService.getAuthHeaders()})}updateCard(e,t){return this.http.put(`${this.apiUrl}/cards/${e}`,t,{headers:this.authService.getAuthHeaders()})}deleteCard(e){return this.http.delete(`${this.apiUrl}/cards/${e}`,{headers:this.authService.getAuthHeaders()})}assignCardToStudent(e,t){return this.http.put(`${this.apiUrl}/cards/${e}`,{student:t},{headers:this.authService.getAuthHeaders()})}getAuthorizedCards(e,t){let i=`${this.apiUrl}/authorized-cards`,r=[];return e!==void 0&&r.push(`active=${e}`),t!==void 0&&r.push(`expired=${t}`),r.length>0&&(i+=`?${r.join("&")}`),this.http.get(i,{headers:this.authService.getAuthHeaders()})}createAuthorizedCard(e){return this.http.post(`${this.apiUrl}/authorized-cards`,e,{headers:this.authService.getAuthHeaders()})}updateAuthorizedCard(e,t){return this.http.put(`${this.apiUrl}/authorized-cards/${e}`,t,{headers:this.authService.getAuthHeaders()})}deleteAuthorizedCard(e){return this.http.delete(`${this.apiUrl}/authorized-cards/${e}`,{headers:this.authService.getAuthHeaders()})}checkCardAuthorization(e){return this.http.get(`${this.apiUrl}/authorized-cards/check/${e}`,{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(t){return new(t||n)(De(bn),De(gn))};static \u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"})};function Bz(n,e){if(n&1){let t=Me();l(0,"tr")(1,"td"),d(2),c(),l(3,"td"),d(4),c(),l(5,"td"),d(6),c(),l(7,"td",3)(8,"button",30),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.viewCardDetails(r))}),P(9,"i",31),d(10," \u0639\u0631\u0636 "),c(),l(11,"button",32),O("click",function(){let r=T(t).$implicit,o=E(2);return o.selectedCard=r,D(o.showAssignCardModal=!0)}),P(12,"i",33),d(13," \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),c(),l(14,"button",34),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.deleteCard(r._id,"regular"))}),P(15,"i",35),d(16," \u062D\u0630\u0641 "),c()()()}if(n&2){let t=e.$implicit,i=E(2);g(2),te(t.uid),g(2),te(i.getStudentName((t.student==null?null:t.student._id)||t.student)),g(2),te(i.formatDate(t.issueDate))}}function zz(n,e){n&1&&(l(0,"tr")(1,"td",36),d(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u0637\u0627\u0642\u0627\u062A \u0645\u0633\u062C\u0644\u0629"),c()())}function Hz(n,e){if(n&1&&(l(0,"div",25)(1,"table",26)(2,"thead")(3,"tr")(4,"th"),d(5,"\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629"),c(),l(6,"th"),d(7,"\u0627\u0644\u0637\u0627\u0644\u0628"),c(),l(8,"th"),d(9,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0625\u0635\u062F\u0627\u0631"),c(),l(10,"th"),d(11,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),c()()(),l(12,"tbody"),ee(13,Bz,17,3,"tr",27)(14,zz,3,0,"tr",28),c()()()),n&2){let t=E();g(13),R("ngForOf",t.cards),g(),R("ngIf",t.cards.length===0)}}function jz(n,e){n&1&&(l(0,"div",37),P(1,"div",38),l(2,"p"),d(3,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A..."),c()())}function Gz(n,e){if(n&1){let t=Me();l(0,"tr")(1,"td"),d(2),c(),l(3,"td"),d(4),c(),l(5,"td"),d(6),c(),l(7,"td"),d(8),c(),l(9,"td")(10,"span",39),d(11),c()(),l(12,"td",3)(13,"button",34),O("click",function(){let r=T(t).$implicit,o=E();return D(o.deleteCard(r._id,"authorized"))}),P(14,"i",35),d(15," \u062D\u0630\u0641 "),c()()()}if(n&2){let t=e.$implicit,i=E();g(2),te(t.uid),g(2),te(t.cardName),g(2),te(t.description||"-"),g(2),te(i.formatDate(t.expirationDate)),g(2),Ue("badge-success",t.active&&!i.isCardExpired(t.expirationDate))("badge-danger",!t.active||i.isCardExpired(t.expirationDate)),g(),K(" ",t.active&&!i.isCardExpired(t.expirationDate)?"\u0646\u0634\u0637\u0629":"\u063A\u064A\u0631 \u0646\u0634\u0637\u0629"," ")}}function Wz(n,e){n&1&&(l(0,"tr")(1,"td",40),d(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u0637\u0627\u0642\u0627\u062A \u0645\u0635\u0631\u062D\u0629"),c()())}function $z(n,e){if(n&1&&(l(0,"option",52),d(1),c()),n&2){let t=e.$implicit;R("value",t._id),g(),bs(" ",t.name," (",t.studentId,") - ",t.parentPhone," ")}}function qz(n,e){if(n&1){let t=Me();l(0,"div",41)(1,"div",42)(2,"div",43)(3,"h3"),d(4,"\u062A\u0639\u064A\u064A\u0646 \u0628\u0637\u0627\u0642\u0629 \u0644\u0637\u0627\u0644\u0628"),c(),l(5,"button",44),O("click",function(){T(t);let r=E();return D(r.showAssignCardModal=!1)}),d(6,"\xD7"),c()(),l(7,"div",45)(8,"div",46)(9,"label"),d(10,"\u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0645\u062D\u062F\u062F\u0629:"),c(),P(11,"input",47),c(),l(12,"div",46)(13,"label"),d(14,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0637\u0627\u0644\u0628:"),c(),l(15,"select",48),fe("ngModelChange",function(r){T(t);let o=E();return he(o.selectedStudentId,r)||(o.selectedStudentId=r),D(r)}),l(16,"option",49),d(17,"-- \u0627\u062E\u062A\u0631 \u0637\u0627\u0644\u0628 --"),c(),ee(18,$z,2,4,"option",50),c()()(),l(19,"div",51)(20,"button",6),O("click",function(){T(t);let r=E();return D(r.showAssignCardModal=!1)}),d(21,"\u0625\u0644\u063A\u0627\u0621"),c(),l(22,"button",4),O("click",function(){T(t);let r=E();return D(r.assignCardToStudent())}),d(23,"\u062A\u0639\u064A\u064A\u0646"),c()()()()}if(n&2){let t=E();g(11),R("value",t.selectedCard==null?null:t.selectedCard.uid),g(4),de("ngModel",t.selectedStudentId),g(3),R("ngForOf",t.filteredStudents)}}function Yz(n,e){if(n&1){let t=Me();l(0,"div",41)(1,"div",42)(2,"div",43)(3,"h3"),d(4,"\u0625\u0636\u0627\u0641\u0629 \u0628\u0637\u0627\u0642\u0629 \u0645\u0635\u0631\u062D\u0629 \u062C\u062F\u064A\u062F\u0629"),c(),l(5,"button",44),O("click",function(){T(t);let r=E();return D(r.showAddAuthorizedCardModal=!1)}),d(6,"\xD7"),c()(),l(7,"div",45)(8,"div",46)(9,"label"),d(10,"\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 (UID) *"),c(),l(11,"input",53),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newAuthorizedCard.uid,r)||(o.newAuthorizedCard.uid=r),D(r)}),c()(),l(12,"div",46)(13,"label"),d(14,"\u0627\u0633\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 *"),c(),l(15,"input",53),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newAuthorizedCard.cardName,r)||(o.newAuthorizedCard.cardName=r),D(r)}),c()(),l(16,"div",46)(17,"label"),d(18,"\u0627\u0644\u0648\u0635\u0641"),c(),l(19,"textarea",54),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newAuthorizedCard.description,r)||(o.newAuthorizedCard.description=r),D(r)}),c()(),l(20,"div",46)(21,"label"),d(22,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0627\u0646\u062A\u0647\u0627\u0621 *"),c(),l(23,"input",55),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newAuthorizedCard.expirationDate,r)||(o.newAuthorizedCard.expirationDate=r),D(r)}),c()(),l(24,"div",46)(25,"label"),d(26,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),c(),l(27,"textarea",56),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newAuthorizedCard.notes,r)||(o.newAuthorizedCard.notes=r),D(r)}),c()()(),l(28,"div",51)(29,"button",6),O("click",function(){T(t);let r=E();return D(r.showAddAuthorizedCardModal=!1)}),d(30,"\u0625\u0644\u063A\u0627\u0621"),c(),l(31,"button",4),O("click",function(){T(t);let r=E();return D(r.addAuthorizedCard())}),d(32,"\u0625\u0636\u0627\u0641\u0629"),c()()()()}if(n&2){let t=E();g(11),de("ngModel",t.newAuthorizedCard.uid),g(4),de("ngModel",t.newAuthorizedCard.cardName),g(4),de("ngModel",t.newAuthorizedCard.description),g(4),de("ngModel",t.newAuthorizedCard.expirationDate),g(4),de("ngModel",t.newAuthorizedCard.notes)}}function Xz(n,e){if(n&1&&(l(0,"div")(1,"div",57)(2,"strong"),d(3,"\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629:"),c(),l(4,"span"),d(5),c()(),l(6,"div",57)(7,"strong"),d(8,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628:"),c(),l(9,"span"),d(10),c()(),l(11,"div",57)(12,"strong"),d(13,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0625\u0635\u062F\u0627\u0631:"),c(),l(14,"span"),d(15),c()(),l(16,"div",57)(17,"strong"),d(18,"\u062D\u0627\u0644\u0629 \u0627\u0644\u0628\u0637\u0627\u0642\u0629:"),c(),l(19,"span",58),d(20,"\u0645\u0641\u0639\u0644\u0629"),c()()()),n&2){let t=E(2);g(5),te(t.selectedCard.uid),g(5),te(t.getStudentName((t.selectedCard.student==null?null:t.selectedCard.student._id)||t.selectedCard.student)),g(5),te(t.formatDate(t.selectedCard.issueDate))}}function Zz(n,e){if(n&1){let t=Me();l(0,"div",41)(1,"div",42)(2,"div",43)(3,"h3"),d(4,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0628\u0637\u0627\u0642\u0629"),c(),l(5,"button",44),O("click",function(){T(t);let r=E();return D(r.showCardDetailsModal=!1)}),d(6,"\xD7"),c()(),l(7,"div",45),ee(8,Xz,21,3,"div",28),c(),l(9,"div",51)(10,"button",4),O("click",function(){T(t);let r=E();return D(r.showCardDetailsModal=!1)}),d(11,"\u0625\u063A\u0644\u0627\u0642"),c()()()()}if(n&2){let t=E();g(8),R("ngIf",t.selectedCard)}}var Sg=class n{constructor(e,t,i){this.cardsService=e;this.studentsService=t;this.authService=i}cards=[];authorizedCards=[];loading=!1;showAssignCardModal=!1;showAddAuthorizedCardModal=!1;showCardDetailsModal=!1;selectedCard=null;selectedStudentId="";newCardUid="";searchUid="";newAuthorizedCard={uid:"",cardName:"",description:"",expirationDate:"",notes:""};students=[];filteredStudents=[];searchStudentTerm="";filterActive=!0;filterExpired=!1;ngOnInit(){this.loadCards(),this.loadAuthorizedCards(),this.loadStudents()}ngOnDestroy(){}loadCards(){this.loading=!0,this.cardsService.getCards().subscribe({next:e=>{this.cards=e,this.loading=!1},error:e=>{console.error("Error loading cards:",e),this.loading=!1}})}loadAuthorizedCards(){this.cardsService.getAuthorizedCards(this.filterActive,this.filterExpired).subscribe({next:e=>{this.authorizedCards=e},error:e=>{console.error("Error loading authorized cards:",e)}})}loadStudents(){this.studentsService.getStudents().subscribe({next:e=>{this.students=e,this.filteredStudents=e},error:e=>{console.error("Error loading students:",e)}})}filterStudents(){if(!this.searchStudentTerm.trim()){this.filteredStudents=this.students;return}let e=this.searchStudentTerm.toLowerCase();this.filteredStudents=this.students.filter(t=>t.name.toLowerCase().includes(e)||t.studentId.toLowerCase().includes(e)||t.parentPhone?.toLowerCase().includes(e))}assignCardToStudent(){if(!this.selectedCard||!this.selectedStudentId){alert("\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0628\u0637\u0627\u0642\u0629 \u0648\u0637\u0627\u0644\u0628");return}this.cardsService.assignCardToStudent(this.selectedCard._id,this.selectedStudentId).subscribe({next:e=>{alert("\u062A\u0645 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0644\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D"),this.showAssignCardModal=!1,this.selectedCard=null,this.selectedStudentId="",this.loadCards()},error:e=>{console.error("Error assigning card:",e),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0628\u0637\u0627\u0642\u0629")}})}addAuthorizedCard(){if(!this.newAuthorizedCard.uid||!this.newAuthorizedCard.cardName){alert("\u064A\u0631\u062C\u0649 \u0645\u0644\u0621 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");return}this.cardsService.createAuthorizedCard(this.newAuthorizedCard).subscribe({next:e=>{alert("\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0645\u0635\u0631\u062D\u0629 \u0628\u0646\u062C\u0627\u062D"),this.showAddAuthorizedCardModal=!1,this.resetAuthorizedCardForm(),this.loadAuthorizedCards()},error:e=>{console.error("Error adding authorized card:",e),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0628\u0637\u0627\u0642\u0629")}})}checkCardAuthorization(){if(!this.searchUid.trim()){alert("\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629");return}this.cardsService.checkCardAuthorization(this.searchUid).subscribe({next:e=>{e.authorized?alert("\u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0645\u0635\u0631\u062D\u0629 \u0648\u0635\u0627\u0644\u062D\u0629"):alert("\u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u063A\u064A\u0631 \u0645\u0635\u0631\u062D\u0629 \u0623\u0648 \u0645\u0646\u062A\u0647\u064A\u0629 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0629")},error:e=>{alert("\u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u063A\u064A\u0631 \u0645\u0635\u0631\u062D\u0629")}})}deleteCard(e,t){confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u0628\u0637\u0627\u0642\u0629\u061F")&&(t==="regular"?this.cardsService.deleteCard(e).subscribe({next:()=>{alert("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadCards()},error:i=>{console.error("Error deleting card:",i),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062D\u0630\u0641 \u0627\u0644\u0628\u0637\u0627\u0642\u0629")}}):this.cardsService.deleteAuthorizedCard(e).subscribe({next:()=>{alert("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0645\u0635\u0631\u062D\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadAuthorizedCards()},error:i=>{console.error("Error deleting authorized card:",i),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062D\u0630\u0641 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0645\u0635\u0631\u062D\u0629")}}))}viewCardDetails(e){this.selectedCard=e,this.showCardDetailsModal=!0}resetAuthorizedCardForm(){this.newAuthorizedCard={uid:"",cardName:"",description:"",expirationDate:"",notes:""}}applyFilters(){this.loadAuthorizedCards()}formatDate(e){return new Date(e).toLocaleDateString("ar-EG")}isCardExpired(e){return new Date(e)<new Date}getStudentName(e){let t=this.students.find(i=>i._id===e);return t?t.name:"\u063A\u064A\u0631 \u0645\u0639\u064A\u0646"}static \u0275fac=function(t){return new(t||n)(we(tu),we(Cr),we(gn))};static \u0275cmp=Jt({type:n,selectors:[["app-cards-management"]],decls:66,vars:11,consts:[["loadingTemplate",""],[1,"cards-management-container"],[1,"header"],[1,"actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-sync-alt"],[1,"search-section","card"],[1,"search-input"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0628\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0644\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0627\u0644\u062A\u0635\u0631\u064A\u062D",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-info",3,"click"],[1,"fas","fa-search"],[1,"tabs"],[1,"tab","active"],[1,"tab",3,"click"],[1,"table-container","card"],[1,"table-header"],[1,"table-actions"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0637\u0627\u0644\u0628...",1,"form-control","search-input",3,"ngModelChange","input","ngModel"],["class","table-responsive",4,"ngIf","ngIfElse"],[1,"table-container","card","mt-4"],[1,"filters"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","give-cards-to-student modal",4,"ngIf"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"fas","fa-eye"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"fas","fa-exchange-alt"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],["colspan","4",1,"text-center"],[1,"loading"],[1,"spinner"],[1,"badge"],["colspan","6",1,"text-center"],[1,"give-cards-to-student","modal"],[1,"modal-content"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["type","text","disabled","",1,"form-control",3,"value"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],[3,"value"],["type","text","required","",1,"form-control",3,"ngModelChange","ngModel"],["rows","2",1,"form-control",3,"ngModelChange","ngModel"],["type","date","required","",1,"form-control",3,"ngModelChange","ngModel"],["rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"detail-item"],[1,"badge","badge-success"]],template:function(t,i){if(t&1){let r=Me();l(0,"div",1)(1,"div",2)(2,"h2"),d(3,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062A"),c(),l(4,"div",3)(5,"button",4),O("click",function(){return T(r),D(i.showAddAuthorizedCardModal=!0)}),P(6,"i",5),d(7," \u0625\u0636\u0627\u0641\u0629 \u0628\u0637\u0627\u0642\u0629 \u0645\u0635\u0631\u062D\u0629 "),c(),l(8,"button",6),O("click",function(){return T(r),D(i.loadCards())}),P(9,"i",7),d(10," \u062A\u062D\u062F\u064A\u062B "),c()()(),l(11,"div",8)(12,"div",9)(13,"input",10),fe("ngModelChange",function(s){return T(r),he(i.searchUid,s)||(i.searchUid=s),D(s)}),c(),l(14,"button",11),O("click",function(){return T(r),D(i.checkCardAuthorization())}),P(15,"i",12),d(16," \u062A\u062D\u0642\u0642 "),c()()(),l(17,"div",13)(18,"div",14),d(19,"\u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062A \u0627\u0644\u0645\u0633\u062C\u0644\u0629"),c(),l(20,"div",15),O("click",function(){return T(r),D(i.loadAuthorizedCards())}),d(21,"\u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062A \u0627\u0644\u0645\u0635\u0631\u062D\u0629"),c()(),l(22,"div",16)(23,"div",17)(24,"h3"),d(25,"\u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062A \u0627\u0644\u0645\u0633\u062C\u0644\u0629 \u0644\u0644\u0637\u0644\u0627\u0628"),c(),l(26,"div",18)(27,"input",19),fe("ngModelChange",function(s){return T(r),he(i.searchStudentTerm,s)||(i.searchStudentTerm=s),D(s)}),O("input",function(){return T(r),D(i.filterStudents())}),c()()(),ee(28,Hz,15,2,"div",20)(29,jz,4,0,"ng-template",null,0,np),c(),l(31,"div",21)(32,"div",17)(33,"h3"),d(34,"\u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062A \u0627\u0644\u0645\u0635\u0631\u062D\u0629"),c(),l(35,"div",22)(36,"label",23)(37,"input",24),fe("ngModelChange",function(s){return T(r),he(i.filterActive,s)||(i.filterActive=s),D(s)}),O("change",function(){return T(r),D(i.applyFilters())}),c(),l(38,"span"),d(39,"\u0627\u0644\u0646\u0634\u0637\u0629 \u0641\u0642\u0637"),c()(),l(40,"label",23)(41,"input",24),fe("ngModelChange",function(s){return T(r),he(i.filterExpired,s)||(i.filterExpired=s),D(s)}),O("change",function(){return T(r),D(i.applyFilters())}),c(),l(42,"span"),d(43,"\u0627\u0644\u0645\u064F\u0646\u062A\u0647\u064A\u0629 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0629"),c()()()(),l(44,"div",25)(45,"table",26)(46,"thead")(47,"tr")(48,"th"),d(49,"\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629"),c(),l(50,"th"),d(51,"\u0627\u0633\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629"),c(),l(52,"th"),d(53,"\u0627\u0644\u0648\u0635\u0641"),c(),l(54,"th"),d(55,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0627\u0646\u062A\u0647\u0627\u0621"),c(),l(56,"th"),d(57,"\u0627\u0644\u062D\u0627\u0644\u0629"),c(),l(58,"th"),d(59,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),c()()(),l(60,"tbody"),ee(61,Gz,16,9,"tr",27)(62,Wz,3,0,"tr",28),c()()()(),ee(63,qz,24,3,"div",29)(64,Yz,33,5,"div",29)(65,Zz,12,1,"div",29),c()}if(t&2){let r=Ru(30);g(13),de("ngModel",i.searchUid),g(14),de("ngModel",i.searchStudentTerm),g(),R("ngIf",!i.loading)("ngIfElse",r),g(9),de("ngModel",i.filterActive),g(4),de("ngModel",i.filterExpired),g(20),R("ngForOf",i.authorizedCards),g(),R("ngIf",i.authorizedCards.length===0),g(),R("ngIf",i.showAssignCardModal),g(),R("ngIf",i.showAddAuthorizedCardModal),g(),R("ngIf",i.showCardDetailsModal)}},dependencies:[cn,Yn,Tn,Zn,vi,xi,Rn,Ba,si,Xn,$r,Bn],styles:[".cards-management-container[_ngcontent-%COMP%]{padding:20px;background:#f5f5f5;min-height:100vh}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin:0}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}.search-section[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;margin-bottom:20px;box-shadow:0 2px 4px #0000001a}.search-input[_ngcontent-%COMP%]{display:flex;gap:10px}.tabs[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:8px 8px 0 0;overflow:hidden;margin-bottom:-1px}.tab[_ngcontent-%COMP%]{padding:12px 24px;cursor:pointer;border-bottom:3px solid transparent}.tab.active[_ngcontent-%COMP%]{border-bottom-color:#007bff;color:#007bff;font-weight:700}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.table-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.table-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.search-input[_ngcontent-%COMP%]{width:250px}.filters[_ngcontent-%COMP%]{display:flex;gap:20px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;cursor:pointer}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;padding:12px;text-align:right;border-bottom:2px solid #dee2e6;color:#495057;font-weight:600}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #dee2e6;vertical-align:middle}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.actions[_ngcontent-%COMP%]{display:flex;gap:5px;white-space:nowrap}.btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.btn-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#545b62}.btn-info[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background:#117a8b}.btn-warning[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.btn-warning[_ngcontent-%COMP%]:hover{background:#e0a800}.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.badge-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.badge-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.give-cards-to-student.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #dee2e6;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #dee2e6;display:flex;justify-content:flex-end;gap:10px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ced4da;border-radius:4px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;box-shadow:0 0 0 .2rem #007bff40}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #eee}.detail-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-4[_ngcontent-%COMP%]{margin-top:20px}@media (max-width: 768px){.header[_ngcontent-%COMP%], .table-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:flex-start}.search-input[_ngcontent-%COMP%]{width:100%}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.actions[_ngcontent-%COMP%]{flex-wrap:wrap}.modal-content[_ngcontent-%COMP%]{width:95%}}"]})};var Kz=()=>[];function Jz(n,e){n&1&&(l(0,"div",22),P(1,"i",23),l(2,"p"),d(3,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062D\u0635\u0635..."),c()())}function Qz(n,e){n&1&&(l(0,"div",24),P(1,"i",25),l(2,"p"),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u062D\u0635\u0635 \u0644\u0639\u0631\u0636\u0647\u0627"),c()())}function eH(n,e){if(n&1&&(l(0,"div",36)(1,"span",37),d(2,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A:"),c(),l(3,"span",38),d(4),c()()),n&2){let t=E().$implicit;g(4),te(t.notes)}}function tH(n,e){if(n&1&&(l(0,"span"),d(1),c()),n&2){let t=E().$implicit;g(),K(" (",t.attendance.length,") ")}}function nH(n,e){if(n&1){let t=Me();xs(0),l(1,"button",45),O("click",function(){T(t);let r=E().$implicit,o=E(2);return D(o.openStartClassModal(r))}),P(2,"i",46),d(3," \u0628\u062F\u0621 "),c(),l(4,"button",47),O("click",function(){T(t);let r=E().$implicit,o=E(2);return D(o.openCancelClassModal(r))}),P(5,"i",48),d(6," \u0625\u0644\u063A\u0627\u0621 "),c(),ys()}}function iH(n,e){if(n&1){let t=Me();xs(0),l(1,"button",49),O("click",function(){T(t);let r=E().$implicit,o=E(2);return D(o.openAttendanceModal(r))}),P(2,"i",50),d(3," \u062A\u0633\u062C\u064A\u0644 \u062D\u0636\u0648\u0631 "),c(),l(4,"button",51),O("click",function(){T(t);let r=E().$implicit,o=E(2);return D(o.openEndClassModal(r))}),P(5,"i",52),d(6," \u0625\u0646\u0647\u0627\u0621 "),c(),ys()}}function rH(n,e){n&1&&(xs(0),l(1,"div",53),P(2,"i",54),d(3," \u0645\u0643\u062A\u0645\u0644\u0629 "),c(),ys())}function oH(n,e){n&1&&(xs(0),l(1,"div",55),P(2,"i",56),d(3," \u0645\u0644\u063A\u064A\u0629 "),c(),ys())}function sH(n,e){if(n&1){let t=Me();l(0,"div",28)(1,"div",29)(2,"div",30)(3,"h3"),d(4),c(),l(5,"span",31),d(6),c()(),l(7,"div",32)(8,"span"),P(9,"i",33),d(10),c(),l(11,"span"),P(12,"i",34),d(13),c()()(),l(14,"div",35)(15,"div",36)(16,"span",37),d(17,"\u0627\u0644\u0645\u0627\u062F\u0629:"),c(),l(18,"span",38),d(19),c()(),l(20,"div",36)(21,"span",37),d(22,"\u0627\u0644\u0623\u0633\u062A\u0627\u0630:"),c(),l(23,"span",38),d(24),c()(),l(25,"div",36)(26,"span",37),d(27,"\u0627\u0644\u0642\u0627\u0639\u0629:"),c(),l(28,"span",38),d(29),c()(),ee(30,eH,5,1,"div",39),c(),l(31,"div",40)(32,"button",41),O("click",function(){let r=T(t).$implicit,o=E(2);return D(o.openAttendanceModal(r))}),P(33,"i",42),d(34," \u0627\u0644\u062D\u0636\u0648\u0631 "),ee(35,tH,2,1,"span",43),c(),l(36,"div",44),ee(37,nH,7,0,"ng-container",43)(38,iH,7,0,"ng-container",43)(39,rH,4,0,"ng-container",43)(40,oH,4,0,"ng-container",43),c()()()}if(n&2){let t=e.$implicit,i=E(2);g(4),te((t.class==null?null:t.class.name)||"\u0628\u062F\u0648\u0646 \u0627\u0633\u0645"),g(),R("ngClass",i.getStatusClass(t.status)),g(),K(" ",t.status==="scheduled"?"\u0645\u062C\u062F\u0648\u0644\u0629":t.status==="ongoing"?"\u062C\u0627\u0631\u064A\u0629":t.status==="completed"?"\u0645\u0643\u062A\u0645\u0644\u0629":"\u0645\u0644\u063A\u064A\u0629"," "),g(4),K(" ",i.formatDate(t.date),""),g(3),K(" ",i.formatTime(t.startTime),""),g(6),te((t.class==null?null:t.class.subject)||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),g(5),te((t.teacher==null?null:t.teacher.name)||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),g(5),te((t.classroom==null?null:t.classroom.name)||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),g(),R("ngIf",t.notes),g(2),R("disabled",t.status==="cancelled"),g(3),R("ngIf",(t.attendance||Cs(15,Kz)).length>0),g(2),R("ngIf",t.status==="scheduled"),g(),R("ngIf",t.status==="ongoing"),g(),R("ngIf",t.status==="completed"),g(),R("ngIf",t.status==="cancelled")}}function aH(n,e){if(n&1&&(l(0,"div",26),ee(1,sH,41,16,"div",27),c()),n&2){let t=E();g(),R("ngForOf",t.filteredLiveClasses)}}function lH(n,e){if(n&1&&(l(0,"div",30)(1,"p")(2,"strong"),d(3),c()(),l(4,"p"),d(5),c(),l(6,"p"),d(7),c()()),n&2){let t=E(2);g(3),te(t.selectedLiveClass.class==null?null:t.selectedLiveClass.class.name),g(2),Un("",t.selectedLiveClass.class==null?null:t.selectedLiveClass.class.subject," | ",t.selectedLiveClass.teacher==null?null:t.selectedLiveClass.teacher.name,""),g(2),Un("",t.formatDate(t.selectedLiveClass.date)," - ",t.formatTime(t.selectedLiveClass.startTime),"")}}function cH(n,e){if(n&1&&(l(0,"div",86),P(1,"i",54),d(2),c()),n&2){let t=E(2);g(2),K(" \u062A\u0645 \u0645\u0633\u062D \u0627\u0644\u0628\u0637\u0627\u0642\u0629: ",t.scannedRFID," ")}}function uH(n,e){if(n&1&&(l(0,"option",90),d(1),c()),n&2){let t=e.$implicit;R("value",t._id),g(),Un(" ",t.name," (",t.studentId,") ")}}function dH(n,e){if(n&1){let t=Me();l(0,"div",71)(1,"label"),d(2,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0637\u0627\u0644\u0628:"),c(),l(3,"select",87),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.newAttendance.studentId,r)||(o.newAttendance.studentId=r),D(r)}),l(4,"option",88),d(5,"-- \u0627\u062E\u062A\u0631 \u0637\u0627\u0644\u0628 --"),c(),ee(6,uH,2,3,"option",89),c()()}if(n&2){let t=E(2);g(3),de("ngModel",t.newAttendance.studentId),R("disabled",t.isScanningRFID),g(3),R("ngForOf",t.getClassStudents())}}function fH(n,e){if(n&1){let t=Me();l(0,"button",91),O("click",function(){T(t);let r=E(2);return D(r.autoMarkAbsent())}),P(1,"i",92),d(2," \u0648\u0636\u0639 \u063A\u0627\u0626\u0628 \u062A\u0644\u0642\u0627\u0626\u064A "),c()}}function hH(n,e){n&1&&(l(0,"div",93),P(1,"i",23),d(2," \u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0633\u062C\u0644 \u0627\u0644\u062D\u0636\u0648\u0631... "),c())}function pH(n,e){n&1&&(l(0,"div",94)(1,"p"),d(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0633\u062C\u0644\u0627\u062A \u062D\u0636\u0648\u0631"),c()())}function mH(n,e){if(n&1&&(l(0,"div",98)(1,"span",99),d(2),c(),l(3,"span",100),d(4),c(),l(5,"span",101),d(6),c(),l(7,"span",102),d(8),pn(9,"date"),c()()),n&2){let t=e.$implicit,i=E(3);g(2),te((t.student==null?null:t.student.name)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),g(),R("ngClass",i.getAttendanceStatusClass(t.status)),g(),K(" ",t.status==="present"?"\u062D\u0627\u0636\u0631":t.status==="late"?"\u0645\u062A\u0623\u062E\u0631":"\u063A\u0627\u0626\u0628"," "),g(2),te(t.method==="manual"?"\u064A\u062F\u0648\u064A":"RFID"),g(2),te(gi(9,5,t.timestamp,"HH:mm"))}}function gH(n,e){if(n&1&&(l(0,"div",95)(1,"div",96)(2,"span"),d(3,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628"),c(),l(4,"span"),d(5,"\u0627\u0644\u062D\u0627\u0644\u0629"),c(),l(6,"span"),d(7,"\u0627\u0644\u0637\u0631\u064A\u0642\u0629"),c(),l(8,"span"),d(9,"\u0627\u0644\u0648\u0642\u062A"),c()(),ee(10,mH,10,8,"div",97),c()),n&2){let t=E(2);g(10),R("ngForOf",t.attendanceRecords)}}function _H(n,e){if(n&1){let t=Me();l(0,"div",57)(1,"div",58)(2,"div",59)(3,"h2"),d(4,"\u0633\u062C\u0644 \u0627\u0644\u062D\u0636\u0648\u0631"),c(),l(5,"button",60),O("click",function(){T(t);let r=E();return D(r.closeAllModals())}),d(6,"\xD7"),c()(),l(7,"div",61),ee(8,lH,8,5,"div",62),l(9,"div",63)(10,"h3"),d(11,"\u062A\u0633\u062C\u064A\u0644 \u062D\u0636\u0648\u0631 \u062C\u062F\u064A\u062F"),c(),l(12,"div",64)(13,"button",65),O("click",function(){T(t);let r=E();return D(r.newAttendance.method="manual")}),P(14,"i",66),d(15," \u064A\u062F\u0648\u064A "),c(),l(16,"button",67),O("click",function(){T(t);let r=E();return D(r.startRFIDScan())}),P(17,"i",68),d(18),c()(),ee(19,cH,3,1,"div",69)(20,dH,7,3,"div",70),l(21,"div",71)(22,"label"),d(23,"\u062D\u0627\u0644\u0629 \u0627\u0644\u062D\u0636\u0648\u0631:"),c(),l(24,"select",72),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newAttendance.status,r)||(o.newAttendance.status=r),D(r)}),l(25,"option",73),d(26,"\u062D\u0627\u0636\u0631"),c(),l(27,"option",74),d(28,"\u0645\u062A\u0623\u062E\u0631"),c(),l(29,"option",75),d(30,"\u063A\u0627\u0626\u0628"),c()()(),l(31,"div",71)(32,"label"),d(33,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A:"),c(),l(34,"textarea",76),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newAttendance.notes,r)||(o.newAttendance.notes=r),D(r)}),c()(),l(35,"div",77)(36,"button",78),O("click",function(){T(t);let r=E();return D(r.recordAttendance())}),P(37,"i",79),d(38," \u062D\u0641\u0638 "),c(),l(39,"button",4),O("click",function(){T(t);let r=E();return D(r.resetAttendanceForm())}),P(40,"i",80),d(41," \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),c(),ee(42,fH,3,0,"button",81),c()(),l(43,"div",82)(44,"h3"),d(45),c(),ee(46,hH,3,0,"div",83)(47,pH,3,0,"div",84)(48,gH,11,1,"div",85),c()()()()}if(n&2){let t=E();g(8),R("ngIf",t.selectedLiveClass),g(5),Ue("active",t.newAttendance.method==="manual"),g(3),Ue("active",t.newAttendance.method==="rfid")("scanning",t.isScanningRFID),R("disabled",t.isScanningRFID),g(2),K(" ",t.isScanningRFID?"\u062C\u0627\u0631\u064A \u0627\u0644\u0645\u0633\u062D...":"\u0628\u0637\u0627\u0642\u0629 RFID"," "),g(),R("ngIf",t.scannedRFID),g(),R("ngIf",t.newAttendance.method==="manual"),g(4),de("ngModel",t.newAttendance.status),g(10),de("ngModel",t.newAttendance.notes),g(2),R("disabled",!t.newAttendance.studentId),g(6),R("ngIf",(t.selectedLiveClass==null?null:t.selectedLiveClass.status)==="ongoing"),g(3),K("\u0633\u062C\u0644 \u0627\u0644\u062D\u0636\u0648\u0631 (",t.attendanceRecords.length,")"),g(),R("ngIf",t.isLoadingAttendance),g(),R("ngIf",!t.isLoadingAttendance&&t.attendanceRecords.length===0),g(),R("ngIf",!t.isLoadingAttendance&&t.attendanceRecords.length>0)}}function vH(n,e){if(n&1&&(l(0,"div",30)(1,"p"),d(2,"\u0647\u0644 \u062A\u0631\u064A\u062F \u0628\u062F\u0621 \u062D\u0635\u0629 "),l(3,"strong"),d(4),c(),d(5,"\u061F"),c(),l(6,"p"),d(7),c(),l(8,"p"),d(9),c()()),n&2){let t=E(2);g(4),te(t.selectedLiveClass.class==null?null:t.selectedLiveClass.class.name),g(3),Un("",t.formatDate(t.selectedLiveClass.date)," - ",t.formatTime(t.selectedLiveClass.startTime),""),g(2),K("\u0627\u0644\u0623\u0633\u062A\u0627\u0630: ",t.selectedLiveClass.teacher==null?null:t.selectedLiveClass.teacher.name,"")}}function xH(n,e){if(n&1){let t=Me();l(0,"div",57)(1,"div",58)(2,"div",59)(3,"h2"),d(4,"\u0628\u062F\u0621 \u0627\u0644\u062D\u0635\u0629"),c(),l(5,"button",60),O("click",function(){T(t);let r=E();return D(r.closeAllModals())}),d(6,"\xD7"),c()(),l(7,"div",61),ee(8,vH,10,4,"div",62),l(9,"div",77)(10,"button",2),O("click",function(){T(t);let r=E();return D(r.startLiveClass())}),P(11,"i",103),d(12," \u0646\u0639\u0645\u060C \u0628\u062F\u0621 \u0627\u0644\u062D\u0635\u0629 "),c(),l(13,"button",4),O("click",function(){T(t);let r=E();return D(r.closeAllModals())}),P(14,"i",48),d(15," \u0625\u0644\u063A\u0627\u0621 "),c()()()()()}if(n&2){let t=E();g(8),R("ngIf",t.selectedLiveClass)}}function yH(n,e){if(n&1&&(l(0,"div",30)(1,"p"),d(2,"\u0647\u0644 \u062A\u0631\u064A\u062F \u0625\u0646\u0647\u0627\u0621 \u062D\u0635\u0629 "),l(3,"strong"),d(4),c(),d(5,"\u061F"),c(),l(6,"p"),d(7),c(),l(8,"p"),d(9),c()()),n&2){let t=E(2);g(4),te(t.selectedLiveClass.class==null?null:t.selectedLiveClass.class.name),g(3),K("\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0621: ",t.formatTime(t.selectedLiveClass.startTime),""),g(2),K("\u0639\u062F\u062F \u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u062D\u0627\u0636\u0631\u064A\u0646: ",t.selectedLiveClass.attendance.length||0,"")}}function bH(n,e){if(n&1){let t=Me();l(0,"div",57)(1,"div",58)(2,"div",59)(3,"h2"),d(4,"\u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062D\u0635\u0629"),c(),l(5,"button",60),O("click",function(){T(t);let r=E();return D(r.closeAllModals())}),d(6,"\xD7"),c()(),l(7,"div",61),ee(8,yH,10,3,"div",62),l(9,"div",77)(10,"button",2),O("click",function(){T(t);let r=E();return D(r.endLiveClass())}),P(11,"i",103),d(12," \u0646\u0639\u0645\u060C \u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 "),c(),l(13,"button",4),O("click",function(){T(t);let r=E();return D(r.closeAllModals())}),P(14,"i",48),d(15," \u0625\u0644\u063A\u0627\u0621 "),c()()()()()}if(n&2){let t=E();g(8),R("ngIf",t.selectedLiveClass)}}function CH(n,e){if(n&1&&(l(0,"div",30)(1,"p"),d(2,"\u0647\u0644 \u062A\u0631\u064A\u062F \u0625\u0644\u063A\u0627\u0621 \u062D\u0635\u0629 "),l(3,"strong"),d(4),c(),d(5,"\u061F"),c(),l(6,"p"),d(7),c(),l(8,"p",105),d(9,"\u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621 \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646\u0647"),c()()),n&2){let t=E(2);g(4),te(t.selectedLiveClass.class==null?null:t.selectedLiveClass.class.name),g(3),Un("",t.formatDate(t.selectedLiveClass.date)," - ",t.formatTime(t.selectedLiveClass.startTime),"")}}function wH(n,e){if(n&1){let t=Me();l(0,"div",57)(1,"div",58)(2,"div",59)(3,"h2"),d(4,"\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u0635\u0629"),c(),l(5,"button",60),O("click",function(){T(t);let r=E();return D(r.closeAllModals())}),d(6,"\xD7"),c()(),l(7,"div",61),ee(8,CH,10,3,"div",62),l(9,"div",77)(10,"button",91),O("click",function(){T(t);let r=E();return D(r.cancelLiveClass())}),P(11,"i",48),d(12," \u0646\u0639\u0645\u060C \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 "),c(),l(13,"button",4),O("click",function(){T(t);let r=E();return D(r.closeAllModals())}),P(14,"i",104),d(15," \u0625\u0628\u0642\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 "),c()()()()()}if(n&2){let t=E();g(8),R("ngIf",t.selectedLiveClass)}}function MH(n,e){if(n&1&&(l(0,"option",90),d(1),c()),n&2){let t=e.$implicit;R("value",t._id),g(),Un(" ",t.name," (",t.subject,") ")}}function SH(n,e){if(n&1&&(l(0,"option",90),d(1),c()),n&2){let t=e.$implicit;R("value",t._id),g(),K(" ",t.name," ")}}function EH(n,e){if(n&1&&(l(0,"option",90),d(1),c()),n&2){let t=e.$implicit;R("value",t._id),g(),K(" ",t.name," ")}}function AH(n,e){if(n&1){let t=Me();l(0,"div",57)(1,"div",58)(2,"div",59)(3,"h2"),d(4,"\u0625\u0646\u0634\u0627\u0621 \u062D\u0635\u0629 \u062C\u062F\u064A\u062F\u0629"),c(),l(5,"button",60),O("click",function(){T(t);let r=E();return D(r.closeAllModals())}),d(6,"\xD7"),c()(),l(7,"div",61)(8,"div",71)(9,"label"),d(10,"\u0627\u062E\u062A\u0631 \u0627\u0644\u062D\u0635\u0629:"),c(),l(11,"select",72),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newClass.classId,r)||(o.newClass.classId=r),D(r)}),l(12,"option",88),d(13,"-- \u0627\u062E\u062A\u0631 \u062D\u0635\u0629 --"),c(),ee(14,MH,2,3,"option",89),c()(),l(15,"div",106)(16,"div",71)(17,"label"),d(18,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E:"),c(),l(19,"input",107),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newClass.date,r)||(o.newClass.date=r),D(r)}),c()(),l(20,"div",71)(21,"label"),d(22,"\u0648\u0642\u062A \u0627\u0644\u0628\u062F\u0621:"),c(),l(23,"input",108),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newClass.startTime,r)||(o.newClass.startTime=r),D(r)}),c()()(),l(24,"div",106)(25,"div",71)(26,"label"),d(27,"\u0648\u0642\u062A \u0627\u0644\u0627\u0646\u062A\u0647\u0627\u0621:"),c(),l(28,"input",108),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newClass.endTime,r)||(o.newClass.endTime=r),D(r)}),c()(),l(29,"div",71)(30,"label"),d(31,"\u0627\u0644\u0642\u0627\u0639\u0629:"),c(),l(32,"select",72),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newClass.classroomId,r)||(o.newClass.classroomId=r),D(r)}),l(33,"option",88),d(34,"-- \u0627\u062E\u062A\u0631 \u0642\u0627\u0639\u0629 --"),c(),ee(35,SH,2,2,"option",89),c()()(),l(36,"div",71)(37,"label"),d(38,"\u0627\u0644\u0623\u0633\u062A\u0627\u0630:"),c(),l(39,"select",72),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newClass.teacherId,r)||(o.newClass.teacherId=r),D(r)}),l(40,"option",88),d(41,"-- \u0627\u062E\u062A\u0631 \u0623\u0633\u062A\u0627\u0630\u0627 --"),c(),ee(42,EH,2,2,"option",89),c()(),l(43,"div",71)(44,"label"),d(45,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A:"),c(),l(46,"textarea",109),fe("ngModelChange",function(r){T(t);let o=E();return he(o.newClass.notes,r)||(o.newClass.notes=r),D(r)}),c()(),l(47,"div",77)(48,"button",78),O("click",function(){T(t);let r=E();return D(r.createLiveClass())}),P(49,"i",3),d(50," \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062D\u0635\u0629 "),c(),l(51,"button",4),O("click",function(){T(t);let r=E();return D(r.closeAllModals())}),P(52,"i",48),d(53," \u0625\u0644\u063A\u0627\u0621 "),c()()()()()}if(n&2){let t=E();g(11),de("ngModel",t.newClass.classId),g(3),R("ngForOf",t.classes),g(5),de("ngModel",t.newClass.date),g(4),de("ngModel",t.newClass.startTime),g(5),de("ngModel",t.newClass.endTime),g(4),de("ngModel",t.newClass.classroomId),g(3),R("ngForOf",t.classrooms),g(4),de("ngModel",t.newClass.teacherId),g(3),R("ngForOf",t.teachers),g(4),de("ngModel",t.newClass.notes),g(2),R("disabled",!t.newClass.classId||!t.newClass.date||!t.newClass.startTime)}}var Eg=class n{constructor(e,t,i){this.liveClassesService=e;this.cardsService=t;this.lessonsService=i}liveClasses=[];filteredLiveClasses=[];selectedLiveClass=null;statusFilter="all";dateFilter="";searchTerm="";isLoading=!1;isLoadingAttendance=!1;showAttendanceModal=!1;showStartClassModal=!1;showEndClassModal=!1;showCancelClassModal=!1;showCreateClassModal=!1;attendanceRecords=[];newAttendance={studentId:"",status:"present",method:"manual",notes:""};isScanningRFID=!1;scannedRFID="";newClass={classId:"",date:"",startTime:"",endTime:"",teacherId:"",classroomId:"",notes:""};classes=[];teachers=[];classrooms=[];subscriptions=[];ngOnInit(){this.loadLiveClasses(),this.loadClasses(),this.loadTeachers(),this.loadClassrooms()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadLiveClasses(){this.isLoading=!0;let e={};this.statusFilter!=="all"&&(e.status=this.statusFilter),this.dateFilter&&(e.date=this.dateFilter);let t=this.liveClassesService.getLiveClasses(e).subscribe({next:i=>{this.liveClasses=i,this.filterLiveClasses(),this.isLoading=!1},error:i=>{console.error("Error loading live classes:",i),this.isLoading=!1}});this.subscriptions.push(t)}filterLiveClasses(){let e=[...this.liveClasses];if(this.searchTerm.trim()){let t=this.searchTerm.toLowerCase();e=e.filter(i=>i.class?.name?.toLowerCase().includes(t)||i.teacher?.name?.toLowerCase().includes(t)||i.classroom?.name?.toLowerCase().includes(t))}this.filteredLiveClasses=e}loadClasses(){let e=this.lessonsService.getClasses().subscribe({next:t=>{this.classes=t},error:t=>{console.error("Error loading classes:",t)}});this.subscriptions.push(e)}loadTeachers(){this.teachers=[{_id:"1",name:"Teacher 1"},{_id:"2",name:"Teacher 2"},{_id:"3",name:"Teacher 3"}]}loadClassrooms(){this.classrooms=[{_id:"1",name:"Room 101"},{_id:"2",name:"Room 102"},{_id:"3",name:"Room 103"}]}openAttendanceModal(e){this.selectedLiveClass=e,this.loadAttendance(e._id),this.showAttendanceModal=!0}openStartClassModal(e){this.selectedLiveClass=e,this.showStartClassModal=!0}openEndClassModal(e){this.selectedLiveClass=e,this.showEndClassModal=!0}openCancelClassModal(e){this.selectedLiveClass=e,this.showCancelClassModal=!0}openCreateClassModal(){let e=new Date().toISOString().split("T")[0];this.newClass={classId:"",date:e,startTime:"",endTime:"",teacherId:"",classroomId:"",notes:""},this.showCreateClassModal=!0}closeAllModals(){this.showAttendanceModal=!1,this.showStartClassModal=!1,this.showEndClassModal=!1,this.showCancelClassModal=!1,this.showCreateClassModal=!1,this.selectedLiveClass=null,this.isScanningRFID=!1,this.scannedRFID=""}startLiveClass(){if(!this.selectedLiveClass)return;let e=this.liveClassesService.startLiveClass(this.selectedLiveClass._id).subscribe({next:t=>{this.updateLiveClassInList(t),this.closeAllModals()},error:t=>{console.error("Error starting live class:",t)}});this.subscriptions.push(e)}endLiveClass(){if(!this.selectedLiveClass)return;let e=this.liveClassesService.endLiveClass(this.selectedLiveClass._id).subscribe({next:t=>{this.updateLiveClassInList(t),this.closeAllModals()},error:t=>{console.error("Error ending live class:",t)}});this.subscriptions.push(e)}cancelLiveClass(){if(!this.selectedLiveClass)return;let e=this.liveClassesService.cancelLiveClass(this.selectedLiveClass._id).subscribe({next:t=>{this.updateLiveClassInList(t),this.closeAllModals()},error:t=>{console.error("Error cancelling live class:",t)}});this.subscriptions.push(e)}createLiveClass(){let e={class:this.newClass.classId,date:this.newClass.date,startTime:this.newClass.startTime,endTime:this.newClass.endTime||void 0,teacher:this.newClass.teacherId,classroom:this.newClass.classroomId,notes:this.newClass.notes||void 0,status:"scheduled"},t=this.liveClassesService.createLiveClass(e).subscribe({next:i=>{this.liveClasses.unshift(i),this.filterLiveClasses(),this.closeAllModals()},error:i=>{console.error("Error creating live class:",i)}});this.subscriptions.push(t)}loadAttendance(e){this.isLoadingAttendance=!0;let t=this.liveClassesService.getLiveClassById(e).subscribe({next:i=>{this.attendanceRecords=i.attendance||[],this.isLoadingAttendance=!1},error:i=>{console.error("Error loading attendance:",i),this.isLoadingAttendance=!1}});this.subscriptions.push(t)}recordAttendance(){if(!this.selectedLiveClass||!this.newAttendance.studentId)return;let e={studentId:this.newAttendance.studentId,status:this.newAttendance.status,method:this.newAttendance.method,notes:this.newAttendance.notes||void 0},t=this.liveClassesService.recordAttendance(this.selectedLiveClass._id,e).subscribe({next:i=>{this.loadAttendance(this.selectedLiveClass._id),this.resetAttendanceForm()},error:i=>{console.error("Error recording attendance:",i)}});this.subscriptions.push(t)}resetAttendanceForm(){this.newAttendance={studentId:"",status:"present",method:"manual",notes:""},this.isScanningRFID=!1,this.scannedRFID=""}startRFIDScan(){this.isScanningRFID=!0,this.scannedRFID="",setTimeout(()=>{this.scannedRFID="UID"+Math.random().toString(36).substr(2,8).toUpperCase(),this.checkRFIDCard(this.scannedRFID)},1e3)}checkRFIDCard(e){let t=this.cardsService.checkCardAuthorization(e).subscribe({next:i=>{i.authorized&&i.student&&(this.newAttendance.studentId=i.student._id,this.newAttendance.method="rfid"),this.isScanningRFID=!1},error:i=>{console.error("Error checking RFID card:",i),this.isScanningRFID=!1}});this.subscriptions.push(t)}autoMarkAbsent(){if(!this.selectedLiveClass)return;let e=this.liveClassesService.autoMarkAbsent(this.selectedLiveClass._id).subscribe({next:()=>{this.loadAttendance(this.selectedLiveClass._id)},error:t=>{console.error("Error auto-marking absent:",t)}});this.subscriptions.push(e)}updateLiveClassInList(e){let t=this.liveClasses.findIndex(i=>i._id===e._id);t!==-1&&(this.liveClasses[t]=e),this.filterLiveClasses()}formatTime(e){return new Date(`2000-01-01T${e}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}formatDate(e){return new Date(e).toLocaleDateString()}getStatusClass(e){switch(e){case"scheduled":return"status-scheduled";case"ongoing":return"status-ongoing";case"completed":return"status-completed";case"cancelled":return"status-cancelled";default:return""}}getAttendanceStatusClass(e){switch(e){case"present":return"attendance-present";case"absent":return"attendance-absent";case"late":return"attendance-late";default:return""}}getClassStudents(){return this.selectedLiveClass?.class?.students?this.selectedLiveClass.class.students:[]}static \u0275fac=function(t){return new(t||n)(we(Os),we(tu),we(ea))};static \u0275cmp=Jt({type:n,selectors:[["app-live-class"]],decls:36,vars:11,consts:[[1,"live-class"],[1,"header"],[1,"btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"btn-secondary",3,"click"],[1,"fas","fa-sync-alt"],[1,"filters"],[1,"filter-group"],[1,"search-box"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u062D\u0635\u0629...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"fas","fa-search","search-icon"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","scheduled"],["value","ongoing"],["value","completed"],["value","cancelled"],["type","date",1,"date-filter",3,"ngModelChange","change","ngModel"],["class","loading",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","classes-grid",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"loading"],[1,"fas","fa-spinner","fa-spin"],[1,"empty-state"],[1,"fas","fa-calendar-times"],[1,"classes-grid"],["class","class-card",4,"ngFor","ngForOf"],[1,"class-card"],[1,"class-header"],[1,"class-info"],[1,"status-badge",3,"ngClass"],[1,"class-time"],[1,"far","fa-calendar"],[1,"far","fa-clock"],[1,"class-details"],[1,"detail"],[1,"label"],[1,"value"],["class","detail",4,"ngIf"],[1,"class-actions"],[1,"btn-attendance",3,"click","disabled"],[1,"fas","fa-users"],[4,"ngIf"],[1,"action-group"],[1,"btn-start",3,"click"],[1,"fas","fa-play"],[1,"btn-cancel",3,"click"],[1,"fas","fa-times"],[1,"btn-attendance",3,"click"],[1,"fas","fa-user-plus"],[1,"btn-end",3,"click"],[1,"fas","fa-stop"],[1,"completed-text"],[1,"fas","fa-check-circle"],[1,"cancelled-text"],[1,"fas","fa-ban"],[1,"modal-overlay"],[1,"give-cards-to-student-modal"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","class-info",4,"ngIf"],[1,"attendance-form"],[1,"method-selector"],[1,"method-btn",3,"click"],[1,"fas","fa-user-edit"],[1,"method-btn",3,"click","disabled"],[1,"fas","fa-id-card"],["class","scanned-rfid",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"form-select",3,"ngModelChange","ngModel"],["value","present"],["value","late"],["value","absent"],["rows","3","placeholder","\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629...",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-primary",3,"click","disabled"],[1,"fas","fa-save"],[1,"fas","fa-redo"],["class","btn-danger",3,"click",4,"ngIf"],[1,"attendance-records"],["class","loading-small",4,"ngIf"],["class","empty-state-small",4,"ngIf"],["class","records-table",4,"ngIf"],[1,"scanned-rfid"],[1,"form-select",3,"ngModelChange","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"btn-danger",3,"click"],[1,"fas","fa-user-times"],[1,"loading-small"],[1,"empty-state-small"],[1,"records-table"],[1,"record-header"],["class","record-row",4,"ngFor","ngForOf"],[1,"record-row"],[1,"student-name"],[1,"attendance-status",3,"ngClass"],[1,"method"],[1,"timestamp"],[1,"fas","fa-check"],[1,"fas","fa-undo"],[1,"text-danger"],[1,"form-row"],["type","date",1,"form-input",3,"ngModelChange","ngModel"],["type","time",1,"form-input",3,"ngModelChange","ngModel"],["rows","3","placeholder","\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629 \u0644\u0644\u062D\u0635\u0629...",1,"form-textarea",3,"ngModelChange","ngModel"]],template:function(t,i){t&1&&(l(0,"div",0)(1,"div",1)(2,"h1"),d(3,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u0628\u0627\u0634\u0631\u0629"),c(),l(4,"div")(5,"button",2),O("click",function(){return i.openCreateClassModal()}),P(6,"i",3),d(7," \u0625\u0646\u0634\u0627\u0621 \u062D\u0635\u0629 \u062C\u062F\u064A\u062F\u0629 "),c(),l(8,"button",4),O("click",function(){return i.loadLiveClasses()}),P(9,"i",5),d(10," \u062A\u062D\u062F\u064A\u062B "),c()()(),l(11,"div",6)(12,"div",7)(13,"div",8)(14,"input",9),fe("ngModelChange",function(o){return he(i.searchTerm,o)||(i.searchTerm=o),o}),O("input",function(){return i.filterLiveClasses()}),c(),P(15,"i",10),c(),l(16,"select",11),fe("ngModelChange",function(o){return he(i.statusFilter,o)||(i.statusFilter=o),o}),O("change",function(){return i.loadLiveClasses()}),l(17,"option",12),d(18,"\u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0627\u0644\u0627\u062A"),c(),l(19,"option",13),d(20,"\u0645\u062C\u062F\u0648\u0644\u0629"),c(),l(21,"option",14),d(22,"\u062C\u0627\u0631\u064A\u0629"),c(),l(23,"option",15),d(24,"\u0645\u0643\u062A\u0645\u0644\u0629"),c(),l(25,"option",16),d(26,"\u0645\u0644\u063A\u064A\u0629"),c()(),l(27,"input",17),fe("ngModelChange",function(o){return he(i.dateFilter,o)||(i.dateFilter=o),o}),O("change",function(){return i.loadLiveClasses()}),c()()(),ee(28,Jz,4,0,"div",18)(29,Qz,4,0,"div",19)(30,aH,2,1,"div",20)(31,_H,49,19,"div",21)(32,xH,16,1,"div",21)(33,bH,16,1,"div",21)(34,wH,16,1,"div",21)(35,AH,54,11,"div",21),c()),t&2&&(g(14),de("ngModel",i.searchTerm),g(2),de("ngModel",i.statusFilter),g(11),de("ngModel",i.dateFilter),g(),R("ngIf",i.isLoading),g(),R("ngIf",!i.isLoading&&i.filteredLiveClasses.length===0),g(),R("ngIf",!i.isLoading&&i.filteredLiveClasses.length>0),g(),R("ngIf",i.showAttendanceModal),g(),R("ngIf",i.showStartClassModal),g(),R("ngIf",i.showEndClassModal),g(),R("ngIf",i.showCancelClassModal),g(),R("ngIf",i.showCreateClassModal))},dependencies:[cn,Hu,Yn,Tn,Vr,Zn,vi,xi,Rn,si,Xn,Bn],styles:[".live-class[_ngcontent-%COMP%]{padding:20px;background-color:#f5f5f5;min-height:100vh}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;margin:0}.filters[_ngcontent-%COMP%]{margin-bottom:30px}.filter-group[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]{position:relative;flex:1;min-width:250px}.search-input[_ngcontent-%COMP%]{width:100%;padding:10px 40px 10px 15px;border:1px solid #ddd;border-radius:6px;font-size:14px}.search-icon[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translateY(-50%);color:#666}.filter-select[_ngcontent-%COMP%], .date-filter[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #ddd;border-radius:6px;font-size:14px;background-color:#fff}.date-filter[_ngcontent-%COMP%]{min-width:150px}.classes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.class-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 2px 10px #0000001a;transition:transform .3s ease}.class-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.class-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee}.class-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.class-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:capitalize}.status-scheduled[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.status-ongoing[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460}.status-completed[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-cancelled[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.class-time[_ngcontent-%COMP%]{display:flex;gap:10px;color:#666;font-size:14px}.class-details[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee}.detail[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.detail[_ngcontent-%COMP%]:last-child{margin-bottom:0}.label[_ngcontent-%COMP%]{font-weight:600;color:#666}.value[_ngcontent-%COMP%]{color:#333}.class-actions[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;gap:10px}.btn-attendance[_ngcontent-%COMP%], .btn-start[_ngcontent-%COMP%], .btn-end[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;font-size:14px;cursor:pointer;transition:all .3s ease}.btn-attendance[_ngcontent-%COMP%]{width:100%;background-color:#4a6cf7;color:#fff}.btn-attendance[_ngcontent-%COMP%]:hover{background-color:#3a5ce5}.action-group[_ngcontent-%COMP%]{display:flex;gap:10px}.btn-start[_ngcontent-%COMP%]{flex:1;background-color:#28a745;color:#fff}.btn-start[_ngcontent-%COMP%]:hover{background-color:#218838}.btn-end[_ngcontent-%COMP%]{flex:1;background-color:#17a2b8;color:#fff}.btn-end[_ngcontent-%COMP%]:hover{background-color:#138496}.btn-cancel[_ngcontent-%COMP%]{flex:1;background-color:#dc3545;color:#fff}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#c82333}.completed-text[_ngcontent-%COMP%], .cancelled-text[_ngcontent-%COMP%]{flex:1;text-align:center;padding:8px;font-size:14px;font-weight:600}.completed-text[_ngcontent-%COMP%]{color:#28a745}.cancelled-text[_ngcontent-%COMP%]{color:#dc3545}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.give-cards-to-student-modal[_ngcontent-%COMP%]{background:#fff;border-radius:10px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_modalSlideIn .3s ease}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%}.close-btn[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:10px}.class-info[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:15px;border-radius:6px;margin-bottom:20px}.class-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.attendance-form[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:20px;border-radius:6px;margin-bottom:30px}.attendance-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px;color:#333}.method-selector[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.method-btn[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ddd;background-color:#fff;border-radius:6px;cursor:pointer;transition:all .3s ease}.method-btn.active[_ngcontent-%COMP%]{background-color:#4a6cf7;color:#fff;border-color:#4a6cf7}.method-btn.scanning[_ngcontent-%COMP%]{background-color:#ffc107;color:#333;border-color:#ffc107}.scanned-rfid[_ngcontent-%COMP%]{font-size:12px;color:#28a745;font-family:monospace;margin-top:5px}.attendance-records[_ngcontent-%COMP%]{margin-top:20px}.attendance-records[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:15px;color:#333}.records-table[_ngcontent-%COMP%]{border:1px solid #eee;border-radius:6px;overflow:hidden}.record-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;background-color:#f8f9fa;padding:12px 15px;font-weight:600;color:#495057;border-bottom:1px solid #dee2e6}.record-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;padding:12px 15px;border-bottom:1px solid #eee}.record-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.student-name[_ngcontent-%COMP%]{font-weight:500}.attendance-status[_ngcontent-%COMP%]{padding:3px 8px;border-radius:12px;font-size:12px;font-weight:600;text-align:center}.attendance-present[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.attendance-absent[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.attendance-late[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.method[_ngcontent-%COMP%]{text-transform:capitalize}.timestamp[_ngcontent-%COMP%]{font-family:monospace;font-size:12px;color:#666}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#333}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .3s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#4a6cf7}.form-textarea[_ngcontent-%COMP%]{resize:vertical}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-size:14px;cursor:pointer;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]{background-color:#4a6cf7;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#3a5ce5}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666;font-size:16px;background:#fff;border-radius:10px;margin-top:20px}.loading-small[_ngcontent-%COMP%], .empty-state-small[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666;font-size:14px}"]})};var TH=["fileInput"];function DH(n,e){if(n&1&&(l(0,"option",93),d(1),c()),n&2){let t=e.$implicit;R("value",t),g(),te(t)}}function PH(n,e){n&1&&(l(0,"tr")(1,"td",94)(2,"div",95),P(3,"i",96),d(4," \u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644... "),c()()())}function IH(n,e){n&1&&(l(0,"tr")(1,"td",97),P(2,"i",98),d(3," \u0644\u0627 \u062A\u0648\u062C\u062F \u0646\u062A\u0627\u0626\u062C "),c()())}function OH(n,e){if(n&1&&(l(0,"span",109),d(1),c()),n&2){let t=e.$implicit;g(),K(" ",t," ")}}function RH(n,e){if(n&1){let t=Me();l(0,"tr",99),O("click",function(){let r=T(t).$implicit,o=E();return D(o.selectTeacher(r))}),l(1,"td"),d(2),c(),l(3,"td",100)(4,"strong"),d(5),c()(),l(6,"td"),ee(7,OH,2,1,"span",101),c(),l(8,"td"),d(9),c(),l(10,"td"),d(11),c(),l(12,"td"),d(13),c(),l(14,"td")(15,"span",102),d(16),c()(),l(17,"td",103)(18,"button",104),O("click",function(r){let o=T(t).$implicit;return E().openEditModal(o),D(r.stopPropagation())}),P(19,"i",81),c(),l(20,"button",105),O("click",function(r){let o=T(t).$implicit;return E().toggleTeacherStatus(o),D(r.stopPropagation())}),P(21,"i",106),c(),l(22,"button",107),O("click",function(r){let o=T(t).$implicit;return E().openDeleteModal(o),D(r.stopPropagation())}),P(23,"i",108),c()()()}if(n&2){let t=e.$implicit,i=e.index,r=E();Ue("selected",(r.selectedTeacher==null?null:r.selectedTeacher._id)===t._id),g(2),te((r.currentPage-1)*r.itemsPerPage+i+1),g(3),te(t.name),g(2),R("ngForOf",t.subjects),g(2),te(t.phone||"\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631"),g(2),te(t.email||"\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631"),g(2),te(r.formatDate(t.hireDate)),g(2),Ue("active",r.isTeacherActive(t))("inactive",!r.isTeacherActive(t)),g(),K(" ",r.getTeacherStatus(t)," "),g(4),Cx("title",r.isTeacherActive(t)?"\u062A\u0639\u0637\u064A\u0644":"\u062A\u0641\u0639\u064A\u0644"),g(),Ue("fa-user-slash",r.isTeacherActive(t))("fa-user-check",!r.isTeacherActive(t))}}function kH(n,e){if(n&1){let t=Me();l(0,"div",110)(1,"button",111),O("click",function(){T(t);let r=E();return D(r.prevPage())}),P(2,"i",112),d(3," \u0627\u0644\u0633\u0627\u0628\u0642 "),c(),l(4,"span",113),d(5),c(),l(6,"button",111),O("click",function(){T(t);let r=E();return D(r.nextPage())}),d(7," \u0627\u0644\u062A\u0627\u0644\u064A "),P(8,"i",114),c()()}if(n&2){let t=E();g(),R("disabled",t.currentPage===1),g(4),Un(" \u0627\u0644\u0635\u0641\u062D\u0629 ",t.currentPage," \u0645\u0646 ",t.totalPages," "),g(),R("disabled",t.currentPage===t.totalPages)}}function NH(n,e){if(n&1&&(l(0,"div",143)(1,"div",144)(2,"strong"),d(3),c(),l(4,"small",120),d(5),c()(),l(6,"span",145),d(7),c()()),n&2){let t=e.$implicit,i=E(3);g(3),te(t.name),g(2),te(t.subject),g(2),K("",i.calculateClassesstudentlenght(t.students)||0," \u0637\u0627\u0644\u0628")}}function FH(n,e){if(n&1){let t=Me();l(0,"button",146),O("click",function(){T(t);let r=E(3);return D(r.showClassesModal=!0)}),d(1," \u0639\u0631\u0636 \u0627\u0644\u0645\u0632\u064A\u062F "),P(2,"i",114),c()}}function LH(n,e){if(n&1&&(l(0,"div",140),ee(1,NH,8,3,"div",141)(2,FH,3,0,"button",142),c()),n&2){let t=E(2);g(),R("ngForOf",t.teacherClasses.slice(0,5)),g(),R("ngIf",t.teacherClasses.length>5)}}function VH(n,e){n&1&&(l(0,"div",147),P(1,"i",40),l(2,"p"),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u062D\u0635\u0635 \u0645\u0633\u0646\u062F\u0629"),c()())}function UH(n,e){if(n&1){let t=Me();l(0,"div",115)(1,"div",116)(2,"div",117)(3,"div",118),P(4,"i",119),c(),l(5,"div",100)(6,"h4"),d(7),c(),l(8,"p",120),d(9,"\u0623\u0633\u062A\u0627\u0630"),c()()(),l(10,"div",121)(11,"div",122),P(12,"i",123),l(13,"span")(14,"strong"),d(15,"\u0627\u0644\u0645\u0648\u0627\u062F:"),c(),d(16),c()(),l(17,"div",122),P(18,"i",124),l(19,"span")(20,"strong"),d(21,"\u0627\u0644\u0647\u0627\u062A\u0641:"),c(),d(22),c()(),l(23,"div",122),P(24,"i",125),l(25,"span")(26,"strong"),d(27,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A:"),c(),d(28),c()(),l(29,"div",122),P(30,"i",42),l(31,"span")(32,"strong"),d(33,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0639\u064A\u064A\u0646:"),c(),d(34),c()(),l(35,"div",122),P(36,"i",38),l(37,"span")(38,"strong"),d(39,"\u0627\u0644\u062D\u0627\u0644\u0629:"),c(),l(40,"span",102),d(41),c()()()()(),l(42,"div",126)(43,"h5"),d(44,"\u0627\u0644\u0625\u062D\u0635\u0627\u0626\u064A\u0627\u062A"),c(),l(45,"div",127)(46,"div",128)(47,"div",129),d(48),c(),l(49,"div",130),d(50,"\u0639\u062F\u062F \u0627\u0644\u062D\u0635\u0635"),c()(),l(51,"div",128)(52,"div",129),d(53),c(),l(54,"div",130),d(55,"\u0639\u062F\u062F \u0627\u0644\u0637\u0644\u0627\u0628"),c()(),l(56,"div",128)(57,"div",129),d(58),c(),l(59,"div",130),d(60,"\u062D\u0635\u0635 \u062D\u064A\u0629"),c()(),l(61,"div",128)(62,"div",129),d(63),c(),l(64,"div",130),d(65,"\u062D\u0635\u0635 \u0647\u0630\u0627 \u0627\u0644\u0634\u0647\u0631"),c()()()(),l(66,"div",131)(67,"div",132)(68,"h5"),d(69,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u0633\u0646\u062F\u0629"),c(),l(70,"span",133),d(71),c()(),ee(72,LH,3,2,"div",134)(73,VH,4,0,"ng-template",null,2,np),c(),l(75,"div",135)(76,"h5"),d(77,"\u0625\u062C\u0631\u0627\u0621\u0627\u062A \u0633\u0631\u064A\u0639\u0629"),c(),l(78,"div",136)(79,"button",137),O("click",function(){T(t);let r=E();return D(r.openEditModal(r.selectedTeacher))}),P(80,"i",81),d(81," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A "),c(),l(82,"button",138),O("click",function(){T(t);let r=E();return D(r.toggleTeacherStatus(r.selectedTeacher))}),P(83,"i",106),d(84),c(),l(85,"button",139),O("click",function(){T(t);let r=E();return D(r.openDeleteModal(r.selectedTeacher))}),P(86,"i",108),d(87," \u062D\u0630\u0641 "),c()()()()}if(n&2){let t=Ru(74),i=E();g(7),te(i.selectedTeacher.name),g(9),K(" ",i.getSubjectsText(i.selectedTeacher.subjects),""),g(6),K(" ",i.selectedTeacher.phone||"\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631",""),g(6),K(" ",i.selectedTeacher.email||"\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631",""),g(6),K(" ",i.formatDate(i.selectedTeacher.hireDate),""),g(6),Ue("active",i.isTeacherActive(i.selectedTeacher)),g(),K(" ",i.getTeacherStatus(i.selectedTeacher)," "),g(7),te(i.teacherStats.totalClasses),g(5),te(i.teacherStats.totalStudents),g(5),te(i.teacherStats.totalLiveClasses),g(5),te(i.teacherStats.thisMonthClasses),g(8),te(i.teacherClasses.length),g(),R("ngIf",i.teacherClasses.length>0)("ngIfElse",t),g(11),Ue("fa-user-slash",i.isTeacherActive(i.selectedTeacher))("fa-user-check",!i.isTeacherActive(i.selectedTeacher)),g(),K(" ",i.isTeacherActive(i.selectedTeacher)?"\u062A\u0639\u0637\u064A\u0644":"\u062A\u0641\u0639\u064A\u0644"," ")}}function BH(n,e){if(n&1){let t=Me();l(0,"div",148)(1,"input",149),O("change",function(){let r=T(t).$implicit,o=E();return D(o.toggleSubject(r,"new"))}),c(),l(2,"label",150),d(3),c()()}if(n&2){let t=e.$implicit,i=E();g(),R("id","new-subject-"+t)("checked",i.isSubjectSelected(t,"new")),g(),R("for","new-subject-"+t),g(),K(" ",t," ")}}function zH(n,e){n&1&&(l(0,"span"),P(1,"i",96),d(2," \u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638..."),c())}function HH(n,e){n&1&&(l(0,"span"),d(1,"\u062D\u0641\u0638"),c())}function jH(n,e){if(n&1){let t=Me();l(0,"div",148)(1,"input",149),O("change",function(){let r=T(t).$implicit,o=E(2);return D(o.toggleSubject(r,"edit"))}),c(),l(2,"label",150),d(3),c()()}if(n&2){let t=e.$implicit,i=E(2);g(),R("id","edit-subject-"+t)("checked",i.isSubjectSelected(t,"edit")),g(),R("for","edit-subject-"+t),g(),K(" ",t," ")}}function GH(n,e){if(n&1){let t=Me();l(0,"form",64,3),O("ngSubmit",function(){T(t);let r=E();return D(r.editTeacher())}),l(2,"div",65)(3,"label",151),d(4,"\u0627\u0633\u0645 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 *"),c(),l(5,"input",152),fe("ngModelChange",function(r){T(t);let o=E();return he(o.editTeacherData.name,r)||(o.editTeacherData.name=r),D(r)}),c()(),l(6,"div",65)(7,"label"),d(8,"\u0627\u0644\u0645\u0648\u0627\u062F *"),c(),l(9,"div",68),ee(10,jH,4,4,"div",69),c()(),l(11,"div",17)(12,"div",70)(13,"div",65)(14,"label",153),d(15,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),c(),l(16,"input",154),fe("ngModelChange",function(r){T(t);let o=E();return he(o.editTeacherData.phone,r)||(o.editTeacherData.phone=r),D(r)}),c()()(),l(17,"div",70)(18,"div",65)(19,"label",155),d(20,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),c(),l(21,"input",156),fe("ngModelChange",function(r){T(t);let o=E();return he(o.editTeacherData.email,r)||(o.editTeacherData.email=r),D(r)}),c()()()(),l(22,"div",65)(23,"label",157),d(24,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0639\u064A\u064A\u0646"),c(),l(25,"input",158),fe("ngModelChange",function(r){T(t);let o=E();return he(o.editTeacherData.hireDate,r)||(o.editTeacherData.hireDate=r),D(r)}),c()(),l(26,"div",65)(27,"div",159)(28,"input",160),fe("ngModelChange",function(r){T(t);let o=E();return he(o.editTeacherData.active,r)||(o.editTeacherData.active=r),D(r)}),c(),l(29,"label",161),d(30," \u0623\u0633\u062A\u0627\u0630 \u0646\u0634\u0637 "),c()()()()}if(n&2){let t=E();g(5),de("ngModel",t.editTeacherData.name),g(5),R("ngForOf",t.subjectsList),g(6),de("ngModel",t.editTeacherData.phone),g(5),de("ngModel",t.editTeacherData.email),g(4),de("ngModel",t.editTeacherData.hireDate),g(3),de("ngModel",t.editTeacherData.active)}}function WH(n,e){n&1&&(l(0,"span"),P(1,"i",96),d(2," \u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u062F\u064A\u062B..."),c())}function $H(n,e){n&1&&(l(0,"span"),d(1,"\u062A\u062D\u062F\u064A\u062B"),c())}function qH(n,e){if(n&1&&(l(0,"p"),d(1," \u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 "),l(2,"strong"),d(3),c(),d(4,"\u061F "),c()),n&2){let t=E();g(3),te(t.selectedTeacher.name)}}function YH(n,e){n&1&&(l(0,"span"),P(1,"i",96),d(2," \u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0630\u0641..."),c())}function XH(n,e){n&1&&(l(0,"span"),d(1,"\u062D\u0630\u0641"),c())}function ZH(n,e){if(n&1&&(l(0,"small",163),d(1),c()),n&2){let t=e.$implicit;g(),Un(" ",t.day," ",t.time," ")}}function KH(n,e){if(n&1&&(l(0,"tr")(1,"td"),d(2),c(),l(3,"td"),d(4),c(),l(5,"td"),d(6),c(),l(7,"td"),d(8),c(),l(9,"td"),ee(10,ZH,2,2,"small",162),c()()),n&2){let t=e.$implicit;g(2),te(t.name),g(2),te(t.subject),g(2),te(t.students.length||0),g(2),te(t.academicYear||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),g(2),R("ngForOf",t.schedule)}}function JH(n,e){n&1&&(l(0,"div",164)(1,"div",165)(2,"span",166),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),c()()())}var Ag=class n{constructor(e,t,i,r,o){this.teachersService=e;this.classesService=t;this.liveClassesService=i;this.lessonsService=r;this.authService=o}teachers=[];classes=[];liveClasses=[];teacherClasses=[];teacherLiveClasses=[];selectedTeacher=null;selectedTeacherId="";newTeacher={name:"",subjects:[],phone:"",email:"",hireDate:new Date().toISOString().split("T")[0],active:!0};editTeacherData={};searchTerm="";subjectFilter="";statusFilter="all";subjectsList=["\u0631\u064A\u0627\u0636\u064A\u0627\u062A","\u0641\u064A\u0632\u064A\u0627\u0621","\u0639\u0644\u0648\u0645","\u0644\u063A\u0629 \u0639\u0631\u0628\u064A\u0629","\u0644\u063A\u0629 \u0641\u0631\u0646\u0633\u064A\u0629","\u0644\u063A\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629","\u062A\u0627\u0631\u064A\u062E","\u062C\u063A\u0631\u0627\u0641\u064A\u0627","\u0641\u0644\u0633\u0641\u0629","\u0625\u0639\u0644\u0627\u0645 \u0622\u0644\u064A"];isLoading=!1;showAddModal=!1;showEditModal=!1;showDetailsModal=!1;showConfirmDeleteModal=!1;showClassesModal=!1;teacherStats={totalClasses:0,totalStudents:0,totalLiveClasses:0,thisMonthClasses:0};currentPage=1;itemsPerPage=10;totalItems=0;fileInput;ngOnInit(){this.loadTeachers(),this.loadClasses(),this.loadLiveClasses()}get activeTeachersCount(){return this.teachers.filter(e=>this.isTeacherActive(e)).length}loadTeachers(){this.isLoading=!0,this.teachersService.getTeachers().subscribe({next:e=>{this.teachers=e,this.totalItems=e.length,this.isLoading=!1},error:e=>{console.error("Error loading teachers:",e),this.isLoading=!1,alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629")}})}loadClasses(){this.classesService.getClasses().subscribe({next:e=>{this.classes=e},error:e=>{console.error("Error loading classes:",e)}})}loadLiveClasses(){this.liveClassesService.getLiveClasses().subscribe({next:e=>{this.liveClasses=e},error:e=>{console.error("Error loading live classes:",e)}})}get filteredTeachers(){let e=this.teachers;if(this.searchTerm){let t=this.searchTerm.toLowerCase();e=e.filter(i=>i.name.toLowerCase().includes(t)||i.email?.toLowerCase().includes(t)||i.phone?.includes(t))}return this.subjectFilter&&(e=e.filter(t=>t.subjects.includes(this.subjectFilter))),this.statusFilter==="active"?e=e.filter(t=>t.active===void 0||t.active===!0):this.statusFilter==="inactive"&&(e=e.filter(t=>t.active===!1)),this.totalItems=e.length,e}get paginatedTeachers(){let e=(this.currentPage-1)*this.itemsPerPage;return this.filteredTeachers.slice(e,e+this.itemsPerPage)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}prevPage(){this.currentPage>1&&this.currentPage--}get totalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}selectTeacher(e){this.selectedTeacher=e,this.selectedTeacherId=e._id,this.loadTeacherDetails()}loadTeacherDetails(){this.selectedTeacher&&(this.teacherClasses=this.classes.filter(e=>e.teacher&&e.teacher._id===this.selectedTeacherId),this.teacherLiveClasses=this.liveClasses.filter(e=>e.teacher&&e.teacher._id===this.selectedTeacherId),this.calculateTeacherStats())}calculateTeacherStats(){if(!this.selectedTeacher)return;let e=new Date,t=e.getMonth()+1,i=e.getFullYear();this.teacherStats={totalClasses:this.teacherClasses.length,totalStudents:this.teacherClasses.reduce((r,o)=>r+(o.students?o.students.length:0),0),totalLiveClasses:this.teacherLiveClasses.length,thisMonthClasses:this.teacherLiveClasses.filter(r=>{let o=new Date(r.date);return o.getMonth()+1===t&&o.getFullYear()===i}).length}}addTeacher(){this.validateTeacherForm(this.newTeacher)&&(this.isLoading=!0,this.teachersService.createTeacher(this.newTeacher).subscribe({next:e=>{e.existed?(alert("\u0647\u0630\u0627 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 \u0645\u0648\u062C\u0648\u062F \u0628\u0627\u0644\u0641\u0639\u0644 \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),this.loadTeachers()):(alert("\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 \u0628\u0646\u062C\u0627\u062D"),this.loadTeachers(),this.showAddModal=!1,this.resetNewTeacherForm()),this.isLoading=!1},error:e=>{console.error("Error adding teacher:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),this.isLoading=!1}}))}editTeacher(){!this.selectedTeacher||!this.validateTeacherForm(this.editTeacherData)||(this.isLoading=!0,this.teachersService.updateTeacher(this.selectedTeacher._id,this.editTeacherData).subscribe({next:()=>{alert("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0623\u0633\u062A\u0627\u0630 \u0628\u0646\u062C\u0627\u062D"),this.loadTeachers(),this.showEditModal=!1,this.isLoading=!1},error:e=>{console.error("Error updating teacher:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),this.isLoading=!1}}))}deleteTeacher(){this.selectedTeacher&&(this.isLoading=!0,this.teachersService.deleteTeacher(this.selectedTeacher._id).subscribe({next:()=>{alert("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 \u0628\u0646\u062C\u0627\u062D"),this.loadTeachers(),this.selectedTeacher=null,this.showConfirmDeleteModal=!1,this.isLoading=!1},error:e=>{console.error("Error deleting teacher:",e),alert("\u0641\u0634\u0644 \u0641\u064A \u062D\u0630\u0641 \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),this.isLoading=!1}}))}toggleTeacherStatus(e){let t=e.active===void 0?!0:e.active,i=lt(xe({},e),{active:!t});this.teachersService.updateTeacher(e._id,i).subscribe({next:()=>{alert(`\u062A\u0645 ${t?"\u062A\u0639\u0637\u064A\u0644":"\u062A\u0641\u0639\u064A\u0644"} \u0627\u0644\u0623\u0633\u062A\u0627\u0630 \u0628\u0646\u062C\u0627\u062D`),this.loadTeachers(),this.selectedTeacher&&this.selectedTeacher._id===e._id&&(this.selectedTeacher.active=!t)},error:r=>{console.error("Error updating teacher status:",r),alert("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u0623\u0633\u062A\u0627\u0630")}})}validateTeacherForm(e){return e.name.trim()?!e.subjects||e.subjects.length===0?(alert("\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0645\u0627\u062F\u0629 \u0648\u0627\u062D\u062F\u0629 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"),!1):e.email&&!this.isValidEmail(e.email)?(alert("\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0635\u062D\u064A\u062D"),!1):!0:(alert("\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),!1)}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}resetNewTeacherForm(){this.newTeacher={name:"",subjects:[],phone:"",email:"",hireDate:new Date().toISOString().split("T")[0],active:!0}}openEditModal(e){this.selectedTeacher=e,this.editTeacherData={name:e.name,subjects:[...e.subjects],phone:e.phone||"",email:e.email||"",hireDate:e.hireDate.split("T")[0],active:e.active===void 0?!0:e.active},this.showEditModal=!0}openDeleteModal(e){this.selectedTeacher=e,this.showConfirmDeleteModal=!0}toggleSubject(e,t){let i=t==="new"?this.newTeacher:this.editTeacherData,r=i.subjects.indexOf(e);r>-1?i.subjects.splice(r,1):i.subjects.push(e)}isSubjectSelected(e,t){return(t==="new"?this.newTeacher:this.editTeacherData).subjects.includes(e)}getSubjectsText(e){return e.join("\u060C ")}formatDate(e){return new Date(e).toLocaleDateString("ar-EG")}isTeacherActive(e){return e.active===void 0||e.active===!0}getTeacherStatus(e){return this.isTeacherActive(e)?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"}exportToCSV(){let e=["\u0627\u0644\u0627\u0633\u0645","\u0627\u0644\u0645\u0648\u0627\u062F","\u0627\u0644\u0647\u0627\u062A\u0641","\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A","\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0639\u064A\u064A\u0646","\u0627\u0644\u062D\u0627\u0644\u0629"],t=this.filteredTeachers.map(a=>[a.name,a.subjects.join(" - "),a.phone||"\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631",a.email||"\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631",this.formatDate(a.hireDate),this.getTeacherStatus(a)]),i=[e.join(","),...t.map(a=>a.join(","))].join(`
`),r=new Blob(["\uFEFF"+i],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),s=URL.createObjectURL(r);o.setAttribute("href",s),o.setAttribute("download",`\u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629_${new Date().toISOString().split("T")[0]}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}onFileSelected(e){let t=e.target.files[0];if(!t)return;let i=new FileReader;i.onload=r=>{let o=r.target.result;this.processCSV(o)},i.readAsText(t,"UTF-8")}processCSV(e){let i=e.split(`
`)[0].split(",");console.log("Processing CSV file..."),alert("\u0648\u0638\u064A\u0641\u0629 \u0627\u0644\u0627\u0633\u062A\u064A\u0631\u0627\u062F \u0642\u064A\u062F \u0627\u0644\u062A\u0637\u0648\u064A\u0631"),this.fileInput&&(this.fileInput.nativeElement.value="")}clearFilters(){this.searchTerm="",this.subjectFilter="",this.statusFilter="all",this.currentPage=1}calculateClassesstudentlenght(e){return e.students.lenght}static \u0275fac=function(t){return new(t||n)(we(Qc),we(Is),we(Os),we(ea),we(gn))};static \u0275cmp=Jt({type:n,selectors:[["app-teachers-management"]],viewQuery:function(t,i){if(t&1&&tp(TH,5),t&2){let r;Iu(r=Ou())&&(i.fileInput=r.first)}},decls:230,vars:52,consts:[["fileInput",""],["addForm","ngForm"],["noClasses",""],["editForm","ngForm"],[1,"teachers-management"],[1,"header"],[1,"fas","fa-chalkboard-teacher"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-file-export"],[1,"import-btn"],["type","file","accept",".csv",2,"display","none",3,"change"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-file-import"],[1,"filters-section"],[1,"row"],[1,"col-md-4"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","\u0628\u062D\u062B \u0628\u0627\u0633\u0645 \u0627\u0644\u0623\u0633\u062A\u0627\u0630\u060C \u0627\u0644\u0647\u0627\u062A\u0641\u060C \u0623\u0648 \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A...",3,"ngModelChange","input","ngModel"],[1,"col-md-3"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","all"],["value","active"],["value","inactive"],[1,"col-md-2"],[1,"btn","btn-clear",3,"click"],[1,"fas","fa-times"],[1,"stats-cards"],[1,"stat-card"],[1,"stat-icon","bg-primary"],[1,"fas","fa-users"],[1,"stat-info"],[1,"stat-icon","bg-success"],[1,"fas","fa-user-check"],[1,"stat-icon","bg-warning"],[1,"fas","fa-chalkboard"],[1,"stat-icon","bg-info"],[1,"fas","fa-calendar-alt"],[1,"table-container"],[1,"table-header"],[1,"total-count"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngIf"],[3,"selected","click",4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],[1,"details-sidebar"],[1,"sidebar-header"],[1,"close-btn",3,"click"],["class","sidebar-content",4,"ngIf"],[1,"overlay",3,"click"],[1,"teacher-modal"],[1,"teacher-modal-dialog"],[1,"teacher-modal-content"],[1,"teacher-modal-header"],[1,"teacher-modal-title"],[1,"fas","fa-user-plus"],["type","button",1,"close",3,"click"],[1,"teacher-modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"subjects-checkboxes"],["class","form-check form-check-inline",4,"ngFor","ngForOf"],[1,"col-md-6"],["for","phone"],["type","tel","id","phone","name","phone",1,"form-control",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email",1,"form-control",3,"ngModelChange","ngModel"],["for","hireDate"],["type","date","id","hireDate","name","hireDate",1,"form-control",3,"ngModelChange","ngModel"],[1,"teacher-modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"teacher-modal-backdrop",3,"click"],[1,"fas","fa-edit"],[3,"ngSubmit",4,"ngIf"],[1,"teacher-modal-dialog","teacher-modal-sm"],[1,"teacher-modal-title","text-danger"],[1,"fas","fa-exclamation-triangle"],[1,"text-danger"],[1,"fas","fa-exclamation-circle"],["type","button",1,"btn","btn-danger",3,"click","disabled"],[1,"teacher-modal-dialog","teacher-modal-lg"],[1,"table"],[4,"ngFor","ngForOf"],["class","loading-overlay",4,"ngIf"],[3,"value"],["colspan","8",1,"text-center"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"],["colspan","8",1,"text-center","text-muted"],[1,"fas","fa-info-circle"],[3,"click"],[1,"teacher-name"],["class","subjects-badge",4,"ngFor","ngForOf"],[1,"status-badge"],[1,"actions"],["title","\u062A\u0639\u062F\u064A\u0644",1,"btn","btn-sm","btn-info",3,"click"],[1,"btn","btn-sm","btn-warning",3,"click","title"],[1,"fas"],["title","\u062D\u0630\u0641",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"subjects-badge"],[1,"pagination"],[1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fas","fa-chevron-right"],[1,"page-info"],[1,"fas","fa-chevron-left"],[1,"sidebar-content"],[1,"teacher-info-card"],[1,"teacher-header"],[1,"teacher-avatar"],[1,"fas","fa-user-graduate"],[1,"text-muted"],[1,"teacher-details"],[1,"detail-item"],[1,"fas","fa-book"],[1,"fas","fa-phone"],[1,"fas","fa-envelope"],[1,"stats-section"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],[1,"classes-section"],[1,"section-header"],[1,"badge"],["class","classes-list",4,"ngIf","ngIfElse"],[1,"quick-actions"],[1,"action-buttons"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"btn","btn-sm","btn-outline-warning",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"classes-list"],["class","class-item",4,"ngFor","ngForOf"],["class","btn btn-link show-more",3,"click",4,"ngIf"],[1,"class-item"],[1,"class-info"],[1,"students-count"],[1,"btn","btn-link","show-more",3,"click"],[1,"empty-state"],[1,"form-check","form-check-inline"],["type","checkbox",1,"form-check-input",3,"change","id","checked"],[1,"form-check-label",3,"for"],["for","editName"],["type","text","id","editName","name","editName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editPhone"],["type","tel","id","editPhone","name","editPhone",1,"form-control",3,"ngModelChange","ngModel"],["for","editEmail"],["type","email","id","editEmail","name","editEmail",1,"form-control",3,"ngModelChange","ngModel"],["for","editHireDate"],["type","date","id","editHireDate","name","editHireDate",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check"],["type","checkbox","id","editActive","name","editActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","editActive",1,"form-check-label"],["class","schedule-item",4,"ngFor","ngForOf"],[1,"schedule-item"],[1,"loading-overlay"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(t,i){if(t&1){let r=Me();l(0,"div",4)(1,"div",5)(2,"h1"),P(3,"i",6),d(4," \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629"),c(),l(5,"div",7)(6,"button",8),O("click",function(){return T(r),D(i.showAddModal=!0)}),P(7,"i",9),d(8," \u0625\u0636\u0627\u0641\u0629 \u0623\u0633\u062A\u0627\u0630 \u062C\u062F\u064A\u062F "),c(),l(9,"button",10),O("click",function(){return T(r),D(i.exportToCSV())}),P(10,"i",11),d(11," \u062A\u0635\u062F\u064A\u0631 \u0625\u0644\u0649 CSV "),c(),l(12,"div",12)(13,"input",13,0),O("change",function(s){return T(r),D(i.onFileSelected(s))}),c(),l(15,"button",14),O("click",function(){T(r);let s=Ru(14);return D(s.click())}),P(16,"i",15),d(17," \u0627\u0633\u062A\u064A\u0631\u0627\u062F \u0645\u0646 CSV "),c()()()(),l(18,"div",16)(19,"div",17)(20,"div",18)(21,"div",19),P(22,"i",20),l(23,"input",21),fe("ngModelChange",function(s){return T(r),he(i.searchTerm,s)||(i.searchTerm=s),D(s)}),O("input",function(){return T(r),D(i.currentPage=1)}),c()()(),l(24,"div",22)(25,"select",23),fe("ngModelChange",function(s){return T(r),he(i.subjectFilter,s)||(i.subjectFilter=s),D(s)}),O("change",function(){return T(r),D(i.currentPage=1)}),l(26,"option",24),d(27,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0648\u0627\u062F"),c(),ee(28,DH,2,2,"option",25),c()(),l(29,"div",22)(30,"select",23),fe("ngModelChange",function(s){return T(r),he(i.statusFilter,s)||(i.statusFilter=s),D(s)}),O("change",function(){return T(r),D(i.currentPage=1)}),l(31,"option",26),d(32,"\u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0627\u0644\u0627\u062A"),c(),l(33,"option",27),d(34,"\u0646\u0634\u0637"),c(),l(35,"option",28),d(36,"\u063A\u064A\u0631 \u0646\u0634\u0637"),c()()(),l(37,"div",29)(38,"button",30),O("click",function(){return T(r),D(i.clearFilters())}),P(39,"i",31),d(40," \u0645\u0633\u062D \u0627\u0644\u0641\u0644\u062A\u0631 "),c()()()(),l(41,"div",32)(42,"div",33)(43,"div",34),P(44,"i",35),c(),l(45,"div",36)(46,"h3"),d(47),c(),l(48,"p"),d(49,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629"),c()()(),l(50,"div",33)(51,"div",37),P(52,"i",38),c(),l(53,"div",36)(54,"h3"),d(55),c(),l(56,"p"),d(57,"\u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629 \u0627\u0644\u0646\u0634\u0637\u064A\u0646"),c()()(),l(58,"div",33)(59,"div",39),P(60,"i",40),c(),l(61,"div",36)(62,"h3"),d(63),c(),l(64,"p"),d(65,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062D\u0635\u0635"),c()()(),l(66,"div",33)(67,"div",41),P(68,"i",42),c(),l(69,"div",36)(70,"h3"),d(71),c(),l(72,"p"),d(73,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u062D\u064A\u0629"),c()()()(),l(74,"div",43)(75,"div",44)(76,"h3"),d(77,"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0623\u0633\u0627\u062A\u0630\u0629"),c(),l(78,"span",45),d(79),c()(),l(80,"div",46)(81,"table",47)(82,"thead")(83,"tr")(84,"th"),d(85,"#"),c(),l(86,"th"),d(87,"\u0627\u0644\u0627\u0633\u0645"),c(),l(88,"th"),d(89,"\u0627\u0644\u0645\u0648\u0627\u062F"),c(),l(90,"th"),d(91,"\u0627\u0644\u0647\u0627\u062A\u0641"),c(),l(92,"th"),d(93,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),c(),l(94,"th"),d(95,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0639\u064A\u064A\u0646"),c(),l(96,"th"),d(97,"\u0627\u0644\u062D\u0627\u0644\u0629"),c(),l(98,"th"),d(99,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),c()()(),l(100,"tbody"),ee(101,PH,5,0,"tr",48)(102,IH,4,0,"tr",48)(103,RH,24,18,"tr",49),c()()(),ee(104,kH,9,4,"div",50),c(),l(105,"div",51)(106,"div",52)(107,"h4"),d(108,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),c(),l(109,"button",53),O("click",function(){return T(r),D(i.selectedTeacher=null)}),P(110,"i",31),c()(),ee(111,UH,88,20,"div",54),c(),l(112,"div",55),O("click",function(){return T(r),D(i.selectedTeacher=null)}),c(),l(113,"div",56)(114,"div",57)(115,"div",58)(116,"div",59)(117,"h5",60),P(118,"i",61),d(119," \u0625\u0636\u0627\u0641\u0629 \u0623\u0633\u062A\u0627\u0630 \u062C\u062F\u064A\u062F"),c(),l(120,"button",62),O("click",function(){return T(r),D(i.showAddModal=!1)}),l(121,"span"),d(122,"\xD7"),c()()(),l(123,"div",63)(124,"form",64,1),O("ngSubmit",function(){return T(r),D(i.addTeacher())}),l(126,"div",65)(127,"label",66),d(128,"\u0627\u0633\u0645 \u0627\u0644\u0623\u0633\u062A\u0627\u0630 *"),c(),l(129,"input",67),fe("ngModelChange",function(s){return T(r),he(i.newTeacher.name,s)||(i.newTeacher.name=s),D(s)}),c()(),l(130,"div",65)(131,"label"),d(132,"\u0627\u0644\u0645\u0648\u0627\u062F *"),c(),l(133,"div",68),ee(134,BH,4,4,"div",69),c()(),l(135,"div",17)(136,"div",70)(137,"div",65)(138,"label",71),d(139,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),c(),l(140,"input",72),fe("ngModelChange",function(s){return T(r),he(i.newTeacher.phone,s)||(i.newTeacher.phone=s),D(s)}),c()()(),l(141,"div",70)(142,"div",65)(143,"label",73),d(144,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),c(),l(145,"input",74),fe("ngModelChange",function(s){return T(r),he(i.newTeacher.email,s)||(i.newTeacher.email=s),D(s)}),c()()()(),l(146,"div",65)(147,"label",75),d(148,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0639\u064A\u064A\u0646"),c(),l(149,"input",76),fe("ngModelChange",function(s){return T(r),he(i.newTeacher.hireDate,s)||(i.newTeacher.hireDate=s),D(s)}),c()()()(),l(150,"div",77)(151,"button",78),O("click",function(){return T(r),D(i.showAddModal=!1)}),d(152," \u0625\u0644\u063A\u0627\u0621 "),c(),l(153,"button",79),O("click",function(){return T(r),D(i.addTeacher())}),ee(154,zH,3,0,"span",48)(155,HH,2,0,"span",48),c()()()()(),l(156,"div",80),O("click",function(){return T(r),D(i.showAddModal=!1)}),c(),l(157,"div",56)(158,"div",57)(159,"div",58)(160,"div",59)(161,"h5",60),P(162,"i",81),d(163," \u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0623\u0633\u062A\u0627\u0630"),c(),l(164,"button",62),O("click",function(){return T(r),D(i.showEditModal=!1)}),l(165,"span"),d(166,"\xD7"),c()()(),l(167,"div",63),ee(168,GH,31,6,"form",82),c(),l(169,"div",77)(170,"button",78),O("click",function(){return T(r),D(i.showEditModal=!1)}),d(171," \u0625\u0644\u063A\u0627\u0621 "),c(),l(172,"button",79),O("click",function(){return T(r),D(i.editTeacher())}),ee(173,WH,3,0,"span",48)(174,$H,2,0,"span",48),c()()()()(),l(175,"div",80),O("click",function(){return T(r),D(i.showEditModal=!1)}),c(),l(176,"div",56)(177,"div",83)(178,"div",58)(179,"div",59)(180,"h5",84),P(181,"i",85),d(182," \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u0630\u0641"),c(),l(183,"button",62),O("click",function(){return T(r),D(i.showConfirmDeleteModal=!1)}),l(184,"span"),d(185,"\xD7"),c()()(),l(186,"div",63),ee(187,qH,5,1,"p",48),l(188,"p",86),P(189,"i",87),d(190," \u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621 \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646\u0647! "),c()(),l(191,"div",77)(192,"button",78),O("click",function(){return T(r),D(i.showConfirmDeleteModal=!1)}),d(193," \u0625\u0644\u063A\u0627\u0621 "),c(),l(194,"button",88),O("click",function(){return T(r),D(i.deleteTeacher())}),ee(195,YH,3,0,"span",48)(196,XH,2,0,"span",48),c()()()()(),l(197,"div",80),O("click",function(){return T(r),D(i.showConfirmDeleteModal=!1)}),c(),l(198,"div",56)(199,"div",89)(200,"div",58)(201,"div",59)(202,"h5",60),P(203,"i",40),d(204," \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u0633\u0646\u062F\u0629 "),c(),l(205,"button",62),O("click",function(){return T(r),D(i.showClassesModal=!1)}),l(206,"span"),d(207,"\xD7"),c()()(),l(208,"div",63)(209,"div",46)(210,"table",90)(211,"thead")(212,"tr")(213,"th"),d(214,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629"),c(),l(215,"th"),d(216,"\u0627\u0644\u0645\u0627\u062F\u0629"),c(),l(217,"th"),d(218,"\u0639\u062F\u062F \u0627\u0644\u0637\u0644\u0627\u0628"),c(),l(219,"th"),d(220,"\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062F\u0631\u0627\u0633\u064A\u0629"),c(),l(221,"th"),d(222,"\u0627\u0644\u062C\u062F\u0648\u0644"),c()()(),l(223,"tbody"),ee(224,KH,11,5,"tr",91),c()()()(),l(225,"div",77)(226,"button",78),O("click",function(){return T(r),D(i.showClassesModal=!1)}),d(227," \u0625\u063A\u0644\u0627\u0642 "),c()()()()(),l(228,"div",80),O("click",function(){return T(r),D(i.showClassesModal=!1)}),c(),ee(229,JH,4,0,"div",92),c()}t&2&&(g(23),de("ngModel",i.searchTerm),g(2),de("ngModel",i.subjectFilter),g(3),R("ngForOf",i.subjectsList),g(2),de("ngModel",i.statusFilter),g(17),te(i.teachers.length),g(8),te(i.activeTeachersCount),g(8),te(i.classes.length),g(8),te(i.liveClasses.length),g(8),K("\u0639\u062F\u062F \u0627\u0644\u0646\u062A\u0627\u0626\u062C: ",i.totalItems,""),g(22),R("ngIf",i.isLoading),g(),R("ngIf",!i.isLoading&&i.paginatedTeachers.length===0),g(),R("ngForOf",i.paginatedTeachers),g(),R("ngIf",i.totalPages>1),g(),Ue("show",i.selectedTeacher),g(6),R("ngIf",i.selectedTeacher),g(),Ue("show",i.selectedTeacher),g(),Ue("show",i.showAddModal),g(16),de("ngModel",i.newTeacher.name),g(5),R("ngForOf",i.subjectsList),g(6),de("ngModel",i.newTeacher.phone),g(5),de("ngModel",i.newTeacher.email),g(4),de("ngModel",i.newTeacher.hireDate),g(4),R("disabled",i.isLoading),g(),R("ngIf",i.isLoading),g(),R("ngIf",!i.isLoading),g(),Ue("show",i.showAddModal),g(),Ue("show",i.showEditModal),g(11),R("ngIf",i.selectedTeacher),g(4),R("disabled",i.isLoading),g(),R("ngIf",i.isLoading),g(),R("ngIf",!i.isLoading),g(),Ue("show",i.showEditModal),g(),Ue("show",i.showConfirmDeleteModal),g(11),R("ngIf",i.selectedTeacher),g(7),R("disabled",i.isLoading),g(),R("ngIf",i.isLoading),g(),R("ngIf",!i.isLoading),g(),Ue("show",i.showConfirmDeleteModal),g(),Ue("show",i.showClassesModal),g(26),R("ngForOf",i.teacherClasses),g(4),Ue("show",i.showClassesModal),g(),R("ngIf",i.isLoading))},dependencies:[cn,Yn,Tn,Zn,yr,vi,xi,Rn,Ba,si,Xn,xr,$r,Bn,Gr],styles:[".teachers-management[_ngcontent-%COMP%]{position:relative;min-height:100vh;background-color:#f8f9fa;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:25px 30px;border-radius:12px;margin-bottom:25px;box-shadow:0 6px 20px #0000001a;display:flex;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:600;display:flex;align-items:center;gap:12px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;border:none;font-weight:500;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background-color:#4361ee;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#3a56d4;transform:translateY(-2px);box-shadow:0 4px 12px #4361ee4d}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-outline-secondary[_ngcontent-%COMP%]{background-color:transparent;border:2px solid #6c757d;color:#6c757d}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#6c757d;color:#fff}.btn-success[_ngcontent-%COMP%]{background-color:#2ecc71;color:#fff}.btn-danger[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.btn-warning[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.btn-info[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.btn-clear[_ngcontent-%COMP%]{background-color:#e9ecef;color:#495057;border:1px solid #dee2e6}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:14px}.btn-link[_ngcontent-%COMP%]{color:#4361ee;text-decoration:none;background:none;border:none;cursor:pointer}.filters-section[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:10px;margin-bottom:25px;box-shadow:0 4px 12px #0000000d}.search-box[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translateY(-50%);color:#6c757d}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 15px;border:2px solid #e9ecef;border-radius:8px;font-size:15px;transition:border-color .3s ease}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4361ee;box-shadow:0 0 0 3px #4361ee1a}.form-control[_ngcontent-%COMP%]{padding:12px 15px;border:2px solid #e9ecef;border-radius:8px;font-size:15px;height:auto}.form-control[_ngcontent-%COMP%]:focus{border-color:#4361ee;box-shadow:0 0 0 3px #4361ee1a}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;display:flex;align-items:center;gap:20px;box-shadow:0 4px 12px #0000000d;transition:transform .3s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.stat-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;color:#fff}.bg-primary[_ngcontent-%COMP%]{background-color:#4361ee}.bg-success[_ngcontent-%COMP%]{background-color:#2ecc71}.bg-warning[_ngcontent-%COMP%]{background-color:#f39c12}.bg-info[_ngcontent-%COMP%]{background-color:#3498db}.stat-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:32px;font-weight:700;color:#2c3e50}.stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#7f8c8d;font-size:14px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 20px #00000014;margin-bottom:30px}.table-header[_ngcontent-%COMP%]{padding:20px 25px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center}.table-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.total-count[_ngcontent-%COMP%]{color:#6c757d;font-size:14px}.table[_ngcontent-%COMP%]{margin:0;border-collapse:separate;border-spacing:0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;border:none;padding:15px 20px;font-weight:600;color:#495057;text-align:right;border-bottom:2px solid #dee2e6}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 20px;vertical-align:middle;border-bottom:1px solid #e9ecef;transition:background-color .2s ease}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background-color:#4361ee1a;border-left:3px solid #4361ee}.teacher-name[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50}.subjects-badge[_ngcontent-%COMP%]{display:inline-block;background-color:#e3f2fd;color:#1976d2;padding:4px 10px;border-radius:20px;font-size:12px;margin:2px;font-weight:500}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:5px 12px;border-radius:20px;font-size:12px;font-weight:600}.status-badge.active[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;opacity:.7;transition:opacity .3s ease}tr[_ngcontent-%COMP%]:hover   .actions[_ngcontent-%COMP%]{opacity:1}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;padding:20px;border-top:1px solid #e9ecef}.page-info[_ngcontent-%COMP%]{color:#6c757d;font-size:14px}.details-sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-500px;width:500px;height:100vh;background:#fff;box-shadow:-5px 0 25px #0000001a;z-index:1050;transition:right .3s ease;overflow-y:auto}.details-sidebar.show[_ngcontent-%COMP%]{right:0}.sidebar-header[_ngcontent-%COMP%]{padding:20px 25px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.sidebar-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:18px}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:20px;cursor:pointer;padding:0}.sidebar-content[_ngcontent-%COMP%]{padding:25px}.teacher-info-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f7fa,#c3cfe2);border-radius:12px;padding:25px;margin-bottom:25px}.teacher-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:20px}.teacher-avatar[_ngcontent-%COMP%]{width:80px;height:80px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:36px;color:#4361ee;box-shadow:0 4px 12px #0000001a}.teacher-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.teacher-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:#495057}.detail-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4361ee;width:20px}.stats-section[_ngcontent-%COMP%]{margin-bottom:25px}.stats-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:15px;padding-bottom:10px;border-bottom:2px solid #f0f2f5}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}.stat-item[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:10px;text-align:center;box-shadow:0 2px 8px #0000000d;border:1px solid #e9ecef}.stat-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#4361ee;margin-bottom:5px}.stat-label[_ngcontent-%COMP%]{color:#6c757d;font-size:14px}.classes-section[_ngcontent-%COMP%]{margin-bottom:25px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.section-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.section-header[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background-color:#4361ee;color:#fff;padding:5px 12px;border-radius:20px;font-size:14px}.classes-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.class-item[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:8px;border:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.class-item[_ngcontent-%COMP%]:hover{transform:translate(-5px);border-color:#4361ee;box-shadow:0 2px 8px #4361ee1a}.class-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.students-count[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600}.show-more[_ngcontent-%COMP%]{text-align:center;margin-top:10px;font-size:14px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6c757d}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:15px;opacity:.5}.quick-actions[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:10px;border:1px solid #e9ecef}.quick-actions[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:15px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:1040;opacity:0;visibility:hidden;transition:all .3s ease}.overlay.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.teacher-modal[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1060;display:none;overflow:hidden;outline:0}.teacher-modal.show[_ngcontent-%COMP%]{display:block}.teacher-modal-dialog[_ngcontent-%COMP%]{position:relative;width:auto;margin:30px auto;max-width:500px;pointer-events:none}.teacher-modal-lg[_ngcontent-%COMP%]{max-width:800px}.teacher-modal-sm[_ngcontent-%COMP%]{max-width:400px}.teacher-modal-content[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;width:100%;pointer-events:auto;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:12px;outline:0;box-shadow:0 10px 30px #0003}.teacher-modal-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;padding:20px 25px;border-bottom:1px solid #e9ecef;border-top-left-radius:12px;border-top-right-radius:12px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.teacher-modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.teacher-modal-body[_ngcontent-%COMP%]{position:relative;flex:1 1 auto;padding:25px}.teacher-modal-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;padding:20px 25px;border-top:1px solid #e9ecef}.teacher-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;z-index:1050;opacity:0;visibility:hidden;transition:all .3s ease}.teacher-modal-backdrop.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#495057}.subjects-checkboxes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;padding:15px;background-color:#f8f9fa;border-radius:8px;max-height:200px;overflow-y:auto}.form-check[_ngcontent-%COMP%]{margin:5px 0}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#4361ee;border-color:#4361ee}.loading-spinner[_ngcontent-%COMP%]{padding:30px;text-align:center;color:#6c757d}.loading-spinner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#fffc;display:flex;align-items:center;justify-content:center;z-index:2000}@media (max-width: 1200px){.details-sidebar[_ngcontent-%COMP%]{width:450px}}@media (max-width: 992px){.stats-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.header-actions[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}}@media (max-width: 768px){.details-sidebar[_ngcontent-%COMP%]{width:100%;right:-100%}.stats-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters-section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{gap:15px}.teacher-modal-dialog[_ngcontent-%COMP%]{margin:10px;max-width:calc(100% - 20px)}.actions[_ngcontent-%COMP%]{flex-direction:column;gap:5px}.btn-sm[_ngcontent-%COMP%]{padding:8px;font-size:12px}}@media (max-width: 576px){.teachers-management[_ngcontent-%COMP%]{padding:10px}.table-header[_ngcontent-%COMP%]{flex-direction:column;gap:10px;text-align:center}.pagination[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease forwards}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}@media print{.header-actions[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%], .details-sidebar[_ngcontent-%COMP%], .overlay[_ngcontent-%COMP%], .teacher-modal[_ngcontent-%COMP%], .teacher-modal-backdrop[_ngcontent-%COMP%]{display:none!important}.teachers-management[_ngcontent-%COMP%]{padding:0;background:#fff}.table[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #dee2e6}}[dir=rtl][_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:15px;right:auto}[dir=rtl][_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 15px 12px 40px}[dir=rtl][_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .show-more[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scaleX(-1)}"]})};var nn=ou(vc());function QH(n,e){n&1&&(l(0,"div",8)(1,"div",9)(2,"span",10),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),c()(),l(4,"p",11),d(5,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628..."),c()())}function ej(n,e){if(n&1&&(l(0,"div",20),P(1,"i",35),l(2,"span"),d(3),c()()),n&2){let t=E(2);g(3),K("\u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631: ",t.student.parentName,"")}}function tj(n,e){if(n&1&&(l(0,"div",20),P(1,"i",36),l(2,"span"),d(3),c()()),n&2){let t=E(2);g(3),K("\u0647\u0627\u062A\u0641 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631: ",t.student.parentPhone,"")}}function nj(n,e){if(n&1&&(l(0,"div",20),P(1,"i",37),l(2,"span"),d(3),c()()),n&2){let t=E(2);g(3),K("\u0627\u0644\u0639\u0645\u0631: ",t.calculateAge(t.student.birthDate)," \u0633\u0646\u0629")}}function ij(n,e){if(n&1&&(l(0,"tr")(1,"td")(2,"strong"),d(3,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u064A\u0644\u0627\u062F:"),c()(),l(4,"td"),d(5),pn(6,"date"),c()()),n&2){let t=E(3);g(5),te(gi(6,1,t.student.birthDate,"yyyy/MM/dd"))}}function rj(n,e){if(n&1&&(l(0,"tr")(1,"td")(2,"strong"),d(3,"\u0627\u0633\u0645 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631:"),c()(),l(4,"td"),d(5),c()()),n&2){let t=E(3);g(5),te(t.student.parentName)}}function oj(n,e){if(n&1&&(l(0,"tr")(1,"td")(2,"strong"),d(3,"\u0647\u0627\u062A\u0641 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631:"),c()(),l(4,"td"),d(5),c()()),n&2){let t=E(3);g(5),te(t.student.parentPhone)}}function sj(n,e){if(n&1&&(l(0,"div",38)(1,"div",12)(2,"div",39)(3,"h6"),d(4,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0634\u062E\u0635\u064A\u0629"),c(),l(5,"table",40)(6,"tr")(7,"td")(8,"strong"),d(9,"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644:"),c()(),l(10,"td"),d(11),c()(),ee(12,ij,7,4,"tr",41),l(13,"tr")(14,"td")(15,"strong"),d(16,"\u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062F\u0631\u0627\u0633\u064A:"),c()(),l(17,"td"),d(18),c()()()(),l(19,"div",39)(20,"h6"),d(21,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631"),c(),l(22,"table",40),ee(23,rj,6,1,"tr",41)(24,oj,6,1,"tr",41),c()()()()),n&2){let t=E(2);g(11),te(t.student.name),g(),R("ngIf",t.student.birthDate),g(6),te(t.student.academicYear),g(5),R("ngIf",t.student.parentName),g(),R("ngIf",t.student.parentPhone)}}function aj(n,e){n&1&&(l(0,"div",47),P(1,"i",48),l(2,"p",49),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u062D\u0635\u0635 \u0645\u0633\u062C\u0644\u0629 \u0644\u0647\u0630\u0627 \u0627\u0644\u0637\u0627\u0644\u0628"),c()())}function lj(n,e){if(n&1&&(l(0,"span",55),d(1),c()),n&2){let t=e.$implicit;g(),Un(" ",t.day," ",t.time," ")}}function cj(n,e){if(n&1&&(l(0,"tr")(1,"td"),d(2),c(),l(3,"td"),d(4),c(),l(5,"td"),d(6),c(),l(7,"td"),ee(8,lj,2,2,"span",53),c(),l(9,"td")(10,"span",54),d(11,"\u0646\u0634\u0637"),c()()()),n&2){let t=e.$implicit;g(2),te(t.name),g(2),te(t.subject),g(2),te((t.teacher==null?null:t.teacher.name)||"-"),g(2),R("ngForOf",t.schedule)}}function uj(n,e){if(n&1&&(l(0,"div",50)(1,"table",51)(2,"thead")(3,"tr")(4,"th"),d(5,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629"),c(),l(6,"th"),d(7,"\u0627\u0644\u0645\u0627\u062F\u0629"),c(),l(8,"th"),d(9,"\u0627\u0644\u0645\u0639\u0644\u0645"),c(),l(10,"th"),d(11,"\u0627\u0644\u062C\u062F\u0648\u0644"),c(),l(12,"th"),d(13,"\u0627\u0644\u062D\u0627\u0644\u0629"),c()()(),l(14,"tbody"),ee(15,cj,12,4,"tr",52),c()()()),n&2){let t=E(3);g(15),R("ngForOf",t.studentClasses)}}function dj(n,e){if(n&1){let t=Me();l(0,"div",38)(1,"div",42)(2,"button",43),O("click",function(){T(t);let r=E(2);return D(r.openAddToLessonsModal())}),P(3,"i",44),d(4," \u0625\u0636\u0627\u0641\u0629 \u0625\u0644\u0649 \u062D\u0635\u0635 "),c(),P(5,"br")(6,"br"),l(7,"h6"),d(8,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u0633\u062C\u0644\u0629"),c()(),ee(9,aj,4,0,"div",45)(10,uj,16,1,"div",46),c()}if(n&2){let t=E(2);g(9),R("ngIf",t.studentClasses.length===0),g(),R("ngIf",t.studentClasses.length>0)}}function fj(n,e){n&1&&(l(0,"div",47),P(1,"i",63),l(2,"p",49),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0645\u0633\u062C\u0644\u0629"),c()())}function hj(n,e){if(n&1){let t=Me();l(0,"tr")(1,"td"),d(2),pn(3,"date"),c(),l(4,"td"),d(5),c(),l(6,"td"),d(7),c(),l(8,"td"),d(9),c(),l(10,"td")(11,"span"),d(12),c()(),l(13,"td")(14,"div",64)(15,"button",65),O("click",function(){let r=T(t).$implicit,o=E(4);return D(o.printPaymentReceipt(r))}),P(16,"i",66),c(),l(17,"button",67),O("click",function(){let r=T(t).$implicit,o=E(4);return D(o.openEditPaymentModal(r))}),P(18,"i",68),c(),l(19,"button",69),O("click",function(){let r=T(t).$implicit,o=E(4);return D(o.openDeleteConfirmModal(r))}),P(20,"i",70),c()()()()}if(n&2){let t=e.$implicit,i=E(4);g(2),te(gi(3,7,t.paymentDate,"yyyy/MM/dd")),g(3),K("",t.amount," \u062F.\u062C"),g(2),te(t.month),g(2),te(i.getPaymentMethodLabel(t.paymentMethod)),g(2),vn(t.status==="paid"?"badge bg-success":"badge bg-warning"),g(),K(" ",t.status==="paid"?"\u0645\u062F\u0641\u0648\u0639":"\u0645\u0639\u0644\u0642"," ")}}function pj(n,e){if(n&1&&(l(0,"div",50)(1,"table",51)(2,"thead")(3,"tr")(4,"th"),d(5,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),c(),l(6,"th"),d(7,"\u0627\u0644\u0645\u0628\u0644\u063A"),c(),l(8,"th"),d(9,"\u0627\u0644\u0634\u0647\u0631"),c(),l(10,"th"),d(11,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639"),c(),l(12,"th"),d(13,"\u0627\u0644\u062D\u0627\u0644\u0629"),c(),l(14,"th"),d(15,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),c()()(),l(16,"tbody"),ee(17,hj,21,10,"tr",52),c()()()),n&2){let t=E(3);g(17),R("ngForOf",t.paymentHistory)}}function mj(n,e){if(n&1){let t=Me();l(0,"div",38)(1,"div",56)(2,"button",43),O("click",function(){T(t);let r=E(2);return D(r.openAddPaymentModal())}),P(3,"i",44),d(4," \u0625\u0636\u0627\u0641\u0629 \u062F\u0641\u0639\u0629 \u062C\u062F\u064A\u062F\u0629 "),c(),l(5,"button",57),O("click",function(){T(t);let r=E(2);return D(r.printStudentReport())}),P(6,"i",58),d(7," \u0637\u0628\u0627\u0639\u0629 \u062A\u0642\u0631\u064A\u0631 "),c()(),l(8,"div",2)(9,"div",59)(10,"div",60)(11,"div",15)(12,"h6",18),d(13,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u062F\u0641\u0648\u0639"),c(),l(14,"h3",61),d(15),pn(16,"number"),c()()()(),l(17,"div",59)(18,"div",60)(19,"div",15)(20,"h6",18),d(21,"\u0639\u062F\u062F \u0627\u0644\u062F\u0641\u0639\u0627\u062A"),c(),l(22,"h3"),d(23),c()()()(),l(24,"div",59)(25,"div",60)(26,"div",15)(27,"h6",18),d(28,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0639\u0644\u0642"),c(),l(29,"h3",62),d(30),pn(31,"number"),c()()()()(),l(32,"h6"),d(33,"\u0633\u062C\u0644 \u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A"),c(),ee(34,fj,4,0,"div",45)(35,pj,18,1,"div",46),c()}if(n&2){let t=E(2);g(15),K("",gr(16,5,t.getTotalPaid())," \u062F.\u062C"),g(8),te(t.paymentHistory.length),g(7),K("",gr(31,7,t.getTotalPending())," \u062F.\u062C"),g(4),R("ngIf",t.paymentHistory.length===0),g(),R("ngIf",t.paymentHistory.length>0)}}function gj(n,e){n&1&&(l(0,"div",38)(1,"h6"),d(2,"\u0633\u062C\u0644 \u0627\u0644\u062D\u0636\u0648\u0631"),c(),l(3,"div",47),P(4,"i",71),l(5,"p",49),d(6,"\u0633\u064A\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644 \u0627\u0644\u062D\u0636\u0648\u0631 \u0642\u0631\u064A\u0628\u0627\u064B"),c()()())}function _j(n,e){if(n&1&&(l(0,"option",91),d(1),c()),n&2){let t=e.$implicit;R("value",t),g(),te(t)}}function vj(n,e){if(n&1&&(l(0,"option",91),d(1),c()),n&2){let t=e.$implicit;R("value",t.value),g(),K(" ",t.label," ")}}function xj(n,e){if(n&1){let t=Me();l(0,"div",72)(1,"div",73)(2,"div",74)(3,"h5",75),d(4,"\u0625\u0636\u0627\u0641\u0629 \u062F\u0641\u0639\u0629 \u062C\u062F\u064A\u062F\u0629"),c(),l(5,"button",76),O("click",function(){T(t);let r=E(2);return D(r.closePaymentModal())}),c()(),l(6,"div",77)(7,"form",78),O("ngSubmit",function(){T(t);let r=E(2);return D(r.addPayment())}),l(8,"div",79)(9,"label",80),d(10,"\u0627\u0644\u0645\u0628\u0644\u063A (\u062F.\u062C)"),c(),l(11,"input",81),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.newPayment.amount,r)||(o.newPayment.amount=r),D(r)}),c()(),l(12,"div",79)(13,"label",80),d(14,"\u0627\u0644\u0634\u0647\u0631"),c(),l(15,"select",82),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.newPayment.month,r)||(o.newPayment.month=r),D(r)}),l(16,"option",83),d(17,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0634\u0647\u0631"),c(),ee(18,_j,2,2,"option",84),c()(),l(19,"div",79)(20,"label",80),d(21,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639"),c(),l(22,"select",85),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.newPayment.paymentMethod,r)||(o.newPayment.paymentMethod=r),D(r)}),ee(23,vj,2,2,"option",84),c()(),l(24,"div",79)(25,"label",80),d(26,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),c(),l(27,"textarea",86),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.newPayment.notes,r)||(o.newPayment.notes=r),D(r)}),c()(),l(28,"div",87)(29,"button",88),O("click",function(){T(t);let r=E(2);return D(r.closePaymentModal())}),d(30," \u0625\u0644\u063A\u0627\u0621 "),c(),l(31,"button",89),P(32,"i",90),d(33," \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629 "),c()()()()()()}if(n&2){let t=E(2);g(11),de("ngModel",t.newPayment.amount),g(4),de("ngModel",t.newPayment.month),g(3),R("ngForOf",t.months),g(4),de("ngModel",t.newPayment.paymentMethod),g(),R("ngForOf",t.paymentMethods),g(4),de("ngModel",t.newPayment.notes)}}function yj(n,e){if(n&1&&(l(0,"option",91),d(1),c()),n&2){let t=e.$implicit;R("value",t.value),g(),K(" ",t.label," ")}}function bj(n,e){if(n&1){let t=Me();l(0,"div",72)(1,"div",73)(2,"div",74)(3,"h5",75),d(4,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629"),c(),l(5,"button",76),O("click",function(){T(t);let r=E(2);return D(r.closeEditPaymentModal())}),c()(),l(6,"div",77)(7,"form",78),O("ngSubmit",function(){T(t);let r=E(2);return D(r.updatePayment())}),l(8,"div",79)(9,"label",80),d(10,"\u0627\u0644\u0645\u0628\u0644\u063A (\u062F.\u062C)"),c(),l(11,"input",81),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.editingPayment.amount,r)||(o.editingPayment.amount=r),D(r)}),c()(),l(12,"div",79)(13,"label",80),d(14,"\u0627\u0644\u0634\u0647\u0631"),c(),l(15,"input",92),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.editingPayment.month,r)||(o.editingPayment.month=r),D(r)}),c()(),l(16,"div",79)(17,"label",80),d(18,"\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639"),c(),l(19,"select",85),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.editingPayment.paymentMethod,r)||(o.editingPayment.paymentMethod=r),D(r)}),ee(20,yj,2,2,"option",84),c()(),l(21,"div",79)(22,"label",80),d(23,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),c(),l(24,"textarea",86),fe("ngModelChange",function(r){T(t);let o=E(2);return he(o.editingPayment.notes,r)||(o.editingPayment.notes=r),D(r)}),c()(),l(25,"div",87)(26,"button",88),O("click",function(){T(t);let r=E(2);return D(r.closeEditPaymentModal())}),d(27," \u0625\u0644\u063A\u0627\u0621 "),c(),l(28,"button",89),P(29,"i",90),d(30," \u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A "),c()()()()()()}if(n&2){let t=E(2);g(11),de("ngModel",t.editingPayment.amount),g(4),de("ngModel",t.editingPayment.month),g(4),de("ngModel",t.editingPayment.paymentMethod),g(),R("ngForOf",t.paymentMethods),g(4),de("ngModel",t.editingPayment.notes)}}function Cj(n,e){if(n&1){let t=Me();l(0,"div",72)(1,"div",73)(2,"div",74)(3,"h5",93),d(4,"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u0630\u0641"),c(),l(5,"button",76),O("click",function(){T(t);let r=E(2);return D(r.closeDeleteConfirmModal())}),c()(),l(6,"div",77)(7,"p"),d(8,"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u062F\u0641\u0639\u0629\u061F"),c(),l(9,"p",18),d(10,"\u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621 \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646\u0647."),c()(),l(11,"div",87)(12,"button",88),O("click",function(){T(t);let r=E(2);return D(r.closeDeleteConfirmModal())}),d(13," \u0625\u0644\u063A\u0627\u0621 "),c(),l(14,"button",94),O("click",function(){T(t);let r=E(2);return D(r.deletePayment())}),P(15,"i",95),d(16," \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629 "),c()()()()}}function wj(n,e){n&1&&(l(0,"div",99)(1,"div",100)(2,"span",10),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),c()(),l(4,"p",101),d(5,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u062A\u0627\u062D\u0629..."),c()())}function Mj(n,e){if(n&1&&(l(0,"option",91),d(1),c()),n&2){let t=e.$implicit;R("value",t),g(),te(t)}}function Sj(n,e){if(n&1&&(l(0,"option",91),d(1),c()),n&2){let t=e.$implicit;R("value",t.value),g(),te(t.label)}}function Ej(n,e){if(n&1&&(l(0,"tr")(1,"td"),d(2),c(),l(3,"td"),d(4),c(),l(5,"td"),d(6),c(),l(7,"td"),d(8),c()()),n&2){let t=e.$implicit,i=E(5);g(2),te(t.name),g(2),te(t.subject),g(2),te(i.getAcademicYearName(t.academicYear)),g(2),te((t.teacher==null?null:t.teacher.name)||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F")}}function Aj(n,e){if(n&1&&(l(0,"div",106)(1,"h6",107),d(2,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u0633\u062C\u0644\u0629 \u0628\u0627\u0644\u0641\u0639\u0644"),c(),l(3,"div",108),P(4,"i",109),d(5),c(),l(6,"div",50)(7,"table",110)(8,"thead")(9,"tr")(10,"th"),d(11,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0635\u0629"),c(),l(12,"th"),d(13,"\u0627\u0644\u0645\u0627\u062F\u0629"),c(),l(14,"th"),d(15,"\u0627\u0644\u0645\u0633\u062A\u0648\u0649"),c(),l(16,"th"),d(17,"\u0627\u0644\u0645\u0639\u0644\u0645"),c()()(),l(18,"tbody"),ee(19,Ej,9,4,"tr",52),c()()()()),n&2){let t=E(4);g(5),K(" \u0627\u0644\u0637\u0627\u0644\u0628 \u0645\u0633\u062C\u0644 \u0628\u0627\u0644\u0641\u0639\u0644 \u0641\u064A ",t.alreadyEnrolledClasses.length," \u062D\u0635\u0629 "),g(14),R("ngForOf",t.alreadyEnrolledClasses)}}function Tj(n,e){n&1&&(l(0,"div",47),P(1,"i",111),l(2,"p",49),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u062D\u0635\u0635 \u0645\u062A\u0627\u062D\u0629 \u0644\u0644\u062A\u0633\u062C\u064A\u0644"),c()())}function Dj(n,e){if(n&1&&(l(0,"span"),d(1),c()),n&2){let t=E().$implicit;g(),K("(",t.classroom.name,")")}}function Pj(n,e){if(n&1&&(l(0,"span",131),d(1),ee(2,Dj,2,1,"span",41),c()),n&2){let t=e.$implicit;g(),Un(" ",t.day," ",t.time," "),g(),R("ngIf",t.classroom==null?null:t.classroom.name)}}function Ij(n,e){if(n&1&&(l(0,"div"),ee(1,Pj,3,3,"span",130),c()),n&2){let t=E().$implicit;g(),R("ngForOf",t.schedule)}}function Oj(n,e){n&1&&(l(0,"div")(1,"span",132),d(2,"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),c()())}function Rj(n,e){n&1&&(l(0,"span",54),P(1,"i",133),d(2," \u0645\u062A\u0648\u0627\u0641\u0642 \u0645\u0639 \u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u0637\u0627\u0644\u0628 "),c())}function kj(n,e){n&1&&(l(0,"span",134),P(1,"i",135),d(2," \u0645\u0633\u062A\u0648\u0649 \u0645\u062E\u062A\u0644\u0641 "),c())}function Nj(n,e){if(n&1){let t=Me();l(0,"div",114)(1,"div",115)(2,"div",32)(3,"div",116)(4,"div")(5,"h6",117),d(6),c(),l(7,"p",118),P(8,"i",119),d(9),c(),l(10,"p",118),P(11,"i",120),d(12),c(),l(13,"p",118),P(14,"i",121),d(15),c(),l(16,"p",118),P(17,"i",122),d(18),c(),l(19,"p",118),P(20,"i",123),d(21),pn(22,"number"),c()(),l(23,"div",124)(24,"input",125),O("change",function(){let r=T(t).$implicit,o=E(5);return D(o.toggleClassSelection(r))}),c()()(),l(25,"div",126)(26,"h6",127),d(27,"\u0627\u0644\u062C\u062F\u0648\u0644:"),c(),ee(28,Ij,2,1,"div",41)(29,Oj,3,0,"div",41),c(),l(30,"div",101),ee(31,Rj,3,0,"span",128)(32,kj,3,0,"span",129),c()()()()}if(n&2){let t=e.$implicit,i=E(5);g(),Ue("selected",i.isClassSelected(t._id)),g(5),te(t.name),g(3),K(" ",t.subject," "),g(3),K(" ",(t.teacher==null?null:t.teacher.name)||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"," "),g(3),K(" ",(t.students==null?null:t.students.length)||0," \u0637\u0627\u0644\u0628 "),g(3),K(" ",i.getAcademicYearName(t.academicYear)," "),g(3),K(" ",gr(22,13,t.price)," \u062F.\u062C/\u0634\u0647\u0631 "),g(3),R("checked",i.isClassSelected(t._id)),g(4),R("ngIf",t.schedule&&t.schedule.length>0),g(),R("ngIf",!t.schedule||t.schedule.length===0),g(2),R("ngIf",i.isLevelCompatible(t)),g(),R("ngIf",!i.isLevelCompatible(t))}}function Fj(n,e){if(n&1&&(l(0,"div",112)(1,"div",12),ee(2,Nj,33,15,"div",113),c()()),n&2){let t=E(4);g(2),R("ngForOf",t.filteredAvailableClasses)}}function Lj(n,e){if(n&1&&(l(0,"div",138)(1,"div",139),P(2,"i",140),l(3,"div")(4,"small",141),d(5),c(),P(6,"br"),l(7,"small",18),d(8),pn(9,"number"),c()()()()),n&2){let t=e.$implicit;g(5),te(t.name),g(3),K("",gr(9,2,t.price)," \u062F.\u062C/\u0634\u0647\u0631")}}function Vj(n,e){if(n&1&&(l(0,"div",136)(1,"h6",79),d(2),c(),l(3,"div",12),ee(4,Lj,10,4,"div",137),c(),l(5,"div",126)(6,"strong"),d(7,"\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0634\u0647\u0631\u064A:"),c(),d(8),pn(9,"number"),c()()),n&2){let t=E(4);g(2),K("\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u062D\u062F\u062F\u0629 (",t.selectedClasses.length,")"),g(2),R("ngForOf",t.selectedClasses),g(4),K(" ",gr(9,3,t.calculateMonthlyTotal())," \u062F.\u062C ")}}function Uj(n,e){if(n&1){let t=Me();l(0,"div")(1,"div",2)(2,"div",39)(3,"label",80),d(4,"\u0641\u0644\u062A\u0631\u0629 \u062D\u0633\u0628 \u0627\u0644\u0645\u0627\u062F\u0629"),c(),l(5,"select",102),fe("ngModelChange",function(r){T(t);let o=E(3);return he(o.filterSubject,r)||(o.filterSubject=r),D(r)}),O("change",function(){T(t);let r=E(3);return D(r.filterAvailableClasses())}),l(6,"option",83),d(7,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0648\u0627\u062F"),c(),ee(8,Mj,2,2,"option",84),c()(),l(9,"div",39)(10,"label",80),d(11,"\u0641\u0644\u062A\u0631\u0629 \u062D\u0633\u0628 \u0627\u0644\u0645\u0633\u062A\u0648\u0649"),c(),l(12,"select",102),fe("ngModelChange",function(r){T(t);let o=E(3);return he(o.filterLevel,r)||(o.filterLevel=r),D(r)}),O("change",function(){T(t);let r=E(3);return D(r.filterAvailableClasses())}),l(13,"option",83),d(14,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0633\u062A\u0648\u064A\u0627\u062A"),c(),ee(15,Sj,2,2,"option",84),c()()(),ee(16,Aj,20,2,"div",103),l(17,"h6",79),d(18,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u062A\u0627\u062D\u0629 \u0644\u0644\u062A\u0633\u062C\u064A\u0644"),c(),ee(19,Tj,4,0,"div",45)(20,Fj,3,1,"div",104)(21,Vj,10,5,"div",105),c()}if(n&2){let t=E(3);g(5),de("ngModel",t.filterSubject),g(3),R("ngForOf",t.subjects),g(4),de("ngModel",t.filterLevel),g(3),R("ngForOf",t.academicYears),g(),R("ngIf",t.alreadyEnrolledClasses.length>0),g(3),R("ngIf",t.filteredAvailableClasses.length===0),g(),R("ngIf",t.filteredAvailableClasses.length>0),g(),R("ngIf",t.selectedClasses.length>0)}}function Bj(n,e){n&1&&P(0,"span",142)}function zj(n,e){if(n&1){let t=Me();l(0,"div",72)(1,"div",73)(2,"div",74)(3,"h5",75),d(4,"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0637\u0627\u0644\u0628 \u0625\u0644\u0649 \u062D\u0635\u0635"),c(),l(5,"button",76),O("click",function(){T(t);let r=E(2);return D(r.closeAddToLessonsModal())}),c()(),l(6,"div",77),ee(7,wj,6,0,"div",96)(8,Uj,22,8,"div",41),c(),l(9,"div",87)(10,"button",88),O("click",function(){T(t);let r=E(2);return D(r.closeAddToLessonsModal())}),d(11," \u0625\u0644\u063A\u0627\u0621 "),c(),l(12,"button",97),O("click",function(){T(t);let r=E(2);return D(r.enrollStudentToSelectedClasses())}),ee(13,Bj,1,0,"span",98),P(14,"i",90),d(15),c()()()()}if(n&2){let t=E(2);g(7),R("ngIf",t.loadingAvailableClasses),g(),R("ngIf",!t.loadingAvailableClasses),g(4),R("disabled",t.selectedClasses.length===0||t.isEnrolling),g(),R("ngIf",t.isEnrolling),g(2),K(" \u062A\u0633\u062C\u064A\u0644 \u0641\u064A \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u062D\u062F\u062F\u0629 (",t.selectedClasses.length,") ")}}function Hj(n,e){if(n&1){let t=Me();l(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16),d(5),c(),l(6,"h4",17),d(7),c(),l(8,"p",18),d(9),c(),l(10,"div",19)(11,"div",20),P(12,"i",21),l(13,"span"),d(14),c()(),ee(15,ej,4,1,"div",22)(16,tj,4,1,"div",22)(17,nj,4,1,"div",22),l(18,"div",20),P(19,"i",23),l(20,"span"),d(21),pn(22,"date"),c()()(),l(23,"div",24)(24,"span"),d(25),c(),l(26,"span",25),d(27),c()()()()(),l(28,"div",26)(29,"div",27)(30,"div",28)(31,"ul",29)(32,"li",30)(33,"a",31),O("click",function(){T(t);let r=E();return D(r.setActiveTab("info"))}),d(34,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629"),c()(),l(35,"li",30)(36,"a",31),O("click",function(){T(t);let r=E();return D(r.setActiveTab("classes"))}),d(37,"\u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u0633\u062C\u0644\u0629"),c()(),l(38,"li",30)(39,"a",31),O("click",function(){T(t);let r=E();return D(r.setActiveTab("payments"))}),d(40,"\u0633\u062C\u0644 \u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A"),c()(),l(41,"li",30)(42,"a",31),O("click",function(){T(t);let r=E();return D(r.setActiveTab("attendance"))}),d(43,"\u0633\u062C\u0644 \u0627\u0644\u062D\u0636\u0648\u0631"),c()()()(),l(44,"div",32),ee(45,sj,25,5,"div",33)(46,dj,11,2,"div",33)(47,mj,36,9,"div",33)(48,gj,7,0,"div",33),c(),ee(49,xj,34,6,"div",34)(50,bj,31,5,"div",34)(51,Cj,17,0,"div",34)(52,zj,16,5,"div",34),c()()()}if(n&2){let t=E();g(5),K(" ",t.student.name.charAt(0)," "),g(2),te(t.student.name),g(2),K("\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062C\u0627\u0645\u0639\u064A: ",t.student.studentId,""),g(5),K("\u0627\u0644\u0645\u0633\u062A\u0648\u0649: ",t.student.academicYear,""),g(),R("ngIf",t.student.parentName),g(),R("ngIf",t.student.parentPhone),g(),R("ngIf",t.student.birthDate),g(4),K("\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u0633\u062C\u064A\u0644: ",gi(22,30,t.student.registrationDate,"yyyy/MM/dd"),""),g(3),vn(t.student.hasPaidRegistration?"badge bg-success":"badge bg-danger"),g(),K(" ",t.student.hasPaidRegistration?"\u0631\u0633\u0648\u0645 \u0645\u062F\u0641\u0648\u0639\u0629":"\u0631\u0633\u0648\u0645 \u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639\u0629"," "),g(),vn(t.student.status==="active"?"badge bg-success":"badge bg-secondary"),g(),K(" ",t.student.status==="active"?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," "),g(6),Ue("active",t.activeTab==="info"),g(3),Ue("active",t.activeTab==="classes"),g(3),Ue("active",t.activeTab==="payments"),g(3),Ue("active",t.activeTab==="attendance"),g(3),R("ngIf",t.activeTab==="info"),g(),R("ngIf",t.activeTab==="classes"),g(),R("ngIf",t.activeTab==="payments"),g(),R("ngIf",t.activeTab==="attendance"),g(),R("ngIf",t.showPaymentModal),g(),R("ngIf",t.showEditPaymentModal),g(),R("ngIf",t.showDeleteConfirmModal),g(),R("ngIf",t.showAddToLessonsModal)}}var Tg=class n{constructor(e,t,i,r,o,s){this.route=e;this.router=t;this.studentsService=i;this.paymentsService=r;this.classesService=o;this.printerService=s}student=null;loading=!1;activeTab="info";studentClasses=[];paymentHistory=[];getStudentId(){return this.student?this.student.id?this.student.id:this.student._id?this.student._id:this.student.studentId||"":""}showPaymentModal=!1;showEditPaymentModal=!1;showDeleteConfirmModal=!1;newPayment={studentId:"",amount:0,month:"",paymentMethod:"cash",notes:""};editingPayment=null;paymentToDelete=null;months=["\u064A\u0646\u0627\u064A\u0631","\u0641\u0628\u0631\u0627\u064A\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064A\u0644","\u0645\u0627\u064A\u0648","\u064A\u0648\u0646\u064A\u0648","\u064A\u0648\u0644\u064A\u0648","\u0623\u063A\u0633\u0637\u0633","\u0633\u0628\u062A\u0645\u0628\u0631","\u0623\u0643\u062A\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062F\u064A\u0633\u0645\u0628\u0631"];paymentMethods=[{value:"cash",label:"\u0646\u0642\u062F\u0627\u064B"},{value:"bank",label:"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A"},{value:"card",label:"\u0628\u0637\u0627\u0642\u0629 \u0625\u0626\u062A\u0645\u0627\u0646"},{value:"check",label:"\u0634\u064A\u0643"},{value:"online",label:"\u062F\u0641\u0639 \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"},{value:"mobile",label:"\u062F\u0641\u0639 \u0645\u062D\u0645\u0648\u0644"}];academicYears=[{value:"1AS",label:"\u0627\u0644\u0623\u0648\u0644\u0649 \u062B\u0627\u0646\u0648\u064A"},{value:"2AS",label:"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u062B\u0627\u0646\u0648\u064A"},{value:"3AS",label:"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u062B\u0627\u0646\u0648\u064A"},{value:"1MS",label:"\u0627\u0644\u0623\u0648\u0644\u0649 \u0645\u062A\u0648\u0633\u0637"},{value:"2MS",label:"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0645\u062A\u0648\u0633\u0637"},{value:"3MS",label:"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u0645\u062A\u0648\u0633\u0637"},{value:"4MS",label:"\u0627\u0644\u0631\u0627\u0628\u0639\u0629 \u0645\u062A\u0648\u0633\u0637"},{value:"1AP",label:"\u0627\u0644\u0623\u0648\u0644\u0649 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"2AP",label:"\u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"3AP",label:"\u0627\u0644\u062B\u0627\u0644\u062B\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"4AP",label:"\u0627\u0644\u0631\u0627\u0628\u0639\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{value:"5AP",label:"\u0627\u0644\u062E\u0627\u0645\u0633\u0629 \u0627\u0628\u062A\u062F\u0627\u0626\u064A"}];showAddToLessonsModal=!1;availableClasses=[];filteredAvailableClasses=[];alreadyEnrolledClasses=[];selectedClasses=[];loadingAvailableClasses=!1;isEnrolling=!1;filterSubject="";filterLevel="";subjects=["\u0631\u064A\u0627\u0636\u064A\u0627\u062A","\u0641\u064A\u0632\u064A\u0627\u0621","\u0639\u0644\u0648\u0645","\u0644\u063A\u0629 \u0639\u0631\u0628\u064A\u0629","\u0644\u063A\u0629 \u0641\u0631\u0646\u0633\u064A\u0629","\u0644\u063A\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629","\u062A\u0627\u0631\u064A\u062E","\u062C\u063A\u0631\u0627\u0641\u064A\u0627","\u0641\u0644\u0633\u0641\u0629","\u0625\u0639\u0644\u0627\u0645 \u0622\u0644\u064A"];ngOnInit(){this.loadStudentDetails()}loadStudentDetails(){let e=this.route.snapshot.paramMap.get("id");if(!e){this.router.navigate(["/home/students-management"]);return}this.loading=!0,this.studentsService.getStudentById(e).subscribe({next:t=>{this.student=t,this.newPayment.studentId=this.getStudentId(),this.loadStudentClasses(e),this.loadPaymentHistory(e),this.loading=!1},error:t=>{console.error("Error loading student details:",t),nn.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628","error"),this.router.navigate(["/home/students-management"])}})}loadStudentClasses(e){this.studentsService.getStudentClasses(e).subscribe({next:t=>{this.studentClasses=t},error:t=>{console.error("Error loading student classes:",t),this.studentClasses=[]}})}loadPaymentHistory(e){this.paymentsService.getStudentPayments(e).subscribe({next:t=>{this.paymentHistory=t},error:t=>{console.error("Error loading payment history:",t),this.paymentHistory=[]}})}setActiveTab(e){this.activeTab=e}goBack(){this.router.navigate(["/home/students-management"])}openAddPaymentModal(){this.student&&(this.newPayment={studentId:this.getStudentId(),amount:0,month:this.getCurrentMonth(),paymentMethod:"cash",notes:""},this.showPaymentModal=!0)}closePaymentModal(){this.showPaymentModal=!1,this.newPayment={studentId:"",amount:0,month:"",paymentMethod:"cash",notes:""}}openEditPaymentModal(e){this.editingPayment=xe({},e),this.showEditPaymentModal=!0}closeEditPaymentModal(){this.showEditPaymentModal=!1,this.editingPayment=null}openDeleteConfirmModal(e){this.paymentToDelete=e,this.showDeleteConfirmModal=!0}closeDeleteConfirmModal(){this.showDeleteConfirmModal=!1,this.paymentToDelete=null}addPayment(){if(!this.student)return;if(!this.newPayment.amount||this.newPayment.amount<=0){nn.default.fire("\u062E\u0637\u0623","\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0645\u0628\u0644\u063A \u0635\u062D\u064A\u062D","error");return}if(!this.newPayment.month){nn.default.fire("\u062E\u0637\u0623","\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0634\u0647\u0631","error");return}let e=lt(xe({},this.newPayment),{studentName:this.student.name,studentId:this.getStudentId(),status:"paid",paymentDate:new Date().toISOString()});nn.default.fire({title:"\u062C\u0627\u0631\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629...",allowOutsideClick:!1,didOpen:()=>{nn.default.showLoading()}}),this.paymentsService.recordPayment(e).subscribe({next:t=>{nn.default.fire({icon:"success",title:"\u0646\u062C\u0627\u062D",text:"\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D",timer:1500,showConfirmButton:!1}),this.closePaymentModal();let i=this.route.snapshot.paramMap.get("id");i&&this.loadPaymentHistory(i),this.student&&(this.student.hasPaidRegistration=!0)},error:t=>{console.error("Error recording payment:",t),nn.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639\u0629","error")}})}updatePayment(){if(!(!this.editingPayment||!this.student)){if(!this.editingPayment.amount||this.editingPayment.amount<=0){nn.default.fire("\u062E\u0637\u0623","\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0645\u0628\u0644\u063A \u0635\u062D\u064A\u062D","error");return}nn.default.fire({title:"\u062C\u0627\u0631\u064A \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062F\u0641\u0639\u0629...",allowOutsideClick:!1,didOpen:()=>{nn.default.showLoading()}}),this.paymentsService.updatePayment(this.editingPayment.id,this.editingPayment).subscribe({next:e=>{nn.default.fire({icon:"success",title:"\u0646\u062C\u0627\u062D",text:"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D",timer:1500,showConfirmButton:!1}),this.closeEditPaymentModal();let t=this.route.snapshot.paramMap.get("id");t&&this.loadPaymentHistory(t)},error:e=>{console.error("Error updating payment:",e),nn.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062F\u0641\u0639\u0629","error")}})}}deletePayment(){!this.paymentToDelete||!this.student||(nn.default.fire({title:"\u062C\u0627\u0631\u064A \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629...",allowOutsideClick:!1,didOpen:()=>{nn.default.showLoading()}}),this.paymentsService.deletePayment(this.paymentToDelete.id).subscribe({next:()=>{nn.default.fire({icon:"success",title:"\u0646\u062C\u0627\u062D",text:"\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D",timer:1500,showConfirmButton:!1}),this.closeDeleteConfirmModal();let e=this.route.snapshot.paramMap.get("id");e&&this.loadPaymentHistory(e)},error:e=>{console.error("Error deleting payment:",e),nn.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629","error")}}))}printPaymentReceipt(e){return $t(this,null,function*(){if(this.student)try{nn.default.fire({title:"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0636\u064A\u0631 \u0644\u0644\u0637\u0628\u0627\u0639\u0629...",allowOutsideClick:!1,didOpen:()=>{nn.default.showLoading()}});let t={receiptNumber:`PAY-${e.id||Date.now().toString().slice(-8)}`,date:new Date(e.paymentDate).toLocaleDateString("ar-EG"),time:new Date(e.paymentDate).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}),studentName:this.student.name,studentId:this.student.studentId,className:this.getStudentClassesNames(),month:e.month,amount:e.amount,paymentMethod:e.paymentMethod,academicYear:this.getAcademicYearName(this.student.academicYear),parentPhone:this.student.parentPhone||"",notes:e.notes||"\u062A\u0645 \u0633\u062F\u0627\u062F \u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u0634\u0647\u0631\u064A \u0628\u0646\u062C\u0627\u062D. \u0646\u062A\u0645\u0646\u0649 \u0644\u0644\u0637\u0627\u0644\u0628 \u0627\u0644\u062A\u0648\u0641\u064A\u0642 \u0648\u0627\u0644\u0646\u062C\u0627\u062D."};(yield this.printerService.printMonthlyPaymentReceipt(t))||nn.default.fire("\u062A\u062D\u0630\u064A\u0631","\u0641\u0634\u0644 \u0641\u064A \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629","warning")}catch(t){console.error("Error printing receipt:",t),nn.default.fire("\u062E\u0637\u0623","\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u0637\u0628\u0627\u0639\u0629","error")}})}printStudentReport(){return $t(this,null,function*(){if(this.student)try{nn.default.fire({title:"\u062C\u0627\u0631\u064A \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062A\u0642\u0631\u064A\u0631...",allowOutsideClick:!1,didOpen:()=>{nn.default.showLoading()}});let e=this.paymentHistory.filter(s=>s.status==="paid").reduce((s,a)=>s+a.amount,0),t={attendanceRate:85,present:17,absent:3,late:2},i={totalPaid:e,pending:this.calculatePendingAmount(e)},r={name:this.student.name,studentId:this.student.studentId,academicYear:this.student.academicYear,parentPhone:this.student.parentPhone};(yield this.printerService.printStudentMonthlyReport(r,t,i))||nn.default.fire("\u062A\u062D\u0630\u064A\u0631","\u0641\u0634\u0644 \u0641\u064A \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u0637\u0627\u0628\u0639\u0629","warning")}catch(e){console.error("Error printing report:",e),nn.default.fire("\u062E\u0637\u0623","\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062A\u0642\u0631\u064A\u0631","error")}})}getCurrentMonth(){let t=new Date().getMonth();return this.months[t]}getPaymentMethodLabel(e){let t=this.paymentMethods.find(i=>i.value===e);return t?t.label:e}getAcademicYearName(e){let t=this.academicYears.find(i=>i.value===e);return t?t.label:e}getPaymentStatus(e){return e.hasPaidRegistration?"\u0645\u062F\u0641\u0648\u0639":"\u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639"}getPaymentStatusClass(e){return e.hasPaidRegistration?"status-paid":"status-unpaid"}calculateAge(e){if(!e)return 0;let t=new Date(e),i=new Date,r=i.getFullYear()-t.getFullYear(),o=i.getMonth()-t.getMonth();return(o<0||o===0&&i.getDate()<t.getDate())&&r--,r}getStudentClassesNames(){return this.studentClasses.length===0?"\u0644\u0627 \u062A\u0648\u062C\u062F \u062D\u0635\u0635 \u0645\u0633\u062C\u0644\u0629":this.studentClasses.map(t=>t.name).join("\u060C ")}calculatePendingAmount(e){let r=this.paymentHistory.length*5e3;return Math.max(0,r-e)}editStudent(){if(this.student){let e=this.getStudentId();if(e)this.router.navigate([`/home/students-management/edit/${e}`]);else{let t=this.route.snapshot.paramMap.get("id");t&&this.router.navigate([`/home/students-management/edit/${t}`])}}}getTotalPaid(){return this.paymentHistory.filter(e=>e.status==="paid").reduce((e,t)=>e+t.amount,0)}getTotalPending(){return this.paymentHistory.filter(e=>e.status!=="paid").reduce((e,t)=>e+t.amount,0)}openAddToLessonsModal(){this.student&&(this.showAddToLessonsModal=!0,this.selectedClasses=[],this.filterSubject="",this.filterLevel="",this.loadAvailableClasses())}closeAddToLessonsModal(){this.showAddToLessonsModal=!1,this.availableClasses=[],this.filteredAvailableClasses=[],this.alreadyEnrolledClasses=[],this.selectedClasses=[]}loadAvailableClasses(){this.student&&(this.loadingAvailableClasses=!0,this.classesService.getAvailableClasses().subscribe({next:e=>{this.availableClasses=e,this.alreadyEnrolledClasses=this.studentClasses;let t=this.alreadyEnrolledClasses.map(i=>i._id);this.availableClasses=e.filter(i=>!t.includes(i._id)),this.filterAvailableClasses(),this.loadingAvailableClasses=!1},error:e=>{console.error("Error loading available classes:",e),nn.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062D\u0635\u0635 \u0627\u0644\u0645\u062A\u0627\u062D\u0629","error"),this.loadingAvailableClasses=!1}}))}filterAvailableClasses(){this.filteredAvailableClasses=this.availableClasses.filter(e=>!(this.filterSubject&&e.subject!==this.filterSubject||this.filterLevel&&e.academicYear!==this.filterLevel))}isLevelCompatible(e){return!this.student||!e.academicYear||!e.academicYear||e.academicYear==="NS"||e.academicYear==="\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"?!0:e.academicYear===this.student.academicYear}toggleClassSelection(e){let t=this.selectedClasses.findIndex(i=>i._id===e._id);t>-1?this.selectedClasses.splice(t,1):this.selectedClasses.push(e)}isClassSelected(e){return this.selectedClasses.some(t=>t._id===e)}calculateMonthlyTotal(){return this.selectedClasses.reduce((e,t)=>e+(t.price||0),0)}enrollStudentToSelectedClasses(){if(!this.student||this.selectedClasses.length===0)return;let e=this.selectedClasses.map(i=>i._id),t=this.getStudentId();nn.default.fire({title:"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062A\u0633\u062C\u064A\u0644",html:`
        <p>\u0647\u0644 \u062A\u0631\u064A\u062F \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628 \u0641\u064A ${this.selectedClasses.length} \u062D\u0635\u0629\u061F</p>
        <p><strong>\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0634\u0647\u0631\u064A:</strong> ${this.calculateMonthlyTotal().toLocaleString()} \u062F.\u062C</p>
        <div class="text-start">
          ${this.selectedClasses.map(i=>`<div class="mb-1">\u2022 ${i.name} - ${i.price.toLocaleString()} \u062F.\u062C/\u0634\u0647\u0631</div>`).join("")}
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645\u060C \u0633\u062C\u0644 \u0627\u0644\u0622\u0646",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then(i=>{i.isConfirmed&&this.enrollStudent(t,e)})}enrollStudent(e,t){this.isEnrolling=!0,this.studentsService.enrollStudentMultiple(e,{classIds:t}).subscribe({next:i=>{nn.default.fire({icon:"success",title:"\u062A\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",html:`
            <p>\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628 \u0641\u064A ${i.results.successful.length} \u062D\u0635\u0629 \u0628\u0646\u062C\u0627\u062D</p>
            ${i.results.failed.length>0?`<p class="text-warning">\u0641\u0634\u0644 \u0627\u0644\u062A\u0633\u062C\u064A\u0644 \u0641\u064A ${i.results.failed.length} \u062D\u0635\u0629</p>`:""}
          `,timer:3e3,showConfirmButton:!1}),this.loadStudentClasses(this.route.snapshot.paramMap.get("id")||""),this.closeAddToLessonsModal(),this.isEnrolling=!1},error:i=>{console.error("Error enrolling student:",i),nn.default.fire("\u062E\u0637\u0623","\u0641\u0634\u0644 \u0641\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0627\u0644\u0628 \u0641\u064A \u0627\u0644\u062D\u0635\u0635","error"),this.isEnrolling=!1}})}static \u0275fac=function(t){return new(t||n)(we(jr),we(ti),we(Cr),we(Rs),we(Is),we(eu))};static \u0275cmp=Jt({type:n,selectors:[["app-student-details"]],decls:9,vars:2,consts:[[1,"student-details"],[1,"container-fluid"],[1,"row","mb-4"],[1,"col"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-arrow-right","me-1"],["class","text-center py-5",4,"ngIf"],["class","row",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"mt-3","text-muted"],[1,"row"],[1,"col-lg-4","mb-4"],[1,"card","student-profile-card"],[1,"card-body","text-center"],[1,"avatar-lg","bg-primary","text-white","rounded-circle","mx-auto","mb-3","d-flex","align-items-center","justify-content-center"],[1,"card-title"],[1,"text-muted"],[1,"student-info"],[1,"info-item"],[1,"bi","bi-book","me-2"],["class","info-item",4,"ngIf"],[1,"bi","bi-calendar-check","me-2"],[1,"status-badges","mt-4"],[1,"ms-2"],[1,"col-lg-8"],[1,"card"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"card-body"],["class","tab-content",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"bi","bi-person","me-2"],[1,"bi","bi-phone","me-2"],[1,"bi","bi-calendar","me-2"],[1,"tab-content"],[1,"col-md-6"],[1,"table","table-borderless"],[4,"ngIf"],[1,"add-to-lesson"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-lg","me-1"],["class","text-center py-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"text-center","py-4"],[1,"bi","bi-book","display-1","text-muted"],[1,"text-muted","mt-3"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["class","badge bg-light text-dark me-1",4,"ngFor","ngForOf"],[1,"badge","bg-success"],[1,"badge","bg-light","text-dark","me-1"],[1,"payment-actions-header","mb-4"],[1,"btn","btn-outline-success","ms-2",3,"click"],[1,"bi","bi-printer","me-1"],[1,"col-md-4"],[1,"card","bg-light"],[1,"text-success"],[1,"text-danger"],[1,"bi","bi-credit-card","display-1","text-muted"],["role","group",1,"btn-group","btn-group-sm"],["title","\u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0625\u064A\u0635\u0627\u0644",1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-printer"],["title","\u062A\u0639\u062F\u064A\u0644",1,"btn","btn-outline-warning",3,"click"],[1,"bi","bi-pencil"],["title","\u062D\u0630\u0641",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"bi","bi-calendar-check","display-1","text-muted"],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label"],["type","number","name","amount","required","","min","0","step","100",1,"form-control",3,"ngModelChange","ngModel"],["name","month","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","paymentMethod","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","notes","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"bi","bi-check-circle","me-2"],[3,"value"],["type","text","name","month","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-title","text-danger"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash","me-2"],["class","text-center py-3",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2","role","status",4,"ngIf"],[1,"text-center","py-3"],["role","status",1,"spinner-border","text-primary"],[1,"mt-2"],[1,"form-control",3,"ngModelChange","change","ngModel"],["class","mb-4",4,"ngIf"],["class","available-classes-list",4,"ngIf"],["class","selected-classes-summary mt-4 p-3 bg-light rounded",4,"ngIf"],[1,"mb-4"],[1,"text-primary"],[1,"alert","alert-info"],[1,"bi","bi-info-circle","me-2"],[1,"table","table-sm","table-bordered"],[1,"bi","bi-book","display-4","text-muted"],[1,"available-classes-list"],["class","col-md-6 mb-3",4,"ngFor","ngForOf"],[1,"col-md-6","mb-3"],[1,"card","class-card"],[1,"d-flex","justify-content-between","align-items-start"],[1,"card-title","mb-1"],[1,"text-muted","small","mb-1"],[1,"bi","bi-book","me-1"],[1,"bi","bi-person","me-1"],[1,"bi","bi-people","me-1"],[1,"bi","bi-calendar","me-1"],[1,"bi","bi-cash-coin","me-1"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","checked"],[1,"mt-3"],[1,"small","fw-bold"],["class","badge bg-success",4,"ngIf"],["class","badge bg-warning",4,"ngIf"],["class","badge bg-light text-dark me-1 mb-1",4,"ngFor","ngForOf"],[1,"badge","bg-light","text-dark","me-1","mb-1"],[1,"badge","bg-secondary"],[1,"bi","bi-check-circle","me-1"],[1,"badge","bg-warning"],[1,"bi","bi-exclamation-triangle","me-1"],[1,"selected-classes-summary","mt-4","p-3","bg-light","rounded"],["class","col-md-4 mb-2",4,"ngFor","ngForOf"],[1,"col-md-4","mb-2"],[1,"d-flex","align-items-center","bg-white","p-2","rounded"],[1,"bi","bi-check-circle","text-success","me-2"],[1,"fw-bold"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,i){t&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),O("click",function(){return i.goBack()}),P(5,"i",5),d(6," \u0627\u0644\u0639\u0648\u062F\u0629 \u0644\u0644\u0642\u0627\u0626\u0645\u0629 "),c()()(),ee(7,QH,6,0,"div",6)(8,Hj,53,33,"div",7),c()()),t&2&&(g(7),R("ngIf",i.loading),g(),R("ngIf",!i.loading&&i.student))},dependencies:[cn,Yn,Tn,ju,Vr,Zn,yr,vi,xi,Rn,Wr,si,Xn,xr,$r,Qo,Bn,Gr],styles:['.student-details[_ngcontent-%COMP%]{direction:rtl;font-family:Segoe UI,Tajawal,sans-serif;color:#2d3748;padding:20px;background:linear-gradient(135deg,#f8fafc,#f1f5f9);min-height:100vh}.container-fluid[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:12px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);display:inline-flex;align-items:center;gap:8px;border:2px solid transparent;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff1a;transform:translate(-50%,-50%);transition:width .6s,height .6s}.btn[_ngcontent-%COMP%]:hover:before{width:300px;height:300px}.btn-outline-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8fafc);color:#4b5563;border:2px solid #e5e7eb;box-shadow:0 2px 4px #0000000d}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f9fafb,#f3f4f6);color:#374151;border-color:#d1d5db;box-shadow:0 4px 12px #00000014;transform:translateY(-1px)}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:100px 20px}.spinner-border[_ngcontent-%COMP%]{width:4rem;height:4rem;border-width:.3em;color:#3b82f6;animation:_ngcontent-%COMP%_spin 1s linear infinite;border-style:solid;border-right-color:transparent;border-radius:50%}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.spinner-border.text-primary[_ngcontent-%COMP%]{border-color:#3b82f6;border-right-color:transparent}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.student-profile-card[_ngcontent-%COMP%]{border-radius:20px;overflow:hidden;box-shadow:0 10px 30px #00000014;border:none;height:100%;background:linear-gradient(135deg,#fff,#fafcff);transition:transform .3s ease,box-shadow .3s ease}.student-profile-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 20px 40px #0000001f}.card-body[_ngcontent-%COMP%]{padding:30px}.avatar-lg[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;display:flex;align-items:center;justify-content:center;font-size:3rem;font-weight:700;margin:0 auto 25px;box-shadow:0 8px 20px #667eea4d;position:relative;overflow:hidden}.avatar-lg[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,.1) 50%,transparent 70%);animation:_ngcontent-%COMP%_shine 3s infinite linear}@keyframes _ngcontent-%COMP%_shine{0%{transform:translate(-100%) translateY(-100%) rotate(45deg)}to{transform:translate(100%) translateY(100%) rotate(45deg)}}.card-title[_ngcontent-%COMP%]{text-align:center;color:#1e293b;margin-bottom:10px;font-size:1.8rem;font-weight:700}.student-id[_ngcontent-%COMP%]{text-align:center;color:#64748b;margin-bottom:25px;font-size:1rem;padding:8px 16px;background:#f1f5f9;border-radius:20px;display:inline-block}.student-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px;margin-bottom:25px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:#475569;padding:12px;background:#f8fafc;border-radius:12px;transition:all .3s ease;border:1px solid transparent}.info-item[_ngcontent-%COMP%]:hover{background:#fff;border-color:#e2e8f0;transform:translate(-5px);box-shadow:0 4px 8px #0000000d}.info-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;width:20px;font-size:1.2rem}.status-badges[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-top:30px;padding-top:20px;border-top:2px solid #f1f5f9}.badge[_ngcontent-%COMP%]{padding:10px 20px;border-radius:25px;font-size:.9rem;font-weight:600;letter-spacing:.3px;text-transform:uppercase;box-shadow:0 4px 6px #0000000d;transition:all .3s ease}.badge[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 12px #0000001a}.bg-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.bg-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff}.bg-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#94a3b8,#64748b);color:#fff}.bg-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.bg-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}.main-content-card[_ngcontent-%COMP%]{border-radius:20px;overflow:hidden;box-shadow:0 10px 30px #00000014;border:none;height:100%;background:linear-gradient(135deg,#fff,#fafcff)}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8faff,#f0f4ff);border-bottom:2px solid #e0e7ff;padding:0;border-radius:20px 20px 0 0!important}.nav-tabs[_ngcontent-%COMP%]{border:none;display:flex;gap:2px;padding:0 10px}.nav-item[_ngcontent-%COMP%]{flex:1;text-align:center;border-bottom:3px solid transparent;transition:all .3s cubic-bezier(.4,0,.2,1)}.nav-link[_ngcontent-%COMP%]{padding:20px;border:none;border-radius:0;color:#64748b;font-weight:600;display:flex;align-items:center;justify-content:center;gap:10px;transition:all .3s ease;cursor:pointer;position:relative;overflow:hidden;background:transparent}.nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:0;left:0;width:0;height:3px;background:linear-gradient(135deg,#667eea,#764ba2);transition:width .3s ease}.nav-link[_ngcontent-%COMP%]:hover{color:#4f46e5;background:#6366f10d}.nav-link[_ngcontent-%COMP%]:hover:before{width:100%}.nav-link.active[_ngcontent-%COMP%]{background:#fff;color:#4f46e5;border-bottom:3px solid #4f46e5;box-shadow:0 -4px 20px #4f46e51a}.nav-link.active[_ngcontent-%COMP%]:before{width:100%}.tab-content[_ngcontent-%COMP%]{padding:30px;animation:_ngcontent-%COMP%_fadeIn .5s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.table-borderless[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 20px;border:none;color:#475569;border-bottom:1px solid #f1f5f9}.table-borderless[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.table-borderless[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:700;color:#1e293b;width:180px;background:#f8fafc;border-radius:10px 0 0 10px}.table-borderless[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-radius:0 10px 10px 0}.add-to-lesson[_ngcontent-%COMP%]{text-align:right;margin-bottom:25px}.add-to-lesson[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:14px 28px;border-radius:15px;font-weight:700;font-size:1.1rem;cursor:pointer;transition:all .4s cubic-bezier(.4,0,.2,1);display:inline-flex;align-items:center;gap:12px;border:none;background:linear-gradient(135deg,#008980,#00a896);color:#fff;box-shadow:0 6px 20px #0089804d;position:relative;overflow:hidden}.add-to-lesson[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .6s}.add-to-lesson[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#00a896,#008980);transform:translateY(-3px);box-shadow:0 12px 30px #00898066}.add-to-lesson[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:before{left:100%}.add-to-lesson[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 4px 15px #0089804d}.classes-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;color:#1e293b;font-weight:700}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease;border-radius:10px;overflow:hidden}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f8faff,#f0f4ff);transform:translate(5px);box-shadow:0 8px 20px #00000014}.teacher-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.schedule-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 12px;background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border-radius:8px;font-size:.85rem;margin:4px;color:#0369a1;border:1px solid #bae6fd;font-weight:500}.payment-actions-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:15px;margin-bottom:30px;box-shadow:0 4px 12px #0000000d}.payment-stats[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center}.d-flex[_ngcontent-%COMP%]{display:flex}.align-items-center[_ngcontent-%COMP%]{align-items:center}.gap-2[_ngcontent-%COMP%]{gap:.5rem}.form-control[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e2e8f0;border-radius:12px;font-size:1rem;transition:all .3s ease;background:#fff;box-shadow:0 2px 4px #00000005}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:#fff;box-shadow:0 0 0 4px #667eea26;transform:translateY(-1px)}.form-control-sm[_ngcontent-%COMP%]{padding:10px 14px;font-size:.95rem}.card.bg-light[_ngcontent-%COMP%]{border:none;border-radius:15px;overflow:hidden;box-shadow:0 8px 20px #0000000f;transition:all .3s ease;background:linear-gradient(135deg,#fff,#fafcff);border:1px solid #f1f5f9}.card.bg-light[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 30px #0000001a}.card.bg-light[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:25px}.card.bg-light[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#64748b;font-size:.95rem;font-weight:600;margin-bottom:10px;text-transform:uppercase;letter-spacing:.5px}.card.bg-light[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1e293b;font-weight:800;margin:0;font-size:2.2rem}.card.bg-light.text-success[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.card.bg-light.text-danger[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 -15px}.col-lg-4[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%]{padding:0 15px}.col-lg-4[_ngcontent-%COMP%]{flex:0 0 33.333333%;max-width:33.333333%}.col-lg-8[_ngcontent-%COMP%]{flex:0 0 66.666667%;max-width:66.666667%}.mb-4[_ngcontent-%COMP%]{margin-bottom:2rem}.mt-3[_ngcontent-%COMP%]{margin-top:1rem}.mt-2[_ngcontent-%COMP%]{margin-top:.5rem}.text-muted[_ngcontent-%COMP%]{color:#94a3b8}.small[_ngcontent-%COMP%]{font-size:.9rem}.text-success[_ngcontent-%COMP%]{color:#10b981}.text-danger[_ngcontent-%COMP%]{color:#ef4444}.text-warning[_ngcontent-%COMP%]{color:#f59e0b}.progress[_ngcontent-%COMP%]{height:24px;background:linear-gradient(135deg,#f1f5f9,#e2e8f0);border-radius:12px;overflow:hidden;box-shadow:inset 0 2px 4px #0000000d}.progress-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(135deg,#667eea,#764ba2);transition:width .6s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;justify-content:center;color:#fff;font-size:.85rem;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.1);position:relative;overflow:hidden}.progress-bar[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);animation:_ngcontent-%COMP%_progressShine 2s infinite linear}@keyframes _ngcontent-%COMP%_progressShine{0%{left:-100%}to{left:100%}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1060;direction:rtl;backdrop-filter:blur(5px);animation:_ngcontent-%COMP%_overlayFade .3s ease}@keyframes _ngcontent-%COMP%_overlayFade{0%{opacity:0}to{opacity:1}}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafcff);border-radius:24px;max-width:900px;width:95%;max-height:90vh;overflow:hidden;box-shadow:0 30px 60px #00000040;animation:_ngcontent-%COMP%_modalSlideUp .4s cubic-bezier(.4,0,.2,1);border:1px solid rgba(255,255,255,.1)}@keyframes _ngcontent-%COMP%_modalSlideUp{0%{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[_ngcontent-%COMP%]{padding:25px 30px;border-bottom:2px solid #f1f5f9;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(135deg,#f8faff,#f0f4ff)}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:800;color:#1e293b;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.8rem;cursor:pointer;color:#94a3b8;padding:8px;border-radius:50%;transition:all .3s ease;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.btn-close[_ngcontent-%COMP%]:hover{color:#ef4444;background:#ef44441a;transform:rotate(90deg)}.modal-body[_ngcontent-%COMP%]{padding:30px;max-height:60vh;overflow-y:auto}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:4px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:4px}.modal-footer[_ngcontent-%COMP%]{padding:25px 30px;border-top:2px solid #f1f5f9;display:flex;justify-content:flex-end;gap:15px;background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.form-label[_ngcontent-%COMP%]{font-weight:700;color:#374151;margin-bottom:10px;display:block;font-size:.95rem}.available-classes-list[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto;padding:15px;border-radius:15px;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border:2px solid #e2e8f0}.class-card[_ngcontent-%COMP%]{border:2px solid transparent;transition:all .4s cubic-bezier(.4,0,.2,1);cursor:pointer;height:100%;border-radius:20px;overflow:hidden;background:linear-gradient(135deg,#fff,#fafcff);box-shadow:0 6px 15px #0000000d;position:relative;z-index:1}.class-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(135deg,#667eea,#764ba2);opacity:0;transition:opacity .3s ease;z-index:2}.class-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 20px 40px #0000001f}.class-card[_ngcontent-%COMP%]:hover:before{opacity:1}.class-card.selected[_ngcontent-%COMP%]{border-color:#3b82f6;background:linear-gradient(135deg,#f0f9ff,#e0f2fe);box-shadow:0 15px 30px #3b82f633}.class-card.selected[_ngcontent-%COMP%]:before{opacity:1;background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.class-card[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:24px;height:24px;cursor:pointer;border-radius:8px;border:2px solid #cbd5e1;transition:all .3s ease;position:relative}.class-card[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background:linear-gradient(135deg,#3b82f6,#1d4ed8);border-color:transparent;box-shadow:0 4px 12px #3b82f666}.class-card[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked:after{content:"\\2713";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-weight:700;font-size:14px}.selected-classes-summary[_ngcontent-%COMP%]{border:2px solid #3b82f6;background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border-radius:20px;padding:25px;margin-top:30px;box-shadow:0 10px 25px #3b82f626;animation:_ngcontent-%COMP%_slideUp .5s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.selected-classes-summary[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#1e40af;font-weight:700;font-size:1.1rem;margin-bottom:20px;display:flex;align-items:center;gap:10px}.selected-classes-summary[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]:before{content:"\\2713";background:#3b82f6;color:#fff;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700}.filter-controls[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);padding:20px;border-radius:15px;margin-bottom:25px;border:2px solid #e2e8f0}.filter-controls[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background:#fff;border-color:#d1d5db}.filter-controls[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 4px #3b82f626}.already-enrolled-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border-radius:15px;padding:25px;margin-bottom:30px;border:2px solid #bae6fd}.already-enrolled-section[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#0369a1;font-weight:700;margin-bottom:15px;display:flex;align-items:center;gap:10px}.already-enrolled-section[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#0ea5e9}.alert-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border:2px solid #7dd3fc;border-radius:12px;color:#0369a1;font-weight:500}.alert-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#0ea5e9;font-size:1.2rem}.class-info-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:10px;font-size:.85rem;color:#475569;margin:4px;border:1px solid #e2e8f0;transition:all .3s ease}.class-info-badge[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f1f5f9,#e2e8f0);transform:translateY(-2px)}.compatibility-badge[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;font-size:.85rem;font-weight:600;margin-top:10px;display:inline-flex;align-items:center;gap:6px;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #10b98166}70%{box-shadow:0 0 0 10px #10b98100}to{box-shadow:0 0 #10b98100}}.bg-success.compatibility-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 4px 12px #10b9814d}.bg-warning.compatibility-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;box-shadow:0 4px 12px #f59e0b4d}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#94a3b8}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#cbd5e1;margin-bottom:20px;opacity:.7}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#64748b}.text-center.py-3[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-width:.25em}.text-center.py-3[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin-top:15px;font-size:1rem}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:14px 28px;font-weight:700;border-radius:15px;transition:all .4s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#fff3;transform:translate(-50%,-50%);transition:width .6s,height .6s}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:before{width:400px;height:400px}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f1f5f9,#e2e8f0);color:#475569;border:2px solid #cbd5e1}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e2e8f0,#cbd5e1);color:#1e293b;transform:translateY(-3px);box-shadow:0 8px 25px #0000001a}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;box-shadow:0 8px 25px #3b82f64d}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#1d4ed8,#1e40af);transform:translateY(-3px);box-shadow:0 12px 35px #3b82f666}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 1200px){.col-lg-4[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}.modal-content[_ngcontent-%COMP%]{max-width:95%}}@media (max-width: 768px){.student-details[_ngcontent-%COMP%]{padding:15px}.modal-content[_ngcontent-%COMP%]{width:98%;margin:10px;max-height:95vh}.modal-header[_ngcontent-%COMP%]{padding:20px}.modal-body[_ngcontent-%COMP%]{padding:20px;max-height:70vh}.modal-footer[_ngcontent-%COMP%]{padding:20px;flex-direction:column}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.nav-tabs[_ngcontent-%COMP%]{flex-direction:column;gap:5px}.nav-item[_ngcontent-%COMP%]{flex:0 0 auto}.nav-link[_ngcontent-%COMP%]{padding:15px;justify-content:flex-start}.payment-actions-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.payment-actions-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.filter-controls[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.class-card[_ngcontent-%COMP%]{margin-bottom:15px}.available-classes-list[_ngcontent-%COMP%]{max-height:400px}.avatar-lg[_ngcontent-%COMP%]{width:100px;height:100px;font-size:2.5rem}.card-title[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 576px){.student-details[_ngcontent-%COMP%]{padding:10px}.modal-content[_ngcontent-%COMP%]{border-radius:20px;width:100%;height:100vh;max-height:100vh;margin:0}.modal-body[_ngcontent-%COMP%]{max-height:calc(100vh - 200px)}.btn[_ngcontent-%COMP%]{padding:12px 20px;font-size:.95rem}.badge[_ngcontent-%COMP%]{padding:8px 16px;font-size:.85rem}.card-body[_ngcontent-%COMP%]{padding:20px}.table-responsive[_ngcontent-%COMP%]{font-size:.9rem}.add-to-lesson[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 20px;font-size:1rem}}@media print{.student-details[_ngcontent-%COMP%]{background:#fff;padding:0}.btn[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%], .add-to-lesson[_ngcontent-%COMP%]{display:none}.card[_ngcontent-%COMP%]{border:1px solid #ddd;box-shadow:none;break-inside:avoid}}@media (prefers-color-scheme: dark){.student-details[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0f172a,#1e293b);color:#e2e8f0}.student-profile-card[_ngcontent-%COMP%], .main-content-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#334155)}.card-title[_ngcontent-%COMP%]{color:#f1f5f9}.info-item[_ngcontent-%COMP%]{background:#334155;color:#cbd5e1}.table-borderless[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{background:#334155;color:#e2e8f0}.form-control[_ngcontent-%COMP%]{background:#334155;border-color:#475569;color:#e2e8f0}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#334155);border-color:#475569}.modal-title[_ngcontent-%COMP%]{color:#f1f5f9}}.btn[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus, .form-check-input[_ngcontent-%COMP%]:focus{outline:3px solid #3b82f6;outline-offset:2px}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-1000px 0}to{background-position:1000px 0}}.loading-shimmer[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:1000px 100%;animation:_ngcontent-%COMP%_shimmer 2s infinite linear}a[_ngcontent-%COMP%], button[_ngcontent-%COMP%], .nav-link[_ngcontent-%COMP%], .class-card[_ngcontent-%COMP%], .info-item[_ngcontent-%COMP%], .badge[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px;height:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:linear-gradient(135deg,#f1f5f9,#e2e8f0);border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:10px;border:2px solid #f1f5f9}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#764ba2,#667eea)}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:relative}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(135deg,transparent 0%,rgba(59,130,246,.05) 100%);opacity:0;transition:opacity .3s ease;pointer-events:none;z-index:-1}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover:after{opacity:1}.btn[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]   .ripple[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:#ffffffb3;transform:scale(0);animation:_ngcontent-%COMP%_ripple .6s linear;pointer-events:none}@keyframes _ngcontent-%COMP%_ripple{to{transform:scale(4);opacity:0}}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.class-card.selected[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.gradient-border[_ngcontent-%COMP%]{border:2px solid transparent;background:linear-gradient(#fff,#fff) padding-box,linear-gradient(135deg,#667eea,#764ba2) border-box;border-radius:20px}@media (max-width: 768px){[_ngcontent-%COMP%]:root{font-size:14px}}@media (max-width: 480px){[_ngcontent-%COMP%]:root{font-size:13px}}@media print{*[_ngcontent-%COMP%]{background:transparent!important;color:#000!important;box-shadow:none!important;text-shadow:none!important}.student-details[_ngcontent-%COMP%]{padding:0!important;background:#fff!important}.card[_ngcontent-%COMP%]{break-inside:avoid;page-break-inside:avoid}.btn[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]{display:none!important}}@keyframes _ngcontent-%COMP%_skeleton-loading{0%{background-position:-200px 0}to{background-position:calc(200px + 100%) 0}}.skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200px 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite}.glass-effect[_ngcontent-%COMP%]{background:#ffffff1a;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}.tooltip-inner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#334155);border-radius:10px;padding:10px 15px;font-size:.9rem;box-shadow:0 5px 15px #0003}.tooltip-arrow[_ngcontent-%COMP%]{border-color:#1e293b transparent transparent transparent}[_ngcontent-%COMP%]:focus-visible{outline:3px solid #3b82f6;outline-offset:3px;border-radius:8px}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}']})};var Dg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Jt({type:n,selectors:[["app-add-student-to-classes-modal"]],decls:2,vars:0,template:function(t,i){t&1&&(l(0,"p"),d(1,"add-student-to-classes-modal works!"),c())},styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1050;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 40px #0003;max-width:900px;width:100%;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:12px 12px 0 0}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600}.btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:1.25rem;cursor:pointer;padding:.5rem}.student-info-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:1.25rem;border:1px solid #e9ecef}.student-avatar[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:700}.search-filter-section[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:8px;border:1px solid #dee2e6}.search-box[_ngcontent-%COMP%]{position:relative}.search-icon[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translateY(-50%);color:#6c757d}.search-input[_ngcontent-%COMP%]{padding-right:45px;border-radius:8px;border:2px solid #e9ecef;transition:all .3s}.search-input[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.btn-clear[_ngcontent-%COMP%]{position:absolute;left:10px;top:50%;transform:translateY(-50%);background:none;border:none;color:#6c757d;cursor:pointer}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#6c757d}.classes-list[_ngcontent-%COMP%]{padding:1rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#6c757d}.class-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e9ecef;border-radius:10px;padding:1.25rem;margin-bottom:1rem;transition:all .3s;box-shadow:0 2px 4px #0000000d}.class-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.class-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;border-bottom:1px solid #eee;padding-bottom:.75rem}.class-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.class-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;color:#333}.class-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#28a745}.class-details[_ngcontent-%COMP%]{margin-bottom:1rem}.detail-item[_ngcontent-%COMP%]{margin-bottom:.5rem;color:#555}.detail-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;width:20px}.class-description[_ngcontent-%COMP%]{background:#f8f9fa;padding:.75rem;border-radius:6px;margin-top:1rem;color:#666;font-size:.9rem;border-right:3px solid #667eea}.class-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding-top:1rem;border-top:1px solid #eee}.status-enrolled[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-not-enrolled[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #eee;background:#f8f9fa;border-radius:0 0 12px 12px}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{margin:10px;max-height:95vh}.class-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.class-actions[_ngcontent-%COMP%]{flex-wrap:wrap}}"]})};var nA=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:v0},{path:"home",component:_0,children:[{path:"lesson-management",component:x0},{path:"live-class",component:Eg},{path:"students-management",component:y0},{path:"students-management/:id",component:Tg},{path:"add-student-to-classes-modal/:id",component:Dg},{path:"teachers-management",component:Ag},{path:"rooms-management",component:wg},{path:"payments-management",component:Mg},{path:"cards-management",component:Sg},{path:"",redirectTo:"lesson-management",pathMatch:"full"}]}];var iA={providers:[by(nA),qx()]};var Pg=class n{title="adminApp";onWindowClick(e){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Jt({type:n,selectors:[["app-root"]],hostBindings:function(t,i){t&1&&O("click",function(o){return i.onWindowClick(o)},!1,po)},decls:1,vars:0,template:function(t,i){t&1&&P(0,"router-outlet")},dependencies:[cn,_d,ka],styles:["[_ngcontent-%COMP%]:root{--main-blue: #0a66c2;--dark-blue: #004182;--glass-bg: rgba(255, 255, 255, .12);--glass-border: rgba(255, 255, 255, .2);--text-light: #ffffff;--text-dark: #1e293b;--shadow-light: rgba(0, 0, 0, .1);--shadow-dark: rgba(0, 0, 0, .3)}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.app-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1;background:linear-gradient(135deg,#0a66c2f2,#004182f2),url(https://images.unsplash.com/photo-1509062522246-3755977927d7?q=80&w=2000);background-size:cover;background-position:center;background-attachment:fixed;display:flex;flex-direction:column;overflow:hidden}.mobile-menu-toggle[_ngcontent-%COMP%]{display:none;position:fixed;top:20px;right:20px;z-index:1002;background:var(--glass-bg);backdrop-filter:blur(15px);border:1px solid var(--glass-border);border-radius:10px;width:45px;height:45px;display:flex;align-items:center;justify-content:center;color:var(--text-light);font-size:1.5rem;cursor:pointer;transition:all .3s ease}.mobile-menu-toggle[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.main-content[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.app-sidebar[_ngcontent-%COMP%]{width:280px;flex-shrink:0;transition:transform .3s ease;z-index:1000}.content-area[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;position:relative}.page-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;width:100%}.glass-panel[_ngcontent-%COMP%]{background:#fffffff2;backdrop-filter:blur(10px);border-radius:20px;padding:25px;box-shadow:0 15px 35px var(--shadow-dark);color:var(--text-dark);border:1px solid rgba(255,255,255,.3);margin-bottom:20px}.blue-glass-panel[_ngcontent-%COMP%]{background:#ffffff26;backdrop-filter:blur(20px);border-radius:20px;padding:25px;color:var(--text-light);border:1px solid var(--glass-border);margin-bottom:20px}.sidebar-overlay[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;z-index:999;opacity:0;visibility:hidden;transition:all .3s ease}.sidebar-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}@media (max-width: 1024px){.content-area[_ngcontent-%COMP%]{padding:15px}.glass-panel[_ngcontent-%COMP%], .blue-glass-panel[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 768px){.mobile-menu-toggle[_ngcontent-%COMP%]{display:flex}.app-sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-280px;height:100%;transform:translate(100%);transition:transform .3s ease}.app-sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}.stats-container[_ngcontent-%COMP%]{display:none!important}.sidebar-overlay[_ngcontent-%COMP%]{display:block}.glass-header[_ngcontent-%COMP%]{padding:0 15px;height:60px}.content-area[_ngcontent-%COMP%]{padding:80px 15px 20px}.glass-panel[_ngcontent-%COMP%], .blue-glass-panel[_ngcontent-%COMP%]{padding:15px;border-radius:15px;margin-bottom:15px}body.sidebar-open[_ngcontent-%COMP%]{overflow:hidden}}@media (max-width: 480px){.mobile-menu-toggle[_ngcontent-%COMP%]{top:15px;right:15px;width:40px;height:40px;font-size:1.3rem}.content-area[_ngcontent-%COMP%]{padding:70px 10px 10px}.glass-panel[_ngcontent-%COMP%], .blue-glass-panel[_ngcontent-%COMP%]{padding:12px;border-radius:12px}}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:4px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:4px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.page-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c!important;backdrop-filter:blur(10px);display:flex!important;align-items:center;justify-content:center;z-index:9999!important;padding:20px;opacity:1;visibility:visible}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:20px;width:100%;max-width:600px;max-height:85vh;overflow-y:auto;box-shadow:0 25px 60px #0006;animation:_ngcontent-%COMP%_modalSlideIn .3s ease;position:relative;z-index:10000}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}.modal-lg[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{padding:24px 32px;border-bottom:2px solid #f3f4f6;display:flex;justify-content:space-between;align-items:center;background:#fff;border-radius:20px 20px 0 0;position:sticky;top:0;z-index:1}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:24px;font-weight:700}.close-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:12px;background:#f3f4f6;border:none;display:flex;align-items:center;justify-content:center;color:#6b7280;cursor:pointer;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff}.modal-body[_ngcontent-%COMP%]{padding:32px}.modal-footer[_ngcontent-%COMP%]{padding:24px 32px;border-top:2px solid #f3f4f6;display:flex;justify-content:flex-end;gap:12px;background:#fff;border-radius:0 0 20px 20px;position:sticky;bottom:0}"]})};Gx(Pg,iA).catch(n=>console.error(n));
